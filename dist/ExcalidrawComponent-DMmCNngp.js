import { ab as pl, ag as gi, j as h, aM as fx, B as OU, u as px, b as Ux, w as mx, R as gx, C as Tc, aN as _c, N as bx, k as vx, K as _h, e as xx, r as yx } from "./index-CSHQHh7d.js";
import * as z from "react";
import Y, { useCallback as Te, useReducer as A5, useEffect as Q, useDebugValue as wx, useContext as Cn, createContext as Ql, useRef as ie, useLayoutEffect as Mn, useState as re, useMemo as nt, createElement as st, forwardRef as Ot, Children as Wn, isValidElement as ur, cloneElement as lc, Fragment as x0, version as Ex, useImperativeHandle as j5, memo as xs, useDeferredValue as Sx } from "react";
import { I as kx } from "./ImageResizer-BKFzdk7y.js";
import * as D5 from "react-dom";
import Mx, { flushSync as Pa, unstable_batchedUpdates as y0, createPortal as w0 } from "react-dom";
var ve = { VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/", VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/", VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com", VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries", VITE_APP_PLUS_LP: "https://plus.excalidraw.com", VITE_APP_PLUS_APP: "https://app.excalidraw.com", VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com", VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com", VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}', VITE_APP_ENABLE_TRACKING: "false", VITE_APP_PLUS_EXPORT_PUBLIC_KEY: `MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`, VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX: "false", VITE_APP_COLLAPSE_OVERLAY: "false", VITE_APP_ENABLE_ESLINT: "false", PKG_NAME: "@excalidraw/excalidraw", PKG_VERSION: "0.18.0", PROD: !0 }, L5 = Object.defineProperty, Cx = (e, t, n) => t in e ? L5(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, fZ = ((e) => typeof require < "u" ? require : typeof Proxy < "u" ? new Proxy(e, { get: (t, n) => (typeof require < "u" ? require : t)[n] }) : e)(function(e) {
  if (typeof require < "u") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + e + '" is not supported');
}), Ix = (e) => (t) => {
  var n = e[t];
  if (n) return n();
  throw new Error("Module not found in bundle: " + t);
}, R5 = (e, t) => {
  for (var n in t) L5(e, n, { get: t[n], enumerable: !0 });
}, j = (e, t, n) => (Cx(e, typeof t != "symbol" ? t + "" : t, n), n), E0 = {};
(function(e) {
  (function(t) {
    t(typeof DO_NOT_EXPORT_CRC > "u" ? e : {});
  })(function(t) {
    t.version = "0.3.0";
    function n() {
      for (var d = 0, o = new Array(256), u = 0; u != 256; ++u)
        d = u, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, o[u] = d;
      return typeof Int32Array < "u" ? new Int32Array(o) : o;
    }
    var a = n(), i = typeof Buffer < "u";
    function r(d) {
      if (d.length > 32768 && i) return s(new Buffer(d));
      for (var o = -1, u = d.length - 1, f = 0; f < u; )
        o = a[(o ^ d.charCodeAt(f++)) & 255] ^ o >>> 8, o = a[(o ^ d.charCodeAt(f++)) & 255] ^ o >>> 8;
      return f === u && (o = o >>> 8 ^ a[(o ^ d.charCodeAt(f)) & 255]), o ^ -1;
    }
    function l(d) {
      if (d.length > 1e4) return s(d);
      for (var o = -1, u = 0, f = d.length - 3; u < f; )
        o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255];
      for (; u < f + 3; ) o = o >>> 8 ^ a[(o ^ d[u++]) & 255];
      return o ^ -1;
    }
    function s(d) {
      for (var o = -1, u = 0, f = d.length - 7; u < f; )
        o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255], o = o >>> 8 ^ a[(o ^ d[u++]) & 255];
      for (; u < f + 7; ) o = o >>> 8 ^ a[(o ^ d[u++]) & 255];
      return o ^ -1;
    }
    function c(d) {
      for (var o = -1, u = 0, f = d.length, p, U; u < f; )
        p = d.charCodeAt(u++), p < 128 ? o = o >>> 8 ^ a[(o ^ p) & 255] : p < 2048 ? (o = o >>> 8 ^ a[(o ^ (192 | p >> 6 & 31)) & 255], o = o >>> 8 ^ a[(o ^ (128 | p & 63)) & 255]) : p >= 55296 && p < 57344 ? (p = (p & 1023) + 64, U = d.charCodeAt(u++) & 1023, o = o >>> 8 ^ a[(o ^ (240 | p >> 8 & 7)) & 255], o = o >>> 8 ^ a[(o ^ (128 | p >> 2 & 63)) & 255], o = o >>> 8 ^ a[(o ^ (128 | U >> 6 & 15 | p & 3)) & 255], o = o >>> 8 ^ a[(o ^ (128 | U & 63)) & 255]) : (o = o >>> 8 ^ a[(o ^ (224 | p >> 12 & 15)) & 255], o = o >>> 8 ^ a[(o ^ (128 | p >> 6 & 63)) & 255], o = o >>> 8 ^ a[(o ^ (128 | p & 63)) & 255]);
      return o ^ -1;
    }
    t.table = a, t.bstr = r, t.buf = l, t.str = c;
  });
})(E0);
var Tx = E0, _x = Dx, ja = new Uint8Array(4), Ax = new Int32Array(ja.buffer), jx = new Uint32Array(ja.buffer);
function Dx(e) {
  if (e[0] !== 137) throw new Error("Invalid .png file header");
  if (e[1] !== 80) throw new Error("Invalid .png file header");
  if (e[2] !== 78) throw new Error("Invalid .png file header");
  if (e[3] !== 71) throw new Error("Invalid .png file header");
  if (e[4] !== 13) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  if (e[5] !== 10) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  if (e[6] !== 26) throw new Error("Invalid .png file header");
  if (e[7] !== 10) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  for (var t = !1, n = [], a = 8; a < e.length; ) {
    ja[3] = e[a++], ja[2] = e[a++], ja[1] = e[a++], ja[0] = e[a++];
    var i = jx[0] + 4, r = new Uint8Array(i);
    r[0] = e[a++], r[1] = e[a++], r[2] = e[a++], r[3] = e[a++];
    var l = String.fromCharCode(r[0]) + String.fromCharCode(r[1]) + String.fromCharCode(r[2]) + String.fromCharCode(r[3]);
    if (!n.length && l !== "IHDR")
      throw new Error("IHDR header missing");
    if (l === "IEND") {
      t = !0, n.push({
        name: l,
        data: new Uint8Array(0)
      });
      break;
    }
    for (var s = 4; s < i; s++)
      r[s] = e[a++];
    ja[3] = e[a++], ja[2] = e[a++], ja[1] = e[a++], ja[0] = e[a++];
    var c = Ax[0], d = Tx.buf(r);
    if (d !== c)
      throw new Error(
        "CRC values for " + l + " header do not match, PNG file is likely corrupted"
      );
    var o = new Uint8Array(r.buffer.slice(4));
    n.push({
      name: l,
      data: o
    });
  }
  if (!t)
    throw new Error(".png file ended prematurely: no IEND header was found");
  return n;
}
const P5 = /* @__PURE__ */ pl(_x);
var Du = {}, Lx = Rx;
function Rx(e, t) {
  if (e = String(e), t = String(t), !/^[\x00-\xFF]+$/.test(e) || !/^[\x00-\xFF]+$/.test(t))
    throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");
  if (e.length >= 80)
    throw new Error('Keyword "' + e + '" is longer than the 79-character limit imposed by the PNG specification');
  for (var n = e.length + t.length + 1, a = new Uint8Array(n), i = 0, r, l = 0; l < e.length; l++) {
    if (!(r = e.charCodeAt(l)))
      throw new Error("0x00 character is not permitted in tEXt keywords");
    a[i++] = r;
  }
  a[i++] = 0;
  for (var s = 0; s < t.length; s++) {
    if (!(r = t.charCodeAt(s)))
      throw new Error("0x00 character is not permitted in tEXt content");
    a[i++] = r;
  }
  return {
    name: "tEXt",
    data: a
  };
}
var Px = Nx;
function Nx(e) {
  e.data && e.name && (e = e.data);
  for (var t = !0, n = "", a = "", i = 0; i < e.length; i++) {
    var r = e[i];
    if (t)
      r ? a += String.fromCharCode(r) : t = !1;
    else if (r)
      n += String.fromCharCode(r);
    else
      throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");
  }
  return {
    keyword: a,
    text: n
  };
}
Du.encode = Lx;
Du.decode = Px;
var Ox = function(e, t, n) {
  var a = [], i = e.length;
  if (i === 0) return a;
  var r = t < 0 ? Math.max(0, t + i) : t || 0;
  for (n !== void 0 && (i = n < 0 ? n + i : n); i-- > r; )
    a[i - r] = e[i];
  return a;
}, $x = Ox, Fx = E0, zx = Xx, Da = new Uint8Array(4), Bx = new Int32Array(Da.buffer), Hx = new Uint32Array(Da.buffer);
function Xx(e) {
  var t = 8, n = t, a;
  for (a = 0; a < e.length; a++)
    t += e[a].data.length, t += 12;
  var i = new Uint8Array(t);
  for (i[0] = 137, i[1] = 80, i[2] = 78, i[3] = 71, i[4] = 13, i[5] = 10, i[6] = 26, i[7] = 10, a = 0; a < e.length; a++) {
    var r = e[a], l = r.name, s = r.data, c = s.length, d = [
      l.charCodeAt(0),
      l.charCodeAt(1),
      l.charCodeAt(2),
      l.charCodeAt(3)
    ];
    Hx[0] = c, i[n++] = Da[3], i[n++] = Da[2], i[n++] = Da[1], i[n++] = Da[0], i[n++] = d[0], i[n++] = d[1], i[n++] = d[2], i[n++] = d[3];
    for (var o = 0; o < c; )
      i[n++] = s[o++];
    var u = d.concat($x(s)), f = Fx.buf(u);
    Bx[0] = f, i[n++] = Da[3], i[n++] = Da[2], i[n++] = Da[1], i[n++] = Da[0];
  }
  return i;
}
const Wx = /* @__PURE__ */ pl(zx);
/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */
const Vx = 4, $U = 0, FU = 1, Gx = 2;
function ys(e) {
  let t = e.length;
  for (; --t >= 0; )
    e[t] = 0;
}
const Yx = 0, N5 = 1, Zx = 2, Kx = 3, qx = 258, S0 = 29, sc = 256, To = sc + 1 + S0, Vl = 30, k0 = 19, O5 = 2 * To + 1, $r = 15, Ah = 16, Jx = 7, M0 = 256, $5 = 16, F5 = 17, z5 = 18, Kf = (
  /* extra bits for each length code */
  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0])
), sd = (
  /* extra bits for each distance code */
  new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13])
), Qx = (
  /* extra bits for each bit length code */
  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7])
), B5 = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), ey = 512, fi = new Array((To + 2) * 2);
ys(fi);
const ho = new Array(Vl * 2);
ys(ho);
const _o = new Array(ey);
ys(_o);
const Ao = new Array(qx - Kx + 1);
ys(Ao);
const C0 = new Array(S0);
ys(C0);
const Od = new Array(Vl);
ys(Od);
function jh(e, t, n, a, i) {
  this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = a, this.max_length = i, this.has_stree = e && e.length;
}
let H5, X5, W5;
function Dh(e, t) {
  this.dyn_tree = e, this.max_code = 0, this.stat_desc = t;
}
const V5 = (e) => e < 256 ? _o[e] : _o[256 + (e >>> 7)], jo = (e, t) => {
  e.pending_buf[e.pending++] = t & 255, e.pending_buf[e.pending++] = t >>> 8 & 255;
}, wn = (e, t, n) => {
  e.bi_valid > Ah - n ? (e.bi_buf |= t << e.bi_valid & 65535, jo(e, e.bi_buf), e.bi_buf = t >> Ah - e.bi_valid, e.bi_valid += n - Ah) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n);
}, za = (e, t, n) => {
  wn(
    e,
    n[t * 2],
    n[t * 2 + 1]
    /*.Len*/
  );
}, G5 = (e, t) => {
  let n = 0;
  do
    n |= e & 1, e >>>= 1, n <<= 1;
  while (--t > 0);
  return n >>> 1;
}, ty = (e) => {
  e.bi_valid === 16 ? (jo(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = e.bi_buf & 255, e.bi_buf >>= 8, e.bi_valid -= 8);
}, ny = (e, t) => {
  const n = t.dyn_tree, a = t.max_code, i = t.stat_desc.static_tree, r = t.stat_desc.has_stree, l = t.stat_desc.extra_bits, s = t.stat_desc.extra_base, c = t.stat_desc.max_length;
  let d, o, u, f, p, U, m = 0;
  for (f = 0; f <= $r; f++)
    e.bl_count[f] = 0;
  for (n[e.heap[e.heap_max] * 2 + 1] = 0, d = e.heap_max + 1; d < O5; d++)
    o = e.heap[d], f = n[n[o * 2 + 1] * 2 + 1] + 1, f > c && (f = c, m++), n[o * 2 + 1] = f, !(o > a) && (e.bl_count[f]++, p = 0, o >= s && (p = l[o - s]), U = n[o * 2], e.opt_len += U * (f + p), r && (e.static_len += U * (i[o * 2 + 1] + p)));
  if (m !== 0) {
    do {
      for (f = c - 1; e.bl_count[f] === 0; )
        f--;
      e.bl_count[f]--, e.bl_count[f + 1] += 2, e.bl_count[c]--, m -= 2;
    } while (m > 0);
    for (f = c; f !== 0; f--)
      for (o = e.bl_count[f]; o !== 0; )
        u = e.heap[--d], !(u > a) && (n[u * 2 + 1] !== f && (e.opt_len += (f - n[u * 2 + 1]) * n[u * 2], n[u * 2 + 1] = f), o--);
  }
}, Y5 = (e, t, n) => {
  const a = new Array($r + 1);
  let i = 0, r, l;
  for (r = 1; r <= $r; r++)
    a[r] = i = i + n[r - 1] << 1;
  for (l = 0; l <= t; l++) {
    let s = e[l * 2 + 1];
    s !== 0 && (e[l * 2] = G5(a[s]++, s));
  }
}, ay = () => {
  let e, t, n, a, i;
  const r = new Array($r + 1);
  for (n = 0, a = 0; a < S0 - 1; a++)
    for (C0[a] = n, e = 0; e < 1 << Kf[a]; e++)
      Ao[n++] = a;
  for (Ao[n - 1] = a, i = 0, a = 0; a < 16; a++)
    for (Od[a] = i, e = 0; e < 1 << sd[a]; e++)
      _o[i++] = a;
  for (i >>= 7; a < Vl; a++)
    for (Od[a] = i << 7, e = 0; e < 1 << sd[a] - 7; e++)
      _o[256 + i++] = a;
  for (t = 0; t <= $r; t++)
    r[t] = 0;
  for (e = 0; e <= 143; )
    fi[e * 2 + 1] = 8, e++, r[8]++;
  for (; e <= 255; )
    fi[e * 2 + 1] = 9, e++, r[9]++;
  for (; e <= 279; )
    fi[e * 2 + 1] = 7, e++, r[7]++;
  for (; e <= 287; )
    fi[e * 2 + 1] = 8, e++, r[8]++;
  for (Y5(fi, To + 1, r), e = 0; e < Vl; e++)
    ho[e * 2 + 1] = 5, ho[e * 2] = G5(e, 5);
  H5 = new jh(fi, Kf, sc + 1, To, $r), X5 = new jh(ho, sd, 0, Vl, $r), W5 = new jh(new Array(0), Qx, 0, k0, Jx);
}, Z5 = (e) => {
  let t;
  for (t = 0; t < To; t++)
    e.dyn_ltree[t * 2] = 0;
  for (t = 0; t < Vl; t++)
    e.dyn_dtree[t * 2] = 0;
  for (t = 0; t < k0; t++)
    e.bl_tree[t * 2] = 0;
  e.dyn_ltree[M0 * 2] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0;
}, K5 = (e) => {
  e.bi_valid > 8 ? jo(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0;
}, iy = (e, t, n, a) => {
  K5(e), jo(e, n), jo(e, ~n), e.pending_buf.set(e.window.subarray(t, t + n), e.pending), e.pending += n;
}, zU = (e, t, n, a) => {
  const i = t * 2, r = n * 2;
  return e[i] < e[r] || e[i] === e[r] && a[t] <= a[n];
}, Lh = (e, t, n) => {
  const a = e.heap[n];
  let i = n << 1;
  for (; i <= e.heap_len && (i < e.heap_len && zU(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !zU(t, a, e.heap[i], e.depth)); )
    e.heap[n] = e.heap[i], n = i, i <<= 1;
  e.heap[n] = a;
}, BU = (e, t, n) => {
  let a, i, r = 0, l, s;
  if (e.last_lit !== 0)
    do
      a = e.pending_buf[e.d_buf + r * 2] << 8 | e.pending_buf[e.d_buf + r * 2 + 1], i = e.pending_buf[e.l_buf + r], r++, a === 0 ? za(e, i, t) : (l = Ao[i], za(e, l + sc + 1, t), s = Kf[l], s !== 0 && (i -= C0[l], wn(e, i, s)), a--, l = V5(a), za(e, l, n), s = sd[l], s !== 0 && (a -= Od[l], wn(e, a, s)));
    while (r < e.last_lit);
  za(e, M0, t);
}, qf = (e, t) => {
  const n = t.dyn_tree, a = t.stat_desc.static_tree, i = t.stat_desc.has_stree, r = t.stat_desc.elems;
  let l, s, c = -1, d;
  for (e.heap_len = 0, e.heap_max = O5, l = 0; l < r; l++)
    n[l * 2] !== 0 ? (e.heap[++e.heap_len] = c = l, e.depth[l] = 0) : n[l * 2 + 1] = 0;
  for (; e.heap_len < 2; )
    d = e.heap[++e.heap_len] = c < 2 ? ++c : 0, n[d * 2] = 1, e.depth[d] = 0, e.opt_len--, i && (e.static_len -= a[d * 2 + 1]);
  for (t.max_code = c, l = e.heap_len >> 1; l >= 1; l--)
    Lh(e, n, l);
  d = r;
  do
    l = e.heap[
      1
      /*SMALLEST*/
    ], e.heap[
      1
      /*SMALLEST*/
    ] = e.heap[e.heap_len--], Lh(
      e,
      n,
      1
      /*SMALLEST*/
    ), s = e.heap[
      1
      /*SMALLEST*/
    ], e.heap[--e.heap_max] = l, e.heap[--e.heap_max] = s, n[d * 2] = n[l * 2] + n[s * 2], e.depth[d] = (e.depth[l] >= e.depth[s] ? e.depth[l] : e.depth[s]) + 1, n[l * 2 + 1] = n[s * 2 + 1] = d, e.heap[
      1
      /*SMALLEST*/
    ] = d++, Lh(
      e,
      n,
      1
      /*SMALLEST*/
    );
  while (e.heap_len >= 2);
  e.heap[--e.heap_max] = e.heap[
    1
    /*SMALLEST*/
  ], ny(e, t), Y5(n, c, e.bl_count);
}, HU = (e, t, n) => {
  let a, i = -1, r, l = t[0 * 2 + 1], s = 0, c = 7, d = 4;
  for (l === 0 && (c = 138, d = 3), t[(n + 1) * 2 + 1] = 65535, a = 0; a <= n; a++)
    r = l, l = t[(a + 1) * 2 + 1], !(++s < c && r === l) && (s < d ? e.bl_tree[r * 2] += s : r !== 0 ? (r !== i && e.bl_tree[r * 2]++, e.bl_tree[$5 * 2]++) : s <= 10 ? e.bl_tree[F5 * 2]++ : e.bl_tree[z5 * 2]++, s = 0, i = r, l === 0 ? (c = 138, d = 3) : r === l ? (c = 6, d = 3) : (c = 7, d = 4));
}, XU = (e, t, n) => {
  let a, i = -1, r, l = t[0 * 2 + 1], s = 0, c = 7, d = 4;
  for (l === 0 && (c = 138, d = 3), a = 0; a <= n; a++)
    if (r = l, l = t[(a + 1) * 2 + 1], !(++s < c && r === l)) {
      if (s < d)
        do
          za(e, r, e.bl_tree);
        while (--s !== 0);
      else r !== 0 ? (r !== i && (za(e, r, e.bl_tree), s--), za(e, $5, e.bl_tree), wn(e, s - 3, 2)) : s <= 10 ? (za(e, F5, e.bl_tree), wn(e, s - 3, 3)) : (za(e, z5, e.bl_tree), wn(e, s - 11, 7));
      s = 0, i = r, l === 0 ? (c = 138, d = 3) : r === l ? (c = 6, d = 3) : (c = 7, d = 4);
    }
}, ry = (e) => {
  let t;
  for (HU(e, e.dyn_ltree, e.l_desc.max_code), HU(e, e.dyn_dtree, e.d_desc.max_code), qf(e, e.bl_desc), t = k0 - 1; t >= 3 && e.bl_tree[B5[t] * 2 + 1] === 0; t--)
    ;
  return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t;
}, ly = (e, t, n, a) => {
  let i;
  for (wn(e, t - 257, 5), wn(e, n - 1, 5), wn(e, a - 4, 4), i = 0; i < a; i++)
    wn(e, e.bl_tree[B5[i] * 2 + 1], 3);
  XU(e, e.dyn_ltree, t - 1), XU(e, e.dyn_dtree, n - 1);
}, sy = (e) => {
  let t = 4093624447, n;
  for (n = 0; n <= 31; n++, t >>>= 1)
    if (t & 1 && e.dyn_ltree[n * 2] !== 0)
      return $U;
  if (e.dyn_ltree[9 * 2] !== 0 || e.dyn_ltree[10 * 2] !== 0 || e.dyn_ltree[13 * 2] !== 0)
    return FU;
  for (n = 32; n < sc; n++)
    if (e.dyn_ltree[n * 2] !== 0)
      return FU;
  return $U;
};
let WU = !1;
const oy = (e) => {
  WU || (ay(), WU = !0), e.l_desc = new Dh(e.dyn_ltree, H5), e.d_desc = new Dh(e.dyn_dtree, X5), e.bl_desc = new Dh(e.bl_tree, W5), e.bi_buf = 0, e.bi_valid = 0, Z5(e);
}, q5 = (e, t, n, a) => {
  wn(e, (Yx << 1) + (a ? 1 : 0), 3), iy(e, t, n);
}, cy = (e) => {
  wn(e, N5 << 1, 3), za(e, M0, fi), ty(e);
}, dy = (e, t, n, a) => {
  let i, r, l = 0;
  e.level > 0 ? (e.strm.data_type === Gx && (e.strm.data_type = sy(e)), qf(e, e.l_desc), qf(e, e.d_desc), l = ry(e), i = e.opt_len + 3 + 7 >>> 3, r = e.static_len + 3 + 7 >>> 3, r <= i && (i = r)) : i = r = n + 5, n + 4 <= i && t !== -1 ? q5(e, t, n, a) : e.strategy === Vx || r === i ? (wn(e, (N5 << 1) + (a ? 1 : 0), 3), BU(e, fi, ho)) : (wn(e, (Zx << 1) + (a ? 1 : 0), 3), ly(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, l + 1), BU(e, e.dyn_ltree, e.dyn_dtree)), Z5(e), a && K5(e);
}, uy = (e, t, n) => (e.pending_buf[e.d_buf + e.last_lit * 2] = t >>> 8 & 255, e.pending_buf[e.d_buf + e.last_lit * 2 + 1] = t & 255, e.pending_buf[e.l_buf + e.last_lit] = n & 255, e.last_lit++, t === 0 ? e.dyn_ltree[n * 2]++ : (e.matches++, t--, e.dyn_ltree[(Ao[n] + sc + 1) * 2]++, e.dyn_dtree[V5(t) * 2]++), e.last_lit === e.lit_bufsize - 1);
var hy = oy, fy = q5, py = dy, Uy = uy, my = cy, gy = {
  _tr_init: hy,
  _tr_stored_block: fy,
  _tr_flush_block: py,
  _tr_tally: Uy,
  _tr_align: my
};
const by = (e, t, n, a) => {
  let i = e & 65535 | 0, r = e >>> 16 & 65535 | 0, l = 0;
  for (; n !== 0; ) {
    l = n > 2e3 ? 2e3 : n, n -= l;
    do
      i = i + t[a++] | 0, r = r + i | 0;
    while (--l);
    i %= 65521, r %= 65521;
  }
  return i | r << 16 | 0;
};
var Do = by;
const vy = () => {
  let e, t = [];
  for (var n = 0; n < 256; n++) {
    e = n;
    for (var a = 0; a < 8; a++)
      e = e & 1 ? 3988292384 ^ e >>> 1 : e >>> 1;
    t[n] = e;
  }
  return t;
}, xy = new Uint32Array(vy()), yy = (e, t, n, a) => {
  const i = xy, r = a + n;
  e ^= -1;
  for (let l = a; l < r; l++)
    e = e >>> 8 ^ i[(e ^ t[l]) & 255];
  return e ^ -1;
};
var Bt = yy, Jr = {
  2: "need dictionary",
  /* Z_NEED_DICT       2  */
  1: "stream end",
  /* Z_STREAM_END      1  */
  0: "",
  /* Z_OK              0  */
  "-1": "file error",
  /* Z_ERRNO         (-1) */
  "-2": "stream error",
  /* Z_STREAM_ERROR  (-2) */
  "-3": "data error",
  /* Z_DATA_ERROR    (-3) */
  "-4": "insufficient memory",
  /* Z_MEM_ERROR     (-4) */
  "-5": "buffer error",
  /* Z_BUF_ERROR     (-5) */
  "-6": "incompatible version"
  /* Z_VERSION_ERROR (-6) */
}, Lu = {
  /* Allowed flush values; see deflate() and inflate() below for details */
  Z_NO_FLUSH: 0,
  Z_PARTIAL_FLUSH: 1,
  Z_SYNC_FLUSH: 2,
  Z_FULL_FLUSH: 3,
  Z_FINISH: 4,
  Z_BLOCK: 5,
  Z_TREES: 6,
  /* Return codes for the compression/decompression functions. Negative values
  * are errors, positive values are used for special but normal events.
  */
  Z_OK: 0,
  Z_STREAM_END: 1,
  Z_NEED_DICT: 2,
  Z_STREAM_ERROR: -2,
  Z_DATA_ERROR: -3,
  Z_MEM_ERROR: -4,
  Z_BUF_ERROR: -5,
  Z_DEFAULT_COMPRESSION: -1,
  Z_FILTERED: 1,
  Z_HUFFMAN_ONLY: 2,
  Z_RLE: 3,
  Z_FIXED: 4,
  Z_DEFAULT_STRATEGY: 0,
  //Z_ASCII:                1, // = Z_TEXT (deprecated)
  Z_UNKNOWN: 2,
  /* The deflate compression method */
  Z_DEFLATED: 8
  //Z_NULL:                 null // Use -1 or null inline, depending on var type
};
const { _tr_init: wy, _tr_stored_block: Ey, _tr_flush_block: Sy, _tr_tally: rr, _tr_align: ky } = gy, {
  Z_NO_FLUSH: Ul,
  Z_PARTIAL_FLUSH: My,
  Z_FULL_FLUSH: Cy,
  Z_FINISH: lr,
  Z_BLOCK: VU,
  Z_OK: Ba,
  Z_STREAM_END: GU,
  Z_STREAM_ERROR: Vn,
  Z_DATA_ERROR: Iy,
  Z_BUF_ERROR: Rh,
  Z_DEFAULT_COMPRESSION: Ty,
  Z_FILTERED: _y,
  Z_HUFFMAN_ONLY: Ac,
  Z_RLE: Ay,
  Z_FIXED: jy,
  Z_DEFAULT_STRATEGY: Dy,
  Z_UNKNOWN: Ly,
  Z_DEFLATED: Ru
} = Lu, Ry = 9, Py = 15, Ny = 8, Oy = 29, $y = 256, Jf = $y + 1 + Oy, Fy = 30, zy = 19, By = 2 * Jf + 1, Hy = 15, Ie = 3, er = 258, pa = er + Ie + 1, Xy = 32, Pu = 42, Qf = 69, od = 73, cd = 91, dd = 103, Fr = 113, Js = 666, Nt = 1, oc = 2, Qr = 3, ws = 4, Wy = 3, tr = (e, t) => (e.msg = Jr[t], t), YU = (e) => (e << 1) - (e > 4 ? 9 : 0), Qi = (e) => {
  let t = e.length;
  for (; --t >= 0; )
    e[t] = 0;
};
let Vy = (e, t, n) => (t << e.hash_shift ^ n) & e.hash_mask, sr = Vy;
const Vi = (e) => {
  const t = e.state;
  let n = t.pending;
  n > e.avail_out && (n = e.avail_out), n !== 0 && (e.output.set(t.pending_buf.subarray(t.pending_out, t.pending_out + n), e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, t.pending === 0 && (t.pending_out = 0));
}, Kt = (e, t) => {
  Sy(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, Vi(e.strm);
}, $e = (e, t) => {
  e.pending_buf[e.pending++] = t;
}, Ls = (e, t) => {
  e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = t & 255;
}, Gy = (e, t, n, a) => {
  let i = e.avail_in;
  return i > a && (i = a), i === 0 ? 0 : (e.avail_in -= i, t.set(e.input.subarray(e.next_in, e.next_in + i), n), e.state.wrap === 1 ? e.adler = Do(e.adler, t, i, n) : e.state.wrap === 2 && (e.adler = Bt(e.adler, t, i, n)), e.next_in += i, e.total_in += i, i);
}, J5 = (e, t) => {
  let n = e.max_chain_length, a = e.strstart, i, r, l = e.prev_length, s = e.nice_match;
  const c = e.strstart > e.w_size - pa ? e.strstart - (e.w_size - pa) : 0, d = e.window, o = e.w_mask, u = e.prev, f = e.strstart + er;
  let p = d[a + l - 1], U = d[a + l];
  e.prev_length >= e.good_match && (n >>= 2), s > e.lookahead && (s = e.lookahead);
  do
    if (i = t, !(d[i + l] !== U || d[i + l - 1] !== p || d[i] !== d[a] || d[++i] !== d[a + 1])) {
      a += 2, i++;
      do
        ;
      while (d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && a < f);
      if (r = er - (f - a), a = f - er, r > l) {
        if (e.match_start = t, l = r, r >= s)
          break;
        p = d[a + l - 1], U = d[a + l];
      }
    }
  while ((t = u[t & o]) > c && --n !== 0);
  return l <= e.lookahead ? l : e.lookahead;
}, el = (e) => {
  const t = e.w_size;
  let n, a, i, r, l;
  do {
    if (r = e.window_size - e.lookahead - e.strstart, e.strstart >= t + (t - pa)) {
      e.window.set(e.window.subarray(t, t + t), 0), e.match_start -= t, e.strstart -= t, e.block_start -= t, a = e.hash_size, n = a;
      do
        i = e.head[--n], e.head[n] = i >= t ? i - t : 0;
      while (--a);
      a = t, n = a;
      do
        i = e.prev[--n], e.prev[n] = i >= t ? i - t : 0;
      while (--a);
      r += t;
    }
    if (e.strm.avail_in === 0)
      break;
    if (a = Gy(e.strm, e.window, e.strstart + e.lookahead, r), e.lookahead += a, e.lookahead + e.insert >= Ie)
      for (l = e.strstart - e.insert, e.ins_h = e.window[l], e.ins_h = sr(e, e.ins_h, e.window[l + 1]); e.insert && (e.ins_h = sr(e, e.ins_h, e.window[l + Ie - 1]), e.prev[l & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = l, l++, e.insert--, !(e.lookahead + e.insert < Ie)); )
        ;
  } while (e.lookahead < pa && e.strm.avail_in !== 0);
}, Yy = (e, t) => {
  let n = 65535;
  for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ; ) {
    if (e.lookahead <= 1) {
      if (el(e), e.lookahead === 0 && t === Ul)
        return Nt;
      if (e.lookahead === 0)
        break;
    }
    e.strstart += e.lookahead, e.lookahead = 0;
    const a = e.block_start + n;
    if ((e.strstart === 0 || e.strstart >= a) && (e.lookahead = e.strstart - a, e.strstart = a, Kt(e, !1), e.strm.avail_out === 0) || e.strstart - e.block_start >= e.w_size - pa && (Kt(e, !1), e.strm.avail_out === 0))
      return Nt;
  }
  return e.insert = 0, t === lr ? (Kt(e, !0), e.strm.avail_out === 0 ? Qr : ws) : (e.strstart > e.block_start && (Kt(e, !1), e.strm.avail_out === 0), Nt);
}, Ph = (e, t) => {
  let n, a;
  for (; ; ) {
    if (e.lookahead < pa) {
      if (el(e), e.lookahead < pa && t === Ul)
        return Nt;
      if (e.lookahead === 0)
        break;
    }
    if (n = 0, e.lookahead >= Ie && (e.ins_h = sr(e, e.ins_h, e.window[e.strstart + Ie - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), n !== 0 && e.strstart - n <= e.w_size - pa && (e.match_length = J5(e, n)), e.match_length >= Ie)
      if (a = rr(e, e.strstart - e.match_start, e.match_length - Ie), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= Ie) {
        e.match_length--;
        do
          e.strstart++, e.ins_h = sr(e, e.ins_h, e.window[e.strstart + Ie - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart;
        while (--e.match_length !== 0);
        e.strstart++;
      } else
        e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = sr(e, e.ins_h, e.window[e.strstart + 1]);
    else
      a = rr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
    if (a && (Kt(e, !1), e.strm.avail_out === 0))
      return Nt;
  }
  return e.insert = e.strstart < Ie - 1 ? e.strstart : Ie - 1, t === lr ? (Kt(e, !0), e.strm.avail_out === 0 ? Qr : ws) : e.last_lit && (Kt(e, !1), e.strm.avail_out === 0) ? Nt : oc;
}, xl = (e, t) => {
  let n, a, i;
  for (; ; ) {
    if (e.lookahead < pa) {
      if (el(e), e.lookahead < pa && t === Ul)
        return Nt;
      if (e.lookahead === 0)
        break;
    }
    if (n = 0, e.lookahead >= Ie && (e.ins_h = sr(e, e.ins_h, e.window[e.strstart + Ie - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = Ie - 1, n !== 0 && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - pa && (e.match_length = J5(e, n), e.match_length <= 5 && (e.strategy === _y || e.match_length === Ie && e.strstart - e.match_start > 4096) && (e.match_length = Ie - 1)), e.prev_length >= Ie && e.match_length <= e.prev_length) {
      i = e.strstart + e.lookahead - Ie, a = rr(e, e.strstart - 1 - e.prev_match, e.prev_length - Ie), e.lookahead -= e.prev_length - 1, e.prev_length -= 2;
      do
        ++e.strstart <= i && (e.ins_h = sr(e, e.ins_h, e.window[e.strstart + Ie - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart);
      while (--e.prev_length !== 0);
      if (e.match_available = 0, e.match_length = Ie - 1, e.strstart++, a && (Kt(e, !1), e.strm.avail_out === 0))
        return Nt;
    } else if (e.match_available) {
      if (a = rr(e, 0, e.window[e.strstart - 1]), a && Kt(e, !1), e.strstart++, e.lookahead--, e.strm.avail_out === 0)
        return Nt;
    } else
      e.match_available = 1, e.strstart++, e.lookahead--;
  }
  return e.match_available && (a = rr(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < Ie - 1 ? e.strstart : Ie - 1, t === lr ? (Kt(e, !0), e.strm.avail_out === 0 ? Qr : ws) : e.last_lit && (Kt(e, !1), e.strm.avail_out === 0) ? Nt : oc;
}, Zy = (e, t) => {
  let n, a, i, r;
  const l = e.window;
  for (; ; ) {
    if (e.lookahead <= er) {
      if (el(e), e.lookahead <= er && t === Ul)
        return Nt;
      if (e.lookahead === 0)
        break;
    }
    if (e.match_length = 0, e.lookahead >= Ie && e.strstart > 0 && (i = e.strstart - 1, a = l[i], a === l[++i] && a === l[++i] && a === l[++i])) {
      r = e.strstart + er;
      do
        ;
      while (a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && i < r);
      e.match_length = er - (r - i), e.match_length > e.lookahead && (e.match_length = e.lookahead);
    }
    if (e.match_length >= Ie ? (n = rr(e, 1, e.match_length - Ie), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = rr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (Kt(e, !1), e.strm.avail_out === 0))
      return Nt;
  }
  return e.insert = 0, t === lr ? (Kt(e, !0), e.strm.avail_out === 0 ? Qr : ws) : e.last_lit && (Kt(e, !1), e.strm.avail_out === 0) ? Nt : oc;
}, Ky = (e, t) => {
  let n;
  for (; ; ) {
    if (e.lookahead === 0 && (el(e), e.lookahead === 0)) {
      if (t === Ul)
        return Nt;
      break;
    }
    if (e.match_length = 0, n = rr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (Kt(e, !1), e.strm.avail_out === 0))
      return Nt;
  }
  return e.insert = 0, t === lr ? (Kt(e, !0), e.strm.avail_out === 0 ? Qr : ws) : e.last_lit && (Kt(e, !1), e.strm.avail_out === 0) ? Nt : oc;
};
function Ca(e, t, n, a, i) {
  this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = a, this.func = i;
}
const Qs = [
  /*      good lazy nice chain */
  new Ca(0, 0, 0, 0, Yy),
  /* 0 store only */
  new Ca(4, 4, 8, 4, Ph),
  /* 1 max speed, no lazy matches */
  new Ca(4, 5, 16, 8, Ph),
  /* 2 */
  new Ca(4, 6, 32, 32, Ph),
  /* 3 */
  new Ca(4, 4, 16, 16, xl),
  /* 4 lazy matches */
  new Ca(8, 16, 32, 32, xl),
  /* 5 */
  new Ca(8, 16, 128, 128, xl),
  /* 6 */
  new Ca(8, 32, 128, 256, xl),
  /* 7 */
  new Ca(32, 128, 258, 1024, xl),
  /* 8 */
  new Ca(32, 258, 258, 4096, xl)
  /* 9 max compression */
], qy = (e) => {
  e.window_size = 2 * e.w_size, Qi(e.head), e.max_lazy_match = Qs[e.level].max_lazy, e.good_match = Qs[e.level].good_length, e.nice_match = Qs[e.level].nice_length, e.max_chain_length = Qs[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = Ie - 1, e.match_available = 0, e.ins_h = 0;
};
function Jy() {
  this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = Ru, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(By * 2), this.dyn_dtree = new Uint16Array((2 * Fy + 1) * 2), this.bl_tree = new Uint16Array((2 * zy + 1) * 2), Qi(this.dyn_ltree), Qi(this.dyn_dtree), Qi(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(Hy + 1), this.heap = new Uint16Array(2 * Jf + 1), Qi(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(2 * Jf + 1), Qi(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
}
const Q5 = (e) => {
  if (!e || !e.state)
    return tr(e, Vn);
  e.total_in = e.total_out = 0, e.data_type = Ly;
  const t = e.state;
  return t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? Pu : Fr, e.adler = t.wrap === 2 ? 0 : 1, t.last_flush = Ul, wy(t), Ba;
}, eb = (e) => {
  const t = Q5(e);
  return t === Ba && qy(e.state), t;
}, Qy = (e, t) => !e || !e.state || e.state.wrap !== 2 ? Vn : (e.state.gzhead = t, Ba), tb = (e, t, n, a, i, r) => {
  if (!e)
    return Vn;
  let l = 1;
  if (t === Ty && (t = 6), a < 0 ? (l = 0, a = -a) : a > 15 && (l = 2, a -= 16), i < 1 || i > Ry || n !== Ru || a < 8 || a > 15 || t < 0 || t > 9 || r < 0 || r > jy)
    return tr(e, Vn);
  a === 8 && (a = 9);
  const s = new Jy();
  return e.state = s, s.strm = e, s.wrap = l, s.gzhead = null, s.w_bits = a, s.w_size = 1 << s.w_bits, s.w_mask = s.w_size - 1, s.hash_bits = i + 7, s.hash_size = 1 << s.hash_bits, s.hash_mask = s.hash_size - 1, s.hash_shift = ~~((s.hash_bits + Ie - 1) / Ie), s.window = new Uint8Array(s.w_size * 2), s.head = new Uint16Array(s.hash_size), s.prev = new Uint16Array(s.w_size), s.lit_bufsize = 1 << i + 6, s.pending_buf_size = s.lit_bufsize * 4, s.pending_buf = new Uint8Array(s.pending_buf_size), s.d_buf = 1 * s.lit_bufsize, s.l_buf = 3 * s.lit_bufsize, s.level = t, s.strategy = r, s.method = n, eb(e);
}, ew = (e, t) => tb(e, t, Ru, Py, Ny, Dy), tw = (e, t) => {
  let n, a;
  if (!e || !e.state || t > VU || t < 0)
    return e ? tr(e, Vn) : Vn;
  const i = e.state;
  if (!e.output || !e.input && e.avail_in !== 0 || i.status === Js && t !== lr)
    return tr(e, e.avail_out === 0 ? Rh : Vn);
  i.strm = e;
  const r = i.last_flush;
  if (i.last_flush = t, i.status === Pu)
    if (i.wrap === 2)
      e.adler = 0, $e(i, 31), $e(i, 139), $e(i, 8), i.gzhead ? ($e(
        i,
        (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)
      ), $e(i, i.gzhead.time & 255), $e(i, i.gzhead.time >> 8 & 255), $e(i, i.gzhead.time >> 16 & 255), $e(i, i.gzhead.time >> 24 & 255), $e(i, i.level === 9 ? 2 : i.strategy >= Ac || i.level < 2 ? 4 : 0), $e(i, i.gzhead.os & 255), i.gzhead.extra && i.gzhead.extra.length && ($e(i, i.gzhead.extra.length & 255), $e(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (e.adler = Bt(e.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = Qf) : ($e(i, 0), $e(i, 0), $e(i, 0), $e(i, 0), $e(i, 0), $e(i, i.level === 9 ? 2 : i.strategy >= Ac || i.level < 2 ? 4 : 0), $e(i, Wy), i.status = Fr);
    else {
      let l = Ru + (i.w_bits - 8 << 4) << 8, s = -1;
      i.strategy >= Ac || i.level < 2 ? s = 0 : i.level < 6 ? s = 1 : i.level === 6 ? s = 2 : s = 3, l |= s << 6, i.strstart !== 0 && (l |= Xy), l += 31 - l % 31, i.status = Fr, Ls(i, l), i.strstart !== 0 && (Ls(i, e.adler >>> 16), Ls(i, e.adler & 65535)), e.adler = 1;
    }
  if (i.status === Qf)
    if (i.gzhead.extra) {
      for (n = i.pending; i.gzindex < (i.gzhead.extra.length & 65535) && !(i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), Vi(e), n = i.pending, i.pending === i.pending_buf_size)); )
        $e(i, i.gzhead.extra[i.gzindex] & 255), i.gzindex++;
      i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = od);
    } else
      i.status = od;
  if (i.status === od)
    if (i.gzhead.name) {
      n = i.pending;
      do {
        if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), Vi(e), n = i.pending, i.pending === i.pending_buf_size)) {
          a = 1;
          break;
        }
        i.gzindex < i.gzhead.name.length ? a = i.gzhead.name.charCodeAt(i.gzindex++) & 255 : a = 0, $e(i, a);
      } while (a !== 0);
      i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), a === 0 && (i.gzindex = 0, i.status = cd);
    } else
      i.status = cd;
  if (i.status === cd)
    if (i.gzhead.comment) {
      n = i.pending;
      do {
        if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), Vi(e), n = i.pending, i.pending === i.pending_buf_size)) {
          a = 1;
          break;
        }
        i.gzindex < i.gzhead.comment.length ? a = i.gzhead.comment.charCodeAt(i.gzindex++) & 255 : a = 0, $e(i, a);
      } while (a !== 0);
      i.gzhead.hcrc && i.pending > n && (e.adler = Bt(e.adler, i.pending_buf, i.pending - n, n)), a === 0 && (i.status = dd);
    } else
      i.status = dd;
  if (i.status === dd && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && Vi(e), i.pending + 2 <= i.pending_buf_size && ($e(i, e.adler & 255), $e(i, e.adler >> 8 & 255), e.adler = 0, i.status = Fr)) : i.status = Fr), i.pending !== 0) {
    if (Vi(e), e.avail_out === 0)
      return i.last_flush = -1, Ba;
  } else if (e.avail_in === 0 && YU(t) <= YU(r) && t !== lr)
    return tr(e, Rh);
  if (i.status === Js && e.avail_in !== 0)
    return tr(e, Rh);
  if (e.avail_in !== 0 || i.lookahead !== 0 || t !== Ul && i.status !== Js) {
    let l = i.strategy === Ac ? Ky(i, t) : i.strategy === Ay ? Zy(i, t) : Qs[i.level].func(i, t);
    if ((l === Qr || l === ws) && (i.status = Js), l === Nt || l === Qr)
      return e.avail_out === 0 && (i.last_flush = -1), Ba;
    if (l === oc && (t === My ? ky(i) : t !== VU && (Ey(i, 0, 0, !1), t === Cy && (Qi(i.head), i.lookahead === 0 && (i.strstart = 0, i.block_start = 0, i.insert = 0))), Vi(e), e.avail_out === 0))
      return i.last_flush = -1, Ba;
  }
  return t !== lr ? Ba : i.wrap <= 0 ? GU : (i.wrap === 2 ? ($e(i, e.adler & 255), $e(i, e.adler >> 8 & 255), $e(i, e.adler >> 16 & 255), $e(i, e.adler >> 24 & 255), $e(i, e.total_in & 255), $e(i, e.total_in >> 8 & 255), $e(i, e.total_in >> 16 & 255), $e(i, e.total_in >> 24 & 255)) : (Ls(i, e.adler >>> 16), Ls(i, e.adler & 65535)), Vi(e), i.wrap > 0 && (i.wrap = -i.wrap), i.pending !== 0 ? Ba : GU);
}, nw = (e) => {
  if (!e || !e.state)
    return Vn;
  const t = e.state.status;
  return t !== Pu && t !== Qf && t !== od && t !== cd && t !== dd && t !== Fr && t !== Js ? tr(e, Vn) : (e.state = null, t === Fr ? tr(e, Iy) : Ba);
}, aw = (e, t) => {
  let n = t.length;
  if (!e || !e.state)
    return Vn;
  const a = e.state, i = a.wrap;
  if (i === 2 || i === 1 && a.status !== Pu || a.lookahead)
    return Vn;
  if (i === 1 && (e.adler = Do(e.adler, t, n, 0)), a.wrap = 0, n >= a.w_size) {
    i === 0 && (Qi(a.head), a.strstart = 0, a.block_start = 0, a.insert = 0);
    let c = new Uint8Array(a.w_size);
    c.set(t.subarray(n - a.w_size, n), 0), t = c, n = a.w_size;
  }
  const r = e.avail_in, l = e.next_in, s = e.input;
  for (e.avail_in = n, e.next_in = 0, e.input = t, el(a); a.lookahead >= Ie; ) {
    let c = a.strstart, d = a.lookahead - (Ie - 1);
    do
      a.ins_h = sr(a, a.ins_h, a.window[c + Ie - 1]), a.prev[c & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = c, c++;
    while (--d);
    a.strstart = c, a.lookahead = Ie - 1, el(a);
  }
  return a.strstart += a.lookahead, a.block_start = a.strstart, a.insert = a.lookahead, a.lookahead = 0, a.match_length = a.prev_length = Ie - 1, a.match_available = 0, e.next_in = l, e.input = s, e.avail_in = r, a.wrap = i, Ba;
};
var iw = ew, rw = tb, lw = eb, sw = Q5, ow = Qy, cw = tw, dw = nw, uw = aw, hw = "pako deflate (from Nodeca project)", fo = {
  deflateInit: iw,
  deflateInit2: rw,
  deflateReset: lw,
  deflateResetKeep: sw,
  deflateSetHeader: ow,
  deflate: cw,
  deflateEnd: dw,
  deflateSetDictionary: uw,
  deflateInfo: hw
};
const fw = (e, t) => Object.prototype.hasOwnProperty.call(e, t);
var pw = function(e) {
  const t = Array.prototype.slice.call(arguments, 1);
  for (; t.length; ) {
    const n = t.shift();
    if (n) {
      if (typeof n != "object")
        throw new TypeError(n + "must be non-object");
      for (const a in n)
        fw(n, a) && (e[a] = n[a]);
    }
  }
  return e;
}, Uw = (e) => {
  let t = 0;
  for (let a = 0, i = e.length; a < i; a++)
    t += e[a].length;
  const n = new Uint8Array(t);
  for (let a = 0, i = 0, r = e.length; a < r; a++) {
    let l = e[a];
    n.set(l, i), i += l.length;
  }
  return n;
}, Nu = {
  assign: pw,
  flattenChunks: Uw
};
let nb = !0;
try {
  String.fromCharCode.apply(null, new Uint8Array(1));
} catch {
  nb = !1;
}
const Lo = new Uint8Array(256);
for (let e = 0; e < 256; e++)
  Lo[e] = e >= 252 ? 6 : e >= 248 ? 5 : e >= 240 ? 4 : e >= 224 ? 3 : e >= 192 ? 2 : 1;
Lo[254] = Lo[254] = 1;
var mw = (e) => {
  let t, n, a, i, r, l = e.length, s = 0;
  for (i = 0; i < l; i++)
    n = e.charCodeAt(i), (n & 64512) === 55296 && i + 1 < l && (a = e.charCodeAt(i + 1), (a & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (a - 56320), i++)), s += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
  for (t = new Uint8Array(s), r = 0, i = 0; r < s; i++)
    n = e.charCodeAt(i), (n & 64512) === 55296 && i + 1 < l && (a = e.charCodeAt(i + 1), (a & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (a - 56320), i++)), n < 128 ? t[r++] = n : n < 2048 ? (t[r++] = 192 | n >>> 6, t[r++] = 128 | n & 63) : n < 65536 ? (t[r++] = 224 | n >>> 12, t[r++] = 128 | n >>> 6 & 63, t[r++] = 128 | n & 63) : (t[r++] = 240 | n >>> 18, t[r++] = 128 | n >>> 12 & 63, t[r++] = 128 | n >>> 6 & 63, t[r++] = 128 | n & 63);
  return t;
};
const gw = (e, t) => {
  if (t < 65534 && e.subarray && nb)
    return String.fromCharCode.apply(null, e.length === t ? e : e.subarray(0, t));
  let n = "";
  for (let a = 0; a < t; a++)
    n += String.fromCharCode(e[a]);
  return n;
};
var bw = (e, t) => {
  let n, a;
  const i = t || e.length, r = new Array(i * 2);
  for (a = 0, n = 0; n < i; ) {
    let l = e[n++];
    if (l < 128) {
      r[a++] = l;
      continue;
    }
    let s = Lo[l];
    if (s > 4) {
      r[a++] = 65533, n += s - 1;
      continue;
    }
    for (l &= s === 2 ? 31 : s === 3 ? 15 : 7; s > 1 && n < i; )
      l = l << 6 | e[n++] & 63, s--;
    if (s > 1) {
      r[a++] = 65533;
      continue;
    }
    l < 65536 ? r[a++] = l : (l -= 65536, r[a++] = 55296 | l >> 10 & 1023, r[a++] = 56320 | l & 1023);
  }
  return gw(r, a);
}, vw = (e, t) => {
  t = t || e.length, t > e.length && (t = e.length);
  let n = t - 1;
  for (; n >= 0 && (e[n] & 192) === 128; )
    n--;
  return n < 0 || n === 0 ? t : n + Lo[e[n]] > t ? n : t;
}, Ro = {
  string2buf: mw,
  buf2string: bw,
  utf8border: vw
};
function xw() {
  this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
}
var ab = xw;
const ib = Object.prototype.toString, {
  Z_NO_FLUSH: yw,
  Z_SYNC_FLUSH: ww,
  Z_FULL_FLUSH: Ew,
  Z_FINISH: Sw,
  Z_OK: $d,
  Z_STREAM_END: kw,
  Z_DEFAULT_COMPRESSION: Mw,
  Z_DEFAULT_STRATEGY: Cw,
  Z_DEFLATED: Iw
} = Lu;
function Ou(e) {
  this.options = Nu.assign({
    level: Mw,
    method: Iw,
    chunkSize: 16384,
    windowBits: 15,
    memLevel: 8,
    strategy: Cw
  }, e || {});
  let t = this.options;
  t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new ab(), this.strm.avail_out = 0;
  let n = fo.deflateInit2(
    this.strm,
    t.level,
    t.method,
    t.windowBits,
    t.memLevel,
    t.strategy
  );
  if (n !== $d)
    throw new Error(Jr[n]);
  if (t.header && fo.deflateSetHeader(this.strm, t.header), t.dictionary) {
    let a;
    if (typeof t.dictionary == "string" ? a = Ro.string2buf(t.dictionary) : ib.call(t.dictionary) === "[object ArrayBuffer]" ? a = new Uint8Array(t.dictionary) : a = t.dictionary, n = fo.deflateSetDictionary(this.strm, a), n !== $d)
      throw new Error(Jr[n]);
    this._dict_set = !0;
  }
}
Ou.prototype.push = function(e, t) {
  const n = this.strm, a = this.options.chunkSize;
  let i, r;
  if (this.ended)
    return !1;
  for (t === ~~t ? r = t : r = t === !0 ? Sw : yw, typeof e == "string" ? n.input = Ro.string2buf(e) : ib.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e, n.next_in = 0, n.avail_in = n.input.length; ; ) {
    if (n.avail_out === 0 && (n.output = new Uint8Array(a), n.next_out = 0, n.avail_out = a), (r === ww || r === Ew) && n.avail_out <= 6) {
      this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0;
      continue;
    }
    if (i = fo.deflate(n, r), i === kw)
      return n.next_out > 0 && this.onData(n.output.subarray(0, n.next_out)), i = fo.deflateEnd(this.strm), this.onEnd(i), this.ended = !0, i === $d;
    if (n.avail_out === 0) {
      this.onData(n.output);
      continue;
    }
    if (r > 0 && n.next_out > 0) {
      this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0;
      continue;
    }
    if (n.avail_in === 0) break;
  }
  return !0;
};
Ou.prototype.onData = function(e) {
  this.chunks.push(e);
};
Ou.prototype.onEnd = function(e) {
  e === $d && (this.result = Nu.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
};
function Tw(e, t) {
  const n = new Ou(t);
  if (n.push(e, !0), n.err)
    throw n.msg || Jr[n.err];
  return n.result;
}
var _w = Tw, Aw = {
  deflate: _w
};
const jc = 30, jw = 12;
var Dw = function(t, n) {
  let a, i, r, l, s, c, d, o, u, f, p, U, m, g, b, v, x, y, E, S, w, M, I, T;
  const _ = t.state;
  a = t.next_in, I = t.input, i = a + (t.avail_in - 5), r = t.next_out, T = t.output, l = r - (n - t.avail_out), s = r + (t.avail_out - 257), c = _.dmax, d = _.wsize, o = _.whave, u = _.wnext, f = _.window, p = _.hold, U = _.bits, m = _.lencode, g = _.distcode, b = (1 << _.lenbits) - 1, v = (1 << _.distbits) - 1;
  e:
    do {
      U < 15 && (p += I[a++] << U, U += 8, p += I[a++] << U, U += 8), x = m[p & b];
      t:
        for (; ; ) {
          if (y = x >>> 24, p >>>= y, U -= y, y = x >>> 16 & 255, y === 0)
            T[r++] = x & 65535;
          else if (y & 16) {
            E = x & 65535, y &= 15, y && (U < y && (p += I[a++] << U, U += 8), E += p & (1 << y) - 1, p >>>= y, U -= y), U < 15 && (p += I[a++] << U, U += 8, p += I[a++] << U, U += 8), x = g[p & v];
            n:
              for (; ; ) {
                if (y = x >>> 24, p >>>= y, U -= y, y = x >>> 16 & 255, y & 16) {
                  if (S = x & 65535, y &= 15, U < y && (p += I[a++] << U, U += 8, U < y && (p += I[a++] << U, U += 8)), S += p & (1 << y) - 1, S > c) {
                    t.msg = "invalid distance too far back", _.mode = jc;
                    break e;
                  }
                  if (p >>>= y, U -= y, y = r - l, S > y) {
                    if (y = S - y, y > o && _.sane) {
                      t.msg = "invalid distance too far back", _.mode = jc;
                      break e;
                    }
                    if (w = 0, M = f, u === 0) {
                      if (w += d - y, y < E) {
                        E -= y;
                        do
                          T[r++] = f[w++];
                        while (--y);
                        w = r - S, M = T;
                      }
                    } else if (u < y) {
                      if (w += d + u - y, y -= u, y < E) {
                        E -= y;
                        do
                          T[r++] = f[w++];
                        while (--y);
                        if (w = 0, u < E) {
                          y = u, E -= y;
                          do
                            T[r++] = f[w++];
                          while (--y);
                          w = r - S, M = T;
                        }
                      }
                    } else if (w += u - y, y < E) {
                      E -= y;
                      do
                        T[r++] = f[w++];
                      while (--y);
                      w = r - S, M = T;
                    }
                    for (; E > 2; )
                      T[r++] = M[w++], T[r++] = M[w++], T[r++] = M[w++], E -= 3;
                    E && (T[r++] = M[w++], E > 1 && (T[r++] = M[w++]));
                  } else {
                    w = r - S;
                    do
                      T[r++] = T[w++], T[r++] = T[w++], T[r++] = T[w++], E -= 3;
                    while (E > 2);
                    E && (T[r++] = T[w++], E > 1 && (T[r++] = T[w++]));
                  }
                } else if (y & 64) {
                  t.msg = "invalid distance code", _.mode = jc;
                  break e;
                } else {
                  x = g[(x & 65535) + (p & (1 << y) - 1)];
                  continue n;
                }
                break;
              }
          } else if (y & 64)
            if (y & 32) {
              _.mode = jw;
              break e;
            } else {
              t.msg = "invalid literal/length code", _.mode = jc;
              break e;
            }
          else {
            x = m[(x & 65535) + (p & (1 << y) - 1)];
            continue t;
          }
          break;
        }
    } while (a < i && r < s);
  E = U >> 3, a -= E, U -= E << 3, p &= (1 << U) - 1, t.next_in = a, t.next_out = r, t.avail_in = a < i ? 5 + (i - a) : 5 - (a - i), t.avail_out = r < s ? 257 + (s - r) : 257 - (r - s), _.hold = p, _.bits = U;
};
const yl = 15, ZU = 852, KU = 592, qU = 0, Nh = 1, JU = 2, Lw = new Uint16Array([
  /* Length codes 257..285 base */
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  13,
  15,
  17,
  19,
  23,
  27,
  31,
  35,
  43,
  51,
  59,
  67,
  83,
  99,
  115,
  131,
  163,
  195,
  227,
  258,
  0,
  0
]), Rw = new Uint8Array([
  /* Length codes 257..285 extra */
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  17,
  17,
  17,
  17,
  18,
  18,
  18,
  18,
  19,
  19,
  19,
  19,
  20,
  20,
  20,
  20,
  21,
  21,
  21,
  21,
  16,
  72,
  78
]), Pw = new Uint16Array([
  /* Distance codes 0..29 base */
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577,
  0,
  0
]), Nw = new Uint8Array([
  /* Distance codes 0..29 extra */
  16,
  16,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20,
  20,
  21,
  21,
  22,
  22,
  23,
  23,
  24,
  24,
  25,
  25,
  26,
  26,
  27,
  27,
  28,
  28,
  29,
  29,
  64,
  64
]), Ow = (e, t, n, a, i, r, l, s) => {
  const c = s.bits;
  let d = 0, o = 0, u = 0, f = 0, p = 0, U = 0, m = 0, g = 0, b = 0, v = 0, x, y, E, S, w, M = null, I = 0, T;
  const _ = new Uint16Array(yl + 1), A = new Uint16Array(yl + 1);
  let D = null, P = 0, N, $, R;
  for (d = 0; d <= yl; d++)
    _[d] = 0;
  for (o = 0; o < a; o++)
    _[t[n + o]]++;
  for (p = c, f = yl; f >= 1 && _[f] === 0; f--)
    ;
  if (p > f && (p = f), f === 0)
    return i[r++] = 1 << 24 | 64 << 16 | 0, i[r++] = 1 << 24 | 64 << 16 | 0, s.bits = 1, 0;
  for (u = 1; u < f && _[u] === 0; u++)
    ;
  for (p < u && (p = u), g = 1, d = 1; d <= yl; d++)
    if (g <<= 1, g -= _[d], g < 0)
      return -1;
  if (g > 0 && (e === qU || f !== 1))
    return -1;
  for (A[1] = 0, d = 1; d < yl; d++)
    A[d + 1] = A[d] + _[d];
  for (o = 0; o < a; o++)
    t[n + o] !== 0 && (l[A[t[n + o]]++] = o);
  if (e === qU ? (M = D = l, T = 19) : e === Nh ? (M = Lw, I -= 257, D = Rw, P -= 257, T = 256) : (M = Pw, D = Nw, T = -1), v = 0, o = 0, d = u, w = r, U = p, m = 0, E = -1, b = 1 << p, S = b - 1, e === Nh && b > ZU || e === JU && b > KU)
    return 1;
  for (; ; ) {
    N = d - m, l[o] < T ? ($ = 0, R = l[o]) : l[o] > T ? ($ = D[P + l[o]], R = M[I + l[o]]) : ($ = 96, R = 0), x = 1 << d - m, y = 1 << U, u = y;
    do
      y -= x, i[w + (v >> m) + y] = N << 24 | $ << 16 | R | 0;
    while (y !== 0);
    for (x = 1 << d - 1; v & x; )
      x >>= 1;
    if (x !== 0 ? (v &= x - 1, v += x) : v = 0, o++, --_[d] === 0) {
      if (d === f)
        break;
      d = t[n + l[o]];
    }
    if (d > p && (v & S) !== E) {
      for (m === 0 && (m = p), w += u, U = d - m, g = 1 << U; U + m < f && (g -= _[U + m], !(g <= 0)); )
        U++, g <<= 1;
      if (b += 1 << U, e === Nh && b > ZU || e === JU && b > KU)
        return 1;
      E = v & S, i[E] = p << 24 | U << 16 | w - r | 0;
    }
  }
  return v !== 0 && (i[w + v] = d - m << 24 | 64 << 16 | 0), s.bits = p, 0;
};
var po = Ow;
const $w = 0, rb = 1, lb = 2, {
  Z_FINISH: QU,
  Z_BLOCK: Fw,
  Z_TREES: Dc,
  Z_OK: tl,
  Z_STREAM_END: zw,
  Z_NEED_DICT: Bw,
  Z_STREAM_ERROR: Zn,
  Z_DATA_ERROR: sb,
  Z_MEM_ERROR: ob,
  Z_BUF_ERROR: Hw,
  Z_DEFLATED: e2
} = Lu, cb = 1, t2 = 2, n2 = 3, a2 = 4, i2 = 5, r2 = 6, l2 = 7, s2 = 8, o2 = 9, c2 = 10, Fd = 11, si = 12, Oh = 13, d2 = 14, $h = 15, u2 = 16, h2 = 17, f2 = 18, p2 = 19, Lc = 20, Rc = 21, U2 = 22, m2 = 23, g2 = 24, b2 = 25, v2 = 26, Fh = 27, x2 = 28, y2 = 29, ot = 30, db = 31, Xw = 32, Ww = 852, Vw = 592, Gw = 15, Yw = Gw, w2 = (e) => (e >>> 24 & 255) + (e >>> 8 & 65280) + ((e & 65280) << 8) + ((e & 255) << 24);
function Zw() {
  this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
}
const ub = (e) => {
  if (!e || !e.state)
    return Zn;
  const t = e.state;
  return e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = t.wrap & 1), t.mode = cb, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new Int32Array(Ww), t.distcode = t.distdyn = new Int32Array(Vw), t.sane = 1, t.back = -1, tl;
}, hb = (e) => {
  if (!e || !e.state)
    return Zn;
  const t = e.state;
  return t.wsize = 0, t.whave = 0, t.wnext = 0, ub(e);
}, fb = (e, t) => {
  let n;
  if (!e || !e.state)
    return Zn;
  const a = e.state;
  return t < 0 ? (n = 0, t = -t) : (n = (t >> 4) + 1, t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? Zn : (a.window !== null && a.wbits !== t && (a.window = null), a.wrap = n, a.wbits = t, hb(e));
}, pb = (e, t) => {
  if (!e)
    return Zn;
  const n = new Zw();
  e.state = n, n.window = null;
  const a = fb(e, t);
  return a !== tl && (e.state = null), a;
}, Kw = (e) => pb(e, Yw);
let E2 = !0, zh, Bh;
const qw = (e) => {
  if (E2) {
    zh = new Int32Array(512), Bh = new Int32Array(32);
    let t = 0;
    for (; t < 144; )
      e.lens[t++] = 8;
    for (; t < 256; )
      e.lens[t++] = 9;
    for (; t < 280; )
      e.lens[t++] = 7;
    for (; t < 288; )
      e.lens[t++] = 8;
    for (po(rb, e.lens, 0, 288, zh, 0, e.work, { bits: 9 }), t = 0; t < 32; )
      e.lens[t++] = 5;
    po(lb, e.lens, 0, 32, Bh, 0, e.work, { bits: 5 }), E2 = !1;
  }
  e.lencode = zh, e.lenbits = 9, e.distcode = Bh, e.distbits = 5;
}, Ub = (e, t, n, a) => {
  let i;
  const r = e.state;
  return r.window === null && (r.wsize = 1 << r.wbits, r.wnext = 0, r.whave = 0, r.window = new Uint8Array(r.wsize)), a >= r.wsize ? (r.window.set(t.subarray(n - r.wsize, n), 0), r.wnext = 0, r.whave = r.wsize) : (i = r.wsize - r.wnext, i > a && (i = a), r.window.set(t.subarray(n - a, n - a + i), r.wnext), a -= i, a ? (r.window.set(t.subarray(n - a, n), 0), r.wnext = a, r.whave = r.wsize) : (r.wnext += i, r.wnext === r.wsize && (r.wnext = 0), r.whave < r.wsize && (r.whave += i))), 0;
}, Jw = (e, t) => {
  let n, a, i, r, l, s, c, d, o, u, f, p, U, m, g = 0, b, v, x, y, E, S, w, M;
  const I = new Uint8Array(4);
  let T, _;
  const A = (
    /* permutation of code lengths */
    new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15])
  );
  if (!e || !e.state || !e.output || !e.input && e.avail_in !== 0)
    return Zn;
  n = e.state, n.mode === si && (n.mode = Oh), l = e.next_out, i = e.output, c = e.avail_out, r = e.next_in, a = e.input, s = e.avail_in, d = n.hold, o = n.bits, u = s, f = c, M = tl;
  e:
    for (; ; )
      switch (n.mode) {
        case cb:
          if (n.wrap === 0) {
            n.mode = Oh;
            break;
          }
          for (; o < 16; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if (n.wrap & 2 && d === 35615) {
            n.check = 0, I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Bt(n.check, I, 2, 0), d = 0, o = 0, n.mode = t2;
            break;
          }
          if (n.flags = 0, n.head && (n.head.done = !1), !(n.wrap & 1) || /* check if zlib header allowed */
          (((d & 255) << 8) + (d >> 8)) % 31) {
            e.msg = "incorrect header check", n.mode = ot;
            break;
          }
          if ((d & 15) !== e2) {
            e.msg = "unknown compression method", n.mode = ot;
            break;
          }
          if (d >>>= 4, o -= 4, w = (d & 15) + 8, n.wbits === 0)
            n.wbits = w;
          else if (w > n.wbits) {
            e.msg = "invalid window size", n.mode = ot;
            break;
          }
          n.dmax = 1 << n.wbits, e.adler = n.check = 1, n.mode = d & 512 ? c2 : si, d = 0, o = 0;
          break;
        case t2:
          for (; o < 16; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if (n.flags = d, (n.flags & 255) !== e2) {
            e.msg = "unknown compression method", n.mode = ot;
            break;
          }
          if (n.flags & 57344) {
            e.msg = "unknown header flags set", n.mode = ot;
            break;
          }
          n.head && (n.head.text = d >> 8 & 1), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Bt(n.check, I, 2, 0)), d = 0, o = 0, n.mode = n2;
        case n2:
          for (; o < 32; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          n.head && (n.head.time = d), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, I[2] = d >>> 16 & 255, I[3] = d >>> 24 & 255, n.check = Bt(n.check, I, 4, 0)), d = 0, o = 0, n.mode = a2;
        case a2:
          for (; o < 16; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          n.head && (n.head.xflags = d & 255, n.head.os = d >> 8), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Bt(n.check, I, 2, 0)), d = 0, o = 0, n.mode = i2;
        case i2:
          if (n.flags & 1024) {
            for (; o < 16; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            n.length = d, n.head && (n.head.extra_len = d), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Bt(n.check, I, 2, 0)), d = 0, o = 0;
          } else n.head && (n.head.extra = null);
          n.mode = r2;
        case r2:
          if (n.flags & 1024 && (p = n.length, p > s && (p = s), p && (n.head && (w = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Uint8Array(n.head.extra_len)), n.head.extra.set(
            a.subarray(
              r,
              // extra field is limited to 65536 bytes
              // - no need for additional size check
              r + p
            ),
            /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
            w
          )), n.flags & 512 && (n.check = Bt(n.check, a, p, r)), s -= p, r += p, n.length -= p), n.length))
            break e;
          n.length = 0, n.mode = l2;
        case l2:
          if (n.flags & 2048) {
            if (s === 0)
              break e;
            p = 0;
            do
              w = a[r + p++], n.head && w && n.length < 65536 && (n.head.name += String.fromCharCode(w));
            while (w && p < s);
            if (n.flags & 512 && (n.check = Bt(n.check, a, p, r)), s -= p, r += p, w)
              break e;
          } else n.head && (n.head.name = null);
          n.length = 0, n.mode = s2;
        case s2:
          if (n.flags & 4096) {
            if (s === 0)
              break e;
            p = 0;
            do
              w = a[r + p++], n.head && w && n.length < 65536 && (n.head.comment += String.fromCharCode(w));
            while (w && p < s);
            if (n.flags & 512 && (n.check = Bt(n.check, a, p, r)), s -= p, r += p, w)
              break e;
          } else n.head && (n.head.comment = null);
          n.mode = o2;
        case o2:
          if (n.flags & 512) {
            for (; o < 16; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            if (d !== (n.check & 65535)) {
              e.msg = "header crc mismatch", n.mode = ot;
              break;
            }
            d = 0, o = 0;
          }
          n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = si;
          break;
        case c2:
          for (; o < 32; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          e.adler = n.check = w2(d), d = 0, o = 0, n.mode = Fd;
        case Fd:
          if (n.havedict === 0)
            return e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = s, n.hold = d, n.bits = o, Bw;
          e.adler = n.check = 1, n.mode = si;
        case si:
          if (t === Fw || t === Dc)
            break e;
        case Oh:
          if (n.last) {
            d >>>= o & 7, o -= o & 7, n.mode = Fh;
            break;
          }
          for (; o < 3; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          switch (n.last = d & 1, d >>>= 1, o -= 1, d & 3) {
            case 0:
              n.mode = d2;
              break;
            case 1:
              if (qw(n), n.mode = Lc, t === Dc) {
                d >>>= 2, o -= 2;
                break e;
              }
              break;
            case 2:
              n.mode = h2;
              break;
            case 3:
              e.msg = "invalid block type", n.mode = ot;
          }
          d >>>= 2, o -= 2;
          break;
        case d2:
          for (d >>>= o & 7, o -= o & 7; o < 32; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if ((d & 65535) !== (d >>> 16 ^ 65535)) {
            e.msg = "invalid stored block lengths", n.mode = ot;
            break;
          }
          if (n.length = d & 65535, d = 0, o = 0, n.mode = $h, t === Dc)
            break e;
        case $h:
          n.mode = u2;
        case u2:
          if (p = n.length, p) {
            if (p > s && (p = s), p > c && (p = c), p === 0)
              break e;
            i.set(a.subarray(r, r + p), l), s -= p, r += p, c -= p, l += p, n.length -= p;
            break;
          }
          n.mode = si;
          break;
        case h2:
          for (; o < 14; ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if (n.nlen = (d & 31) + 257, d >>>= 5, o -= 5, n.ndist = (d & 31) + 1, d >>>= 5, o -= 5, n.ncode = (d & 15) + 4, d >>>= 4, o -= 4, n.nlen > 286 || n.ndist > 30) {
            e.msg = "too many length or distance symbols", n.mode = ot;
            break;
          }
          n.have = 0, n.mode = f2;
        case f2:
          for (; n.have < n.ncode; ) {
            for (; o < 3; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            n.lens[A[n.have++]] = d & 7, d >>>= 3, o -= 3;
          }
          for (; n.have < 19; )
            n.lens[A[n.have++]] = 0;
          if (n.lencode = n.lendyn, n.lenbits = 7, T = { bits: n.lenbits }, M = po($w, n.lens, 0, 19, n.lencode, 0, n.work, T), n.lenbits = T.bits, M) {
            e.msg = "invalid code lengths set", n.mode = ot;
            break;
          }
          n.have = 0, n.mode = p2;
        case p2:
          for (; n.have < n.nlen + n.ndist; ) {
            for (; g = n.lencode[d & (1 << n.lenbits) - 1], b = g >>> 24, v = g >>> 16 & 255, x = g & 65535, !(b <= o); ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            if (x < 16)
              d >>>= b, o -= b, n.lens[n.have++] = x;
            else {
              if (x === 16) {
                for (_ = b + 2; o < _; ) {
                  if (s === 0)
                    break e;
                  s--, d += a[r++] << o, o += 8;
                }
                if (d >>>= b, o -= b, n.have === 0) {
                  e.msg = "invalid bit length repeat", n.mode = ot;
                  break;
                }
                w = n.lens[n.have - 1], p = 3 + (d & 3), d >>>= 2, o -= 2;
              } else if (x === 17) {
                for (_ = b + 3; o < _; ) {
                  if (s === 0)
                    break e;
                  s--, d += a[r++] << o, o += 8;
                }
                d >>>= b, o -= b, w = 0, p = 3 + (d & 7), d >>>= 3, o -= 3;
              } else {
                for (_ = b + 7; o < _; ) {
                  if (s === 0)
                    break e;
                  s--, d += a[r++] << o, o += 8;
                }
                d >>>= b, o -= b, w = 0, p = 11 + (d & 127), d >>>= 7, o -= 7;
              }
              if (n.have + p > n.nlen + n.ndist) {
                e.msg = "invalid bit length repeat", n.mode = ot;
                break;
              }
              for (; p--; )
                n.lens[n.have++] = w;
            }
          }
          if (n.mode === ot)
            break;
          if (n.lens[256] === 0) {
            e.msg = "invalid code -- missing end-of-block", n.mode = ot;
            break;
          }
          if (n.lenbits = 9, T = { bits: n.lenbits }, M = po(rb, n.lens, 0, n.nlen, n.lencode, 0, n.work, T), n.lenbits = T.bits, M) {
            e.msg = "invalid literal/lengths set", n.mode = ot;
            break;
          }
          if (n.distbits = 6, n.distcode = n.distdyn, T = { bits: n.distbits }, M = po(lb, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, T), n.distbits = T.bits, M) {
            e.msg = "invalid distances set", n.mode = ot;
            break;
          }
          if (n.mode = Lc, t === Dc)
            break e;
        case Lc:
          n.mode = Rc;
        case Rc:
          if (s >= 6 && c >= 258) {
            e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = s, n.hold = d, n.bits = o, Dw(e, f), l = e.next_out, i = e.output, c = e.avail_out, r = e.next_in, a = e.input, s = e.avail_in, d = n.hold, o = n.bits, n.mode === si && (n.back = -1);
            break;
          }
          for (n.back = 0; g = n.lencode[d & (1 << n.lenbits) - 1], b = g >>> 24, v = g >>> 16 & 255, x = g & 65535, !(b <= o); ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if (v && !(v & 240)) {
            for (y = b, E = v, S = x; g = n.lencode[S + ((d & (1 << y + E) - 1) >> y)], b = g >>> 24, v = g >>> 16 & 255, x = g & 65535, !(y + b <= o); ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            d >>>= y, o -= y, n.back += y;
          }
          if (d >>>= b, o -= b, n.back += b, n.length = x, v === 0) {
            n.mode = v2;
            break;
          }
          if (v & 32) {
            n.back = -1, n.mode = si;
            break;
          }
          if (v & 64) {
            e.msg = "invalid literal/length code", n.mode = ot;
            break;
          }
          n.extra = v & 15, n.mode = U2;
        case U2:
          if (n.extra) {
            for (_ = n.extra; o < _; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            n.length += d & (1 << n.extra) - 1, d >>>= n.extra, o -= n.extra, n.back += n.extra;
          }
          n.was = n.length, n.mode = m2;
        case m2:
          for (; g = n.distcode[d & (1 << n.distbits) - 1], b = g >>> 24, v = g >>> 16 & 255, x = g & 65535, !(b <= o); ) {
            if (s === 0)
              break e;
            s--, d += a[r++] << o, o += 8;
          }
          if (!(v & 240)) {
            for (y = b, E = v, S = x; g = n.distcode[S + ((d & (1 << y + E) - 1) >> y)], b = g >>> 24, v = g >>> 16 & 255, x = g & 65535, !(y + b <= o); ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            d >>>= y, o -= y, n.back += y;
          }
          if (d >>>= b, o -= b, n.back += b, v & 64) {
            e.msg = "invalid distance code", n.mode = ot;
            break;
          }
          n.offset = x, n.extra = v & 15, n.mode = g2;
        case g2:
          if (n.extra) {
            for (_ = n.extra; o < _; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            n.offset += d & (1 << n.extra) - 1, d >>>= n.extra, o -= n.extra, n.back += n.extra;
          }
          if (n.offset > n.dmax) {
            e.msg = "invalid distance too far back", n.mode = ot;
            break;
          }
          n.mode = b2;
        case b2:
          if (c === 0)
            break e;
          if (p = f - c, n.offset > p) {
            if (p = n.offset - p, p > n.whave && n.sane) {
              e.msg = "invalid distance too far back", n.mode = ot;
              break;
            }
            p > n.wnext ? (p -= n.wnext, U = n.wsize - p) : U = n.wnext - p, p > n.length && (p = n.length), m = n.window;
          } else
            m = i, U = l - n.offset, p = n.length;
          p > c && (p = c), c -= p, n.length -= p;
          do
            i[l++] = m[U++];
          while (--p);
          n.length === 0 && (n.mode = Rc);
          break;
        case v2:
          if (c === 0)
            break e;
          i[l++] = n.length, c--, n.mode = Rc;
          break;
        case Fh:
          if (n.wrap) {
            for (; o < 32; ) {
              if (s === 0)
                break e;
              s--, d |= a[r++] << o, o += 8;
            }
            if (f -= c, e.total_out += f, n.total += f, f && (e.adler = n.check = /*UPDATE(state.check, put - _out, _out);*/
            n.flags ? Bt(n.check, i, f, l - f) : Do(n.check, i, f, l - f)), f = c, (n.flags ? d : w2(d)) !== n.check) {
              e.msg = "incorrect data check", n.mode = ot;
              break;
            }
            d = 0, o = 0;
          }
          n.mode = x2;
        case x2:
          if (n.wrap && n.flags) {
            for (; o < 32; ) {
              if (s === 0)
                break e;
              s--, d += a[r++] << o, o += 8;
            }
            if (d !== (n.total & 4294967295)) {
              e.msg = "incorrect length check", n.mode = ot;
              break;
            }
            d = 0, o = 0;
          }
          n.mode = y2;
        case y2:
          M = zw;
          break e;
        case ot:
          M = sb;
          break e;
        case db:
          return ob;
        case Xw:
        default:
          return Zn;
      }
  return e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = s, n.hold = d, n.bits = o, (n.wsize || f !== e.avail_out && n.mode < ot && (n.mode < Fh || t !== QU)) && Ub(e, e.output, e.next_out, f - e.avail_out), u -= e.avail_in, f -= e.avail_out, e.total_in += u, e.total_out += f, n.total += f, n.wrap && f && (e.adler = n.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/
  n.flags ? Bt(n.check, i, f, e.next_out - f) : Do(n.check, i, f, e.next_out - f)), e.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === si ? 128 : 0) + (n.mode === Lc || n.mode === $h ? 256 : 0), (u === 0 && f === 0 || t === QU) && M === tl && (M = Hw), M;
}, Qw = (e) => {
  if (!e || !e.state)
    return Zn;
  let t = e.state;
  return t.window && (t.window = null), e.state = null, tl;
}, eE = (e, t) => {
  if (!e || !e.state)
    return Zn;
  const n = e.state;
  return n.wrap & 2 ? (n.head = t, t.done = !1, tl) : Zn;
}, tE = (e, t) => {
  const n = t.length;
  let a, i, r;
  return !e || !e.state || (a = e.state, a.wrap !== 0 && a.mode !== Fd) ? Zn : a.mode === Fd && (i = 1, i = Do(i, t, n, 0), i !== a.check) ? sb : (r = Ub(e, t, n, n), r ? (a.mode = db, ob) : (a.havedict = 1, tl));
};
var nE = hb, aE = fb, iE = ub, rE = Kw, lE = pb, sE = Jw, oE = Qw, cE = eE, dE = tE, uE = "pako inflate (from Nodeca project)", pi = {
  inflateReset: nE,
  inflateReset2: aE,
  inflateResetKeep: iE,
  inflateInit: rE,
  inflateInit2: lE,
  inflate: sE,
  inflateEnd: oE,
  inflateGetHeader: cE,
  inflateSetDictionary: dE,
  inflateInfo: uE
};
function hE() {
  this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;
}
var fE = hE;
const mb = Object.prototype.toString, {
  Z_NO_FLUSH: pE,
  Z_FINISH: UE,
  Z_OK: Po,
  Z_STREAM_END: Hh,
  Z_NEED_DICT: Xh,
  Z_STREAM_ERROR: mE,
  Z_DATA_ERROR: S2,
  Z_MEM_ERROR: gE
} = Lu;
function $u(e) {
  this.options = Nu.assign({
    chunkSize: 1024 * 64,
    windowBits: 15,
    to: ""
  }, e || {});
  const t = this.options;
  t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, t.windowBits === 0 && (t.windowBits = -15)), t.windowBits >= 0 && t.windowBits < 16 && !(e && e.windowBits) && (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && (t.windowBits & 15 || (t.windowBits |= 15)), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new ab(), this.strm.avail_out = 0;
  let n = pi.inflateInit2(
    this.strm,
    t.windowBits
  );
  if (n !== Po)
    throw new Error(Jr[n]);
  if (this.header = new fE(), pi.inflateGetHeader(this.strm, this.header), t.dictionary && (typeof t.dictionary == "string" ? t.dictionary = Ro.string2buf(t.dictionary) : mb.call(t.dictionary) === "[object ArrayBuffer]" && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (n = pi.inflateSetDictionary(this.strm, t.dictionary), n !== Po)))
    throw new Error(Jr[n]);
}
$u.prototype.push = function(e, t) {
  const n = this.strm, a = this.options.chunkSize, i = this.options.dictionary;
  let r, l, s;
  if (this.ended) return !1;
  for (t === ~~t ? l = t : l = t === !0 ? UE : pE, mb.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e, n.next_in = 0, n.avail_in = n.input.length; ; ) {
    for (n.avail_out === 0 && (n.output = new Uint8Array(a), n.next_out = 0, n.avail_out = a), r = pi.inflate(n, l), r === Xh && i && (r = pi.inflateSetDictionary(n, i), r === Po ? r = pi.inflate(n, l) : r === S2 && (r = Xh)); n.avail_in > 0 && r === Hh && n.state.wrap > 0 && e[n.next_in] !== 0; )
      pi.inflateReset(n), r = pi.inflate(n, l);
    switch (r) {
      case mE:
      case S2:
      case Xh:
      case gE:
        return this.onEnd(r), this.ended = !0, !1;
    }
    if (s = n.avail_out, n.next_out && (n.avail_out === 0 || r === Hh))
      if (this.options.to === "string") {
        let c = Ro.utf8border(n.output, n.next_out), d = n.next_out - c, o = Ro.buf2string(n.output, c);
        n.next_out = d, n.avail_out = a - d, d && n.output.set(n.output.subarray(c, c + d), 0), this.onData(o);
      } else
        this.onData(n.output.length === n.next_out ? n.output : n.output.subarray(0, n.next_out));
    if (!(r === Po && s === 0)) {
      if (r === Hh)
        return r = pi.inflateEnd(this.strm), this.onEnd(r), this.ended = !0, !0;
      if (n.avail_in === 0) break;
    }
  }
  return !0;
};
$u.prototype.onData = function(e) {
  this.chunks.push(e);
};
$u.prototype.onEnd = function(e) {
  e === Po && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = Nu.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
};
function bE(e, t) {
  const n = new $u(t);
  if (n.push(e), n.err) throw n.msg || Jr[n.err];
  return n.result;
}
var vE = bE, xE = {
  inflate: vE
};
const { deflate: yE } = Aw, { inflate: wE } = xE;
var EE = yE, SE = wE;
const kE = "#ffffff", ME = "#000000", CE = [
  "#f8f9fa",
  "#f1f3f5",
  "#e9ecef",
  "#dee2e6",
  "#ced4da",
  "#adb5bd",
  "#868e96",
  "#495057",
  "#343a40",
  "#212529"
], IE = [
  "#fff5f5",
  "#ffe3e3",
  "#ffc9c9",
  "#ffa8a8",
  "#ff8787",
  "#ff6b6b",
  "#fa5252",
  "#f03e3e",
  "#e03131",
  "#c92a2a"
], TE = [
  "#fff0f6",
  "#ffdeeb",
  "#fcc2d7",
  "#faa2c1",
  "#f783ac",
  "#f06595",
  "#e64980",
  "#d6336c",
  "#c2255c",
  "#a61e4d"
], _E = [
  "#f8f0fc",
  "#f3d9fa",
  "#eebefa",
  "#e599f7",
  "#da77f2",
  "#cc5de8",
  "#be4bdb",
  "#ae3ec9",
  "#9c36b5",
  "#862e9c"
], AE = [
  "#f3f0ff",
  "#e5dbff",
  "#d0bfff",
  "#b197fc",
  "#9775fa",
  "#845ef7",
  "#7950f2",
  "#7048e8",
  "#6741d9",
  "#5f3dc4"
], jE = [
  "#edf2ff",
  "#dbe4ff",
  "#bac8ff",
  "#91a7ff",
  "#748ffc",
  "#5c7cfa",
  "#4c6ef5",
  "#4263eb",
  "#3b5bdb",
  "#364fc7"
], DE = [
  "#e7f5ff",
  "#d0ebff",
  "#a5d8ff",
  "#74c0fc",
  "#4dabf7",
  "#339af0",
  "#228be6",
  "#1c7ed6",
  "#1971c2",
  "#1864ab"
], LE = [
  "#e3fafc",
  "#c5f6fa",
  "#99e9f2",
  "#66d9e8",
  "#3bc9db",
  "#22b8cf",
  "#15aabf",
  "#1098ad",
  "#0c8599",
  "#0b7285"
], RE = [
  "#e6fcf5",
  "#c3fae8",
  "#96f2d7",
  "#63e6be",
  "#38d9a9",
  "#20c997",
  "#12b886",
  "#0ca678",
  "#099268",
  "#087f5b"
], PE = [
  "#ebfbee",
  "#d3f9d8",
  "#b2f2bb",
  "#8ce99a",
  "#69db7c",
  "#51cf66",
  "#40c057",
  "#37b24d",
  "#2f9e44",
  "#2b8a3e"
], NE = [
  "#f4fce3",
  "#e9fac8",
  "#d8f5a2",
  "#c0eb75",
  "#a9e34b",
  "#94d82d",
  "#82c91e",
  "#74b816",
  "#66a80f",
  "#5c940d"
], OE = [
  "#fff9db",
  "#fff3bf",
  "#ffec99",
  "#ffe066",
  "#ffd43b",
  "#fcc419",
  "#fab005",
  "#f59f00",
  "#f08c00",
  "#e67700"
], $E = [
  "#fff4e6",
  "#ffe8cc",
  "#ffd8a8",
  "#ffc078",
  "#ffa94d",
  "#ff922b",
  "#fd7e14",
  "#f76707",
  "#e8590c",
  "#d9480f"
], Wt = {
  white: kE,
  black: ME,
  gray: CE,
  red: IE,
  pink: TE,
  grape: _E,
  violet: AE,
  indigo: jE,
  blue: DE,
  cyan: LE,
  teal: RE,
  green: PE,
  lime: NE,
  yellow: OE,
  orange: $E
};
let I0 = (e = 21) => crypto.getRandomValues(new Uint8Array(e)).reduce((t, n) => (n &= 63, n < 36 ? t += n.toString(36) : n < 62 ? t += (n - 26).toString(36).toUpperCase() : n > 62 ? t += "-" : t += "_", t), "");
var gb = "Expected a function", k2 = NaN, FE = "[object Symbol]", zE = /^\s+|\s+$/g, BE = /^[-+]0x[0-9a-f]+$/i, HE = /^0b[01]+$/i, XE = /^0o[0-7]+$/i, WE = parseInt, VE = typeof gi == "object" && gi && gi.Object === Object && gi, GE = typeof self == "object" && self && self.Object === Object && self, YE = VE || GE || Function("return this")(), ZE = Object.prototype, KE = ZE.toString, qE = Math.max, JE = Math.min, Wh = function() {
  return YE.Date.now();
};
function QE(e, t, n) {
  var a, i, r, l, s, c, d = 0, o = !1, u = !1, f = !0;
  if (typeof e != "function")
    throw new TypeError(gb);
  t = M2(t) || 0, zd(n) && (o = !!n.leading, u = "maxWait" in n, r = u ? qE(M2(n.maxWait) || 0, t) : r, f = "trailing" in n ? !!n.trailing : f);
  function p(S) {
    var w = a, M = i;
    return a = i = void 0, d = S, l = e.apply(M, w), l;
  }
  function U(S) {
    return d = S, s = setTimeout(b, t), o ? p(S) : l;
  }
  function m(S) {
    var w = S - c, M = S - d, I = t - w;
    return u ? JE(I, r - M) : I;
  }
  function g(S) {
    var w = S - c, M = S - d;
    return c === void 0 || w >= t || w < 0 || u && M >= r;
  }
  function b() {
    var S = Wh();
    if (g(S))
      return v(S);
    s = setTimeout(b, m(S));
  }
  function v(S) {
    return s = void 0, f && a ? p(S) : (a = i = void 0, l);
  }
  function x() {
    s !== void 0 && clearTimeout(s), d = 0, a = c = i = s = void 0;
  }
  function y() {
    return s === void 0 ? l : v(Wh());
  }
  function E() {
    var S = Wh(), w = g(S);
    if (a = arguments, i = this, c = S, w) {
      if (s === void 0)
        return U(c);
      if (u)
        return s = setTimeout(b, t), p(c);
    }
    return s === void 0 && (s = setTimeout(b, t)), l;
  }
  return E.cancel = x, E.flush = y, E;
}
function eS(e, t, n) {
  var a = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(gb);
  return zd(n) && (a = "leading" in n ? !!n.leading : a, i = "trailing" in n ? !!n.trailing : i), QE(e, t, {
    leading: a,
    maxWait: t,
    trailing: i
  });
}
function zd(e) {
  var t = typeof e;
  return !!e && (t == "object" || t == "function");
}
function tS(e) {
  return !!e && typeof e == "object";
}
function nS(e) {
  return typeof e == "symbol" || tS(e) && KE.call(e) == FE;
}
function M2(e) {
  if (typeof e == "number")
    return e;
  if (nS(e))
    return k2;
  if (zd(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = zd(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = e.replace(zE, "");
  var n = HE.test(e);
  return n || XE.test(e) ? WE(e.slice(2), n ? 2 : 8) : BE.test(e) ? k2 : +e;
}
var aS = eS;
const cc = /* @__PURE__ */ pl(aS);
var bb = { exports: {} };
(function(e, t) {
  (function(n, a) {
    e.exports = a();
  })(gi, function() {
    var n = function() {
      this._listeners = {};
    };
    n.prototype.addEventListener = function(d, o) {
      this._listeners[d] = this._listeners[d] || [], this._listeners[d].indexOf(o) < 0 && this._listeners[d].push(o);
    }, n.prototype.removeEventListener = function(d, o) {
      if (this._listeners[d]) {
        var u = this._listeners[d].indexOf(o);
        u >= 0 && this._listeners[d].splice(u, 1);
      }
    }, n.prototype.dispatchEvent = function(d) {
      if (this._listeners[d.type] && this._listeners[d.type].length)
        for (var o = this._listeners[d.type].slice(), u = 0, f = o.length; u < f; ++u)
          o[u].call(this, d);
    };
    var a = function(d) {
      return typeof d.constructor == "function" && d.constructor.name === "GeneratorFunction";
    }, i = function(d) {
      return {
        next: function() {
          var o = d();
          return o ? { value: o } : { done: !0 };
        }
      };
    }, r = function(d) {
      var o = !1;
      return {
        next: function() {
          return o ? { done: !0 } : (o = !0, { value: d });
        }
      };
    }, l = function(d, o) {
      var u = typeof d;
      if (u === "object") {
        if (typeof d.next == "function")
          return d;
        if (typeof d.then == "function")
          return r(d);
      }
      return u === "function" ? a(d) ? d() : i(d) : r(o.resolve(d));
    }, s = function(d, o, u) {
      this.target = d, this.type = o, this.data = u;
    }, c = function(d, o, u) {
      if (n.call(this), typeof o != "number" || Math.floor(o) !== o || o < 1)
        throw new Error("Invalid concurrency");
      this._concurrency = o, this._options = u || {}, this._options.promise = this._options.promise || Promise, this._iterator = l(d, this._options.promise), this._done = !1, this._size = 0, this._promise = null, this._callbacks = null;
    };
    return c.prototype = new n(), c.prototype.constructor = c, c.prototype.concurrency = function(d) {
      return typeof d < "u" && (this._concurrency = d, this.active() && this._proceed()), this._concurrency;
    }, c.prototype.size = function() {
      return this._size;
    }, c.prototype.active = function() {
      return !!this._promise;
    }, c.prototype.promise = function() {
      return this._promise;
    }, c.prototype.start = function() {
      var d = this, o = this._options.promise;
      return this._promise = new o(function(u, f) {
        d._callbacks = {
          reject: f,
          resolve: u
        }, d._proceed();
      }), this._promise;
    }, c.prototype._fireEvent = function(d, o) {
      this.dispatchEvent(new s(this, d, o));
    }, c.prototype._settle = function(d) {
      d ? this._callbacks.reject(d) : this._callbacks.resolve(), this._promise = null, this._callbacks = null;
    }, c.prototype._onPooledPromiseFulfilled = function(d, o) {
      this._size--, this.active() && (this._fireEvent("fulfilled", {
        promise: d,
        result: o
      }), this._proceed());
    }, c.prototype._onPooledPromiseRejected = function(d, o) {
      this._size--, this.active() && (this._fireEvent("rejected", {
        promise: d,
        error: o
      }), this._settle(o || new Error("Unknown error")));
    }, c.prototype._trackPromise = function(d) {
      var o = this;
      d.then(function(u) {
        o._onPooledPromiseFulfilled(d, u);
      }, function(u) {
        o._onPooledPromiseRejected(d, u);
      }).catch(function(u) {
        o._settle(new Error("Promise processing failed: " + u));
      });
    }, c.prototype._proceed = function() {
      if (!this._done) {
        for (var d = { done: !1 }; this._size < this._concurrency && !(d = this._iterator.next()).done; )
          this._size++, this._trackPromise(d.value);
        this._done = d === null || !!d.done;
      }
      this._done && this._size === 0 && this._settle();
    }, c.PromisePoolEvent = s, c.PromisePool = c, c;
  });
})(bb);
var iS = bb.exports;
const rS = /* @__PURE__ */ pl(iS);
function e1(e, t, n) {
  if (e && e.length) {
    const [a, i] = t, r = Math.PI / 180 * n, l = Math.cos(r), s = Math.sin(r);
    for (const c of e) {
      const [d, o] = c;
      c[0] = (d - a) * l - (o - i) * s + a, c[1] = (d - a) * s + (o - i) * l + i;
    }
  }
}
function lS(e, t, n) {
  const a = [];
  e.forEach((i) => a.push(...i)), e1(a, t, n);
}
function sS(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}
function oS(e, t, n, a = 1) {
  const i = n, r = Math.max(t, 0.1), l = e[0] && e[0][0] && typeof e[0][0] == "number" ? [e] : e, s = [0, 0];
  if (i)
    for (const d of l)
      e1(d, s, i);
  const c = cS(l, r, a);
  if (i) {
    for (const d of l)
      e1(d, s, -i);
    lS(c, s, -i);
  }
  return c;
}
function cS(e, t, n) {
  const a = [];
  for (const d of e) {
    const o = [...d];
    sS(o[0], o[o.length - 1]) || o.push([o[0][0], o[0][1]]), o.length > 2 && a.push(o);
  }
  const i = [];
  t = Math.max(t, 0.1);
  const r = [];
  for (const d of a)
    for (let o = 0; o < d.length - 1; o++) {
      const u = d[o], f = d[o + 1];
      if (u[1] !== f[1]) {
        const p = Math.min(u[1], f[1]);
        r.push({
          ymin: p,
          ymax: Math.max(u[1], f[1]),
          x: p === u[1] ? u[0] : f[0],
          islope: (f[0] - u[0]) / (f[1] - u[1])
        });
      }
    }
  if (r.sort((d, o) => d.ymin < o.ymin ? -1 : d.ymin > o.ymin ? 1 : d.x < o.x ? -1 : d.x > o.x ? 1 : d.ymax === o.ymax ? 0 : (d.ymax - o.ymax) / Math.abs(d.ymax - o.ymax)), !r.length)
    return i;
  let l = [], s = r[0].ymin, c = 0;
  for (; l.length || r.length; ) {
    if (r.length) {
      let d = -1;
      for (let u = 0; u < r.length && !(r[u].ymin > s); u++)
        d = u;
      r.splice(0, d + 1).forEach((u) => {
        l.push({ s, edge: u });
      });
    }
    if (l = l.filter((d) => !(d.edge.ymax <= s)), l.sort((d, o) => d.edge.x === o.edge.x ? 0 : (d.edge.x - o.edge.x) / Math.abs(d.edge.x - o.edge.x)), (n !== 1 || c % t === 0) && l.length > 1)
      for (let d = 0; d < l.length; d = d + 2) {
        const o = d + 1;
        if (o >= l.length)
          break;
        const u = l[d].edge, f = l[o].edge;
        i.push([
          [Math.round(u.x), s],
          [Math.round(f.x), s]
        ]);
      }
    s += n, l.forEach((d) => {
      d.edge.x = d.edge.x + n * d.edge.islope;
    }), c++;
  }
  return i;
}
function dc(e, t) {
  var n;
  const a = t.hachureAngle + 90;
  let i = t.hachureGap;
  i < 0 && (i = t.strokeWidth * 4), i = Math.max(i, 0.1);
  let r = 1;
  return t.roughness >= 1 && (((n = t.randomizer) === null || n === void 0 ? void 0 : n.next()) || Math.random()) > 0.7 && (r = i), oS(e, i, a, r || 1);
}
class T0 {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    return this._fillPolygons(t, n);
  }
  _fillPolygons(t, n) {
    const a = dc(t, n);
    return { type: "fillSketch", ops: this.renderLines(a, n) };
  }
  renderLines(t, n) {
    const a = [];
    for (const i of t)
      a.push(...this.helper.doubleLineOps(i[0][0], i[0][1], i[1][0], i[1][1], n));
    return a;
  }
}
function Fu(e) {
  const t = e[0], n = e[1];
  return Math.sqrt(Math.pow(t[0] - n[0], 2) + Math.pow(t[1] - n[1], 2));
}
class dS extends T0 {
  fillPolygons(t, n) {
    let a = n.hachureGap;
    a < 0 && (a = n.strokeWidth * 4), a = Math.max(a, 0.1);
    const i = Object.assign({}, n, { hachureGap: a }), r = dc(t, i), l = Math.PI / 180 * n.hachureAngle, s = [], c = a * 0.5 * Math.cos(l), d = a * 0.5 * Math.sin(l);
    for (const [u, f] of r)
      Fu([u, f]) && s.push([
        [u[0] - c, u[1] + d],
        [...f]
      ], [
        [u[0] + c, u[1] - d],
        [...f]
      ]);
    return { type: "fillSketch", ops: this.renderLines(s, n) };
  }
}
class uS extends T0 {
  fillPolygons(t, n) {
    const a = this._fillPolygons(t, n), i = Object.assign({}, n, { hachureAngle: n.hachureAngle + 90 }), r = this._fillPolygons(t, i);
    return a.ops = a.ops.concat(r.ops), a;
  }
}
class hS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    n = Object.assign({}, n, { hachureAngle: 0 });
    const a = dc(t, n);
    return this.dotsOnLines(a, n);
  }
  dotsOnLines(t, n) {
    const a = [];
    let i = n.hachureGap;
    i < 0 && (i = n.strokeWidth * 4), i = Math.max(i, 0.1);
    let r = n.fillWeight;
    r < 0 && (r = n.strokeWidth / 2);
    const l = i / 4;
    for (const s of t) {
      const c = Fu(s), d = c / i, o = Math.ceil(d) - 1, u = c - o * i, f = (s[0][0] + s[1][0]) / 2 - i / 4, p = Math.min(s[0][1], s[1][1]);
      for (let U = 0; U < o; U++) {
        const m = p + u + U * i, g = f - l + Math.random() * 2 * l, b = m - l + Math.random() * 2 * l, v = this.helper.ellipse(g, b, r, r, n);
        a.push(...v.ops);
      }
    }
    return { type: "fillSketch", ops: a };
  }
}
class fS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    const a = dc(t, n);
    return { type: "fillSketch", ops: this.dashedLine(a, n) };
  }
  dashedLine(t, n) {
    const a = n.dashOffset < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashOffset, i = n.dashGap < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashGap, r = [];
    return t.forEach((l) => {
      const s = Fu(l), c = Math.floor(s / (a + i)), d = (s + i - c * (a + i)) / 2;
      let o = l[0], u = l[1];
      o[0] > u[0] && (o = l[1], u = l[0]);
      const f = Math.atan((u[1] - o[1]) / (u[0] - o[0]));
      for (let p = 0; p < c; p++) {
        const U = p * (a + i), m = U + a, g = [o[0] + U * Math.cos(f) + d * Math.cos(f), o[1] + U * Math.sin(f) + d * Math.sin(f)], b = [o[0] + m * Math.cos(f) + d * Math.cos(f), o[1] + m * Math.sin(f) + d * Math.sin(f)];
        r.push(...this.helper.doubleLineOps(g[0], g[1], b[0], b[1], n));
      }
    }), r;
  }
}
class pS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    const a = n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap, i = n.zigzagOffset < 0 ? a : n.zigzagOffset;
    n = Object.assign({}, n, { hachureGap: a + i });
    const r = dc(t, n);
    return { type: "fillSketch", ops: this.zigzagLines(r, i, n) };
  }
  zigzagLines(t, n, a) {
    const i = [];
    return t.forEach((r) => {
      const l = Fu(r), s = Math.round(l / (2 * n));
      let c = r[0], d = r[1];
      c[0] > d[0] && (c = r[1], d = r[0]);
      const o = Math.atan((d[1] - c[1]) / (d[0] - c[0]));
      for (let u = 0; u < s; u++) {
        const f = u * 2 * n, p = (u + 1) * 2 * n, U = Math.sqrt(2 * Math.pow(n, 2)), m = [c[0] + f * Math.cos(o), c[1] + f * Math.sin(o)], g = [c[0] + p * Math.cos(o), c[1] + p * Math.sin(o)], b = [m[0] + U * Math.cos(o + Math.PI / 4), m[1] + U * Math.sin(o + Math.PI / 4)];
        i.push(...this.helper.doubleLineOps(m[0], m[1], b[0], b[1], a), ...this.helper.doubleLineOps(b[0], b[1], g[0], g[1], a));
      }
    }), i;
  }
}
const Un = {};
function US(e, t) {
  let n = e.fillStyle || "hachure";
  if (!Un[n])
    switch (n) {
      case "zigzag":
        Un[n] || (Un[n] = new dS(t));
        break;
      case "cross-hatch":
        Un[n] || (Un[n] = new uS(t));
        break;
      case "dots":
        Un[n] || (Un[n] = new hS(t));
        break;
      case "dashed":
        Un[n] || (Un[n] = new fS(t));
        break;
      case "zigzag-line":
        Un[n] || (Un[n] = new pS(t));
        break;
      case "hachure":
      default:
        n = "hachure", Un[n] || (Un[n] = new T0(t));
        break;
    }
  return Un[n];
}
function mS() {
  return Math.floor(Math.random() * 2 ** 31);
}
class vb {
  constructor(t) {
    this.seed = t;
  }
  next() {
    return this.seed ? (2 ** 31 - 1 & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31 : Math.random();
  }
}
const gS = 0, t1 = 1, xb = 2, Pc = { A: 7, a: 7, C: 6, c: 6, H: 1, h: 1, L: 2, l: 2, M: 2, m: 2, Q: 4, q: 4, S: 4, s: 4, T: 2, t: 2, V: 1, v: 1, Z: 0, z: 0 };
function bS(e) {
  const t = new Array();
  for (; e !== ""; )
    if (e.match(/^([ \t\r\n,]+)/))
      e = e.substr(RegExp.$1.length);
    else if (e.match(/^([aAcChHlLmMqQsStTvVzZ])/))
      t[t.length] = { type: gS, text: RegExp.$1 }, e = e.substr(RegExp.$1.length);
    else if (e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))
      t[t.length] = { type: t1, text: `${parseFloat(RegExp.$1)}` }, e = e.substr(RegExp.$1.length);
    else
      return [];
  return t[t.length] = { type: xb, text: "" }, t;
}
function Vh(e, t) {
  return e.type === t;
}
function _0(e) {
  const t = [], n = bS(e);
  let a = "BOD", i = 0, r = n[i];
  for (; !Vh(r, xb); ) {
    let l = 0;
    const s = [];
    if (a === "BOD")
      if (r.text === "M" || r.text === "m")
        i++, l = Pc[r.text], a = r.text;
      else
        return _0("M0,0" + e);
    else Vh(r, t1) ? l = Pc[a] : (i++, l = Pc[r.text], a = r.text);
    if (i + l < n.length) {
      for (let c = i; c < i + l; c++) {
        const d = n[c];
        if (Vh(d, t1))
          s[s.length] = +d.text;
        else
          throw new Error("Param not a number: " + a + "," + d.text);
      }
      if (typeof Pc[a] == "number") {
        const c = { key: a, data: s };
        t.push(c), i += l, r = n[i], a === "M" && (a = "L"), a === "m" && (a = "l");
      } else
        throw new Error("Bad segment: " + a);
    } else
      throw new Error("Path data ended short");
  }
  return t;
}
function yb(e) {
  let t = 0, n = 0, a = 0, i = 0;
  const r = [];
  for (const { key: l, data: s } of e)
    switch (l) {
      case "M":
        r.push({ key: "M", data: [...s] }), [t, n] = s, [a, i] = s;
        break;
      case "m":
        t += s[0], n += s[1], r.push({ key: "M", data: [t, n] }), a = t, i = n;
        break;
      case "L":
        r.push({ key: "L", data: [...s] }), [t, n] = s;
        break;
      case "l":
        t += s[0], n += s[1], r.push({ key: "L", data: [t, n] });
        break;
      case "C":
        r.push({ key: "C", data: [...s] }), t = s[4], n = s[5];
        break;
      case "c": {
        const c = s.map((d, o) => o % 2 ? d + n : d + t);
        r.push({ key: "C", data: c }), t = c[4], n = c[5];
        break;
      }
      case "Q":
        r.push({ key: "Q", data: [...s] }), t = s[2], n = s[3];
        break;
      case "q": {
        const c = s.map((d, o) => o % 2 ? d + n : d + t);
        r.push({ key: "Q", data: c }), t = c[2], n = c[3];
        break;
      }
      case "A":
        r.push({ key: "A", data: [...s] }), t = s[5], n = s[6];
        break;
      case "a":
        t += s[5], n += s[6], r.push({ key: "A", data: [s[0], s[1], s[2], s[3], s[4], t, n] });
        break;
      case "H":
        r.push({ key: "H", data: [...s] }), t = s[0];
        break;
      case "h":
        t += s[0], r.push({ key: "H", data: [t] });
        break;
      case "V":
        r.push({ key: "V", data: [...s] }), n = s[0];
        break;
      case "v":
        n += s[0], r.push({ key: "V", data: [n] });
        break;
      case "S":
        r.push({ key: "S", data: [...s] }), t = s[2], n = s[3];
        break;
      case "s": {
        const c = s.map((d, o) => o % 2 ? d + n : d + t);
        r.push({ key: "S", data: c }), t = c[2], n = c[3];
        break;
      }
      case "T":
        r.push({ key: "T", data: [...s] }), t = s[0], n = s[1];
        break;
      case "t":
        t += s[0], n += s[1], r.push({ key: "T", data: [t, n] });
        break;
      case "Z":
      case "z":
        r.push({ key: "Z", data: [] }), t = a, n = i;
        break;
    }
  return r;
}
function wb(e) {
  const t = [];
  let n = "", a = 0, i = 0, r = 0, l = 0, s = 0, c = 0;
  for (const { key: d, data: o } of e) {
    switch (d) {
      case "M":
        t.push({ key: "M", data: [...o] }), [a, i] = o, [r, l] = o;
        break;
      case "C":
        t.push({ key: "C", data: [...o] }), a = o[4], i = o[5], s = o[2], c = o[3];
        break;
      case "L":
        t.push({ key: "L", data: [...o] }), [a, i] = o;
        break;
      case "H":
        a = o[0], t.push({ key: "L", data: [a, i] });
        break;
      case "V":
        i = o[0], t.push({ key: "L", data: [a, i] });
        break;
      case "S": {
        let u = 0, f = 0;
        n === "C" || n === "S" ? (u = a + (a - s), f = i + (i - c)) : (u = a, f = i), t.push({ key: "C", data: [u, f, ...o] }), s = o[0], c = o[1], a = o[2], i = o[3];
        break;
      }
      case "T": {
        const [u, f] = o;
        let p = 0, U = 0;
        n === "Q" || n === "T" ? (p = a + (a - s), U = i + (i - c)) : (p = a, U = i);
        const m = a + 2 * (p - a) / 3, g = i + 2 * (U - i) / 3, b = u + 2 * (p - u) / 3, v = f + 2 * (U - f) / 3;
        t.push({ key: "C", data: [m, g, b, v, u, f] }), s = p, c = U, a = u, i = f;
        break;
      }
      case "Q": {
        const [u, f, p, U] = o, m = a + 2 * (u - a) / 3, g = i + 2 * (f - i) / 3, b = p + 2 * (u - p) / 3, v = U + 2 * (f - U) / 3;
        t.push({ key: "C", data: [m, g, b, v, p, U] }), s = u, c = f, a = p, i = U;
        break;
      }
      case "A": {
        const u = Math.abs(o[0]), f = Math.abs(o[1]), p = o[2], U = o[3], m = o[4], g = o[5], b = o[6];
        u === 0 || f === 0 ? (t.push({ key: "C", data: [a, i, g, b, g, b] }), a = g, i = b) : (a !== g || i !== b) && (Eb(a, i, g, b, u, f, p, U, m).forEach(function(x) {
          t.push({ key: "C", data: x });
        }), a = g, i = b);
        break;
      }
      case "Z":
        t.push({ key: "Z", data: [] }), a = r, i = l;
        break;
    }
    n = d;
  }
  return t;
}
function vS(e) {
  return Math.PI * e / 180;
}
function Rs(e, t, n) {
  const a = e * Math.cos(n) - t * Math.sin(n), i = e * Math.sin(n) + t * Math.cos(n);
  return [a, i];
}
function Eb(e, t, n, a, i, r, l, s, c, d) {
  const o = vS(l);
  let u = [], f = 0, p = 0, U = 0, m = 0;
  if (d)
    [f, p, U, m] = d;
  else {
    [e, t] = Rs(e, t, -o), [n, a] = Rs(n, a, -o);
    const A = (e - n) / 2, D = (t - a) / 2;
    let P = A * A / (i * i) + D * D / (r * r);
    P > 1 && (P = Math.sqrt(P), i = P * i, r = P * r);
    const N = s === c ? -1 : 1, $ = i * i, R = r * r, V = $ * R - $ * D * D - R * A * A, O = $ * D * D + R * A * A, G = N * Math.sqrt(Math.abs(V / O));
    U = G * i * D / r + (e + n) / 2, m = G * -r * A / i + (t + a) / 2, f = Math.asin(parseFloat(((t - m) / r).toFixed(9))), p = Math.asin(parseFloat(((a - m) / r).toFixed(9))), e < U && (f = Math.PI - f), n < U && (p = Math.PI - p), f < 0 && (f = Math.PI * 2 + f), p < 0 && (p = Math.PI * 2 + p), c && f > p && (f = f - Math.PI * 2), !c && p > f && (p = p - Math.PI * 2);
  }
  let g = p - f;
  if (Math.abs(g) > Math.PI * 120 / 180) {
    const A = p, D = n, P = a;
    c && p > f ? p = f + Math.PI * 120 / 180 * 1 : p = f + Math.PI * 120 / 180 * -1, n = U + i * Math.cos(p), a = m + r * Math.sin(p), u = Eb(n, a, D, P, i, r, l, 0, c, [p, A, U, m]);
  }
  g = p - f;
  const b = Math.cos(f), v = Math.sin(f), x = Math.cos(p), y = Math.sin(p), E = Math.tan(g / 4), S = 4 / 3 * i * E, w = 4 / 3 * r * E, M = [e, t], I = [e + S * v, t - w * b], T = [n + S * y, a - w * x], _ = [n, a];
  if (I[0] = 2 * M[0] - I[0], I[1] = 2 * M[1] - I[1], d)
    return [I, T, _].concat(u);
  {
    u = [I, T, _].concat(u);
    const A = [];
    for (let D = 0; D < u.length; D += 3) {
      const P = Rs(u[D][0], u[D][1], o), N = Rs(u[D + 1][0], u[D + 1][1], o), $ = Rs(u[D + 2][0], u[D + 2][1], o);
      A.push([P[0], P[1], N[0], N[1], $[0], $[1]]);
    }
    return A;
  }
}
const xS = {
  randOffset: kS,
  randOffsetWithRange: MS,
  ellipse: ES,
  doubleLineOps: CS
};
function Sb(e, t, n, a, i) {
  return { type: "path", ops: Si(e, t, n, a, i) };
}
function ud(e, t, n) {
  const a = (e || []).length;
  if (a > 2) {
    const i = [];
    for (let r = 0; r < a - 1; r++)
      i.push(...Si(e[r][0], e[r][1], e[r + 1][0], e[r + 1][1], n));
    return t && i.push(...Si(e[a - 1][0], e[a - 1][1], e[0][0], e[0][1], n)), { type: "path", ops: i };
  } else if (a === 2)
    return Sb(e[0][0], e[0][1], e[1][0], e[1][1], n);
  return { type: "path", ops: [] };
}
function yS(e, t) {
  return ud(e, !0, t);
}
function wS(e, t, n, a, i) {
  const r = [
    [e, t],
    [e + n, t],
    [e + n, t + a],
    [e, t + a]
  ];
  return yS(r, i);
}
function C2(e, t) {
  let n = A2(e, 1 * (1 + t.roughness * 0.2), t);
  if (!t.disableMultiStroke) {
    const a = A2(e, 1.5 * (1 + t.roughness * 0.22), IS(t));
    n = n.concat(a);
  }
  return { type: "path", ops: n };
}
function ES(e, t, n, a, i) {
  const r = kb(n, a, i);
  return n1(e, t, i, r).opset;
}
function kb(e, t, n) {
  const a = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(e / 2, 2) + Math.pow(t / 2, 2)) / 2)), i = Math.ceil(Math.max(n.curveStepCount, n.curveStepCount / Math.sqrt(200) * a)), r = Math.PI * 2 / i;
  let l = Math.abs(e / 2), s = Math.abs(t / 2);
  const c = 1 - n.curveFitting;
  return l += fe(l * c, n), s += fe(s * c, n), { increment: r, rx: l, ry: s };
}
function n1(e, t, n, a) {
  const [i, r] = j2(a.increment, e, t, a.rx, a.ry, 1, a.increment * Bd(0.1, Bd(0.4, 1, n), n), n);
  let l = Hd(i, null, n);
  if (!n.disableMultiStroke && n.roughness !== 0) {
    const [s] = j2(a.increment, e, t, a.rx, a.ry, 1.5, 0, n), c = Hd(s, null, n);
    l = l.concat(c);
  }
  return {
    estimatedPoints: r,
    opset: { type: "path", ops: l }
  };
}
function I2(e, t, n, a, i, r, l, s, c) {
  const d = e, o = t;
  let u = Math.abs(n / 2), f = Math.abs(a / 2);
  u += fe(u * 0.01, c), f += fe(f * 0.01, c);
  let p = i, U = r;
  for (; p < 0; )
    p += Math.PI * 2, U += Math.PI * 2;
  U - p > Math.PI * 2 && (p = 0, U = Math.PI * 2);
  const m = Math.PI * 2 / c.curveStepCount, g = Math.min(m / 2, (U - p) / 2), b = D2(g, d, o, u, f, p, U, 1, c);
  if (!c.disableMultiStroke) {
    const v = D2(g, d, o, u, f, p, U, 1.5, c);
    b.push(...v);
  }
  return l && (s ? b.push(...Si(d, o, d + u * Math.cos(p), o + f * Math.sin(p), c), ...Si(d, o, d + u * Math.cos(U), o + f * Math.sin(U), c)) : b.push({ op: "lineTo", data: [d, o] }, { op: "lineTo", data: [d + u * Math.cos(p), o + f * Math.sin(p)] })), { type: "path", ops: b };
}
function T2(e, t) {
  const n = wb(yb(_0(e))), a = [];
  let i = [0, 0], r = [0, 0];
  for (const { key: l, data: s } of n)
    switch (l) {
      case "M": {
        r = [s[0], s[1]], i = [s[0], s[1]];
        break;
      }
      case "L":
        a.push(...Si(r[0], r[1], s[0], s[1], t)), r = [s[0], s[1]];
        break;
      case "C": {
        const [c, d, o, u, f, p] = s;
        a.push(...TS(c, d, o, u, f, p, r, t)), r = [f, p];
        break;
      }
      case "Z":
        a.push(...Si(r[0], r[1], i[0], i[1], t)), r = [i[0], i[1]];
        break;
    }
  return { type: "path", ops: a };
}
function Gh(e, t) {
  const n = [];
  for (const a of e)
    if (a.length) {
      const i = t.maxRandomnessOffset || 0, r = a.length;
      if (r > 2) {
        n.push({ op: "move", data: [a[0][0] + fe(i, t), a[0][1] + fe(i, t)] });
        for (let l = 1; l < r; l++)
          n.push({ op: "lineTo", data: [a[l][0] + fe(i, t), a[l][1] + fe(i, t)] });
      }
    }
  return { type: "fillPath", ops: n };
}
function Dl(e, t) {
  return US(t, xS).fillPolygons(e, t);
}
function SS(e, t, n, a, i, r, l) {
  const s = e, c = t;
  let d = Math.abs(n / 2), o = Math.abs(a / 2);
  d += fe(d * 0.01, l), o += fe(o * 0.01, l);
  let u = i, f = r;
  for (; u < 0; )
    u += Math.PI * 2, f += Math.PI * 2;
  f - u > Math.PI * 2 && (u = 0, f = Math.PI * 2);
  const p = (f - u) / l.curveStepCount, U = [];
  for (let m = u; m <= f; m = m + p)
    U.push([s + d * Math.cos(m), c + o * Math.sin(m)]);
  return U.push([s + d * Math.cos(f), c + o * Math.sin(f)]), U.push([s, c]), Dl([U], l);
}
function kS(e, t) {
  return fe(e, t);
}
function MS(e, t, n) {
  return Bd(e, t, n);
}
function CS(e, t, n, a, i) {
  return Si(e, t, n, a, i, !0);
}
function IS(e) {
  const t = Object.assign({}, e);
  return t.randomizer = void 0, e.seed && (t.seed = e.seed + 1), t;
}
function Mb(e) {
  return e.randomizer || (e.randomizer = new vb(e.seed || 0)), e.randomizer.next();
}
function Bd(e, t, n, a = 1) {
  return n.roughness * a * (Mb(n) * (t - e) + e);
}
function fe(e, t, n = 1) {
  return Bd(-e, e, t, n);
}
function Si(e, t, n, a, i, r = !1) {
  const l = r ? i.disableMultiStrokeFill : i.disableMultiStroke, s = _2(e, t, n, a, i, !0, !1);
  if (l)
    return s;
  const c = _2(e, t, n, a, i, !0, !0);
  return s.concat(c);
}
function _2(e, t, n, a, i, r, l) {
  const s = Math.pow(e - n, 2) + Math.pow(t - a, 2), c = Math.sqrt(s);
  let d = 1;
  c < 200 ? d = 1 : c > 500 ? d = 0.4 : d = -16668e-7 * c + 1.233334;
  let o = i.maxRandomnessOffset || 0;
  o * o * 100 > s && (o = c / 10);
  const u = o / 2, f = 0.2 + Mb(i) * 0.2;
  let p = i.bowing * i.maxRandomnessOffset * (a - t) / 200, U = i.bowing * i.maxRandomnessOffset * (e - n) / 200;
  p = fe(p, i, d), U = fe(U, i, d);
  const m = [], g = () => fe(u, i, d), b = () => fe(o, i, d), v = i.preserveVertices;
  return l ? m.push({
    op: "move",
    data: [
      e + (v ? 0 : g()),
      t + (v ? 0 : g())
    ]
  }) : m.push({
    op: "move",
    data: [
      e + (v ? 0 : fe(o, i, d)),
      t + (v ? 0 : fe(o, i, d))
    ]
  }), l ? m.push({
    op: "bcurveTo",
    data: [
      p + e + (n - e) * f + g(),
      U + t + (a - t) * f + g(),
      p + e + 2 * (n - e) * f + g(),
      U + t + 2 * (a - t) * f + g(),
      n + (v ? 0 : g()),
      a + (v ? 0 : g())
    ]
  }) : m.push({
    op: "bcurveTo",
    data: [
      p + e + (n - e) * f + b(),
      U + t + (a - t) * f + b(),
      p + e + 2 * (n - e) * f + b(),
      U + t + 2 * (a - t) * f + b(),
      n + (v ? 0 : b()),
      a + (v ? 0 : b())
    ]
  }), m;
}
function A2(e, t, n) {
  const a = [];
  a.push([
    e[0][0] + fe(t, n),
    e[0][1] + fe(t, n)
  ]), a.push([
    e[0][0] + fe(t, n),
    e[0][1] + fe(t, n)
  ]);
  for (let i = 1; i < e.length; i++)
    a.push([
      e[i][0] + fe(t, n),
      e[i][1] + fe(t, n)
    ]), i === e.length - 1 && a.push([
      e[i][0] + fe(t, n),
      e[i][1] + fe(t, n)
    ]);
  return Hd(a, null, n);
}
function Hd(e, t, n) {
  const a = e.length, i = [];
  if (a > 3) {
    const r = [], l = 1 - n.curveTightness;
    i.push({ op: "move", data: [e[1][0], e[1][1]] });
    for (let s = 1; s + 2 < a; s++) {
      const c = e[s];
      r[0] = [c[0], c[1]], r[1] = [c[0] + (l * e[s + 1][0] - l * e[s - 1][0]) / 6, c[1] + (l * e[s + 1][1] - l * e[s - 1][1]) / 6], r[2] = [e[s + 1][0] + (l * e[s][0] - l * e[s + 2][0]) / 6, e[s + 1][1] + (l * e[s][1] - l * e[s + 2][1]) / 6], r[3] = [e[s + 1][0], e[s + 1][1]], i.push({ op: "bcurveTo", data: [r[1][0], r[1][1], r[2][0], r[2][1], r[3][0], r[3][1]] });
    }
  } else a === 3 ? (i.push({ op: "move", data: [e[1][0], e[1][1]] }), i.push({
    op: "bcurveTo",
    data: [
      e[1][0],
      e[1][1],
      e[2][0],
      e[2][1],
      e[2][0],
      e[2][1]
    ]
  })) : a === 2 && i.push(...Si(e[0][0], e[0][1], e[1][0], e[1][1], n));
  return i;
}
function j2(e, t, n, a, i, r, l, s) {
  const c = s.roughness === 0, d = [], o = [];
  if (c) {
    e = e / 4, o.push([
      t + a * Math.cos(-e),
      n + i * Math.sin(-e)
    ]);
    for (let u = 0; u <= Math.PI * 2; u = u + e) {
      const f = [
        t + a * Math.cos(u),
        n + i * Math.sin(u)
      ];
      d.push(f), o.push(f);
    }
    o.push([
      t + a * Math.cos(0),
      n + i * Math.sin(0)
    ]), o.push([
      t + a * Math.cos(e),
      n + i * Math.sin(e)
    ]);
  } else {
    const u = fe(0.5, s) - Math.PI / 2;
    o.push([
      fe(r, s) + t + 0.9 * a * Math.cos(u - e),
      fe(r, s) + n + 0.9 * i * Math.sin(u - e)
    ]);
    const f = Math.PI * 2 + u - 0.01;
    for (let p = u; p < f; p = p + e) {
      const U = [
        fe(r, s) + t + a * Math.cos(p),
        fe(r, s) + n + i * Math.sin(p)
      ];
      d.push(U), o.push(U);
    }
    o.push([
      fe(r, s) + t + a * Math.cos(u + Math.PI * 2 + l * 0.5),
      fe(r, s) + n + i * Math.sin(u + Math.PI * 2 + l * 0.5)
    ]), o.push([
      fe(r, s) + t + 0.98 * a * Math.cos(u + l),
      fe(r, s) + n + 0.98 * i * Math.sin(u + l)
    ]), o.push([
      fe(r, s) + t + 0.9 * a * Math.cos(u + l * 0.5),
      fe(r, s) + n + 0.9 * i * Math.sin(u + l * 0.5)
    ]);
  }
  return [o, d];
}
function D2(e, t, n, a, i, r, l, s, c) {
  const d = r + fe(0.1, c), o = [];
  o.push([
    fe(s, c) + t + 0.9 * a * Math.cos(d - e),
    fe(s, c) + n + 0.9 * i * Math.sin(d - e)
  ]);
  for (let u = d; u <= l; u = u + e)
    o.push([
      fe(s, c) + t + a * Math.cos(u),
      fe(s, c) + n + i * Math.sin(u)
    ]);
  return o.push([
    t + a * Math.cos(l),
    n + i * Math.sin(l)
  ]), o.push([
    t + a * Math.cos(l),
    n + i * Math.sin(l)
  ]), Hd(o, null, c);
}
function TS(e, t, n, a, i, r, l, s) {
  const c = [], d = [s.maxRandomnessOffset || 1, (s.maxRandomnessOffset || 1) + 0.3];
  let o = [0, 0];
  const u = s.disableMultiStroke ? 1 : 2, f = s.preserveVertices;
  for (let p = 0; p < u; p++)
    p === 0 ? c.push({ op: "move", data: [l[0], l[1]] }) : c.push({ op: "move", data: [l[0] + (f ? 0 : fe(d[0], s)), l[1] + (f ? 0 : fe(d[0], s))] }), o = f ? [i, r] : [i + fe(d[p], s), r + fe(d[p], s)], c.push({
      op: "bcurveTo",
      data: [
        e + fe(d[p], s),
        t + fe(d[p], s),
        n + fe(d[p], s),
        a + fe(d[p], s),
        o[0],
        o[1]
      ]
    });
  return c;
}
function Ps(e) {
  return [...e];
}
function _S(e, t = 0) {
  const n = e.length;
  if (n < 3)
    throw new Error("A curve must have at least three points.");
  const a = [];
  if (n === 3)
    a.push(Ps(e[0]), Ps(e[1]), Ps(e[2]), Ps(e[2]));
  else {
    const i = [];
    i.push(e[0], e[0]);
    for (let s = 1; s < e.length; s++)
      i.push(e[s]), s === e.length - 1 && i.push(e[s]);
    const r = [], l = 1 - t;
    a.push(Ps(i[0]));
    for (let s = 1; s + 2 < i.length; s++) {
      const c = i[s];
      r[0] = [c[0], c[1]], r[1] = [c[0] + (l * i[s + 1][0] - l * i[s - 1][0]) / 6, c[1] + (l * i[s + 1][1] - l * i[s - 1][1]) / 6], r[2] = [i[s + 1][0] + (l * i[s][0] - l * i[s + 2][0]) / 6, i[s + 1][1] + (l * i[s][1] - l * i[s + 2][1]) / 6], r[3] = [i[s + 1][0], i[s + 1][1]], a.push(r[1], r[2], r[3]);
    }
  }
  return a;
}
function AS(e, t) {
  return Math.sqrt(hd(e, t));
}
function hd(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function jS(e, t, n) {
  const a = hd(t, n);
  if (a === 0)
    return hd(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), hd(e, _r(t, n, i));
}
function _r(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function DS(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let s = 3 * a[1] - 2 * n[1] - r[1];
  s *= s;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), s < d && (s = d), l + s;
}
function a1(e, t, n, a) {
  const i = a || [];
  if (DS(e, t) < n) {
    const r = e[t + 0];
    i.length ? AS(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], s = e[t + 1], c = e[t + 2], d = e[t + 3], o = _r(l, s, 0.5), u = _r(s, c, 0.5), f = _r(c, d, 0.5), p = _r(o, u, 0.5), U = _r(u, f, 0.5), m = _r(p, U, 0.5);
    a1([l, o, p, m], 0, n, i), a1([m, U, f, d], 0, n, i);
  }
  return i;
}
function i1(e, t, n, a, i) {
  const r = i || [], l = e[t], s = e[n - 1];
  let c = 0, d = 1;
  for (let o = t + 1; o < n - 1; ++o) {
    const u = jS(e[o], l, s);
    u > c && (c = u, d = o);
  }
  return Math.sqrt(c) > a ? (i1(e, t, d + 1, a, r), i1(e, d, n, a, r)) : (r.length || r.push(l), r.push(s)), r;
}
function LS(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    a1(e, l, t, a);
  }
  return n && n > 0 ? i1(a, 0, a.length, n) : a;
}
function RS(e, t) {
  return Math.sqrt(fd(e, t));
}
function fd(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function PS(e, t, n) {
  const a = fd(t, n);
  if (a === 0)
    return fd(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), fd(e, Ar(t, n, i));
}
function Ar(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function NS(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let s = 3 * a[1] - 2 * n[1] - r[1];
  s *= s;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), s < d && (s = d), l + s;
}
function r1(e, t, n, a) {
  const i = a || [];
  if (NS(e, t) < n) {
    const r = e[t + 0];
    i.length ? RS(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], s = e[t + 1], c = e[t + 2], d = e[t + 3], o = Ar(l, s, 0.5), u = Ar(s, c, 0.5), f = Ar(c, d, 0.5), p = Ar(o, u, 0.5), U = Ar(u, f, 0.5), m = Ar(p, U, 0.5);
    r1([l, o, p, m], 0, n, i), r1([m, U, f, d], 0, n, i);
  }
  return i;
}
function OS(e, t) {
  return l1(e, 0, e.length, t);
}
function l1(e, t, n, a, i) {
  const r = i || [], l = e[t], s = e[n - 1];
  let c = 0, d = 1;
  for (let o = t + 1; o < n - 1; ++o) {
    const u = PS(e[o], l, s);
    u > c && (c = u, d = o);
  }
  return Math.sqrt(c) > a ? (l1(e, t, d + 1, a, r), l1(e, d, n, a, r)) : (r.length || r.push(l), r.push(s)), r;
}
function $S(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    r1(e, l, t, a);
  }
  return a;
}
function FS(e, t, n) {
  const a = _0(e), i = wb(yb(a)), r = [];
  let l = [], s = [0, 0], c = [];
  const d = () => {
    c.length >= 4 && l.push(...$S(c, t)), c = [];
  }, o = () => {
    d(), l.length && (r.push(l), l = []);
  };
  for (const { key: f, data: p } of i)
    switch (f) {
      case "M":
        o(), s = [p[0], p[1]], l.push(s);
        break;
      case "L":
        d(), l.push([p[0], p[1]]);
        break;
      case "C":
        if (!c.length) {
          const U = l.length ? l[l.length - 1] : s;
          c.push([U[0], U[1]]);
        }
        c.push([p[0], p[1]]), c.push([p[2], p[3]]), c.push([p[4], p[5]]);
        break;
      case "Z":
        d(), l.push([s[0], s[1]]);
        break;
    }
  if (o(), !n)
    return r;
  const u = [];
  for (const f of r) {
    const p = OS(f, n);
    p.length && u.push(p);
  }
  return u;
}
const Tn = "none";
class No {
  constructor(t) {
    this.defaultOptions = {
      maxRandomnessOffset: 2,
      roughness: 1,
      bowing: 1,
      stroke: "#000",
      strokeWidth: 1,
      curveTightness: 0,
      curveFitting: 0.95,
      curveStepCount: 9,
      fillStyle: "hachure",
      fillWeight: -1,
      hachureAngle: -41,
      hachureGap: -1,
      dashOffset: -1,
      dashGap: -1,
      zigzagOffset: -1,
      seed: 0,
      disableMultiStroke: !1,
      disableMultiStrokeFill: !1,
      preserveVertices: !1,
      fillShapeRoughnessGain: 0.8
    }, this.config = t || {}, this.config.options && (this.defaultOptions = this._o(this.config.options));
  }
  static newSeed() {
    return mS();
  }
  _o(t) {
    return t ? Object.assign({}, this.defaultOptions, t) : this.defaultOptions;
  }
  _d(t, n, a) {
    return { shape: t, sets: n || [], options: a || this.defaultOptions };
  }
  line(t, n, a, i, r) {
    const l = this._o(r);
    return this._d("line", [Sb(t, n, a, i, l)], l);
  }
  rectangle(t, n, a, i, r) {
    const l = this._o(r), s = [], c = wS(t, n, a, i, l);
    if (l.fill) {
      const d = [[t, n], [t + a, n], [t + a, n + i], [t, n + i]];
      l.fillStyle === "solid" ? s.push(Gh([d], l)) : s.push(Dl([d], l));
    }
    return l.stroke !== Tn && s.push(c), this._d("rectangle", s, l);
  }
  ellipse(t, n, a, i, r) {
    const l = this._o(r), s = [], c = kb(a, i, l), d = n1(t, n, l, c);
    if (l.fill)
      if (l.fillStyle === "solid") {
        const o = n1(t, n, l, c).opset;
        o.type = "fillPath", s.push(o);
      } else
        s.push(Dl([d.estimatedPoints], l));
    return l.stroke !== Tn && s.push(d.opset), this._d("ellipse", s, l);
  }
  circle(t, n, a, i) {
    const r = this.ellipse(t, n, a, a, i);
    return r.shape = "circle", r;
  }
  linearPath(t, n) {
    const a = this._o(n);
    return this._d("linearPath", [ud(t, !1, a)], a);
  }
  arc(t, n, a, i, r, l, s = !1, c) {
    const d = this._o(c), o = [], u = I2(t, n, a, i, r, l, s, !0, d);
    if (s && d.fill)
      if (d.fillStyle === "solid") {
        const f = Object.assign({}, d);
        f.disableMultiStroke = !0;
        const p = I2(t, n, a, i, r, l, !0, !1, f);
        p.type = "fillPath", o.push(p);
      } else
        o.push(SS(t, n, a, i, r, l, d));
    return d.stroke !== Tn && o.push(u), this._d("arc", o, d);
  }
  curve(t, n) {
    const a = this._o(n), i = [], r = C2(t, a);
    if (a.fill && a.fill !== Tn && t.length >= 3)
      if (a.fillStyle === "solid") {
        const l = C2(t, Object.assign(Object.assign({}, a), { disableMultiStroke: !0, roughness: a.roughness ? a.roughness + a.fillShapeRoughnessGain : 0 }));
        i.push({
          type: "fillPath",
          ops: this._mergedShape(l.ops)
        });
      } else {
        const l = _S(t), s = LS(l, 10, (1 + a.roughness) / 2);
        i.push(Dl([s], a));
      }
    return a.stroke !== Tn && i.push(r), this._d("curve", i, a);
  }
  polygon(t, n) {
    const a = this._o(n), i = [], r = ud(t, !0, a);
    return a.fill && (a.fillStyle === "solid" ? i.push(Gh([t], a)) : i.push(Dl([t], a))), a.stroke !== Tn && i.push(r), this._d("polygon", i, a);
  }
  path(t, n) {
    const a = this._o(n), i = [];
    if (!t)
      return this._d("path", i, a);
    t = (t || "").replace(/\n/g, " ").replace(/(-\s)/g, "-").replace("/(ss)/g", " ");
    const r = a.fill && a.fill !== "transparent" && a.fill !== Tn, l = a.stroke !== Tn, s = !!(a.simplification && a.simplification < 1), c = s ? 4 - 4 * (a.simplification || 1) : (1 + a.roughness) / 2, d = FS(t, 1, c), o = T2(t, a);
    if (r)
      if (a.fillStyle === "solid")
        if (d.length === 1) {
          const u = T2(t, Object.assign(Object.assign({}, a), { disableMultiStroke: !0, roughness: a.roughness ? a.roughness + a.fillShapeRoughnessGain : 0 }));
          i.push({
            type: "fillPath",
            ops: this._mergedShape(u.ops)
          });
        } else
          i.push(Gh(d, a));
      else
        i.push(Dl(d, a));
    return l && (s ? d.forEach((u) => {
      i.push(ud(u, !1, a));
    }) : i.push(o)), this._d("path", i, a);
  }
  opsToPath(t, n) {
    let a = "";
    for (const i of t.ops) {
      const r = typeof n == "number" && n >= 0 ? i.data.map((l) => +l.toFixed(n)) : i.data;
      switch (i.op) {
        case "move":
          a += `M${r[0]} ${r[1]} `;
          break;
        case "bcurveTo":
          a += `C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;
          break;
        case "lineTo":
          a += `L${r[0]} ${r[1]} `;
          break;
      }
    }
    return a.trim();
  }
  toPaths(t) {
    const n = t.sets || [], a = t.options || this.defaultOptions, i = [];
    for (const r of n) {
      let l = null;
      switch (r.type) {
        case "path":
          l = {
            d: this.opsToPath(r),
            stroke: a.stroke,
            strokeWidth: a.strokeWidth,
            fill: Tn
          };
          break;
        case "fillPath":
          l = {
            d: this.opsToPath(r),
            stroke: Tn,
            strokeWidth: 0,
            fill: a.fill || Tn
          };
          break;
        case "fillSketch":
          l = this.fillSketch(r, a);
          break;
      }
      l && i.push(l);
    }
    return i;
  }
  fillSketch(t, n) {
    let a = n.fillWeight;
    return a < 0 && (a = n.strokeWidth / 2), {
      d: this.opsToPath(t),
      stroke: n.fill || Tn,
      strokeWidth: a,
      fill: Tn
    };
  }
  _mergedShape(t) {
    return t.filter((n, a) => a === 0 ? !0 : n.op !== "move");
  }
}
class zS {
  constructor(t, n) {
    this.canvas = t, this.ctx = this.canvas.getContext("2d"), this.gen = new No(n);
  }
  draw(t) {
    const n = t.sets || [], a = t.options || this.getDefaultOptions(), i = this.ctx, r = t.options.fixedDecimalPlaceDigits;
    for (const l of n)
      switch (l.type) {
        case "path":
          i.save(), i.strokeStyle = a.stroke === "none" ? "transparent" : a.stroke, i.lineWidth = a.strokeWidth, a.strokeLineDash && i.setLineDash(a.strokeLineDash), a.strokeLineDashOffset && (i.lineDashOffset = a.strokeLineDashOffset), this._drawToContext(i, l, r), i.restore();
          break;
        case "fillPath": {
          i.save(), i.fillStyle = a.fill || "";
          const s = t.shape === "curve" || t.shape === "polygon" || t.shape === "path" ? "evenodd" : "nonzero";
          this._drawToContext(i, l, r, s), i.restore();
          break;
        }
        case "fillSketch":
          this.fillSketch(i, l, a);
          break;
      }
  }
  fillSketch(t, n, a) {
    let i = a.fillWeight;
    i < 0 && (i = a.strokeWidth / 2), t.save(), a.fillLineDash && t.setLineDash(a.fillLineDash), a.fillLineDashOffset && (t.lineDashOffset = a.fillLineDashOffset), t.strokeStyle = a.fill || "", t.lineWidth = i, this._drawToContext(t, n, a.fixedDecimalPlaceDigits), t.restore();
  }
  _drawToContext(t, n, a, i = "nonzero") {
    t.beginPath();
    for (const r of n.ops) {
      const l = typeof a == "number" && a >= 0 ? r.data.map((s) => +s.toFixed(a)) : r.data;
      switch (r.op) {
        case "move":
          t.moveTo(l[0], l[1]);
          break;
        case "bcurveTo":
          t.bezierCurveTo(l[0], l[1], l[2], l[3], l[4], l[5]);
          break;
        case "lineTo":
          t.lineTo(l[0], l[1]);
          break;
      }
    }
    n.type === "fillPath" ? t.fill(i) : t.stroke();
  }
  get generator() {
    return this.gen;
  }
  getDefaultOptions() {
    return this.gen.defaultOptions;
  }
  line(t, n, a, i, r) {
    const l = this.gen.line(t, n, a, i, r);
    return this.draw(l), l;
  }
  rectangle(t, n, a, i, r) {
    const l = this.gen.rectangle(t, n, a, i, r);
    return this.draw(l), l;
  }
  ellipse(t, n, a, i, r) {
    const l = this.gen.ellipse(t, n, a, i, r);
    return this.draw(l), l;
  }
  circle(t, n, a, i) {
    const r = this.gen.circle(t, n, a, i);
    return this.draw(r), r;
  }
  linearPath(t, n) {
    const a = this.gen.linearPath(t, n);
    return this.draw(a), a;
  }
  polygon(t, n) {
    const a = this.gen.polygon(t, n);
    return this.draw(a), a;
  }
  arc(t, n, a, i, r, l, s = !1, c) {
    const d = this.gen.arc(t, n, a, i, r, l, s, c);
    return this.draw(d), d;
  }
  curve(t, n) {
    const a = this.gen.curve(t, n);
    return this.draw(a), a;
  }
  path(t, n) {
    const a = this.gen.path(t, n);
    return this.draw(a), a;
  }
}
const Nc = "http://www.w3.org/2000/svg";
class BS {
  constructor(t, n) {
    this.svg = t, this.gen = new No(n);
  }
  draw(t) {
    const n = t.sets || [], a = t.options || this.getDefaultOptions(), i = this.svg.ownerDocument || window.document, r = i.createElementNS(Nc, "g"), l = t.options.fixedDecimalPlaceDigits;
    for (const s of n) {
      let c = null;
      switch (s.type) {
        case "path": {
          c = i.createElementNS(Nc, "path"), c.setAttribute("d", this.opsToPath(s, l)), c.setAttribute("stroke", a.stroke), c.setAttribute("stroke-width", a.strokeWidth + ""), c.setAttribute("fill", "none"), a.strokeLineDash && c.setAttribute("stroke-dasharray", a.strokeLineDash.join(" ").trim()), a.strokeLineDashOffset && c.setAttribute("stroke-dashoffset", `${a.strokeLineDashOffset}`);
          break;
        }
        case "fillPath": {
          c = i.createElementNS(Nc, "path"), c.setAttribute("d", this.opsToPath(s, l)), c.setAttribute("stroke", "none"), c.setAttribute("stroke-width", "0"), c.setAttribute("fill", a.fill || ""), (t.shape === "curve" || t.shape === "polygon") && c.setAttribute("fill-rule", "evenodd");
          break;
        }
        case "fillSketch": {
          c = this.fillSketch(i, s, a);
          break;
        }
      }
      c && r.appendChild(c);
    }
    return r;
  }
  fillSketch(t, n, a) {
    let i = a.fillWeight;
    i < 0 && (i = a.strokeWidth / 2);
    const r = t.createElementNS(Nc, "path");
    return r.setAttribute("d", this.opsToPath(n, a.fixedDecimalPlaceDigits)), r.setAttribute("stroke", a.fill || ""), r.setAttribute("stroke-width", i + ""), r.setAttribute("fill", "none"), a.fillLineDash && r.setAttribute("stroke-dasharray", a.fillLineDash.join(" ").trim()), a.fillLineDashOffset && r.setAttribute("stroke-dashoffset", `${a.fillLineDashOffset}`), r;
  }
  get generator() {
    return this.gen;
  }
  getDefaultOptions() {
    return this.gen.defaultOptions;
  }
  opsToPath(t, n) {
    return this.gen.opsToPath(t, n);
  }
  line(t, n, a, i, r) {
    const l = this.gen.line(t, n, a, i, r);
    return this.draw(l);
  }
  rectangle(t, n, a, i, r) {
    const l = this.gen.rectangle(t, n, a, i, r);
    return this.draw(l);
  }
  ellipse(t, n, a, i, r) {
    const l = this.gen.ellipse(t, n, a, i, r);
    return this.draw(l);
  }
  circle(t, n, a, i) {
    const r = this.gen.circle(t, n, a, i);
    return this.draw(r);
  }
  linearPath(t, n) {
    const a = this.gen.linearPath(t, n);
    return this.draw(a);
  }
  polygon(t, n) {
    const a = this.gen.polygon(t, n);
    return this.draw(a);
  }
  arc(t, n, a, i, r, l, s = !1, c) {
    const d = this.gen.arc(t, n, a, i, r, l, s, c);
    return this.draw(d);
  }
  curve(t, n) {
    const a = this.gen.curve(t, n);
    return this.draw(a);
  }
  path(t, n) {
    const a = this.gen.path(t, n);
    return this.draw(a);
  }
}
const vr = {
  canvas(e, t) {
    return new zS(e, t);
  },
  svg(e, t) {
    return new BS(e, t);
  },
  generator(e) {
    return new No(e);
  },
  newSeed() {
    return No.newSeed();
  }
};
function L2(e, t, n, a = (i) => i) {
  return e * a(0.5 - t * (0.5 - n));
}
function HS(e) {
  return [-e[0], -e[1]];
}
function la(e, t) {
  return [e[0] + t[0], e[1] + t[1]];
}
function Fn(e, t) {
  return [e[0] - t[0], e[1] - t[1]];
}
function ia(e, t) {
  return [e[0] * t, e[1] * t];
}
function XS(e, t) {
  return [e[0] / t, e[1] / t];
}
function Ns(e) {
  return [e[1], -e[0]];
}
function R2(e, t) {
  return e[0] * t[0] + e[1] * t[1];
}
function WS(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}
function VS(e) {
  return Math.hypot(e[0], e[1]);
}
function GS(e) {
  return e[0] * e[0] + e[1] * e[1];
}
function P2(e, t) {
  return GS(Fn(e, t));
}
function Cb(e) {
  return XS(e, VS(e));
}
function YS(e, t) {
  return Math.hypot(e[1] - t[1], e[0] - t[0]);
}
function Os(e, t, n) {
  let a = Math.sin(n), i = Math.cos(n), r = e[0] - t[0], l = e[1] - t[1], s = r * i - l * a, c = r * a + l * i;
  return [s + t[0], c + t[1]];
}
function s1(e, t, n) {
  return la(e, ia(Fn(t, e), n));
}
function N2(e, t, n) {
  return la(e, ia(t, n));
}
var { min: wl, PI: ZS } = Math, O2 = 0.275, $s = ZS + 1e-4;
function KS(e, t = {}) {
  let { size: n = 16, smoothing: a = 0.5, thinning: i = 0.5, simulatePressure: r = !0, easing: l = (R) => R, start: s = {}, end: c = {}, last: d = !1 } = t, { cap: o = !0, easing: u = (R) => R * (2 - R) } = s, { cap: f = !0, easing: p = (R) => --R * R * R + 1 } = c;
  if (e.length === 0 || n <= 0) return [];
  let U = e[e.length - 1].runningLength, m = s.taper === !1 ? 0 : s.taper === !0 ? Math.max(n, U) : s.taper, g = c.taper === !1 ? 0 : c.taper === !0 ? Math.max(n, U) : c.taper, b = Math.pow(n * a, 2), v = [], x = [], y = e.slice(0, 10).reduce((R, V) => {
    let O = V.pressure;
    if (r) {
      let G = wl(1, V.distance / n), ae = wl(1, 1 - G);
      O = wl(1, R + (ae - R) * (G * O2));
    }
    return (R + O) / 2;
  }, e[0].pressure), E = L2(n, i, e[e.length - 1].pressure, l), S, w = e[0].vector, M = e[0].point, I = M, T = M, _ = I, A = !1;
  for (let R = 0; R < e.length; R++) {
    let { pressure: V } = e[R], { point: O, vector: G, distance: ae, runningLength: he } = e[R];
    if (R < e.length - 1 && U - he < 3) continue;
    if (i) {
      if (r) {
        let Ae = wl(1, ae / n), Oe = wl(1, 1 - Ae);
        V = wl(1, y + (Oe - y) * (Ae * O2));
      }
      E = L2(n, i, V, l);
    } else E = n / 2;
    S === void 0 && (S = E);
    let ce = he < m ? u(he / m) : 1, Be = U - he < g ? p((U - he) / g) : 1;
    E = Math.max(0.01, E * Math.min(ce, Be));
    let He = (R < e.length - 1 ? e[R + 1] : e[R]).vector, Xe = R < e.length - 1 ? R2(G, He) : 1, Ne = R2(G, w) < 0 && !A, It = Xe !== null && Xe < 0;
    if (Ne || It) {
      let Ae = ia(Ns(w), E);
      for (let Oe = 1 / 13, yt = 0; yt <= 1; yt += Oe) T = Os(Fn(O, Ae), O, $s * yt), v.push(T), _ = Os(la(O, Ae), O, $s * -yt), x.push(_);
      M = T, I = _, It && (A = !0);
      continue;
    }
    if (A = !1, R === e.length - 1) {
      let Ae = ia(Ns(G), E);
      v.push(Fn(O, Ae)), x.push(la(O, Ae));
      continue;
    }
    let Yt = ia(Ns(s1(He, G, Xe)), E);
    T = Fn(O, Yt), (R <= 1 || P2(M, T) > b) && (v.push(T), M = T), _ = la(O, Yt), (R <= 1 || P2(I, _) > b) && (x.push(_), I = _), y = V, w = G;
  }
  let D = e[0].point.slice(0, 2), P = e.length > 1 ? e[e.length - 1].point.slice(0, 2) : la(e[0].point, [1, 1]), N = [], $ = [];
  if (e.length === 1) {
    if (!(m || g) || d) {
      let R = N2(D, Cb(Ns(Fn(D, P))), -(S || E)), V = [];
      for (let O = 1 / 13, G = O; G <= 1; G += O) V.push(Os(R, D, $s * 2 * G));
      return V;
    }
  } else {
    if (!(m || g && e.length === 1)) if (o) for (let V = 1 / 13, O = V; O <= 1; O += V) {
      let G = Os(x[0], D, $s * O);
      N.push(G);
    }
    else {
      let V = Fn(v[0], x[0]), O = ia(V, 0.5), G = ia(V, 0.51);
      N.push(Fn(D, O), Fn(D, G), la(D, G), la(D, O));
    }
    let R = Ns(HS(e[e.length - 1].vector));
    if (g || m && e.length === 1) $.push(P);
    else if (f) {
      let V = N2(P, R, E);
      for (let O = 1 / 29, G = O; G < 1; G += O) $.push(Os(V, P, $s * 3 * G));
    } else $.push(la(P, ia(R, E)), la(P, ia(R, E * 0.99)), Fn(P, ia(R, E * 0.99)), Fn(P, ia(R, E)));
  }
  return v.concat($, x.reverse(), N);
}
function qS(e, t = {}) {
  var n;
  let { streamline: a = 0.5, size: i = 16, last: r = !1 } = t;
  if (e.length === 0) return [];
  let l = 0.15 + (1 - a) * 0.85, s = Array.isArray(e[0]) ? e : e.map(({ x: p, y: U, pressure: m = 0.5 }) => [p, U, m]);
  if (s.length === 2) {
    let p = s[1];
    s = s.slice(0, -1);
    for (let U = 1; U < 5; U++) s.push(s1(s[0], p, U / 4));
  }
  s.length === 1 && (s = [...s, [...la(s[0], [1, 1]), ...s[0].slice(2)]]);
  let c = [{ point: [s[0][0], s[0][1]], pressure: s[0][2] >= 0 ? s[0][2] : 0.25, vector: [1, 1], distance: 0, runningLength: 0 }], d = !1, o = 0, u = c[0], f = s.length - 1;
  for (let p = 1; p < s.length; p++) {
    let U = r && p === f ? s[p].slice(0, 2) : s1(u.point, s[p], l);
    if (WS(u.point, U)) continue;
    let m = YS(U, u.point);
    if (o += m, p < f && !d) {
      if (o < i) continue;
      d = !0;
    }
    u = { point: U, pressure: s[p][2] >= 0 ? s[p][2] : 0.5, vector: Cb(Fn(u.point, U)), distance: m, runningLength: o }, c.push(u);
  }
  return c[0].vector = ((n = c[1]) == null ? void 0 : n.vector) || [0, 0], c;
}
function JS(e, t = {}) {
  return KS(qS(e, t), t);
}
function Ib(e) {
  var t, n, a = "";
  if (typeof e == "string" || typeof e == "number")
    a += e;
  else if (typeof e == "object")
    if (Array.isArray(e))
      for (t = 0; t < e.length; t++)
        e[t] && (n = Ib(e[t])) && (a && (a += " "), a += n);
    else
      for (t in e)
        e[t] && (a && (a += " "), a += t);
  return a;
}
function ne() {
  for (var e = 0, t, n, a = ""; e < arguments.length; )
    (t = arguments[e++]) && (n = Ib(t)) && (a && (a += " "), a += n);
  return a;
}
function QS(e, t) {
  return Math.sqrt(pd(e, t));
}
function pd(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function ek(e, t, n) {
  const a = pd(t, n);
  if (a === 0)
    return pd(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), pd(e, jr(t, n, i));
}
function jr(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function tk(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let s = 3 * a[1] - 2 * n[1] - r[1];
  s *= s;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), s < d && (s = d), l + s;
}
function o1(e, t, n, a) {
  const i = a || [];
  if (tk(e, t) < n) {
    const r = e[t + 0];
    i.length ? QS(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], s = e[t + 1], c = e[t + 2], d = e[t + 3], o = jr(l, s, 0.5), u = jr(s, c, 0.5), f = jr(c, d, 0.5), p = jr(o, u, 0.5), U = jr(u, f, 0.5), m = jr(p, U, 0.5);
    o1([l, o, p, m], 0, n, i), o1([m, U, f, d], 0, n, i);
  }
  return i;
}
function nk(e, t) {
  return Xd(e, 0, e.length, t);
}
function Xd(e, t, n, a, i) {
  const r = i || [], l = e[t], s = e[n - 1];
  let c = 0, d = 1;
  for (let o = t + 1; o < n - 1; ++o) {
    const u = ek(e[o], l, s);
    u > c && (c = u, d = o);
  }
  return Math.sqrt(c) > a ? (Xd(e, t, d + 1, a, r), Xd(e, d, n, a, r)) : (r.length || r.push(l), r.push(s)), r;
}
function ak(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    o1(e, l, t, a);
  }
  return Xd(a, 0, a.length, n);
}
var A0 = {};
Object.defineProperty(A0, "__esModule", { value: !0 });
var Tb = A0.sanitizeUrl = void 0, ik = /^([^\w]*)(javascript|data|vbscript)/im, rk = /&#(\w+)(^\w|;)?/g, lk = /&(newline|tab);/gi, sk = /[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim, ok = /^.+(:|&colon;)/gim, ck = [".", "/"];
function dk(e) {
  return ck.indexOf(e[0]) > -1;
}
function uk(e) {
  return e.replace(rk, function(t, n) {
    return String.fromCharCode(n);
  });
}
function hk(e) {
  var t = uk(e || "").replace(lk, "").replace(sk, "").trim();
  if (!t)
    return "about:blank";
  if (dk(t))
    return t;
  var n = t.match(ok);
  if (!n)
    return t;
  var a = n[0];
  return ik.test(a) ? "about:blank" : t;
}
Tb = A0.sanitizeUrl = hk;
const _b = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
function Pl(e, t, n) {
  const a = n[0];
  if (t != null && e >= t)
    throw new Error(e + " >= " + t);
  if (e.slice(-1) === a || t && t.slice(-1) === a)
    throw new Error("trailing zero");
  if (t) {
    let l = 0;
    for (; (e[l] || a) === t[l]; )
      l++;
    if (l > 0)
      return t.slice(0, l) + Pl(e.slice(l), t.slice(l), n);
  }
  const i = e ? n.indexOf(e[0]) : 0, r = t != null ? n.indexOf(t[0]) : n.length;
  if (r - i > 1) {
    const l = Math.round(0.5 * (i + r));
    return n[l];
  } else
    return t && t.length > 1 ? t.slice(0, 1) : n[i] + Pl(e.slice(1), null, n);
}
function Ab(e) {
  if (e.length !== jb(e[0]))
    throw new Error("invalid integer part of order key: " + e);
}
function jb(e) {
  if (e >= "a" && e <= "z")
    return e.charCodeAt(0) - 97 + 2;
  if (e >= "A" && e <= "Z")
    return 90 - e.charCodeAt(0) + 2;
  throw new Error("invalid order key head: " + e);
}
function eo(e) {
  const t = jb(e[0]);
  if (t > e.length)
    throw new Error("invalid order key: " + e);
  return e.slice(0, t);
}
function $2(e, t) {
  if (e === "A" + t[0].repeat(26))
    throw new Error("invalid order key: " + e);
  const n = eo(e);
  if (e.slice(n.length).slice(-1) === t[0])
    throw new Error("invalid order key: " + e);
}
function F2(e, t) {
  Ab(e);
  const [n, ...a] = e.split("");
  let i = !0;
  for (let r = a.length - 1; i && r >= 0; r--) {
    const l = t.indexOf(a[r]) + 1;
    l === t.length ? a[r] = t[0] : (a[r] = t[l], i = !1);
  }
  if (i) {
    if (n === "Z")
      return "a" + t[0];
    if (n === "z")
      return null;
    const r = String.fromCharCode(n.charCodeAt(0) + 1);
    return r > "a" ? a.push(t[0]) : a.pop(), r + a.join("");
  } else
    return n + a.join("");
}
function fk(e, t) {
  Ab(e);
  const [n, ...a] = e.split("");
  let i = !0;
  for (let r = a.length - 1; i && r >= 0; r--) {
    const l = t.indexOf(a[r]) - 1;
    l === -1 ? a[r] = t.slice(-1) : (a[r] = t[l], i = !1);
  }
  if (i) {
    if (n === "a")
      return "Z" + t.slice(-1);
    if (n === "A")
      return null;
    const r = String.fromCharCode(n.charCodeAt(0) - 1);
    return r < "Z" ? a.push(t.slice(-1)) : a.pop(), r + a.join("");
  } else
    return n + a.join("");
}
function El(e, t, n = _b) {
  if (e != null && $2(e, n), t != null && $2(t, n), e != null && t != null && e >= t)
    throw new Error(e + " >= " + t);
  if (e == null) {
    if (t == null)
      return "a" + n[0];
    const c = eo(t), d = t.slice(c.length);
    if (c === "A" + n[0].repeat(26))
      return c + Pl("", d, n);
    if (c < t)
      return c;
    const o = fk(c, n);
    if (o == null)
      throw new Error("cannot decrement any more");
    return o;
  }
  if (t == null) {
    const c = eo(e), d = e.slice(c.length), o = F2(c, n);
    return o ?? c + Pl(d, null, n);
  }
  const a = eo(e), i = e.slice(a.length), r = eo(t), l = t.slice(r.length);
  if (a === r)
    return a + Pl(i, l, n);
  const s = F2(a, n);
  if (s == null)
    throw new Error("cannot increment any more");
  return s < t ? s : a + Pl(i, null, n);
}
function c1(e, t, n, a = _b) {
  if (n === 0)
    return [];
  if (n === 1)
    return [El(e, t, a)];
  if (t == null) {
    let l = El(e, t, a);
    const s = [l];
    for (let c = 0; c < n - 1; c++)
      l = El(l, t, a), s.push(l);
    return s;
  }
  if (e == null) {
    let l = El(e, t, a);
    const s = [l];
    for (let c = 0; c < n - 1; c++)
      l = El(e, l, a), s.push(l);
    return s.reverse(), s;
  }
  const i = Math.floor(n / 2), r = El(e, t, a);
  return [
    ...c1(e, r, i, a),
    r,
    ...c1(r, t, n - i - 1, a)
  ];
}
const ml = (() => {
  if (typeof self > "u") return !1;
  if ("top" in self && self !== top) try {
  } catch {
    return !1;
  }
  else if ("showOpenFilePicker" in self) return "showOpenFilePicker";
  return !1;
})(), pk = ml ? import("./file-open-002ab408-DN9HoVxI.js") : import("./file-open-7c801643-7JqFgE4-.js");
async function Uk(...e) {
  return (await pk).default(...e);
}
ml ? import("./directory-open-4ed118d0-O_QfH9Tw.js") : import("./directory-open-01563666-Dy1naDTQ.js");
const mk = ml ? import("./file-save-745eba88-lCpg7dOn.js") : import("./file-save-3189631c-CPqqkX8Z.js");
async function gk(...e) {
  return (await mk).default(...e);
}
var bk = (e, t) => t.reduce((n, a) => (a in e && (n[a] = e[a]), n), {}), vk = 5, Ll = 5, xk = 4, to = 4, no = 1, ta = [0, 2, 4, 6, 8], na = (e, t) => t.map((n) => Wt[e][n]), Ee = { transparent: "transparent", black: "#1e1e1e", white: "#ffffff", gray: na("gray", ta), red: na("red", ta), pink: na("pink", ta), grape: na("grape", ta), violet: na("violet", ta), blue: na("blue", ta), cyan: na("cyan", ta), teal: na("teal", ta), green: na("green", ta), yellow: na("yellow", ta), orange: na("orange", ta), bronze: ["#f8f1ee", "#eaddd7", "#d2bab0", "#a18072", "#846358"] }, Db = bk(Ee, ["cyan", "blue", "violet", "grape", "pink", "green", "teal", "yellow", "orange", "red"]), Lb = [Ee.black, Ee.red[to], Ee.green[to], Ee.blue[to], Ee.yellow[to]], Rb = [Ee.transparent, Ee.red[no], Ee.green[no], Ee.blue[no], Ee.yellow[no]], Pb = [Ee.white, "#f8f9fa", "#f5faff", "#fffce8", "#fdf8f6"], yk = { transparent: Ee.transparent, white: Ee.white, gray: Ee.gray, black: Ee.black, bronze: Ee.bronze, ...Db }, wk = { transparent: Ee.transparent, white: Ee.white, gray: Ee.gray, black: Ee.black, bronze: Ee.bronze, ...Db }, Ek = (e) => [Ee.cyan[e], Ee.blue[e], Ee.violet[e], Ee.grape[e], Ee.pink[e], Ee.green[e], Ee.teal[e], Ee.yellow[e], Ee.orange[e], Ee.red[e]], Sk = (e, t, n) => `#${((1 << 24) + (e << 16) + (t << 8) + n).toString(16).slice(1)}`, Za = /Mac|iPod|iPhone|iPad/.test(navigator.platform), Nb = /^Win/.test(navigator.platform), kk = /\b(android)\b/i.test(navigator.userAgent), Oo = "netscape" in window && navigator.userAgent.indexOf("rv:") > 1 && navigator.userAgent.indexOf("Gecko") > 1, Mk = navigator.userAgent.indexOf("Chrome") !== -1, Ck = !Mk && navigator.userAgent.indexOf("Safari") !== -1, Ob = /iPad|iPhone/.test(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document, Ik = () => {
  var e, t;
  return ((t = (e = navigator.brave) == null ? void 0 : e.isBrave) == null ? void 0 : t.name) === "isBrave";
}, d1 = typeof window < "u" && "ResizeObserver" in window, Tk = "Excalidraw", _k = 36, Dr = 10, Ud = 8, Ak = 5, z2 = 1, jk = 30, hr = Math.PI / 12, Dk = "red", We = { TEXT: "text", CROSSHAIR: "crosshair", GRABBING: "grabbing", GRAB: "grab", POINTER: "pointer", MOVE: "move", AUTO: "" }, Gi = { MAIN: 0, WHEEL: 1, SECONDARY: 2, TOUCH: -1, ERASER: 5 }, Sl = { enabled: "all", disabled: "none" }, Oc = { UNSTARTED: -1, ENDED: 0, PLAYING: 1, PAUSED: 2, BUFFERING: 3, CUED: 5 }, En = { TEST: "test" }, es = { SHAPE_ACTIONS_MENU: "App-menu__left", ZOOM_ACTIONS: "zoom-actions", SEARCH_MENU_INPUT_WRAPPER: "layer-ui__search-inputWrapper" }, Nl = "Xiaolai", $o = "Segoe UI Emoji", ut = { Virgil: 1, Helvetica: 2, Cascadia: 3, Excalifont: 5, Nunito: 6, "Lilita One": 7, "Comic Shanns": 8, "Liberation Sans": 9 }, Ol = { [Nl]: 100, [$o]: 1e3 }, $b = (e) => {
  switch (e) {
    case ut.Excalifont:
      return [Nl, $o];
    default:
      return [$o];
  }
}, Me = { LIGHT: "light", DARK: "dark" }, ht = { strokeColor: "#bbb", strokeWidth: 2, strokeStyle: "solid", fillStyle: "solid", roughness: 0, roundness: null, backgroundColor: "transparent", radius: 8, nameOffsetY: 3, nameColorLightTheme: "#999999", nameColorDarkTheme: "#7a7a7a", nameFontSize: 14, nameLineHeight: 1.25 }, j0 = 1, Ni = 20, xr = ut.Excalifont, uc = "left", Wd = "top", nl = 2, Vd = 2 * nl, Lk = 1e-5, Rk = 2 * Vd - Lk, $c = "#ffffff", Pk = "#1e1e1e", Nk = "#a2f1a6", Gd = 20, Fb = 5, ts = { svg: "image/svg+xml", png: "image/png", jpg: "image/jpeg", gif: "image/gif", webp: "image/webp", bmp: "image/bmp", ico: "image/x-icon", avif: "image/avif", jfif: "image/jfif" }, oe = { text: "text/plain", html: "text/html", json: "application/json", excalidraw: "application/vnd.excalidraw+json", excalidrawlib: "application/vnd.excalidrawlib+json", "excalidraw.svg": "image/svg+xml", "excalidraw.png": "image/png", binary: "application/octet-stream", ...ts }, Ok = [oe.text, oe.html, ...Object.values(ts)], Yh = { png: "png", svg: "svg", clipboard: "clipboard" }, Gn = { excalidraw: "excalidraw", excalidrawClipboard: "excalidraw/clipboard", excalidrawLibrary: "excalidrawlib", excalidrawClipboardWithAPI: "excalidraw-api/clipboard" }, D0 = window.EXCALIDRAW_EXPORT_SOURCE || window.location.origin, $k = 500, Fk = 300, zk = 500, Bk = 100, zu = 0.1, L0 = 0.1, R0 = 30, Hk = 300, P0 = "invert(93%) hue-rotate(180deg)", B2 = { canvasActions: { changeViewBackgroundColor: !0, clearCanvas: !0, export: { saveFileToDisk: !0 }, loadScene: !0, saveToActiveFile: !0, toggleTheme: null, saveAsImage: !0 } }, Xk = 730, Wk = 1e3, Vk = 500, Gk = 1229, Fs = 2, N0 = [1, 2, 3], Es = 10, Yk = 1440, H2 = 4 * 1024 * 1024, je = "http://www.w3.org/2000/svg", Bu = { excalidraw: 2, excalidrawLibrary: 2 }, At = 5, Zk = 0.7, Kk = 11, jn = { TOP: "top", MIDDLE: "middle", BOTTOM: "bottom" }, Fo = { LEFT: "left", CENTER: "center", RIGHT: "right" }, qk = 20, Zh = 0.25, Jk = 32, jt = { LEGACY: 1, PROPORTIONAL_RADIUS: 2, ADAPTIVE_RADIUS: 3 }, zb = { artist: 1, cartoonist: 2 }, Kh = { thin: 1, bold: 2, extraBold: 4 }, mt = { strokeColor: Ee.black, backgroundColor: Ee.transparent, fillStyle: "solid", strokeWidth: 2, strokeStyle: "solid", roughness: zb.artist, opacity: 100, locked: !1 }, Yd = "library", Gl = "search", Ua = { name: "default", defaultTab: Yd }, Bb = /* @__PURE__ */ new Set(["iframe", "embeddable", "image"]), Pt = { selection: "selection", rectangle: "rectangle", diamond: "diamond", ellipse: "ellipse", text: "text", image: "image", eraser: "eraser", frame: "frame", magicframe: "magicframe", laser: "laser" }, Uo = { MERMAID_TO_EXCALIDRAW: "mermaid-to-excalidraw", PUBLISH_LIBRARY: "publish-library-data" }, Hb = "Untitled", $l = { generalStats: 1, elementProperties: 2 }, zn = 1, Ht = { sharp: "sharp", round: "round", elbow: "elbow" }, Xb = 0.3, Zd = "element", Qk = Symbol.for("__test__originalId__"), eM = ((e) => (e.ACTIVE = "active", e.AWAY = "away", e.IDLE = "idle", e))(eM || {}), tM = N0.includes(devicePixelRatio) ? devicePixelRatio : 1, Ka = () => ({ showWelcomeScreen: !1, theme: Me.LIGHT, collaborators: /* @__PURE__ */ new Map(), currentChartType: "bar", currentItemBackgroundColor: mt.backgroundColor, currentItemEndArrowhead: "arrow", currentItemFillStyle: mt.fillStyle, currentItemFontFamily: xr, currentItemFontSize: Ni, currentItemOpacity: mt.opacity, currentItemRoughness: mt.roughness, currentItemStartArrowhead: null, currentItemStrokeColor: mt.strokeColor, currentItemRoundness: "round", currentItemArrowType: Ht.round, currentItemStrokeStyle: mt.strokeStyle, currentItemStrokeWidth: mt.strokeWidth, currentItemTextAlign: uc, currentHoveredFontFamily: null, cursorButton: "up", activeEmbeddable: null, newElement: null, editingTextElement: null, editingGroupId: null, editingLinearElement: null, activeTool: { type: "selection", customType: null, locked: mt.locked, lastActiveTool: null }, penMode: !1, penDetected: !1, errorMessage: null, exportBackground: !0, exportScale: tM, exportEmbedScene: !1, exportWithDarkMode: !1, fileHandle: null, gridSize: Gd, gridStep: Fb, gridModeEnabled: !1, isBindingEnabled: !0, defaultSidebarDockedPreference: !1, isLoading: !1, isResizing: !1, isRotating: !1, lastPointerDownWith: "mouse", multiElement: null, name: null, contextMenu: null, openMenu: null, openPopup: null, openSidebar: null, openDialog: null, pasteDialog: { shown: !1, data: null }, previousSelectedElementIds: {}, resizingElement: null, scrolledOutside: !1, scrollX: 0, scrollY: 0, selectedElementIds: {}, hoveredElementIds: {}, selectedGroupIds: {}, selectedElementsAreBeingDragged: !1, selectionElement: null, shouldCacheIgnoreZoom: !1, stats: { open: !1, panels: $l.generalStats | $l.elementProperties }, startBoundElement: null, suggestedBindings: [], frameRendering: { enabled: !0, clip: !0, name: !0, outline: !0 }, frameToHighlight: null, editingFrame: null, elementsToHighlight: null, toast: null, viewBackgroundColor: Ee.white, zenModeEnabled: !1, zoom: { value: 1 }, viewModeEnabled: !1, pendingImageElementId: null, showHyperlinkPopup: !1, selectedLinearElement: null, snapLines: [], originSnapOffset: { x: 0, y: 0 }, objectsSnapModeEnabled: !1, userToFollow: null, followedBy: /* @__PURE__ */ new Set(), isCropping: !1, croppingElementId: null, searchMatches: [] }), nM = /* @__PURE__ */ ((e) => e)({ showWelcomeScreen: { browser: !0, export: !1, server: !1 }, theme: { browser: !0, export: !1, server: !1 }, collaborators: { browser: !1, export: !1, server: !1 }, currentChartType: { browser: !0, export: !1, server: !1 }, currentItemBackgroundColor: { browser: !0, export: !1, server: !1 }, currentItemEndArrowhead: { browser: !0, export: !1, server: !1 }, currentItemFillStyle: { browser: !0, export: !1, server: !1 }, currentItemFontFamily: { browser: !0, export: !1, server: !1 }, currentItemFontSize: { browser: !0, export: !1, server: !1 }, currentItemRoundness: { browser: !0, export: !1, server: !1 }, currentItemArrowType: { browser: !0, export: !1, server: !1 }, currentItemOpacity: { browser: !0, export: !1, server: !1 }, currentItemRoughness: { browser: !0, export: !1, server: !1 }, currentItemStartArrowhead: { browser: !0, export: !1, server: !1 }, currentItemStrokeColor: { browser: !0, export: !1, server: !1 }, currentItemStrokeStyle: { browser: !0, export: !1, server: !1 }, currentItemStrokeWidth: { browser: !0, export: !1, server: !1 }, currentItemTextAlign: { browser: !0, export: !1, server: !1 }, currentHoveredFontFamily: { browser: !1, export: !1, server: !1 }, cursorButton: { browser: !0, export: !1, server: !1 }, activeEmbeddable: { browser: !1, export: !1, server: !1 }, newElement: { browser: !1, export: !1, server: !1 }, editingTextElement: { browser: !1, export: !1, server: !1 }, editingGroupId: { browser: !0, export: !1, server: !1 }, editingLinearElement: { browser: !1, export: !1, server: !1 }, activeTool: { browser: !0, export: !1, server: !1 }, penMode: { browser: !0, export: !1, server: !1 }, penDetected: { browser: !0, export: !1, server: !1 }, errorMessage: { browser: !1, export: !1, server: !1 }, exportBackground: { browser: !0, export: !1, server: !1 }, exportEmbedScene: { browser: !0, export: !1, server: !1 }, exportScale: { browser: !0, export: !1, server: !1 }, exportWithDarkMode: { browser: !0, export: !1, server: !1 }, fileHandle: { browser: !1, export: !1, server: !1 }, gridSize: { browser: !0, export: !0, server: !0 }, gridStep: { browser: !0, export: !0, server: !0 }, gridModeEnabled: { browser: !0, export: !0, server: !0 }, height: { browser: !1, export: !1, server: !1 }, isBindingEnabled: { browser: !1, export: !1, server: !1 }, defaultSidebarDockedPreference: { browser: !0, export: !1, server: !1 }, isLoading: { browser: !1, export: !1, server: !1 }, isResizing: { browser: !1, export: !1, server: !1 }, isRotating: { browser: !1, export: !1, server: !1 }, lastPointerDownWith: { browser: !0, export: !1, server: !1 }, multiElement: { browser: !1, export: !1, server: !1 }, name: { browser: !0, export: !1, server: !1 }, offsetLeft: { browser: !1, export: !1, server: !1 }, offsetTop: { browser: !1, export: !1, server: !1 }, contextMenu: { browser: !1, export: !1, server: !1 }, openMenu: { browser: !0, export: !1, server: !1 }, openPopup: { browser: !1, export: !1, server: !1 }, openSidebar: { browser: !0, export: !1, server: !1 }, openDialog: { browser: !1, export: !1, server: !1 }, pasteDialog: { browser: !1, export: !1, server: !1 }, previousSelectedElementIds: { browser: !0, export: !1, server: !1 }, resizingElement: { browser: !1, export: !1, server: !1 }, scrolledOutside: { browser: !0, export: !1, server: !1 }, scrollX: { browser: !0, export: !1, server: !1 }, scrollY: { browser: !0, export: !1, server: !1 }, selectedElementIds: { browser: !0, export: !1, server: !1 }, hoveredElementIds: { browser: !1, export: !1, server: !1 }, selectedGroupIds: { browser: !0, export: !1, server: !1 }, selectedElementsAreBeingDragged: { browser: !1, export: !1, server: !1 }, selectionElement: { browser: !1, export: !1, server: !1 }, shouldCacheIgnoreZoom: { browser: !0, export: !1, server: !1 }, stats: { browser: !0, export: !1, server: !1 }, startBoundElement: { browser: !1, export: !1, server: !1 }, suggestedBindings: { browser: !1, export: !1, server: !1 }, frameRendering: { browser: !1, export: !1, server: !1 }, frameToHighlight: { browser: !1, export: !1, server: !1 }, editingFrame: { browser: !1, export: !1, server: !1 }, elementsToHighlight: { browser: !1, export: !1, server: !1 }, toast: { browser: !1, export: !1, server: !1 }, viewBackgroundColor: { browser: !0, export: !0, server: !0 }, width: { browser: !1, export: !1, server: !1 }, zenModeEnabled: { browser: !0, export: !1, server: !1 }, zoom: { browser: !0, export: !1, server: !1 }, viewModeEnabled: { browser: !1, export: !1, server: !1 }, pendingImageElementId: { browser: !1, export: !1, server: !1 }, showHyperlinkPopup: { browser: !1, export: !1, server: !1 }, selectedLinearElement: { browser: !0, export: !1, server: !1 }, snapLines: { browser: !1, export: !1, server: !1 }, originSnapOffset: { browser: !1, export: !1, server: !1 }, objectsSnapModeEnabled: { browser: !0, export: !1, server: !1 }, userToFollow: { browser: !1, export: !1, server: !1 }, followedBy: { browser: !1, export: !1, server: !1 }, isCropping: { browser: !1, export: !1, server: !1 }, croppingElementId: { browser: !1, export: !1, server: !1 }, searchMatches: { browser: !1, export: !1, server: !1 } }), aM = (e, t) => {
  var a;
  let n = {};
  for (let i of Object.keys(e)) if ((a = nM[i]) != null && a[t]) {
    let r = e[i];
    n[i] = r;
  }
  return n;
}, Wb = (e) => aM(e, "export"), Na = ({ activeTool: e }) => e.type === "eraser", ns = ({ activeTool: e }) => e.type === "hand", Se = (e, t, n) => Math.min(Math.max(e, t), n), Ga = (e, t, n = "round") => {
  let a = Math.pow(10, t);
  return Math[n]((e + Number.EPSILON) * a) / a;
}, iM = (e, t, n = "round") => {
  let a = 1 / t;
  return Math[n](e * a) / a;
}, Fc = (e, t) => (e + t) / 2, mo = (e) => typeof e == "number" && Number.isFinite(e), X2 = (e, t, n = 1e-4) => Math.abs(e - t) < n, Kd = (e) => e < 0 ? e + 2 * Math.PI : e >= 2 * Math.PI ? e - 2 * Math.PI : e;
function Wr(e) {
  return e * Math.PI / 180;
}
function hc(e) {
  return e * 180 / Math.PI;
}
function rM(e) {
  return Math.abs(Math.sin(2 * e)) < 1e-4;
}
function Zt(e, t, n = 0, a = 0) {
  return [e - n, t - a];
}
function le(e, t = [0, 0]) {
  return Zt(e[0] - t[0], e[1] - t[1]);
}
function Rt(e, t) {
  return e[0] * t[1] - t[0] * e[1];
}
function W2(e, t) {
  return e[0] * t[0] + e[1] * t[1];
}
function nr(e, t) {
  return [e[0] + t[0], e[1] + t[1]];
}
function qd(e, t) {
  return [e[0] - t[0], e[1] - t[1]];
}
function bt(e, t) {
  return Zt(e[0] * t, e[1] * t);
}
function lM(e) {
  return e[0] * e[0] + e[1] * e[1];
}
function sM(e) {
  return Math.sqrt(lM(e));
}
var nn = (e) => {
  let t = sM(e);
  return t === 0 ? Zt(0, 0) : Zt(e[0] / t, e[1] / t);
};
function k(e, t) {
  return [e, t];
}
function O0(e) {
  return e.length === 2 ? k(e[0], e[1]) : void 0;
}
function ke(e, t = k(0, 0)) {
  return k(t[0] + e[0], t[1] + e[1]);
}
function oM(e) {
  return Array.isArray(e) && e.length === 2 && typeof e[0] == "number" && !isNaN(e[0]) && typeof e[1] == "number" && !isNaN(e[1]);
}
function va(e, t) {
  let n = Math.abs;
  return n(e[0] - t[0]) < 1e-4 && n(e[1] - t[1]) < 1e-4;
}
function B([e, t], [n, a], i) {
  return k((e - n) * Math.cos(i) - (t - a) * Math.sin(i) + n, (e - n) * Math.sin(i) + (t - a) * Math.cos(i) + a);
}
function Jd(e, t = [0, 0]) {
  return k(e[0] + t[0], e[1] + t[1]);
}
function fc(e, t) {
  return k((e[0] + t[0]) / 2, (e[1] + t[1]) / 2);
}
function Pe(e, t) {
  return Math.hypot(t[0] - e[0], t[1] - e[1]);
}
function zo(e, t) {
  let n = t[0] - e[0], a = t[1] - e[1];
  return n * n + a * a;
}
var di = (e, t, n) => Jd(t, bt(le(e, t), n)), Vb = (e, t, n) => t[0] <= Math.max(e[0], n[0]) && t[0] >= Math.min(e[0], n[0]) && t[1] <= Math.max(e[1], n[1]) && t[1] >= Math.min(e[1], n[1]);
function u1(e, t) {
  return [e, t];
}
function cM(e, t) {
  let n = e[1][1] - e[0][1], a = e[0][0] - e[1][0], i = t[1][1] - t[0][1], r = t[0][0] - t[1][0], l = n * r - i * a;
  if (l !== 0) {
    let s = n * e[0][0] + a * e[0][1], c = i * t[0][0] + r * t[0][1];
    return k((s * r - c * a) / l, (n * c - i * s) / l);
  }
  return null;
}
function se(e, t) {
  return [e, t];
}
var al = (e, t, n = 1e-4) => {
  let a = $0(e, t);
  return a === 0 ? !0 : a < n;
}, $0 = (e, t) => {
  let [n, a] = e, [[i, r], [l, s]] = t, c = n - i, d = a - r, o = l - i, u = s - r, f = c * o + d * u, p = o * o + u * u, U = -1;
  p !== 0 && (U = f / p);
  let m, g;
  U < 0 ? (m = i, g = r) : U > 1 ? (m = l, g = s) : (m = i + U * o, g = r + U * u);
  let b = n - m, v = a - g;
  return Math.sqrt(b * b + v * v);
};
function Bo(e, t) {
  let n = cM(u1(e[0], e[1]), u1(t[0], t[1]));
  return !n || !al(n, t) || !al(n, e) ? null : n;
}
function h1(e, t) {
  return [e, t];
}
function dM(e, t) {
  return [se(e[0], k(e[1][0], e[0][1])), se(k(e[1][0], e[0][1]), e[1]), se(e[1], k(e[0][0], e[1][1])), se(k(e[0][0], e[1][1]), e[0])].map((n) => Bo(t, n)).filter((n) => !!n);
}
function bi(e, t, n, a) {
  return [e, t, n, a];
}
function V2(e, t, n, a = 1e-6) {
  return [(e(t + a, n) - e(t - a, n)) / (2 * a), (e(t, n + a) - e(t, n - a)) / (2 * a)];
}
function uM(e, t, n, a = 1e-3, i = 10) {
  let r = 1 / 0, l = 0;
  for (; r >= a; ) {
    if (l >= i) return null;
    let s = e(t, n), c = [V2((m, g) => e(m, g)[0], t, n), V2((m, g) => e(m, g)[1], t, n)], d = [[-s[0]], [-s[1]]], o = c[0][0] * c[1][1] - c[0][1] * c[1][0];
    if (o === 0) return null;
    let u = [[c[1][1] / o, -c[0][1] / o], [-c[1][0] / o, c[0][0] / o]], f = [[u[0][0] * d[0][0] + u[0][1] * d[1][0]], [u[1][0] * d[0][0] + u[1][1] * d[1][0]]];
    t = t + f[0][0], n = n + f[1][0];
    let [p, U] = e(t, n);
    r = Math.max(Math.abs(p), Math.abs(U)), l += 1;
  }
  return [t, n];
}
var go = (e, t) => k((1 - t) ** 3 * e[0][0] + 3 * (1 - t) ** 2 * t * e[1][0] + 3 * (1 - t) * t ** 2 * e[2][0] + t ** 3 * e[3][0], (1 - t) ** 3 * e[0][1] + 3 * (1 - t) ** 2 * t * e[1][1] + 3 * (1 - t) * t ** 2 * e[2][1] + t ** 3 * e[3][1]);
function Gb(e, t) {
  let n = fM(e);
  if (dM(h1(k(n[0], n[1]), k(n[2], n[3])), t).length === 0) return [];
  let a = (s) => k(t[0][0] + s * (t[1][0] - t[0][0]), t[0][1] + s * (t[1][1] - t[0][1])), i = [[0.5, 0], [0.2, 0], [0.8, 0]], r = ([s, c]) => {
    let d = uM((f, p) => {
      let U = go(e, f), m = a(p);
      return [U[0] - m[0], U[1] - m[1]];
    }, s, c);
    if (!d) return null;
    let [o, u] = d;
    return o < 0 || o > 1 || u < 0 || u > 1 ? null : go(e, o);
  }, l = r(i[0]);
  return l ? [l] : (l = r(i[1]), l ? [l] : (l = r(i[2]), l ? [l] : []));
}
function hM(e, t, n = 1e-3) {
  let a = (c, d, o, u = n) => {
    let f = c, p = d, U;
    for (; p - f > u; ) U = (p + f) / 2, o(U - u) < o(U + u) ? p = U : f = U;
    return U;
  }, i = 0;
  for (let c = 1 / 0, d = 0; d < 30; d++) {
    let o = Pe(t, go(e, d / 30));
    o < c && (c = o, i = d);
  }
  let r = Math.max((i - 1) / 30, 0), l = Math.min((i + 1) / 30, 1), s = a(r, l, (c) => Pe(t, go(e, c)));
  return s ? go(e, s) : null;
}
function Yb(e, t) {
  let n = hM(e, t);
  return n ? Pe(t, n) : 0;
}
function fM(e) {
  let [t, n, a, i] = e, r = [t[0], n[0], a[0], i[0]], l = [t[1], n[1], a[1], i[1]];
  return [Math.min(...r), Math.min(...l), Math.max(...r), Math.max(...l)];
}
function G2(...e) {
  return Zb(e);
}
function Qd(e) {
  return Zb(e);
}
var Y2 = (e, t) => {
  let n = e[0], a = e[1], i = !1;
  for (let r = 0, l = t.length - 1; r < t.length; l = r++) {
    let s = t[r][0], c = t[r][1], d = t[l][0], o = t[l][1];
    (c > a && o <= a || c <= a && o > a) && n < (d - s) * (a - c) / (o - c) + s && (i = !i);
  }
  return i;
}, pM = (e, t, n = 1e-4) => {
  let a = !1;
  for (let i = 0, r = t.length - 1; i < r; i++) if (al(e, se(t[i], t[i + 1]), n)) {
    a = !0;
    break;
  }
  return a;
};
function Zb(e) {
  return UM(e) ? e : [...e, e[0]];
}
function UM(e) {
  return va(e[0], e[e.length - 1]);
}
function Qt(e, t) {
  return Kn([e, t]);
}
var eu = ([e, t], [n, a]) => e <= n ? t >= n : e >= n ? a >= e : !1, tu = ([e, t], [n, a]) => {
  let i = Math.max(e, n), r = Math.min(t, a);
  return i <= r ? Kn([i, r]) : null;
}, zc = (e, [t, n]) => e >= t && e <= n;
function kl([e, t, n], a) {
  let i = (o, u, f) => (o[0] - f[0]) * (u[1] - f[1]) - (u[0] - f[0]) * (o[1] - f[1]), r = i(a, e, t), l = i(a, t, n), s = i(a, n, e), c = r < 0 || l < 0 || s < 0, d = r > 0 || l > 0 || s > 0;
  return !(c && d);
}
var Z2 = () => {
  let e = /* @__PURE__ */ new Date(), t = e.getFullYear(), n = `${e.getMonth() + 1}`.padStart(2, "0"), a = `${e.getDate()}`.padStart(2, "0"), i = `${e.getHours()}`.padStart(2, "0"), r = `${e.getMinutes()}`.padStart(2, "0");
  return `${t}-${n}-${a}-${i}${r}`;
}, bo = (e) => e.charAt(0).toUpperCase() + e.slice(1), mM = (e) => e instanceof HTMLElement && e.className.includes("ToolIcon"), f1 = (e) => e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLInputElement || e instanceof HTMLTextAreaElement || e instanceof HTMLSelectElement, gM = (e) => f1(e) || e instanceof Element && !!e.closest("label, button"), Rr = (e) => e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLTextAreaElement || e instanceof HTMLInputElement && (e.type === "text" || e.type === "number" || e.type === "password"), as = ({ fontFamily: e }) => {
  for (let [t, n] of Object.entries(ut)) if (n === e) return `${t}${$b(n).map((a) => `, ${a}`).join("")}`;
  return $o;
}, Ye = ({ fontSize: e, fontFamily: t }) => `${e}px ${as({ fontFamily: t })}`, is = (e, t) => {
  let n = 0, a = null, i = (...r) => {
    a = r, clearTimeout(n), n = window.setTimeout(() => {
      a = null, e(...r);
    }, t);
  };
  return i.flush = () => {
    if (clearTimeout(n), a) {
      let r = a;
      a = null, e(...r);
    }
  }, i.cancel = () => {
    a = null, clearTimeout(n);
  }, i;
}, Hu = (e, t) => {
  let n = null, a = null, i = null, r = (s) => {
    n = window.requestAnimationFrame(() => {
      n = null, e(...s), a = null, i && (a = i, i = null, r(a));
    });
  }, l = (...s) => {
    if (ve.MODE === "test") {
      e(...s);
      return;
    }
    a = s, n === null ? r(a) : t != null && t.trailing && (i = s);
  };
  return l.flush = () => {
    n !== null && (cancelAnimationFrame(n), n = null), a && (e(...i || a), a = i = null);
  }, l.cancel = () => {
    a = i = null, n !== null && (cancelAnimationFrame(n), n = null);
  }, l;
}, Vr = (e) => 1 - Math.pow(1 - e, 4), K2 = (e, t, n) => (t - e) * Vr(n) + e, bM = ({ fromValues: e, toValues: t, onStep: n, duration: a = 250, interpolateValue: i, onStart: r, onEnd: l, onCancel: s }) => {
  let c = !1, d = 0, o;
  function u(f) {
    if (c) return;
    o === void 0 && (o = f, r == null || r());
    let p = Math.min(f - o, a), U = Vr(p / a), m = {};
    if (Object.keys(e).forEach((g) => {
      let b = g, v = (t[b] - e[b]) * U + e[b];
      m[b] = v;
    }), n(m), p < a) {
      let g = p / a, b = {};
      Object.keys(e).forEach((v) => {
        let x = v, y = e[x], E = t[x], S;
        S = i ? i(y, E, g, x) : K2(y, E, g), S == null && (S = K2(y, E, g)), b[x] = S;
      }), n(b), d = window.requestAnimationFrame(u);
    } else n(t), l == null || l();
  }
  return d = window.requestAnimationFrame(u), () => {
    s == null || s(), c = !0, window.cancelAnimationFrame(d);
  };
}, vM = (e, t) => {
  if (!e.length || t < 1) return [];
  let n = 0, a = 0, i = Array(Math.ceil(e.length / t));
  for (; n < e.length; ) i[a++] = e.slice(n, n += t);
  return i;
}, en = (e, t) => Math.abs(e - t), Ct = (e, t) => t.type === "custom" ? { ...e.activeTool, type: "custom", customType: t.customType, locked: t.locked ?? e.activeTool.locked } : { ...e.activeTool, lastActiveTool: t.lastActiveToolBeforeEraser === void 0 ? e.activeTool.lastActiveTool : t.lastActiveToolBeforeEraser, type: t.type, customType: null, locked: t.locked ?? e.activeTool.locked }, X = (e) => (e = e.replace(/\bAlt\b/i, "Alt").replace(/\bShift\b/i, "Shift").replace(/\b(Enter|Return)\b/i, "Enter"), Za ? e.replace(/\bCtrlOrCmd\b/gi, "Cmd").replace(/\bAlt\b/i, "Option") : e.replace(/\bCtrlOrCmd\b/gi, "Ctrl")), et = ({ clientX: e, clientY: t }, { zoom: n, offsetLeft: a, offsetTop: i, scrollX: r, scrollY: l }) => {
  let s = (e - a) / n.value - r, c = (t - i) / n.value - l;
  return { x: s, y: c };
}, ca = ({ sceneX: e, sceneY: t }, { zoom: n, offsetLeft: a, offsetTop: i, scrollX: r, scrollY: l }) => {
  let s = (e + r) * n.value + a, c = (t + l) * n.value + i;
  return { x: s, y: c };
}, Bc = (e) => getComputedStyle(document.documentElement).getPropertyValue(`--${e}`), xM = "A-Za-z--------", yM = "---", wM = new RegExp(`^[^${xM}]*[${yM}]`), Kb = (e) => wM.test(e), da = (e) => {
  let [t, n] = e;
  return { x: t, y: n };
}, qb = (e) => {
  if ((e == null ? void 0 : e.name) === "AbortError") {
    console.warn(e);
    return;
  }
  throw e;
}, Jb = (e, t, n = 0) => {
  n < 0 && (n = e.length + n), n = Math.min(e.length, Math.max(n, 0));
  let a = n - 1;
  for (; ++a < e.length; ) if (t(e[a], a, e)) return a;
  return -1;
}, Pr = (e, t, n = e.length - 1) => {
  n < 0 && (n = e.length + n), n = Math.min(e.length - 1, Math.max(n, 0));
  let a = n + 1;
  for (; --a > -1; ) if (t(e[a], a, e)) return a;
  return -1;
}, ua = (e) => {
  let t = e.length === 5 && e.substr(4, 1) === "0", n = e.length === 9 && e.substr(7, 2) === "00";
  return t || n || e === Ee.transparent;
}, qh = (e) => e.fillStyle !== "solid" || ua(e.backgroundColor), EM = () => {
  let e, t, n = new Promise((a, i) => {
    e = a, t = i;
  });
  return n.resolve = e, n.reject = t, n;
}, SM = (e) => {
  let t = e.parentElement;
  for (; t; ) {
    if (t === document.body) return document;
    let { overflowY: n } = window.getComputedStyle(t);
    if (t.scrollHeight > t.clientHeight && (n === "auto" || n === "scroll" || n === "overlay")) return t;
    t = t.parentElement;
  }
  return document;
}, kM = (e) => {
  let t = e.parentElement;
  for (; t; ) {
    if (t.tabIndex > -1) {
      t.focus();
      return;
    }
    t = t.parentElement;
  }
}, MM = (e) => Array.from(e).map((t) => `0${t.toString(16)}`.slice(-2)).join(""), Ss = () => ki() ? 1 : Date.now(), ue = (e) => e instanceof Map ? e : e.reduce((t, n) => (t.set(typeof n == "string" ? n : n.id, n), t), /* @__PURE__ */ new Map()), CM = (e) => e.reduce((t, n, a) => (t.set(n.id, [n, a]), t), /* @__PURE__ */ new Map()), oi = (e, t) => e.reduce((n, a) => (n[t ? t(a) : String(a)] = a, n), {}), IM = (e) => e.reduce((t, n, a) => {
  let i = { ...n, prev: null, next: null };
  if (a !== 0) {
    let r = t[a - 1];
    if (i.prev = r, r.next = i, a === e.length - 1) {
      let l = t[0];
      i.next = l, l.prev = i;
    }
  }
  return t.push(i), t;
}, []), ki = () => ve.MODE === "test", Qb = () => ve.MODE === "development", TM = () => typeof process < "u" && !0, e8 = (e, t) => new CustomEvent(e, { detail: { nativeEvent: t }, cancelable: !0 }), md = (e, t) => {
  let n = !1;
  for (let a in t) {
    let i = t[a];
    if (typeof i < "u") {
      if (e[a] === i && (typeof i != "object" || i === null)) continue;
      n = !0;
    }
  }
  return n ? { ...e, ...t } : e;
}, _M = () => {
  try {
    return window.self === window.top ? "top" : "iframe";
  } catch {
    return "iframe";
  }
}, pc = (e) => !!e && typeof e == "object" && "then" in e && "catch" in e && "finally" in e, p1 = (e) => {
  let t = e == null ? void 0 : e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");
  return t ? Array.from(t).filter((n) => n.tabIndex > -1 && !n.disabled) : [];
}, q2 = (e, t) => Array.isArray(e) && Array.isArray(t) && e.length === 0 && t.length === 0 ? !0 : e === t, qt = (e, t, n, a = !1) => {
  let i = Object.keys(e), r = Object.keys(t);
  if (i.length !== r.length) return a && console.warn("%cisShallowEqual: objects don't have same properties ->", "color: #8B4000", e, t), !1;
  if (n && Array.isArray(n)) {
    for (let l of n) if (!(e[l] === t[l] || q2(e[l], t[l]))) return a && console.warn(`%cisShallowEqual: ${l} not equal ->`, "color: #8B4000", e[l], t[l]), !1;
    return !0;
  }
  return i.every((l) => {
    let s = n == null ? void 0 : n[l], c = s ? s(e[l], t[l]) : e[l] === t[l] || q2(e[l], t[l]);
    return !c && a && console.warn(`%cisShallowEqual: ${l} not equal ->`, "color: #8B4000", e[l], t[l]), c;
  });
}, Xu = (e, t, { checkForDefaultPrevented: n = !0 } = {}) => function(a) {
  if (e == null || e(a), !n || !(a != null && a.defaultPrevented)) return t == null ? void 0 : t(a);
}, il = (e, t, n) => {
  if (!t) return e;
  if (n) return console.error(t), e;
  throw new Error(t);
};
function rn(e, t) {
  if (!e) throw new Error(t);
}
var AM = (e) => {
  let t, n, a = function(i) {
    let r = Object.entries(i);
    if (t) {
      let s = !0;
      for (let [c, d] of r) if (t.get(c) !== d) {
        s = !1;
        break;
      }
      if (s) return n;
    }
    let l = e(i);
    return t = new Map(r), n = l, l;
  };
  return a.clear = () => {
    t = void 0, n = void 0;
  }, a;
}, t8 = (e, t) => e instanceof Set || e instanceof Map ? e.has(t) : "includes" in e ? e.includes(t) : e.hasOwnProperty(t), yi = (e) => JSON.parse(JSON.stringify(e)), zs = (e, t) => qt(e, t) ? e : t;
function ct(e, t, n, a) {
  var i;
  return e ? ((i = e == null ? void 0 : e.addEventListener) == null || i.call(e, t, n, a), () => {
    var r;
    (r = e == null ? void 0 : e.removeEventListener) == null || r.call(e, t, n, a);
  }) : () => {
  };
}
function jM(e, t = !0) {
  let n = e.length;
  if (n < 4) return "";
  let a = e[0], i = e[1], r = e[2], l = `M${a[0].toFixed(2)},${a[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${Fc(i[0], r[0]).toFixed(2)},${Fc(i[1], r[1]).toFixed(2)} T`;
  for (let s = 2, c = n - 1; s < c; s++) a = e[s], i = e[s + 1], l += `${Fc(a[0], i[0]).toFixed(2)},${Fc(a[1], i[1]).toFixed(2)} `;
  return t && (l += "Z"), l;
}
var n8 = (e) => e.replace(/\r?\n|\r/g, `
`), Kn = (e) => e, rs = async (e, ...t) => new Promise((n) => {
  n(e(...t));
}), DM = (...e) => Math.max(...e.map((t) => t ? 1 : 0)) > 0, J2 = class {
  constructor(e, t) {
    j(this, "pool"), j(this, "entries", {}), this.pool = new rS(e, t);
  }
  all() {
    let e = (t) => {
      if (t.data.result) {
        let [n, a] = t.data.result;
        this.entries[n] = a;
      }
    };
    return this.pool.addEventListener("fulfilled", e), this.pool.start().then(() => (setTimeout(() => {
      this.pool.removeEventListener("fulfilled", e);
    }), Object.values(this.entries)));
  }
}, gd = (e) => e.replace(/"/g, "&quot;"), Q2 = (e) => Array.isArray(e) ? e : [e], Bn = (e) => !!e && e.type === "image" && !!e.fileId, Re = (e) => !!e && e.type === "image", vn = (e) => !!e && e.type === "embeddable", qi = (e) => !!e && e.type === "iframe", Hn = (e) => !!e && (e.type === "iframe" || e.type === "embeddable"), q = (e) => e != null && e.type === "text", a8 = (e) => e != null && e.type === "frame", bd = (e) => e != null && e.type === "magicframe", de = (e) => e != null && (e.type === "frame" || e.type === "magicframe"), qn = (e) => e != null && LM(e.type), LM = (e) => e === "freedraw", pe = (e) => e != null && F0(e.type), ye = (e) => e != null && e.type === "arrow", ee = (e) => ye(e) && e.elbowed, F0 = (e) => e === "arrow" || e === "line", Ha = (e, t = !0) => e != null && (!e.locked || t === !0) && i8(e.type), i8 = (e) => e === "arrow", xa = (e, t = !0) => e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId), RM = (e) => e != null && (e.type === "rectangle" || e.type === "diamond" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId), Gr = (e, t = !0) => e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || ye(e)), r8 = (e) => {
  let t = e == null ? void 0 : e.type;
  if (!t) return !1;
  switch (t) {
    case "text":
    case "diamond":
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "ellipse":
    case "arrow":
    case "freedraw":
    case "line":
    case "frame":
    case "magicframe":
    case "image":
    case "selection":
      return !0;
    default:
      return il(t, null), !1;
  }
}, Wu = (e) => e.type === "rectangle" || e.type === "ellipse" || e.type === "diamond", Jn = (e) => {
  var t;
  return Gr(e) && !!((t = e.boundElements) != null && t.some(({ type: n }) => n === "text"));
}, rt = (e) => e !== null && "containerId" in e && e.containerId !== null && q(e), ks = (e) => e === "rectangle" || e === "embeddable" || e === "iframe" || e === "image", l8 = (e) => e === "line" || e === "arrow" || e === "diamond", PM = (e, t) => !!((e === jt.ADAPTIVE_RADIUS || e === jt.LEGACY) && ks(t.type) || e === jt.PROPORTIONAL_RADIUS && l8(t.type)), NM = (e) => l8(e.type) ? { type: jt.PROPORTIONAL_RADIUS } : ks(e.type) ? { type: jt.ADAPTIVE_RADIUS } : null, nu = (e) => Object.hasOwn(e, "fixedPoint") && e.fixedPoint != null, ln = (e, t, n) => {
  let a = e.split(`
`).map((l) => l || " ").join(`
`), i = parseFloat(t), r = zM(a, i, n);
  return { width: H0(a, t), height: r };
}, s8 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(), o8 = (e, t) => {
  let n = BM(e);
  return n === 0 ? ln(s8.split("").join(`
`), e, t).width + At * 2 : n + At * 2;
}, z0 = (e, t) => ln("", e, t).width + At * 2, OM = () => H0(s8, Ye({ fontSize: Ni, fontFamily: xr })) > 0, ls = (e) => n8(e).replace(/\t/g, "        "), B0 = (e) => ls(e).split(`
`), $M = (e) => {
  let t = B0(e.text).length;
  return e.height / t / e.fontSize;
}, Uc = (e, t) => e * t, c8 = (e, t) => Uc(e, t) + At * 2, Jh, FM = class {
  constructor() {
    j(this, "canvas"), this.canvas = document.createElement("canvas");
  }
  getLineWidth(e, t) {
    let n = this.canvas.getContext("2d");
    n.font = t;
    let a = n.measureText(e).width;
    return ki() ? a * 10 : a;
  }
}, rl = (e, t) => (Jh || (Jh = new FM()), Jh.getLineWidth(e, t)), H0 = (e, t) => {
  let n = B0(e), a = 0;
  return n.forEach((i) => {
    a = Math.max(a, rl(i, t));
  }), a;
}, zM = (e, t, n) => {
  let a = B0(e).length;
  return Uc(t, n) * a;
}, mc = /* @__PURE__ */ (() => {
  let e = {};
  return { calculate: (t, n) => {
    let a = t.charCodeAt(0);
    if (e[n] || (e[n] = []), !e[n][a]) {
      let i = rl(t, n);
      e[n][a] = i;
    }
    return e[n][a];
  }, getCache: (t) => e[t], clearCache: (t) => {
    e[t] = [];
  } };
})(), BM = (e) => {
  let t = mc.getCache(e);
  if (!t) return 0;
  let n = t.filter((a) => a !== void 0);
  return Math.max(...n);
}, Qh, Hc, ef, HM = (e) => (Qh || (Qh = Fe.class(...Object.values(ui))), Qh.test(e)), XM = () => {
  if (!Hc) try {
    Hc = VM();
  } catch {
    Hc = WM();
  }
  return Hc;
}, X0 = () => (ef || (ef = GM()), ef), On = { WHITESPACE: /\s/u, HYPHEN: /-/u, OPENING: /<\(\[\{/u, CLOSING: />\)\]\}.,:;!\?\//u }, ui = { CHAR: new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}", "u"), OPENING: //u, CLOSING: //u, CURRENCY: //u }, Mr = { FLAG: new RegExp("\\p{RI}\\p{RI}", "u"), JOINER: new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?", "u"), ZWJ: /\u200D/u, ANY: /[\p{Emoji}]/u, MOST: /[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u }, WM = () => Fe.or(X0(), kt.On(On.HYPHEN, On.WHITESPACE, ui.CHAR)), VM = () => Fe.or(X0(), kt.Before(On.WHITESPACE).Build(), kt.After(On.WHITESPACE, On.HYPHEN).Build(), kt.Before(ui.CHAR, ui.CURRENCY).NotPrecededBy(On.OPENING, ui.OPENING).Build(), kt.After(ui.CHAR).NotFollowedBy(On.HYPHEN, On.CLOSING, ui.CLOSING).Build(), kt.BeforeMany(ui.OPENING).NotPrecededBy(On.OPENING).Build(), kt.AfterMany(ui.CLOSING).NotFollowedBy(On.CLOSING).Build(), kt.AfterMany(On.CLOSING).FollowedBy(On.OPENING).Build()), GM = () => Fe.group(Fe.or(Mr.FLAG, Fe.and(Mr.MOST, Mr.JOINER, Fe.build(`(?:${Mr.ZWJ.source}(?:${Mr.FLAG.source}|${Mr.ANY.source}${Mr.JOINER.source}))*`)))), Fe = { build: (e) => new RegExp(e, "u"), join: (...e) => e.map((t) => t.source).join(""), and: (...e) => Fe.build(Fe.join(...e)), or: (...e) => Fe.build(e.map((t) => t.source).join("|")), group: (...e) => Fe.build(`(${Fe.join(...e)})`), class: (...e) => Fe.build(`[${Fe.join(...e)}]`) }, kt = { On: (...e) => {
  let t = Fe.join(...e);
  return Fe.build(`([${t}])`);
}, Before: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?=[${t}])`);
  return kt.Chain(n);
}, After: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?<=[${t}])`);
  return kt.Chain(n);
}, BeforeMany: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?<![${t}])(?=[${t}])`);
  return kt.Chain(n);
}, AfterMany: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?<=[${t}])(?![${t}])`);
  return kt.Chain(n);
}, NotBefore: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?![${t}])`);
  return kt.Chain(n);
}, NotAfter: (...e) => {
  let t = Fe.join(...e), n = () => Fe.build(`(?<![${t}])`);
  return kt.Chain(n);
}, Chain: (e) => ({ Build: e, PreceededBy: (...t) => {
  let n = e(), a = kt.After(...t).Build(), i = () => Fe.and(a, n);
  return kt.Chain(i);
}, FollowedBy: (...t) => {
  let n = e(), a = kt.Before(...t).Build(), i = () => Fe.and(n, a);
  return kt.Chain(i);
}, NotPrecededBy: (...t) => {
  let n = e(), a = kt.NotAfter(...t).Build(), i = () => Fe.and(a, n);
  return kt.Chain(i);
}, NotFollowedBy: (...t) => {
  let n = e(), a = kt.NotBefore(...t).Build(), i = () => Fe.and(n, a);
  return kt.Chain(i);
} }) }, YM = (e) => {
  let t = XM();
  return e.normalize("NFC").split(t).filter(Boolean);
}, gl = (e, t, n) => {
  if (!Number.isFinite(n) || n < 0) return e;
  let a = [], i = e.split(`
`);
  for (let r of i) {
    if (rl(r, t) <= n) {
      a.push(r);
      continue;
    }
    let l = ZM(r, t, n);
    a.push(...l);
  }
  return a.join(`
`);
}, ZM = (e, t, n) => {
  let a = [], i = YM(e)[Symbol.iterator](), r = "", l = 0, s = i.next();
  for (; !s.done; ) {
    let c = s.value, d = r + c, o = JM(c) ? l + mc.calculate(c, t) : rl(d, t);
    if (/\s/.test(c) || o <= n) {
      r = d, l = o, s = i.next();
      continue;
    }
    if (r) a.push(r.trimEnd()), r = "", l = 0;
    else {
      let u = KM(c, t, n), f = u[u.length - 1] ?? "", p = u.slice(0, -1);
      a.push(...p), r = f, l = rl(f, t), s = i.next();
    }
  }
  if (r) {
    let c = qM(r, t, n);
    a.push(c);
  }
  return a;
}, KM = (e, t, n) => {
  if (X0().test(e)) return [e];
  QM(e);
  let a = [], i = Array.from(e), r = "", l = 0;
  for (let s of i) {
    let c = mc.calculate(s, t), d = l + c;
    if (d <= n) {
      r = r + s, l = d;
      continue;
    }
    r && a.push(r), r = s, l = c;
  }
  return r && a.push(r), a;
}, qM = (e, t, n) => {
  if (!(rl(e, t) > n)) return e;
  let [, a, i] = e.match(/^(.+?)(\s+)$/) ?? [e, e.trimEnd(), ""], r = rl(a, t);
  for (let l of Array.from(i)) {
    let s = mc.calculate(l, t), c = r + s;
    if (c > n) break;
    a = a + l, r = c;
  }
  return a;
}, JM = (e) => e.codePointAt(0) !== void 0 && e.codePointAt(1) === void 0, QM = (e) => {
  if ((ve.MODE === En.TEST || ve.DEV) && /\s/.test(e)) throw new Error("Word should not contain any whitespaces!");
}, cn = class {
};
j(cn, "rg", new No()), j(cn, "cache", /* @__PURE__ */ new WeakMap()), j(cn, "get", (e) => cn.cache.get(e)), j(cn, "set", (e, t) => cn.cache.set(e, t)), j(cn, "delete", (e) => cn.cache.delete(e)), j(cn, "destroy", () => {
  cn.cache = /* @__PURE__ */ new WeakMap();
}), j(cn, "generateElementShape", (e, t) => {
  let n = t != null && t.isExporting ? void 0 : cn.get(e);
  if (n !== void 0) return n;
  E1.delete(e);
  let a = lL(e, cn.rg, t || { isExporting: !1, canvasBackgroundColor: Ee.white, embedsValidationStatus: null });
  return cn.cache.set(e, a), a;
});
var pt = cn, oa = (e) => "var(--icon-fill-color)", d8 = (e) => e === Me.LIGHT ? Wt.white : "#1e1e1e", F = (e, t = 512) => {
  let { width: n = 512, height: a = n, mirror: i, style: r, ...l } = typeof t == "number" ? { width: t } : t;
  return h.jsx("svg", { "aria-hidden": "true", focusable: "false", role: "img", viewBox: `0 0 ${n} ${a}`, className: ne({ "rtl-mirror": i }), style: r, ...l, children: typeof e == "string" ? h.jsx("path", { fill: "currentColor", d: e }) : e });
}, K = { width: 24, height: 24, fill: "none", strokeWidth: 2, stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, me = { width: 20, height: 20, fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" };
F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("rect", { x: 3, y: 8, width: 18, height: 4, rx: 1 }), h.jsx("line", { x1: 12, y1: 8, x2: 12, y2: 21 }), h.jsx("path", { d: "M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7" }), h.jsx("path", { d: "M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5" })] }), K);
var W0 = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" }), h.jsx("path", { d: "M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" }), h.jsx("line", { x1: "3", y1: "6", x2: "3", y2: "19" }), h.jsx("line", { x1: "12", y1: "6", x2: "12", y2: "19" }), h.jsx("line", { x1: "21", y1: "6", x2: "21", y2: "19" })] }), K), eC = F(h.jsxs("svg", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), h.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), K), tC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("circle", { cx: "12", cy: "12", r: "1" }), h.jsx("circle", { cx: "12", cy: "19", r: "1" }), h.jsx("circle", { cx: "12", cy: "5", r: "1" })] }), K), nC = F(h.jsxs("svg", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M9 4v6l-2 4v2h10v-2l-2 -4v-6" }), h.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "21" }), h.jsx("line", { x1: "8", y1: "4", x2: "16", y2: "4" })] }), K), Vu = F(h.jsxs("g", { children: [h.jsx("path", { d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z", stroke: "currentColor", strokeWidth: "1.25" }), h.jsx("path", { d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z", stroke: "currentColor", strokeWidth: "1.25" }), h.jsx("mask", { id: "UnlockedIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: 6, y: 1, width: 9, height: 9, children: h.jsx("path", { stroke: "none", d: "M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481", fill: "#fff" }) }), h.jsx("g", { mask: "url(#UnlockedIcon)", children: h.jsx("path", { stroke: "none", d: "M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z", fill: "currentColor" }) })] }), me), V0 = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z" }), h.jsx("path", { d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z" }), h.jsx("path", { d: "M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916" })] }), me), aC = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), h.jsx("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z", fill: "currentColor" }), h.jsx("path", { d: "M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 41, height: 94, fill: "none" }), iC = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), h.jsx("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z", fill: "currentColor" }), h.jsx("path", { d: "M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 85, height: 71, fill: "none" }), rC = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), h.jsx("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z", fill: "currentColor" }), h.jsx("path", { d: "M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 38, height: 78, fill: "none" });
F(h.jsx("g", { fill: "currentColor", children: h.jsx("path", { d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z", fill: "currentColor" }) }), { width: 40, height: 40, fill: "none" });
var lC = F(h.jsxs("g", { stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z" }), h.jsx("path", { d: "M13.5 13.5l4.5 4.5" })] }), { fill: "none", width: 22, height: 22, strokeWidth: 1.25 }), sC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("rect", { x: "4", y: "4", width: "16", height: "16", rx: "2" })] }), K), oC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z" })] }), K), cC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("circle", { cx: "12", cy: "12", r: "9" })] }), K), dC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" }), h.jsx("line", { x1: "15", y1: "16", x2: "19", y2: "12" }), h.jsx("line", { x1: "15", y1: "8", x2: "19", y2: "12" })] }), K), uC = F(h.jsx("path", { d: "M4.167 10h11.666", strokeWidth: "1.5" }), me), hC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z" }), h.jsx("path", { d: "M16 7h4" }), h.jsx("path", { d: "M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3" })] }), K), Ho = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { clipRule: "evenodd", d: "m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z" }), h.jsx("path", { d: "m11.25 5.417 3.333 3.333" })] }), me), u8 = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "20", x2: "7", y2: "20" }), h.jsx("line", { x1: "14", y1: "20", x2: "21", y2: "20" }), h.jsx("line", { x1: "6.9", y1: "15", x2: "13.8", y2: "15" }), h.jsx("line", { x1: "10.2", y1: "6.3", x2: "16", y2: "20" }), h.jsx("polyline", { points: "5 20 11 4 13 4 20 20" })] }), K), fC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M12.5 6.667h.01" }), h.jsx("path", { d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z" }), h.jsx("path", { d: "m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166" }), h.jsx("path", { d: "m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667" })] }), me), pC = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3" }), h.jsx("path", { d: "M18 13.3l-6.3 -6.3" })] }), K), em = F(h.jsx("path", { strokeWidth: "1.25", d: "M10 4.167v11.666M4.167 10h11.666" }), me), tm = F(h.jsx("path", { d: "M5 10h10", strokeWidth: "1.25" }), me), UC = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M21 21l-6 -6" }), h.jsx("path", { d: "M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403" }), h.jsx("path", { d: "M3 4v4h4" })] }), K), ll = F(h.jsx("path", { strokeWidth: "1.25", d: "M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5" }), me), mC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("polyline", { points: "12 16 18 10 12 4" }), h.jsx("polyline", { points: "8 4 2 10 8 16" })] }), me), U1 = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z" }), h.jsx("path", { clipRule: "evenodd", d: "M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z" })] }), me), m1 = F(h.jsx("path", { clipRule: "evenodd", d: "M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z", stroke: "currentColor" }), me), g1 = F(h.jsx("g", { stroke: "currentColor", strokeLinejoin: "round", children: h.jsx("path", { d: "M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667" }) }), { ...me, strokeWidth: 1.5 }), h8 = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "6", x2: "20", y2: "6" }), h.jsx("line", { x1: "4", y1: "12", x2: "20", y2: "12" }), h.jsx("line", { x1: "4", y1: "18", x2: "20", y2: "18" })] }), K), Gu = F(h.jsx("path", { strokeWidth: "1.25", d: "M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10" }), me), G0 = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("circle", { cx: "12", cy: "12", r: "9" }), h.jsx("line", { x1: "12", y1: "17", x2: "12", y2: "17.01" }), h.jsx("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), K), gC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("circle", { cx: "12", cy: "12", r: "9" }), h.jsx("line", { x1: "12", y1: "17", x2: "12", y2: "17.01" }), h.jsx("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), K), nm = F(h.jsx("path", { strokeWidth: "1.25", d: "M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5" }), me), f8 = F(h.jsx("path", { d: "M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5", strokeWidth: "1.25" }), me), bC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0" }), h.jsx("path", { d: "M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084" })] }), me), vC = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 4l11.733 16h4.267l-11.733 -16z" }), h.jsx("path", { d: "M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" })] }), K), xC = F(h.jsx("polyline", { fill: "none", stroke: "currentColor", points: "20 6 9 17 4 12" }), { width: 24, height: 24 }), b1 = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416" }), h.jsx("path", { d: "M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416" })] }), me), yC = F("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z", { width: 448, height: 512 }), wC = F("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z", { width: 448, height: 512 }), Y0 = F(h.jsx("path", { d: "m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z", strokeWidth: "1.25" }), me);
F("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z", { width: 384, height: 512 });
var EC = F("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"), tf = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z" }), h.jsx("path", { d: "M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z" }), h.jsx("path", { d: "M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208" })] }), K), p8 = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M15 8h.01" }), h.jsx("path", { d: "M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5" }), h.jsx("path", { d: "M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4" }), h.jsx("path", { d: "M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598" }), h.jsx("path", { d: "M19 16v6" }), h.jsx("path", { d: "M22 19l-3 3l-3 -3" })] }), K), SC = F("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z", { width: 512, height: 512 });
F("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", { width: 448, height: 512 });
F("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", { width: 448, height: 512 });
var kC = F("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");
F("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");
var am = F(h.jsx("path", { d: "M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5", strokeWidth: "1.25" }), me), im = F(h.jsx("path", { d: "M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5", strokeWidth: "1.25" }), me), MC = F("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z", { mirror: !0 });
F(h.jsx("path", { d: "M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834", strokeWidth: "1.5" }), me);
F("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");
F("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z", { width: 24, height: 24 });
F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1" }), h.jsx("path", { d: "M12 14v-11" }), h.jsx("path", { d: "M9 6l3 -3l3 3" })] }), K);
F(h.jsxs(h.Fragment, { children: [h.jsx("path", { fill: "currentColor", d: "M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z" }), h.jsx("path", { stroke: "currentColor", fill: "currentColor", d: "M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z" })] }), { width: 64, height: 64 });
F(h.jsx("path", { stroke: "currentColor", strokeWidth: "40", fill: "currentColor", d: "M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z" }), { width: 1024 });
var U8 = h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M12 10l0 10" }), h.jsx("path", { d: "M12 10l4 4" }), h.jsx("path", { d: "M12 10l-4 4" }), h.jsx("path", { d: "M4 4l16 0" })] }), m8 = h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M12 5l0 14" }), h.jsx("path", { d: "M16 9l-4 -4" }), h.jsx("path", { d: "M8 9l4 -4" })] }), rm = F(m8, K), lm = F(m8, { ...K, style: { transform: "rotate(180deg)" } }), sm = F(U8, K), om = F(U8, { ...K, style: { transform: "rotate(180deg)" } }), cm = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M3.333 3.333h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), dm = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M3.333 16.667h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), um = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M3.333 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), hm = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M16.667 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), CC = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M16.667 3.333v13.334M3.333 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), IC = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M3.333 3.333h13.334M3.333 16.667h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z" })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), fm = F(h.jsxs("g", { stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M1.667 10h2.916", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M8.333 10h3.334", strokeLinejoin: "round" }), h.jsx("path", { d: "M15.417 10h2.916", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z" })] }), me), pm = F(h.jsxs("g", { stroke: "currentColor", strokeWidth: "1.25", children: [h.jsx("path", { d: "M10 18.333v-2.916", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M10 11.667V8.333", strokeLinejoin: "round" }), h.jsx("path", { d: "M10 4.583V1.667", strokeLinecap: "round", strokeLinejoin: "round" }), h.jsx("path", { d: "M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z" })] }), me), g8 = F(h.jsxs("g", { strokeWidth: "1.5", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("circle", { cx: "9", cy: "7", r: "4" }), h.jsx("path", { d: "M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" }), h.jsx("path", { d: "M16 3.13a4 4 0 0 1 0 7.75" }), h.jsx("path", { d: "M21 21v-2a4 4 0 0 0 -3 -3.85" })] }), K);
F("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");
F("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");
var Ms = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: h.jsx("path", { d: "M15 5 5 15M5 5l10 10" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me);
F("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z", { mirror: !0 });
F("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z", { width: 24 });
F("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z", { width: 384, height: 512 });
var Um = Y.memo(({ theme: e }) => F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M25 26H111V111H25", fill: oa() }), h.jsx("path", { d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z", stroke: oa(), strokeWidth: "2" }), h.jsx("path", { d: "M100 100H160V160H100", fill: oa() }), h.jsx("path", { d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z", stroke: oa(), strokeWidth: "2" }), h.jsxs("g", { fill: d8(e), stroke: oa(), strokeWidth: "6", children: [h.jsx("rect", { x: "2.5", y: "2.5", width: "30", height: "30" }), h.jsx("rect", { x: "2.5", y: "149.5", width: "30", height: "30" }), h.jsx("rect", { x: "147.5", y: "149.5", width: "30", height: "30" }), h.jsx("rect", { x: "147.5", y: "2.5", width: "30", height: "30" })] })] }), { width: 182, height: 182, mirror: !0 })), mm = Y.memo(({ theme: e }) => F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M25 26H111V111H25", fill: oa() }), h.jsx("path", { d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z", stroke: oa(), strokeWidth: "2" }), h.jsx("path", { d: "M100 100H160V160H100", fill: oa() }), h.jsx("path", { d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z", stroke: oa(), strokeWidth: "2" }), h.jsxs("g", { fill: d8(e), stroke: oa(), strokeWidth: "6", children: [h.jsx("rect", { x: "2.5", y: "2.5", width: "30", height: "30" }), h.jsx("rect", { x: "78.5", y: "149.5", width: "30", height: "30" }), h.jsx("rect", { x: "147.5", y: "149.5", width: "30", height: "30" }), h.jsx("rect", { x: "147.5", y: "78.5", width: "30", height: "30" }), h.jsx("rect", { x: "105.5", y: "2.5", width: "30", height: "30" }), h.jsx("rect", { x: "2.5", y: "102.5", width: "30", height: "30" })] })] }), { width: 182, height: 182, mirror: !0 })), TC = F(h.jsx("g", { strokeWidth: 1.25, children: h.jsx("path", { d: "M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793" }) }), me), _C = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", stroke: "currentColor", strokeWidth: "1.25" }), h.jsx("mask", { id: "FillHachureIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: 2, y: 2, width: 16, height: 16, children: h.jsx("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", fill: "currentColor", stroke: "currentColor", strokeWidth: "1.25" }) }), h.jsx("g", { mask: "url(#FillHachureIcon)", children: h.jsx("path", { d: "M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) })] }), me), AC = F(h.jsxs(h.Fragment, { children: [h.jsxs("g", { clipPath: "url(#a)", children: [h.jsx("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", stroke: "currentColor", strokeWidth: "1.25" }), h.jsx("mask", { id: "FillCrossHatchIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: -1, y: -1, width: 22, height: 22, children: h.jsx("path", { d: "M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), h.jsx("g", { mask: "url(#FillCrossHatchIcon)", children: h.jsx("path", { d: "M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z", fill: "currentColor" }) })] }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), jC = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", children: h.jsx("path", { d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z", stroke: "currentColor", strokeWidth: "1.25" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), { ...me, fill: "currentColor" }), b8 = F(h.jsx(h.Fragment, { children: h.jsx("path", { d: "M4.167 10h11.666", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), me), DC = F(h.jsx("path", { d: "M5 10h10", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round" }), me), LC = F(h.jsx("path", { d: "M5 10h10", stroke: "currentColor", strokeWidth: "3.75", strokeLinecap: "round", strokeLinejoin: "round" }), me);
Y.memo(({ theme: e }) => F(h.jsx("path", { d: "M6 10H34", stroke: oa(), strokeWidth: 2, fill: "none", strokeLinecap: "round" }), { width: 40, height: 20 }));
var RC = F(h.jsxs("g", { strokeWidth: "2", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 12h2" }), h.jsx("path", { d: "M17 12h2" }), h.jsx("path", { d: "M11 12h2" })] }), K), PC = F(h.jsxs("g", { strokeWidth: "2", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 12v.01" }), h.jsx("path", { d: "M8 12v.01" }), h.jsx("path", { d: "M12 12v.01" }), h.jsx("path", { d: "M16 12v.01" }), h.jsx("path", { d: "M20 12v.01" })] }), K), NC = F(h.jsx("path", { d: "M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814", strokeWidth: "1.25" }), me), OC = F(h.jsx("path", { d: "M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43", strokeWidth: "1.25" }), me), $C = F(h.jsx("path", { d: "M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42", strokeWidth: "1.25" }), me), FC = F(h.jsxs("svg", { strokeWidth: "1.5", children: [h.jsx("path", { d: "M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10" }), h.jsx("path", { d: "M13.3333 3.33331V3.34331" }), h.jsx("path", { d: "M16.6667 3.33331V3.34331" }), h.jsx("path", { d: "M16.6667 6.66669V6.67669" }), h.jsx("path", { d: "M16.6667 10V10.01" }), h.jsx("path", { d: "M3.33334 13.3333V13.3433" }), h.jsx("path", { d: "M16.6667 13.3333V13.3433" }), h.jsx("path", { d: "M3.33334 16.6667V16.6767" }), h.jsx("path", { d: "M6.66666 16.6667V16.6767" }), h.jsx("path", { d: "M10 16.6667V16.6767" }), h.jsx("path", { d: "M13.3333 16.6667V16.6767" }), h.jsx("path", { d: "M16.6667 16.6667V16.6767" })] }), me), zC = F(h.jsxs("g", { strokeWidth: "1.5", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 12v-4a4 4 0 0 1 4 -4h4" }), h.jsx("line", { x1: "16", y1: "4", x2: "16", y2: "4.01" }), h.jsx("line", { x1: "20", y1: "4", x2: "20", y2: "4.01" }), h.jsx("line", { x1: "20", y1: "8", x2: "20", y2: "8.01" }), h.jsx("line", { x1: "20", y1: "12", x2: "20", y2: "12.01" }), h.jsx("line", { x1: "4", y1: "16", x2: "4", y2: "16.01" }), h.jsx("line", { x1: "20", y1: "16", x2: "20", y2: "16.01" }), h.jsx("line", { x1: "4", y1: "20", x2: "4", y2: "20.01" }), h.jsx("line", { x1: "8", y1: "20", x2: "8", y2: "20.01" }), h.jsx("line", { x1: "12", y1: "20", x2: "12", y2: "20.01" }), h.jsx("line", { x1: "16", y1: "20", x2: "16", y2: "20.01" }), h.jsx("line", { x1: "20", y1: "20", x2: "20", y2: "20.01" })] }), K), BC = F(h.jsxs("g", { stroke: "currentColor", opacity: 0.3, strokeWidth: 2, children: [h.jsx("path", { d: "M12 12l9 0" }), h.jsx("path", { d: "M3 9l6 6" }), h.jsx("path", { d: "M3 15l6 -6" })] }), K), HC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { transform: e ? "translate(40, 0) scale(-1, 1)" : "", stroke: "currentColor", strokeWidth: 2, fill: "none", children: [h.jsx("path", { d: "M34 10H6M34 10L27 5M34 10L27 15" }), h.jsx("path", { d: "M27.5 5L34.5 10L27.5 15" })] }), { width: 40, height: 20 })), XC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: [h.jsx("path", { d: "M32 10L6 10", strokeWidth: 2 }), h.jsx("circle", { r: "4", transform: "matrix(-1 0 0 1 30 10)" })] }), { width: 40, height: 20 })), WC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeWidth: 2, children: [h.jsx("path", { d: "M26 10L6 10" }), h.jsx("circle", { r: "4", transform: "matrix(-1 0 0 1 30 10)" })] }), { width: 40, height: 20 })), VC = Y.memo(({ flip: e = !1 }) => F(h.jsx("g", { transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: h.jsx("path", { d: "M34 10H5.99996M34 10L34 5M34 10L34 15", stroke: "currentColor", strokeWidth: 2, fill: "none" }) }), { width: 40, height: 20 })), GC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: [h.jsx("path", { d: "M32 10L6 10", strokeWidth: 2 }), h.jsx("path", { d: "M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5" })] }), { width: 40, height: 20 })), YC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeWidth: 2, strokeLinejoin: "round", children: [h.jsx("path", { d: "M6,9.5H27" }), h.jsx("path", { d: "M27,5L34,10L27,14Z", fill: "none" })] }), { width: 40, height: 20 })), ZC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeLinejoin: "round", strokeWidth: 2, children: [h.jsx("path", { d: "M6,9.5H20" }), h.jsx("path", { d: "M27,5L34,10L27,14L20,9.5Z" })] }), { width: 40, height: 20 })), KC = Y.memo(({ flip: e = !1 }) => F(h.jsxs("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeLinejoin: "round", strokeWidth: 2, children: [h.jsx("path", { d: "M6,9.5H20" }), h.jsx("path", { d: "M27,5L34,10L27,14L20,9.5Z" })] }), { width: 40, height: 20 })), qC = Y.memo(({ flip: e = !1 }) => F(h.jsx("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: h.jsx("path", { d: "M34,10 H6 M15,10 L7,5 M15,10 L7,15" }) }), { width: 40, height: 20 })), JC = Y.memo(({ flip: e = !1 }) => F(h.jsx("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: h.jsx("path", { d: "M34,10 H6 M15,10 L15,15 L15,5" }) }), { width: 40, height: 20 })), QC = Y.memo(({ flip: e = !1 }) => F(h.jsx("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: h.jsx("path", { d: "M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15" }) }), { width: 40, height: 20 })), eI = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", children: h.jsx("path", { d: "M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), tI = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", children: h.jsx("path", { d: "M5 16.667V3.333L10 15l5-11.667v13.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), nI = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", children: h.jsx("path", { d: "M5.833 3.333v13.334h8.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), aI = F(h.jsx(h.Fragment, { children: h.jsx("path", { d: "m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), me), Yu = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 7v-2h13v2" }), h.jsx("path", { d: "M10 5v14" }), h.jsx("path", { d: "M12 19h-4" }), h.jsx("path", { d: "M15 13v-1h6v1" }), h.jsx("path", { d: "M18 12v7" }), h.jsx("path", { d: "M17 19h2" })] }), K), iI = F(h.jsx(h.Fragment, { children: h.jsxs("g", { stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M7 12h10" }), h.jsx("path", { d: "M7 5v14" }), h.jsx("path", { d: "M17 5v14" }), h.jsx("path", { d: "M15 19h4" }), h.jsx("path", { d: "M15 5h4" }), h.jsx("path", { d: "M5 19h4" }), h.jsx("path", { d: "M5 5h4" })] }) }), K), au = F(h.jsx(h.Fragment, { children: h.jsx("g", { stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: h.jsx("path", { d: "M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334" }) }) }), me), v1 = F(h.jsxs(h.Fragment, { children: [h.jsx("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: h.jsx("path", { d: "M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667" }) }), h.jsx("defs", { children: h.jsx("clipPath", { id: "a", children: h.jsx("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), me), rI = F(h.jsxs("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), h.jsx("line", { x1: "4", y1: "12", x2: "12", y2: "12" }), h.jsx("line", { x1: "4", y1: "16", x2: "16", y2: "16" })] }), K), lI = F(h.jsxs("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), h.jsx("line", { x1: "8", y1: "12", x2: "16", y2: "12" }), h.jsx("line", { x1: "6", y1: "16", x2: "18", y2: "16" })] }), K), sI = F(h.jsxs("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), h.jsx("line", { x1: "10", y1: "12", x2: "20", y2: "12" }), h.jsx("line", { x1: "8", y1: "16", x2: "20", y2: "16" })] }), K), oI = Y.memo(({ theme: e }) => F(h.jsxs("g", { strokeWidth: "1.5", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "4", x2: "20", y2: "4" }), h.jsx("rect", { x: "9", y: "8", width: "6", height: "12", rx: "2" })] }), K)), cI = Y.memo(({ theme: e }) => F(h.jsxs("g", { strokeWidth: "2", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "20", x2: "20", y2: "20" }), h.jsx("rect", { x: "9", y: "4", width: "6", height: "12", rx: "2" })] }), K)), dI = Y.memo(({ theme: e }) => F(h.jsxs("g", { strokeWidth: "1.5", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("line", { x1: "4", y1: "12", x2: "9", y2: "12" }), h.jsx("line", { x1: "15", y1: "12", x2: "20", y2: "12" }), h.jsx("rect", { x: "9", y: "6", width: "6", height: "12", rx: "2" })] }), K)), v8 = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M21 19h-18l9 -15" }), h.jsx("path", { d: "M20.615 15.171h.015" }), h.jsx("path", { d: "M19.515 11.771h.015" }), h.jsx("path", { d: "M17.715 8.671h.015" }), h.jsx("path", { d: "M15.415 5.971h.015" })] }), K), uI = F(h.jsx("path", { d: "M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z", fill: "currentColor" }), { width: 640, height: 512 });
F(h.jsx("path", { d: "M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z" }));
var x8 = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5" }), h.jsx("path", { d: "M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5" }), h.jsx("path", { d: "M14 5.5a1.5 1.5 0 0 1 3 0v6.5" }), h.jsx("path", { d: "M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47" })] }), K), gm = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" }), h.jsx("path", { d: "M7 11l5 5l5 -5" }), h.jsx("path", { d: "M12 4l0 12" })] }), K), Z0 = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" }), h.jsx("path", { d: "M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2" })] }), K), hI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), h.jsx("path", { d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), h.jsx("path", { d: "M9.15 14.85l8.85 -10.85" }), h.jsx("path", { d: "M6 4l8.85 10.85" })] }), K), fI = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" }), h.jsx("path", { d: "M12 17l0 .01" }), h.jsx("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), K);
F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M7 4v16l13 -8z" })] }), K);
F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z", strokeWidth: "0", fill: "currentColor" })] }), K);
var pI = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 12l5 5l10 -10" })] }), K), UI = F(h.jsxs(h.Fragment, { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z" }), h.jsx("path", { d: "M12 9v4" }), h.jsx("path", { d: "M12 17h.01" })] }), K), mI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M11 7l6 6" }), h.jsx("path", { d: "M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z" })] }), K), gI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M12 3l-4 7h8z" }), h.jsx("path", { d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), h.jsx("path", { d: "M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" })] }), K), y8 = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 7l16 0" }), h.jsx("path", { d: "M4 17l16 0" }), h.jsx("path", { d: "M7 4l0 16" }), h.jsx("path", { d: "M17 4l0 16" })] }), K), w8 = F(h.jsx("path", { fill: "currentColor", d: "M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z" })), vd = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { d: "M4.16602 10H15.8327" }), h.jsx("path", { d: "M12.5 13.3333L15.8333 10" }), h.jsx("path", { d: "M12.5 6.66666L15.8333 9.99999" })] }), me), E8 = F(h.jsxs("g", { fill: "none", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", transform: "rotate(90 10 10)", children: [h.jsx("path", { clipRule: "evenodd", d: "m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z" }), h.jsx("path", { d: "m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13" })] }), 20), S8 = F(h.jsxs("g", { stroke: "currentColor", fill: "none", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z" }), h.jsx("path", { d: "M6 21l15 -15l-3 -3l-15 15l3 3" }), h.jsx("path", { d: "M15 6l3 3" }), h.jsx("path", { d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" }), h.jsx("path", { d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" })] }), K);
F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z" }), h.jsx("path", { d: "M6 21l15 -15l-3 -3l-15 15l3 3" }), h.jsx("path", { d: "M15 6l3 3" }), h.jsx("path", { d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" }), h.jsx("path", { d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" })] }), K);
F(h.jsxs("g", { stroke: "currentColor", fill: "none", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35" }), h.jsx("path", { d: "M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946" }), h.jsx("path", { d: "M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348" }), h.jsx("path", { d: "M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45" }), h.jsx("path", { d: "M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946" }), h.jsx("path", { d: "M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42" })] }), K);
var bI = F(h.jsxs("g", { stroke: "currentColor", fill: "none", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 8v-2a2 2 0 0 1 2 -2h2" }), h.jsx("path", { d: "M4 16v2a2 2 0 0 0 2 2h2" }), h.jsx("path", { d: "M16 4h2a2 2 0 0 1 2 2v2" }), h.jsx("path", { d: "M16 20h2a2 2 0 0 0 2 -2v-2" })] }), K), K0 = F(h.jsxs("g", { stroke: "currentColor", fill: "none", strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" }), h.jsx("path", { d: "M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" })] }), K), vI = F(h.jsxs("g", { stroke: "currentColor", fill: "none", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M10.585 10.587a2 2 0 0 0 2.829 2.828" }), h.jsx("path", { d: "M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87" }), h.jsx("path", { d: "M3 3l18 18" })] }), K);
F(h.jsxs("g", { stroke: "currentColor", fill: "none", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8" }), h.jsx("path", { d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8" }), h.jsx("path", { d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5" }), h.jsx("path", { d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0" }), h.jsx("path", { d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5" }), h.jsx("path", { d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10" })] }), K);
var xI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8" }), h.jsx("path", { d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8" }), h.jsx("path", { d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5" }), h.jsx("path", { d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0" }), h.jsx("path", { d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5" }), h.jsx("path", { d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10" })] }), K), sl = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" }), h.jsx("path", { d: "M21 21l-6 -6" })] }), K), yI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M20.984 12.53a9 9 0 1 0 -7.552 8.355" }), h.jsx("path", { d: "M12 7v5l3 3" }), h.jsx("path", { d: "M19 16l-2 3h4l-2 3" })] }), K), wI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z" }), h.jsx("path", { d: "M5 10a7 7 0 0 0 14 0" }), h.jsx("path", { d: "M8 21l8 0" }), h.jsx("path", { d: "M12 17l0 4" })] }), K), EI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 3l18 18" }), h.jsx("path", { d: "M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1" }), h.jsx("path", { d: "M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85" }), h.jsx("path", { d: "M8 21l8 0" }), h.jsx("path", { d: "M12 17l0 4" })] }), K), k8 = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11" })] }), K), SI = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z" }), h.jsx("path", { d: "M12 20v.01" }), h.jsx("path", { d: "M16 20v.01" }), h.jsx("path", { d: "M8 20v.01" }), h.jsx("path", { d: "M4 20v.01" }), h.jsx("path", { d: "M4 16v.01" }), h.jsx("path", { d: "M4 12v.01" }), h.jsx("path", { d: "M4 8v.01" }), h.jsx("path", { d: "M4 4v.01" }), h.jsx("path", { d: "M8 4v.01" }), h.jsx("path", { d: "M12 4v.01" }), h.jsx("path", { d: "M16 4v.01" }), h.jsx("path", { d: "M20 4v.01" }), h.jsx("path", { d: "M20 8v.01" }), h.jsx("path", { d: "M20 12v.01" }), h.jsx("path", { d: "M20 16v.01" }), h.jsx("path", { d: "M20 20v.01" })] }), K), kI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 3v18" }), h.jsx("path", { d: "M19 21v-18" }), h.jsx("path", { d: "M5 7h14" }), h.jsx("path", { d: "M5 15h14" }), h.jsx("path", { d: "M8 13v4" }), h.jsx("path", { d: "M11 13v4" }), h.jsx("path", { d: "M16 13v4" }), h.jsx("path", { d: "M14 5v4" }), h.jsx("path", { d: "M11 5v4" }), h.jsx("path", { d: "M8 5v4" }), h.jsx("path", { d: "M3 21h18" })] }), K), MI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 12l18 0" }), h.jsx("path", { d: "M7 16l10 0l-10 5l0 -5" }), h.jsx("path", { d: "M7 8l10 0l-10 -5l0 5" })] }), K), CI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M12 3l0 18" }), h.jsx("path", { d: "M16 7l0 10l5 0l-5 -10" }), h.jsx("path", { d: "M8 7l0 10l-5 0l5 -10" })] }), K), M8 = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" }), h.jsx("path", { d: "M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" }), h.jsx("path", { d: "M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" })] }), K), q0 = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" }), h.jsx("path", { d: "M22 22l-3 -3" }), h.jsx("path", { d: "M6 18h-1a2 2 0 0 1 -2 -2v-1" }), h.jsx("path", { d: "M3 11v-1" }), h.jsx("path", { d: "M3 6v-1a2 2 0 0 1 2 -2h1" }), h.jsx("path", { d: "M10 3h1" }), h.jsx("path", { d: "M15 3h1a2 2 0 0 1 2 2v1" })] }), K), II = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M14 3v4a1 1 0 0 0 1 1h4" }), h.jsx("path", { d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" }), h.jsx("path", { d: "M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75" }), h.jsx("path", { d: "M10 15l2 6l2 -6" }), h.jsx("path", { d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" })] }), K), TI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M14 3v4a1 1 0 0 0 1 1h4" }), h.jsx("path", { d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" }), h.jsx("path", { d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" }), h.jsx("path", { d: "M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6" }), h.jsx("path", { d: "M11 21v-6l3 6v-6" })] }), K), _I = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0" }), h.jsx("path", { d: "M4 8l5 0" }), h.jsx("path", { d: "M15 8l4 0" })] }), K), AI = F(h.jsxs("g", { strokeWidth: 1.25, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1" }), h.jsx("path", { d: "M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2" }), h.jsx("path", { d: "M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2" }), h.jsx("path", { d: "M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z" }), h.jsx("path", { d: "M16.746 16.726a3 3 0 1 0 .252 -5.555" })] }), K), jI = F(h.jsxs("g", { stroke: "currentColor", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4" })] }), { ...K, strokeWidth: 1.5 });
F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" }), h.jsx("path", { d: "M21 12h-13l3 -3" }), h.jsx("path", { d: "M11 15l-3 -3" })] }), K);
var DI = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z" }), h.jsx("path", { d: "M10 9l5 3l-5 3z" })] }), K), LI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M3 6h18" }), h.jsx("path", { d: "M3 12h18" }), h.jsx("path", { d: "M3 18h18" }), h.jsx("path", { d: "M6 3v18" }), h.jsx("path", { d: "M12 3v18" }), h.jsx("path", { d: "M18 3v18" })] }), K), RI = F(h.jsxs("g", { strokeWidth: 1.5, children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" }), h.jsx("path", { d: "M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" }), h.jsx("path", { d: "M17 5c-6.627 0 -12 5.373 -12 12" })] }), K), PI = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M6 18l12 -12" }), h.jsx("path", { d: "M18 10v-4h-4" })] }), K), NI = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7" }), h.jsx("path", { d: "M18 4l3 3l-3 3" })] }), K), OI = F(h.jsxs("g", { children: [h.jsx("path", { d: "M16,12L20,9L16,6" }), h.jsx("path", { d: "M6 20c0 -6.075 4.925 -11 11 -11h3" })] }), K), C8 = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M6 9l6 6l6 -6" })] }), K), $I = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M6 15l6 -6l6 6" })] }), K), FI = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M6 15l6 -6l6 6" })] }), K), bm = F(h.jsxs("g", { strokeWidth: "1.25", children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M8 5v10a1 1 0 0 0 1 1h10" }), h.jsx("path", { d: "M5 8h10a1 1 0 0 1 1 1v10" })] }), K), I8 = F(h.jsxs("g", { children: [h.jsx("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), h.jsx("path", { d: "M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), h.jsx("path", { d: "M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), h.jsx("path", { d: "M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), h.jsx("path", { d: "M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), h.jsx("path", { d: "M5 7l0 10" }), h.jsx("path", { d: "M7 5l10 0" }), h.jsx("path", { d: "M7 19l10 0" }), h.jsx("path", { d: "M19 7l0 10" })] }), K), iu = { [ut.Excalifont]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, icon: Ho }, [ut.Nunito]: { metrics: { unitsPerEm: 1e3, ascender: 1011, descender: -353, lineHeight: 1.35 }, icon: au }, [ut["Lilita One"]]: { metrics: { unitsPerEm: 1e3, ascender: 923, descender: -220, lineHeight: 1.15 }, icon: iI }, [ut["Comic Shanns"]]: { metrics: { unitsPerEm: 1e3, ascender: 750, descender: -250, lineHeight: 1.25 }, icon: v1 }, [ut.Virgil]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, icon: Ho, deprecated: !0 }, [ut.Helvetica]: { metrics: { unitsPerEm: 2048, ascender: 1577, descender: -471, lineHeight: 1.15 }, icon: au, deprecated: !0, local: !0 }, [ut.Cascadia]: { metrics: { unitsPerEm: 2048, ascender: 1900, descender: -480, lineHeight: 1.2 }, icon: v1, deprecated: !0 }, [ut["Liberation Sans"]]: { metrics: { unitsPerEm: 2048, ascender: 1854, descender: -434, lineHeight: 1.15 }, serverSide: !0 }, [Ol.Xiaolai]: { metrics: { unitsPerEm: 1e3, ascender: 880, descender: -144, lineHeight: 1.15 }, fallback: !0 }, [Ol["Segoe UI Emoji"]]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, local: !0, fallback: !0 } }, Nr = { LATIN: "U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD", LATIN_EXT: "U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF", CYRILIC_EXT: "U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F", CYRILIC: "U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116", VIETNAMESE: "U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB" }, J0 = "local:", zI = class extends Error {
  constructor(e = "Couldn't export canvas.", t = "CANVAS_ERROR") {
    super(), this.name = t, this.message = e;
  }
}, Zu = class extends DOMException {
  constructor(e = "Request Aborted") {
    super(e, "AbortError");
  }
}, zr = class extends Error {
  constructor(e = "Image Scene Data Error", t = "IMAGE_SCENE_DATA_ERROR") {
    super(e), j(this, "code"), this.name = "EncodingError", this.code = t;
  }
}, BI = class extends Error {
  constructor() {
    super(...arguments), j(this, "code", "ELEMENT_HAS_INVALID_INDEX");
  }
}, T8 = class extends Error {
  constructor(e = "Worker URL is not defined!", t = "WORKER_URL_NOT_DEFINED") {
    super(e), j(this, "code"), this.name = "WorkerUrlNotDefinedError", this.code = t;
  }
}, _8 = class extends Error {
  constructor(e = "Worker has to be in a separate chunk!", t = "WORKER_IN_THE_MAIN_CHUNK") {
    super(e), j(this, "code"), this.name = "WorkerInTheMainChunkError", this.code = t;
  }
}, vm = class extends Error {
  constructor(e) {
    super(e), this.name = "ExcalidrawError";
  }
}, HI = class {
  constructor(e) {
    j(this, "instance"), j(this, "debounceTerminate"), this.instance = new Worker(e, { type: "module" });
  }
}, XI = class A8 {
  constructor(t, n) {
    j(this, "idleWorkers", /* @__PURE__ */ new Set()), j(this, "workerUrl"), j(this, "workerTTL"), this.workerUrl = t, this.workerTTL = n.ttl || 1e3;
  }
  static create(t, n = {}) {
    if (!t) throw new T8();
    if (!import.meta.url || t.toString() === import.meta.url) throw new _8();
    return new A8(t, n);
  }
  async postMessage(t, n) {
    let a, i = Array.from(this.idleWorkers).shift();
    return i ? (this.idleWorkers.delete(i), a = i) : a = await this.createWorker(), new Promise((r, l) => {
      a.instance.onmessage = this.onMessageHandler(a, r), a.instance.onerror = this.onErrorHandler(a, l), a.instance.postMessage(t, n), a.debounceTerminate(() => l(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)));
    });
  }
  async clear() {
    for (let t of this.idleWorkers) t.debounceTerminate.cancel(), t.instance.terminate();
    this.idleWorkers.clear();
  }
  async createWorker() {
    let t = new HI(this.workerUrl);
    return t.debounceTerminate = is((n) => {
      t.instance.terminate(), this.idleWorkers.has(t) ? (this.idleWorkers.delete(t), console.debug("Job finished! Idle worker has been released from the pool.")) : n ? n() : console.error("Worker has been terminated!");
    }, this.workerTTL), t;
  }
  onMessageHandler(t, n) {
    return (a) => {
      t.debounceTerminate(), this.idleWorkers.add(t), n(a.data);
    };
  }
  onErrorHandler(t, n) {
    return (a) => {
      t.debounceTerminate(() => n(a)), t.debounceTerminate.flush(), this.clear();
    };
  }
}, xm = typeof Worker < "u", WI = async (e, t) => {
  let { Commands: n, subsetToBase64: a, toBase64: i } = await GI();
  return xm ? rs(async () => {
    try {
      let r = await YI(), l = e.slice(0), s = await r.postMessage({ command: n.Subset, arrayBuffer: l, codePoints: t }, { transfer: [l] });
      return i(s);
    } catch (r) {
      return xm = !1, TM() && (r instanceof T8 || r instanceof _8) || console.error("Failed to use workers for subsetting, falling back to the main thread.", r), a(e, t);
    }
  }) : a(e, t);
}, nf = null, af = null, VI = async () => (nf || (nf = import("./subset-worker.chunk-B8c3bapP.js")), nf), GI = async () => (af || (af = import("./subset-shared.chunk-hoYoFNAo.js")), af), rf = null, YI = () => (rf || (rf = rs(async () => {
  let { WorkerUrl: e } = await VI();
  return XI.create(e);
})), rf), j8 = class xd {
  constructor(t, n, a) {
    j(this, "urls"), j(this, "fontFace"), this.urls = xd.createUrls(n);
    let i = this.urls.map((r) => `url(${r}) ${xd.getFormat(r)}`).join(", ");
    this.fontFace = new FontFace(t, i, { display: "swap", style: "normal", weight: "400", ...a });
  }
  toCSS(t) {
    if (!this.getUnicodeRangeRegex().test(t)) return;
    let n = Array.from(t).map((a) => a.codePointAt(0));
    return this.getContent(n).then((a) => `@font-face { font-family: ${this.fontFace.family}; src: url(${a}); }`);
  }
  async getContent(t) {
    let n = 0, a = [];
    for (; n < this.urls.length; ) {
      let i = this.urls[n];
      try {
        let r = await this.fetchFont(i);
        return await WI(r, t);
      } catch (r) {
        a.push(`"${i.toString()}" returned error "${r}"`);
      }
      n++;
    }
    return console.error(`Failed to fetch font family "${this.fontFace.family}"`, JSON.stringify(a, void 0, 2)), this.urls.length ? this.urls[this.urls.length - 1].toString() : "";
  }
  fetchFont(t) {
    return rs(async () => {
      let n = await fetch(t, { cache: "force-cache", headers: { Accept: "font/woff2" } });
      if (!n.ok) {
        let a = t instanceof URL ? t.toString() : "dataurl";
        throw new Error(`Failed to fetch "${a}": ${n.statusText}`);
      }
      return await n.arrayBuffer();
    });
  }
  getUnicodeRangeRegex() {
    let t = this.fontFace.unicodeRange.split(/,\s*/).map((n) => {
      let [a, i] = n.replace("U+", "").split("-");
      return i ? `\\u{${a}}-\\u{${i}}` : `\\u{${a}}`;
    }).join("");
    return new RegExp(`[${t}]`, "u");
  }
  static createUrls(t) {
    if (t.startsWith("data")) return [t];
    if (t.startsWith(J0)) return [];
    if (t.startsWith("http")) return [new URL(t)];
    let n = t.replace(/^\/+/, ""), a = [];
    if (typeof window.EXCALIDRAW_ASSET_PATH == "string") {
      let i = this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);
      a.push(new URL(n, i));
    } else Array.isArray(window.EXCALIDRAW_ASSET_PATH) && window.EXCALIDRAW_ASSET_PATH.forEach((i) => {
      let r = this.normalizeBaseUrl(i);
      a.push(new URL(n, r));
    });
    return a.push(new URL(n, xd.ASSETS_FALLBACK_URL)), a;
  }
  static getFormat(t) {
    if (!(t instanceof URL)) return "";
    try {
      let n = new URL(t).pathname.split(".");
      return n.length === 1 ? "" : `format('${n.pop()}')`;
    } catch {
      return "";
    }
  }
  static normalizeBaseUrl(t) {
    var a;
    let n = t;
    return /^\.?\//.test(n) && (n = new URL(n.replace(/^\.?\/+/, ""), (a = window == null ? void 0 : window.location) == null ? void 0 : a.origin).toString()), n = `${n.replace(/\/+$/, "")}/`, n;
  }
};
j(j8, "ASSETS_FALLBACK_URL", `https://esm.sh/${`${ve.PKG_NAME}@${ve.PKG_VERSION}`}/dist/prod/`);
var ZI = j8, KI = "./fonts/Cascadia/CascadiaCode-Regular.woff2", qI = [{ uri: KI }], JI = "./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2", QI = "./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2", eT = "./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2", tT = "./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2", nT = [{ uri: JI, descriptors: { unicodeRange: "U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212" } }, { uri: QI, descriptors: { unicodeRange: "U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b" } }, { uri: eT, descriptors: { unicodeRange: "U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3" } }, { uri: tT, descriptors: { unicodeRange: "U+3bb" } }], aT = [{ uri: J0 }], iT = "./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2", rT = "./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2", lT = "./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2", sT = "./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2", oT = "./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2", cT = "./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2", dT = "./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2", uT = [{ uri: iT, descriptors: { unicodeRange: "U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212" } }, { uri: rT, descriptors: { unicodeRange: "U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113" } }, { uri: lT, descriptors: { unicodeRange: "U+400-45f,U+490-491,U+2116" } }, { uri: sT, descriptors: { unicodeRange: "U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7" } }, { uri: oT, descriptors: { unicodeRange: "U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02" } }, { uri: cT, descriptors: { unicodeRange: "U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef" } }, { uri: dT, descriptors: { unicodeRange: "U+300-301,U+303" } }], hT = [{ uri: J0 }], fT = "./fonts/Liberation/LiberationSans-Regular.woff2", pT = [{ uri: fT }], UT = "./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2", mT = "./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2", gT = [{ uri: mT, descriptors: { unicodeRange: Nr.LATIN_EXT } }, { uri: UT, descriptors: { unicodeRange: Nr.LATIN } }], bT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2", vT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2", xT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2", yT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2", wT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2", ET = [{ uri: yT, descriptors: { unicodeRange: Nr.CYRILIC_EXT, weight: "500" } }, { uri: xT, descriptors: { unicodeRange: Nr.CYRILIC, weight: "500" } }, { uri: wT, descriptors: { unicodeRange: Nr.VIETNAMESE, weight: "500" } }, { uri: vT, descriptors: { unicodeRange: Nr.LATIN_EXT, weight: "500" } }, { uri: bT, descriptors: { unicodeRange: Nr.LATIN, weight: "500" } }], ST = "./fonts/Virgil/Virgil-Regular.woff2", kT = [{ uri: ST }], MT = "./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2", CT = "./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2", IT = "./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2", TT = "./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2", _T = "./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2", AT = "./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2", jT = "./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2", DT = "./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2", LT = "./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2", RT = "./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2", PT = "./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2", NT = "./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2", OT = "./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2", $T = "./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2", FT = "./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2", zT = "./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2", BT = "./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2", HT = "./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2", XT = "./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2", WT = "./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2", VT = "./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2", GT = "./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2", YT = "./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2", ZT = "./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2", KT = "./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2", qT = "./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2", JT = "./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2", QT = "./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2", e_ = "./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2", t_ = "./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2", n_ = "./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2", a_ = "./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2", i_ = "./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2", r_ = "./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2", l_ = "./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2", s_ = "./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2", o_ = "./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2", c_ = "./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2", d_ = "./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2", u_ = "./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2", h_ = "./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2", f_ = "./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2", p_ = "./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2", U_ = "./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2", m_ = "./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2", g_ = "./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2", b_ = "./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2", v_ = "./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2", x_ = "./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2", y_ = "./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2", w_ = "./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2", E_ = "./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2", S_ = "./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2", k_ = "./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2", M_ = "./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2", C_ = "./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2", I_ = "./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2", T_ = "./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2", __ = "./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2", A_ = "./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2", j_ = "./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2", D_ = "./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2", L_ = "./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2", R_ = "./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2", P_ = "./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2", N_ = "./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2", O_ = "./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2", $_ = "./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2", F_ = "./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2", z_ = "./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2", B_ = "./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2", H_ = "./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2", X_ = "./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2", W_ = "./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2", V_ = "./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2", G_ = "./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2", Y_ = "./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2", Z_ = "./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2", K_ = "./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2", q_ = "./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2", J_ = "./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2", Q_ = "./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2", eA = "./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2", tA = "./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2", nA = "./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2", aA = "./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2", iA = "./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2", rA = "./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2", lA = "./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2", sA = "./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2", oA = "./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2", cA = "./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2", dA = "./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2", uA = "./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2", hA = "./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2", fA = "./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2", pA = "./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2", UA = "./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2", mA = "./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2", gA = "./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2", bA = "./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2", vA = "./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2", xA = "./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2", yA = "./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2", wA = "./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2", EA = "./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2", SA = "./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2", kA = "./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2", MA = "./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2", CA = "./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2", IA = "./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2", TA = "./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2", _A = "./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2", AA = "./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2", jA = "./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2", DA = "./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2", LA = "./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2", RA = "./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2", PA = "./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2", NA = "./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2", OA = "./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2", $A = "./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2", FA = "./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2", zA = "./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2", BA = "./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2", HA = "./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2", XA = "./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2", WA = "./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2", VA = "./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2", GA = "./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2", YA = "./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2", ZA = "./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2", KA = "./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2", qA = "./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2", JA = "./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2", QA = "./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2", ej = "./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2", tj = "./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2", nj = "./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2", aj = "./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2", ij = "./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2", rj = "./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2", lj = "./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2", sj = "./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2", oj = "./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2", cj = "./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2", dj = "./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2", uj = "./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2", hj = "./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2", fj = "./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2", pj = "./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2", Uj = "./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2", mj = "./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2", gj = "./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2", bj = "./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2", vj = "./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2", xj = "./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2", yj = "./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2", wj = "./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2", Ej = "./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2", Sj = "./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2", kj = "./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2", Mj = "./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2", Cj = "./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2", Ij = "./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2", Tj = "./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2", _j = "./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2", Aj = "./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2", jj = "./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2", Dj = "./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2", Lj = "./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2", Rj = "./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2", Pj = "./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2", Nj = "./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2", Oj = "./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2", $j = "./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2", Fj = "./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2", zj = "./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2", Bj = "./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2", Hj = "./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2", Xj = "./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2", Wj = "./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2", Vj = "./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2", Gj = "./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2", Yj = "./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2", Zj = "./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2", Kj = "./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2", qj = "./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2", Jj = "./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2", Qj = "./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2", eD = "./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2", tD = "./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2", nD = "./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2", aD = "./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2", iD = "./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2", rD = "./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2", lD = "./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2", sD = "./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2", oD = "./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2", cD = "./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2", dD = "./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2", uD = "./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2", hD = "./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2", fD = "./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2", pD = "./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2", UD = "./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2", mD = "./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2", gD = "./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2", bD = "./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2", vD = [{ uri: MT, descriptors: { unicodeRange: "U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a" } }, { uri: CT, descriptors: { unicodeRange: "U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee" } }, { uri: IT, descriptors: { unicodeRange: "U+d7eb-d7fb,U+f900-f9b7" } }, { uri: TT, descriptors: { unicodeRange: "U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea" } }, { uri: _T, descriptors: { unicodeRange: "U+d609-d6f1" } }, { uri: AT, descriptors: { unicodeRange: "U+d520-d608" } }, { uri: jT, descriptors: { unicodeRange: "U+d437-d51f" } }, { uri: DT, descriptors: { unicodeRange: "U+d34e-d436" } }, { uri: LT, descriptors: { unicodeRange: "U+d265-d34d" } }, { uri: RT, descriptors: { unicodeRange: "U+d17c-d264" } }, { uri: PT, descriptors: { unicodeRange: "U+d093-d17b" } }, { uri: NT, descriptors: { unicodeRange: "U+cfaa-d092" } }, { uri: OT, descriptors: { unicodeRange: "U+cec1-cfa9" } }, { uri: $T, descriptors: { unicodeRange: "U+cdd8-cec0" } }, { uri: FT, descriptors: { unicodeRange: "U+ccf1-cdd7" } }, { uri: zT, descriptors: { unicodeRange: "U+cc08-ccf0" } }, { uri: BT, descriptors: { unicodeRange: "U+cb43-cc07" } }, { uri: HT, descriptors: { unicodeRange: "U+ca83-cb42" } }, { uri: XT, descriptors: { unicodeRange: "U+c9a1-ca82" } }, { uri: WT, descriptors: { unicodeRange: "U+c8b8-c9a0" } }, { uri: VT, descriptors: { unicodeRange: "U+c7cf-c8b7" } }, { uri: GT, descriptors: { unicodeRange: "U+c6e6-c7ce" } }, { uri: YT, descriptors: { unicodeRange: "U+c5fd-c6e5" } }, { uri: ZT, descriptors: { unicodeRange: "U+c514-c5fc" } }, { uri: KT, descriptors: { unicodeRange: "U+c42b-c513" } }, { uri: qT, descriptors: { unicodeRange: "U+c341-c34e,U+c350-c42a" } }, { uri: JT, descriptors: { unicodeRange: "U+c258-c340" } }, { uri: QT, descriptors: { unicodeRange: "U+c16f-c257" } }, { uri: e_, descriptors: { unicodeRange: "U+c086-c16e" } }, { uri: t_, descriptors: { unicodeRange: "U+bf9d-c085" } }, { uri: n_, descriptors: { unicodeRange: "U+beb4-bf9c" } }, { uri: a_, descriptors: { unicodeRange: "U+bdcb-beb3" } }, { uri: i_, descriptors: { unicodeRange: "U+bce2-bdca" } }, { uri: r_, descriptors: { unicodeRange: "U+bbf9-bce1" } }, { uri: l_, descriptors: { unicodeRange: "U+bb10-bbf8" } }, { uri: s_, descriptors: { unicodeRange: "U+ba27-bb0f" } }, { uri: o_, descriptors: { unicodeRange: "U+b93e-ba26" } }, { uri: c_, descriptors: { unicodeRange: "U+b855-b93d" } }, { uri: d_, descriptors: { unicodeRange: "U+b76c-b854" } }, { uri: u_, descriptors: { unicodeRange: "U+b683-b76b" } }, { uri: h_, descriptors: { unicodeRange: "U+b59a-b682" } }, { uri: f_, descriptors: { unicodeRange: "U+b4b1-b599" } }, { uri: p_, descriptors: { unicodeRange: "U+11fb-11ff,U+b3cd-b4b0" } }, { uri: U_, descriptors: { unicodeRange: "U+11e6-11fa,U+b2f9-b3cc" } }, { uri: m_, descriptors: { unicodeRange: "U+11d1-11e5,U+b225-b2f8" } }, { uri: g_, descriptors: { unicodeRange: "U+11bc-11d0,U+b151-b224" } }, { uri: b_, descriptors: { unicodeRange: "U+11a7-11bb,U+b07d-b150" } }, { uri: v_, descriptors: { unicodeRange: "U+1191-11a6,U+afaa-b07c" } }, { uri: x_, descriptors: { unicodeRange: "U+117c-1190,U+aed6-afa9" } }, { uri: y_, descriptors: { unicodeRange: "U+1167-117b,U+ae02-aed5" } }, { uri: w_, descriptors: { unicodeRange: "U+1152-115e,U+1160-1166,U+ad2d-ae01" } }, { uri: E_, descriptors: { unicodeRange: "U+113d-1151,U+ac59-ad2c" } }, { uri: S_, descriptors: { unicodeRange: "U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58" } }, { uri: k_, descriptors: { unicodeRange: "U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d" } }, { uri: M_, descriptors: { unicodeRange: "U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693" } }, { uri: C_, descriptors: { unicodeRange: "U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee" } }, { uri: I_, descriptors: { unicodeRange: "U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b" } }, { uri: T_, descriptors: { unicodeRange: "U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158" } }, { uri: __, descriptors: { unicodeRange: "U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a" } }, { uri: A_, descriptors: { unicodeRange: "U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46" } }, { uri: j_, descriptors: { unicodeRange: "U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02" } }, { uri: D_, descriptors: { unicodeRange: "U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b" } }, { uri: L_, descriptors: { unicodeRange: "U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63" } }, { uri: R_, descriptors: { unicodeRange: "U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb" } }, { uri: P_, descriptors: { unicodeRange: "U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2" } }, { uri: N_, descriptors: { unicodeRange: "U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6" } }, { uri: O_, descriptors: { unicodeRange: "U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f" } }, { uri: $_, descriptors: { unicodeRange: "U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455" } }, { uri: F_, descriptors: { unicodeRange: "U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0" } }, { uri: z_, descriptors: { unicodeRange: "U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2" } }, { uri: B_, descriptors: { unicodeRange: "U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057" } }, { uri: H_, descriptors: { unicodeRange: "U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94" } }, { uri: X_, descriptors: { unicodeRange: "U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13" } }, { uri: W_, descriptors: { unicodeRange: "U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc" } }, { uri: V_, descriptors: { unicodeRange: "U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f" } }, { uri: G_, descriptors: { unicodeRange: "U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c" } }, { uri: Y_, descriptors: { unicodeRange: "U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6" } }, { uri: Z_, descriptors: { unicodeRange: "U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad" } }, { uri: K_, descriptors: { unicodeRange: "U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588" } }, { uri: q_, descriptors: { unicodeRange: "U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491" } }, { uri: J_, descriptors: { unicodeRange: "U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177" } }, { uri: Q_, descriptors: { unicodeRange: "U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371" } }, { uri: eA, descriptors: { unicodeRange: "U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1" } }, { uri: tA, descriptors: { unicodeRange: "U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4" } }, { uri: nA, descriptors: { unicodeRange: "U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72" } }, { uri: aA, descriptors: { unicodeRange: "U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a" } }, { uri: iA, descriptors: { unicodeRange: "U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965" } }, { uri: rA, descriptors: { unicodeRange: "U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f" } }, { uri: lA, descriptors: { unicodeRange: "U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7" } }, { uri: sA, descriptors: { unicodeRange: "U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc" } }, { uri: oA, descriptors: { unicodeRange: "U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f" } }, { uri: cA, descriptors: { unicodeRange: "U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359" } }, { uri: dA, descriptors: { unicodeRange: "U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e" } }, { uri: uA, descriptors: { unicodeRange: "U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4" } }, { uri: hA, descriptors: { unicodeRange: "U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf" } }, { uri: fA, descriptors: { unicodeRange: "U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3" } }, { uri: pA, descriptors: { unicodeRange: "U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90" } }, { uri: UA, descriptors: { unicodeRange: "U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f" } }, { uri: mA, descriptors: { unicodeRange: "U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936" } }, { uri: gA, descriptors: { unicodeRange: "U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842" } }, { uri: bA, descriptors: { unicodeRange: "U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf" } }, { uri: vA, descriptors: { unicodeRange: "U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a" } }, { uri: xA, descriptors: { unicodeRange: "U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285" } }, { uri: yA, descriptors: { unicodeRange: "U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8" } }, { uri: wA, descriptors: { unicodeRange: "U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100" } }, { uri: EA, descriptors: { unicodeRange: "U+49d5-4a77" } }, { uri: SA, descriptors: { unicodeRange: "U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb" } }, { uri: kA, descriptors: { unicodeRange: "U+4933-49d4" } }, { uri: MA, descriptors: { unicodeRange: "U+487a-4932" } }, { uri: CA, descriptors: { unicodeRange: "U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93" } }, { uri: IA, descriptors: { unicodeRange: "U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a" } }, { uri: TA, descriptors: { unicodeRange: "U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d" } }, { uri: _A, descriptors: { unicodeRange: "U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364" } }, { uri: AA, descriptors: { unicodeRange: "U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87" } }, { uri: jA, descriptors: { unicodeRange: "U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed" } }, { uri: DA, descriptors: { unicodeRange: "U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58" } }, { uri: LA, descriptors: { unicodeRange: "U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49" } }, { uri: RA, descriptors: { unicodeRange: "U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0" } }, { uri: PA, descriptors: { unicodeRange: "U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750" } }, { uri: NA, descriptors: { unicodeRange: "U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1" } }, { uri: OA, descriptors: { unicodeRange: "U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752" } }, { uri: $A, descriptors: { unicodeRange: "U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10" } }, { uri: FA, descriptors: { unicodeRange: "U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b" } }, { uri: zA, descriptors: { unicodeRange: "U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d" } }, { uri: BA, descriptors: { unicodeRange: "U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e" } }, { uri: HA, descriptors: { unicodeRange: "U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402" } }, { uri: XA, descriptors: { unicodeRange: "U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64" } }, { uri: WA, descriptors: { unicodeRange: "U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8" } }, { uri: VA, descriptors: { unicodeRange: "U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa" } }, { uri: GA, descriptors: { unicodeRange: "U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1" } }, { uri: YA, descriptors: { unicodeRange: "U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e" } }, { uri: ZA, descriptors: { unicodeRange: "U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1" } }, { uri: KA, descriptors: { unicodeRange: "U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d" } }, { uri: qA, descriptors: { unicodeRange: "U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f" } }, { uri: JA, descriptors: { unicodeRange: "U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b" } }, { uri: QA, descriptors: { unicodeRange: "U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b" } }, { uri: ej, descriptors: { unicodeRange: "U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3" } }, { uri: tj, descriptors: { unicodeRange: "U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d" } }, { uri: nj, descriptors: { unicodeRange: "U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213" } }, { uri: aj, descriptors: { unicodeRange: "U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251" } }, { uri: ij, descriptors: { unicodeRange: "U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1" } }, { uri: rj, descriptors: { unicodeRange: "U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191" } }, { uri: lj, descriptors: { unicodeRange: "U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0" } }, { uri: sj, descriptors: { unicodeRange: "U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d" } }, { uri: oj, descriptors: { unicodeRange: "U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd" } }, { uri: cj, descriptors: { unicodeRange: "U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80" } }, { uri: dj, descriptors: { unicodeRange: "U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51" } }, { uri: uj, descriptors: { unicodeRange: "U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85" } }, { uri: hj, descriptors: { unicodeRange: "U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b" } }, { uri: fj, descriptors: { unicodeRange: "U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87" } }, { uri: pj, descriptors: { unicodeRange: "U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c" } }, { uri: Uj, descriptors: { unicodeRange: "U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89" } }, { uri: mj, descriptors: { unicodeRange: "U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e" } }, { uri: gj, descriptors: { unicodeRange: "U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b" } }, { uri: bj, descriptors: { unicodeRange: "U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10" } }, { uri: vj, descriptors: { unicodeRange: "U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b" } }, { uri: xj, descriptors: { unicodeRange: "U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd" } }, { uri: yj, descriptors: { unicodeRange: "U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef" } }, { uri: wj, descriptors: { unicodeRange: "U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a" } }, { uri: Ej, descriptors: { unicodeRange: "U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc" } }, { uri: Sj, descriptors: { unicodeRange: "U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4" } }, { uri: kj, descriptors: { unicodeRange: "U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26" } }, { uri: Mj, descriptors: { unicodeRange: "U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f" } }, { uri: Cj, descriptors: { unicodeRange: "U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a" } }, { uri: Ij, descriptors: { unicodeRange: "U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f" } }, { uri: Tj, descriptors: { unicodeRange: "U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20" } }, { uri: _j, descriptors: { unicodeRange: "U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23" } }, { uri: Aj, descriptors: { unicodeRange: "U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8" } }, { uri: jj, descriptors: { unicodeRange: "U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84" } }, { uri: Dj, descriptors: { unicodeRange: "U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50" } }, { uri: Lj, descriptors: { unicodeRange: "U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede" } }, { uri: Rj, descriptors: { unicodeRange: "U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1" } }, { uri: Pj, descriptors: { unicodeRange: "U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec" } }, { uri: Nj, descriptors: { unicodeRange: "U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8" } }, { uri: Oj, descriptors: { unicodeRange: "U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02" } }, { uri: $j, descriptors: { unicodeRange: "U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73" } }, { uri: Fj, descriptors: { unicodeRange: "U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568" } }, { uri: zj, descriptors: { unicodeRange: "U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770" } }, { uri: Bj, descriptors: { unicodeRange: "U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba" } }, { uri: Hj, descriptors: { unicodeRange: "U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c" } }, { uri: Xj, descriptors: { unicodeRange: "U+92ef-933d,U+933f-9369,U+936b-9388" } }, { uri: Wj, descriptors: { unicodeRange: "U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed" } }, { uri: Vj, descriptors: { unicodeRange: "U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985" } }, { uri: Gj, descriptors: { unicodeRange: "U+4b0b-4ba0" } }, { uri: Yj, descriptors: { unicodeRange: "U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d" } }, { uri: Zj, descriptors: { unicodeRange: "U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa" } }, { uri: Kj, descriptors: { unicodeRange: "U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4" } }, { uri: qj, descriptors: { unicodeRange: "U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a" } }, { uri: Jj, descriptors: { unicodeRange: "U+4a78-4b0a" } }, { uri: Qj, descriptors: { unicodeRange: "U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf" } }, { uri: eD, descriptors: { unicodeRange: "U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef" } }, { uri: tD, descriptors: { unicodeRange: "U+99c9-9a53" } }, { uri: nD, descriptors: { unicodeRange: "U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603" } }, { uri: aD, descriptors: { unicodeRange: "U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053" } }, { uri: iD, descriptors: { unicodeRange: "U+4ba1-4c2c" } }, { uri: rD, descriptors: { unicodeRange: "U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e" } }, { uri: lD, descriptors: { unicodeRange: "U+9d1a-9da1" } }, { uri: sD, descriptors: { unicodeRange: "U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8" } }, { uri: oD, descriptors: { unicodeRange: "U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0" } }, { uri: cD, descriptors: { unicodeRange: "U+4cad-4d2f" } }, { uri: dD, descriptors: { unicodeRange: "U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19" } }, { uri: uD, descriptors: { unicodeRange: "U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410" } }, { uri: hD, descriptors: { unicodeRange: "U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86" } }, { uri: fD, descriptors: { unicodeRange: "U+9bd0-9c4a" } }, { uri: pD, descriptors: { unicodeRange: "U+4c2d-4cac" } }, { uri: UD, descriptors: { unicodeRange: "U+4d30-4dab" } }, { uri: mD, descriptors: { unicodeRange: "U+9411-943d,U+943f-946a,U+946c-9484" } }, { uri: gD, descriptors: { unicodeRange: "U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94" } }, { uri: bD, descriptors: { unicodeRange: "U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b" } }], Yi = class Ze {
  constructor(t) {
    j(this, "scene"), j(this, "getSceneFamilies", () => Ze.getUniqueFamilies(this.scene.getNonDeletedElements())), j(this, "onLoaded", (n) => {
      let a = !0;
      for (let l of n) {
        let s = `${l.family}-${l.style}-${l.weight}-${l.unicodeRange}`;
        Ze.loadedFontsCache.has(s) || (Ze.loadedFontsCache.add(s), a = !1);
      }
      if (a) return;
      let i = !1, r = this.scene.getNonDeletedElementsMap();
      for (let l of this.scene.getNonDeletedElements()) if (q(l)) {
        i = !0, pt.delete(l), mc.clearCache(Ye(l));
        let s = Vt(l, r);
        s && pt.delete(s);
      }
      i && this.scene.triggerUpdate();
    }), j(this, "loadSceneFonts", async () => {
      let n = this.getSceneFamilies(), a = Ze.getCharsPerFamily(this.scene.getNonDeletedElements());
      return Ze.loadFontFaces(n, a);
    }), this.scene = t;
  }
  static get registered() {
    return Ze._registered ? Ze._initialized || (Ze._registered = new Map([...Ze.init().entries(), ...Ze._registered.entries()])) : Ze._registered = Ze.init(), Ze._registered;
  }
  get registered() {
    return Ze.registered;
  }
  static async generateFontFaceDeclarations(t) {
    let n = Ze.getUniqueFamilies(t), a = Ze.getCharsPerFamily(t), i = n.find((c) => $b(c).includes(Nl));
    if (i) {
      let c = Ze.getCharacters(a, i);
      if (HM(c)) {
        let d = Ol[Nl];
        a[d] = new Set(c), n.unshift(Ol[Nl]);
      }
    }
    let r = Ze.fontFacesStylesGenerator(n, a), l = 3, s = await new J2(r, l).all();
    return Array.from(new Set(s));
  }
  static async loadFontFaces(t, n) {
    for (let { fontFaces: r, metadata: l } of Ze.registered.values()) if (!l.local) for (let { fontFace: s } of r) window.document.fonts.has(s) || window.document.fonts.add(s);
    let a = Ze.fontFacesLoader(t, n), i = 10;
    return (await new J2(a, i).all()).flat().filter(Boolean);
  }
  static *fontFacesLoader(t, n) {
    for (let [a, i] of t.entries()) {
      let r = Ye({ fontFamily: i, fontSize: 16 }), l = Ze.getCharacters(n, i);
      window.document.fonts.check(r, l) || (yield rs(async () => {
        var s;
        try {
          let c = await window.document.fonts.load(r, l);
          return [a, c];
        } catch (c) {
          console.error(`Failed to load font "${r}" from urls "${(s = Ze.registered.get(i)) == null ? void 0 : s.fontFaces.map((d) => d.urls)}"`, c);
        }
      }));
    }
  }
  static *fontFacesStylesGenerator(t, n) {
    for (let [a, i] of t.entries()) {
      let { fontFaces: r, metadata: l } = Ze.registered.get(i) ?? {};
      if (!Array.isArray(r)) {
        console.error(`Couldn't find registered fonts for font-family "${i}"`, Ze.registered);
        continue;
      }
      if (!(l != null && l.local)) for (let [s, c] of r.entries()) yield rs(async () => {
        try {
          let d = Ze.getCharacters(n, i), o = await c.toCSS(d);
          return o ? [a * 1e4 + s, o] : void 0;
        } catch (d) {
          console.error(`Couldn't transform font-face to css for family "${c.fontFace.family}"`, d);
        }
      });
    }
  }
  static register(t, n, ...a) {
    let i = ut[t] ?? Ol[t];
    return this.registered.get(i) || this.registered.set(i, { metadata: n, fontFaces: a.map(({ uri: r, descriptors: l }) => new ZI(t, r, l)) }), this.registered;
  }
  static init() {
    let t = { registered: /* @__PURE__ */ new Map() }, n = (a, ...i) => {
      let r = ut[a] ?? Ol[a], l = iu[r] ?? iu[ut.Excalifont];
      Ze.register.call(t, a, l, ...i);
    };
    return n("Cascadia", ...qI), n("Comic Shanns", ...nT), n("Excalifont", ...uT), n("Helvetica", ...hT), n("Liberation Sans", ...pT), n("Lilita One", ...gT), n("Nunito", ...ET), n("Virgil", ...kT), n(Nl, ...vD), n($o, ...aT), Ze._initialized = !0, t.registered;
  }
  static getUniqueFamilies(t) {
    return Array.from(t.reduce((n, a) => (q(a) && n.add(a.fontFamily), n), /* @__PURE__ */ new Set()));
  }
  static getCharsPerFamily(t) {
    let n = {};
    for (let a of t) if (q(a)) for (let i of a.originalText) n[a.fontFamily] || (n[a.fontFamily] = /* @__PURE__ */ new Set()), n[a.fontFamily].add(i);
    return n;
  }
  static getCharacters(t, n) {
    return t[n] ? Array.from(t[n]).join("") : "";
  }
  static getAllFamilies() {
    return Array.from(Ze.registered.keys());
  }
};
j(Yi, "loadedFontsCache", /* @__PURE__ */ new Set()), j(Yi, "_registered"), j(Yi, "_initialized", !1), j(Yi, "loadElementsFonts", async (e) => {
  let t = Yi.getUniqueFamilies(e), n = Yi.getCharsPerFamily(e);
  return Yi.loadFontFaces(t, n);
});
var wi = Yi, D8 = (e, t, n) => {
  var c;
  let { unitsPerEm: a, ascender: i, descender: r } = ((c = wi.registered.get(e)) == null ? void 0 : c.metadata.metrics) || iu[ut.Virgil].metrics, l = t / a, s = (n - l * i + l * r) / 2;
  return l * i + s;
}, ol = (e) => {
  var n;
  let { lineHeight: t } = ((n = wi.registered.get(e)) == null ? void 0 : n.metadata.metrics) || iu[ut.Excalifont].metrics;
  return t;
}, L8 = (e) => {
  let { angle: t, width: n, height: a, x: i, y: r } = e, l = i + n / 2, s = r + a / 2, c = k(l, s), d;
  return e.type === "diamond" ? d = G2(B(k(l, r), c, t), B(k(i + n, s), c, t), B(k(l, r + a), c, t), B(k(i, s), c, t)) : d = G2(B(k(i, r), c, t), B(k(i + n, r), c, t), B(k(i + n, r + a), c, t), B(k(i, r + a), c, t)), { type: "polygon", data: d };
}, xD = (e, t, n = 10) => {
  let [a, i, r, l, s, c] = Ue(e, t, !0);
  a -= n, r += n, i -= n, l += n;
  let d = k(s, c), o = B(k(a, i), d, e.angle), u = B(k(r, i), d, e.angle), f = B(k(a, l), d, e.angle), p = B(k(r, l), d, e.angle);
  return { type: "polygon", data: [o, u, p, f] };
}, yD = (e) => {
  let { width: t, height: n, angle: a, x: i, y: r } = e;
  return { type: "ellipse", data: { center: k(i + t / 2, r + n / 2), angle: a, halfWidth: t / 2, halfHeight: n / 2 } };
}, yr = (e) => {
  if (!e) return [];
  for (let t of e.sets) if (t.type === "path") return t.ops;
  return e.sets[0].ops;
}, wD = (e, t = k(0, 0), n, a) => {
  let i = (c) => B(k(c[0] + t[0], c[1] + t[1]), a, n), r = yr(e), l = [], s = k(0, 0);
  for (let c of r) {
    if (c.op === "move") {
      let d = O0(c.data);
      rn(d != null, "Ops data is not a point"), s = i(d);
    }
    if (c.op === "bcurveTo") {
      let d = i(k(c.data[0], c.data[1])), o = i(k(c.data[2], c.data[3])), u = i(k(c.data[4], c.data[5]));
      l.push(bi(s, d, o, u)), s = u;
    }
  }
  return { type: "polycurve", data: l };
}, ED = (e) => {
  let t = e[0], n = [];
  for (let a = 1; a < e.length; a++) {
    let i = e[a];
    n.push(se(t, i)), t = i;
  }
  return n;
}, SD = (e, t, n = !1) => {
  let a = (r) => B(ke(nr(le(r), Zt(e.x, e.y))), t, e.angle), i = ED(e.points.map((r) => a(r)));
  return n ? { type: "polygon", data: Qd(i.flat()) } : { type: "polyline", data: i };
}, kD = (e, t, n = k(0, 0), a, i) => {
  let r = (o) => B(k(o[0] + n[0], o[1] + n[1]), i, a);
  if (e.roundness === null) return { type: "polygon", data: Qd(e.points.map((o) => r(o))) };
  let l = yr(t), s = [], c = !1;
  for (let o of l) o.op === "move" ? (c = !c, c && s.push(k(o.data[0], o.data[1]))) : o.op === "bcurveTo" ? c && (s.push(k(o.data[0], o.data[1])), s.push(k(o.data[2], o.data[3])), s.push(k(o.data[4], o.data[5]))) : o.op === "lineTo" && c && s.push(k(o.data[0], o.data[1]));
  let d = ak(s, 10, 5).map((o) => r(o));
  return { type: "polygon", data: Qd(d) };
}, MD = (e, t) => {
  let { angle: n, halfWidth: a, halfHeight: i, center: r } = t, l = a, s = i, c = nr(le(e), bt(le(r), -1)), [d, o] = B(ke(c), k(0, 0), -n), u = Math.abs(d), f = Math.abs(o), p = 0.707, U = 0.707;
  for (let b = 0; b < 3; b++) {
    let v = l * p, x = s * U, y = (l * l - s * s) * p ** 3 / l, E = (s * s - l * l) * U ** 3 / s, S = v - y, w = x - E, M = u - y, I = f - E, T = Math.hypot(w, S), _ = Math.hypot(I, M);
    p = Math.min(1, Math.max(0, (M * T / _ + y) / l)), U = Math.min(1, Math.max(0, (I * T / _ + E) / s));
    let A = Math.hypot(U, p);
    p /= A, U /= A;
  }
  let [m, g] = [l * p * Math.sign(d), s * U * Math.sign(o)];
  return Pe(k(d, o), k(m, g));
}, CD = (e, t, n = 1e-4) => MD(e, t) <= n, ID = (e, t) => {
  let { center: n, angle: a, halfWidth: i, halfHeight: r } = t, l = nr(le(e), bt(le(n), -1)), [s, c] = B(ke(l), k(0, 0), -a);
  return s / i * (s / i) + c / r * (c / r) <= 1;
}, x1 = (e, t, n = 0) => {
  switch (t.type) {
    case "polygon":
      return pM(e, t.data, n);
    case "ellipse":
      return CD(e, t.data, n);
    case "line":
      return al(e, t.data, n);
    case "polyline":
      return P8(e, t.data, n);
    case "curve":
      return R8(e, t.data, n);
    case "polycurve":
      return TD(e, t.data, n);
    default:
      throw Error(`shape ${t} is not implemented`);
  }
}, ru = (e, t) => {
  switch (t.type) {
    case "polygon":
      return Y2(e, t.data);
    case "line":
      return !1;
    case "curve":
      return !1;
    case "ellipse":
      return ID(e, t.data);
    case "polyline": {
      let n = Qd(t.data.flat());
      return Y2(e, n);
    }
    case "polycurve":
      return !1;
    default:
      throw Error(`shape ${t} is not implemented`);
  }
}, TD = (e, t, n) => t.some((a) => R8(e, a, n)), _D = (e) => {
  let [t, n, a, i] = e;
  return (r, l) => Math.pow(1 - r, 3) * i[l] + 3 * r * Math.pow(1 - r, 2) * a[l] + 3 * Math.pow(r, 2) * (1 - r) * n[l] + t[l] * Math.pow(r, 3);
}, AD = (e, t = 10) => {
  let n = _D(e), a = [n(0, 0), n(0, 1)], i = [], r = 0, l = 1 / t;
  for (let s = 0; s < t; s++) if (r += l, r <= 1) {
    let c = k(n(r, 0), n(r, 1));
    i.push(se(a, c)), a = c;
  }
  return i;
}, R8 = (e, t, n) => P8(e, AD(t), n), P8 = (e, t, n = 1e-4) => t.some((a) => al(e, a, n));
function N8(e, t, n) {
  return { center: e, halfWidth: t, halfHeight: n };
}
var jD = (e, t) => {
  let { halfWidth: n, halfHeight: a, center: i } = t, r = n, l = a, s = nr(le(e), bt(le(i), -1)), c = Math.abs(s[0]), d = Math.abs(s[1]), o = 0.707, u = 0.707;
  for (let U = 0; U < 3; U++) {
    let m = r * o, g = l * u, b = (r * r - l * l) * o ** 3 / r, v = (l * l - r * r) * u ** 3 / l, x = m - b, y = g - v, E = c - b, S = d - v, w = Math.hypot(y, x), M = Math.hypot(S, E);
    o = Math.min(1, Math.max(0, (E * w / M + b) / r)), u = Math.min(1, Math.max(0, (S * w / M + v) / l));
    let I = Math.hypot(u, o);
    o /= I, u /= I;
  }
  let [f, p] = [r * o * Math.sign(s[0]), l * u * Math.sign(s[1])];
  return Pe(ke(s), k(f, p));
};
function DD({ center: e, halfWidth: t, halfHeight: n }, [a, i]) {
  let [r, l] = e, s = a[0] - r, c = a[1] - l, d = i[0] - r, o = i[1] - l, u = Math.pow(d - s, 2) / Math.pow(t, 2) + Math.pow(o - c, 2) / Math.pow(n, 2), f = 2 * (s * (d - s) / Math.pow(t, 2) + c * (o - c) / Math.pow(n, 2)), p = Math.pow(s, 2) / Math.pow(t, 2) + Math.pow(c, 2) / Math.pow(n, 2) - 1, U = (-f + Math.sqrt(Math.pow(f, 2) - 4 * u * p)) / (2 * u), m = (-f - Math.sqrt(Math.pow(f, 2) - 4 * u * p)) / (2 * u), g = [k(s + U * (d - s) + r, c + U * (o - c) + l), k(s + m * (d - s) + r, c + m * (o - c) + l)].filter((b) => !isNaN(b[0]) && !isNaN(b[1]));
  return g.length === 2 && va(g[0], g[1]) ? [g[0]] : g;
}
function O8(e, t = 0) {
  let n = ma(Math.min(e.width, e.height), e);
  if (n <= 0) {
    let u = h1(k(e.x - t, e.y - t), k(e.x + e.width + t, e.y + e.height + t)), f = se(k(u[0][0] + n, u[0][1]), k(u[1][0] - n, u[0][1])), p = se(k(u[1][0], u[0][1] + n), k(u[1][0], u[1][1] - n)), U = se(k(u[0][0] + n, u[1][1]), k(u[1][0] - n, u[1][1])), m = se(k(u[0][0], u[1][1] - n), k(u[0][0], u[0][1] + n));
    return [[f, p, U, m], []];
  }
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = h1(k(e.x, e.y), k(e.x + e.width, e.y + e.height)), r = se(k(i[0][0] + n, i[0][1]), k(i[1][0] - n, i[0][1])), l = se(k(i[1][0], i[0][1] + n), k(i[1][0], i[1][1] - n)), s = se(k(i[0][0] + n, i[1][1]), k(i[1][0] - n, i[1][1])), c = se(k(i[0][0], i[1][1] - n), k(i[0][0], i[0][1] + n)), d = [bt(nn(le(k(i[0][0] - t, i[0][1] - t), a)), t), bt(nn(le(k(i[1][0] + t, i[0][1] - t), a)), t), bt(nn(le(k(i[1][0] + t, i[1][1] + t), a)), t), bt(nn(le(k(i[0][0] - t, i[1][1] + t), a)), t)], o = [bi(ke(d[0], c[1]), ke(d[0], k(c[1][0] + 2 / 3 * (i[0][0] - c[1][0]), c[1][1] + 2 / 3 * (i[0][1] - c[1][1]))), ke(d[0], k(r[0][0] + 2 / 3 * (i[0][0] - r[0][0]), r[0][1] + 2 / 3 * (i[0][1] - r[0][1]))), ke(d[0], r[0])), bi(ke(d[1], r[1]), ke(d[1], k(r[1][0] + 2 / 3 * (i[1][0] - r[1][0]), r[1][1] + 2 / 3 * (i[0][1] - r[1][1]))), ke(d[1], k(l[0][0] + 2 / 3 * (i[1][0] - l[0][0]), l[0][1] + 2 / 3 * (i[0][1] - l[0][1]))), ke(d[1], l[0])), bi(ke(d[2], l[1]), ke(d[2], k(l[1][0] + 2 / 3 * (i[1][0] - l[1][0]), l[1][1] + 2 / 3 * (i[1][1] - l[1][1]))), ke(d[2], k(s[1][0] + 2 / 3 * (i[1][0] - s[1][0]), s[1][1] + 2 / 3 * (i[1][1] - s[1][1]))), ke(d[2], s[1])), bi(ke(d[3], s[0]), ke(d[3], k(s[0][0] + 2 / 3 * (i[0][0] - s[0][0]), s[0][1] + 2 / 3 * (i[1][1] - s[0][1]))), ke(d[3], k(c[0][0] + 2 / 3 * (i[0][0] - c[0][0]), c[0][1] + 2 / 3 * (i[1][1] - c[0][1]))), ke(d[3], c[0]))];
  return [[se(o[0][3], o[1][0]), se(o[1][3], o[2][0]), se(o[2][3], o[3][0]), se(o[3][3], o[0][0])], o];
}
function $8(e, t = 0) {
  var x;
  let [n, a, i, r, l, s, c, d] = r7(e), o = ma(Math.abs(n - c), e), u = ma(Math.abs(r - a), e);
  if (((x = e.roundness) == null ? void 0 : x.type) == null) {
    let [y, E, S, w] = [k(e.x + n, e.y + a - t), k(e.x + i + t, e.y + r), k(e.x + l, e.y + s + t), k(e.x + c - t, e.y + d)], M = se(k(y[0] + o, y[1] + u), k(E[0] - o, E[1] - u)), I = se(k(E[0] - o, E[1] + u), k(S[0] + o, S[1] - u)), T = se(k(S[0] - o, S[1] - u), k(w[0] + o, w[1] + u)), _ = se(k(w[0] + o, w[1] - u), k(y[0] - o, y[1] + u));
    return [[M, I, T, _], []];
  }
  let f = k(e.x + e.width / 2, e.y + e.height / 2), [p, U, m, g] = [k(e.x + n, e.y + a), k(e.x + i, e.y + r), k(e.x + l, e.y + s), k(e.x + c, e.y + d)], b = [bt(nn(le(U, f)), t), bt(nn(le(m, f)), t), bt(nn(le(g, f)), t), bt(nn(le(p, f)), t)], v = [bi(ke(b[0], k(U[0] - o, U[1] - u)), ke(b[0], U), ke(b[0], U), ke(b[0], k(U[0] - o, U[1] + u))), bi(ke(b[1], k(m[0] + o, m[1] - u)), ke(b[1], m), ke(b[1], m), ke(b[1], k(m[0] - o, m[1] - u))), bi(ke(b[2], k(g[0] + o, g[1] + u)), ke(b[2], g), ke(b[2], g), ke(b[2], k(g[0] + o, g[1] - u))), bi(ke(b[3], k(p[0] - o, p[1] + u)), ke(b[3], p), ke(b[3], p), ke(b[3], k(p[0] + o, p[1] + u)))];
  return [[se(v[0][3], v[1][0]), se(v[1][3], v[2][0]), se(v[2][3], v[3][0]), se(v[3][3], v[0][0])], v];
}
var y1 = (e) => {
  if (e.type === "arrow") return !1;
  let t = !ua(e.backgroundColor) || Jn(e) || Hn(e) || q(e);
  return e.type === "line" || e.type === "freedraw" ? t && Mi(e.points) : t || Re(e);
}, Rl = ({ x: e, y: t, element: n, shape: a, threshold: i = 10, frameNameBound: r = null }) => {
  let l = y1(n) && ru(k(e, t), a) || x1(k(e, t), a, i);
  return !l && r && (l = ru(k(e, t), { type: "polygon", data: L8(r).data })), l;
}, Q0 = (e, t, n, a, i = 0) => {
  let [r, l, s, c] = ya(n, a);
  return r -= i, l -= i, s += i, c += i, Vb(k(r, l), k(e, t), k(s, c));
}, LD = (e, t) => !Rl(e) && !F8(e.x, e.y, B8(e.element, t)) && Q0(e.x, e.y, e.element, t), F8 = (e, t, n) => !!n && ru(k(e, t), n), z8 = (e, t, n = 0) => {
  switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      return RD(e, t, n);
    case "diamond":
      return PD(e, t, n);
    case "ellipse":
      return ND(e, t, n);
    default:
      throw new Error(`Unimplemented element type '${e.type}'`);
  }
}, RD = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = B(t[0], a, -e.angle), r = B(t[1], a, -e.angle), [l, s] = O8(e, n);
  return [...l.map((c) => Bo(se(i, r), c)).filter((c) => c != null).map((c) => B(c, a, e.angle)), ...s.flatMap((c) => Gb(c, se(i, r))).filter((c) => c != null).map((c) => B(c, a, e.angle))].filter((c, d, o) => o.findIndex((u) => va(c, u)) === d);
}, PD = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = B(t[0], a, -e.angle), r = B(t[1], a, -e.angle), [l, s] = $8(e, n);
  return [...l.map((c) => Bo(se(i, r), c)).filter((c) => c != null).map((c) => B(c, a, e.angle)), ...s.flatMap((c) => Gb(c, se(i, r))).filter((c) => c != null).map((c) => B(c, a, e.angle))].filter((c, d, o) => o.findIndex((u) => va(c, u)) === d);
}, ND = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = B(t[0], a, -e.angle), r = B(t[1], a, -e.angle);
  return DD(N8(a, e.width / 2 + n, e.height / 2 + n), u1(i, r)).map((l) => B(l, a, e.angle));
}, _e = { EQUAL: "Equal", MINUS: "Minus", NUM_ADD: "NumpadAdd", NUM_SUBTRACT: "NumpadSubtract", NUM_ZERO: "Numpad0", BRACKET_RIGHT: "BracketRight", BRACKET_LEFT: "BracketLeft", ONE: "Digit1", TWO: "Digit2", THREE: "Digit3", QUOTE: "Quote", ZERO: "Digit0", SLASH: "Slash", C: "KeyC", D: "KeyD", H: "KeyH", V: "KeyV", Z: "KeyZ", Y: "KeyY", R: "KeyR", S: "KeyS" }, L = { ARROW_DOWN: "ArrowDown", ARROW_LEFT: "ArrowLeft", ARROW_RIGHT: "ArrowRight", ARROW_UP: "ArrowUp", PAGE_UP: "PageUp", PAGE_DOWN: "PageDown", BACKSPACE: "Backspace", ALT: "Alt", CTRL_OR_CMD: Za ? "metaKey" : "ctrlKey", DELETE: "Delete", ENTER: "Enter", ESCAPE: "Escape", QUESTION_MARK: "?", SPACE: " ", TAB: "Tab", CHEVRON_LEFT: "<", CHEVRON_RIGHT: ">", PERIOD: ".", COMMA: ",", SLASH: "/", A: "a", D: "d", E: "e", F: "f", G: "g", H: "h", I: "i", L: "l", O: "o", P: "p", Q: "q", R: "r", S: "s", T: "t", V: "v", X: "x", Y: "y", Z: "z", K: "k", 0: "0", 1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9" }, OD = /* @__PURE__ */ new Map([[L.Z, _e.Z], [L.Y, _e.Y]]), $D = (e) => /^[a-z]$/.test(e.toLowerCase()), w1 = (e, t) => {
  if (t === e.key.toLowerCase()) return !0;
  let n = OD.get(t);
  return !!(n && !$D(e.key) && e.code === n);
}, ao = (e) => e === L.ARROW_LEFT || e === L.ARROW_RIGHT || e === L.ARROW_DOWN || e === L.ARROW_UP, lf = (e) => e.altKey, Bs = (e) => e.shiftKey, vo = (e) => e.shiftKey, ep = [{ icon: lC, value: "selection", key: L.V, numericKey: L[1], fillable: !0 }, { icon: sC, value: "rectangle", key: L.R, numericKey: L[2], fillable: !0 }, { icon: oC, value: "diamond", key: L.D, numericKey: L[3], fillable: !0 }, { icon: cC, value: "ellipse", key: L.O, numericKey: L[4], fillable: !0 }, { icon: dC, value: "arrow", key: L.A, numericKey: L[5], fillable: !0 }, { icon: uC, value: "line", key: L.L, numericKey: L[6], fillable: !0 }, { icon: Ho, value: "freedraw", key: [L.P, L.X], numericKey: L[7], fillable: !1 }, { icon: u8, value: "text", key: L.T, numericKey: L[8], fillable: !1 }, { icon: fC, value: "image", key: null, numericKey: L[9], fillable: !1 }, { icon: pC, value: "eraser", key: L.E, numericKey: L[0], fillable: !1 }], FD = (e) => {
  var t;
  return ((t = ep.find((n, a) => n.numericKey != null && e === n.numericKey.toString() || n.key && (typeof n.key == "string" ? n.key === e : n.key.includes(e)))) == null ? void 0 : t.value) || null;
}, Ui = (e, t) => {
  var n;
  switch (e.type) {
    case "rectangle":
    case "diamond":
    case "frame":
    case "magicframe":
    case "embeddable":
    case "image":
    case "iframe":
    case "text":
    case "selection":
      return L8(e);
    case "arrow":
    case "line": {
      let a = ((n = pt.get(e)) == null ? void 0 : n[0]) ?? pt.generateElementShape(e, null)[0], [, , , , i, r] = Ue(e, t);
      return y1(e) ? kD(e, a, k(e.x, e.y), e.angle, k(i, r)) : wD(a, k(e.x, e.y), e.angle, k(i, r));
    }
    case "ellipse":
      return yD(e);
    case "freedraw": {
      let [, , , , a, i] = Ue(e, t);
      return SD(e, k(a, i), y1(e));
    }
  }
}, B8 = (e, t) => {
  let n = be(e, t);
  return n ? e.type === "arrow" ? Ui({ ...n, ...J.getBoundTextElementPosition(e, n, t) }, t) : Ui(n, t) : null;
}, H8 = (e, t) => {
  let n = pt.generateElementShape(e, null);
  if (!n) return null;
  let a = yr(n[0]), i = k(0, 0), r = 0, l = 1 / 0, s = null;
  for (; r < a.length; ) {
    let { op: c, data: d } = a[r];
    if (c === "move" && (rn(oM(d), "The returned ops is not compatible with a point"), i = d), c === "bcurveTo") {
      let o = i, u = k(d[0], d[1]), f = k(d[2], d[3]), p = k(d[4], d[5]), U = Pe(p, t);
      U < l && (l = U, s = [o, u, f, p]), i = p;
    }
    r++;
  }
  return s;
}, X8 = (e, t, n, a, i) => {
  let r = (c, d) => Math.pow(1 - c, 3) * a[d] + 3 * c * Math.pow(1 - c, 2) * n[d] + 3 * Math.pow(c, 2) * (1 - c) * t[d] + e[d] * Math.pow(c, 3), l = r(i, 0), s = r(i, 1);
  return k(l, s);
}, zD = (e, t) => {
  let n = H8(e, t);
  if (!n) return [];
  let a = [], i = 1;
  for (; i > 0; ) {
    let r = X8(n[0], n[1], n[2], n[3], i);
    a.push(k(r[0], r[1])), i -= 0.05;
  }
  return a.length && va(a.at(-1), t) && a.push(k(t[0], t[1])), a;
}, W8 = (e, t) => {
  let n = [];
  n[0] = 0;
  let a = zD(e, t), i = 0, r = 0;
  for (; i < a.length - 1; ) {
    let l = Pe(a[i], a[i + 1]);
    r += l, n.push(r), i++;
  }
  return n;
}, BD = (e, t) => W8(e, t).at(-1), HD = (e, t, n) => {
  let a = W8(e, t), i = a.length - 1, r = a.at(-1), l = n * r, s = 0, c = i, d = 0;
  for (; s < c; ) d = Math.floor(s + (c - s) / 2), a[d] < l ? s = d + 1 : c = d;
  return a[d] > l && d--, a[d] === l ? d / i : 1 - (d + (l - a[d]) / (a[d + 1] - a[d])) / i;
}, Fa = (e, t) => {
  let n = { minX: e.x, minY: e.y, maxX: e.x + e.width, maxY: e.y + e.height, midX: e.x + e.width / 2, midY: e.y + e.height / 2 }, a = k(n.midX, n.midY), [i, r] = B(k(n.minX, n.minY), a, e.angle), [l, s] = B(k(n.maxX, n.minY), a, e.angle), [c, d] = B(k(n.maxX, n.maxY), a, e.angle), [o, u] = B(k(n.minX, n.maxY), a, e.angle), f = [Math.min(i, l, c, o), Math.min(r, s, d, u), Math.max(i, l, c, o), Math.max(r, s, d, u)];
  if (t) {
    let [p, U, m, g] = t;
    return [f[0] - g, f[1] - p, f[2] + U, f[3] + m];
  }
  return f;
}, ss = (e, t) => e[0] > t[0] && e[0] < t[2] && e[1] > t[1] && e[1] < t[3], ma = (e, t) => {
  var n, a, i, r;
  if (((n = t.roundness) == null ? void 0 : n.type) === jt.PROPORTIONAL_RADIUS || ((a = t.roundness) == null ? void 0 : a.type) === jt.LEGACY) return e * Zh;
  if (((i = t.roundness) == null ? void 0 : i.type) === jt.ADAPTIVE_RADIUS) {
    let l = ((r = t.roundness) == null ? void 0 : r.value) ?? Jk, s = l / Zh;
    return e <= s ? e * Zh : l;
  }
  return 0;
}, Mi = (e, t = 1) => {
  if (e.length >= 3) {
    let [n, a] = [e[0], e[e.length - 1]];
    return Pe(n, a) <= Ud / t;
  }
  return !1;
}, zt = 10, XD = (e, t, n, a, i, r, l) => {
  var T, _;
  let { width: s, height: c } = Ci(e), d = n / s, o = a / c, u = (((T = e.crop) == null ? void 0 : T.x) ?? 0) / d, f = (((_ = e.crop) == null ? void 0 : _.y) ?? 0) / o, p = B(k(i, r), k(e.x + e.width / 2, e.y + e.height / 2), -e.angle);
  i = p[0], r = p[1];
  let U = e.width, m = e.height, g = e.crop ?? { x: 0, y: 0, width: n, height: a, naturalWidth: n, naturalHeight: a }, b = g.height, v = g.width, x = e.scale[0] === -1, y = e.scale[1] === -1, E = r - e.y, S = i - e.x;
  t.includes("n") && (m = Se(e.height - E, zt, y ? c - f : e.height + f)), t.includes("s") && (E = r - e.y - e.height, m = Se(e.height + E, zt, y ? e.height + f : c - f)), t.includes("e") && (S = i - e.x - e.width, U = Se(e.width + S, zt, x ? e.width + u : s - u)), t.includes("w") && (U = Se(e.width - S, zt, x ? s - u : e.width + u));
  let w = (A) => {
    A.height = m * o, A.width = U * d;
  };
  w(g);
  let M = (A, D) => {
    w(D), A.includes("n") && (y || (D.y += b - D.height)), A.includes("s") && y && (D.y += b - D.height), A.includes("e") && x && (D.x += v - D.width), A.includes("w") && (x || (D.x += v - D.width));
  };
  switch (t) {
    case "n": {
      if (l) {
        let A = u + e.width / 2, D = s - u - e.width / 2, P = Math.min(A, D) * 2;
        U = Se(m * l, zt, P), m = U / l;
      }
      M(t, g), l && (g.x += (v - g.width) / 2);
      break;
    }
    case "s": {
      if (l) {
        let A = u + e.width / 2, D = s - u - e.width / 2, P = Math.min(A, D) * 2;
        U = Se(m * l, zt, P), m = U / l;
      }
      M(t, g), l && (g.x += (v - g.width) / 2);
      break;
    }
    case "w": {
      if (l) {
        let A = f + e.height / 2, D = c - f - e.height / 2, P = Math.min(A, D) * 2;
        m = Se(U / l, zt, P), U = m * l;
      }
      M(t, g), l && (g.y += (b - g.height) / 2);
      break;
    }
    case "e": {
      if (l) {
        let A = f + e.height / 2, D = c - f - e.height / 2, P = Math.min(A, D) * 2;
        m = Se(U / l, zt, P), U = m * l;
      }
      M(t, g), l && (g.y += (b - g.height) / 2);
      break;
    }
    case "ne": {
      if (l) if (S > -E) {
        let A = y ? c - f : f + e.height;
        m = Se(U / l, zt, A), U = m * l;
      } else {
        let A = x ? u + e.width : s - u;
        U = Se(m * l, zt, A), m = U / l;
      }
      M(t, g);
      break;
    }
    case "nw": {
      if (l) if (S < E) {
        let A = y ? c - f : f + e.height;
        m = Se(U / l, zt, A), U = m * l;
      } else {
        let A = x ? s - u : u + e.width;
        U = Se(m * l, zt, A), m = U / l;
      }
      M(t, g);
      break;
    }
    case "se": {
      if (l) if (S > E) {
        let A = y ? f + e.height : c - f;
        m = Se(U / l, zt, A), U = m * l;
      } else {
        let A = x ? u + e.width : s - u;
        U = Se(m * l, zt, A), m = U / l;
      }
      M(t, g);
      break;
    }
    case "sw": {
      if (l) if (-S > E) {
        let A = y ? f + e.height : c - f;
        m = Se(U / l, zt, A), U = m * l;
      } else {
        let A = x ? s - u : u + e.width;
        U = Se(m * l, zt, A), m = U / l;
      }
      M(t, g);
      break;
    }
  }
  let I = WD(e, t, U, m, !!l);
  return X2(g.width, g.naturalWidth) && X2(g.height, g.naturalHeight) && (g = null), { x: I[0], y: I[1], width: U, height: m, crop: g };
}, WD = (e, t, n, a, i) => {
  let [r, l, s, c] = or(e, e.width, e.height, !0), d = k(r, l), o = k(s, c), u = fc(d, o), [f, p, U, m] = or(e, n, a, !0), g = U - f, b = m - p, v = [...d];
  if (["n", "w", "nw"].includes(t) && (v = [o[0] - Math.abs(g), o[1] - Math.abs(b)]), t === "ne") {
    let M = [d[0], o[1]];
    v = [M[0], M[1] - Math.abs(b)];
  }
  if (t === "sw") {
    let M = [o[0], d[1]];
    v = [M[0] - Math.abs(g), M[1]];
  }
  i && (["s", "n"].includes(t) && (v[0] = u[0] - g / 2), ["e", "w"].includes(t) && (v[1] = u[1] - b / 2));
  let x = e.angle, y = B(v, u, x), E = [v[0] + Math.abs(g) / 2, v[1] + Math.abs(b) / 2], S = B(E, u, x);
  v = B(y, S, -x);
  let w = [...v];
  return w[0] += e.x - f, w[1] += e.y - p, w;
}, VD = (e, t) => {
  if (e.crop) {
    let { width: n, height: a } = Ci(e), [i, r, l, s, c, d] = Ue(e, t), o = le(B(k(i, r), k(c, d), e.angle)), u = le(B(k(l, r), k(c, d), e.angle)), f = nn(qd(u, o)), p = le(B(k(i, s), k(c, d), e.angle)), U = qd(p, o), m = nn(U), { cropX: g, cropY: b } = GD(e.crop, e.scale), v = nr(nr(o, bt(f, -g * n / e.crop.naturalWidth)), bt(m, -b * a / e.crop.naturalHeight)), x = ke(nr(nr(v, bt(f, n / 2)), bt(m, a / 2))), y = B(ke(v), x, -e.angle);
    return { ...e, x: y[0], y: y[1], width: n, height: a, crop: null };
  }
  return e;
}, Ci = (e) => {
  if (e.crop) {
    let t = e.width / (e.crop.width / e.crop.naturalWidth), n = e.height / (e.crop.height / e.crop.naturalHeight);
    return { width: t, height: n };
  }
  return { width: e.width, height: e.height };
}, GD = (e, t) => {
  let n = e.x, a = e.y, i = t[0] === -1, r = t[1] === -1;
  return i && (n = e.naturalWidth - Math.abs(n) - e.width), r && (a = e.naturalHeight - Math.abs(a) - e.height), { cropX: n, cropY: a };
}, YD = (e, t = !1) => {
  let n = e.crop;
  if (!n) return null;
  let a = e.scale[0] === -1, i = e.scale[1] === -1, r = n.x, l = n.y;
  if (a && (r = n.naturalWidth - n.width - n.x), i && (l = n.naturalHeight - n.height - n.y), t) return { x: r, y: l };
  let { width: s, height: c } = Ci(e);
  return { x: r / (n.naturalWidth / s), y: l / (n.naturalHeight / c) };
}, V8 = "invert(100%) hue-rotate(180deg) saturate(1.25)", ZD = Ka(), G8 = (e, t) => Bn(e) && !t.imageCache.has(e.fileId), Y8 = (e, t, n) => {
  var a;
  return n.theme === Me.DARK && Bn(e) && !G8(e, t) && ((a = t.imageCache.get(e.fileId)) == null ? void 0 : a.mimeType) !== oe.svg;
}, Ku = (e) => {
  switch (e.type) {
    case "freedraw":
      return e.strokeWidth * 12;
    case "text":
      return e.fontSize / 2;
    default:
      return 20;
  }
}, Z8 = (e, t, n, a, i = 1) => {
  let r = ((t == null ? void 0 : t.opacity) ?? 100) * e.opacity / 1e4 * i;
  return (n.has(e.id) || a && a.some((l) => l.id === e.id) || t && n.has(t.id)) && (r *= qk / 100), r;
}, KD = (e, t, n) => {
  let a = Ku(e), [i, r, l, s] = Ue(e, t), c = pe(e) || qn(e) ? en(i, l) : e.width, d = pe(e) || qn(e) ? en(r, s) : e.height, o = c * window.devicePixelRatio + a * 2, u = d * window.devicePixelRatio + a * 2, f = n.value;
  return (o * f > 32767 || u * f > 32767) && (f = Math.min(32767 / o, 32767 / u)), o * u * f * f > 16777216 && (f = Math.sqrt(16777216 / (o * u))), o = Math.floor(o * f), u = Math.floor(u * f), { width: o, height: u, scale: f };
}, K8 = (e, t, n, a, i) => {
  var b, v;
  let r = document.createElement("canvas"), l = r.getContext("2d"), s = Ku(e), { width: c, height: d, scale: o } = KD(e, t, n);
  if (!c || !d) return null;
  r.width = c, r.height = d;
  let u = -100, f = 0;
  if (pe(e) || qn(e)) {
    let [x, y] = Ue(e, t);
    u = e.x > x ? en(e.x, x) * window.devicePixelRatio * o : 0, f = e.y > y ? en(e.y, y) * window.devicePixelRatio * o : 0, l.translate(u, f);
  }
  l.save(), l.translate(s * o, s * o), l.scale(window.devicePixelRatio * o, window.devicePixelRatio * o);
  let p = vr.canvas(r);
  Y8(e, a, i) && (l.filter = V8), yd(e, p, l, a), l.restore();
  let U = be(e, t), m = document.createElement("canvas"), g = m.getContext("2d");
  if (ye(e) && U) {
    let [x, y, E, S] = Ue(e, t), w = Math.max(en(x, E), en(y, S));
    m.width = w * window.devicePixelRatio * o + s * o * 10, m.height = w * window.devicePixelRatio * o + s * o * 10, g.translate(m.width / 2, m.height / 2), g.rotate(e.angle), g.drawImage(r, -r.width / 2, -r.height / 2, r.width, r.height);
    let [, , , , M, I] = Ue(U, t);
    g.rotate(-e.angle);
    let T = (m.width - r.width) / 2, _ = (m.height - r.height) / 2, A = m.width / 2 - (M - x) * window.devicePixelRatio * o - T - s * o, D = m.height / 2 - (I - y) * window.devicePixelRatio * o - _ - s * o;
    g.translate(-A, -D), g.clearRect(-(U.width / 2 + At) * window.devicePixelRatio * o, -(U.height / 2 + At) * window.devicePixelRatio * o, (U.width + At * 2) * window.devicePixelRatio * o, (U.height + At * 2) * window.devicePixelRatio * o);
  }
  return { element: e, canvas: r, theme: i.theme, scale: o, zoomValue: n.value, canvasOffsetX: u, canvasOffsetY: f, boundTextElementVersion: ((b = be(e, t)) == null ? void 0 : b.version) || null, containingFrameOpacity: ((v = kn(e, t)) == null ? void 0 : v.opacity) || 100, boundTextCanvas: m, angle: e.angle, imageCrop: Re(e) ? e.crop : null };
}, qD = 14, q8 = document.createElement("img");
q8.src = `data:${oe.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;
var J8 = document.createElement("img");
J8.src = `data:${oe.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;
var JD = (e, t) => {
  t.fillStyle = "#E7E7E7", t.fillRect(0, 0, e.width, e.height);
  let n = Math.min(e.width, e.height), a = Math.min(n, Math.min(n * 0.4, 100));
  t.drawImage(e.status === "error" ? J8 : q8, e.width / 2 - a / 2, e.height / 2 - a / 2, a, a);
}, yd = (e, t, n, a, i) => {
  var r;
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse": {
      n.lineJoin = "round", n.lineCap = "round", t.draw(pt.get(e));
      break;
    }
    case "arrow":
    case "line": {
      n.lineJoin = "round", n.lineCap = "round", pt.get(e).forEach((l) => {
        t.draw(l);
      });
      break;
    }
    case "freedraw": {
      n.save(), n.fillStyle = e.strokeColor;
      let l = tL(e), s = pt.get(e);
      s && t.draw(s), n.fillStyle = e.strokeColor, n.fill(l), n.restore();
      break;
    }
    case "image": {
      let l = Bn(e) ? (r = a.imageCache.get(e.fileId)) == null ? void 0 : r.image : void 0;
      if (l != null && !(l instanceof Promise)) {
        e.roundness && n.roundRect && (n.beginPath(), n.roundRect(0, 0, e.width, e.height, ma(Math.min(e.width, e.height), e)), n.clip());
        let { x: s, y: c, width: d, height: o } = e.crop ? e.crop : { x: 0, y: 0, width: l.naturalWidth, height: l.naturalHeight };
        n.drawImage(l, s, c, d, o, 0, 0, e.width, e.height);
      } else JD(e, n);
      break;
    }
    default:
      if (q(e)) {
        let l = Kb(e.text), s = l && !n.canvas.isConnected;
        s && document.body.appendChild(n.canvas), n.canvas.setAttribute("dir", l ? "rtl" : "ltr"), n.save(), n.font = Ye(e), n.fillStyle = e.strokeColor, n.textAlign = e.textAlign;
        let c = e.text.replace(/\r\n?/g, `
`).split(`
`), d = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0, o = Uc(e.fontSize, e.lineHeight), u = D8(e.fontFamily, e.fontSize, o);
        for (let f = 0; f < c.length; f++) n.fillText(c[f], d, f * o + u);
        n.restore(), s && n.canvas.remove();
      } else throw new Error(`Unimplemented type ${e.type}`);
  }
}, E1 = /* @__PURE__ */ new WeakMap(), ym = (e, t, n, a) => {
  var u;
  let i = n ? a.zoom : ZD.zoom, r = E1.get(e), l = r && r.zoomValue !== i.value && !(a != null && a.shouldCacheIgnoreZoom), s = be(e, t), c = (s == null ? void 0 : s.version) || null, d = Re(e) ? e.crop : null, o = ((u = kn(e, t)) == null ? void 0 : u.opacity) || 100;
  if (!r || l || r.theme !== a.theme || r.boundTextElementVersion !== c || r.imageCrop !== d || r.containingFrameOpacity !== o || ye(e) && s && e.angle !== r.angle) {
    let f = K8(e, t, i, n, a);
    return f ? (E1.set(e, f), f) : null;
  }
  return r;
}, sf = (e, t, n, a, i) => {
  let r = e.element, l = Ku(r), s = e.scale, [c, d, o, u] = Ue(r, i), f = ((c + o) / 2 + a.scrollX) * window.devicePixelRatio, p = ((d + u) / 2 + a.scrollY) * window.devicePixelRatio;
  t.save(), t.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio);
  let U = be(r, i);
  if (ye(r) && U) {
    let m = (e.boundTextCanvas.width - e.canvas.width) / 2, g = (e.boundTextCanvas.height - e.canvas.height) / 2;
    t.translate(f, p), t.drawImage(e.boundTextCanvas, -(o - c) / 2 * window.devicePixelRatio - m / s - l, -(u - d) / 2 * window.devicePixelRatio - g / s - l, e.boundTextCanvas.width / s, e.boundTextCanvas.height / s);
  } else t.translate(f, p), t.rotate(r.angle), "scale" in e.element && !G8(r, n) && t.scale(e.element.scale[0], e.element.scale[1]), t.translate(-f, -p), t.drawImage(e.canvas, (c + a.scrollX) * window.devicePixelRatio - l * e.scale / e.scale, (d + a.scrollY) * window.devicePixelRatio - l * e.scale / e.scale, e.canvas.width / e.scale, e.canvas.height / e.scale), ve.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;
  t.restore();
}, QD = (e, t, n, a) => {
  t.save(), t.translate(e.x + n.scrollX, e.y + n.scrollY), t.fillStyle = "rgba(0, 0, 200, 0.04)";
  let i = 0.5 / n.zoom.value;
  t.fillRect(i, i, e.width, e.height), t.lineWidth = 1 / n.zoom.value, t.strokeStyle = a, t.strokeRect(i, i, e.width, e.height), t.restore();
}, Lr = (e, t, n, a, i, r, l) => {
  var c;
  let s = ((c = l.openDialog) == null ? void 0 : c.name) === "elementLinkSelector" && !l.selectedElementIds[e.id] && !l.hoveredElementIds[e.id];
  switch (i.globalAlpha = Z8(e, kn(e, t), r.elementsPendingErasure, r.pendingFlowchartNodes, s ? Xb : 1), e.type) {
    case "magicframe":
    case "frame": {
      l.frameRendering.enabled && l.frameRendering.outline && (i.save(), i.translate(e.x + l.scrollX, e.y + l.scrollY), i.fillStyle = "rgba(0, 0, 200, 0.04)", i.lineWidth = ht.strokeWidth / l.zoom.value, i.strokeStyle = ht.strokeColor, bd(e) && (i.strokeStyle = l.theme === Me.LIGHT ? "#7affd7" : "#1d8264"), i.roundRect ? (i.beginPath(), i.roundRect(0, 0, e.width, e.height, ht.radius / l.zoom.value), i.stroke(), i.closePath()) : i.strokeRect(0, 0, e.width, e.height), i.restore());
      break;
    }
    case "freedraw": {
      if (pt.generateElementShape(e, null), r.isExporting) {
        let [d, o, u, f] = Ue(e, t), p = (d + u) / 2 + l.scrollX, U = (o + f) / 2 + l.scrollY, m = (u - d) / 2 - (e.x - d), g = (f - o) / 2 - (e.y - o);
        i.save(), i.translate(p, U), i.rotate(e.angle), i.translate(-m, -g), yd(e, a, i, r), i.restore();
      } else {
        let d = ym(e, n, r, l);
        if (!d) return;
        sf(d, i, r, l, n);
      }
      break;
    }
    case "rectangle":
    case "diamond":
    case "ellipse":
    case "line":
    case "arrow":
    case "image":
    case "text":
    case "iframe":
    case "embeddable": {
      if (pt.generateElementShape(e, r), r.isExporting) {
        let [d, o, u, f] = Ue(e, t), p = (d + u) / 2 + l.scrollX, U = (o + f) / 2 + l.scrollY, m = (u - d) / 2 - (e.x - d), g = (f - o) / 2 - (e.y - o);
        if (q(e)) {
          let v = Vt(e, t);
          if (ye(v)) {
            let x = J.getBoundTextElementPosition(v, e, t);
            m = (u - d) / 2 - (x.x - d), g = (f - o) / 2 - (x.y - o);
          }
        }
        i.save(), i.translate(p, U), Y8(e, r, l) && (i.filter = "none");
        let b = be(e, t);
        if (ye(e) && b) {
          let v = document.createElement("canvas"), x = v.getContext("2d"), y = Math.max(en(d, u), en(o, f)), E = Ku(e);
          v.width = y * l.exportScale + E * 10 * l.exportScale, v.height = y * l.exportScale + E * 10 * l.exportScale, x.translate(v.width / 2, v.height / 2), x.scale(l.exportScale, l.exportScale), m = e.width / 2 - (e.x - d), g = e.height / 2 - (e.y - o), x.rotate(e.angle);
          let S = vr.canvas(v);
          x.translate(-m, -g), yd(e, S, x, r), x.translate(m, g), x.rotate(-e.angle);
          let [, , , , w, M] = Ue(b, t), I = (d + u) / 2 - w, T = (o + f) / 2 - M;
          x.translate(-I, -T), x.clearRect(-b.width / 2, -b.height / 2, b.width, b.height), i.scale(1 / l.exportScale, 1 / l.exportScale), i.drawImage(v, -v.width / 2, -v.height / 2, v.width, v.height);
        } else i.rotate(e.angle), e.type === "image" && i.scale(e.scale[0], e.scale[1]), i.translate(-m, -g), yd(e, a, i, r);
        i.restore();
      } else {
        let d = ym(e, n, r, l);
        if (!d) return;
        let o = i.imageSmoothingEnabled;
        if (!(l != null && l.shouldCacheIgnoreZoom) && (!e.angle || rM(e.angle)) && (i.imageSmoothingEnabled = !1), e.id === l.croppingElementId && Re(d.element) && d.element.crop !== null) {
          i.save(), i.globalAlpha = 0.1;
          let u = K8(VD(d.element, t), n, l.zoom, r, l);
          u && sf(u, i, r, l, n), i.restore();
        }
        sf(d, i, r, l, n), i.imageSmoothingEnabled = o;
      }
      break;
    }
    default:
      throw new Error(`Unimplemented type ${e.type}`);
  }
  i.globalAlpha = 1;
}, Q8 = /* @__PURE__ */ new WeakMap([]);
function eL(e) {
  let t = e7(e), n = new Path2D(t);
  return Q8.set(e, n), n;
}
function tL(e) {
  return Q8.get(e);
}
function e7(e) {
  let t = e.simulatePressure ? e.points : e.points.length ? e.points.map(([a, i], r) => [a, i, e.pressures[r]]) : [[0, 0, 0.5]], n = { simulatePressure: e.simulatePressure, size: e.strokeWidth * 4.25, thinning: 0.6, smoothing: 0.5, streamline: 0.5, easing: (a) => Math.sin(a * Math.PI / 2), last: !!e.lastCommittedPoint };
  return aL(JS(t, n));
}
function wm(e, t) {
  return [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2];
}
var nL = /(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;
function aL(e) {
  if (!e.length) return "";
  let t = e.length - 1;
  return e.reduce((n, a, i, r) => (i === t ? n.push(a, wm(a, r[0]), "L", r[0], "Z") : n.push(a, wm(a, r[i + 1])), n), ["M", e[0], "Q"]).join(" ").replace(nL, "$1");
}
var os = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "line" || e === "freedraw", S1 = (e) => e !== "image" && e !== "frame" && e !== "magicframe", Em = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "freedraw" || e === "arrow" || e === "line", Sm = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "arrow" || e === "line", k1 = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "line" || e === "diamond" || e === "image", km = (e) => e === "arrow", lu = (e) => e === "arrow", gt = [1, 0], Xt = [0, 1], xn = [-1, 0], yn = [0, -1], Xc = (e, t) => {
  let n = hc(Math.atan2(t[1] - e[1], t[0] - e[0]));
  return n >= 315 || n < 45 ? yn : n >= 45 && n < 135 ? gt : n >= 135 && n < 225 ? Xt : xn;
}, cl = (e) => {
  let [t, n] = e, a = Math.abs(t), i = Math.abs(n);
  return t > i ? gt : t <= -i ? xn : n > a ? Xt : yn;
}, Xo = (e, t) => cl(le(e, t)), mi = (e, t) => vi(Xo(e, t)), vt = (e, t) => e[0] === t[0] && e[1] === t[1], vi = (e) => vt(e, gt) || vt(e, xn), t7 = (e, t, n) => {
  let a = ap(t);
  if (e.type === "diamond") {
    if (n[0] < e.x) return xn;
    if (n[1] < e.y) return yn;
    if (n[0] > e.x + e.width) return gt;
    if (n[1] > e.y + e.height) return Xt;
    let c = B(di(k(e.x + e.width / 2, e.y), a, 2), a, e.angle), d = B(di(k(e.x + e.width, e.y + e.height / 2), a, 2), a, e.angle), o = B(di(k(e.x + e.width / 2, e.y + e.height), a, 2), a, e.angle), u = B(di(k(e.x, e.y + e.height / 2), a, 2), a, e.angle);
    return kl([c, d, a], n) ? Xc(c, d) : kl([d, o, a], n) ? Xc(d, o) : kl([o, u, a], n) ? Xc(o, u) : Xc(u, c);
  }
  let i = di(k(t[0], t[1]), a, 2), r = di(k(t[2], t[1]), a, 2), l = di(k(t[0], t[3]), a, 2), s = di(k(t[2], t[3]), a, 2);
  return kl([i, r, a], n) ? yn : kl([r, s, a], n) ? gt : kl([s, l, a], n) ? Xt : xn;
}, n7 = (e) => [e[0] === 0 ? 0 : e[0] > 0 ? -1 : 1, e[1] === 0 ? 0 : e[1] > 0 ? -1 : 1], iL = (e) => [8, 8 + e], a7 = (e) => [1.5, 6 + e];
function rL(e) {
  let t = e.roughness, n = Math.max(e.width, e.height), a = Math.min(e.width, e.height);
  return a >= 20 && n >= 50 || a >= 15 && e.roundness && k1(e.type) || pe(e) && n >= 50 ? t : Math.min(t / (n < 10 ? 3 : 2), 2.5);
}
var _n = (e, t = !1) => {
  let n = { seed: e.seed, strokeLineDash: e.strokeStyle === "dashed" ? iL(e.strokeWidth) : e.strokeStyle === "dotted" ? a7(e.strokeWidth) : void 0, disableMultiStroke: e.strokeStyle !== "solid", strokeWidth: e.strokeStyle !== "solid" ? e.strokeWidth + 0.5 : e.strokeWidth, fillWeight: e.strokeWidth / 2, hachureGap: e.strokeWidth * 4, roughness: rL(e), stroke: e.strokeColor, preserveVertices: t || e.roughness < zb.cartoonist };
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse":
      return n.fillStyle = e.fillStyle, n.fill = ua(e.backgroundColor) ? void 0 : e.backgroundColor, e.type === "ellipse" && (n.curveFitting = 1), n;
    case "line":
    case "freedraw":
      return Mi(e.points) && (n.fillStyle = e.fillStyle, n.fill = e.backgroundColor === "transparent" ? void 0 : e.backgroundColor), n;
    case "arrow":
      return n;
    default:
      throw new Error(`Unimplemented type ${e.type}`);
  }
}, Mm = (e, t, n) => Hn(e) && (t || vn(e) && (n == null ? void 0 : n.get(e.id)) !== !0) && ua(e.backgroundColor) && ua(e.strokeColor) ? { ...e, roughness: 0, backgroundColor: "#d3d3d3", fillStyle: "solid" } : qi(e) ? { ...e, strokeColor: ua(e.strokeColor) ? "#000000" : e.strokeColor, backgroundColor: ua(e.backgroundColor) ? "#f4f4f6" : e.backgroundColor } : e, Cm = (e, t, n, a, i, r, l) => {
  let s = Am(e, t, n, a);
  if (s === null) return [];
  let c = (d, o) => {
    if (d === null) return [];
    let [, , u, f, p, U] = d;
    return [i.line(u, f, p, U, o)];
  };
  switch (a) {
    case "dot":
    case "circle":
    case "circle_outline": {
      let [d, o, u] = s;
      return delete r.strokeLineDash, [i.circle(d, o, u, { ...r, fill: a === "circle_outline" ? l : e.strokeColor, fillStyle: "solid", stroke: e.strokeColor, roughness: Math.min(0.5, r.roughness || 0) })];
    }
    case "triangle":
    case "triangle_outline": {
      let [d, o, u, f, p, U] = s;
      return delete r.strokeLineDash, [i.polygon([[d, o], [u, f], [p, U], [d, o]], { ...r, fill: a === "triangle_outline" ? l : e.strokeColor, fillStyle: "solid", roughness: Math.min(1, r.roughness || 0) })];
    }
    case "diamond":
    case "diamond_outline": {
      let [d, o, u, f, p, U, m, g] = s;
      return delete r.strokeLineDash, [i.polygon([[d, o], [u, f], [p, U], [m, g], [d, o]], { ...r, fill: a === "diamond_outline" ? l : e.strokeColor, fillStyle: "solid", roughness: Math.min(1, r.roughness || 0) })];
    }
    case "crowfoot_one":
      return c(s, r);
    case "bar":
    case "arrow":
    case "crowfoot_many":
    case "crowfoot_one_or_many":
    default: {
      let [d, o, u, f, p, U] = s;
      if (e.strokeStyle === "dotted") {
        let m = a7(e.strokeWidth - 1);
        r.strokeLineDash = [m[0], m[1] - 1];
      } else delete r.strokeLineDash;
      return r.roughness = Math.min(1, r.roughness || 0), [i.line(u, f, d, o, r), i.line(p, U, d, o, r), ...a === "crowfoot_one_or_many" ? c(Am(e, t, n, "crowfoot_one"), r) : []];
    }
  }
}, lL = (e, t, { isExporting: n, canvasBackgroundColor: a, embedsValidationStatus: i }) => {
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable": {
      let r;
      if (e.roundness) {
        let l = e.width, s = e.height, c = ma(Math.min(l, s), e);
        r = t.path(`M ${c} 0 L ${l - c} 0 Q ${l} 0, ${l} ${c} L ${l} ${s - c} Q ${l} ${s}, ${l - c} ${s} L ${c} ${s} Q 0 ${s}, 0 ${s - c} L 0 ${c} Q 0 0, ${c} 0`, _n(Mm(e, n, i), !0));
      } else r = t.rectangle(0, 0, e.width, e.height, _n(Mm(e, n, i), !1));
      return r;
    }
    case "diamond": {
      let r, [l, s, c, d, o, u, f, p] = r7(e);
      if (e.roundness) {
        let U = ma(Math.abs(l - f), e), m = ma(Math.abs(d - s), e);
        r = t.path(`M ${l + U} ${s + m} L ${c - U} ${d - m}
            C ${c} ${d}, ${c} ${d}, ${c - U} ${d + m}
            L ${o + U} ${u - m}
            C ${o} ${u}, ${o} ${u}, ${o - U} ${u - m}
            L ${f + U} ${p + m}
            C ${f} ${p}, ${f} ${p}, ${f + U} ${p - m}
            L ${l - U} ${s + m}
            C ${l} ${s}, ${l} ${s}, ${l + U} ${s + m}`, _n(e, !0));
      } else r = t.polygon([[l, s], [c, d], [o, u], [f, p]], _n(e));
      return r;
    }
    case "ellipse":
      return t.ellipse(e.width / 2, e.height / 2, e.width, e.height, _n(e));
    case "line":
    case "arrow": {
      let r, l = _n(e), s = e.points.length ? e.points : [k(0, 0)];
      if (ee(e) ? s.every((c) => Math.abs(c[0]) <= 1e6 && Math.abs(c[1]) <= 1e6) ? r = [t.path(sL(s, 16), _n(e, !0))] : (console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.", e.id, JSON.stringify(s)), r = []) : e.roundness ? r = [t.curve(s, l)] : l.fill ? r = [t.polygon(s, l)] : r = [t.linearPath(s, l)], e.type === "arrow") {
        let { startArrowhead: c = null, endArrowhead: d = "arrow" } = e;
        if (c !== null) {
          let o = Cm(e, r, "start", c, t, l, a);
          r.push(...o);
        }
        if (d !== null) {
          let o = Cm(e, r, "end", d, t, l, a);
          r.push(...o);
        }
      }
      return r;
    }
    case "freedraw": {
      let r;
      if (eL(e), Mi(e.points)) {
        let l = nk(e.points, 0.75);
        r = t.curve(l, { ..._n(e), stroke: "none" });
      } else r = null;
      return r;
    }
    case "frame":
    case "magicframe":
    case "text":
    case "image":
      return null;
    default:
      return il(e, `generateElementShape(): Unimplemented type ${e == null ? void 0 : e.type}`), null;
  }
}, sL = (e, t) => {
  let n = [];
  for (let i = 1; i < e.length - 1; i += 1) {
    let r = e[i - 1], l = e[i + 1], s = e[i], c = mi(s, r), d = mi(l, s), o = Math.min(t, Pe(e[i], l) / 2, Pe(e[i], r) / 2);
    c ? r[0] < s[0] ? n.push([e[i][0] - o, e[i][1]]) : n.push([e[i][0] + o, e[i][1]]) : r[1] < s[1] ? n.push([e[i][0], e[i][1] - o]) : n.push([e[i][0], e[i][1] + o]), n.push(e[i]), d ? l[0] < s[0] ? n.push([e[i][0] - o, e[i][1]]) : n.push([e[i][0] + o, e[i][1]]) : l[1] < s[1] ? n.push([e[i][0], e[i][1] - o]) : n.push([e[i][0], e[i][1] + o]);
  }
  let a = [`M ${e[0][0]} ${e[0][1]}`];
  for (let i = 0; i < n.length; i += 3) a.push(`L ${n[i][0]} ${n[i][1]}`), a.push(`Q ${n[i + 1][0]} ${n[i + 1][1]}, ${n[i + 2][0]} ${n[i + 2][1]}`);
  return a.push(`L ${e[e.length - 1][0]} ${e[e.length - 1][1]}`), a.join(" ");
}, cs = (e) => {
  let t = e.map((a) => a[0]), n = e.map((a) => a[1]);
  return { width: Math.max(...t) - Math.min(...t), height: Math.max(...n) - Math.min(...n) };
}, su = (e, t, n, a) => {
  let i = n.map((f) => f[e]), r = Math.max(...i), l = Math.min(...i), s = r - l, c = s === 0 ? 1 : t / s, d = 1 / 0, o = n.map((f) => {
    let p = f[e] * c, U = [...f];
    return U[e] = p, p < d && (d = p), U;
  });
  if (!a || o.length === 2) return o;
  let u = l - d;
  return o.map((f) => f.map((p, U) => U === e ? p + u : p));
}, i7 = class wd {
  static getBounds(t, n) {
    let a = wd.boundsCache.get(t);
    if (a != null && a.version && a.version === t.version && !rt(t)) return a.bounds;
    let i = wd.calculateBounds(t, n);
    return wd.boundsCache.set(t, { version: t.version, bounds: i }), i;
  }
  static calculateBounds(t, n) {
    let a, [i, r, l, s, c, d] = Ue(t, n);
    if (qn(t)) {
      let [o, u, f, p] = tp(t.points.map(([U, m]) => B(k(U, m), k(c - t.x, d - t.y), t.angle)));
      return [o + t.x, u + t.y, f + t.x, p + t.y];
    } else if (pe(t)) a = pL(t, c, d, n);
    else if (t.type === "diamond") {
      let [o, u] = B(k(c, r), k(c, d), t.angle), [f, p] = B(k(c, s), k(c, d), t.angle), [U, m] = B(k(i, d), k(c, d), t.angle), [g, b] = B(k(l, d), k(c, d), t.angle), v = Math.min(o, f, U, g), x = Math.min(u, p, m, b), y = Math.max(o, f, U, g), E = Math.max(u, p, m, b);
      a = [v, x, y, E];
    } else if (t.type === "ellipse") {
      let o = (l - i) / 2, u = (s - r) / 2, f = Math.cos(t.angle), p = Math.sin(t.angle), U = Math.hypot(o * f, u * p), m = Math.hypot(u * f, o * p);
      a = [c - U, d - m, c + U, d + m];
    } else {
      let [o, u] = B(k(i, r), k(c, d), t.angle), [f, p] = B(k(i, s), k(c, d), t.angle), [U, m] = B(k(l, s), k(c, d), t.angle), [g, b] = B(k(l, r), k(c, d), t.angle), v = Math.min(o, f, U, g), x = Math.min(u, p, m, b), y = Math.max(o, f, U, g), E = Math.max(u, p, m, b);
      a = [v, x, y, E];
    }
    return a;
  }
};
j(i7, "boundsCache", /* @__PURE__ */ new WeakMap());
var oL = i7, Ue = (e, t, n = !1) => {
  if (qn(e)) return dL(e);
  if (pe(e)) return J.getElementAbsoluteCoords(e, t, n);
  if (q(e)) {
    let a = t ? Vt(e, t) : null;
    if (ye(a)) {
      let { x: i, y: r } = J.getBoundTextElementPosition(a, e, t);
      return [i, r, i + e.width, r + e.height, i + e.width / 2, r + e.height / 2];
    }
  }
  return [e.x, e.y, e.x + e.width, e.y + e.height, e.x + e.width / 2, e.y + e.height / 2];
}, Im = (e, t) => {
  let [n, a, i, r, l, s] = Ue(e, t), c = k(l, s);
  if (pe(e) || qn(e)) {
    let b = [], v = 0;
    for (; v < e.points.length - 1; ) b.push(se(B(k(e.points[v][0] + e.x, e.points[v][1] + e.y), c, e.angle), B(k(e.points[v + 1][0] + e.x, e.points[v + 1][1] + e.y), c, e.angle))), v++;
    return b;
  }
  let [d, o, u, f, p, U, m, g] = [[n, a], [i, a], [n, r], [i, r], [l, a], [l, r], [n, s], [i, s]].map((b) => B(b, c, e.angle));
  return e.type === "diamond" ? [se(p, m), se(p, g), se(U, m), se(U, g)] : e.type === "ellipse" ? [se(p, m), se(p, g), se(U, m), se(U, g), se(p, m), se(p, g), se(U, m), se(U, g)] : [se(d, o), se(u, f), se(d, u), se(o, f), se(d, g), se(u, g), se(o, m), se(f, m)];
}, r7 = (e) => {
  let t = Math.floor(e.width / 2) + 1, n = 0, a = e.width, i = Math.floor(e.height / 2) + 1, r = t, l = e.height;
  return [t, n, a, i, r, l, 0, i];
}, Tm = (e, t, n, a, i) => {
  let r = 1 - e;
  return Math.pow(r, 3) * t + 3 * Math.pow(r, 2) * e * n + 3 * r * Math.pow(e, 2) * a + Math.pow(e, 3) * i;
}, _m = (e, t, n, a) => {
  let i = t - e, r = n - t, l = a - n, s = 3 * i - 6 * r + 3 * l, c = 6 * r - 6 * i, d = 3 * i, o = c * c - 4 * s * d;
  if (!(o >= 0)) return !1;
  let u = null, f = null, p = 1 / 0, U = 1 / 0;
  return s === 0 ? p = U = -d / c : (p = (-c + Math.sqrt(o)) / (2 * s), U = (-c - Math.sqrt(o)) / (2 * s)), p >= 0 && p <= 1 && (u = Tm(p, e, t, n, a)), U >= 0 && U <= 1 && (f = Tm(U, e, t, n, a)), [u, f];
}, cL = (e, t, n, a) => {
  let i = _m(e[0], t[0], n[0], a[0]), r = _m(e[1], t[1], n[1], a[1]), l = Math.min(e[0], a[0]), s = Math.max(e[0], a[0]);
  if (i) {
    let o = i.filter((u) => u !== null);
    l = Math.min(l, ...o), s = Math.max(s, ...o);
  }
  let c = Math.min(e[1], a[1]), d = Math.max(e[1], a[1]);
  if (r) {
    let o = r.filter((u) => u !== null);
    c = Math.min(c, ...o), d = Math.max(d, ...o);
  }
  return [l, c, s, d];
}, qu = (e, t) => {
  let n = k(0, 0), { minX: a, minY: i, maxX: r, maxY: l } = e.reduce((s, { op: c, data: d }) => {
    if (c === "move") {
      let o = O0(d);
      rn(o != null, "Op data is not a point"), n = o;
    } else if (c === "bcurveTo") {
      let o = k(d[0], d[1]), u = k(d[2], d[3]), f = k(d[4], d[5]), p = t ? t(o) : o, U = t ? t(u) : u, m = t ? t(f) : f, g = t ? t(n) : n;
      n = f;
      let [b, v, x, y] = cL(g, p, U, m);
      s.minX = Math.min(s.minX, b), s.minY = Math.min(s.minY, v), s.maxX = Math.max(s.maxX, x), s.maxY = Math.max(s.maxY, y);
    }
    return s;
  }, { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 });
  return [a, i, r, l];
}, tp = (e) => {
  let t = 1 / 0, n = 1 / 0, a = -1 / 0, i = -1 / 0;
  for (let [r, l] of e) t = Math.min(t, r), n = Math.min(n, l), a = Math.max(a, r), i = Math.max(i, l);
  return [t, n, a, i];
}, dL = (e) => {
  let [t, n, a, i] = tp(e.points), r = t + e.x, l = n + e.y, s = a + e.x, c = i + e.y;
  return [r, l, s, c, (r + s) / 2, (l + c) / 2];
}, uL = (e) => {
  switch (e) {
    case "arrow":
      return 25;
    case "diamond":
    case "diamond_outline":
      return 12;
    case "crowfoot_many":
    case "crowfoot_one":
    case "crowfoot_one_or_many":
      return 20;
    default:
      return 15;
  }
}, hL = (e) => {
  switch (e) {
    case "bar":
      return 90;
    case "arrow":
      return 20;
    default:
      return 25;
  }
}, Am = (e, t, n, a) => {
  if (t.length < 1) return null;
  let i = yr(t[0]);
  if (i.length < 1) return null;
  let r = n === "start" ? 1 : i.length - 1, l = i[r].data;
  rn(l.length === 6, "Op data length is not 6");
  let s = k(l[4], l[5]), c = k(l[2], l[3]), d = k(l[0], l[1]), o = i[r - 1], u = k(0, 0);
  if (o.op === "move") {
    let P = O0(o.data);
    rn(P != null, "Op data is not a point"), u = P;
  } else o.op === "bcurveTo" && (u = k(o.data[4], o.data[5]));
  let f = (P, N) => Math.pow(1 - P, 3) * s[N] + 3 * P * Math.pow(1 - P, 2) * c[N] + 3 * Math.pow(P, 2) * (1 - P) * d[N] + u[N] * Math.pow(P, 3), [p, U] = n === "start" ? u : s, [m, g] = [f(0.3, 0), f(0.3, 1)], b = Math.hypot(p - m, U - g), v = (p - m) / b, x = (U - g) / b, y = uL(a), E = 0;
  {
    let [P, N] = n === "end" ? e.points[e.points.length - 1] : e.points[0], [$, R] = e.points.length > 1 ? n === "end" ? e.points[e.points.length - 2] : e.points[1] : [0, 0];
    E = Math.hypot(P - $, N - R);
  }
  let S = Math.min(y, E * (a === "diamond" || a === "diamond_outline" ? 0.25 : 0.5)), w = p - v * S, M = U - x * S;
  if (a === "dot" || a === "circle" || a === "circle_outline") {
    let P = Math.hypot(M - U, w - p) + e.strokeWidth - 2;
    return [p, U, P];
  }
  let I = hL(a);
  if (a === "crowfoot_many" || a === "crowfoot_one_or_many") {
    let [P, N] = B(k(p, U), k(w, M), Wr(-I)), [$, R] = B(k(p, U), k(w, M), Wr(I));
    return [w, M, P, N, $, R];
  }
  let [T, _] = B(k(w, M), k(p, U), -I * Math.PI / 180), [A, D] = B(k(w, M), k(p, U), Wr(I));
  if (a === "diamond" || a === "diamond_outline") {
    let P, N;
    if (n === "start") {
      let [$, R] = e.points.length > 1 ? e.points[1] : [0, 0];
      [P, N] = B(k(p + S * 2, U), k(p, U), Math.atan2(R - U, $ - p));
    } else {
      let [$, R] = e.points.length > 1 ? e.points[e.points.length - 2] : [0, 0];
      [P, N] = B(k(p - S * 2, U), k(p, U), Math.atan2(U - R, p - $));
    }
    return [p, U, T, _, P, N, A, D];
  }
  return [p, U, T, _, A, D];
}, fL = (e) => {
  let t = vr.generator(), n = _n(e), a = e.roundness ? "curve" : n.fill ? "polygon" : "linearPath";
  return t[a](e.points, n);
}, pL = (e, t, n, a) => {
  var d;
  let i = be(e, a);
  if (e.points.length < 2) {
    let [o, u] = e.points[0], [f, p] = B(k(e.x + o, e.y + u), k(t, n), e.angle), U = [f, p, f, p];
    if (i) {
      let m = J.getMinMaxXYWithBoundText(e, a, [f, p, f, p], i);
      U = [m[0], m[1], m[2], m[3]];
    }
    return U;
  }
  let r = ((d = pt.get(e)) == null ? void 0 : d[0]) ?? fL(e), l = yr(r), s = qu(l, ([o, u]) => B(k(e.x + o, e.y + u), k(t, n), e.angle)), c = [s[0], s[1], s[2], s[3]];
  if (i) {
    let o = J.getMinMaxXYWithBoundText(e, a, c, i);
    c = [o[0], o[1], o[2], o[3]];
  }
  return c;
}, ya = (e, t) => oL.getBounds(e, t), ze = (e, t) => {
  if (!e.length) return [0, 0, 0, 0];
  let n = 1 / 0, a = -1 / 0, i = 1 / 0, r = -1 / 0, l = t || ue(e);
  return e.forEach((s) => {
    let [c, d, o, u] = ya(s, l);
    n = Math.min(n, c), i = Math.min(i, d), a = Math.max(a, o), r = Math.max(r, u);
  }), [n, i, a, r];
}, np = (e, t) => {
  let [n, a, i, r] = ze(e);
  return [n + t.x, a + t.y, i + t.x, r + t.y];
}, or = (e, t, n, a) => {
  if (!(pe(e) || qn(e))) return [e.x, e.y, e.x + t, e.y + n];
  let i = su(0, t, su(1, n, e.points, a), a), r;
  if (qn(e)) r = tp(i);
  else {
    let o = vr.generator(), u = e.roundness ? o.curve(i, _n(e)) : o.linearPath(i, _n(e)), f = yr(u);
    r = qu(f);
  }
  let [l, s, c, d] = r;
  return [l + e.x, s + e.y, c + e.x, d + e.y];
}, jm = (e, t) => {
  let n = vr.generator(), a = e.roundness == null ? n.linearPath(t, _n(e)) : n.curve(t, _n(e)), i = yr(a), [r, l, s, c] = qu(i);
  return [r + e.x, l + e.y, s + e.x, c + e.y];
}, UL = (e, t) => {
  if (!e.length) return [0, 0, 0, 0];
  let n = 1 / 0, a = e[0], i = ue(e);
  return e.forEach((r) => {
    let [l, s, c, d] = ya(r, i), o = Pe(k((l + c) / 2, (s + d) / 2), k(t.x, t.y));
    o < n && (n = o, a = r);
  }), ya(a, i);
}, ga = (e) => {
  let [t, n, a, i] = ze(e);
  return { minX: t, minY: n, maxX: a, maxY: i, width: a - t, height: i - n, midX: (t + a) / 2, midY: (n + i) / 2 };
}, mL = ({ scrollX: e, scrollY: t, width: n, height: a, zoom: i }) => [-e, -t, -e + n / i.value, -t + a / i.value], ap = (e) => k(e[0] + (e[2] - e[0]) / 2, e[1] + (e[3] - e[1]) / 2), gL = (e, t) => {
  if (e == null || t == null) return !1;
  let [n, a, i, r] = e, [l, s, c, d] = t;
  return n < c && i > l && a < d && r > s;
}, Ju = (e, t) => {
  switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      return bL(e, t);
    case "diamond":
      return vL(e, t);
    case "ellipse":
      return xL(e, t);
  }
}, bL = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = B(t, n, -e.angle), [i, r] = O8(e);
  return Math.min(...i.map((l) => $0(a, l)), ...r.map((l) => Yb(l, a)).filter((l) => l !== null));
}, vL = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = B(t, n, -e.angle), [i, r] = $8(e);
  return Math.min(...i.map((l) => $0(a, l)), ...r.map((l) => Yb(l, a)).filter((l) => l !== null));
}, xL = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2);
  return jD(B(t, n, -e.angle), N8(n, e.width / 2, e.height / 2));
}, yL = (e) => !e[L.CTRL_OR_CMD], Br = (e) => e.isBindingEnabled, Je = 5, ip = 10, rp = 4, wL = (e, t) => {
  let n = [];
  return t.forEach((a) => {
    let i = e.getNonDeletedElement(a);
    i != null && n.push(i);
  }), n;
}, Qu = (e, t, n, a, i) => {
  let r = /* @__PURE__ */ new Set(), l = /* @__PURE__ */ new Set();
  Dm(e, t, n, "start", r, l, a), Dm(e, n, t, "end", r, l, a);
  let s = Array.from(l).filter((c) => !r.has(c));
  wL(i, s).forEach((c) => {
    var d;
    W(c, { boundElements: (d = c.boundElements) == null ? void 0 : d.filter((o) => o.type !== "arrow" || o.id !== e.id) });
  });
}, Dm = (e, t, n, a, i, r, l) => {
  if (t !== "keep") {
    if (t === null) {
      let s = CL(e, a);
      s != null && r.add(s);
      return;
    }
    c7(e) ? (n == null || (n === "keep" ? !s7(e, t, a) : a === "start" || n.id !== t.id)) && (qa(e, t, a, l), i.add(t.id)) : (qa(e, t, a, l), i.add(t.id));
  }
}, EL = (e, t, n, a) => {
  var l, s;
  let i = d7(e, t, n), r = t === "start" ? (l = e.startBinding) == null ? void 0 : l.elementId : (s = e.endBinding) == null ? void 0 : s.elementId;
  if (r) {
    let c = n.get(r);
    if (xa(c) && Ed(c, i, n, a)) return c;
  }
  return null;
}, l7 = (e, t, n) => ["start", "end"].map((a) => EL(e, a, t, n)), SL = (e, t, n, a, i, r) => {
  let l = e.points.length - 1, s = n.findIndex((u) => u === 0) > -1, c = n.findIndex((u) => u === l) > -1, d = s ? t ? Fl(e, "start", a, i, r) : null : ee(e) ? "keep" : Fl(e, "start", a, i, r), o = c ? t ? Fl(e, "end", a, i, r) : null : ee(e) ? "keep" : Fl(e, "end", a, i, r);
  return [d, o];
}, kL = (e, t, n, a, i) => {
  if (ee(e)) return ["keep", "keep"];
  let [r, l] = l7(e, t, i), s = r && a ? Fl(e, "start", t, n, i) : null, c = l && a ? Fl(e, "end", t, n, i) : null;
  return [s, c];
}, ou = (e, t, n, a, i, r, l) => {
  e.forEach((s) => {
    let [c, d] = r != null && r.length ? SL(s, i, r ?? [], t, n, l) : kL(s, t, n, i, l);
    Qu(s, c, d, t, a);
  });
}, of = (e, t, n) => e.length > 50 ? [] : e.filter(pe).flatMap((a) => l7(a, t, n)).filter((a) => a !== null).filter((a) => e.filter((i) => i.id === (a == null ? void 0 : a.id)).length === 0), M1 = (e, t, n, a, i) => {
  t.startBoundElement != null && qa(e, t.startBoundElement, "start", a);
  let r = ha(n, i, a, t.zoom, ee(e), ee(e));
  r !== null && (s7(e, r, "end") || qa(e, r, "end", a));
}, ML = (e, t) => {
  let n = e.gap, a = gc(t, t.width, t.height);
  return n > a && (n = ip + rp), { ...e, gap: n };
}, qa = (e, t, n, a) => {
  if (!ye(e)) return;
  let i = { elementId: t.id, ...ee(e) ? { ...cu(e, t, n), focus: 0, gap: 0 } : { ...ML(_L(e, t, n, a), t) } };
  W(e, { [n === "start" ? "startBinding" : "endBinding"]: i }), ue(t.boundElements || []).has(e.id) || W(t, { boundElements: (t.boundElements || []).concat({ id: e.id, type: "arrow" }) });
}, s7 = (e, t, n) => {
  let a = e[n === "start" ? "endBinding" : "startBinding"];
  return o7(e, a == null ? void 0 : a.elementId, t);
}, o7 = (e, t, n) => t === n.id && c7(e), c7 = (e) => e.points.length < 3, CL = (e, t) => {
  let n = t === "start" ? "startBinding" : "endBinding", a = e[n];
  return a == null ? null : (W(e, { [n]: null }), a.elementId);
}, ha = (e, t, n, a, i, r) => {
  if (r) {
    let l = !1, s = TL(t, (d) => xa(d, !1) && Ed(d, e, n, a, (i || !qh(d)) && !de(d))).filter((d) => l ? !1 : (qh(d) || (l = !0), !0));
    if (!s || s.length === 0) return null;
    if (s.length === 1) return s[0];
    let c = s.filter((d) => Ed(d, e, n, a, !1));
    return c.length === 1 ? c[0] : s.sort((d, o) => o.width ** 2 + o.height ** 2 - (d.width ** 2 + d.height ** 2)).pop();
  }
  return IL(t, (l) => xa(l, !1) && Ed(l, e, n, a, (i || !qh(l)) && !de(l)));
}, IL = (e, t) => {
  let n = null;
  for (let a = e.length - 1; a >= 0; --a) {
    let i = e[a];
    if (!i.isDeleted && t(i)) {
      n = i;
      break;
    }
  }
  return n;
}, TL = (e, t) => {
  let n = [];
  for (let a = e.length - 1; a >= 0; --a) {
    let i = e[a];
    i.isDeleted || t(i) && n.push(i);
  }
  return n;
}, _L = (e, t, n, a) => {
  let i = n === "start" ? -1 : 1, r = i === -1 ? 0 : e.points.length - 1, l = r - i, s = J.getPointAtIndexGlobalCoordinates(e, r, a), c = J.getPointAtIndexGlobalCoordinates(e, l, a);
  return { focus: $L(t, c, s), gap: Math.max(1, Ju(t, s)) };
}, Sn = (e, t, n) => {
  let { newSize: a, simultaneouslyUpdated: i } = n ?? {}, r = jL(i);
  xa(e) && eh(t, e, (l) => {
    var U, m;
    if (!pe(l) || l.isDeleted || !AL(l, e)) return;
    let s = l.startBinding ? t.get(l.startBinding.elementId) : null, c = l.endBinding ? t.get(l.endBinding.elementId) : null, d = null, o = null;
    s && c && (d = ya(s, t), o = ya(c, t));
    let u = { startBinding: Lm(e, l.startBinding, a), endBinding: Lm(e, l.endBinding, a) };
    if (r.has(l.id)) {
      W(l, u, !0);
      return;
    }
    let f = th(t, l, (g, b) => {
      var v, x;
      if (g && xa(g) && (b === "startBinding" || b === "endBinding") && (e.id === ((v = l[b]) == null ? void 0 : v.elementId) || e.id === ((x = l[b === "startBinding" ? "endBinding" : "startBinding"]) == null ? void 0 : x.elementId) && !gL(d, o))) {
        let y = OL(l, b, u[b], g, t);
        if (y) return { index: b === "startBinding" ? 0 : l.points.length - 1, point: y };
      }
      return null;
    }).filter((g) => g !== null);
    J.movePoints(l, f, { ...e.id === ((U = l.startBinding) == null ? void 0 : U.elementId) ? { startBinding: u.startBinding } : {}, ...e.id === ((m = l.endBinding) == null ? void 0 : m.elementId) ? { endBinding: u.endBinding } : {} });
    let p = be(l, t);
    p && !p.isDeleted && bc(l, t, !1);
  });
}, AL = (e, t) => {
  var n, a;
  return ((n = e.startBinding) == null ? void 0 : n.elementId) === t.id || ((a = e.endBinding) == null ? void 0 : a.elementId) === t.id;
}, jL = (e) => new Set((e || []).map((t) => t.id)), DL = (e, t, n, a, i, r, l) => {
  let s = cl(le(t, e));
  return !n || !a ? s : LL(r, n, i, l) ? t7(n, a, e) : cl(le(e, k(n.x + n.width / 2, n.y + n.height / 2)));
}, LL = (e, t, n, a) => {
  let i = Ju(t, e), r = gc(t, t.width, t.height, a);
  return i > r ? null : i;
}, Wo = (e, t, n) => {
  let a = t && Fa(t), i = e.points[n === "start" ? 0 : e.points.length - 1], r = k(e.x + i[0], e.y + i[1]), l = RM(t) ? PL(t, r) : r;
  if (t && a) {
    let s = ap(a), c = z8(t, se(s, ke(bt(nn(le(l, s)), Math.max(t.width, t.height)), s)))[0], d = Pe(l, s), o = Math.max(Pe(c ?? l, s), 1e-4), u = Ga(d / o, 6);
    switch (!0) {
      case u > 0.9:
        return d - o > Je || zo(l, c) < 1e-4 ? l : ke(bt(nn(le(l, c ?? s)), u > 1 ? Je : -Je), c ?? s);
      default:
        return RL(l, t, a);
    }
  }
  return l;
}, RL = (e, t, n) => {
  let a = ap(n), i = cl(le(e, a));
  switch (!0) {
    case vt(i, yn):
      return B(k((n[0] + n[2]) / 2 + 0.1, n[1]), a, t.angle);
    case vt(i, gt):
      return B(k(n[2], (n[1] + n[3]) / 2 + 0.1), a, t.angle);
    case vt(i, Xt):
      return B(k((n[0] + n[2]) / 2 - 0.1, n[3]), a, t.angle);
    default:
      return B(k(n[0], (n[1] + n[3]) / 2 - 0.1), a, t.angle);
  }
}, PL = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = B(t, n, -e.angle);
  return a[0] < e.x && a[1] < e.y ? a[1] - e.y > -Je ? B(k(e.x - Je, e.y), n, e.angle) : B(k(e.x, e.y - Je), n, e.angle) : a[0] < e.x && a[1] > e.y + e.height ? a[0] - e.x > -Je ? B(k(e.x, e.y + e.height + Je), n, e.angle) : B(k(e.x - Je, e.y + e.height), n, e.angle) : a[0] > e.x + e.width && a[1] > e.y + e.height ? a[0] - e.x < e.width + Je ? B(k(e.x + e.width, e.y + e.height + Je), n, e.angle) : B(k(e.x + e.width + Je, e.y + e.height), n, e.angle) : a[0] > e.x + e.width && a[1] < e.y ? a[0] - e.x < e.width + Je ? B(k(e.x + e.width, e.y - Je), n, e.angle) : B(k(e.x + e.width + Je, e.y), n, e.angle) : t;
}, NL = (e, t, n = 0.05) => {
  let { x: a, y: i, width: r, height: l, angle: s } = e, c = k(a + r / 2 - 0.1, i + l / 2 - 0.1), d = B(t, c, -s), o = Se(n * l, 5, 80), u = Se(n * r, 5, 80);
  return d[0] <= a + r / 2 && d[1] > c[1] - o && d[1] < c[1] + o ? B(k(a - Je, c[1]), c, s) : d[1] <= i + l / 2 && d[0] > c[0] - u && d[0] < c[0] + u ? B(k(c[0], i - Je), c, s) : d[0] >= a + r / 2 && d[1] > c[1] - o && d[1] < c[1] + o ? B(k(a + r + Je, c[1]), c, s) : d[1] >= i + l / 2 && d[0] > c[0] - u && d[0] < c[0] + u ? B(k(c[0], i + l + Je), c, s) : t;
}, OL = (e, t, n, a, i) => {
  if (n == null || n.elementId !== a.id && e.points.length > 2) return null;
  let r = t === "startBinding" ? -1 : 1, l = r === -1 ? 0 : e.points.length - 1;
  if (ee(e) && nu(n)) {
    let u = nh(n.fixedPoint) ?? cu(e, a, t === "startBinding" ? "start" : "end").fixedPoint, f = k(a.x + a.width / 2, a.y + a.height / 2), p = k(a.x + u[0] * a.width, a.y + u[1] * a.height), U = B(p, f, a.angle);
    return J.pointFromAbsoluteCoords(e, U, i);
  }
  let s = l - r, c = J.getPointAtIndexGlobalCoordinates(e, s, i), d = FL(a, n.focus, c), o;
  if (n.gap === 0) o = d;
  else {
    let u = J.getPointAtIndexGlobalCoordinates(e, l, i), f = k(a.x + a.width / 2, a.y + a.height / 2), p = Pe(c, u) + Pe(c, f) + Math.max(a.width, a.height) * 2, U = z8(a, se(c, ke(bt(nn(le(d, c)), p), c)), n.gap).sort((m, g) => zo(m, c) - zo(g, c));
    U.length > 1 ? o = U[0] : U.length === 1 ? o = d : o = u;
  }
  return J.pointFromAbsoluteCoords(e, o, i);
}, cu = (e, t, n, a) => {
  let i = [t.x, t.y, t.x + t.width, t.y + t.height], r = Wo(e, t, n), l = k(i[0] + (i[2] - i[0]) / 2, i[1] + (i[3] - i[1]) / 2), s = B(r, l, -t.angle);
  return { fixedPoint: nh([(s[0] - t.x) / t.width, (s[1] - t.y) / t.height]) };
}, Lm = (e, t, n) => {
  if (t == null || n == null) return t;
  let { width: a, height: i } = n, { width: r, height: l } = e, s = Math.max(1, Math.min(gc(e, a, i), t.gap * (a < i ? a / r : i / l)));
  return { ...t, gap: s };
}, Fl = (e, t, n, a, i) => ha(d7(e, t, n), a, n, i, ee(e), ee(e)), d7 = (e, t, n) => {
  let a = t === "start" ? 0 : -1;
  return da(J.getPointAtIndexGlobalCoordinates(e, a, n));
}, u7 = (e, t, n, a) => {
  let i = /* @__PURE__ */ new Set(), r = /* @__PURE__ */ new Set(), l = a === "duplicatesServeAsOld", s = new Map([...n].map(([c, d]) => [d, c]));
  t.forEach((c) => {
    let { boundElements: d } = c;
    if (d != null && d.length > 0 && (d.forEach((o) => {
      l && !n.has(o.id) && i.add(o.id);
    }), r.add(n.get(c.id))), Ha(c)) {
      if (c.startBinding != null) {
        let { elementId: o } = c.startBinding;
        l && !n.has(o) && r.add(o);
      }
      if (c.endBinding != null) {
        let { elementId: o } = c.endBinding;
        l && !n.has(o) && r.add(o);
      }
      (c.startBinding != null || c.endBinding != null) && i.add(n.get(c.id));
    }
  }), e.filter(({ id: c }) => i.has(c)).forEach((c) => {
    let { startBinding: d, endBinding: o } = c;
    W(c, { startBinding: Rm(d, n), endBinding: Rm(o, n) });
  }), e.filter(({ id: c }) => r.has(c)).forEach((c) => {
    var u;
    let d = s.get(c.id), o = (u = e.find(({ id: f }) => f === d)) == null ? void 0 : u.boundElements;
    o && o.length > 0 && W(c, { boundElements: o.map((f) => n.has(f.id) ? { id: n.get(f.id), type: f.type } : f) });
  });
}, Rm = (e, t) => e == null ? null : { ...e, elementId: t.get(e.elementId) ?? e.elementId }, h7 = (e, t) => {
  let n = ue(e);
  for (let a of t) zl.unbindAffected(n, a, W), Bl.unbindAffected(n, a, W);
}, Vo = (e, t, n = []) => {
  if (!e) return null;
  let a = e.filter((i) => !t.has(i.id));
  return a.push(...n.map((i) => ({ id: i.id, type: i.type }))), a;
}, Ed = (e, { x: t, y: n }, a, i, r) => {
  let l = gc(e, e.width, e.height, i), s = Ui(e, a);
  return x1(k(t, n), s, l) || r === !0 && ss(k(t, n), Fa(e));
}, gc = (e, t, n, a) => {
  let i = a != null && a.value && a.value < 1 ? a.value : 1, r = (e.type === "diamond" ? 1 / Math.sqrt(2) : 1) * Math.min(t, n);
  return Math.max(16, Math.min(0.25 * r, 32), ip / i + rp);
}, $L = (e, t, n) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2);
  if (va(t, n)) return 0;
  let i = B(t, a, -e.angle), r = B(n, a, -e.angle), l = Math.sign(Rt(le(r, t), le(r, a))) * -1, s = se(r, ke(bt(nn(le(r, i)), Math.max(e.width * 2, e.height * 2)), r)), c = e.type === "diamond" ? [se(k(e.x + e.width / 2, e.y), k(e.x + e.width / 2, e.y + e.height)), se(k(e.x, e.y + e.height / 2), k(e.x + e.width, e.y + e.height / 2))] : [se(k(e.x, e.y), k(e.x + e.width, e.y + e.height)), se(k(e.x + e.width, e.y), k(e.x, e.y + e.height))], d = e.type === "diamond" ? [se(k(e.x + e.width / 2, e.y - e.height), k(e.x + e.width / 2, e.y + e.height * 2)), se(k(e.x - e.width, e.y + e.height / 2), k(e.x + e.width * 2, e.y + e.height / 2))] : [se(k(e.x - e.width, e.y - e.height), k(e.x + e.width * 2, e.y + e.height * 2)), se(k(e.x + e.width * 2, e.y - e.height), k(e.x - e.width, e.y + e.height * 2))];
  return [Bo(s, d[0]), Bo(s, d[1])].filter((o) => o !== null).sort((o, u) => zo(o, n) - zo(u, n)).map((o, u) => l * Pe(a, o) / (e.type === "diamond" ? Pe(c[u][0], c[u][1]) / 2 : Math.sqrt(e.width ** 2 + e.height ** 2) / 2)).sort((o, u) => Math.abs(o) - Math.abs(u))[0] ?? 0;
}, FL = (e, t, n) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2);
  if (t === 0) return a;
  let i = (e.type === "diamond" ? [k(e.x, e.y + e.height / 2), k(e.x + e.width / 2, e.y), k(e.x + e.width, e.y + e.height / 2), k(e.x + e.width / 2, e.y + e.height)] : [k(e.x, e.y), k(e.x + e.width, e.y), k(e.x + e.width, e.y + e.height), k(e.x, e.y + e.height)]).map((l) => ke(bt(le(l, a), Math.abs(t)), a)).map((l) => B(l, a, e.angle)), r = [Rt(le(n, i[0]), le(i[1], i[0])) > 0 && (t > 0 ? Rt(le(n, i[1]), le(i[2], i[1])) < 0 : Rt(le(n, i[3]), le(i[0], i[3])) < 0), Rt(le(n, i[1]), le(i[2], i[1])) > 0 && (t > 0 ? Rt(le(n, i[2]), le(i[3], i[2])) < 0 : Rt(le(n, i[0]), le(i[1], i[0])) < 0), Rt(le(n, i[2]), le(i[3], i[2])) > 0 && (t > 0 ? Rt(le(n, i[3]), le(i[0], i[3])) < 0 : Rt(le(n, i[1]), le(i[2], i[1])) < 0), Rt(le(n, i[3]), le(i[0], i[3])) > 0 && (t > 0 ? Rt(le(n, i[0]), le(i[1], i[0])) < 0 : Rt(le(n, i[2]), le(i[3], i[2])) < 0)];
  return r[0] ? t > 0 ? i[1] : i[0] : r[1] ? t > 0 ? i[2] : i[1] : r[2] ? t > 0 ? i[3] : i[2] : t > 0 ? i[0] : i[3];
}, zL = /* @__PURE__ */ new Set(["boundElements", "frameId", "containerId", "startBinding", "endBinding"]), eh = (e, t, n) => {
  var a;
  xa(t) && (((a = t.boundElements) == null ? void 0 : a.slice()) ?? []).forEach(({ id: i }) => {
    n(e.get(i), "boundElements", i);
  });
}, th = (e, t, n) => {
  let a = [];
  if (t.frameId) {
    let i = t.frameId;
    a.push(n(e.get(i), "frameId", i));
  }
  if (rt(t)) {
    let i = t.containerId;
    a.push(n(e.get(i), "containerId", i));
  }
  if (ye(t)) {
    if (t.startBinding) {
      let i = t.startBinding.elementId;
      a.push(n(e.get(i), "startBinding", i));
    }
    if (t.endBinding) {
      let i = t.endBinding.elementId;
      a.push(n(e.get(i), "endBinding", i));
    }
  }
  return a;
}, zl = class {
  static unbindAffected(e, t, n) {
    t && th(e, t, (a) => {
      !a || a.isDeleted || eh(e, a, (i, r, l) => {
        l === t.id && n(a, { boundElements: Vo(a.boundElements, /* @__PURE__ */ new Set([l])) });
      });
    });
  }
};
j(zl, "rebindAffected", (e, t, n) => {
  !t || t.isDeleted || th(e, t, (a, i) => {
    var r, l;
    if (!a || a.isDeleted) {
      n(t, { [i]: null });
      return;
    }
    i !== "frameId" && ((r = a.boundElements) != null && r.find((s) => s.id === t.id) || (ye(t) && n(a, { boundElements: Vo(a.boundElements, /* @__PURE__ */ new Set(), new Array(t)) }), q(t) && ((l = a.boundElements) != null && l.find((s) => s.type === "text") ? n(t, { [i]: null }) : n(a, { boundElements: Vo(a.boundElements, /* @__PURE__ */ new Set(), new Array(t)) }))));
  });
});
var Bl = class {
  static unbindAffected(e, t, n) {
    t && eh(e, t, (a) => {
      !a || a.isDeleted || th(e, a, (i, r, l) => {
        l === t.id && n(a, { [r]: null });
      });
    });
  }
};
j(Bl, "rebindAffected", (e, t, n) => {
  !t || t.isDeleted || eh(e, t, (a, i, r) => {
    var l, s;
    if (!a || a.isDeleted) {
      n(t, { boundElements: Vo(t.boundElements, /* @__PURE__ */ new Set([r])) });
      return;
    }
    q(a) && (((s = (((l = t.boundElements) == null ? void 0 : l.slice()) ?? []).reverse().find((c) => c.type === "text")) == null ? void 0 : s.id) === a.id ? a.containerId !== t.id && n(a, { containerId: t.id }) : (a.containerId !== null && n(a, { containerId: null }), n(t, { boundElements: Vo(t.boundElements, /* @__PURE__ */ new Set([a.id])) })));
  });
});
var C1 = (e, t) => {
  let [n, a] = nh(e);
  return B(k(t.x + t.width * n, t.y + t.height * a), k(t.x + t.width / 2, t.y + t.height / 2), t.angle);
}, BL = (e, t) => {
  let n = e.startBinding && t.get(e.startBinding.elementId), a = e.endBinding && t.get(e.endBinding.elementId), i = n && e.startBinding ? C1(e.startBinding.fixedPoint, n) : k(e.x + e.points[0][0], e.y + e.points[0][1]), r = a && e.endBinding ? C1(e.endBinding.fixedPoint, a) : k(e.x + e.points[e.points.length - 1][0], e.y + e.points[e.points.length - 1][1]);
  return [i, r];
}, HL = (e, t) => {
  let [n, a] = BL(e, t);
  return [J.pointFromAbsoluteCoords(e, n, t), J.pointFromAbsoluteCoords(e, a, t)];
}, nh = (e) => e && (Math.abs(e[0] - 0.5) < 1e-4 || Math.abs(e[1] - 0.5) < 1e-4) ? e.map((t) => Math.abs(t - 0.5) < 1e-4 ? 0.5001 : t) : e, XL = (e, t) => {
  let [n, a, i, r] = t, { x: l, y: s } = ca({ sceneX: n, sceneY: a }, e), { x: c, y: d } = ca({ sceneX: i, sceneY: r }, e);
  return c - l > e.width || d - s > e.height;
}, f7 = ({ scenePoint: e, viewportDimensions: t, zoom: n, offsets: a }) => {
  let i = (t.width - ((a == null ? void 0 : a.right) ?? 0)) / 2 / n.value - e.x;
  i += ((a == null ? void 0 : a.left) ?? 0) / 2 / n.value;
  let r = (t.height - ((a == null ? void 0 : a.bottom) ?? 0)) / 2 / n.value - e.y;
  return r += ((a == null ? void 0 : a.top) ?? 0) / 2 / n.value, { scrollX: i, scrollY: r };
}, Go = (e, t) => {
  if (e = gN(e), !e.length) return { scrollX: 0, scrollY: 0 };
  let [n, a, i, r] = ze(e);
  XL(t, [n, a, i, r]) && ([n, a, i, r] = UL(e, et({ clientX: t.scrollX, clientY: t.scrollY }, t)));
  let l = (n + i) / 2, s = (a + r) / 2;
  return f7({ scenePoint: { x: l, y: s }, viewportDimensions: { width: t.width, height: t.height }, zoom: t.zoom });
}, xi = (e) => Se(Ga(e, 6), L0, R0), WL = (e) => Se(Math.round(e), 1, 100), p7 = (e) => Se(Math.round(e), 1, 100), U7 = (e, t, n) => {
  let a = n.reduce((i, r) => (r.groupIds.includes(e) && (i[r.id] = !0), i), {});
  return Object.keys(a).length < 2 ? t.selectedGroupIds[e] || t.editingGroupId === e ? { selectedElementIds: t.selectedElementIds, selectedGroupIds: { ...t.selectedGroupIds, [e]: !1 }, editingGroupId: null } : t : { editingGroupId: t.editingGroupId, selectedGroupIds: { ...t.selectedGroupIds, [e]: !0 }, selectedElementIds: { ...t.selectedElementIds, ...a } };
}, dn = function() {
  let e = null, t = null, n = null, a = (r, l, s, c) => {
    if (n !== void 0 && l === t && r === e && s.editingGroupId === (n == null ? void 0 : n.editingGroupId)) return n;
    let d = {};
    for (let f of r) {
      let p = f.groupIds;
      if (s.editingGroupId) {
        let U = p.indexOf(s.editingGroupId);
        U > -1 && (p = p.slice(0, U));
      }
      if (p.length > 0) {
        let U = p[p.length - 1];
        d[U] = !0;
      }
    }
    let o = {}, u = l.reduce((f, p) => {
      if (p.isDeleted) return f;
      let U = p.groupIds.find((m) => d[m]);
      return U && (f[p.id] = !0, Array.isArray(o[U]) ? o[U].push(p.id) : o[U] = [p.id]), f;
    }, {});
    for (let f of Object.keys(o)) o[f].length < 2 && d[f] && (d[f] = !1);
    return t = l, e = r, n = { editingGroupId: s.editingGroupId, selectedGroupIds: d, selectedElementIds: Le({ ...s.selectedElementIds, ...u }, c) }, n;
  }, i = (r, l, s, c) => {
    let d = c ? c.scene.getSelectedElements({ selectedElementIds: r.selectedElementIds, elements: l }) : xe(l, r);
    return d.length ? a(d, l, r, s) : { selectedGroupIds: {}, editingGroupId: null, selectedElementIds: Le(r.selectedElementIds, s) };
  };
  return i.clearCache = () => {
    t = null, e = null, n = null;
  }, i;
}(), m7 = (e, t) => g7(e, t) != null, g7 = (e, t) => t.groupIds.filter((n) => n !== e.editingGroupId).find((n) => e.selectedGroupIds[n]), Yr = (e) => Object.entries(e.selectedGroupIds).filter(([t, n]) => n).map(([t, n]) => t), b7 = (e, t) => {
  let n = { ...t, selectedGroupIds: {} };
  for (let a of e) {
    let i = a.groupIds;
    if (t.editingGroupId) {
      let r = i.indexOf(t.editingGroupId);
      r > -1 && (i = i.slice(0, r));
    }
    if (i.length > 0) {
      let r = i[i.length - 1];
      n = { ...n, ...U7(r, n, e) };
    }
  }
  return n.selectedGroupIds;
}, VL = (e, t) => ({ ...e, editingGroupId: t.groupIds.length ? t.groupIds[0] : null, selectedGroupIds: {}, selectedElementIds: { [t.id]: !0 } }), Yo = (e, t) => e.groupIds.includes(t), it = (e, t) => {
  let n = [];
  for (let a of e.values()) Yo(a, t) && n.push(a);
  return n;
}, GL = (e, t) => e.groupIds.find((n) => t[n]), YL = (e, t, n) => {
  let a = [...e], i = t ? e.indexOf(t) : -1, r = i > -1 ? i : e.length;
  for (let l = 0; l < r; l++) a[l] = n(a[l]);
  return a;
}, ZL = (e, t, n) => {
  let a = [...e], i = n ? a.indexOf(n) : -1, r = i > -1 ? i : a.length;
  return a.splice(r, 0, t), a;
}, KL = (e, t) => e.filter((n) => !t[n]), ah = (e, t) => {
  let n = /* @__PURE__ */ new Map();
  return e.forEach((a) => {
    let i = a.groupIds.length === 0 ? a.id : a.groupIds[a.groupIds.length - 1], r = n.get(i) || [], l = be(a, t);
    l && r.push(l), n.set(i, [...r, a]);
  }), Array.from(n.values());
}, qL = (e) => {
  let t = /* @__PURE__ */ new Set();
  for (let [, n] of e) if (!n.isDeleted) for (let a of n.groupIds ?? []) t.add(a);
  return t;
}, v7 = (e) => {
  let t = e.flatMap((i) => i.groupIds), n = /* @__PURE__ */ new Map(), a = 0;
  for (let i of t) n.set(i, (n.get(i) ?? 0) + 1), n.get(i) > a && (a = n.get(i));
  return a === e.length;
}, ds = (e) => e.groupIds.length > 0, JL = 8, Pm = 99999, ih = (e) => JL / e, gn = class {
};
j(gn, "referenceSnapPoints", null), j(gn, "visibleGaps", null), j(gn, "setReferenceSnapPoints", (e) => {
  gn.referenceSnapPoints = e;
}), j(gn, "getReferenceSnapPoints", () => gn.referenceSnapPoints), j(gn, "setVisibleGaps", (e) => {
  gn.visibleGaps = e;
}), j(gn, "getVisibleGaps", () => gn.visibleGaps), j(gn, "destroy", () => {
  gn.referenceSnapPoints = null, gn.visibleGaps = null;
});
var hi = gn, Zo = (e) => e.props.gridModeEnabled ?? e.state.gridModeEnabled, fr = ({ event: e, app: t, selectedElements: n }) => e ? t.state.objectsSnapModeEnabled && !e[L.CTRL_OR_CMD] || !t.state.objectsSnapModeEnabled && e[L.CTRL_OR_CMD] && !Zo(t) : n.length === 1 && n[0].type === "arrow" ? !1 : t.state.objectsSnapModeEnabled, QL = (e, t, n = 0.01) => Math.abs(e - t) <= n, Ko = (e, t, { omitCenter: n, boundingBoxCorners: a, dragOffset: i } = { omitCenter: !1, boundingBoxCorners: !1 }) => {
  let r = [];
  if (e.length === 1) {
    let l = e[0], [s, c, d, o, u, f] = Ue(l, t);
    i && (s += i.x, d += i.x, u += i.x, c += i.y, o += i.y, f += i.y);
    let p = (d - s) / 2, U = (o - c) / 2;
    if ((l.type === "diamond" || l.type === "ellipse") && !a) {
      let m = B(k(s, c + U), k(u, f), l.angle), g = B(k(s + p, c), k(u, f), l.angle), b = B(k(d, c + U), k(u, f), l.angle), v = B(k(s + p, o), k(u, f), l.angle), x = k(u, f);
      r = n ? [m, g, b, v] : [m, g, b, v, x];
    } else {
      let m = B(k(s, c), k(u, f), l.angle), g = B(k(d, c), k(u, f), l.angle), b = B(k(s, o), k(u, f), l.angle), v = B(k(d, o), k(u, f), l.angle), x = k(u, f);
      r = n ? [m, g, b, v] : [m, g, b, v, x];
    }
  } else if (e.length > 1) {
    let [l, s, c, d] = np(e, i ?? { x: 0, y: 0 }), o = c - l, u = d - s, f = k(l, s), p = k(c, s), U = k(l, d), m = k(c, d), g = k(l + o / 2, s + u / 2);
    r = n ? [f, p, U, m] : [f, p, U, m, g];
  }
  return r.map((l) => k(ft(l[0]), ft(l[1])));
}, x7 = (e, t, n, a) => {
  let i = t.filter((r) => de(r)).map((r) => r.id);
  return h3(e, t, n, a).filter((r) => !(r.frameId && i.includes(r.frameId)));
}, eR = (e, t, n, a) => {
  let i = x7(e, t, n, a), r = ah(i, a).filter((u) => !(u.length === 1 && rt(u[0]))).map((u) => ze(u).map((f) => ft(f))), l = r.sort((u, f) => u[0] - f[0]), s = [], c = 0;
  e: for (let u = 0; u < l.length; u++) {
    let f = l[u];
    for (let p = u + 1; p < l.length; p++) {
      if (++c > Pm) break e;
      let U = l[p], [, m, g, b] = f, [v, x, , y] = U;
      g < v && eu(Qt(m, b), Qt(x, y)) && s.push({ startBounds: f, endBounds: U, startSide: [k(g, m), k(g, b)], endSide: [k(v, x), k(v, y)], length: v - g, overlap: tu(Qt(m, b), Qt(x, y)) });
    }
  }
  let d = r.sort((u, f) => u[1] - f[1]), o = [];
  c = 0;
  e: for (let u = 0; u < d.length; u++) {
    let f = d[u];
    for (let p = u + 1; p < d.length; p++) {
      if (++c > Pm) break e;
      let U = d[p], [m, , g, b] = f, [v, x, y] = U;
      b < x && eu(Qt(m, g), Qt(v, y)) && o.push({ startBounds: f, endBounds: U, startSide: [k(m, b), k(g, b)], endSide: [k(v, x), k(y, x)], length: x - b, overlap: tu(Qt(m, g), Qt(v, y)) });
    }
  }
  return { horizontalGaps: s, verticalGaps: o };
}, Nm = (e, t, n, a, i, r, l) => {
  if (!fr({ app: n, event: a, selectedElements: e })) return [];
  if (e.length === 0) return [];
  let s = hi.getVisibleGaps();
  if (s) {
    let { horizontalGaps: c, verticalGaps: d } = s, [o, u, f, p] = np(e, t).map((g) => ft(g)), U = (o + f) / 2, m = (u + p) / 2;
    for (let g of c) {
      if (!eu(Qt(u, p), g.overlap)) continue;
      let b = g.startSide[0][0] + g.length / 2, v = ft(b - U);
      if (g.length > f - o && Math.abs(v) <= l.x) {
        Math.abs(v) < l.x && (i.length = 0), l.x = Math.abs(v);
        let I = { type: "gap", direction: "center_horizontal", gap: g, offset: v };
        i.push(I);
        continue;
      }
      let [, , x] = g.endBounds, y = o - x, E = ft(g.length - y);
      if (Math.abs(E) <= l.x) {
        Math.abs(E) < l.x && (i.length = 0), l.x = Math.abs(E);
        let I = { type: "gap", direction: "side_right", gap: g, offset: E };
        i.push(I);
        continue;
      }
      let [S, , ,] = g.startBounds, w = S - f, M = ft(w - g.length);
      if (Math.abs(M) <= l.x) {
        Math.abs(M) < l.x && (i.length = 0), l.x = Math.abs(M);
        let I = { type: "gap", direction: "side_left", gap: g, offset: M };
        i.push(I);
        continue;
      }
    }
    for (let g of d) {
      if (!eu(Qt(o, f), g.overlap)) continue;
      let b = g.startSide[0][1] + g.length / 2, v = ft(b - m);
      if (g.length > p - u && Math.abs(v) <= l.y) {
        Math.abs(v) < l.y && (r.length = 0), l.y = Math.abs(v);
        let I = { type: "gap", direction: "center_vertical", gap: g, offset: v };
        r.push(I);
        continue;
      }
      let [, x, ,] = g.startBounds, y = x - p, E = ft(y - g.length);
      if (Math.abs(E) <= l.y) {
        Math.abs(E) < l.y && (r.length = 0), l.y = Math.abs(E);
        let I = { type: "gap", direction: "side_top", gap: g, offset: E };
        r.push(I);
        continue;
      }
      let [, , , S] = g.endBounds, w = ft(u - S), M = g.length - w;
      if (Math.abs(M) <= l.y) {
        Math.abs(M) < l.y && (r.length = 0), l.y = Math.abs(M);
        let I = { type: "gap", direction: "side_bottom", gap: g, offset: M };
        r.push(I);
        continue;
      }
    }
  }
}, tR = (e, t, n, a) => {
  let i = x7(e, t, n, a);
  return ah(i, a).filter((r) => !(r.length === 1 && rt(r[0]))).flatMap((r) => Ko(r, a));
}, us = (e, t, n, a, i, r, l) => {
  if (!fr({ app: n, event: a, selectedElements: e }) || e.length === 0 && t.length === 0) return [];
  let s = hi.getReferenceSnapPoints();
  if (s) for (let c of t) for (let d of s) {
    let o = d[0] - c[0], u = d[1] - c[1];
    Math.abs(o) <= l.x && (Math.abs(o) < l.x && (i.length = 0), i.push({ type: "point", points: [c, d], offset: o }), l.x = Math.abs(o)), Math.abs(u) <= l.y && (Math.abs(u) < l.y && (r.length = 0), r.push({ type: "point", points: [c, d], offset: u }), l.y = Math.abs(u));
  }
}, nR = (e, t, n, a, i) => {
  var g, b;
  let r = n.state, l = xe(e, r);
  if (!fr({ app: n, event: a, selectedElements: l }) || l.length === 0) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  t.x = ft(t.x), t.y = ft(t.y);
  let s = [], c = [], d = ih(r.zoom.value), o = { x: d, y: d }, u = Ko(l, i, { dragOffset: t });
  us(l, u, n, a, s, c, o), Nm(l, t, n, a, s, c, o);
  let f = { x: ((g = s[0]) == null ? void 0 : g.offset) ?? 0, y: ((b = c[0]) == null ? void 0 : b.offset) ?? 0 };
  o.x = 0, o.y = 0, s.length = 0, c.length = 0;
  let p = { x: ft(t.x + f.x), y: ft(t.y + f.y) };
  us(l, Ko(l, i, { dragOffset: p }), n, a, s, c, o), Nm(l, p, n, a, s, c, o);
  let U = lp(s, c), m = iR(l, p, [...s, ...c].filter((v) => v.type === "gap"));
  return { snapOffset: f, snapLines: [...U, ...m] };
}, ft = (e) => Math.round(e * 10 ** 6) / 10 ** 6, Om = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = n.join(",");
    t.has(a) || t.set(a, n);
  }
  return Array.from(t.values());
}, lp = (e, t) => {
  let n = {}, a = {};
  if (e.length > 0) {
    for (let i of e) if (i.type === "point") {
      let r = ft(i.points[0][0]);
      n[r] || (n[r] = []), n[r].push(...i.points.map((l) => k(ft(l[0]), ft(l[1]))));
    }
  }
  if (t.length > 0) {
    for (let i of t) if (i.type === "point") {
      let r = ft(i.points[0][1]);
      a[r] || (a[r] = []), a[r].push(...i.points.map((l) => k(ft(l[0]), ft(l[1]))));
    }
  }
  return Object.entries(n).map(([i, r]) => ({ type: "points", points: Om(r.map((l) => k(Number(i), l[1])).sort((l, s) => l[1] - s[1])) })).concat(Object.entries(a).map(([i, r]) => ({ type: "points", points: Om(r.map((l) => k(l[0], Number(i))).sort((l, s) => l[0] - s[0])) })));
}, aR = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = n.points.flat().map((i) => [ft(i)]).join(",");
    t.has(a) || t.set(a, n);
  }
  return Array.from(t.values());
}, iR = (e, t, n) => {
  let [a, i, r, l] = np(e, t), s = [];
  for (let c of n) {
    let [d, o, u, f] = c.gap.startBounds, [p, U, m, g] = c.gap.endBounds, b = tu(Qt(i, l), c.gap.overlap), v = tu(Qt(a, r), c.gap.overlap);
    switch (c.direction) {
      case "center_horizontal": {
        if (b) {
          let x = (b[0] + b[1]) / 2;
          s.push({ type: "gap", direction: "horizontal", points: [k(c.gap.startSide[0][0], x), k(a, x)] }, { type: "gap", direction: "horizontal", points: [k(r, x), k(c.gap.endSide[0][0], x)] });
        }
        break;
      }
      case "center_vertical": {
        if (v) {
          let x = (v[0] + v[1]) / 2;
          s.push({ type: "gap", direction: "vertical", points: [k(x, c.gap.startSide[0][1]), k(x, i)] }, { type: "gap", direction: "vertical", points: [k(x, l), k(x, c.gap.endSide[0][1])] });
        }
        break;
      }
      case "side_right": {
        if (b) {
          let x = (b[0] + b[1]) / 2;
          s.push({ type: "gap", direction: "horizontal", points: [k(u, x), k(p, x)] }, { type: "gap", direction: "horizontal", points: [k(m, x), k(a, x)] });
        }
        break;
      }
      case "side_left": {
        if (b) {
          let x = (b[0] + b[1]) / 2;
          s.push({ type: "gap", direction: "horizontal", points: [k(r, x), k(d, x)] }, { type: "gap", direction: "horizontal", points: [k(u, x), k(p, x)] });
        }
        break;
      }
      case "side_top": {
        if (v) {
          let x = (v[0] + v[1]) / 2;
          s.push({ type: "gap", direction: "vertical", points: [k(x, l), k(x, o)] }, { type: "gap", direction: "vertical", points: [k(x, f), k(x, U)] });
        }
        break;
      }
      case "side_bottom": {
        if (v) {
          let x = (v[0] + v[1]) / 2;
          s.push({ type: "gap", direction: "vertical", points: [k(x, f), k(x, U)] }, { type: "gap", direction: "vertical", points: [k(x, g), k(x, i)] });
        }
        break;
      }
    }
  }
  return aR(s.map((c) => ({ ...c, points: c.points.map((d) => k(ft(d[0]), ft(d[1]))) })));
}, $m = (e, t, n, a, i, r) => {
  var S, w;
  if (!fr({ event: a, selectedElements: e, app: n }) || e.length === 0 || e.length === 1 && !QL(e[0].angle, 0)) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  let [l, s, c, d] = ze(t);
  r && (r.includes("e") ? c += i.x : r.includes("w") && (l += i.x), r.includes("n") ? s += i.y : r.includes("s") && (d += i.y));
  let o = [];
  if (r) switch (r) {
    case "e": {
      o.push(k(c, s), k(c, d));
      break;
    }
    case "w": {
      o.push(k(l, s), k(l, d));
      break;
    }
    case "n": {
      o.push(k(l, s), k(c, s));
      break;
    }
    case "s": {
      o.push(k(l, d), k(c, d));
      break;
    }
    case "ne": {
      o.push(k(c, s));
      break;
    }
    case "nw": {
      o.push(k(l, s));
      break;
    }
    case "se": {
      o.push(k(c, d));
      break;
    }
    case "sw": {
      o.push(k(l, d));
      break;
    }
  }
  let u = ih(n.state.zoom.value), f = { x: u, y: u }, p = [], U = [];
  us(t, o, n, a, p, U, f);
  let m = { x: ((S = p[0]) == null ? void 0 : S.offset) ?? 0, y: ((w = U[0]) == null ? void 0 : w.offset) ?? 0 };
  f.x = 0, f.y = 0, p.length = 0, U.length = 0;
  let [g, b, v, x] = ze(e).map((M) => ft(M)), y = [k(g, b), k(g, x), k(v, b), k(v, x)];
  us(e, y, n, a, p, U, f);
  let E = lp(p, U);
  return { snapOffset: m, snapLines: E };
}, rR = (e, t, n, a, i, r) => {
  var U, m;
  if (!fr({ event: n, selectedElements: [e], app: t })) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  let l = [k(a.x + i.x, a.y + i.y)], s = ih(t.state.zoom.value), c = { x: s, y: s }, d = [], o = [];
  us([e], l, t, n, d, o, c);
  let u = { x: ((U = d[0]) == null ? void 0 : U.offset) ?? 0, y: ((m = o[0]) == null ? void 0 : m.offset) ?? 0 };
  c.x = 0, c.y = 0, d.length = 0, o.length = 0;
  let f = Ko([e], r, { boundingBoxCorners: !0, omitCenter: !0 });
  us([e], f, t, n, d, o, c);
  let p = lp(d, o);
  return { snapOffset: u, snapLines: p };
}, lR = (e, t, n, a, i) => {
  if (!fr({ event: a, selectedElements: [], app: t })) return { originOffset: { x: 0, y: 0 }, snapLines: [] };
  let r = h3(e, [], t.state, i), l = ih(t.state.zoom.value), s = { x: l, y: l }, c = [], d = [];
  for (let o of r) {
    let u = Ko([o], i);
    for (let f of u) {
      let p = f[0] - n.x;
      Math.abs(p) <= Math.abs(s.x) && (Math.abs(p) < Math.abs(s.x) && (d.length = 0), d.push({ type: "pointer", points: [f, k(f[0], n.y)], direction: "vertical" }), s.x = p);
      let U = f[1] - n.y;
      Math.abs(U) <= Math.abs(s.y) && (Math.abs(U) < Math.abs(s.y) && (c.length = 0), c.push({ type: "pointer", points: [f, k(n.x, f[1])], direction: "horizontal" }), s.y = U);
    }
  }
  return { originOffset: { x: d.length > 0 ? d[0].points[0][0] - n.x : 0, y: c.length > 0 ? c[0].points[0][1] - n.y : 0 }, snapLines: [...d, ...c] };
}, sR = (e) => e === Pt.rectangle || e === Pt.ellipse || e === Pt.diamond || e === Pt.frame || e === Pt.magicframe || e === Pt.image || e === Pt.text, _t = (e, t, n) => n ? [Math.round(e / n) * n, Math.round(t / n) * n] : [e, t], Bi = { version: null, points: [], zoom: null }, wt = class we {
  constructor(t) {
    j(this, "elementId"), j(this, "selectedPointsIndices"), j(this, "pointerDownState"), j(this, "isDragging"), j(this, "lastUncommittedPoint"), j(this, "pointerOffset"), j(this, "startBindingElement"), j(this, "endBindingElement"), j(this, "hoverPointIndex"), j(this, "segmentMidPointHoveredCoords"), j(this, "elbowed"), this.elementId = t.id, va(t.points[0], k(0, 0)) || console.error("Linear element is not normalized", Error().stack), this.selectedPointsIndices = null, this.lastUncommittedPoint = null, this.isDragging = !1, this.pointerOffset = { x: 0, y: 0 }, this.startBindingElement = "keep", this.endBindingElement = "keep", this.pointerDownState = { prevSelectedPointsIndices: null, lastClickedPoint: -1, lastClickedIsEndPoint: !1, origin: null, segmentMidpoint: { value: null, index: null, added: !1 } }, this.hoverPointIndex = -1, this.segmentMidPointHoveredCoords = null, this.elbowed = ee(t) && t.elbowed;
  }
  static getElement(t, n) {
    return n.get(t) || null;
  }
  static handleBoxSelection(t, n, a, i) {
    if (!n.editingLinearElement || !n.selectionElement) return !1;
    let { editingLinearElement: r } = n, { selectedPointsIndices: l, elementId: s } = r, c = we.getElement(s, i);
    if (!c) return !1;
    let [d, o, u, f] = Ue(n.selectionElement, i), p = we.getPointsGlobalCoordinates(c, i).reduce((U, m, g) => ((m[0] >= d && m[0] <= u && m[1] >= o && m[1] <= f || t.shiftKey && (l != null && l.includes(g))) && U.push(g), U), []).filter((U) => !(ee(c) && U !== 0 && U !== c.points.length - 1));
    a({ editingLinearElement: { ...r, selectedPointsIndices: p.length ? p : null } });
  }
  static handlePointDragging(t, n, a, i, r, l, s) {
    var U;
    if (!l) return !1;
    let { elementId: c } = l, d = s.getNonDeletedElementsMap(), o = we.getElement(c, d);
    if (!o || ee(o) && !l.pointerDownState.lastClickedIsEndPoint && l.pointerDownState.lastClickedPoint !== 0) return !1;
    let u = ee(o) ? (U = l.selectedPointsIndices) == null ? void 0 : U.reduce((m, g) => g === 0 ? [0, m[1]] : [m[0], o.points.length - 1], [!1, !1]).filter((m) => typeof m == "number") : l.selectedPointsIndices, f = ee(o) ? l.pointerDownState.lastClickedPoint > 0 ? o.points.length - 1 : 0 : l.pointerDownState.lastClickedPoint, p = o.points[f];
    if (u && p) {
      if (vo(t) && u.length === 1 && o.points.length > 1) {
        let m = u[0], g = o.points[m === 0 ? 1 : m - 1], [b, v] = we._getShiftLockedDelta(o, d, g, k(a, i), t[L.CTRL_OR_CMD] ? null : n.getEffectiveGridSize());
        we.movePoints(o, [{ index: m, point: k(b + g[0], v + g[1]), isDragging: m === f }]);
      } else {
        let m = we.createPointAt(o, d, a - l.pointerOffset.x, i - l.pointerOffset.y, t[L.CTRL_OR_CMD] ? null : n.getEffectiveGridSize()), g = m[0] - p[0], b = m[1] - p[1];
        we.movePoints(o, u.map((v) => {
          let x = v === f ? we.createPointAt(o, d, a - l.pointerOffset.x, i - l.pointerOffset.y, t[L.CTRL_OR_CMD] ? null : n.getEffectiveGridSize()) : k(o.points[v][0] + g, o.points[v][1] + b);
          return { index: v, point: x, isDragging: v === f };
        }));
      }
      if (be(o, d) && bc(o, d, !1), Ha(o, !1)) {
        let m = [];
        u[0] === 0 && m.push(da(we.getPointGlobalCoordinates(o, o.points[0], d)));
        let g = u[u.length - 1];
        g === o.points.length - 1 && m.push(da(we.getPointGlobalCoordinates(o, o.points[g], d))), m.length && r(o, m);
      }
      return !0;
    }
    return !1;
  }
  static handlePointerUp(t, n, a, i) {
    var p;
    let r = i.getNonDeletedElementsMap(), l = i.getNonDeletedElements(), { elementId: s, selectedPointsIndices: c, isDragging: d, pointerDownState: o } = n, u = we.getElement(s, r);
    if (!u) return n;
    let f = {};
    if (d && c) {
      for (let U of c) if (U === 0 || U === u.points.length - 1) {
        Mi(u.points, a.zoom.value) && we.movePoints(u, [{ index: U, point: U === 0 ? u.points[u.points.length - 1] : u.points[0] }]);
        let m = Br(a) ? ha(da(we.getPointAtIndexGlobalCoordinates(u, U, r)), l, r, a.zoom, ee(u), ee(u)) : null;
        f[U === 0 ? "startBindingElement" : "endBindingElement"] = m;
      }
    }
    return { ...n, ...f, selectedPointsIndices: d || t.shiftKey ? !d && t.shiftKey && ((p = o.prevSelectedPointsIndices) != null && p.includes(o.lastClickedPoint)) ? c && c.filter((U) => U !== o.lastClickedPoint) : c : c != null && c.includes(o.lastClickedPoint) ? [o.lastClickedPoint] : c, isDragging: !1, pointerOffset: { x: 0, y: 0 } };
  }
  static isSegmentTooShort(t, n, a, i, r) {
    if (ee(t)) return i >= 0 && i < t.points.length ? Pe(n, a) * r.value < we.POINT_HANDLE_SIZE / 2 : !1;
    let l = Pe(n, a);
    return t.points.length > 2 && t.roundness && (l = BD(t, a)), l * r.value < we.POINT_HANDLE_SIZE * 4;
  }
  static getSegmentMidPoint(t, n, a, i, r) {
    let l = fc(n, a);
    if (t.points.length > 2 && t.roundness) {
      let s = H8(t, t.points[i]);
      if (s) {
        let c = HD(t, t.points[i], 0.5);
        l = we.getPointGlobalCoordinates(t, X8(s[0], s[1], s[2], s[3], c), r);
      }
    }
    return l;
  }
  static getSegmentMidPointIndex(t, n, a, i) {
    let r = we.getElement(t.elementId, i);
    if (!r) return -1;
    let l = we.getEditorMidPoints(r, i, n), s = 0;
    for (; s < l.length; ) {
      if (we.arePointsEqual(a, l[s])) return s + 1;
      s++;
    }
    return -1;
  }
  static handlePointerDown(t, n, a, i, r, l) {
    var M;
    let s = n.state, c = l.getNonDeletedElementsMap(), d = l.getNonDeletedElements(), o = { didAddPoint: !1, hitElement: null, linearElementEditor: null };
    if (!r) return o;
    let { elementId: u } = r, f = we.getElement(u, c);
    if (!f) return o;
    let p = we.getSegmentMidpointHitCoords(r, i, s, c), U = null;
    if (p) U = we.getSegmentMidPointIndex(r, s, p, c);
    else if (t.altKey && s.editingLinearElement) return r.lastUncommittedPoint == null && (W(f, { points: [...f.points, we.createPointAt(f, c, i.x, i.y, t[L.CTRL_OR_CMD] ? null : n.getEffectiveGridSize())] }), o.didAddPoint = !0), a.shouldCaptureIncrement(), o.linearElementEditor = { ...r, pointerDownState: { prevSelectedPointsIndices: r.selectedPointsIndices, lastClickedPoint: -1, lastClickedIsEndPoint: !1, origin: { x: i.x, y: i.y }, segmentMidpoint: { value: p, index: U, added: !1 } }, selectedPointsIndices: [f.points.length - 1], lastUncommittedPoint: null, endBindingElement: ha(i, d, c, n.state.zoom, r.elbowed) }, o.didAddPoint = !0, o;
    let m = we.getPointIndexUnderCursor(f, c, s.zoom, i.x, i.y);
    if (m >= 0 || p) o.hitElement = f;
    else {
      let { startBindingElement: I, endBindingElement: T } = r;
      Br(s) && Ha(f) && Qu(f, I, T, c, l);
    }
    let [g, b, v, x] = Ue(f, c), y = (g + v) / 2, E = (b + x) / 2, S = m > -1 && B(k(f.x + f.points[m][0], f.y + f.points[m][1]), k(y, E), f.angle), w = m > -1 || t.shiftKey ? t.shiftKey || (M = r.selectedPointsIndices) != null && M.includes(m) ? oR([...r.selectedPointsIndices || [], m]) : [m] : null;
    return o.linearElementEditor = { ...r, pointerDownState: { prevSelectedPointsIndices: r.selectedPointsIndices, lastClickedPoint: m, lastClickedIsEndPoint: m === f.points.length - 1, origin: { x: i.x, y: i.y }, segmentMidpoint: { value: p, index: U, added: !1 } }, selectedPointsIndices: w, pointerOffset: S ? { x: i.x - S[0], y: i.y - S[1] } : { x: 0, y: 0 } }, o;
  }
  static arePointsEqual(t, n) {
    return !t && !n ? !0 : !t || !n ? !1 : va(t, n);
  }
  static handlePointerMove(t, n, a, i, r) {
    let l = i.state;
    if (!l.editingLinearElement) return null;
    let { elementId: s, lastUncommittedPoint: c } = l.editingLinearElement, d = we.getElement(s, r);
    if (!d) return l.editingLinearElement;
    let { points: o } = d, u = o[o.length - 1];
    if (!t.altKey) return u === c && we.deletePoints(d, [o.length - 1]), { ...l.editingLinearElement, lastUncommittedPoint: null };
    let f;
    if (vo(t) && o.length >= 2) {
      let p = o[o.length - 2], [U, m] = we._getShiftLockedDelta(d, r, p, k(n, a), t[L.CTRL_OR_CMD] ? null : i.getEffectiveGridSize());
      f = k(U + p[0], m + p[1]);
    } else f = we.createPointAt(d, r, n - l.editingLinearElement.pointerOffset.x, a - l.editingLinearElement.pointerOffset.y, t[L.CTRL_OR_CMD] || ee(d) ? null : i.getEffectiveGridSize());
    return u === c ? we.movePoints(d, [{ index: d.points.length - 1, point: f }]) : we.addPoints(d, [{ point: f }]), { ...l.editingLinearElement, lastUncommittedPoint: d.points[d.points.length - 1] };
  }
  static getPointGlobalCoordinates(t, n, a) {
    let [i, r, l, s] = Ue(t, a), c = (i + l) / 2, d = (r + s) / 2, { x: o, y: u } = t;
    return B(k(o + n[0], u + n[1]), k(c, d), t.angle);
  }
  static getPointsGlobalCoordinates(t, n) {
    let [a, i, r, l] = Ue(t, n), s = (a + r) / 2, c = (i + l) / 2;
    return t.points.map((d) => {
      let { x: o, y: u } = t;
      return B(k(o + d[0], u + d[1]), k(s, c), t.angle);
    });
  }
  static getPointAtIndexGlobalCoordinates(t, n, a) {
    let i = n < 0 ? t.points.length + n : n, [r, l, s, c] = Ue(t, a), d = (r + s) / 2, o = (l + c) / 2, u = t.points[i], { x: f, y: p } = t;
    return B(u ? k(f + u[0], p + u[1]) : k(f, p), k(d, o), t.angle);
  }
  static pointFromAbsoluteCoords(t, n, a) {
    if (ee(t)) return k(n[0] - t.x, n[1] - t.y);
    let [i, r, l, s] = Ue(t, a), c = (i + l) / 2, d = (r + s) / 2, [o, u] = B(k(n[0], n[1]), k(c, d), -t.angle);
    return k(o - t.x, u - t.y);
  }
  static getPointIndexUnderCursor(t, n, a, i, r) {
    let l = we.getPointsGlobalCoordinates(t, n), s = l.length;
    for (; --s > -1; ) {
      let c = l[s];
      if (Pe(k(i, r), k(c[0], c[1])) * a.value < we.POINT_HANDLE_SIZE + 1) return s;
    }
    return -1;
  }
  static createPointAt(t, n, a, i, r) {
    let l = _t(a, i, r), [s, c, d, o] = Ue(t, n), u = (s + d) / 2, f = (c + o) / 2, [p, U] = B(k(l[0], l[1]), k(u, f), -t.angle);
    return k(p - t.x, U - t.y);
  }
  static getNormalizedPoints(t) {
    let { points: n } = t, a = n[0][0], i = n[0][1];
    return { points: n.map((r) => k(r[0] - a, r[1] - i)), x: t.x + a, y: t.y + i };
  }
  static normalizePoints(t) {
    W(t, we.getNormalizedPoints(t));
  }
  static duplicateSelectedPoints(t, n) {
    rn(t.editingLinearElement, "Not currently editing a linear element");
    let { selectedPointsIndices: a, elementId: i } = t.editingLinearElement, r = we.getElement(i, n);
    rn(r, "The linear element does not exist in the provided Scene"), rn(a != null, "There are no selected points to duplicate");
    let { points: l } = r, s = [], c = !1, d = -1, o = l.reduce((u, f, p) => {
      if (++d, u.push(f), a.includes(p)) {
        let U = l[p + 1];
        U || (c = !0), u.push(U ? k((f[0] + U[0]) / 2, (f[1] + U[1]) / 2) : k(f[0], f[1])), s.push(d + 1), ++d;
      }
      return u;
    }, []);
    if (W(r, { points: o }), c) {
      let u = r.points[r.points.length - 1];
      we.movePoints(r, [{ index: r.points.length - 1, point: k(u[0] + 30, u[1] + 30) }]);
    }
    return { ...t, editingLinearElement: { ...t.editingLinearElement, selectedPointsIndices: s } };
  }
  static deletePoints(t, n) {
    let a = 0, i = 0;
    if (n.includes(0)) {
      let l = t.points.find((s, c) => !n.includes(c));
      l && (a = l[0], i = l[1]);
    }
    let r = t.points.reduce((l, s, c) => (n.includes(c) || l.push(l.length ? k(s[0] - a, s[1] - i) : k(0, 0)), l), []);
    we._updatePoints(t, r, a, i);
  }
  static addPoints(t, n) {
    let a = [...t.points, ...n.map((i) => i.point)];
    we._updatePoints(t, a, 0, 0);
  }
  static movePoints(t, n, a) {
    var o, u, f;
    let { points: i } = t, [r, l] = ((o = n.find(({ index: p }) => p === 0)) == null ? void 0 : o.point) ?? k(0, 0), [s, c] = k(r - i[0][0], l - i[0][1]), d = ee(t) ? [((u = n.find((p) => p.index === 0)) == null ? void 0 : u.point) ?? i[0], ((f = n.find((p) => p.index === i.length - 1)) == null ? void 0 : f.point) ?? i[i.length - 1]] : i.map((p, U) => {
      var g;
      let m = ((g = n.find((b) => b.index === U)) == null ? void 0 : g.point) ?? p;
      return k(m[0] - s, m[1] - c);
    });
    we._updatePoints(t, d, s, c, a, { isDragging: n.reduce((p, U) => p || U.isDragging === !0, !1) });
  }
  static shouldAddMidpoint(t, n, a, i) {
    let r = we.getElement(t.elementId, i);
    if (r && ee(r) || !r) return !1;
    let { segmentMidpoint: l } = t.pointerDownState;
    if (l.added || l.value === null || l.index === null || t.pointerDownState.origin === null) return !1;
    let s = t.pointerDownState.origin, c = Pe(k(s.x, s.y), k(n.x, n.y));
    return !(!a.editingLinearElement && c < Dr / a.zoom.value);
  }
  static addMidpoint(t, n, a, i, r) {
    let l = we.getElement(t.elementId, r);
    if (!l) return;
    let { segmentMidpoint: s } = t.pointerDownState, c = { pointerDownState: t.pointerDownState, selectedPointsIndices: t.selectedPointsIndices }, d = we.createPointAt(l, r, n.x, n.y, i && !ee(l) ? a.getEffectiveGridSize() : null), o = [...l.points.slice(0, s.index), d, ...l.points.slice(s.index)];
    return W(l, { points: o }), c.pointerDownState = { ...t.pointerDownState, segmentMidpoint: { ...t.pointerDownState.segmentMidpoint, added: !0 }, lastClickedPoint: s.index }, c.selectedPointsIndices = [s.index], c;
  }
  static _updatePoints(t, n, a, i, r, l) {
    if (ee(t)) {
      let s = {};
      (r == null ? void 0 : r.startBinding) !== void 0 && (s.startBinding = r.startBinding !== null && nu(r.startBinding) ? r.startBinding : null), (r == null ? void 0 : r.endBinding) !== void 0 && (s.endBinding = r.endBinding !== null && nu(r.endBinding) ? r.endBinding : null), s.points = Array.from(n), W(t, s, !0, { isDragging: l == null ? void 0 : l.isDragging });
    } else {
      let s = jm(t, n), c = jm(t, t.points), d = (s[0] + s[2]) / 2, o = (s[1] + s[3]) / 2, u = (c[0] + c[2]) / 2, f = (c[1] + c[3]) / 2, p = u - d, U = f - o, m = B(k(a, i), k(p, U), t.angle);
      W(t, { ...r, points: n, x: t.x + m[0], y: t.y + m[1] });
    }
  }
  static _getShiftLockedDelta(t, n, a, i, r) {
    let l = we.getPointGlobalCoordinates(t, a, n);
    if (ee(t)) return [i[0] - l[0], i[1] - l[1]];
    let [s, c] = _t(i[0], i[1], r), { width: d, height: o } = P1(l[0], l[1], s, c);
    return B(k(d, o), k(0, 0), -t.angle);
  }
  static moveFixedSegment(t, n, a, i, r) {
    let l = we.getElement(t.elementId, r);
    if (!l || !ee(l)) return t;
    if (n && n > 0 && n < l.points.length) {
      let s = vi(cl(le(l.points[n], l.points[n - 1]))), c = (l.fixedSegments ?? []).reduce((f, p) => (f[p.index] = p, f), {});
      c[n] = { index: n, start: k(s ? l.points[n - 1][0] : a - l.x, s ? i - l.y : l.points[n - 1][1]), end: k(s ? l.points[n][0] : a - l.x, s ? i - l.y : l.points[n][1]) };
      let d = Object.values(c).sort((f, p) => f.index - p.index), o = d.map((f) => f.index).reduce((f, p) => p < n ? f + 1 : f, 0);
      W(l, { fixedSegments: d });
      let u = k(l.x + (l.fixedSegments[o].start[0] + l.fixedSegments[o].end[0]) / 2, l.y + (l.fixedSegments[o].start[1] + l.fixedSegments[o].end[1]) / 2);
      return { ...t, segmentMidPointHoveredCoords: u, pointerDownState: { ...t.pointerDownState, segmentMidpoint: { added: !1, index: l.fixedSegments[o].index, value: u } } };
    }
    return t;
  }
  static deleteFixedSegment(t, n) {
    var a;
    W(t, { fixedSegments: (a = t.fixedSegments) == null ? void 0 : a.filter((i) => i.index !== n) }), W(t, {}, !0);
  }
};
j(wt, "POINT_HANDLE_SIZE", 10), j(wt, "getEditorMidPoints", (e, t, n) => {
  let a = be(e, t);
  return !ee(e) && !n.editingLinearElement && e.points.length > 2 && !a ? [] : (Bi.version === e.version && Bi.zoom === n.zoom.value || wt.updateEditorMidPointsCache(e, t, n), Bi.points);
}), j(wt, "updateEditorMidPointsCache", (e, t, n) => {
  let a = wt.getPointsGlobalCoordinates(e, t), i = 0, r = [];
  for (; i < a.length - 1; ) {
    if (wt.isSegmentTooShort(e, e.points[i], e.points[i + 1], i, n.zoom)) {
      r.push(null), i++;
      continue;
    }
    let l = wt.getSegmentMidPoint(e, a[i], a[i + 1], i + 1, t);
    r.push(l), i++;
  }
  Bi.points = r, Bi.version = e.version, Bi.zoom = n.zoom.value;
}), j(wt, "getSegmentMidpointHitCoords", (e, t, n, a) => {
  let { elementId: i } = e, r = wt.getElement(i, a);
  if (!r) return null;
  let l = wt.getPointIndexUnderCursor(r, a, n.zoom, t.x, t.y);
  if (!ee(r) && l >= 0 || wt.getPointsGlobalCoordinates(r, a).length >= 3 && !n.editingLinearElement && !ee(r)) return null;
  let s = (wt.POINT_HANDLE_SIZE + 1) / n.zoom.value, c = e.segmentMidPointHoveredCoords;
  if (c && Pe(k(c[0], c[1]), k(t.x, t.y)) <= s) return c;
  let d = 0, o = wt.getEditorMidPoints(r, a, n);
  for (; d < o.length; ) {
    if (o[d] !== null && Pe(o[d], k(t.x, t.y)) <= s) return o[d];
    d++;
  }
  return null;
}), j(wt, "getBoundTextElementPosition", (e, t, n) => {
  let a = wt.getPointsGlobalCoordinates(e, n);
  a.length < 2 && W(t, { isDeleted: !0 });
  let i = 0, r = 0;
  if (e.points.length % 2 === 1) {
    let l = Math.floor(e.points.length / 2), s = wt.getPointGlobalCoordinates(e, e.points[l], n);
    i = s[0] - t.width / 2, r = s[1] - t.height / 2;
  } else {
    let l = e.points.length / 2 - 1, s = Bi.points[l];
    e.points.length === 2 && (s = fc(a[0], a[1])), (!s || Bi.version !== e.version) && (s = wt.getSegmentMidPoint(e, a[l], a[l + 1], l + 1, n)), i = s[0] - t.width / 2, r = s[1] - t.height / 2;
  }
  return { x: i, y: r };
}), j(wt, "getMinMaxXYWithBoundText", (e, t, n, a) => {
  let [i, r, l, s] = n, c = (i + l) / 2, d = (r + s) / 2, { x: o, y: u } = wt.getBoundTextElementPosition(e, a, t), f = o + a.width, p = u + a.height, U = k(c, d), m = B(k(i, r), U, e.angle), g = B(k(l, r), U, e.angle), b = B(k(o, u), U, -e.angle), v = B(k(f, u), U, -e.angle), x = B(k(o, p), U, -e.angle), y = B(k(f, p), U, -e.angle);
  return m[0] < g[0] && m[1] >= g[1] ? (i = Math.min(i, x[0]), l = Math.max(l, Math.max(v[0], y[0])), r = Math.min(r, b[1]), s = Math.max(s, y[1])) : m[0] >= g[0] && m[1] > g[1] ? (i = Math.min(i, y[0]), l = Math.max(l, Math.max(b[0], v[0])), r = Math.min(r, x[1]), s = Math.max(s, v[1])) : m[0] >= g[0] ? (i = Math.min(i, v[0]), l = Math.max(l, x[0]), r = Math.min(r, y[1]), s = Math.max(s, b[1])) : m[1] <= g[1] && (i = Math.min(i, Math.min(v[0], b[0])), l = Math.max(l, y[0]), r = Math.min(r, v[1]), s = Math.max(s, x[1])), [i, r, l, s, c, d];
}), j(wt, "getElementAbsoluteCoords", (e, t, n = !1) => {
  let a, i, r, l, s;
  if (e.points.length < 2 || !pt.get(e)) {
    let { minX: u, minY: f, maxX: p, maxY: U } = e.points.reduce((m, [g, b]) => (m.minY = Math.min(m.minY, b), m.minX = Math.min(m.minX, g), m.maxX = Math.max(m.maxX, g), m.maxY = Math.max(m.maxY, b), m), { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 });
    i = u + e.x, r = f + e.y, l = p + e.x, s = U + e.y;
  } else {
    let u = pt.generateElementShape(e, null), f = yr(u[0]), [p, U, m, g] = qu(f);
    i = p + e.x, r = U + e.y, l = m + e.x, s = g + e.y;
  }
  let c = (i + l) / 2, d = (r + s) / 2;
  if (a = [i, r, l, s, c, d], !n) return a;
  let o = be(e, t);
  return o && (a = wt.getMinMaxXYWithBoundText(e, t, [i, r, l, s], o)), a;
});
var J = wt, oR = (e) => {
  let t = [...new Set(e.filter((n) => n !== null && n !== -1))];
  return t = t.sort((n, a) => n - a), t.length ? t : null;
}, hs = {}, du = (e, t) => {
  let n = hs[e] || (hs[e] = { height: t });
  return n.height = t, n;
}, y7 = (e) => {
  hs[e] && delete hs[e];
}, cR = (e) => {
  var t;
  return ((t = hs[e]) == null ? void 0 : t.height) ?? null;
}, un = (e, t, n, a = !0) => {
  let i, r = { x: e.x, y: e.y, text: e.text, width: e.width, height: e.height, angle: (t == null ? void 0 : t.angle) ?? e.angle };
  r.text = e.text, (t || !e.autoResize) && (i = t ? Ti(t, e) : e.width, r.text = gl(e.originalText, Ye(e), i));
  let l = ln(r.text, Ye(e), e.lineHeight);
  if (e.autoResize && (r.width = l.width), r.height = l.height, t) {
    let s = lh(t, e), c = Ti(t, e);
    if (!ye(t) && l.height > s) {
      let f = dl(l.height, t.type);
      W(t, { height: f }, a), du(t.id, f);
    }
    if (l.width > c) {
      let f = dl(l.width, t.type);
      W(t, { width: f }, a);
    }
    let d = { ...e, ...r }, { x: o, y: u } = rh(t, d, n);
    r.x = o, r.y = u;
  }
  W(e, r, a);
}, w7 = (e, t, n) => {
  let a = ue(e);
  t.forEach((i) => {
    let r = n.get(i.id), l = Ii(i);
    if (l) {
      let s = n.get(l);
      if (s) {
        let c = a.get(r);
        c && W(c, { boundElements: (i.boundElements || []).filter((o) => o.id !== s && o.id !== l).concat({ type: "text", id: s }) });
        let d = a.get(s);
        d && q(d) && W(d, { containerId: c ? r : null });
      }
    }
  });
}, bc = (e, t, n, a = !1) => {
  if (!Ii(e)) return;
  y7(e.id);
  let i = be(e, t);
  if (i && i.text) {
    if (!e) return;
    let r = i.text, l = i.height, s = i.width, c = Ti(e, i), d = lh(e, i), o = e.height;
    if (a || n !== "n" && n !== "s") {
      r && (r = gl(i.originalText, Ye(i), c));
      let u = ln(r, Ye(i), i.lineHeight);
      l = u.height, s = u.width;
    }
    if (l > d) {
      o = dl(l, e.type);
      let u = o - e.height, f = !ye(e) && (n === "ne" || n === "nw" || n === "n") ? e.y - u : e.y;
      W(e, { height: o, y: f });
    }
    W(i, { text: r, width: s, height: l }), ye(e) || W(i, rh(e, i, t));
  }
}, rh = (e, t, n) => {
  if (ye(e)) return J.getBoundTextElementPosition(e, t, n);
  let a = dR(e), i = lh(e, t), r = Ti(e, t), l, s;
  return t.verticalAlign === jn.TOP ? s = a.y : t.verticalAlign === jn.BOTTOM ? s = a.y + (i - t.height) : s = a.y + (i / 2 - t.height / 2), t.textAlign === Fo.LEFT ? l = a.x : t.textAlign === Fo.RIGHT ? l = a.x + (r - t.width) : l = a.x + (r / 2 - t.width / 2), { x: l, y: s };
}, Ii = (e) => {
  var t, n, a;
  return ((t = e == null ? void 0 : e.boundElements) == null ? void 0 : t.length) && ((a = (n = e == null ? void 0 : e.boundElements) == null ? void 0 : n.find((i) => i.type === "text")) == null ? void 0 : a.id) || null;
}, be = (e, t) => {
  if (!e) return null;
  let n = Ii(e);
  return n && t.get(n) || null;
}, Vt = (e, t) => e && e.containerId && t.get(e.containerId) || null, cf = (e, t, n) => {
  if (!ye(e)) return { x: e.x + e.width / 2, y: e.y + e.height / 2 };
  let a = J.getPointsGlobalCoordinates(e, n);
  if (a.length % 2 === 1) {
    let l = Math.floor(e.points.length / 2), s = J.getPointGlobalCoordinates(e, e.points[l], n);
    return { x: s[0], y: s[1] };
  }
  let i = e.points.length / 2 - 1, r = J.getEditorMidPoints(e, n, t)[i];
  return r || (r = J.getSegmentMidPoint(e, a[i], a[i + 1], i + 1, n)), { x: r[0], y: r[1] };
}, dR = (e) => {
  let t = At, n = At;
  return e.type === "ellipse" && (t += e.width / 2 * (1 - Math.sqrt(2) / 2), n += e.height / 2 * (1 - Math.sqrt(2) / 2)), e.type === "diamond" && (t += e.width / 4, n += e.height / 4), { x: e.x + t, y: e.y + n };
}, uR = (e, t) => !t || ye(t) ? e.angle : t.angle, hR = (e, t) => e.some((n) => {
  if (rt(n)) {
    let a = Vt(n, t);
    return !ye(a);
  }
  return !1;
}), fR = (e, t) => e.some((n) => {
  if (rt(n)) {
    let a = Vt(n, t);
    return !ye(a);
  }
  return q(n);
}), pR = /* @__PURE__ */ new Set(["rectangle", "ellipse", "diamond", "arrow"]), UR = (e) => pR.has(e.type), dl = (e, t) => {
  e = Math.ceil(e);
  let n = At * 2;
  return t === "ellipse" ? Math.round((e + n) / Math.sqrt(2) * 2) : t === "arrow" ? e + n * 8 : t === "diamond" ? 2 * (e + n) : e + n;
}, Ti = (e, t) => {
  let { width: n } = e;
  if (ye(e)) {
    let a = ((t == null ? void 0 : t.fontSize) ?? Ni) * Kk;
    return Math.max(Zk * n, a);
  }
  return e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - At * 2 : e.type === "diamond" ? Math.round(n / 2) - At * 2 : n - At * 2;
}, lh = (e, t) => {
  let { height: n } = e;
  return ye(e) ? n - At * 8 * 2 <= 0 ? t.height : n : e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - At * 2 : e.type === "diamond" ? Math.round(n / 2) - At * 2 : n - At * 2;
}, mR = (e, t = `

`) => e.reduce((n, a) => (q(a) && n.push(a.text), n), []).join(t), Dn = (e) => (e = e.trim(), e && Tb(gd(e))), E7 = (e) => !!(e != null && e.includes(location.origin) || e != null && e.startsWith("/")), S7 = (e) => {
  if (e = Dn(e), e.startsWith("/")) return `${location.origin}${e}`;
  try {
    new URL(e);
  } catch {
    return "about:blank";
  }
  return e;
}, I1 = [], Z = (e) => (I1 = I1.concat(e), e), k7 = '<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">', gR = '<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>', M7 = '<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>', bR = `data:${oe.svg},${encodeURIComponent(`${k7}${M7}</svg>`)}`, vR = `data:${oe.svg},${encodeURIComponent(`${k7}${gR}${M7}</svg>`)}`, ra = (e) => {
  e && (e.style.cursor = "");
}, Ge = (e, t) => {
  e && (e.style.cursor = t);
}, Ia, Fm, C7 = (e, t) => {
  let n = () => {
    let a = t === Me.DARK;
    Ia = document.createElement("canvas"), Ia.theme = t, Ia.height = 20, Ia.width = 20;
    let i = Ia.getContext("2d");
    i.lineWidth = 1, i.beginPath(), i.arc(Ia.width / 2, Ia.height / 2, 5, 0, 2 * Math.PI), i.fillStyle = a ? Wt.black : Wt.white, i.fill(), i.strokeStyle = a ? Wt.white : Wt.black, i.stroke(), Fm = Ia.toDataURL(oe.svg);
  };
  (!Ia || Ia.theme !== t) && n(), Ge(e, `url(${Fm}) ${20 / 2} ${20 / 2}, auto`);
}, La = (e, t) => {
  if (e) if (t.activeTool.type === "selection") ra(e);
  else if (ns(t)) e.style.cursor = We.GRAB;
  else if (Na(t)) C7(e, t.theme);
  else if (t.activeTool.type === "laser") {
    let n = t.theme === Me.LIGHT ? bR : vR;
    e.style.cursor = `url(${n}), auto`;
  } else ["image", "custom"].includes(t.activeTool.type) ? t.activeTool.type !== "image" && (e.style.cursor = We.AUTO) : e.style.cursor = We.CROSSHAIR;
}, xR = new vb(Date.now()), yR = 0, Ja = () => Math.floor(xR.next() * 2 ** 31), Qn = () => ki() ? `id${yR++}` : I0(), wa = (e, { x: t, y: n, strokeColor: a = mt.strokeColor, backgroundColor: i = mt.backgroundColor, fillStyle: r = mt.fillStyle, strokeWidth: l = mt.strokeWidth, strokeStyle: s = mt.strokeStyle, roughness: c = mt.roughness, opacity: d = mt.opacity, width: o = 0, height: u = 0, angle: f = 0, groupIds: p = [], frameId: U = null, index: m = null, roundness: g = null, boundElements: b = null, link: v = null, locked: x = mt.locked, ...y }) => ((t < -1e6 || t > 1e6 || n < -1e6 || n > 1e6 || o < -1e6 || o > 1e6 || u < -1e6 || u > 1e6) && console.error("New element size or position is too large", { x: t, y: n, width: o, height: u, points: y.points }), { id: y.id || Qn(), type: e, x: t, y: n, width: o, height: u, angle: f, strokeColor: a, backgroundColor: i, fillStyle: r, strokeWidth: l, strokeStyle: s, roughness: c, opacity: d, groupIds: p, frameId: U, index: m, roundness: g, seed: y.seed ?? Ja(), version: y.version || 1, versionNonce: y.versionNonce ?? 0, isDeleted: !1, boundElements: b, updated: Ss(), link: v, locked: x, customData: y.customData }), Qa = (e) => wa(e.type, e), zm = (e) => wa("embeddable", e), wR = (e) => ({ ...wa("iframe", e) }), sp = (e) => ge({ ...wa("frame", e), type: "frame", name: (e == null ? void 0 : e.name) || null }, {}), T1 = (e) => ge({ ...wa("magicframe", e), type: "magicframe", name: (e == null ? void 0 : e.name) || null }, {}), I7 = (e, t) => ({ x: e.textAlign === "center" ? t.width / 2 : e.textAlign === "right" ? t.width : 0, y: e.verticalAlign === "middle" ? t.height / 2 : 0 }), Rn = (e) => {
  let t = e.fontFamily || xr, n = e.fontSize || Ni, a = e.lineHeight || ol(t), i = ls(e.text), r = ln(i, Ye({ fontFamily: t, fontSize: n }), a), l = e.textAlign || uc, s = e.verticalAlign || Wd, c = I7({ textAlign: l, verticalAlign: s }, r), d = { ...wa("text", e), text: i, fontSize: n, fontFamily: t, textAlign: l, verticalAlign: s, x: e.x - c.x, y: e.y - c.y, width: r.width, height: r.height, containerId: e.containerId || null, originalText: e.originalText ?? i, autoResize: e.autoResize ?? !0, lineHeight: a };
  return ge(d, {});
}, ER = (e, t, n) => {
  let { width: a, height: i } = ln(n, Ye(e), e.lineHeight);
  e.autoResize || (a = e.width);
  let { textAlign: r, verticalAlign: l } = e, s, c;
  if (r === "center" && l === jn.MIDDLE && !e.containerId && e.autoResize) {
    let d = ln(e.text, Ye(e), e.lineHeight), o = I7(e, { width: a - d.width, height: i - d.height });
    s = e.x - o.x, c = e.y - o.y;
  } else {
    let [d, o, u, f] = Ue(e, t), [p, U, m, g] = or(e, a, i, !1), b = (d - p) / 2, v = (o - U) / 2, x = (u - m) / 2, y = (f - g) / 2;
    [s, c] = SR({ s: !0, e: r === "center" || r === "left", w: r === "center" || r === "right" }, e.x, e.y, e.angle, b, v, x, y);
  }
  return { width: a, height: i, x: Number.isFinite(s) ? s : e.x, y: Number.isFinite(c) ? c : e.y };
}, SR = (e, t, n, a, i, r, l, s) => {
  let c = Math.cos(a), d = Math.sin(a);
  return e.e && e.w ? t += i + l : e.e ? (t += i * (1 + c), n += i * d, t += l * (1 - c), n += l * -d) : e.w && (t += i * (1 - c), n += i * -d, t += l * (1 + c), n += l * d), e.n && e.s ? n += r + s : e.n ? (t += r * d, n += r * (1 - c), t += s * -d, n += s * (1 + c)) : (t += r * -d, n += r * (1 + c), t += s * d, n += s * (1 - c)), [t, n];
}, T7 = (e, t, n, a = e.text) => {
  if (e.isDeleted) return;
  (t || !e.autoResize) && (a = gl(a, Ye(e), t ? Ti(t, e) : e.width));
  let i = ER(e, n, a);
  return { text: a, ...i };
}, kR = (e) => ({ ...wa(e.type, e), points: e.points || [], pressures: e.pressures || [], simulatePressure: e.simulatePressure, lastCommittedPoint: null }), Zr = (e) => ({ ...wa(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: null, endArrowhead: null }), op = (e) => e.elbowed ? { ...wa(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: e.startArrowhead || null, endArrowhead: e.endArrowhead || null, elbowed: !0, fixedSegments: e.fixedSegments || [], startIsSpecial: !1, endIsSpecial: !1 } : { ...wa(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: e.startArrowhead || null, endArrowhead: e.endArrowhead || null, elbowed: !1 }, _7 = (e) => ({ ...wa("image", e), strokeColor: "transparent", status: e.status ?? "pending", fileId: e.fileId ?? null, scale: e.scale ?? [1, 1], crop: e.crop ?? null }), uu = (e, t = 0) => {
  if (e == null || typeof e != "object") return e;
  let n = Object.prototype.toString.call(e);
  if (n === "[object Object]") {
    let a = typeof e.constructor == "function" ? Object.create(Object.getPrototypeOf(e)) : {};
    for (let i in e) if (e.hasOwnProperty(i)) {
      if (t === 0 && (i === "shape" || i === "canvas")) continue;
      a[i] = uu(e[i], t + 1);
    }
    return a;
  }
  if (Array.isArray(e)) {
    let a = e.length, i = new Array(a);
    for (; a--; ) i[a] = uu(e[a], t + 1);
    return i;
  }
  return ve.DEV && n !== "[object Object]" && n !== "[object Array]" && n.startsWith("[object ") && console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`), e;
}, bl = (e) => uu(e), A7 = (e, t) => {
  Object.defineProperty(e, Qk, { value: t, writable: !1, enumerable: !1 });
}, hu = () => Qn(), j7 = (e, t, n, a) => {
  let i = bl(n);
  return ki() && A7(i, n.id), i.id = hu(), i.boundElements = null, i.updated = Ss(), i.seed = Ja(), i.groupIds = YL(i.groupIds, e, (r) => (t.has(r) || t.set(r, hu()), t.get(r))), a && (i = Object.assign(i, a)), i;
}, D7 = (e, t) => {
  let n = [], a = ue(e), i = /* @__PURE__ */ new Map(), r = (s) => {
    if (i.has(s)) return i.get(s);
    if (a.has(s)) {
      let c = hu();
      return i.set(s, c), c;
    }
    return null;
  }, l = /* @__PURE__ */ new Map();
  for (let s of e) {
    let c = uu(s);
    if (c.id = r(s.id), ki() && A7(c, s.id), t != null && t.randomizeSeed && (c.seed = Ja(), uh(c)), c.groupIds && (c.groupIds = c.groupIds.map((d) => (l.has(d) || l.set(d, hu()), l.get(d)))), "containerId" in c && c.containerId) {
      let d = r(c.containerId);
      c.containerId = d;
    }
    if ("boundElements" in c && c.boundElements && (c.boundElements = c.boundElements.reduce((d, o) => {
      let u = r(o.id);
      return u && d.push({ ...o, id: u }), d;
    }, [])), "endBinding" in c && c.endBinding) {
      let d = r(c.endBinding.elementId);
      c.endBinding = d ? { ...c.endBinding, elementId: d } : null;
    }
    if ("startBinding" in c && c.startBinding) {
      let d = r(c.startBinding.elementId);
      c.startBinding = d ? { ...c.startBinding, elementId: d } : null;
    }
    c.frameId && (c.frameId = r(c.frameId)), n.push(c);
  }
  return n;
}, cp = (e, { shouldThrow: t = !1, includeBoundTextValidation: n = !1, ignoreLogs: a, reconciliationContext: i }) => {
  let r = [], l = (c) => `${c == null ? void 0 : c.index}:${c == null ? void 0 : c.id}:${c == null ? void 0 : c.type}:${c == null ? void 0 : c.isDeleted}:${c == null ? void 0 : c.version}:${c == null ? void 0 : c.versionNonce}`, s = e.map((c) => c.index);
  for (let [c, d] of s.entries()) {
    let o = s[c - 1], u = s[c + 1];
    if (_1(d, o, u) || r.push(`Fractional indices invariant has been compromised: "${l(e[c - 1])}", "${l(e[c])}", "${l(e[c + 1])}"`), n && Jn(e[c])) {
      let f = e[c], p = be(f, ue(e));
      p && p.index <= f.index && r.push(`Fractional indices invariant for bound elements has been compromised: "${l(p)}", "${l(f)}"`);
    }
  }
  if (r.length) {
    let c = new BI(), d = [];
    if (i && (d.push("Additional reconciliation context:"), d.push(i.localElements.map((o) => l(o))), d.push(i.remoteElements.map((o) => l(o)))), a || console.error(r.join(`

`), c.stack, e.map((o) => l(o)), ...d), t) throw c;
  }
}, MR = (e) => e.sort((t, n) => Bm(t) && Bm(n) ? t.index < n.index ? -1 : t.index > n.index ? 1 : t.id < n.id ? -1 : 1 : 1), ei = (e, t) => {
  try {
    let n = CR(e, t), a = L7(e, n), i = e.map((r) => a.has(r) ? { ...r, ...a.get(r) } : r);
    cp(i, { includeBoundTextValidation: !1, shouldThrow: !0, ignoreLogs: !0 });
    for (let [r, l] of a) W(r, l, !1);
  } catch {
    _i(e);
  }
  return e;
}, _i = (e) => {
  let t = IR(e), n = L7(e, t);
  for (let [a, i] of n) W(a, i, !1);
  return e;
}, CR = (e, t) => {
  let n = [], a = 0;
  for (; a < e.length; ) if (t.has(e[a].id)) {
    let i = [a - 1, a];
    for (; ++a < e.length && t.has(e[a].id); ) i.push(a);
    i.push(a), n.push(i);
  } else a++;
  return n;
}, IR = (e) => {
  let t = [], n, a, i = -1, r = 0, l = (d) => {
    var f;
    let o = e[i] ? e[i].index : void 0, u = (f = e[d - 1]) == null ? void 0 : f.index;
    return !o && u || o && u && u > o ? [u, d - 1] : [o, i];
  }, s = (d) => {
    var f;
    let o = e[r] ? e[r].index : void 0;
    if (o && d < r) return [o, r];
    let u = r;
    for (; ++u < e.length; ) {
      let p = (f = e[u]) == null ? void 0 : f.index;
      if (!o && p || o && p && p > o) return [p, u];
    }
    return [void 0, u];
  }, c = 0;
  for (; c < e.length; ) {
    let d = e[c].index;
    if ([n, i] = l(c), [a, r] = s(c), _1(d, n, a)) c++;
    else {
      let o = [i, c];
      for (; ++c < e.length; ) {
        let u = e[c].index, [f, p] = l(c), [U, m] = s(c);
        if (_1(u, f, U)) break;
        [n, i] = [f, p], [a, r] = [U, m], o.push(c);
      }
      o.push(r), t.push(o);
    }
  }
  return t;
}, _1 = (e, t, n) => e ? t && n ? t < e && e < n : !t && n ? e < n : t && !n ? t < e : !!e : !1, L7 = (e, t) => {
  var a, i;
  let n = /* @__PURE__ */ new Map();
  for (let r of t) {
    let l = r.shift(), s = r.pop(), c = c1((a = e[l]) == null ? void 0 : a.index, (i = e[s]) == null ? void 0 : i.index, r.length);
    for (let d = 0; d < r.length; d++) {
      let o = e[r[d]];
      n.set(o, { index: c[d] });
    }
  }
  return n;
}, Bm = (e) => !!e.index, Mt = class Aa {
  constructor(t, n) {
    this.deleted = t, this.inserted = n;
  }
  static create(t, n, a, i) {
    let r = a && i !== "inserted" ? a(t) : t, l = a && i !== "deleted" ? a(n) : n;
    return new Aa(r, l);
  }
  static calculate(t, n, a, i) {
    if (t === n) return Aa.empty();
    let r = {}, l = {};
    for (let d of this.distinctKeysIterator("full", t, n)) r[d] = t[d], l[d] = n[d];
    let [s, c] = i ? i(r, l) : [r, l];
    return Aa.create(s, c, a);
  }
  static empty() {
    return new Aa({}, {});
  }
  static isEmpty(t) {
    return !Object.keys(t.deleted).length && !Object.keys(t.inserted).length;
  }
  static mergeObjects(t, n, a) {
    let i = { ...t };
    for (let r of Object.keys(a)) delete i[r];
    return { ...i, ...n };
  }
  static mergeArrays(t, n, a, i) {
    return Object.values(Aa.mergeObjects(oi(t ?? [], i), oi(n ?? [], i), oi(a ?? [], i)));
  }
  static diffObjects(t, n, a, i) {
    if (!(!t[a] && !n[a]) && (typeof t[a] == "object" || typeof n[a] == "object")) {
      let r = t[a] ?? {}, l = n[a] ?? {}, s = Aa.getLeftDifferences(r, l).reduce((d, o) => (d[o] = i(r[o]), d), {}), c = Aa.getRightDifferences(r, l).reduce((d, o) => (d[o] = i(l[o]), d), {});
      Object.keys(s).length || Object.keys(c).length ? (Reflect.set(t, a, s), Reflect.set(n, a, c)) : (Reflect.deleteProperty(t, a), Reflect.deleteProperty(n, a));
    }
  }
  static diffArrays(t, n, a, i) {
    if (!(!t[a] && !n[a]) && (Array.isArray(t[a]) || Array.isArray(n[a]))) {
      let r = Array.isArray(t[a]) ? t[a] : [], l = Array.isArray(n[a]) ? n[a] : [], s = oi(Aa.getLeftDifferences(oi(r, i), oi(l, i))), c = oi(Aa.getRightDifferences(oi(r, i), oi(l, i)));
      if (Object.keys(s).length || Object.keys(c).length) {
        let d = r.filter((u) => s[i ? i(u) : String(u)]), o = l.filter((u) => c[i ? i(u) : String(u)]);
        Reflect.set(t, a, d), Reflect.set(n, a, o);
      } else Reflect.deleteProperty(t, a), Reflect.deleteProperty(n, a);
    }
  }
  static isLeftDifferent(t, n, a = !1) {
    return !!this.distinctKeysIterator("left", t, n, a).next().value;
  }
  static isRightDifferent(t, n, a = !1) {
    return !!this.distinctKeysIterator("right", t, n, a).next().value;
  }
  static getLeftDifferences(t, n, a = !1) {
    return Array.from(this.distinctKeysIterator("left", t, n, a));
  }
  static getRightDifferences(t, n, a = !1) {
    return Array.from(this.distinctKeysIterator("right", t, n, a));
  }
  static *distinctKeysIterator(t, n, a, i = !1) {
    if (n === a) return;
    let r = [];
    t === "left" ? r = Object.keys(n) : t === "right" ? r = Object.keys(a) : t === "full" ? r = Array.from(/* @__PURE__ */ new Set([...Object.keys(n), ...Object.keys(a)])) : il(t, `Unknown distinctKeysIterator's join param "${t}"`, !0);
    for (let l of r) {
      let s = n[l], c = a[l];
      if (s !== c) {
        if (!i && typeof s == "object" && typeof c == "object" && s !== null && c !== null && qt(s, c)) continue;
        yield l;
      }
    }
  }
}, Hm = class bn {
  constructor(t) {
    this.delta = t;
  }
  static calculate(t, n) {
    let a = Mt.calculate(t, n, void 0, bn.postProcess);
    return new bn(a);
  }
  static empty() {
    return new bn(Mt.create({}, {}));
  }
  inverse() {
    let t = Mt.create(this.delta.inserted, this.delta.deleted);
    return new bn(t);
  }
  applyTo(t, n) {
    try {
      let { selectedElementIds: a = {}, selectedGroupIds: i = {} } = this.delta.deleted, { selectedElementIds: r = {}, selectedGroupIds: l = {}, selectedLinearElementId: s, editingLinearElementId: c, ...d } = this.delta.inserted, o = Mt.mergeObjects(t.selectedElementIds, r, a), u = Mt.mergeObjects(t.selectedGroupIds, l, i), f = s && n.has(s) ? new J(n.get(s)) : null, p = c && n.has(c) ? new J(n.get(c)) : null, U = { ...t, ...d, selectedElementIds: o, selectedGroupIds: u, selectedLinearElement: typeof s < "u" ? f : t.selectedLinearElement, editingLinearElement: typeof c < "u" ? p : t.editingLinearElement }, m = this.filterInvisibleChanges(t, U, n);
      return [U, m];
    } catch (a) {
      if (console.error("Couldn't apply appstate change", a), ve.DEV || ve.MODE === En.TEST) throw a;
      return [t, !1];
    }
  }
  isEmpty() {
    return Mt.isEmpty(this.delta);
  }
  static postProcess(t, n) {
    try {
      Mt.diffObjects(t, n, "selectedElementIds", (a) => !0), Mt.diffObjects(t, n, "selectedGroupIds", (a) => a ?? !1);
    } catch (a) {
      if (console.error("Couldn't postprocess appstate change deltas."), ve.DEV || ve.MODE === En.TEST) throw a;
    } finally {
      return [t, n];
    }
  }
  filterInvisibleChanges(t, n, a) {
    let i = fu(t), r = fu(n), l = Mt.isRightDifferent(bn.stripElementsProps(i), bn.stripElementsProps(r)), s = Mt.isRightDifferent(bn.stripStandaloneProps(i), bn.stripStandaloneProps(r));
    if (!l && !s) return !1;
    let c = { value: l };
    if (s) {
      let d = Mt.getRightDifferences(bn.stripStandaloneProps(i), bn.stripStandaloneProps(r)), o = /* @__PURE__ */ new Set();
      (d.includes("editingGroupId") || d.includes("selectedGroupIds")) && (o = qL(a));
      for (let u of d) switch (u) {
        case "selectedElementIds":
          n[u] = bn.filterSelectedElements(n[u], a, c);
          break;
        case "selectedGroupIds":
          n[u] = bn.filterSelectedGroups(n[u], o, c);
          break;
        case "croppingElementId": {
          let m = n[u], g = m && a.get(m);
          g && !g.isDeleted ? c.value = !0 : n[u] = null;
          break;
        }
        case "editingGroupId":
          let f = n[u];
          f ? o.has(f) ? c.value = !0 : n[u] = null : c.value = !0;
          break;
        case "selectedLinearElementId":
        case "editingLinearElementId":
          let p = bn.convertToAppStateKey(u), U = n[p];
          if (!U) c.value = !0;
          else {
            let m = a.get(U.elementId);
            m && !m.isDeleted ? c.value = !0 : n[p] = null;
          }
          break;
        default:
          il(u, `Unknown ObservedElementsAppState's key "${u}"`, !0);
      }
    }
    return c.value;
  }
  static convertToAppStateKey(t) {
    switch (t) {
      case "selectedLinearElementId":
        return "selectedLinearElement";
      case "editingLinearElementId":
        return "editingLinearElement";
    }
  }
  static filterSelectedElements(t, n, a) {
    let i = Object.keys(t);
    if (!i.length) return a.value = !0, t;
    let r = { ...t };
    for (let l of i) {
      let s = n.get(l);
      s && !s.isDeleted ? a.value = !0 : delete r[l];
    }
    return r;
  }
  static filterSelectedGroups(t, n, a) {
    if (!Object.keys(t).length) return a.value = !0, t;
    let i = { ...t };
    for (let r of Object.keys(i)) n.has(r) ? a.value = !0 : delete i[r];
    return i;
  }
  static stripElementsProps(t) {
    let { editingGroupId: n, selectedGroupIds: a, selectedElementIds: i, editingLinearElementId: r, selectedLinearElementId: l, croppingElementId: s, ...c } = t;
    return c;
  }
  static stripStandaloneProps(t) {
    let { name: n, viewBackgroundColor: a, ...i } = t;
    return i;
  }
}, Zi = class dt {
  constructor(t, n, a) {
    this.added = t, this.removed = n, this.updated = a;
  }
  static create(t, n, a, i = { shouldRedistribute: !1 }) {
    let r;
    if (i.shouldRedistribute) {
      let l = /* @__PURE__ */ new Map(), s = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map(), d = [...t, ...n, ...a];
      for (let [o, u] of d) this.satisfiesAddition(u) ? l.set(o, u) : this.satisfiesRemoval(u) ? s.set(o, u) : c.set(o, u);
      r = new dt(l, s, c);
    } else r = new dt(t, n, a);
    return (ve.DEV || ve.MODE === En.TEST) && (dt.validate(r, "added", this.satisfiesAddition), dt.validate(r, "removed", this.satisfiesRemoval), dt.validate(r, "updated", this.satisfiesUpdate)), r;
  }
  static validate(t, n, a) {
    for (let [i, r] of t[n].entries()) if (!a(r)) throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`, r), new Error(`ElementsChange invariant broken for element "${i}".`);
  }
  static calculate(t, n) {
    if (t === n) return dt.empty();
    let a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map();
    for (let l of t.values()) if (!n.get(l.id)) {
      let s = { ...l, isDeleted: !1 }, c = { isDeleted: !0 }, d = Mt.create(s, c, dt.stripIrrelevantProps);
      i.set(l.id, d);
    }
    for (let l of n.values()) {
      let s = t.get(l.id);
      if (!s) {
        let c = { isDeleted: !0 }, d = { ...l, isDeleted: !1 }, o = Mt.create(c, d, dt.stripIrrelevantProps);
        a.set(l.id, o);
        continue;
      }
      if (s.versionNonce !== l.versionNonce) {
        let c = Mt.calculate(s, l, dt.stripIrrelevantProps, dt.postProcess);
        if (typeof s.isDeleted == "boolean" && typeof l.isDeleted == "boolean" && s.isDeleted !== l.isDeleted) {
          s.isDeleted && !l.isDeleted ? a.set(l.id, c) : i.set(l.id, c);
          continue;
        }
        Mt.isEmpty(c) || r.set(l.id, c);
      }
    }
    return dt.create(a, i, r);
  }
  static empty() {
    return dt.create(/* @__PURE__ */ new Map(), /* @__PURE__ */ new Map(), /* @__PURE__ */ new Map());
  }
  inverse() {
    let t = (r) => {
      let l = /* @__PURE__ */ new Map();
      for (let [s, c] of r.entries()) l.set(s, Mt.create(c.inserted, c.deleted));
      return l;
    }, n = t(this.added), a = t(this.removed), i = t(this.updated);
    return dt.create(a, n, i);
  }
  isEmpty() {
    return this.added.size === 0 && this.removed.size === 0 && this.updated.size === 0;
  }
  applyLatestChanges(t) {
    let n = (s) => (c) => {
      let d = {};
      for (let o of Object.keys(c)) switch (o) {
        case "boundElements":
          d[o] = c[o];
          break;
        default:
          d[o] = s[o];
      }
      return d;
    }, a = (s) => {
      let c = /* @__PURE__ */ new Map();
      for (let [d, o] of s.entries()) {
        let u = t.get(d);
        if (u) {
          let f = Mt.create(o.deleted, o.inserted, n(u), "inserted");
          c.set(d, f);
        } else c.set(d, o);
      }
      return c;
    }, i = a(this.added), r = a(this.removed), l = a(this.updated);
    return dt.create(i, r, l, { shouldRedistribute: !0 });
  }
  applyTo(t, n) {
    let a = Kn(new Map(t)), i, r = { containsVisibleDifference: !1, containsZindexDifference: !1 };
    try {
      let l = dt.createApplier(a, n, r), s = l(this.added), c = l(this.removed), d = l(this.updated), o = this.resolveConflicts(t, a);
      i = new Map([...s, ...c, ...d, ...o]);
    } catch (l) {
      if (console.error("Couldn't apply elements change", l), ve.DEV || ve.MODE === En.TEST) throw l;
      return [t, !0];
    }
    try {
      dt.redrawTextBoundingBoxes(a, i), a = dt.reorderElements(a, i, r), dt.redrawBoundArrows(a, i);
    } catch (l) {
      if (console.error("Couldn't mutate elements after applying elements change", l), ve.DEV || ve.MODE === En.TEST) throw l;
    } finally {
      return [a, r.containsVisibleDifference];
    }
  }
  static applyDelta(t, n, a = { containsVisibleDifference: !0, containsZindexDifference: !0 }) {
    var l, s;
    let { boundElements: i, ...r } = n.inserted;
    if ((l = n.deleted.boundElements) != null && l.length || (s = n.inserted.boundElements) != null && s.length) {
      let c = Mt.mergeArrays(t.boundElements, n.inserted.boundElements, n.deleted.boundElements, (d) => d.id);
      Object.assign(r, { boundElements: c });
    }
    if (Re(t)) {
      let c = n;
      (c.deleted.crop || c.inserted.crop) && Object.assign(r, { crop: c.inserted.crop ?? null });
    }
    if (!a.containsVisibleDifference) {
      let { index: c, ...d } = r, o = dt.checkForVisibleDifference(t, d);
      a.containsVisibleDifference = o;
    }
    return a.containsZindexDifference || (a.containsZindexDifference = n.deleted.index !== n.inserted.index), ge(t, r);
  }
  static checkForVisibleDifference(t, n) {
    return t.isDeleted && n.isDeleted !== !1 ? !1 : t.isDeleted && n.isDeleted === !1 || t.isDeleted === !1 && n.isDeleted ? !0 : Mt.isRightDifferent(t, n);
  }
  resolveConflicts(t, n) {
    let a = /* @__PURE__ */ new Map(), i = (d, o) => {
      let u = n.get(d.id);
      if (!u) return;
      let f;
      t.get(d.id) === u ? f = ge(u, o) : f = W(u, o), a.set(f.id, f), n.set(f.id, f);
    };
    for (let [d] of this.removed) dt.unbindAffected(t, n, d, i);
    for (let [d] of this.added) dt.rebindAffected(t, n, d, i);
    for (let [d] of Array.from(this.updated).filter(([o, u]) => Object.keys({ ...u.deleted, ...u.inserted }).find((f) => zL.has(f)))) {
      let o = n.get(d);
      !o || o.isDeleted || dt.rebindAffected(t, n, d, i);
    }
    let r = new Map(Array.from(t).filter(([d]) => a.has(d))), { added: l, removed: s, updated: c } = dt.calculate(r, a);
    for (let [d, o] of l) this.added.set(d, o);
    for (let [d, o] of s) this.removed.set(d, o);
    for (let [d, o] of c) this.updated.set(d, o);
    return a;
  }
  static unbindAffected(t, n, a, i) {
    let r = () => t.get(a), l = () => n.get(a);
    zl.unbindAffected(n, r(), i), zl.unbindAffected(n, l(), i), Bl.unbindAffected(n, r(), i), Bl.unbindAffected(n, l(), i);
  }
  static rebindAffected(t, n, a, i) {
    let r = () => t.get(a), l = () => n.get(a);
    zl.unbindAffected(n, r(), i), zl.rebindAffected(n, l(), i), Bl.unbindAffected(n, r(), (s, c) => {
      q(s) && i(s, c);
    }), Bl.rebindAffected(n, l(), i);
  }
  static redrawTextBoundingBoxes(t, n) {
    let a = /* @__PURE__ */ new Map();
    for (let i of n.values()) {
      if (rt(i)) {
        let { containerId: r } = i, l = r ? t.get(r) : void 0;
        l && a.set(l.id, { container: l, boundText: i });
      }
      if (Jn(i)) {
        let r = Ii(i), l = r ? t.get(r) : void 0;
        l && a.set(i.id, { container: i, boundText: l });
      }
    }
    for (let { container: i, boundText: r } of a.values()) i.isDeleted || r.isDeleted || un(r, i, t, !1);
  }
  static redrawBoundArrows(t, n) {
    for (let a of n.values()) !a.isDeleted && xa(a) && Sn(a, t, {});
  }
  static reorderElements(t, n, a) {
    if (!a.containsZindexDifference) return t;
    let i = Array.from(t.values()), r = MR([...i]), l = Mt.getRightDifferences(i, r, !0).reduce((s, c) => {
      let d = i[Number(c)];
      return d && n.has(d.id) && s.set(d.id, d), s;
    }, /* @__PURE__ */ new Map());
    return !a.containsVisibleDifference && l.size && (a.containsVisibleDifference = !0), ue(ei(r, l));
  }
  static postProcess(t, n) {
    try {
      Mt.diffArrays(t, n, "boundElements", (a) => a.id);
    } catch (a) {
      if (console.error("Couldn't postprocess elements change deltas."), ve.DEV || ve.MODE === En.TEST) throw a;
    } finally {
      return [t, n];
    }
  }
  static stripIrrelevantProps(t) {
    let { id: n, updated: a, version: i, versionNonce: r, seed: l, ...s } = t;
    return s;
  }
};
j(Zi, "satisfiesAddition", ({ deleted: e, inserted: t }) => e.isDeleted === !0 && !t.isDeleted), j(Zi, "satisfiesRemoval", ({ deleted: e, inserted: t }) => !e.isDeleted && t.isDeleted === !0), j(Zi, "satisfiesUpdate", ({ deleted: e, inserted: t }) => !!e.isDeleted == !!t.isDeleted), j(Zi, "createApplier", (e, t, n) => {
  let a = Zi.createGetter(e, t, n);
  return (i) => Array.from(i.entries()).reduce((r, [l, s]) => {
    let c = a(l, s.inserted);
    if (c) {
      let d = Zi.applyDelta(c, s, n);
      e.set(d.id, d), r.set(d.id, d);
    }
    return r;
  }, /* @__PURE__ */ new Map());
}), j(Zi, "createGetter", (e, t, n) => (a, i) => {
  let r = e.get(a);
  return r || (r = t.get(a), r && (n.containsZindexDifference = !0, (i.isDeleted === !1 || i.isDeleted !== !0 && r.isDeleted === !1) && (n.containsVisibleDifference = !0))), r;
});
var Xm = Zi, Oa = class {
  constructor() {
    j(this, "subscribers", []);
  }
  on(...e) {
    let t = e.flat().filter((n) => typeof n == "function");
    return this.subscribers.push(...t), () => this.off(t);
  }
  once(...e) {
    let t = e.flat().filter((a) => typeof a == "function");
    t.push(() => n());
    let n = this.on(...t);
    return n;
  }
  off(...e) {
    let t = e.flat();
    this.subscribers = this.subscribers.filter((n) => !t.includes(n));
  }
  trigger(...e) {
    for (let t of this.subscribers) t(...e);
    return this;
  }
  clear() {
    this.subscribers = [];
  }
}, R7 = "__observedAppState", fu = (e) => {
  var n, a;
  let t = { name: e.name, editingGroupId: e.editingGroupId, viewBackgroundColor: e.viewBackgroundColor, selectedElementIds: e.selectedElementIds, selectedGroupIds: e.selectedGroupIds, editingLinearElementId: ((n = e.editingLinearElement) == null ? void 0 : n.elementId) || null, selectedLinearElementId: ((a = e.selectedLinearElement) == null ? void 0 : a.elementId) || null, croppingElementId: e.croppingElementId };
  return Reflect.defineProperty(t, R7, { value: !0, enumerable: !1 }), t;
}, TR = (e) => !!Reflect.get(e, R7), H = { IMMEDIATELY: "IMMEDIATELY", NEVER: "NEVER", EVENTUALLY: "EVENTUALLY" }, _R = class {
  constructor(e, t) {
    this.elementsChange = e, this.appStateChange = t;
  }
}, AR = class {
  constructor() {
    j(this, "onStoreIncrementEmitter", new Oa()), j(this, "scheduledActions", /* @__PURE__ */ new Set()), j(this, "_snapshot", Wm.empty()), j(this, "shouldCaptureIncrement", () => {
      this.scheduleAction(H.IMMEDIATELY);
    }), j(this, "shouldUpdateSnapshot", () => {
      this.scheduleAction(H.NEVER);
    }), j(this, "scheduleAction", (e) => {
      this.scheduledActions.add(e), this.satisfiesScheduledActionsInvariant();
    }), j(this, "commit", (e, t) => {
      try {
        this.scheduledActions.has(H.IMMEDIATELY) ? this.captureIncrement(e, t) : this.scheduledActions.has(H.NEVER) && this.updateSnapshot(e, t);
      } finally {
        this.satisfiesScheduledActionsInvariant(), this.scheduledActions = /* @__PURE__ */ new Set();
      }
    }), j(this, "captureIncrement", (e, t) => {
      let n = this.snapshot, a = this.snapshot.maybeClone(e, t);
      if (n !== a) {
        let i = a.meta.didElementsChange ? Xm.calculate(n.elements, a.elements) : Xm.empty(), r = a.meta.didAppStateChange ? Hm.calculate(n.appState, a.appState) : Hm.empty();
        (!i.isEmpty() || !r.isEmpty()) && this.onStoreIncrementEmitter.trigger(new _R(i, r)), this.snapshot = a;
      }
    }), j(this, "updateSnapshot", (e, t) => {
      let n = this.snapshot.maybeClone(e, t);
      this.snapshot !== n && (this.snapshot = n);
    }), j(this, "filterUncomittedElements", (e, t) => {
      for (let [n, a] of e.entries()) {
        if (!t.get(n)) continue;
        let i = this.snapshot.elements.get(n);
        i ? i.version < a.version && t.set(n, i) : t.delete(n);
      }
      return t;
    }), j(this, "clear", () => {
      this.snapshot = Wm.empty(), this.scheduledActions = /* @__PURE__ */ new Set();
    }), j(this, "satisfiesScheduledActionsInvariant", () => {
      if (!(this.scheduledActions.size >= 0 && this.scheduledActions.size <= 3)) {
        let e = `There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;
        if (console.error(e, this.scheduledActions.values()), ve.DEV || ve.MODE === En.TEST) throw new Error(e);
      }
    });
  }
  get snapshot() {
    return this._snapshot;
  }
  set snapshot(e) {
    this._snapshot = e;
  }
}, Wm = class A1 {
  constructor(t, n, a = { didElementsChange: !1, didAppStateChange: !1, isEmpty: !1 }) {
    this.elements = t, this.appState = n, this.meta = a;
  }
  static empty() {
    return new A1(/* @__PURE__ */ new Map(), fu(Ka()), { didElementsChange: !1, didAppStateChange: !1, isEmpty: !0 });
  }
  isEmpty() {
    return this.meta.isEmpty;
  }
  maybeClone(t, n) {
    let a = this.maybeCreateElementsSnapshot(t), i = this.maybeCreateAppStateSnapshot(n), r = !1, l = !1;
    return this.elements !== a && (r = !0), this.appState !== i && (l = !0), !r && !l ? this : new A1(a, i, { didElementsChange: r, didAppStateChange: l });
  }
  maybeCreateAppStateSnapshot(t) {
    if (!t) return this.appState;
    let n = TR(t) ? t : fu(t);
    return this.detectChangedAppState(n) ? n : this.appState;
  }
  detectChangedAppState(t) {
    return !qt(this.appState, t, { selectedElementIds: qt, selectedGroupIds: qt });
  }
  maybeCreateElementsSnapshot(t) {
    return t ? this.detectChangedElements(t) ? this.createElementsSnapshot(t) : this.elements : this.elements;
  }
  detectChangedElements(t) {
    if (this.elements === t) return !1;
    if (this.elements.size !== t.size) return !0;
    let n = Array.from(t.keys());
    for (let a = n.length - 1; a >= 0; a--) {
      let i = this.elements.get(n[a]), r = t.get(n[a]);
      if (!i || !r || i.id !== r.id || i.versionNonce !== r.versionNonce) return !0;
    }
    return !1;
  }
  createElementsSnapshot(t) {
    let n = /* @__PURE__ */ new Map();
    for (let [a, i] of this.elements.entries()) t.get(a) ? n.set(a, i) : n.set(a, ge(i, { isDeleted: !0 }));
    for (let [a, i] of t.entries()) {
      let r = n.get(a);
      (!r || r && r.versionNonce !== i.versionNonce) && n.set(a, bl(i));
    }
    return n;
  }
}, Ta = /* @__PURE__ */ new Map(), jR = /^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/, DR = /^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/, LR = /^https:\/\/(?:www\.)?figma\.com/, Vm = /^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/, RR = /^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i, Gm = /(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/, PR = /^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i, NR = /^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/, OR = /^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i, Ym = /giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/, Zm = /^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/, $R = /^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i, j1 = /* @__PURE__ */ new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "link.excalidraw.com", "gist.github.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com", "val.town", "giphy.com", "reddit.com"]), Km = /* @__PURE__ */ new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com", "reddit.com"]), xo = (e) => `<html><body>${e}</body></html>`, Hl = (e) => {
  if (!e) return null;
  if (Ta.has(e)) return Ta.get(e);
  let t = e, n = Km.has(D1(e, Km) || ""), a = "generic", i = { w: 560, h: 840 }, r = e.match(jR);
  if (r != null && r[2]) {
    let c = r[3] ? `&start=${r[3]}` : "", d = e.includes("shorts");
    switch (a = "video", r[1]) {
      case "embed/":
      case "watch?v=":
      case "shorts/":
        e = `https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;
        break;
      case "playlist?list=":
      case "embed/videoseries?list=":
        e = `https://www.youtube.com/embed/videoseries?list=${r[2]}&enablejsapi=1${c}`;
        break;
      default:
        e = `https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;
        break;
    }
    return i = d ? { w: 315, h: 560 } : { w: 560, h: 315 }, Ta.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  }
  let l = e.match(DR);
  if (l != null && l[1]) {
    let c = l == null ? void 0 : l[1], d = /^\d+$/.test(c) ? void 0 : new URIError("Invalid embed link format");
    return a = "video", e = `https://player.vimeo.com/video/${c}?api=1`, i = { w: 560, h: 315 }, Ta.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, error: d, sandbox: { allowSameOrigin: n } };
  }
  if (e.match(LR)) return a = "generic", e = `https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`, i = { w: 550, h: 550 }, Ta.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  let s = e.match(NR);
  if (s) return e = s[1] === "embed" ? s[0] : s[0].replace("/v", "/embed"), Ta.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  if (Gm.test(e)) {
    let c = e.match(Gm)[1], d = gd(`https://twitter.com/x/status/${c}`), o = { type: "document", srcdoc: (u) => xo(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${u}"><a href="${d}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`), intrinsicSize: { w: 480, h: 480 }, sandbox: { allowSameOrigin: n } };
    return Ta.set(t, o), o;
  }
  if (Zm.test(e)) {
    let [, c, d, o] = e.match(Zm), u = gd(`https://reddit.com/r/${c}/comments/${d}/${o}`), f = { type: "document", srcdoc: (p) => xo(`<blockquote class="reddit-embed-bq" data-embed-theme="${p}"><a href="${u}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`), intrinsicSize: { w: 480, h: 480 }, sandbox: { allowSameOrigin: n } };
    return Ta.set(t, f), f;
  }
  if (Vm.test(e)) {
    let [, c, d] = e.match(Vm), o = gd(`https://gist.github.com/${c}/${d}`), u = { type: "document", srcdoc: () => xo(`
          <script src="${o}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `), intrinsicSize: { w: 550, h: 720 }, sandbox: { allowSameOrigin: n } };
    return Ta.set(e, u), u;
  }
  return Ta.set(e, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
}, P7 = (e) => {
  let t;
  qi(e) ? t = "IFrame element" : t = !e.link || (e == null ? void 0 : e.link) === "" ? "Empty Web-Embed" : e.link;
  let n = Math.max(Math.min(e.width / 2, e.width / t.length), e.width / 30), a = ut.Helvetica, i = Ye({ fontSize: n, fontFamily: a });
  return Rn({ x: e.x + e.width / 2, y: e.y + e.height / 2, strokeColor: e.strokeColor !== "transparent" ? e.strokeColor : "black", backgroundColor: "transparent", fontFamily: a, fontSize: n, text: gl(t, i, e.width - 20), textAlign: "center", verticalAlign: jn.MIDDLE, angle: e.angle ?? 0 });
};
Z({ name: "setEmbeddableAsActiveTool", trackEvent: { category: "toolbar" }, target: "Tool", label: "toolBar.embeddable", perform: (e, t, n, a) => {
  let i = Ct(t, { type: "embeddable" });
  return La(a.canvas, { ...t, activeTool: i }), { elements: e, appState: { ...t, activeTool: Ct(t, { type: "embeddable" }) }, captureUpdate: H.EVENTUALLY };
} });
var D1 = (e, t) => {
  try {
    let { hostname: n } = new URL(e), a = n.replace(/^www\./, "");
    if (t instanceof Set) {
      if (j1.has(a)) return a;
      let r = a.replace(/^([^.]+)/, "*");
      return j1.has(r) ? r : null;
    }
    let i = t.replace(/^www\./, "");
    if (a === i) return i;
  } catch {
  }
  return null;
}, FR = (e) => {
  let t = e.match(PR);
  if (t && t.length === 2) return t[1];
  let n = e.match($R);
  if (n && n.length === 2) return n[1];
  let a = e.match(RR);
  if (a && a.length === 2) return a[1];
  if (Ym.test(e)) return `https://giphy.com/embed/${Ym.exec(e)[1]}`;
  let i = e.match(OR);
  return i && i.length === 2 ? i[1] : e;
}, Sd = (e, t) => {
  if (!e) return !1;
  if (t != null) if (typeof t == "function") {
    let n = t(e);
    if (typeof n == "boolean") return n;
  } else {
    if (typeof t == "boolean") return t;
    if (t instanceof RegExp) return t.test(e);
    if (Array.isArray(t)) {
      for (let n of t) if (n instanceof RegExp) {
        if (e.match(n)) return !0;
      } else if (D1(e, n)) return !0;
      return !1;
    }
  }
  return !!D1(e, j1);
}, Hs = (e, t, n) => {
  let a = { sets: t.sets, shape: t.shape, options: { ...t.options, fixedDecimalPlaceDigits: n } };
  return e.draw(a);
}, Xs = (e, t, n, a, i) => {
  if (!a.enabled || !a.clip) return null;
  let r = kn(e, i);
  if (r) {
    let l = t.ownerDocument.createElementNS(je, "g");
    return l.setAttributeNS(je, "clip-path", `url(#${r.id})`), n.forEach((s) => l.appendChild(s)), l;
  }
  return null;
}, kd = (e, t, n, a, i, r, l, s) => {
  var x;
  let c = { x: r, y: l }, [d, o, u, f] = Ue(e, t), p = (u - d) / 2 - (e.x - d), U = (f - o) / 2 - (e.y - o);
  if (q(e)) {
    let y = Vt(e, t);
    if (ye(y)) {
      let [E, S, w, M] = Ue(y, t), I = J.getBoundTextElementPosition(y, e, t);
      p = (w - E) / 2 - (I.x - E), U = (M - S) / 2 - (I.y - S), r = r + I.x - e.x, l = l + I.y - e.y;
    }
  }
  let m = 180 * e.angle / Math.PI, g = a;
  if (e.link) {
    let y = a.ownerDocument.createElementNS(je, "a");
    y.setAttribute("href", Dn(e.link)), g.appendChild(y), g = y;
  }
  let b = (y, E) => {
    ki() && y.setAttribute("data-id", E.id), g.appendChild(y);
  }, v = (((x = kn(e, t)) == null ? void 0 : x.opacity) ?? 100) * e.opacity / 1e4;
  switch (e.type) {
    case "selection":
      throw new Error("Selection rendering is not supported for SVG");
    case "rectangle":
    case "diamond":
    case "ellipse": {
      let y = pt.generateElementShape(e, null), E = Hs(n, y, Fs);
      v !== 1 && (E.setAttribute("stroke-opacity", `${v}`), E.setAttribute("fill-opacity", `${v}`)), E.setAttribute("stroke-linecap", "round"), E.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`);
      let S = Xs(e, g, [E], s.frameRendering, t);
      b(S || E, e);
      break;
    }
    case "iframe":
    case "embeddable": {
      let y = pt.generateElementShape(e, s), E = Hs(n, y, Fs), S = e.opacity / 100;
      S !== 1 && (E.setAttribute("stroke-opacity", `${S}`), E.setAttribute("fill-opacity", `${S}`)), E.setAttribute("stroke-linecap", "round"), E.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`), b(E, e);
      let w = P7(e);
      kd(w, t, n, g, i, w.x + c.x - e.x, w.y + c.y - e.y, s);
      let M = Hs(n, y, Fs);
      for (M.setAttribute("stroke-linecap", "round"), M.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`); M.firstChild; ) M.removeChild(M.firstChild);
      let I = ma(Math.min(e.width, e.height), e), T = Hl(S7(e.link || ""));
      if (s.renderEmbeddables === !1 || (T == null ? void 0 : T.type) === "document") {
        let _ = a.ownerDocument.createElementNS(je, "a");
        _.setAttribute("href", Dn(e.link || "")), _.setAttribute("target", "_blank"), _.setAttribute("rel", "noopener noreferrer"), _.style.borderRadius = `${I}px`, M.appendChild(_);
      } else {
        let _ = a.ownerDocument.createElementNS(je, "foreignObject");
        _.style.width = `${e.width}px`, _.style.height = `${e.height}px`, _.style.border = "none";
        let A = _.ownerDocument.createElementNS(je, "div");
        A.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"), A.style.width = "100%", A.style.height = "100%";
        let D = A.ownerDocument.createElement("iframe");
        D.src = (T == null ? void 0 : T.link) ?? "", D.style.width = "100%", D.style.height = "100%", D.style.border = "none", D.style.borderRadius = `${I}px`, D.style.top = "0", D.style.left = "0", D.allowFullscreen = !0, A.appendChild(D), _.appendChild(A), M.appendChild(_);
      }
      b(M, e);
      break;
    }
    case "line":
    case "arrow": {
      let y = be(e, t), E = a.ownerDocument.createElementNS(je, "mask");
      if (y) {
        E.setAttribute("id", `mask-${e.id}`);
        let M = a.ownerDocument.createElementNS(je, "rect");
        r = r || 0, l = l || 0, M.setAttribute("x", "0"), M.setAttribute("y", "0"), M.setAttribute("fill", "#fff"), M.setAttribute("width", `${e.width + 100 + r}`), M.setAttribute("height", `${e.height + 100 + l}`), E.appendChild(M);
        let I = a.ownerDocument.createElementNS(je, "rect"), T = J.getBoundTextElementPosition(e, y, t), _ = r + T.x - e.x, A = l + T.y - e.y;
        I.setAttribute("x", _.toString()), I.setAttribute("y", A.toString()), I.setAttribute("fill", "#000"), I.setAttribute("width", `${y.width}`), I.setAttribute("height", `${y.height}`), I.setAttribute("opacity", "1"), E.appendChild(I);
      }
      let S = a.ownerDocument.createElementNS(je, "g");
      y && S.setAttribute("mask", `url(#mask-${e.id})`), S.setAttribute("stroke-linecap", "round"), pt.generateElementShape(e, s).forEach((M) => {
        let I = Hs(n, M, Fs);
        v !== 1 && (I.setAttribute("stroke-opacity", `${v}`), I.setAttribute("fill-opacity", `${v}`)), I.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`), e.type === "line" && Mi(e.points) && e.backgroundColor !== "transparent" && I.setAttribute("fill-rule", "evenodd"), S.appendChild(I);
      });
      let w = Xs(e, g, [S, E], s.frameRendering, t);
      w ? (b(w, e), g.appendChild(w)) : (b(S, e), g.append(E));
      break;
    }
    case "freedraw": {
      let y = pt.generateElementShape(e, s), E = y ? Hs(n, y, Fs) : a.ownerDocument.createElementNS(je, "g");
      v !== 1 && (E.setAttribute("stroke-opacity", `${v}`), E.setAttribute("fill-opacity", `${v}`)), E.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`), E.setAttribute("stroke", "none");
      let S = a.ownerDocument.createElementNS(je, "path");
      S.setAttribute("fill", e.strokeColor), S.setAttribute("d", e7(e)), E.appendChild(S);
      let w = Xs(e, g, [E], s.frameRendering, t);
      b(w || E, e);
      break;
    }
    case "image": {
      let y = Math.round(e.width), E = Math.round(e.height), S = Bn(e) && i[e.fileId];
      if (S) {
        let { reuseImages: w = !0 } = s, M = `image-${S.id}`, I = e.width, T = e.height;
        e.crop && ({ width: I, height: T } = Ci(e), M = `image-crop-${S.id}-${mN(`${I}x${T}`)}`), w || (M = `image-${e.id}`);
        let _ = a.querySelector(`#${M}`);
        if (!_) {
          _ = a.ownerDocument.createElementNS(je, "symbol"), _.id = M;
          let O = a.ownerDocument.createElementNS(je, "image");
          O.setAttribute("href", S.dataURL), O.setAttribute("preserveAspectRatio", "none"), e.crop || !w ? (O.setAttribute("width", `${I}`), O.setAttribute("height", `${T}`)) : (O.setAttribute("width", "100%"), O.setAttribute("height", "100%")), _.appendChild(O), (g.querySelector("defs") || g).prepend(_);
        }
        let A = a.ownerDocument.createElementNS(je, "use");
        A.setAttribute("href", `#${M}`), s.exportWithDarkMode && S.mimeType !== oe.svg && A.setAttribute("filter", V8);
        let D = 0, P = 0;
        if (e.crop) {
          let { width: O, height: G } = Ci(e);
          D = e.crop.x / (e.crop.naturalWidth / O), P = e.crop.y / (e.crop.naturalHeight / G);
        }
        let N = p + D, $ = U + P;
        A.setAttribute("width", `${y + D}`), A.setAttribute("height", `${E + P}`), A.setAttribute("opacity", `${v}`), (e.scale[0] !== 1 || e.scale[1] !== 1) && A.setAttribute("transform", `translate(${N} ${$}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-N} ${-$})`);
        let R = a.ownerDocument.createElementNS(je, "g");
        if (e.crop) {
          let O = a.ownerDocument.createElementNS(je, "mask");
          O.setAttribute("id", `mask-image-crop-${e.id}`), O.setAttribute("fill", "#fff");
          let G = a.ownerDocument.createElementNS(je, "rect");
          G.setAttribute("x", `${D}`), G.setAttribute("y", `${P}`), G.setAttribute("width", `${y}`), G.setAttribute("height", `${E}`), O.appendChild(G), g.appendChild(O), R.setAttribute("mask", `url(#${O.id})`);
        }
        if (R.appendChild(A), R.setAttribute("transform", `translate(${r - D} ${l - P}) rotate(${m} ${N} ${$})`), e.roundness) {
          let O = a.ownerDocument.createElementNS(je, "clipPath");
          O.id = `image-clipPath-${e.id}`;
          let G = a.ownerDocument.createElementNS(je, "rect"), ae = ma(Math.min(e.width, e.height), e);
          G.setAttribute("width", `${e.width}`), G.setAttribute("height", `${e.height}`), G.setAttribute("rx", `${ae}`), G.setAttribute("ry", `${ae}`), O.appendChild(G), b(O, e), R.setAttributeNS(je, "clip-path", `url(#${O.id})`);
        }
        let V = Xs(e, g, [R], s.frameRendering, t);
        b(V || R, e);
      }
      break;
    }
    case "frame":
    case "magicframe": {
      if (s.frameRendering.enabled && s.frameRendering.outline) {
        let y = document.createElementNS(je, "rect");
        y.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`), y.setAttribute("width", `${e.width}px`), y.setAttribute("height", `${e.height}px`), y.setAttribute("rx", ht.radius.toString()), y.setAttribute("ry", ht.radius.toString()), y.setAttribute("fill", "none"), y.setAttribute("stroke", ht.strokeColor), y.setAttribute("stroke-width", ht.strokeWidth.toString()), b(y, e);
      }
      break;
    }
    default:
      if (q(e)) {
        let y = a.ownerDocument.createElementNS(je, "g");
        v !== 1 && (y.setAttribute("stroke-opacity", `${v}`), y.setAttribute("fill-opacity", `${v}`)), y.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${p} ${U})`);
        let E = e.text.replace(/\r\n?/g, `
`).split(`
`), S = Uc(e.fontSize, e.lineHeight), w = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0, M = D8(e.fontFamily, e.fontSize, S), I = Kb(e.text) ? "rtl" : "ltr", T = e.textAlign === "center" ? "middle" : e.textAlign === "right" || I === "rtl" ? "end" : "start";
        for (let A = 0; A < E.length; A++) {
          let D = a.ownerDocument.createElementNS(je, "text");
          D.textContent = E[A], D.setAttribute("x", `${w}`), D.setAttribute("y", `${A * S + M}`), D.setAttribute("font-family", as(e)), D.setAttribute("font-size", `${e.fontSize}px`), D.setAttribute("fill", e.strokeColor), D.setAttribute("text-anchor", T), D.setAttribute("style", "white-space: pre;"), D.setAttribute("direction", I), D.setAttribute("dominant-baseline", "alphabetic"), y.appendChild(D);
        }
        let _ = Xs(e, g, [y], s.frameRendering, t);
        b(_ || y, e);
      } else throw new Error(`Unimplemented type ${e.type}`);
  }
}, zR = (e, t, n, a, i, r) => {
  a && (e.filter((l) => !Hn(l)).forEach((l) => {
    if (!l.isDeleted) {
      if (q(l) && l.containerId && t.has(l.containerId)) return;
      try {
        kd(l, t, n, a, i, l.x + r.offsetX, l.y + r.offsetY, r);
        let s = be(l, t);
        s && kd(s, t, n, a, i, s.x + r.offsetX, s.y + r.offsetY, r);
      } catch (s) {
        console.error(s);
      }
    }
  }), e.filter((l) => Hn(l)).forEach((l) => {
    if (!l.isDeleted) try {
      kd(l, t, n, a, i, l.x + r.offsetX, l.y + r.offsetY, r);
    } catch (s) {
      console.error(s);
    }
  }));
}, qm = 500, dp = (e) => {
  var a, i;
  let t = (a = e.extensions) == null ? void 0 : a.reduce((r, l) => (r.push(oe[l]), r), []), n = (i = e.extensions) == null ? void 0 : i.reduce((r, l) => l === "jpg" ? r.concat(".jpg", ".jpeg") : r.concat(`.${l}`), []);
  return Uk({ description: e.description, extensions: n, mimeTypes: t, multiple: e.multiple ?? !1, legacySetup: (r, l, s) => {
    let c = is(l, qm), d = () => {
      o(), document.addEventListener("keyup", c), document.addEventListener("pointerup", c), c();
    }, o = () => {
      var f;
      if ((f = s.files) != null && f.length) {
        let p = e.multiple ? [...s.files] : s.files[0];
        r(p);
      }
    };
    requestAnimationFrame(() => {
      window.addEventListener("focus", d);
    });
    let u = window.setInterval(() => {
      o();
    }, qm);
    return (f) => {
      clearInterval(u), c.cancel(), window.removeEventListener("focus", d), document.removeEventListener("keyup", c), document.removeEventListener("pointerup", c), f && (console.warn("Opening the file was canceled (legacy-fs)."), f(new Zu()));
    };
  } });
}, pu = (e, t) => gk(e, { fileName: `${t.name}.${t.extension}`, description: t.description, extensions: [`.${t.extension}`], mimeTypes: t.mimeTypes }, t.fileHandle), BR = (e, t) => {
  let n = {};
  for (let a of e) !a.isDeleted && "fileId" in a && a.fileId && t[a.fileId] && (n[a.fileId] = t[a.fileId]);
  return n;
}, up = (e, t, n, a) => {
  let i = { type: Gn.excalidraw, version: Bu.excalidraw, source: D0, elements: x3(e), appState: Wb(t), files: BR(e, n) };
  return JSON.stringify(i, null, 2);
}, N7 = async (e, t, n, a = t.name || Hb) => {
  let i = up(e, t, n), r = new Blob([i], { type: oe.excalidraw });
  return { fileHandle: await pu(r, { name: a, extension: "excalidraw", description: "Excalidraw file", fileHandle: Bp(t.fileHandle) ? null : t.fileHandle }) };
}, HR = async (e, t) => {
  let n = await dp({ description: "Excalidraw files" });
  return k3(await Hp(n), e, t, n.handle);
}, XR = (e) => (e == null ? void 0 : e.type) === Gn.excalidraw && (!e.elements || Array.isArray(e.elements) && (!e.appState || typeof e.appState == "object")), O7 = (e) => typeof e == "object" && e && e.type === Gn.excalidrawLibrary && (e.version === 1 || e.version === 2), $7 = (e) => {
  let t = { type: Gn.excalidrawLibrary, version: Bu.excalidrawLibrary, source: D0, libraryItems: e };
  return JSON.stringify(t, null, 2);
}, WR = async (e) => {
  let t = $7(e);
  await pu(new Blob([t], { type: oe.excalidrawlib }), { name: "library", extension: "excalidrawlib", description: "Excalidraw library file" });
}, F7 = (e) => new Promise((t, n) => {
  let a = new Image();
  a.onload = () => {
    t(a);
  }, a.onerror = (i) => {
    n(i);
  }, a.src = e;
}), z7 = async ({ fileIds: e, files: t, imageCache: n }) => {
  let a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map();
  return await Promise.all(e.reduce((r, l) => {
    let s = t[l];
    return s && !a.has(l) ? (a.set(l, !0), r.concat((async () => {
      try {
        if (s.mimeType === oe.binary) throw new Error("Only images can be added to ImageCache");
        let c = F7(s.dataURL), d = { image: c, mimeType: s.mimeType };
        n.set(l, d);
        let o = await c;
        n.set(l, { ...d, image: o });
      } catch {
        i.set(l, !0);
      }
    })())) : r;
  }, [])), { imageCache: n, updatedFiles: a, erroredFiles: i };
}, B7 = (e) => e.filter((t) => Bn(t)), VR = (e) => (e == null ? void 0 : e.nodeName.toLowerCase()) === "svg", Jm = (e) => {
  let t = new DOMParser().parseFromString(e, oe.svg), n = t.querySelector("svg");
  if (t.querySelector("parsererror") || !VR(n)) throw new Error("Invalid SVG");
  {
    n.hasAttribute("xmlns") || n.setAttribute("xmlns", je);
    let a = n.getAttribute("width"), i = n.getAttribute("height");
    (a != null && a.includes("%") || a === "auto") && (a = null), (i != null && i.includes("%") || i === "auto") && (i = null);
    let r = n.getAttribute("viewBox");
    if (!a || !i) {
      if (a = a || "50", i = i || "50", r) {
        let l = r.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);
        l && ([, a, i] = l);
      }
      n.setAttribute("width", a), n.setAttribute("height", i);
    }
    return r || n.setAttribute("viewBox", `0 0 ${a} ${i}`), n.outerHTML;
  }
}, H7 = document.createElement("img");
H7.src = `data:${oe.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;
var X7 = document.createElement("img");
X7.src = `data:${oe.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;
var hp = ([e, t, n, a], i, r) => {
  let l = qD, s = l / r.zoom.value, c = l / r.zoom.value, d = l / r.zoom.value, o = (e + n) / 2, u = (t + a) / 2, f = (l - 8) / (2 * r.zoom.value), p = 4 / r.zoom.value, U = n + p - f, m = t - p - d + f, [g, b] = B(k(U + s / 2, m + c / 2), k(o, u), i);
  return [g - s / 2, b - c / 2, s, c];
}, W7 = (e, t, n, [a, i]) => {
  let r = 4 / n.zoom.value, [l, s, c, d] = Ue(e, t), [o, u, f, p] = hp([l, s, c, d], e.angle, n);
  return a > o - r && a < o + r + f && i > u - r && i < u + p + r;
}, df = (e, t, n, [a, i], r) => !e.link || n.selectedElementIds[e.id] ? !1 : !r && n.viewModeEnabled && Q0(a, i, e, t) ? !0 : W7(e, t, n, k(a, i)), sh = (e, t, n, a, i = !0) => {
  e.beginPath(), e.arc(t, n, a, 0, Math.PI * 2), e.fill(), i && e.stroke();
}, fp = (e, t) => [e.width / t, e.height / t], pp = ({ canvas: e, scale: t, normalizedWidth: n, normalizedHeight: a, theme: i, isExporting: r, viewBackgroundColor: l }) => {
  let s = e.getContext("2d");
  return s.setTransform(1, 0, 0, 1, 0, 0), s.scale(t, t), r && i === Me.DARK && (s.filter = P0), typeof l == "string" ? ((l === "transparent" || l.length === 5 || l.length === 9 || /(hsla|rgba)\(/.test(l)) && s.clearRect(0, 0, n, a), s.save(), s.fillStyle = l, s.fillRect(0, 0, n, a), s.restore()) : s.clearRect(0, 0, n, a), s;
}, V7 = (e, t) => {
  let n = window.location.href;
  try {
    let a = new URL(n);
    return a.searchParams.set(Zd, e), Dn(a.toString());
  } catch (a) {
    console.error(a);
  }
  return Dn(n);
}, G7 = (e, t) => {
  if (e.length > 0 && Uu(e)) {
    if (e.length === 1) return { id: e[0].id, type: "element" };
    if (e.length > 1) {
      let n = Object.keys(t.selectedGroupIds)[0];
      return n ? { id: n, type: "group" } : { id: e[0].groupIds[0], type: "group" };
    }
  }
  return null;
}, Uu = (e) => !!(e.length === 1 || e.length > 1 && v7(e)), yo = (e) => {
  try {
    let t = new URL(e);
    return t.searchParams.has(Zd) && t.host === window.location.host;
  } catch {
    return !1;
  }
}, GR = (e) => {
  try {
    let { searchParams: t } = new URL(e);
    if (t.has(Zd)) return t.get(Zd);
  } catch {
  }
  return null;
}, Wc = { Bold: "#dddddd", Regular: "#e5e5e5" }, YR = (e, t, n, a, i, r, l, s) => {
  let c = a % t - t, d = i % t - t, o = t * r.value, u = 1 / r.value;
  e.save(), r.value === 1 && e.translate(c % 1 ? 0 : 0.5, d % 1 ? 0 : 0.5);
  for (let f = c; f < c + l + t * 2; f += t) {
    let p = n > 1 && Math.round(f - a) % (n * t) === 0;
    if (!p && o < 10) continue;
    let U = Math.min(1 / r.value, p ? 4 : 1);
    e.lineWidth = U;
    let m = [U * 3, u + (U + u)];
    e.beginPath(), e.setLineDash(p ? [] : m), e.strokeStyle = p ? Wc.Bold : Wc.Regular, e.moveTo(f, d - t), e.lineTo(f, Math.ceil(d + s + t * 2)), e.stroke();
  }
  for (let f = d; f < d + s + t * 2; f += t) {
    let p = n > 1 && Math.round(f - i) % (n * t) === 0;
    if (!p && o < 10) continue;
    let U = Math.min(1 / r.value, p ? 4 : 1);
    e.lineWidth = U;
    let m = [U * 3, u + (U + u)];
    e.beginPath(), e.setLineDash(p ? [] : m), e.strokeStyle = p ? Wc.Bold : Wc.Regular, e.moveTo(c - t, f), e.lineTo(Math.ceil(c + l + t * 2), f), e.stroke();
  }
  e.restore();
}, Qm = (e, t, n, a) => {
  t.translate(e.x + a.scrollX, e.y + a.scrollY), t.beginPath(), t.roundRect ? t.roundRect(0, 0, e.width, e.height, ht.radius / a.zoom.value) : t.rect(0, 0, e.width, e.height), t.clip(), t.translate(-(e.x + a.scrollX), -(e.y + a.scrollY));
}, eg = { regularLink: null, elementLink: null }, tg = (e, t, n, a) => {
  if (e.link && !n.selectedElementIds[e.id]) {
    let [i, r, l, s] = Ue(e, a), [c, d, o, u] = hp([i, r, l, s], e.angle, n), f = c + o / 2, p = d + u / 2;
    t.save(), t.translate(n.scrollX + f, n.scrollY + p), t.rotate(e.angle);
    let U = yo(e.link) ? "elementLink" : "regularLink", m = eg[U];
    if (!m || m.zoom !== n.zoom.value) {
      m = Object.assign(document.createElement("canvas"), { zoom: n.zoom.value }), m.width = o * window.devicePixelRatio * n.zoom.value, m.height = u * window.devicePixelRatio * n.zoom.value, eg[U] = m;
      let g = m.getContext("2d");
      g.scale(window.devicePixelRatio * n.zoom.value, window.devicePixelRatio * n.zoom.value), g.fillStyle = "#fff", g.fillRect(0, 0, o, u), U === "elementLink" ? g.drawImage(X7, 0, 0, o, u) : g.drawImage(H7, 0, 0, o, u), g.restore();
    }
    t.drawImage(m, c - f, d - p, o, u), t.restore();
  }
}, Y7 = ({ canvas: e, rc: t, elementsMap: n, allElementsMap: a, visibleElements: i, scale: r, appState: l, renderConfig: s }) => {
  var m;
  if (e === null) return;
  let { renderGrid: c = !0, isExporting: d } = s, [o, u] = fp(e, r), f = pp({ canvas: e, scale: r, normalizedWidth: o, normalizedHeight: u, theme: l.theme, isExporting: d, viewBackgroundColor: l.viewBackgroundColor });
  f.scale(l.zoom.value, l.zoom.value), c && YR(f, l.gridSize, l.gridStep, l.scrollX, l.scrollY, l.zoom, o / l.zoom.value, u / l.zoom.value);
  let p = /* @__PURE__ */ new Set();
  i.forEach((g) => {
    g.groupIds.length > 0 && l.frameToHighlight && l.selectedElementIds[g.id] && (Ur(g, l.frameToHighlight, n) || g.groupIds.find((b) => p.has(b))) && g.groupIds.forEach((b) => p.add(b));
  });
  let U = /* @__PURE__ */ new Map();
  i.filter((g) => !Hn(g)).forEach((g) => {
    var b;
    try {
      let v = g.frameId || ((b = l.frameToHighlight) == null ? void 0 : b.id);
      if (q(g) && g.containerId && n.has(g.containerId)) return;
      if (f.save(), v && l.frameRendering.enabled && l.frameRendering.clip) {
        let y = L1(g, n, l);
        y && Ug(g, y, l, n, U) && Qm(y, f, s, l), Lr(g, n, a, t, f, s, l);
      } else Lr(g, n, a, t, f, s, l);
      let x = be(g, n);
      x && Lr(x, n, a, t, f, s, l), f.restore(), d || tg(g, f, l, n);
    } catch (v) {
      console.error(v, g.id, g.x, g.y, g.width, g.height);
    }
  }), i.filter((g) => Hn(g)).forEach((g) => {
    var b;
    try {
      let v = () => {
        if (Lr(g, n, a, t, f, s, l), Hn(g) && (d || vn(g) && s.embedsValidationStatus.get(g.id) !== !0) && g.width && g.height) {
          let x = P7(g);
          Lr(x, n, a, t, f, s, l);
        }
        d || tg(g, f, l, n);
      };
      if ((g.frameId || (b = l.frameToHighlight) != null && b.id) && l.frameRendering.enabled && l.frameRendering.clip) {
        f.save();
        let x = L1(g, n, l);
        x && Ug(g, x, l, n, U) && Qm(x, f, s, l), v(), f.restore();
      } else v();
    } catch (v) {
      console.error(v);
    }
  }), (m = s.pendingFlowchartNodes) == null || m.forEach((g) => {
    try {
      Lr(g, n, a, t, f, s, l);
    } catch (b) {
      console.error(b);
    }
  });
}, Z7 = Hu((e) => {
  Y7(e);
}, { trailing: !0 }), K7 = (e, t) => {
  if (t) {
    Z7(e);
    return;
  }
  Y7(e);
}, ZR = (e, t) => {
  if (e.width <= t) return e;
  let n = document.createElement("canvas").getContext("2d");
  n.font = Ye({ fontFamily: e.fontFamily, fontSize: e.fontSize });
  let a = e.text;
  if (n.measureText(a).width > t) for (let i = a.length; i > 0; i--) {
    let r = `${a.slice(0, i)}...`;
    if (n.measureText(r).width <= t) {
      a = r;
      break;
    }
  }
  return ge(e, { text: a, width: t });
}, KR = (e, t) => {
  let n = [];
  for (let a of e) {
    if (de(a)) {
      let i = Rn({ x: a.x, y: a.y - ht.nameOffsetY, fontFamily: ut.Helvetica, fontSize: ht.nameFontSize, lineHeight: ht.nameLineHeight, strokeColor: t.exportWithDarkMode ? ht.nameColorDarkTheme : ht.nameColorLightTheme, text: d3(a) });
      i.y -= i.height, i = ZR(i, a.width), n.push(i);
    }
    n.push(a);
  }
  return n;
}, q7 = (e, t) => (t = t || Ka().frameRendering, { enabled: e ? !0 : t.enabled, outline: e ? !1 : t.outline, name: e ? !1 : t.name, clip: e ? !0 : t.clip }), J7 = ({ elements: e, exportingFrame: t, frameRendering: n, exportWithDarkMode: a }) => {
  let i;
  return t ? i = Lp(e, t) : n.enabled && n.name ? i = KR(e, { exportWithDarkMode: a }) : i = e, i;
}, Q7 = async (e, t, n, { exportBackground: a, exportPadding: i = Es, viewBackgroundColor: r, exportingFrame: l }, s = (d, o) => {
  let u = document.createElement("canvas");
  return u.width = d * t.exportScale, u.height = o * t.exportScale, { canvas: u, scale: t.exportScale };
}, c = async () => {
  await wi.loadElementsFonts(e);
}) => {
  await c();
  let d = q7(l ?? null, t.frameRendering ?? null);
  l && (d.clip = !1);
  let o = J7({ elements: e, exportingFrame: l, exportWithDarkMode: t.exportWithDarkMode, frameRendering: d });
  l && (i = 0);
  let [u, f, p, U] = mp(l ? [l] : Dp(o), i), { canvas: m, scale: g = 1 } = s(p, U), b = Ka(), { imageCache: v } = await z7({ imageCache: /* @__PURE__ */ new Map(), fileIds: B7(o).map((x) => x.fileId), files: n });
  return K7({ canvas: m, rc: vr.canvas(m), elementsMap: Kn(ue(o)), allElementsMap: Kn(ue(_i(e))), visibleElements: o, scale: g, appState: { ...t, frameRendering: d, viewBackgroundColor: a ? r : null, scrollX: -u + i, scrollY: -f + i, zoom: b.zoom, shouldCacheIgnoreZoom: !1, theme: t.exportWithDarkMode ? Me.DARK : Me.LIGHT }, renderConfig: { canvasBackgroundColor: r, imageCache: v, renderGrid: !1, isExporting: !0, embedsValidationStatus: /* @__PURE__ */ new Map(), elementsPendingErasure: /* @__PURE__ */ new Set(), pendingFlowchartNodes: null } }), m;
}, io = (e) => document.createComment(` ${e} `), Up = async (e, t, n, a) => {
  let i = q7((a == null ? void 0 : a.exportingFrame) ?? null, t.frameRendering ?? null), { exportPadding: r = Es, exportWithDarkMode: l = !1, viewBackgroundColor: s, exportScale: c = 1, exportEmbedScene: d } = t, { exportingFrame: o = null } = a || {}, u = J7({ elements: e, exportingFrame: o, exportWithDarkMode: l, frameRendering: i });
  o && (r = 0);
  let [f, p, U, m] = mp(o ? [o] : Dp(u), r), g = -f + r, b = -p + r, v = document.createElementNS(je, "svg");
  v.setAttribute("version", "1.1"), v.setAttribute("xmlns", je), v.setAttribute("viewBox", `0 0 ${U} ${m}`), v.setAttribute("width", `${U * c}`), v.setAttribute("height", `${m * c}`), l && v.setAttribute("filter", P0);
  let x = v.ownerDocument.createElementNS(je, "defs"), y = v.ownerDocument.createElementNS(je, "metadata");
  if (v.appendChild(io("svg-source:excalidraw")), v.appendChild(y), v.appendChild(x), d) try {
    qR({ metadataElement: y, payload: up(e, t, n || {}, "local") });
  } catch (_) {
    console.error(_);
  }
  let E = jp(e);
  if (E.length) {
    let _ = ue(e);
    for (let A of E) {
      let D = v.ownerDocument.createElementNS(je, "clipPath");
      D.setAttribute("id", A.id);
      let [P, N, $, R] = Ue(A, _), V = ($ - P) / 2 - (A.x - P), O = (R - N) / 2 - (A.y - N), G = v.ownerDocument.createElementNS(je, "rect");
      G.setAttribute("transform", `translate(${A.x + g} ${A.y + b}) rotate(${A.angle} ${V} ${O})`), G.setAttribute("width", `${A.width}`), G.setAttribute("height", `${A.height}`), o || (G.setAttribute("rx", `${ht.radius}`), G.setAttribute("ry", `${ht.radius}`)), D.appendChild(G), x.appendChild(D);
    }
  }
  let S = a != null && a.skipInliningFonts ? [] : await wi.generateFontFaceDeclarations(e), w = `
      `, M = v.ownerDocument.createElementNS(je, "style");
  if (M.classList.add("style-fonts"), M.appendChild(document.createTextNode(`${w}${S.join(w)}`)), x.appendChild(M), t.exportBackground && s) {
    let _ = v.ownerDocument.createElementNS(je, "rect");
    _.setAttribute("x", "0"), _.setAttribute("y", "0"), _.setAttribute("width", `${U}`), _.setAttribute("height", `${m}`), _.setAttribute("fill", s), v.appendChild(_);
  }
  let I = vr.svg(v), T = (a == null ? void 0 : a.renderEmbeddables) ?? !1;
  return zR(u, Kn(ue(u)), I, v, n || {}, { offsetX: g, offsetY: b, isExporting: !0, exportWithDarkMode: l, renderEmbeddables: T, frameRendering: i, canvasBackgroundColor: s, embedsValidationStatus: T ? new Map(u.filter((_) => de(_)).map((_) => [_.id, !0])) : /* @__PURE__ */ new Map(), reuseImages: (a == null ? void 0 : a.reuseImages) ?? !0 }), v;
}, qR = ({ payload: e, metadataElement: t }) => {
  let n = T3(JSON.stringify(A3({ text: e })), !0);
  t.appendChild(io(`payload-type:${oe.excalidraw}`)), t.appendChild(io("payload-version:2")), t.appendChild(io("payload-start")), t.appendChild(document.createTextNode(n)), t.appendChild(io("payload-end"));
}, JR = ({ svg: e }) => {
  var t;
  if (e.includes(`payload-type:${oe.excalidraw}`)) {
    let n = e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);
    if (!n) throw new Error("INVALID");
    let a = (((t = e.match(/<!-- payload-version:(\d+) -->/)) == null ? void 0 : t[1]) || "1") !== "1";
    try {
      let i = _3(n[1], a), r = JSON.parse(i);
      if (!("encoded" in r)) {
        if ("type" in r && r.type === Gn.excalidraw) return i;
        throw new Error("FAILED");
      }
      return j3(r);
    } catch (i) {
      throw console.error(i), new Error("FAILED");
    }
  }
  throw new Error("INVALID");
}, mp = (e, t) => {
  let [n, a, i, r] = ze(e), l = en(n, i) + t * 2, s = en(a, r) + t * 2;
  return [n, a, l, s];
}, QR = (e, t, n) => {
  let [, , a, i] = mp(e, t).map((r) => Math.trunc(r * n));
  return [a, i];
}, eP = class {
  constructor(t) {
    this.scoreFunction = t, j(this, "content", []);
  }
  sinkDown(t) {
    let n = this.content[t];
    for (; t > 0; ) {
      let a = (t + 1 >> 1) - 1, i = this.content[a];
      if (this.scoreFunction(n) < this.scoreFunction(i)) this.content[a] = n, this.content[t] = i, t = a;
      else break;
    }
  }
  bubbleUp(t) {
    let n = this.content.length, a = this.content[t], i = this.scoreFunction(a);
    for (; ; ) {
      let r = t + 1 << 1, l = r - 1, s = null, c = 0;
      if (l < n) {
        let d = this.content[l];
        c = this.scoreFunction(d), c < i && (s = l);
      }
      if (r < n) {
        let d = this.content[r];
        this.scoreFunction(d) < (s === null ? i : c) && (s = r);
      }
      if (s !== null) this.content[t] = this.content[s], this.content[s] = a, t = s;
      else break;
    }
  }
  push(t) {
    this.content.push(t), this.sinkDown(this.content.length - 1);
  }
  pop() {
    if (this.content.length === 0) return null;
    let t = this.content[0], n = this.content.pop();
    return this.content.length > 0 && (this.content[0] = n, this.bubbleUp(0)), t;
  }
  remove(t) {
    if (this.content.length === 0) return;
    let n = this.content.indexOf(t), a = this.content.pop();
    n < this.content.length && (this.content[n] = a, this.scoreFunction(a) < this.scoreFunction(t) ? this.sinkDown(n) : this.bubbleUp(n));
  }
  size() {
    return this.content.length;
  }
  rescoreElement(t) {
    this.sinkDown(this.content.indexOf(t));
  }
}, gp = 1, Ve = 40, tP = (e, t) => {
  let n = e.fixedSegments ? e.fixedSegments.slice() : null;
  if (n) {
    let a = [];
    e.points.map((l) => k(e.x + l[0], e.y + l[1])).forEach((l, s, c) => {
      if (s < 2) return a.push(l);
      let d = Xo(l, c[s - 1]), o = Xo(c[s - 1], c[s - 2]);
      if (vt(d, o)) {
        let u = (n == null ? void 0 : n.findIndex((p) => p.index === s - 1)) ?? -1, f = (n == null ? void 0 : n.findIndex((p) => p.index === s)) ?? -1;
        f !== -1 && (n[f].start = k(c[s - 2][0] - e.x, c[s - 2][1] - e.y)), u !== -1 && n.splice(u, 1), a.splice(-1, 1), n.forEach((p) => {
          p.index > s - 1 && (p.index -= 1);
        });
      }
      return a.push(l);
    });
    let i = [];
    a.forEach((l, s, c) => {
      if (s < 3) return i.push(l);
      if (Pe(c[s - 2], c[s - 1]) < gp) {
        let d = (n == null ? void 0 : n.findIndex((f) => f.index === s - 2)) ?? -1, o = (n == null ? void 0 : n.findIndex((f) => f.index === s - 1)) ?? -1;
        o !== -1 && n.splice(o, 1), d !== -1 && n.splice(d, 1), i.splice(-2, 2), n.forEach((f) => {
          f.index > s - 2 && (f.index -= 2);
        });
        let u = mi(l, c[s - 1]);
        return i.push(k(u ? l[0] : c[s - 2][0], u ? c[s - 2][1] : l[1]));
      }
      i.push(l);
    });
    let r = n.filter((l) => l.index !== 1 && l.index !== i.length - 1);
    return r.length === 0 ? pr(yp(wp(xp(e, vp(e, t, i.map((l) => k(l[0] - e.x, l[1] - e.y)), e.startBinding && fs(e.startBinding.elementId, t), e.endBinding && fs(e.endBinding.elementId, t))) ?? [])), r, null, null) : (ve.DEV && rn(Ep(i), "Invalid elbow points with fixed segments"), pr(i, r, e.startIsSpecial, e.endIsSpecial));
  }
  return { x: e.x, y: e.y, points: e.points, fixedSegments: e.fixedSegments, startIsSpecial: e.startIsSpecial, endIsSpecial: e.endIsSpecial };
}, nP = (e, t, n) => {
  var M, I;
  let a = t.map((T) => T.index), i = (((M = e.fixedSegments) == null ? void 0 : M.map((T) => T.index)) ?? []).findIndex((T) => !a.includes(T));
  if (i === -1 || !((I = e.fixedSegments) != null && I[i])) return { points: e.points };
  let r = e.fixedSegments[i].index, l = e.fixedSegments[i - 1], s = e.fixedSegments[i + 1], c = e.x + (l ? l.end[0] : 0), d = e.y + (l ? l.end[1] : 0), o = l ? null : e.startBinding, u = s ? null : e.endBinding, { startHeading: f, endHeading: p, startGlobalPoint: U, endGlobalPoint: m, hoveredStartElement: g, hoveredEndElement: b, ...v } = vp({ x: c, y: d, startBinding: o, endBinding: u, startArrowhead: null, endArrowhead: null, points: e.points }, n, [k(0, 0), k(e.x + ((s == null ? void 0 : s.start[0]) ?? e.points[e.points.length - 1][0]) - c, e.y + ((s == null ? void 0 : s.start[1]) ?? e.points[e.points.length - 1][1]) - d)], o && fs(o.elementId, n), u && fs(u.elementId, n), { isDragging: !1 }), { points: x } = pr(yp(wp(xp(e, { startHeading: f, endHeading: p, startGlobalPoint: U, endGlobalPoint: m, hoveredEndElement: b, ...v }) ?? [])), t, null, null), y = [];
  if (l) for (let T = 0; T < l.index; T++) y.push(k(e.x + e.points[T][0], e.y + e.points[T][1]));
  if (x.forEach((T) => {
    y.push(k(e.x + (l ? l.end[0] : 0) + T[0], e.y + (l ? l.end[1] : 0) + T[1]));
  }), s) for (let T = s.index; T < e.points.length; T++) y.push(k(e.x + e.points[T][0], e.y + e.points[T][1]));
  let E = ((s == null ? void 0 : s.index) ?? e.points.length) - ((l == null ? void 0 : l.index) ?? 0) - 1, S = t.map((T) => T.index > r ? { ...T, index: T.index - E + (x.length - 1) } : T), w = y.flatMap((T, _) => {
    let A = y[_ - 1], D = y[_ + 1];
    if (A && D) {
      let P = Xo(T, A), N = Xo(D, T);
      if (vt(P, N)) return S.forEach(($) => {
        $.index > _ && ($.index -= 1);
      }), [];
      if (vt(P, n7(N))) return S.forEach(($) => {
        $.index > _ && ($.index += 1);
      }), [T, T];
    }
    return [T];
  });
  return pr(w, S, !1, !1);
}, aP = (e, t, n, a, i, r) => {
  var E, S;
  let l = t.map((w, M) => e.fixedSegments == null || e.fixedSegments[M] === void 0 || e.fixedSegments[M].index !== w.index || (w.start[0] !== e.fixedSegments[M].start[0] && w.end[0] !== e.fixedSegments[M].end[0]) != (w.start[1] !== e.fixedSegments[M].start[1] && w.end[1] !== e.fixedSegments[M].end[1]) ? M : null).filter((w) => w !== null).shift();
  if (l == null) return { points: e.points };
  let s = ((E = e.fixedSegments) == null ? void 0 : E.findIndex((w) => w.index === 1)) ?? -1, c = ((S = e.fixedSegments) == null ? void 0 : S.findIndex((w) => w.index === e.points.length - 1)) ?? -1, d = Pe(t[l].start, t[l].end), o = d < Ve + 5;
  if (s === -1 && t[l].index === 1 && i) {
    let w = vi(n), M = (w ? vt(n, gt) : vt(n, Xt)) ? o ? d / 2 : Ve : o ? -d / 2 : -Ve;
    t[l].start = k(t[l].start[0] + (w ? M : 0), t[l].start[1] + (w ? 0 : M));
  }
  if (c === -1 && t[l].index === e.points.length - 1 && r) {
    let w = vi(a), M = (w ? vt(a, gt) : vt(a, Xt)) ? o ? d / 2 : Ve : o ? -d / 2 : -Ve;
    t[l].end = k(t[l].end[0] + (w ? M : 0), t[l].end[1] + (w ? 0 : M));
  }
  let u = t.map((w) => ({ ...w, start: k(e.x + w.start[0], e.y + w.start[1]), end: k(e.x + w.end[0], e.y + w.end[1]) })), f = e.points.map((w, M) => k(e.x + w[0], e.y + w[1])), p = u[l].index - 1, U = u[l].index, m = u[l].start, g = u[l].end, b = f[p - 1] && !va(f[p], f[p - 1]) ? mi(f[p - 1], f[p]) : void 0, v = f[U + 1] && !va(f[U], f[U + 1]) ? mi(f[U + 1], f[U]) : void 0;
  if (b !== void 0) {
    let w = b ? 1 : 0;
    f[p - 1][w] = m[w];
  }
  if (f[p] = m, f[U] = g, v !== void 0) {
    let w = v ? 1 : 0;
    f[U + 1][w] = g[w];
  }
  let x = u.findIndex((w) => w.index === p);
  if (x !== -1) {
    let w = mi(u[x].end, u[x].start) ? 1 : 0;
    u[x].start[w] = m[w], u[x].end = m;
  }
  let y = u.findIndex((w) => w.index === U + 1);
  if (y !== -1) {
    let w = mi(u[y].end, u[y].start) ? 1 : 0;
    u[y].end[w] = g[w], u[y].start = g;
  }
  if (s === -1 && p === 0) {
    let w = i ? vi(n) : mi(f[1], f[0]);
    f.unshift(k(w ? m[0] : e.x + e.points[0][0], w ? e.y + e.points[0][1] : m[1])), i && f.unshift(k(e.x + e.points[0][0], e.y + e.points[0][1]));
    for (let M of u) M.index += i ? 2 : 1;
  }
  if (c === -1 && U === e.points.length - 1) {
    let w = vi(a);
    f.push(k(w ? g[0] : e.x + e.points[e.points.length - 1][0], w ? e.y + e.points[e.points.length - 1][1] : g[1])), r && f.push(k(e.x + e.points[e.points.length - 1][0], e.y + e.points[e.points.length - 1][1]));
  }
  return pr(f, u.map((w) => ({ ...w, start: k(w.start[0] - e.x, w.start[1] - e.y), end: k(w.end[0] - e.x, w.end[1] - e.y) })), !1, !1);
}, iP = (e, t, n, a, i, r, l, s, c) => {
  let d = e.startIsSpecial ?? null, o = e.endIsSpecial ?? null, u = t.map((g, b) => b === 0 || b === t.length - 1 ? k(e.x + g[0], e.y + g[1]) : k(e.x + e.points[b][0], e.y + e.points[b][1])), f = n.map((g) => ({ ...g, start: k(e.x + (g.start[0] - t[0][0]), e.y + (g.start[1] - t[0][1])), end: k(e.x + (g.end[0] - t[0][0]), e.y + (g.end[1] - t[0][1])) })), p = [], U = 2 + (d ? 1 : 0), m = 2 + (o ? 1 : 0);
  for (; p.length + U < u.length - m; ) p.push(u[p.length + U]);
  {
    let g = u[d ? 2 : 1], b = u[d ? 3 : 2], v = vi(a), x = vi(cl(le(g, b)));
    if (s && v === x) {
      let y = v ? vt(a, gt) : vt(a, Xt);
      if (p.unshift(k(x ? r[0] + (y ? Ve : -Ve) : b[0], x ? b[1] : r[1] + (y ? Ve : -Ve))), p.unshift(k(v ? r[0] + (y ? Ve : -Ve) : r[0], v ? r[1] : r[1] + (y ? Ve : -Ve))), !d) {
        d = !0;
        for (let E of f) E.index > 1 && (E.index += 1);
      }
    } else if (p.unshift(k(x ? r[0] : g[0], x ? g[1] : r[1])), d) {
      d = !1;
      for (let y of f) y.index > 1 && (y.index -= 1);
    }
    p.unshift(r);
  }
  {
    let g = u[u.length - (o ? 3 : 2)], b = u[u.length - (o ? 4 : 3)], v = vi(i), x = mi(b, g);
    if (c && v === x) {
      let y = v ? vt(i, gt) : vt(i, Xt);
      p.push(k(x ? l[0] + (y ? Ve : -Ve) : b[0], x ? b[1] : l[1] + (y ? Ve : -Ve))), p.push(k(v ? l[0] + (y ? Ve : -Ve) : l[0], v ? l[1] : l[1] + (y ? Ve : -Ve))), o || (o = !0);
    } else p.push(k(x ? l[0] : g[0], x ? g[1] : l[1])), o && (o = !1);
  }
  return p.push(l), pr(p, f.map(({ index: g }) => ({ index: g, start: p[g - 1], end: p[g] })).map((g) => ({ ...g, start: k(g.start[0] - r[0], g.start[1] - r[1]), end: k(g.end[0] - r[0], g.end[1] - r[1]) })), d, o);
}, Ke = 1e6, bp = (e, t, n, a) => {
  var b, v, x, y, E, S, w, M, I, T, _, A, D, P, N, $, R, V, O, G, ae, he, ce, Be, He;
  if (e.points.length < 2) return { points: n.points ?? e.points };
  (e.x < -Ke || e.x > Ke || e.y < -Ke || e.y > Ke || e.x + (((x = (v = n == null ? void 0 : n.points) == null ? void 0 : v[((b = n == null ? void 0 : n.points) == null ? void 0 : b.length) - 1]) == null ? void 0 : x[0]) ?? 0) < -Ke || e.x + (((S = (E = n == null ? void 0 : n.points) == null ? void 0 : E[((y = n == null ? void 0 : n.points) == null ? void 0 : y.length) - 1]) == null ? void 0 : S[0]) ?? 0) > Ke || e.y + (((I = (M = n == null ? void 0 : n.points) == null ? void 0 : M[((w = n == null ? void 0 : n.points) == null ? void 0 : w.length) - 1]) == null ? void 0 : I[1]) ?? 0) < -Ke || e.y + (((A = (_ = n == null ? void 0 : n.points) == null ? void 0 : _[((T = n == null ? void 0 : n.points) == null ? void 0 : T.length) - 1]) == null ? void 0 : A[1]) ?? 0) > Ke || e.x + (((N = (P = e == null ? void 0 : e.points) == null ? void 0 : P[((D = e == null ? void 0 : e.points) == null ? void 0 : D.length) - 1]) == null ? void 0 : N[0]) ?? 0) < -Ke || e.x + (((V = (R = e == null ? void 0 : e.points) == null ? void 0 : R[(($ = e == null ? void 0 : e.points) == null ? void 0 : $.length) - 1]) == null ? void 0 : V[0]) ?? 0) > Ke || e.y + (((ae = (G = e == null ? void 0 : e.points) == null ? void 0 : G[((O = e == null ? void 0 : e.points) == null ? void 0 : O.length) - 1]) == null ? void 0 : ae[1]) ?? 0) < -Ke || e.y + (((Be = (ce = e == null ? void 0 : e.points) == null ? void 0 : ce[((he = e == null ? void 0 : e.points) == null ? void 0 : he.length) - 1]) == null ? void 0 : Be[1]) ?? 0) > Ke) && console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)", { arrow: e, updates: n }), e.x = Se(e.x, -Ke, Ke), e.y = Se(e.y, -Ke, Ke), n.points && (n.points = n.points.map(([Xe, Ne]) => k(Se(Xe, -Ke, Ke), Se(Ne, -Ke, Ke))));
  let i = n.points ? n.points && n.points.length === 2 ? e.points.map((Xe, Ne) => Ne === 0 ? n.points[0] : Ne === e.points.length - 1 ? n.points[1] : Xe) : n.points.slice() : e.points.slice(), r = typeof n.startBinding < "u" ? n.startBinding : e.startBinding, l = typeof n.endBinding < "u" ? n.endBinding : e.endBinding, s = r && fs(r.elementId, t), c = l && fs(l.elementId, t);
  if (t.size === 0 && Ep(i) || (s == null ? void 0 : s.id) !== (r == null ? void 0 : r.elementId) || (c == null ? void 0 : c.id) !== (l == null ? void 0 : l.elementId)) return pr(i.map((Xe) => k(e.x + Xe[0], e.y + Xe[1])), e.fixedSegments, e.startIsSpecial, e.endIsSpecial);
  let { startHeading: d, endHeading: o, startGlobalPoint: u, endGlobalPoint: f, hoveredStartElement: p, hoveredEndElement: U, ...m } = vp({ x: e.x, y: e.y, startBinding: r, endBinding: l, startArrowhead: e.startArrowhead, endArrowhead: e.endArrowhead, points: e.points }, t, i, s, c, a), g = n.fixedSegments ?? e.fixedSegments ?? [];
  return !n.points && !n.fixedSegments && !n.startBinding && !n.endBinding ? tP(e, t) : n.startBinding === e.startBinding && n.endBinding === e.endBinding && (n.points ?? []).every((Xe, Ne) => va(Xe, e.points[Ne] ?? k(1 / 0, 1 / 0))) ? {} : g.length === 0 ? pr(yp(wp(xp(e, { startHeading: d, endHeading: o, startGlobalPoint: u, endGlobalPoint: f, hoveredEndElement: U, ...m }) ?? [])), g, null, null) : (((He = e.fixedSegments) == null ? void 0 : He.length) ?? 0) > g.length ? nP(e, g, t) : n.points ? n.points && n.fixedSegments ? n : iP(e, i, g, d, o, u, f, p, U) : aP(e, g, d, o, p, U);
}, vp = (e, t, n, a, i, r) => {
  var w, M;
  let l = Jd(n[0], Zt(e.x, e.y)), s = Jd(n[n.length - 1], Zt(e.x, e.y)), c = a, d = i;
  if (r != null && r.isDragging) {
    let I = Array.from(t.values());
    c = rg(l, t, I, r == null ? void 0 : r.zoom) || a, d = rg(s, t, I, r == null ? void 0 : r.zoom) || i;
  }
  let o = ag({ ...e, points: n }, "start", (w = e.startBinding) == null ? void 0 : w.fixedPoint, l, a, c, r == null ? void 0 : r.isDragging), u = ag({ ...e, points: n }, "end", (M = e.endBinding) == null ? void 0 : M.fixedPoint, s, i, d, r == null ? void 0 : r.isDragging), f = ig(o, u, t, c, l), p = ig(u, o, t, d, s), U = [o[0] - 2, o[1] - 2, o[0] + 2, o[1] + 2], m = [u[0] - 2, u[1] - 2, u[0] + 2, u[1] + 2], g = c ? Fa(c, Hi(f, e.startArrowhead ? Je * 6 : Je * 2, 1)) : U, b = d ? Fa(d, Hi(p, e.endArrowhead ? Je * 6 : Je * 2, 1)) : m, v = ss(o, d ? Fa(d, Hi(p, Ve, Ve)) : m) || ss(u, c ? Fa(c, Hi(f, Ve, Ve)) : U), x = e3(v ? [U, m] : [g, b]), y = sP(v ? U : g, v ? m : b, x, v ? Hi(f, !c && !d ? 0 : Ve, 0) : Hi(f, !c && !d ? 0 : Ve - (e.startArrowhead ? Je * 6 : Je * 2), Ve), v ? Hi(p, !c && !d ? 0 : Ve, 0) : Hi(p, !c && !d ? 0 : Ve - (e.endArrowhead ? Je * 6 : Je * 2), Ve), v, c && Fa(c), d && Fa(d)), E = ng(y[0], f, o), S = ng(y[1], p, u);
  return { dynamicAABBs: y, startDonglePosition: E, startGlobalPoint: o, startHeading: f, endDonglePosition: S, endGlobalPoint: u, endHeading: p, commonBounds: x, hoveredStartElement: c, hoveredEndElement: d, boundsOverlap: v, startElementBounds: g, endElementBounds: b };
}, xp = (e, t) => {
  let { dynamicAABBs: n, startDonglePosition: a, startGlobalPoint: i, startHeading: r, endDonglePosition: l, endGlobalPoint: s, endHeading: c, commonBounds: d, hoveredEndElement: o } = t, u = oP(n, a || i, r, l || s, c, d), f = a && Vc(a, u), p = l && Vc(l, u), U = Vc(s, u);
  U && o && (U.closed = !0);
  let m = Vc(i, u);
  m && e.startBinding && (m.closed = !0);
  let g = f && p && (ss(f.pos, n[1]) || ss(p.pos, n[0])), b = rP(f || m, p || U, u, r || gt, c || gt, g ? [] : n);
  if (b) {
    let v = b.map((x) => [x.pos[0], x.pos[1]]);
    return f && v.unshift(i), p && v.push(s), v;
  }
  return null;
}, Hi = (e, t, n) => {
  switch (e) {
    case yn:
      return [t, n, n, n];
    case gt:
      return [n, t, n, n];
    case Xt:
      return [n, n, t, n];
  }
  return [n, n, n, t];
}, rP = (e, t, n, a, i, r) => {
  let l = uf(e.pos, t.pos), s = new eP((c) => c.f);
  for (s.push(e); s.size() > 0; ) {
    let c = s.pop();
    if (!c || c.closed) continue;
    if (c === t) return lP(e, c);
    c.closed = !0;
    let d = dP(c.addr, n);
    for (let o = 0; o < 4; o++) {
      let u = d[o];
      if (!u || u.closed) continue;
      let f = di(u.pos, c.pos, 0.5);
      if (DM(...r.map((x) => ss(f, x)))) continue;
      let p = uP(o), U = c.parent ? cl(le(c.pos, c.parent.pos)) : a, m = n7(U);
      if (vt(m, p) || lg(e.addr, u.addr) && vt(p, a) || lg(t.addr, u.addr) && vt(p, i)) continue;
      let g = U !== p, b = c.g + uf(u.pos, c.pos) + (g ? Math.pow(l, 3) : 0), v = u.visited;
      if (!v || b < u.g) {
        let x = cP(u, t, p, i);
        u.visited = !0, u.parent = c, u.h = uf(t.pos, u.pos) + x * Math.pow(l, 2), u.g = b, u.f = u.g + u.h, v ? s.rescoreElement(u) : s.push(u);
      }
    }
  }
  return null;
}, lP = (e, t) => {
  let n = t, a = [];
  for (; n.parent; ) a.unshift(n), n = n.parent;
  return a.unshift(e), a;
}, uf = (e, t) => Math.abs(e[0] - t[0]) + Math.abs(e[1] - t[1]), sP = (e, t, n, a, i, r, l, s) => {
  let c = l ?? e, d = s ?? t, [o, u, f, p] = a ?? [0, 0, 0, 0], [U, m, g, b] = i ?? [0, 0, 0, 0], v = [e[0] > t[2] ? e[1] > t[3] || e[3] < t[1] ? Math.min((c[0] + d[2]) / 2, e[0] - p) : (c[0] + d[2]) / 2 : e[0] > t[0] ? e[0] - p : n[0] - p, e[1] > t[3] ? e[0] > t[2] || e[2] < t[0] ? Math.min((c[1] + d[3]) / 2, e[1] - o) : (c[1] + d[3]) / 2 : e[1] > t[1] ? e[1] - o : n[1] - o, e[2] < t[0] ? e[1] > t[3] || e[3] < t[1] ? Math.max((c[2] + d[0]) / 2, e[2] + u) : (c[2] + d[0]) / 2 : e[2] < t[2] ? e[2] + u : n[2] + u, e[3] < t[1] ? e[0] > t[2] || e[2] < t[0] ? Math.max((c[3] + d[1]) / 2, e[3] + f) : (c[3] + d[1]) / 2 : e[3] < t[3] ? e[3] + f : n[3] + f], x = [t[0] > e[2] ? t[1] > e[3] || t[3] < e[1] ? Math.min((d[0] + c[2]) / 2, t[0] - b) : (d[0] + c[2]) / 2 : t[0] > e[0] ? t[0] - b : n[0] - b, t[1] > e[3] ? t[0] > e[2] || t[2] < e[0] ? Math.min((d[1] + c[3]) / 2, t[1] - U) : (d[1] + c[3]) / 2 : t[1] > e[1] ? t[1] - U : n[1] - U, t[2] < e[0] ? t[1] > e[3] || t[3] < e[1] ? Math.max((d[2] + c[0]) / 2, t[2] + m) : (d[2] + c[0]) / 2 : t[2] < e[2] ? t[2] + m : n[2] + m, t[3] < e[1] ? t[0] > e[2] || t[2] < e[0] ? Math.max((d[3] + c[1]) / 2, t[3] + g) : (d[3] + c[1]) / 2 : t[3] < e[3] ? t[3] + g : n[3] + g], y = e3([v, x]);
  if (!r && v[2] - v[0] + x[2] - x[0] > y[2] - y[0] + 1e-11 && v[3] - v[1] + x[3] - x[1] > y[3] - y[1] + 1e-11) {
    let [E, S] = [(x[0] + x[2]) / 2, (x[1] + x[3]) / 2];
    if (t[0] > e[2] && e[1] > t[3]) {
      let w = v[2] + (x[0] - v[2]) / 2, M = x[3] + (v[1] - x[3]) / 2;
      return Rt(Zt(e[2] - E, e[1] - S), Zt(e[0] - E, e[3] - S)) > 0 ? [[v[0], v[1], w, v[3]], [w, x[1], x[2], x[3]]] : [[v[0], M, v[2], v[3]], [x[0], x[1], x[2], M]];
    } else if (e[2] < t[0] && e[3] < t[1]) {
      let w = v[2] + (x[0] - v[2]) / 2, M = v[3] + (x[1] - v[3]) / 2;
      return Rt(Zt(e[0] - E, e[1] - S), Zt(e[2] - E, e[3] - S)) > 0 ? [[v[0], v[1], v[2], M], [x[0], M, x[2], x[3]]] : [[v[0], v[1], w, v[3]], [w, x[1], x[2], x[3]]];
    } else if (e[0] > t[2] && e[3] < t[1]) {
      let w = x[2] + (v[0] - x[2]) / 2, M = v[3] + (x[1] - v[3]) / 2;
      return Rt(Zt(e[2] - E, e[1] - S), Zt(e[0] - E, e[3] - S)) > 0 ? [[w, v[1], v[2], v[3]], [x[0], x[1], w, x[3]]] : [[v[0], v[1], v[2], M], [x[0], M, x[2], x[3]]];
    } else if (e[0] > t[2] && e[1] > t[3]) {
      let w = x[2] + (v[0] - x[2]) / 2, M = x[3] + (v[1] - x[3]) / 2;
      return Rt(Zt(e[0] - E, e[1] - S), Zt(e[2] - E, e[3] - S)) > 0 ? [[w, v[1], v[2], v[3]], [x[0], x[1], w, x[3]]] : [[v[0], M, v[2], v[3]], [x[0], x[1], x[2], M]];
    }
  }
  return [v, x];
}, oP = (e, t, n, a, i, r) => {
  let l = /* @__PURE__ */ new Set(), s = /* @__PURE__ */ new Set();
  n === xn || n === gt ? s.add(t[1]) : l.add(t[0]), i === xn || i === gt ? s.add(a[1]) : l.add(a[0]), e.forEach((o) => {
    l.add(o[0]), l.add(o[2]), s.add(o[1]), s.add(o[3]);
  }), l.add(r[0]), l.add(r[2]), s.add(r[1]), s.add(r[3]);
  let c = Array.from(s).sort((o, u) => o - u), d = Array.from(l).sort((o, u) => o - u);
  return { row: c.length, col: d.length, data: c.flatMap((o, u) => d.map((f, p) => ({ f: 0, g: 0, h: 0, closed: !1, visited: !1, parent: null, addr: [p, u], pos: [f, o] }))) };
}, ng = (e, t, n) => {
  switch (t) {
    case yn:
      return k(n[0], e[1]);
    case gt:
      return k(e[2], n[1]);
    case Xt:
      return k(n[0], e[3]);
  }
  return k(e[0], n[1]);
}, cP = (e, t, n, a) => {
  if (a === gt) switch (n) {
    case gt:
      return e.pos[0] >= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2;
    case yn:
      return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case Xt:
      return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case xn:
      return e.pos[1] === t.pos[1] ? 4 : 2;
  }
  else if (a === xn) switch (n) {
    case gt:
      return e.pos[1] === t.pos[1] ? 4 : 2;
    case yn:
      return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
    case Xt:
      return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
    case xn:
      return e.pos[0] <= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2;
  }
  else if (a === yn) switch (n) {
    case gt:
      return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case yn:
      return e.pos[1] >= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
    case Xt:
      return e.pos[0] === t.pos[0] ? 4 : 2;
    case xn:
      return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
  }
  else if (a === Xt) switch (n) {
    case gt:
      return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case yn:
      return e.pos[0] === t.pos[0] ? 4 : 2;
    case Xt:
      return e.pos[1] <= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
    case xn:
      return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
  }
  return 0;
}, dP = ([e, t], n) => [ro([e, t - 1], n), ro([e + 1, t], n), ro([e, t + 1], n), ro([e - 1, t], n)], ro = ([e, t], n) => e < 0 || e >= n.col || t < 0 || t >= n.row ? null : n.data[t * n.col + e] ?? null, Vc = (e, t) => {
  for (let n = 0; n < t.col; n++) for (let a = 0; a < t.row; a++) {
    let i = ro([n, a], t);
    if (i && e[0] === i.pos[0] && e[1] === i.pos[1]) return i;
  }
  return null;
}, e3 = (e) => [Math.min(...e.map((t) => t[0])), Math.min(...e.map((t) => t[1])), Math.max(...e.map((t) => t[2])), Math.max(...e.map((t) => t[3]))], fs = (e, t) => {
  let n = t.get(e);
  return n && xa(n) ? n : null;
}, pr = (e, t, n, a) => {
  let i = e[0][0], r = e[0][1], l = e.map((s) => Jd(s, bt(le(e[0]), -1)));
  return (i < -Ke || i > Ke || r < -Ke || r > Ke || i + l[l.length - 1][0] < -Ke || r + l[l.length - 1][0] > Ke || i + l[l.length - 1][1] < -Ke || r + l[l.length - 1][1] > Ke) && console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)", { x: i, y: r, points: l, ...cs(l) }), l = l.map(([s, c]) => k(Se(s, -1e6, 1e6), Se(c, -1e6, 1e6))), { points: l, x: Se(i, -1e6, 1e6), y: Se(r, -1e6, 1e6), fixedSegments: ((t == null ? void 0 : t.length) ?? 0) > 0 ? t : null, ...cs(l), startIsSpecial: n, endIsSpecial: a };
}, yp = (e) => {
  if (e.length > 1) {
    let t = Math.abs(e[0][1] - e[1][1]) < Math.abs(e[0][0] - e[1][0]);
    return e.filter((n, a) => {
      if (a === 0 || a === e.length - 1) return !0;
      let i = e[a + 1], r = Math.abs(n[1] - i[1]) < Math.abs(n[0] - i[0]);
      return t === r ? (t = r, !1) : (t = r, !0);
    });
  }
  return e;
}, wp = (e) => e.length >= 4 ? e.filter((t, n) => {
  if (n === 0 || n === e.length - 1) return !0;
  let a = e[n - 1];
  return Pe(a, t) > gp;
}) : e, uP = (e) => {
  switch (e) {
    case 0:
      return yn;
    case 1:
      return gt;
    case 2:
      return Xt;
  }
  return xn;
}, ag = (e, t, n, a, i, r, l) => {
  if (l) {
    if (r) {
      let s = Wo(e, r, t);
      return NL(r, s);
    }
    return a;
  }
  if (i) {
    let s = C1(n || [0, 0], i);
    return Math.abs(Ju(i, s) - Je) > 0.01 ? Wo(e, i, t) : s;
  }
  return a;
}, ig = (e, t, n, a, i) => DL(e, t, a, a && Fa(a, Array(4).fill(Ju(a, e))), n, i), rg = (e, t, n, a) => ha(da(e), n, t, a, !0, !0), lg = (e, t) => e[0] === t[0] && e[1] === t[1], Ep = (e, t = gp) => e.slice(1).map((n, a) => Math.abs(n[0] - e[a][0]) < t || Math.abs(n[1] - e[a][1]) < t).every(Boolean), hP = { selection: !0, text: !0, rectangle: !0, diamond: !0, ellipse: !0, line: !0, image: !0, arrow: !0, freedraw: !0, eraser: !1, custom: !0, frame: !0, embeddable: !0, hand: !0, laser: !1, magicframe: !1 }, fP = (e) => Object.keys(ut).includes(e) ? ut[e] : xr, Ml = (e, t) => {
  if (!t) return null;
  let n = t.focus || 0;
  return ee(e) ? nu(t) ? { ...t, focus: n, fixedPoint: nh(t.fixedPoint ?? [0, 0]) } : null : { ...t, focus: n };
}, Xi = (e, t) => {
  let n = { type: t.type || e.type, version: e.version || 1, versionNonce: e.versionNonce ?? 0, index: e.index ?? null, isDeleted: e.isDeleted ?? !1, id: e.id || Qn(), fillStyle: e.fillStyle || mt.fillStyle, strokeWidth: e.strokeWidth || mt.strokeWidth, strokeStyle: e.strokeStyle ?? mt.strokeStyle, roughness: e.roughness ?? mt.roughness, opacity: e.opacity == null ? mt.opacity : e.opacity, angle: e.angle || 0, x: t.x ?? e.x ?? 0, y: t.y ?? e.y ?? 0, strokeColor: e.strokeColor || mt.strokeColor, backgroundColor: e.backgroundColor || mt.backgroundColor, width: e.width || 0, height: e.height || 0, seed: e.seed ?? 1, groupIds: e.groupIds ?? [], frameId: e.frameId ?? null, roundness: e.roundness ? e.roundness : e.strokeSharpness === "round" ? { type: ks(e.type) ? jt.LEGACY : jt.PROPORTIONAL_RADIUS } : null, boundElements: e.boundElementIds ? e.boundElementIds.map((a) => ({ type: "arrow", id: a })) : e.boundElements ?? [], updated: e.updated ?? Ss(), link: e.link ? Dn(e.link) : null, locked: e.locked ?? !1 };
  return ("customData" in e || "customData" in t) && (n.customData = "customData" in t ? t.customData : e.customData), { ...e, ...n, ...p3(n), ...t };
}, pP = (e) => {
  switch (e = { ...e }, e.type) {
    case "text":
      delete e.rawText;
      let t = e.fontSize, n = e.fontFamily;
      if ("font" in e) {
        let [o, u] = e.font.split(" ");
        t = parseFloat(o), n = fP(u);
      }
      let a = typeof e.text == "string" && e.text || "", i = e.lineHeight || (e.height ? $M(e) : ol(e.fontFamily));
      return e = Xi(e, { fontSize: t, fontFamily: n, text: a, textAlign: e.textAlign || uc, verticalAlign: e.verticalAlign || Wd, containerId: e.containerId ?? null, originalText: e.originalText || a, autoResize: e.autoResize ?? !0, lineHeight: i }), !a && !e.isDeleted && (e = { ...e, originalText: a, isDeleted: !0 }, e = uh(e)), e;
    case "freedraw":
      return Xi(e, { points: e.points, lastCommittedPoint: null, simulatePressure: e.simulatePressure, pressures: e.pressures });
    case "image":
      return Xi(e, { status: e.status || "pending", fileId: e.fileId, scale: e.scale || [1, 1], crop: e.crop ?? null });
    case "line":
    case "draw":
      let { startArrowhead: r = null, endArrowhead: l = null } = e, s = e.x, c = e.y, d = !Array.isArray(e.points) || e.points.length < 2 ? [k(0, 0), k(e.width, e.height)] : e.points;
      return (d[0][0] !== 0 || d[0][1] !== 0) && ({ points: d, x: s, y: c } = J.getNormalizedPoints(e)), Xi(e, { type: e.type === "draw" ? "line" : e.type, startBinding: Ml(e, e.startBinding), endBinding: Ml(e, e.endBinding), lastCommittedPoint: null, startArrowhead: r, endArrowhead: l, points: d, x: s, y: c, ...cs(d) });
    case "arrow": {
      let { startArrowhead: o = null, endArrowhead: u = "arrow" } = e, f = e.x, p = e.y, U = !Array.isArray(e.points) || e.points.length < 2 ? [k(0, 0), k(e.width, e.height)] : e.points;
      (U[0][0] !== 0 || U[0][1] !== 0) && ({ points: U, x: f, y: p } = J.getNormalizedPoints(e));
      let m = { type: e.type, startBinding: Ml(e, e.startBinding), endBinding: Ml(e, e.endBinding), lastCommittedPoint: null, startArrowhead: o, endArrowhead: u, points: U, x: f, y: p, elbowed: e.elbowed, ...cs(U) };
      return ee(e) ? Xi(e, { ...m, elbowed: !0, startBinding: Ml(e, e.startBinding), endBinding: Ml(e, e.endBinding), fixedSegments: e.fixedSegments, startIsSpecial: e.startIsSpecial, endIsSpecial: e.endIsSpecial }) : Xi(e, m);
    }
    case "ellipse":
    case "rectangle":
    case "diamond":
    case "iframe":
    case "embeddable":
      return Xi(e, {});
    case "magicframe":
    case "frame":
      return Xi(e, { name: e.name ?? null });
  }
  return null;
}, UP = (e, t) => {
  if (e.boundElements) {
    let n = e.boundElements.slice(), a = /* @__PURE__ */ new Set();
    e.boundElements = n.reduce((i, r) => {
      let l = t.get(r.id);
      if (l && !a.has(r.id)) {
        if (a.add(r.id), l.isDeleted) return i;
        i.push(r), q(l) && !l.containerId && (l.containerId = e.id);
      }
      return i;
    }, []);
  }
}, mP = (e, t) => {
  let n = e.containerId ? t.get(e.containerId) : null;
  if (!n) {
    e.containerId = null;
    return;
  }
  if (!e.isDeleted && n.boundElements && !n.boundElements.find((a) => a.id === e.id)) {
    let a = (n.boundElements || (n.boundElements = [])).slice();
    a.push({ type: "text", id: e.id }), n.boundElements = a;
  }
}, gP = (e, t) => {
  e.frameId && (t.get(e.frameId) || (e.frameId = null));
}, Sp = (e, t, n) => {
  let a = /* @__PURE__ */ new Set(), i = t ? ue(t) : null, r = _i((e || []).reduce((s, c) => {
    if (c.type !== "selection" && !Us(c)) {
      let d = pP(c);
      if (d) {
        let o = i == null ? void 0 : i.get(c.id);
        o && o.version > d.version && (d = uh(d, o.version)), a.has(d.id) && (d = { ...d, id: Qn() }), a.add(d.id), s.push(d);
      }
    }
    return s;
  }, []));
  if (!(n != null && n.repairBindings)) return r;
  let l = ue(r);
  for (let s of r) s.frameId && gP(s, l), q(s) && s.containerId ? mP(s, l) : s.boundElements && UP(s, l), n.refreshDimensions && q(s) && Object.assign(s, T7(s, Vt(s, l), l)), pe(s) && (s.startBinding && (!l.has(s.startBinding.elementId) || !ye(s)) && (s.startBinding = null), s.endBinding && (!l.has(s.endBinding.elementId) || !ye(s)) && (s.endBinding = null));
  return r.map((s) => {
    if (ee(s) && s.startBinding == null && s.endBinding == null && !Ep(s.points)) return { ...s, ...bp(s, l, { points: [k(0, 0), s.points[s.points.length - 1]] }), index: s.index };
    if (ee(s) && s.startBinding && s.endBinding && s.startBinding.elementId === s.endBinding.elementId && s.points.length > 1 && s.points.some(([c, d]) => Math.abs(c) > 1e6 || Math.abs(d) > 1e6)) {
      console.error("Fixing self-bound elbow arrow", s.id);
      let c = l.get(s.startBinding.elementId);
      return c ? { ...s, x: c.x + c.width / 2, y: c.y - 5, width: c.width, height: c.height, points: [k(0, 0), k(0, -10), k(c.width / 2 + 5, -10), k(c.width / 2 + 5, c.height / 2 + 5)] } : (console.error("Bound element not found", s.startBinding.elementId), s);
    }
    return s;
  });
}, bP = (e, t, n) => {
  let a = t[e];
  return a !== void 0 ? a : n[e];
}, sg = { isSidebarDocked: (e, t) => ["defaultSidebarDockedPreference", e.isSidebarDocked ?? bP("defaultSidebarDockedPreference", e, t)] }, vP = (e, t) => {
  var i;
  e = e || {};
  let n = Ka(), a = {};
  for (let r of Object.keys(sg)) if (r in e) {
    let [l, s] = sg[r](e, n);
    a[l] = s;
  }
  for (let [r, l] of Object.entries(n)) {
    let s = e[r], c = t ? t[r] : void 0;
    a[r] = s !== void 0 ? s : c !== void 0 ? c : l;
  }
  return { ...a, cursorButton: (t == null ? void 0 : t.cursorButton) || "up", penDetected: (t == null ? void 0 : t.penDetected) ?? (e.penMode ? e.penDetected ?? !1 : !1), activeTool: { ...Ct(n, a.activeTool.type && hP[a.activeTool.type] ? a.activeTool : { type: "selection" }), lastActiveTool: null, locked: a.activeTool.locked ?? !1 }, zoom: { value: xi(mo(e.zoom) ? e.zoom : ((i = e.zoom) == null ? void 0 : i.value) ?? n.zoom.value) }, openSidebar: typeof e.openSidebar == "string" ? { name: Ua.name } : a.openSidebar, gridSize: WL(mo(e.gridSize) ? e.gridSize : Gd), gridStep: p7(mo(e.gridStep) ? e.gridStep : Fb), editingFrame: null };
}, oh = (e, t, n, a) => ({ elements: Sp(e == null ? void 0 : e.elements, n, a), appState: vP(e == null ? void 0 : e.appState, t || null), files: (e == null ? void 0 : e.files) || {} }), og = (e) => {
  let t = Sp(Qe(e.elements), null);
  return t.length ? { ...e, elements: t } : null;
}, kp = (e = [], t) => {
  let n = [];
  for (let a of e) if (Array.isArray(a)) {
    let i = og({ status: t, elements: a, id: Qn(), created: Date.now() });
    i && n.push(i);
  } else {
    let i = a, r = og({ ...i, id: i.id || Qn(), status: i.status || t, created: i.created || Date.now() });
    r && n.push(r);
  }
  return n;
}, sa = 32, qe = 12, cr = 256, t3 = 50, Or = "NOT_SPREADSHEET", qo = "VALID_SPREADSHEET", lo = (e) => {
  let t = /^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);
  return t ? parseFloat(`${(t[1] || t[2]) + t[3]}`.replace(/,/g, "")) : null;
}, hf = (e, t) => e.slice(1).every((n) => lo(n[t]) !== null), cg = (e) => {
  let t = e[0].length;
  if (t > 2) return { type: Or, reason: "More than 2 columns" };
  if (t === 1) {
    if (!hf(e, 0)) return { type: Or, reason: "Value is not numeric" };
    let c = lo(e[0][0]) === null, d = (c ? e.slice(1) : e).map((o) => lo(o[0]));
    return d.length < 2 ? { type: Or, reason: "Less than two rows" } : { type: qo, spreadsheet: { title: c ? e[0][0] : null, labels: null, values: d } };
  }
  let n = hf(e, 0), a = hf(e, 1);
  if (!n && !a) return { type: Or, reason: "Value is not numeric" };
  let [i, r] = a ? [0, 1] : [1, 0], l = lo(e[0][r]) === null, s = l ? e.slice(1) : e;
  return s.length < 2 ? { type: Or, reason: "Less than 2 rows" } : { type: qo, spreadsheet: { title: l ? e[0][r] : null, labels: s.map((c) => c[i]), values: s.map((c) => lo(c[r])) } };
}, xP = (e) => {
  let t = [];
  for (let n = 0; n < e[0].length; n++) {
    let a = [];
    for (let i = 0; i < e.length; i++) a.push(e[i][n]);
    t.push(a);
  }
  return t;
}, yP = (e) => {
  let t = e.trim().split(`
`).map((i) => i.trim().split("	"));
  if (t.length && t[0].length !== 2 && (t = e.trim().split(`
`).map((i) => i.trim().split(","))), t.length === 0) return { type: Or, reason: "No values" };
  let n = t[0].length;
  if (!t.every((i) => i.length === n)) return { type: Or, reason: "All rows don't have same number of columns" };
  let a = cg(t);
  if (a.type !== qo) {
    let i = cg(xP(t));
    if (i.type === qo) return i;
  }
  return a;
}, mu = Ek(xk), Yn = { fillStyle: "hachure", fontFamily: xr, fontSize: Ni, opacity: 100, roughness: 1, strokeColor: Ee.black, roundness: null, strokeStyle: "solid", strokeWidth: 1, verticalAlign: jn.MIDDLE, locked: !1 }, n3 = (e) => {
  let t = (sa + qe) * e.values.length + qe, n = cr + qe * 2;
  return { chartWidth: t, chartHeight: n };
}, wP = (e, t, n, a, i) => {
  var r;
  return ((r = e.labels) == null ? void 0 : r.map((l, s) => Rn({ groupIds: [a], backgroundColor: i, ...Yn, text: l.length > 8 ? `${l.slice(0, 5)}...` : l, x: t + s * (sa + qe) + qe * 2, y: n + qe / 2, width: sa, angle: 5.87, fontSize: 16, textAlign: "center", verticalAlign: "top" }))) || [];
}, EP = (e, t, n, a, i) => {
  let r = Rn({ groupIds: [a], backgroundColor: i, ...Yn, x: t - qe, y: n - qe, text: "0", textAlign: "right" }), l = Rn({ groupIds: [a], backgroundColor: i, ...Yn, x: t - qe, y: n - cr - r.height / 2, text: Math.max(...e.values).toLocaleString(), textAlign: "right" });
  return [r, l];
}, SP = (e, t, n, a, i) => {
  let { chartWidth: r, chartHeight: l } = n3(e), s = Zr({ backgroundColor: i, groupIds: [a], ...Yn, type: "line", x: t, y: n, width: r, points: [k(0, 0), k(r, 0)] }), c = Zr({ backgroundColor: i, groupIds: [a], ...Yn, type: "line", x: t, y: n, height: l, points: [k(0, 0), k(0, -l)] }), d = Zr({ backgroundColor: i, groupIds: [a], ...Yn, type: "line", x: t, y: n - cr - qe, strokeStyle: "dotted", width: r, opacity: t3, points: [k(0, 0), k(r, 0)] });
  return [s, c, d];
}, a3 = (e, t, n, a, i, r) => {
  let { chartWidth: l, chartHeight: s } = n3(e), c = e.title ? Rn({ backgroundColor: i, groupIds: [a], ...Yn, text: e.title, x: t + l / 2, y: n - cr - qe * 2 - Ni, roundness: null, textAlign: "center" }) : null, d = r ? Qa({ backgroundColor: i, groupIds: [a], ...Yn, type: "rectangle", x: t, y: n - s, width: l, height: s, strokeColor: Ee.black, fillStyle: "solid", opacity: 6 }) : null;
  return [...d ? [d] : [], ...c ? [c] : [], ...wP(e, t, n, a, i), ...EP(e, t, n, a, i), ...SP(e, t, n, a, i)];
}, kP = (e, t, n) => {
  let a = Math.max(...e.values), i = Qn(), r = mu[Math.floor(Math.random() * mu.length)];
  return [...e.values.map((l, s) => {
    let c = l / a * cr;
    return Qa({ backgroundColor: r, groupIds: [i], ...Yn, type: "rectangle", x: t + s * (sa + qe) + qe, y: n - c - qe, width: sa, height: c });
  }), ...a3(e, t, n, i, r, ve.DEV)];
}, MP = (e, t, n) => {
  let a = Math.max(...e.values), i = Qn(), r = mu[Math.floor(Math.random() * mu.length)], l = 0, s = [];
  for (let m of e.values) {
    let g = l * (sa + qe), b = -(m / a) * cr;
    s.push([g, b]), l++;
  }
  let c = Math.max(...s.map((m) => m[0])), d = Math.max(...s.map((m) => m[1])), o = Math.min(...s.map((m) => m[0])), u = Math.min(...s.map((m) => m[1])), f = Zr({ backgroundColor: r, groupIds: [i], ...Yn, type: "line", x: t + qe + sa / 2, y: n - qe, height: d - u, width: c - o, strokeWidth: 2, points: s }), p = e.values.map((m, g) => {
    let b = g * (sa + qe) + qe / 2, v = -(m / a) * cr + qe / 2;
    return Qa({ backgroundColor: r, groupIds: [i], ...Yn, fillStyle: "solid", strokeWidth: 2, type: "ellipse", x: t + b + sa / 2, y: n + v - qe * 2, width: qe, height: qe });
  }), U = e.values.map((m, g) => {
    let b = g * (sa + qe) + qe / 2, v = m / a * cr + qe / 2 + qe;
    return Zr({ backgroundColor: r, groupIds: [i], ...Yn, type: "line", x: t + b + sa / 2 + qe / 2, y: n - v, height: v, strokeStyle: "dotted", opacity: t3, points: [k(0, 0), k(0, v)] });
  });
  return [...a3(e, t, n, i, r, ve.DEV), f, ...U, ...p];
}, CP = (e, t, n, a) => e === "line" ? MP(t, n, a) : kP(t, n, a), Mp = "clipboard" in navigator && "writeText" in navigator.clipboard, Cp = "clipboard" in navigator && "write" in navigator.clipboard && "ClipboardItem" in window && "toBlob" in HTMLCanvasElement.prototype, IP = (e) => !!([Gn.excalidraw, Gn.excalidrawClipboard, Gn.excalidrawClipboardWithAPI].includes(e == null ? void 0 : e.type) && Array.isArray(e.elements)), TP = ({ types: e, files: t }) => {
  var a, i, r, l;
  !e && !t && console.warn("createPasteEvent: no types or files provided");
  let n = new ClipboardEvent("paste", { clipboardData: new DataTransfer() });
  if (e) for (let [s, c] of Object.entries(e)) {
    if (typeof c != "string") {
      t = t || [], t.push(c);
      continue;
    }
    try {
      if ((a = n.clipboardData) == null || a.setData(s, c), ((i = n.clipboardData) == null ? void 0 : i.getData(s)) !== c) throw new Error(`Failed to set "${s}" as clipboardData item`);
    } catch (d) {
      throw new Error(d.message);
    }
  }
  if (t) {
    let s = -1;
    for (let c of t) {
      s++;
      try {
        if ((r = n.clipboardData) == null || r.items.add(c), ((l = n.clipboardData) == null ? void 0 : l.files[s]) !== c) throw new Error(`Failed to set file "${c.name}" as clipboardData item`);
      } catch (d) {
        throw new Error(d.message);
      }
    }
  }
  return n;
}, _P = ({ elements: e, files: t }) => {
  let n = ue(e), a = new Set(e.filter((s) => de(s))), i = !1, r = e.reduce((s, c) => (Bn(c) && (i = !0, t && t[c.fileId] && (s[c.fileId] = t[c.fileId])), s), {});
  i && !t && console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");
  let l = { type: Gn.excalidrawClipboard, elements: e.map((s) => {
    if (kn(s, n) && !a.has(kn(s, n))) {
      let c = bl(s);
      return W(c, { frameId: null }), c;
    }
    return s;
  }), files: t ? r : void 0 };
  return JSON.stringify(l);
}, AP = async (e, t, n) => {
  await vc(_P({ elements: e, files: t }), n);
}, jP = (e) => {
  let t = yP(e);
  return t.type === qo ? { spreadsheet: t.spreadsheet } : null;
};
function i3(e) {
  var n;
  let t = [];
  for (let a of e.childNodes) if (a.nodeType === 3) {
    let i = (n = a.textContent) == null ? void 0 : n.trim();
    i && t.push({ type: "text", value: i });
  } else if (a instanceof HTMLImageElement) {
    let i = a.getAttribute("src");
    i && i.startsWith("http") && t.push({ type: "imageUrl", value: i });
  } else t = t.concat(i3(a));
  return t;
}
var DP = (e) => {
  var n;
  let t = (n = e.clipboardData) == null ? void 0 : n.getData(oe.html);
  if (!t) return null;
  try {
    let a = new DOMParser().parseFromString(t, oe.html), i = i3(a.body);
    if (i.length) return { type: "mixedContent", value: i };
  } catch (a) {
    console.error(`error in parseHTMLFromPaste: ${a.message}`);
  }
  return null;
}, LP = async () => {
  var n, a, i, r;
  let e = {}, t;
  try {
    t = await ((n = navigator.clipboard) == null ? void 0 : n.read());
  } catch (l) {
    try {
      if ((a = navigator.clipboard) != null && a.readText) {
        console.warn(`navigator.clipboard.readText() failed (${l.message}). Failling back to navigator.clipboard.read()`);
        let s = await ((i = navigator.clipboard) == null ? void 0 : i.readText());
        if (s) return { [oe.text]: s };
      }
    } catch (s) {
      if ((r = navigator.clipboard) != null && r.read) console.warn(`navigator.clipboard.readText() failed (${s.message}). Failling back to navigator.clipboard.read()`);
      else {
        if (s.name === "DataError") return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${s.message}`), e;
        throw s;
      }
    }
    throw l;
  }
  for (let l of t) for (let s of l.types) if (t8(Ok, s)) try {
    if (s === oe.text || s === oe.html) e[s] = await (await l.getType(s)).text();
    else if (E3(s)) {
      let c = await l.getType(s), d = so(c, s, void 0);
      e[s] = d;
    } else throw new vm(`Unsupported clipboard type: ${s}`);
  } catch (c) {
    console.warn(c instanceof vm ? c.message : `Cannot retrieve ${s} from clipboardItem: ${c.message}`);
  }
  return Object.keys(e).length === 0 && console.warn("No clipboard data found from clipboard.read()."), e;
}, RP = async (e, t = !1) => {
  var n, a;
  try {
    let i = !t && e && DP(e);
    return i ? i.value.every((r) => r.type === "text") ? { type: "text", value: ((n = e.clipboardData) == null ? void 0 : n.getData(oe.text)) || i.value.map((r) => r.value).join(`
`).trim() } : i : { type: "text", value: (((a = e.clipboardData) == null ? void 0 : a.getData(oe.text)) || "").trim() };
  } catch {
    return { type: "text", value: "" };
  }
}, r3 = async (e, t = !1) => {
  let n = await RP(e, t);
  if (n.type === "mixedContent") return { mixedContent: n.value };
  try {
    let a = !t && jP(n.value);
    if (a) return a;
  } catch (a) {
    console.error(a);
  }
  try {
    let a = JSON.parse(n.value), i = a.type === Gn.excalidrawClipboardWithAPI;
    if (IP(a)) return { elements: a.elements, files: a.files, text: t ? JSON.stringify(a.elements, null, 2) : void 0, programmaticAPI: i };
  } catch {
  }
  return { text: n.value };
}, PP = async (e) => {
  try {
    await navigator.clipboard.write([new window.ClipboardItem({ [oe.png]: e })]);
  } catch (t) {
    if (pc(e)) await navigator.clipboard.write([new window.ClipboardItem({ [oe.png]: await e })]);
    else throw t;
  }
}, vc = async (e, t) => {
  var n, a;
  if (Mp) try {
    await navigator.clipboard.writeText(e || "");
    return;
  } catch (i) {
    console.error(i);
  }
  try {
    if (t) {
      if ((n = t.clipboardData) == null || n.setData(oe.text, e || ""), ((a = t.clipboardData) == null ? void 0 : a.getData(oe.text)) !== e) throw new Error("Failed to setData on clipboardEvent");
      return;
    }
  } catch (i) {
    console.error(i);
  }
  if (!NP(e)) throw new Error("Error copying to clipboard.");
}, NP = (e) => {
  e || (e = " ");
  let t = document.documentElement.getAttribute("dir") === "rtl", n = document.createElement("textarea");
  n.style.border = "0", n.style.padding = "0", n.style.margin = "0", n.style.position = "absolute", n.style[t ? "right" : "left"] = "-9999px";
  let a = window.pageYOffset || document.documentElement.scrollTop;
  n.style.top = `${a}px`, n.style.fontSize = "12pt", n.setAttribute("readonly", ""), n.value = e, document.body.appendChild(n);
  let i = !1;
  try {
    n.select(), n.setSelectionRange(0, n.value.length), i = document.execCommand("copy");
  } catch (r) {
    console.error(r);
  }
  return n.remove(), i;
}, Ip = ({ elements: e, appState: t, files: n, maxWidthOrHeight: a, getDimensions: i, exportPadding: r, exportingFrame: l }) => {
  let { elements: s, appState: c } = oh({ elements: e, appState: t }, null, null), { exportBackground: d, viewBackgroundColor: o } = c;
  return Q7(s, { ...c, offsetTop: 0, offsetLeft: 0, width: 0, height: 0 }, n || {}, { exportBackground: d, exportPadding: r, viewBackgroundColor: o, exportingFrame: l }, (u, f) => {
    let p = document.createElement("canvas");
    if (a) {
      typeof i == "function" && console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");
      let m = Math.max(u, f), g = a < m ? a / m : (t == null ? void 0 : t.exportScale) ?? 1;
      return p.width = u * g, p.height = f * g, { canvas: p, scale: g };
    }
    let U = (i == null ? void 0 : i(u, f)) || { width: u, height: f };
    return p.width = U.width, p.height = U.height, { canvas: p, scale: U.scale ?? 1 };
  });
}, Tp = async ({ elements: e, appState: t = Ka(), files: n = {}, exportPadding: a, renderEmbeddables: i, exportingFrame: r, skipInliningFonts: l, reuseImages: s }) => {
  let { elements: c, appState: d } = oh({ elements: e, appState: t }, null, null), o = { ...d, exportPadding: a };
  return Up(c, o, n, { exportingFrame: r, renderEmbeddables: i, skipInliningFonts: l, reuseImages: s });
}, OP = (e) => e.type === "diamond" ? [k(e.width / 2, 0), k(e.width, e.height / 2), k(e.width / 2, e.height), k(0, e.height / 2)] : [k(0, 0), k(0 + e.width, 0), k(0 + e.width, e.height), k(0, e.height)], $P = (e) => pe(e) || qn(e) ? e.points : OP(e), dg = (e) => {
  let t = e.reduce((n, [a, i]) => (n.minY = Math.min(n.minY, i), n.minX = Math.min(n.minX, a), n.maxX = Math.max(n.maxX, a), n.maxY = Math.max(n.maxY, i), n), { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0, cx: 0, cy: 0 });
  return t.cx = (t.maxX + t.minX) / 2, t.cy = (t.maxY + t.minY) / 2, t;
}, FP = (e) => {
  let t = $P(e), { cx: n, cy: a } = dg(t), i = k(n, a), r = t.map((o) => B(o, i, e.angle)), { minX: l, minY: s, maxX: c, maxY: d } = dg(r);
  return [l + e.x, s + e.y, c + e.x, d + e.y];
}, zP = (e, t) => {
  let n = FP(e);
  return (zc(n[0], Qt(t[0], t[2])) || zc(t[0], Qt(n[0], n[2]))) && (zc(n[1], Qt(t[1], t[3])) || zc(t[1], Qt(n[1], n[3])));
}, BP = ({ elements: e, bounds: t, type: n, errorMargin: a = 0 }) => {
  var l;
  r8(t) && (t = ya(t, ue(e)));
  let i = [t[0] - a, t[1] - a, t[2] + a, t[3] + a], r = /* @__PURE__ */ new Set();
  for (let s of e)
    if (!r.has(s.id) && zP(s, i)) {
      if (r.add(s.id), s.boundElements) for (let c of s.boundElements) r.add(c.id);
      q(s) && s.containerId && r.add(s.containerId), ye(s) && (s.startBinding && r.add(s.startBinding.elementId), s.endBinding && r.add((l = s.endBinding) == null ? void 0 : l.elementId));
    }
  return e.filter((s) => r.has(s.id));
};
function ug(e) {
  return [Math.min(e[0][0], e[1][0]), Math.min(e[0][1], e[1][1]), Math.max(e[0][0], e[1][0]), Math.max(e[0][1], e[1][1])];
}
function HP(e, t) {
  return e[0] <= t[2] && e[2] >= t[0] && e[1] <= t[3] && e[3] >= t[1];
}
var XP = 1e-6;
function hg(e, t) {
  let n = le(e[1], e[0]), a = le(t, e[0]), i = Rt(n, a);
  return Math.abs(i) < XP;
}
function ff(e, t) {
  let n = le(e[1], e[0]), a = le(t, e[0]);
  return Rt(n, a) < 0;
}
function fg(e, t) {
  return hg(e, t[0]) || hg(e, t[1]) || (ff(e, t[0]) ? !ff(e, t[1]) : ff(e, t[1]));
}
function WP(e, t) {
  return HP(ug(e), ug(t)) && fg(e, t) && fg(t, e);
}
var l3 = (e, t, n) => {
  let a = ue(e);
  for (let i of t) if (i.frameId) {
    let r = n.get(i.id), l = n.get(i.frameId);
    if (r) {
      let s = a.get(r);
      s && W(s, { frameId: l ?? i.frameId }, !1);
    }
  }
};
function _p(e, t, n) {
  let a = Im(t, n), i = Im(e, n);
  return a.some((r) => i.some((l) => WP(r, l)));
}
var s3 = (e, t, n) => dh(Pp(e, t, n, !1)).filter((a) => !de(a) && !a.frameId || a.frameId === t.id), Ap = (e, t, n) => Pp([t], e, n).some((a) => a.id === t.id), xc = (e, t, n) => {
  let [a, i, r, l] = Ue(t, n), [s, c, d, o] = ze(e);
  return a <= s && i <= c && r >= d && l >= o;
}, Ur = (e, t, n) => xc([e], t, n) || _p(e, t, n) || Ap(e, t, n), pg = (e, t, n) => {
  let [a, i, r, l] = Ue(t, n);
  return Vb(k(a, i), k(e.x, e.y), k(r, l));
}, VP = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = de(n) ? n.id : n.frameId;
    a && !t.has(a) && t.set(a, ti(e, a));
  }
  return t;
}, ti = (e, t) => {
  let n = [];
  for (let a of e.values()) a.frameId === t && n.push(a);
  return n;
}, jp = (e) => e.filter((t) => de(t)), Dp = (e) => {
  let t = ue(jp(e));
  return e.filter((n) => t.has(n.id) || !n.frameId || !t.has(n.frameId));
}, Md = (e, t, n, a) => {
  let i = ti(e, t.id), r = new Set(i), l = /* @__PURE__ */ new Set([...s3(e, t, a), ...i.filter((f) => Ap(f, t, a))]), s = i.filter((f) => !l.has(f)), c = new Set(Array.from(l).flatMap((f) => f.groupIds));
  for (let f of s) if (!_p(f, t, a)) f.groupIds.length === 0 && r.delete(f);
  else if (f.groupIds.length > 0) for (let p of f.groupIds) c.add(p);
  for (let f of s) if (f.groupIds.length > 0) {
    let p = !0;
    for (let U of f.groupIds) c.has(U) && (p = !1);
    p && r.delete(f);
  }
  let d = Array.from(l).filter((f) => f.groupIds.length === 0);
  for (let f of d) r.add(f);
  let o = Array.from(l).filter((f) => f.groupIds.length > 0), u = b7(o, n);
  for (let [f, p] of Object.entries(u)) if (p) {
    let U = it(e, f);
    if (xc(U, t, a)) for (let m of U) r.add(m);
  }
  return [...r].filter((f) => !(q(f) && f.containerId));
}, GP = (e, t, n) => YP(dh(e, s3(e, t, n)), t, n), YP = (e, t, n) => {
  let a = [], i = /* @__PURE__ */ new Map();
  for (let r of e) {
    let l = !1;
    if (r.groupIds.length > 0) {
      if (r.groupIds.some((s) => i.get(s))) l = !0;
      else {
        let s = new Set(r.groupIds.flatMap((c) => it(n, c)));
        l = !xc(Array.from(s), t, n);
      }
      r.groupIds.forEach((s) => {
        i.set(s, l);
      });
    }
    l || a.push(r);
  }
  return a;
}, kn = (e, t) => e.frameId && t.get(e.frameId) || null, ZP = (e, t) => {
  let n = /* @__PURE__ */ new Set(), a = ue(e);
  e = dh(e);
  for (let l of e) de(l) && l.id !== t.id && n.add(l.id);
  let i = /* @__PURE__ */ new Set(), r = [];
  for (let l of e) if (!(de(l) || l.frameId && n.has(l.frameId))) if (l.groupIds.length) {
    let s = l.groupIds.at(-1);
    if (!i.has(s)) {
      i.add(s);
      let c = it(e, s);
      if (c.some((d) => Ur(d, t, a))) for (let d of c) r.push(d);
    }
  } else Ur(l, t, a) && r.push(l);
  return r;
}, wo = (e, t, n, a) => {
  let i = ue(e), r = /* @__PURE__ */ new Map();
  for (let d of e.values()) d.frameId === n.id && r.set(d.id, !0);
  let l = new Set(t.map((d) => d.id)), s = [], c = /* @__PURE__ */ new Set();
  for (let d of t) de(d) && d.id !== n.id && c.add(d.id);
  for (let d of dh(e, t)) {
    if (de(d) || d.frameId && c.has(d.frameId) || d.frameId && a.selectedElementIds[d.id] && a.selectedElementIds[d.frameId]) continue;
    r.has(d.id) || s.push(d);
    let o = be(d, i);
    o && !l.has(o.id) && !r.has(o.id) && s.push(o);
  }
  for (let d of s) W(d, { frameId: n.id }, !1);
  return e;
}, ch = (e, t) => {
  let n = /* @__PURE__ */ new Map(), a = /* @__PURE__ */ new Map();
  for (let i of e) if (i.frameId) {
    n.set(i.id, i);
    let r = a.get(i.frameId) || [];
    r.push(i);
    let l = be(i, t);
    l && (n.set(l.id, l), r.push(l)), a.set(i.frameId, r);
  }
  for (let [, i] of n) W(i, { frameId: null }, !1);
}, o3 = (e, t) => {
  let n = ti(e, t.id);
  return ch(n, ue(e)), e;
}, c3 = (e, t, n, a) => wo(o3(e, n), t, n, a.state).slice(), ps = (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, elements: e }), i = new Set(a);
  if (t.editingGroupId) for (let s of a) s.groupIds.length === 0 ? i.add(s) : s.groupIds.flatMap((c) => it(e, c)).forEach((c) => i.add(c));
  let r = /* @__PURE__ */ new Set(), l = ue(e);
  return i.forEach((s) => {
    s.frameId && !de(s) && !gu(s, l, t) && r.add(s);
  }), r.size > 0 && ch(r, l), e;
}, dh = (e, t) => {
  let n = /* @__PURE__ */ new Set(), a = t || e;
  for (let l of a.values()) {
    let s = l.groupIds[l.groupIds.length - 1];
    s && n.add(s);
  }
  let i = /* @__PURE__ */ new Set();
  for (let l of n) it(e, l).some((s) => de(s)) && i.add(l);
  let r = [];
  for (let l of a.values()) i.has(l.groupIds[l.groupIds.length - 1]) || r.push(l);
  return r;
}, L1 = (e, t, n) => {
  let a = q(e) && Vt(e, t) || e;
  return a.frameId && n.selectedElementIds[a.id] && n.selectedElementIds[a.frameId] ? kn(a, t) : n.selectedElementIds[a.id] && n.selectedElementsAreBeingDragged ? n.frameToHighlight : kn(a, t);
}, gu = (e, t, n, a) => {
  var c;
  let i = (a == null ? void 0 : a.targetFrame) ?? L1(e, t, n);
  if (!i) return !1;
  let r = q(e) && Vt(e, t) || e, l = (d) => {
    a != null && a.checkedGroups && r.groupIds.forEach((o) => {
      var u;
      (u = a.checkedGroups) == null || u.set(o, d);
    });
  };
  if (!n.selectedElementIds[r.id] || !n.selectedElementsAreBeingDragged || n.selectedElementIds[r.id] && n.selectedElementIds[i.id]) return !0;
  if (r.groupIds.length === 0) return Ur(r, i, t);
  for (let d of r.groupIds) if ((c = a == null ? void 0 : a.checkedGroups) != null && c.has(d)) return a.checkedGroups.get(d);
  let s = new Set(r.groupIds.filter((d) => a != null && a.checkedGroups ? !a.checkedGroups.has(d) : !0).flatMap((d) => it(t, d)));
  if (n.editingGroupId && n.selectedElementsAreBeingDragged) {
    let d = new Set(xe(t, n));
    if (n.frameToHighlight !== null) return !0;
    d.forEach((o) => {
      s.delete(o);
    });
  }
  for (let d of s) if (de(d)) return l(!1), !1;
  for (let d of s) if (Ur(d, i, t)) return l(!0), !0;
  return !1;
}, Ug = (e, t, n, a, i) => {
  if (!n.frameRendering || !n.frameRendering.clip) return !1;
  let r = _p(e, t, a) || Ap(e, t, a);
  if (r) {
    for (let l of e.groupIds) i == null || i.set(l, !0);
    return !0;
  }
  if (!r && e.groupIds.length > 0 && !xc([e], t, a)) {
    let l = !1;
    if (n.selectedElementsAreBeingDragged) l = gu(e, a, n, { targetFrame: t, checkedGroups: i });
    else {
      l = e.frameId === t.id;
      for (let s of e.groupIds) i == null || i.set(s, l);
    }
    for (let s of e.groupIds) i == null || i.set(s, l);
    return l;
  }
  return !1;
}, d3 = (e) => e.name === null ? a8(e) ? "Frame" : "AI Frame" : e.name, Lp = (e, t) => BP({ elements: e, bounds: t, type: "overlap" }).filter((n) => !n.frameId || n.frameId === t.id), u3 = (e) => {
  let t = ue(e);
  return e.length > 1 && e.some((n) => n.frameId && t.has(n.frameId));
}, Rp = (e) => {
  let t = /* @__PURE__ */ new Set();
  return e.forEach((n) => {
    de(n) && t.add(n.id);
  }), e.filter((n) => !(n.frameId && t.has(n.frameId)));
}, Pp = (e, t, n, a = !0) => {
  let [i, r, l, s] = Ue(t, n), c = e.filter((d) => {
    let [o, u, f, p] = ya(d, n), U = kn(d, n);
    if (U) {
      let [m, g, b, v] = ya(U, n);
      o = Math.max(m, o), u = Math.max(g, u), f = Math.min(b, f), p = Math.min(v, p);
    }
    return d.locked === !1 && d.type !== "selection" && !rt(d) && i <= o && r <= u && l >= f && s >= p;
  });
  return c = a ? Rp(c) : c, c = c.filter((d) => {
    let o = kn(d, n);
    return o ? Ur(d, o, n) : !0;
  }), c;
}, h3 = (e, t, n, a) => {
  let i = new Set(t.map((r) => r.id));
  return e.filter((r) => {
    let l = bu(r, n.width, n.height, n, a);
    return !i.has(r.id) && l;
  });
}, Dt = function() {
  let e = null, t = null, n = null, a = (i, r) => (n != null && i === e && r.selectedElementIds === t || (n = i.some((l) => r.selectedElementIds[l.id]), e = i, t = r.selectedElementIds), n);
  return a.clearCache = () => {
    e = null, t = null, n = null;
  }, a;
}(), KP = (e, t, n) => {
  let a = Array.from(new Set(xe(e, t).map((i) => n(i))));
  return a.length === 1 ? a[0] : null;
}, xe = (e, t, n) => {
  let a = /* @__PURE__ */ new Set(), i = [];
  for (let r of e.values()) {
    if (t.selectedElementIds[r.id]) {
      i.push(r), a.add(r.id);
      continue;
    }
    if (n != null && n.includeBoundTextElement && rt(r) && t.selectedElementIds[r == null ? void 0 : r.containerId]) {
      i.push(r), a.add(r.id);
      continue;
    }
  }
  if (n != null && n.includeElementsInFrames) {
    let r = [];
    return i.forEach((l) => {
      de(l) && ti(e, l.id).forEach((s) => !a.has(s.id) && r.push(s)), r.push(l);
    }), r;
  }
  return i;
}, f3 = (e, t) => t.editingTextElement ? [t.editingTextElement] : t.newElement ? [t.newElement] : xe(e, t, { includeBoundTextElement: !0 }), Le = (e, t) => qt(t.selectedElementIds, e) ? t.selectedElementIds : e, mg = (e) => {
  let t = /* @__PURE__ */ new Map(), n = [];
  for (let a of e) a.isDeleted || (n.push(a), t.set(a.id, a));
  return { elementsMap: t, elements: n };
}, qP = cc((e) => {
  (ve.DEV || ve.MODE === En.TEST || window != null && window.DEBUG_FRACTIONAL_INDICES) && cp(e, { shouldThrow: ve.DEV || ve.MODE === En.TEST, includeBoundTextValidation: !0 });
}, 1e3 * 60, { leading: !0, trailing: !1 }), JP = (e) => {
  let t = ["includeBoundTextElement", "includeElementsInFrames"], n = "";
  for (let a of t) n += `${a}:${e[a] ? "1" : "0"}`;
  return n;
}, gg = (e) => typeof e == "string", R1 = class Cd {
  constructor() {
    j(this, "callbacks", /* @__PURE__ */ new Set()), j(this, "nonDeletedElements", []), j(this, "nonDeletedElementsMap", Kn(/* @__PURE__ */ new Map())), j(this, "elements", []), j(this, "nonDeletedFramesLikes", []), j(this, "frames", []), j(this, "elementsMap", Kn(/* @__PURE__ */ new Map())), j(this, "selectedElementsCache", { selectedElementIds: null, elements: null, cache: /* @__PURE__ */ new Map() }), j(this, "sceneNonce"), j(this, "insertElement", (t) => {
      let n = t.frameId ? this.getElementIndex(t.frameId) : this.elements.length;
      this.insertElementAtIndex(t, n);
    }), j(this, "insertElements", (t) => {
      var a;
      if (!t.length) return;
      let n = (a = t[0]) != null && a.frameId ? this.getElementIndex(t[0].frameId) : this.elements.length;
      this.insertElementsAtIndex(t, n);
    }), j(this, "getContainerElement", (t) => t && t.containerId && this.getElement(t.containerId) || null), j(this, "getElementsFromId", (t) => {
      let n = this.getNonDeletedElementsMap(), a = n.get(t);
      return a ? [a] : it(n, t);
    });
  }
  static mapElementToScene(t, n) {
    gg(t) ? this.sceneMapById.set(t, n) : (this.sceneMapByElement.set(t, n), this.sceneMapById.set(t.id, n));
  }
  static getScene(t) {
    return gg(t) ? this.sceneMapById.get(t) || null : this.sceneMapByElement.get(t) || null;
  }
  getSceneNonce() {
    return this.sceneNonce;
  }
  getNonDeletedElementsMap() {
    return this.nonDeletedElementsMap;
  }
  getElementsIncludingDeleted() {
    return this.elements;
  }
  getElementsMapIncludingDeleted() {
    return this.elementsMap;
  }
  getNonDeletedElements() {
    return this.nonDeletedElements;
  }
  getFramesIncludingDeleted() {
    return this.frames;
  }
  getSelectedElements(t) {
    let n = JP(t), a = (t == null ? void 0 : t.elements) || this.nonDeletedElements;
    if (this.selectedElementsCache.elements === a && this.selectedElementsCache.selectedElementIds === t.selectedElementIds) {
      let r = this.selectedElementsCache.cache.get(n);
      if (r) return r;
    } else (t == null ? void 0 : t.elements) == null && this.selectedElementsCache.cache.clear();
    let i = xe(a, { selectedElementIds: t.selectedElementIds }, t);
    return (t == null ? void 0 : t.elements) == null && (this.selectedElementsCache.selectedElementIds = t.selectedElementIds, this.selectedElementsCache.elements = this.nonDeletedElements, this.selectedElementsCache.cache.set(n, i)), i;
  }
  getNonDeletedFramesLikes() {
    return this.nonDeletedFramesLikes;
  }
  getElement(t) {
    return this.elementsMap.get(t) || null;
  }
  getNonDeletedElement(t) {
    let n = this.getElement(t);
    return n && O1(n) ? n : null;
  }
  mapElements(t) {
    let n = !1, a = this.elements.map((i) => {
      let r = t(i);
      return r !== i && (n = !0), r;
    });
    return n && this.replaceAllElements(a), n;
  }
  replaceAllElements(t) {
    let n = t instanceof Array ? t : Array.from(t.values()), a = [];
    qP(n), this.elements = _i(n), this.elementsMap.clear(), this.elements.forEach((r) => {
      de(r) && a.push(r), this.elementsMap.set(r.id, r), Cd.mapElementToScene(r, this);
    });
    let i = mg(this.elements);
    this.nonDeletedElements = i.elements, this.nonDeletedElementsMap = i.elementsMap, this.frames = a, this.nonDeletedFramesLikes = mg(this.frames).elements, this.triggerUpdate();
  }
  triggerUpdate() {
    this.sceneNonce = Ja();
    for (let t of Array.from(this.callbacks)) t();
  }
  onUpdate(t) {
    if (this.callbacks.has(t)) throw new Error();
    return this.callbacks.add(t), () => {
      if (!this.callbacks.has(t)) throw new Error();
      this.callbacks.delete(t);
    };
  }
  destroy() {
    this.elements = [], this.nonDeletedElements = [], this.nonDeletedFramesLikes = [], this.frames = [], this.elementsMap.clear(), this.selectedElementsCache.selectedElementIds = null, this.selectedElementsCache.elements = null, this.selectedElementsCache.cache.clear(), Cd.sceneMapById.forEach((t, n) => {
      t === this && Cd.sceneMapById.delete(n);
    }), this.callbacks.clear();
  }
  insertElementAtIndex(t, n) {
    if (!Number.isFinite(n) || n < 0) throw new Error("insertElementAtIndex can only be called with index >= 0");
    let a = [...this.elements.slice(0, n), t, ...this.elements.slice(n)];
    ei(a, ue([t])), this.replaceAllElements(a);
  }
  insertElementsAtIndex(t, n) {
    if (!t.length) return;
    if (!Number.isFinite(n) || n < 0) throw new Error("insertElementAtIndex can only be called with index >= 0");
    let a = [...this.elements.slice(0, n), ...t, ...this.elements.slice(n)];
    ei(a, ue(t)), this.replaceAllElements(a);
  }
  getElementIndex(t) {
    return this.elements.findIndex((n) => n.id === t);
  }
};
j(R1, "sceneMapByElement", /* @__PURE__ */ new WeakMap()), j(R1, "sceneMapById", /* @__PURE__ */ new Map());
var QP = R1, Ai = QP, W = (e, t, n = !0, a) => {
  var o, u;
  let i = !1, { points: r, fixedSegments: l, fileId: s, startBinding: c, endBinding: d } = t;
  if (ee(e) && (Object.keys(t).length === 0 || typeof r < "u" || typeof l < "u" || typeof c < "u" || typeof d < "u")) {
    let f = Kn(((o = Ai.getScene(e)) == null ? void 0 : o.getNonDeletedElementsMap()) ?? /* @__PURE__ */ new Map());
    t = { ...t, angle: 0, ...bp({ ...e, x: t.x || e.x, y: t.y || e.y }, f, { fixedSegments: l, points: r, startBinding: c, endBinding: d }, { isDragging: a == null ? void 0 : a.isDragging }) };
  } else typeof r < "u" && (t = { ...cs(r), ...t });
  for (let f in t) {
    let p = t[f];
    if (typeof p < "u") {
      if (e[f] === p && (typeof p != "object" || p === null || f === "groupIds" || f === "scale")) continue;
      if (f === "scale") {
        let U = e[f], m = p;
        if (U[0] === m[0] && U[1] === m[1]) continue;
      } else if (f === "points") {
        let U = e[f], m = p;
        if (U.length === m.length) {
          let g = !1, b = U.length;
          for (; --b; ) {
            let v = U[b], x = m[b];
            if (v[0] !== x[0] || v[1] !== x[1]) {
              g = !0;
              break;
            }
          }
          if (!g) continue;
        }
      }
      e[f] = p, i = !0;
    }
  }
  return i && ((typeof t.height < "u" || typeof t.width < "u" || typeof s < "u" || typeof r < "u") && pt.delete(e), e.version++, e.versionNonce = Ja(), e.updated = Ss(), n && ((u = Ai.getScene(e)) == null || u.triggerUpdate())), e;
}, ge = (e, t, n = !1) => {
  let a = !1;
  for (let i in t) {
    let r = t[i];
    if (typeof r < "u") {
      if (e[i] === r && (typeof r != "object" || r === null)) continue;
      a = !0;
    }
  }
  return !a && !n ? e : { ...e, ...t, updated: Ss(), version: e.version + 1, versionNonce: Ja() };
}, uh = (e, t) => (e.version = (t ?? e.version) + 1, e.versionNonce = Ja(), e.updated = Ss(), e), Us = (e) => pe(e) || qn(e) ? e.points.length < 2 : e.width === 0 && e.height === 0, bu = (e, t, n, a, i) => {
  let [r, l, s, c] = ya(e, i), d = et({ clientX: a.offsetLeft, clientY: a.offsetTop }, a), o = et({ clientX: a.offsetLeft + t, clientY: a.offsetTop + n }, a);
  return d.x <= s && d.y <= c && o.x >= r && o.y >= l;
}, Id = (e, t, n, a, i, r) => {
  let [l, s, c, d] = ze(e, i), o = et({ clientX: a.offsetLeft + ((r == null ? void 0 : r.left) || 0), clientY: a.offsetTop + ((r == null ? void 0 : r.top) || 0) }, a), u = et({ clientX: a.offsetLeft + t - ((r == null ? void 0 : r.right) || 0), clientY: a.offsetTop + n - ((r == null ? void 0 : r.bottom) || 0) }, a);
  return l >= o.x && s >= o.y && c <= u.x && d <= u.y;
}, bg = (e, t, n) => {
  let a = Math.abs(t), i = Math.abs(n);
  if (e === "line" || e === "arrow" || e === "freedraw") {
    let r = Math.round(Math.atan(i / a) / hr) * hr;
    r === 0 ? n = 0 : r === Math.PI / 2 ? t = 0 : n = a * Math.tan(r) * Math.sign(n) || n;
  } else e !== "selection" && (n = a * Math.sign(n));
  return { width: t, height: n };
}, P1 = (e, t, n, a) => {
  let i = n - e, r = a - t, l = Math.round(Math.atan(r / i) / hr) * hr;
  if (l === 0) r = 0;
  else if (l === Math.PI / 2) i = 0;
  else {
    let s = Math.tan(l), c = -1, d = t - s * e, o = -1 / s, u = -1, f = a - o * n, p = (c * f - u * d) / (s * u - o * c), U = (d * o - f * s) / (s * u - o * c);
    i = p - e, r = U - t;
  }
  return { width: i, height: r };
}, p3 = (e) => {
  let t = { width: e.width, height: e.height, x: e.x, y: e.y };
  if (e.width < 0) {
    let n = Math.abs(e.width);
    t.width = n, t.x = e.x - n;
  }
  if (e.height < 0) {
    let n = Math.abs(e.height);
    t.height = n, t.y = e.y - n;
  }
  return t;
}, vg = { mouse: 8, pen: 16, touch: 28 }, eN = 16, U3 = { e: !0, s: !0, n: !0, w: !0 }, xg = { e: !0, s: !0, n: !0, w: !0, nw: !0, se: !0 }, pf = { e: !0, s: !0, n: !0, w: !0 }, ci = (e, t, n, a, i, r, l) => {
  let [s, c] = B(k(e + n / 2, t + a / 2), k(i, r), l);
  return [s - n / 2, c - a / 2, n, a];
}, Np = (e) => !(e.viewport.isMobile || e.isTouchScreen && (kk || Ob)), Eo = (e) => Np(e) ? U3 : {}, Op = ([e, t, n, a, i, r], l, s, c, d = {}, o = 4, u = nl) => {
  let f = vg[c], p = f / s.value, U = f / s.value, m = f / s.value, g = f / s.value, b = n - e, v = a - t, x = o / s.value, y = (f - u * 2) / (2 * s.value), E = { nw: d.nw ? void 0 : ci(e - x - m + y, t - x - g + y, p, U, i, r, l), ne: d.ne ? void 0 : ci(n + x - y, t - x - g + y, p, U, i, r, l), sw: d.sw ? void 0 : ci(e - x - m + y, a + x - y, p, U, i, r, l), se: d.se ? void 0 : ci(n + x - y, a + x - y, p, U, i, r, l), rotation: d.rotation ? void 0 : ci(e + b / 2 - p / 2, t - x - g + y - eN / s.value, p, U, i, r, l) }, S = 5 * vg.mouse / s.value;
  return Math.abs(b) > S && (d.n || (E.n = ci(e + b / 2 - p / 2, t - x - g + y, p, U, i, r, l)), d.s || (E.s = ci(e + b / 2 - p / 2, a + x - y, p, U, i, r, l))), Math.abs(v) > S && (d.w || (E.w = ci(e - x - m + y, t + v / 2 - U / 2, p, U, i, r, l)), d.e || (E.e = ci(n + x - y, t + v / 2 - U / 2, p, U, i, r, l))), E;
}, m3 = (e, t, n, a = "mouse", i = U3) => {
  if (e.locked || ee(e)) return {};
  if (e.type === "freedraw" || pe(e)) {
    if (e.points.length === 2) {
      let [, l] = e.points;
      l[0] === 0 || l[1] === 0 ? i = pf : l[0] > 0 && l[1] < 0 ? i = xg : l[0] > 0 && l[1] > 0 ? i = pf : l[0] < 0 && l[1] > 0 ? i = xg : l[0] < 0 && l[1] < 0 && (i = pf);
    }
  } else de(e) && (i = { ...i, rotation: !0 });
  let r = pe(e) ? nl + 8 : Re(e) ? 0 : nl;
  return Op(Ue(e, n, !0), e.angle, t, a, i, r, Re(e) ? 0 : void 0);
}, g3 = (e, t) => {
  if (t.editingLinearElement) return !1;
  if (e.length > 1) return !0;
  let n = e[0];
  return ee(n) ? !1 : pe(n) ? n.points.length > 2 : !0;
}, N1 = (e, t, n) => t >= e[0] && t <= e[0] + e[2] && n >= e[1] && n <= e[1] + e[3], tN = (e, t, n, a, i, r, l, s) => {
  if (!n.selectedElementIds[e.id]) return !1;
  let { rotation: c, ...d } = m3(e, r, t, l, Eo(s));
  if (c && N1(c, a, i)) return "rotation";
  let o = Object.keys(d).filter((u) => {
    let f = d[u];
    return f ? N1(f, a, i) : !1;
  });
  if (o.length > 0) return o[0];
  if (Np(s)) {
    let [u, f, p, U, m, g] = Ue(e, t);
    if (!(pe(e) && e.points.length <= 2)) {
      let b = Re(e) ? 0 : Vd / r.value, v = Vd / r.value, x = b3(k(u - b, f - b), k(p + b, U + b), k(m, g), e.angle);
      for (let [y, E] of Object.entries(x)) if (al(k(a, i), E, v)) return y;
    }
  }
  return !1;
}, yg = (e, t, n, a, i, r, l, s) => e.reduce((c, d) => {
  if (c) return c;
  let o = tN(d, l, t, n, a, i, r, s);
  return o ? { element: d, transformHandleType: o } : null;
}, null), wg = ([e, t, n, a], i, r, l, s, c) => {
  let d = Op([e, t, n, a, (e + n) / 2, (t + a) / 2], 0, l, s, Eo(c)), o = Object.keys(d).find((u) => {
    let f = d[u];
    return f && N1(f, i, r);
  });
  if (o) return o;
  if (Np(c)) {
    let u = (e + n) / 2, f = (t + a) / 2, p = Vd / l.value, U = b3(k(e - p, t - p), k(n + p, a + p), k(u, f), 0);
    for (let [m, g] of Object.entries(U)) if (al(k(i, r), g, p)) return m;
  }
  return !1;
}, Uf = ["ns", "nesw", "ew", "nwse"], nN = (e, t) => {
  let n = Uf.indexOf(e);
  if (n >= 0) {
    let a = Math.round(t / (Math.PI / 4));
    e = Uf[(n + a) % Uf.length];
  }
  return e;
}, Eg = (e) => {
  let { element: t, transformHandleType: n } = e, a = t && Math.sign(t.height) * Math.sign(t.width) === -1, i = null;
  switch (n) {
    case "n":
    case "s":
      i = "ns";
      break;
    case "w":
    case "e":
      i = "ew";
      break;
    case "nw":
    case "se":
      a ? i = "nesw" : i = "nwse";
      break;
    case "ne":
    case "sw":
      a ? i = "nwse" : i = "nesw";
      break;
    case "rotation":
      return "grab";
  }
  return i && t && (i = nN(i, t.angle)), i ? `${i}-resize` : "";
}, b3 = ([e, t], [n, a], i, r) => {
  let l = B(k(e, t), i, r), s = B(k(n, t), i, r), c = B(k(e, a), i, r), d = B(k(n, a), i, r);
  return { n: [l, s], e: [s, d], s: [d, c], w: [c, l] };
}, aN = (e, t, n, a, i, r, l, s, c, d, o, u) => {
  if (n.length === 1) {
    let [f] = n;
    if (t === "rotation") ee(f) || (iN(f, a, i, c, d, r), Sn(f, a));
    else {
      if (q(f) && t) return rN(e, f, a, t, l, c, d), Sn(f, a), !0;
      if (t) {
        let p = n[0].id, U = a.get(p), m = e.get(p);
        if (U && m) {
          let { nextWidth: g, nextHeight: b } = uN(U, m, a, e, t, c, d, { shouldMaintainAspectRatio: s, shouldResizeFromCenter: l });
          Jo(g, b, U, m, a, e, t, { shouldMaintainAspectRatio: s, shouldResizeFromCenter: l });
        }
      }
    }
    return !0;
  } else if (n.length > 1) {
    if (t === "rotation") return lN(e, n, a, i, c, d, r, o, u), !0;
    if (t) {
      let { nextWidth: f, nextHeight: p, flipByX: U, flipByY: m, originalBoundingBox: g } = hN(n, e, a, t, c, d, { shouldMaintainAspectRatio: s, shouldResizeFromCenter: l });
      return v3(n, a, t, i, e, { shouldResizeFromCenter: l, shouldMaintainAspectRatio: s, flipByX: U, flipByY: m, nextWidth: f, nextHeight: p, originalBoundingBox: g }), !0;
    }
  }
  return !1;
}, iN = (e, t, n, a, i, r) => {
  let [l, s, c, d] = Ue(e, t), o = (l + c) / 2, u = (s + d) / 2, f;
  de(e) ? f = 0 : (f = 5 * Math.PI / 2 + Math.atan2(i - u, a - o), r && (f = f + hr / 2, f = f - f % hr), f = Kd(f));
  let p = Ii(e);
  if (W(e, { angle: f }), p) {
    let U = n.getElement(p);
    U && !ye(e) && W(U, { angle: f });
  }
}, $p = (e, t, n, a) => pe(e) || qn(e) ? { points: su(0, t, su(1, n, e.points, a), a) } : {}, Fp = (e, t, n) => {
  let a = e.width;
  if (rt(e)) {
    let r = Vt(e, t);
    r && (a = Ti(r, e));
  }
  let i = e.fontSize * (n / a);
  return i < j0 ? null : { size: i };
}, rN = (e, t, n, a, i, r, l) => {
  let [s, c, d, o, u, f] = Ue(t, n), [p, U] = B(k(r, l), k(u, f), -t.angle), m = 0, g = 0;
  a !== "e" && a !== "w" && (a.includes("e") && (m = (p - s) / (d - s)), a.includes("w") && (m = (d - p) / (d - s)), a.includes("n") && (g = (o - U) / (o - c)), a.includes("s") && (g = (U - c) / (o - c)));
  let b = Math.max(m, g);
  if (b > 0) {
    let v = t.width * b, x = t.height * b, y = Fp(t, n, v);
    if (y === null) return;
    let E = [s, c], S = [d, o], w = [u, f], M = k(s, c);
    if (["n", "w", "nw"].includes(a) && (M = k(S[0] - Math.abs(v), S[1] - Math.abs(x))), a === "ne") {
      let N = [E[0], S[1]];
      M = k(N[0], N[1] - Math.abs(x));
    }
    if (a === "sw") {
      let N = [S[0], E[1]];
      M = k(N[0] - Math.abs(v), N[1]);
    }
    ["s", "n"].includes(a) && (M[0] = w[0] - v / 2), ["e", "w"].includes(a) && (M[1] = w[1] - x / 2), i && (M[0] = w[0] - Math.abs(v) / 2, M[1] = w[1] - Math.abs(x) / 2);
    let I = t.angle, T = B(M, k(u, f), I), _ = k(M[0] + Math.abs(v) / 2, M[1] + Math.abs(x) / 2), A = B(_, k(u, f), I);
    M = B(T, A, -I);
    let [D, P] = M;
    W(t, { fontSize: y.size, width: v, height: x, x: D, y: P });
  }
  if (a === "e" || a === "w") {
    let v = e.get(t.id), [x, y, E, S] = or(v, v.width, v.height, !0), w = k(x, y), M = k(E, S), I = fc(w, M), T = B(k(r, l), I, -v.angle), [_, , A] = or(t, t.width, t.height, !0), D = A - _, P = M[0] - w[0], N = z0(Ye({ fontSize: t.fontSize, fontFamily: t.fontFamily }), t.lineHeight), $ = P / D;
    a.includes("e") && ($ = (T[0] - w[0]) / D), a.includes("w") && ($ = (M[0] - T[0]) / D);
    let R = t.width * $ < N ? N : t.width * $, V = gl(t.originalText, Ye(t), Math.abs(R)), O = ln(V, Ye(t), t.lineHeight), G = O.height, [ae, he, ce, Be] = or(v, R, G, !0), He = ce - ae, Xe = Be - he, Ne = [...w];
    ["n", "w", "nw"].includes(a) && (Ne = [M[0] - Math.abs(He), w[1]]);
    let It = v.angle, Yt = B(Ne, I, It), Ae = k(Ne[0] + Math.abs(He) / 2, Ne[1] + Math.abs(Xe) / 2), Oe = B(Ae, I, It);
    Ne = B(Yt, Oe, -It);
    let yt = { width: Math.abs(R), height: Math.abs(O.height), x: Ne[0], y: Ne[1], text: V, autoResize: !1 };
    W(t, yt);
  }
}, lN = (e, t, n, a, i, r, l, s, c) => {
  var o;
  let d = 5 * Math.PI / 2 + Math.atan2(r - c, i - s);
  l && (d += hr / 2, d -= d % hr);
  for (let u of t) if (!de(u)) {
    let [f, p, U, m] = Ue(u, n), g = (f + U) / 2, b = (p + m) / 2, v = ((o = e.get(u.id)) == null ? void 0 : o.angle) ?? u.angle, [x, y] = B(k(g, b), k(s, c), d + v - u.angle);
    ee(u) ? W(u, { points: HL(u, n) }) : W(u, { x: u.x + (x - g), y: u.y + (y - b), angle: Kd(d + v) }, !1), Sn(u, n, { simultaneouslyUpdated: t });
    let E = be(u, n);
    E && !ye(u) && W(E, { x: E.x + (x - g), y: E.y + (y - b), angle: Kd(d + v) }, !1);
  }
  a.triggerUpdate();
}, sN = (e, t, n, a, i) => {
  let [r, l, s, c] = t.length === 1 ? Ue(t[0], n) : ze(t), d = (r + s) / 2, o = (l + c) / 2, u = t.length === 1 ? t[0].angle : 0;
  switch ([a, i] = B(k(a, i), k(d, o), -u), e) {
    case "n":
      return B(k(a - (r + s) / 2, i - l), k(0, 0), u);
    case "s":
      return B(k(a - (r + s) / 2, i - c), k(0, 0), u);
    case "w":
      return B(k(a - r, i - (l + c) / 2), k(0, 0), u);
    case "e":
      return B(k(a - s, i - (l + c) / 2), k(0, 0), u);
    case "nw":
      return B(k(a - r, i - l), k(0, 0), u);
    case "ne":
      return B(k(a - s, i - l), k(0, 0), u);
    case "sw":
      return B(k(a - r, i - c), k(0, 0), u);
    case "se":
      return B(k(a - s, i - c), k(0, 0), u);
    default:
      return [0, 0];
  }
}, oN = (e, t) => {
  let [, [n, a]] = t.points;
  return e === "nw" && (n < 0 || a < 0) || e === "ne" && n >= 0 || e === "sw" && n <= 0 || e === "se" && (n > 0 || a > 0) ? "end" : "origin";
}, cN = (e, t, n) => {
  if (n) return "center";
  if (t) switch (e) {
    case "n":
      return "south-side";
    case "e":
      return "west-side";
    case "s":
      return "north-side";
    case "w":
      return "east-side";
    case "ne":
      return "bottom-left";
    case "nw":
      return "bottom-right";
    case "se":
      return "top-left";
    case "sw":
      return "top-right";
  }
  return ["e", "se", "s"].includes(e) ? "top-left" : ["n", "nw", "w"].includes(e) ? "bottom-right" : e === "ne" ? "bottom-left" : "top-right";
}, dN = (e, t, n, a, i, r, l, s, c) => {
  let d = cN(l, s, c), [o, u] = e;
  switch (d) {
    case "top-left":
      return { x: o + (t - a) / 2 + (a - t) / 2 * Math.cos(r) + (n - i) / 2 * Math.sin(r), y: u + (n - i) / 2 + (a - t) / 2 * Math.sin(r) + (i - n) / 2 * Math.cos(r) };
    case "top-right":
      return { x: o + (t - a) / 2 * (Math.cos(r) + 1) + (n - i) / 2 * Math.sin(r), y: u + (n - i) / 2 + (t - a) / 2 * Math.sin(r) + (i - n) / 2 * Math.cos(r) };
    case "bottom-left":
      return { x: o + (t - a) / 2 * (1 - Math.cos(r)) + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) + (a - t) / 2 * Math.sin(r) };
    case "bottom-right":
      return { x: o + (t - a) / 2 * (Math.cos(r) + 1) + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) + (t - a) / 2 * Math.sin(r) };
    case "center":
      return { x: o - (a - t) / 2, y: u - (i - n) / 2 };
    case "east-side":
      return { x: o + (t - a) / 2 * (Math.cos(r) + 1), y: u + (t - a) / 2 * Math.sin(r) + (n - i) / 2 };
    case "west-side":
      return { x: o + (t - a) / 2 * (1 - Math.cos(r)), y: u + (a - t) / 2 * Math.sin(r) + (n - i) / 2 };
    case "north-side":
      return { x: o + (t - a) / 2 + (n - i) / 2 * Math.sin(r), y: u + (i - n) / 2 * (Math.cos(r) - 1) };
    case "south-side":
      return { x: o + (t - a) / 2 + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) };
  }
}, Jo = (e, t, n, a, i, r, l, { shouldInformMutation: s = !0, shouldMaintainAspectRatio: c = !1, shouldResizeFromCenter: d = !1 } = {}) => {
  let o = {}, u = be(n, i);
  if (u) {
    let m = r.get(u.id);
    if (m && (o = { fontSize: m.fontSize }), c) {
      let g = { ...n, width: e }, b = Fp(u, i, Ti(g, u));
      if (b === null) return;
      o = { fontSize: b.size };
    } else {
      let g = o8(Ye(u), u.lineHeight), b = c8(u.fontSize, u.lineHeight);
      e = Math.max(e, g), t = Math.max(t, b);
    }
  }
  let f = $p(a, e, t, !0), p = k(a.x, a.y);
  if (pe(a)) {
    let [m, g] = ya(a, r);
    p = k(m, g);
  }
  let U = dN(p, a.width, a.height, e, t, a.angle, l, c, d);
  if (pe(a) && f.points) {
    let m = a.x - p[0], g = a.y - p[1];
    U.x += m, U.y += g;
    let b = f.points[0][0], v = f.points[0][1];
    U.x += b, U.y += v, f.points = f.points.map((x) => k(x[0] - b, x[1] - v));
  }
  if (e < 0 && (U.x = U.x + e), t < 0 && (U.y = U.y + t), "scale" in n && "scale" in a && W(n, { scale: [(Math.sign(e) || a.scale[0]) * a.scale[0], (Math.sign(t) || a.scale[1]) * a.scale[1]] }), ye(n) && u && c) {
    let m = e / n.width * u.fontSize;
    if (m < j0) return;
    o.fontSize = m;
  }
  if (e !== 0 && t !== 0 && Number.isFinite(U.x) && Number.isFinite(U.y)) {
    let m = { ...U, width: Math.abs(e), height: Math.abs(t), ...f };
    W(n, m, s), Sn(n, i, { newSize: { width: e, height: t } }), u && o != null && W(u, { fontSize: o.fontSize }), bc(n, i, l, c);
  }
}, uN = (e, t, n, a, i, r, l, { shouldMaintainAspectRatio: s = !1, shouldResizeFromCenter: c = !1 } = {}) => {
  let [d, o, u, f] = or(t, t.width, t.height, !0), p = k(d, o), U = k(u, f), m = fc(p, U), g = B(k(r, l), m, -t.angle), [b, v, x, y] = or(e, e.width, e.height, !0), E = x - b, S = y - v, w = U[0] - p[0], M = U[1] - p[1], I = w / E, T = M / S;
  i.includes("e") && (I = (g[0] - p[0]) / E), i.includes("s") && (T = (g[1] - p[1]) / S), i.includes("w") && (I = (U[0] - g[0]) / E), i.includes("n") && (T = (U[1] - g[1]) / S);
  let _ = e.width * I, A = e.height * T;
  if (c && (_ = 2 * _ - t.width, A = 2 * A - t.height), s) {
    let D = Math.abs(_) / t.width, P = Math.abs(A) / t.height;
    if (i.length === 1 && (A *= D, _ *= P), i.length === 2) {
      let N = Math.max(D, P);
      _ = t.width * N * Math.sign(_), A = t.height * N * Math.sign(A);
    }
  }
  return { nextWidth: _, nextHeight: A };
}, hN = (e, t, n, a, i, r, { shouldMaintainAspectRatio: l = !1, shouldResizeFromCenter: s = !1 } = {}) => {
  let c = e.map((D) => t.get(D.id)), d = c.reduce((D, P) => {
    if (!pe(P)) return D;
    let N = Ii(P);
    if (!N) return D;
    let $ = t.get(N) ?? null;
    return rt($) ? [...D, { ...$, ...J.getBoundTextElementPosition(P, $, n) }] : D;
  }, []), o = ga(c.map((D) => D).concat(d)), { minX: u, minY: f, maxX: p, maxY: U, midX: m, midY: g } = o, b = p - u, v = U - f, x = { ne: [u, U], se: [u, f], sw: [p, f], nw: [p, U], e: [u, f + v / 2], w: [p, f + v / 2], n: [u + b / 2, U], s: [u + b / 2, f] }, [y, E] = s ? [m, g] : x[a], S = s ? 2 : 1, w = Math.max(Math.abs(i - y) / b || 0, Math.abs(r - E) / v || 0) * S, M = a.includes("e") || a.includes("w") ? Math.abs(i - y) * S : b, I = a.includes("n") || a.includes("s") ? Math.abs(r - E) * S : v;
  l && (M = b * w * Math.sign(i - y), I = v * w * Math.sign(r - E));
  let T = { ne: [i < y, r > E], se: [i < y, r < E], sw: [i > y, r < E], nw: [i > y, r > E], e: [i < y, !1], w: [i > y, !1], n: [!1, r > E], s: [!1, r < E] }, [_, A] = T[a].map((D) => D);
  return { originalBoundingBox: o, nextWidth: M, nextHeight: I, flipByX: _, flipByY: A };
}, v3 = (e, t, n, a, i, { shouldMaintainAspectRatio: r = !1, shouldResizeFromCenter: l = !1, flipByX: s = !1, flipByY: c = !1, nextHeight: d, nextWidth: o, originalBoundingBox: u } = {}) => {
  if (o === void 0 && d === void 0 && s === void 0 && c === void 0 || d === 0 || o === 0) return;
  i || (i = t);
  let f = e.reduce((S, w) => {
    let M = i.get(w.id);
    return M && S.push({ orig: M, latest: w }), S;
  }, []), p;
  if (u) p = u;
  else {
    let S = f.reduce((w, { orig: M }) => {
      if (!pe(M)) return w;
      let I = Ii(M);
      if (!I) return w;
      let T = i.get(I) ?? null;
      return rt(T) ? [...w, { ...T, ...J.getBoundTextElementPosition(M, T, t) }] : w;
    }, []);
    p = ga(f.map(({ orig: w }) => w).concat(S));
  }
  let { minX: U, minY: m, maxX: g, maxY: b, midX: v, midY: x } = p, y = g - U, E = b - m;
  if (o === void 0 && d === void 0 && (o = y, d = E), r && (o === void 0 ? o = d * (y / E) : d === void 0 ? d = o * (E / y) : Math.abs(o / d - y / E) > 1e-3 && (o = d * (y / E))), o && d) {
    let S = n.includes("e") || n.includes("w") ? Math.abs(o) / y : 1, w = n.includes("n") || n.includes("s") ? Math.abs(d) / E : 1, M;
    n.length === 1 ? M = n.includes("e") || n.includes("w") ? S : w : M = Math.max(Math.abs(o) / y || 0, Math.abs(d) / E || 0);
    let I = { ne: [U, b], se: [U, m], sw: [g, m], nw: [g, b], e: [U, m + E / 2], w: [g, m + E / 2], n: [U + y / 2, b], s: [U + y / 2, m] }, [T, _] = l ? [v, x] : I[n], A = r || f.some((R) => R.latest.angle !== 0 || q(R.latest) || ds(R.latest));
    A && (S = M, w = M);
    let [D, P] = [s ? -1 : 1, c ? -1 : 1], N = [];
    for (let { orig: R, latest: V } of f) {
      if (q(R) && rt(R)) continue;
      let O = R.width * S, G = R.height * w, ae = Kd(R.angle * D * P), he = pe(R) || qn(R), ce = R.x - T, Be = R.y - _, He = s && !he ? O : 0, Xe = c && !he ? G : 0, Ne = T + D * (ce * S + He), It = _ + P * (Be * w + Xe), Yt = $p(R, O * D, G * P, !1), Ae = { x: Ne, y: It, width: O, height: G, angle: ae, ...Yt };
      if (ee(R) && (R.startBinding && (Ae.startBinding = { ...R.startBinding, fixedPoint: [s ? -R.startBinding.fixedPoint[0] + 1 : R.startBinding.fixedPoint[0], c ? -R.startBinding.fixedPoint[1] + 1 : R.startBinding.fixedPoint[1]] }), R.endBinding && (Ae.endBinding = { ...R.endBinding, fixedPoint: [s ? -R.endBinding.fixedPoint[0] + 1 : R.endBinding.fixedPoint[0], c ? -R.endBinding.fixedPoint[1] + 1 : R.endBinding.fixedPoint[1]] }), R.fixedSegments && Yt.points && (Ae.fixedSegments = R.fixedSegments.map((yt) => ({ ...yt, start: Yt.points[yt.index - 1], end: Yt.points[yt.index] })))), Re(R) && (Ae.scale = [R.scale[0] * D, R.scale[1] * P]), q(R)) {
        let yt = Fp(R, t, O);
        if (!yt) return;
        Ae.fontSize = yt.size;
      }
      let Oe = i.get(Ii(R) ?? "");
      if (Oe) if (A) {
        let yt = Oe.fontSize * M;
        if (yt < j0) return;
        Ae.boundTextFontSize = yt;
      } else Ae.boundTextFontSize = Oe.fontSize;
      N.push({ element: V, update: Ae });
    }
    let $ = N.map(({ element: R }) => R);
    for (let { element: R, update: { boundTextFontSize: V, ...O } } of N) {
      let { width: G, height: ae, angle: he } = O;
      W(R, O, !1, { isDragging: !0 }), Sn(R, t, { simultaneouslyUpdated: $, newSize: { width: G, height: ae } });
      let ce = be(R, t);
      ce && V && (W(ce, { fontSize: V, angle: pe(R) ? void 0 : he }, !1), bc(R, t, n, !0));
    }
    a.triggerUpdate();
  }
}, fN = (e, t, n, a, i, r) => {
  if (t.length === 1 && ee(t[0]) && (t[0].startBinding || t[0].endBinding)) return;
  let l = t.filter((u) => {
    if (ee(u) && u.startBinding && u.endBinding) {
      let f = t.find((U) => {
        var m;
        return U.id === ((m = u.startBinding) == null ? void 0 : m.elementId);
      }), p = t.find((U) => {
        var m;
        return U.id === ((m = u.endBinding) == null ? void 0 : m.elementId);
      });
      return f && p;
    }
    return !0;
  }), s = new Set(l), c = l.filter((u) => de(u)).map((u) => u.id);
  if (c.length > 0) for (let u of a.getNonDeletedElements()) u.frameId !== null && c.includes(u.frameId) && s.add(u);
  let d = ze(Array.from(s).map((u) => e.originalElements.get(u.id) ?? u)), o = pN(d, n, i, r);
  s.forEach((u) => {
    if (Sg(e, u, o), !ye(u)) {
      let f = be(u, a.getNonDeletedElementsMap());
      f && Sg(e, f, o), Sn(u, a.getElementsMapIncludingDeleted(), { simultaneouslyUpdated: Array.from(s) });
    }
  });
}, pN = (e, t, n, a) => {
  let [i, r] = e, l = i + t.x + n.x, s = r + t.y + n.y;
  if (n.x === 0 || n.y === 0) {
    let [c, d] = _t(i + t.x, r + t.y, a);
    n.x === 0 && (l = c), n.y === 0 && (s = d);
  }
  return { x: l - i, y: s - r };
}, Sg = (e, t, n) => {
  let a = e.originalElements.get(t.id) ?? t, i = a.x + n.x, r = a.y + n.y;
  W(t, { x: i, y: r });
}, UN = (e, t, n) => {
  let [a, i] = ze(e);
  return [t - a, n - i];
}, kg = ({ newElement: e, elementType: t, originX: n, originY: a, x: i, y: r, width: l, height: s, shouldMaintainAspectRatio: c, shouldResizeFromCenter: d, zoom: o, widthAspectRatio: u = null, originOffset: f = null, informMutation: p = !0 }) => {
  c && e.type !== "selection" && (u ? s = l / u : (Math.abs(r - a) > Math.abs(i - n) ? { width: l, height: s } = bg(t, s, i < n ? -l : l) : { width: l, height: s } = bg(t, l, r < a ? -s : s), s < 0 && (s = -s)));
  let U = i < n ? n - l : n, m = r < a ? a - s : a;
  d && (l += l, s += s, U = n - l / 2, m = a - s / 2);
  let g = null;
  if (q(e)) {
    s = e.height;
    let b = z0(Ye({ fontSize: e.fontSize, fontFamily: e.fontFamily }), e.lineHeight);
    l = Math.max(l, b), Math.abs(i - n) > _k / o && (g = { autoResize: !1 }), m = a, d && (U = n - l / 2);
  }
  if (l !== 0 && s !== 0) {
    let b = null;
    Re(e) && (b = { initialWidth: l, initialHeight: s }), W(e, { x: U + ((f == null ? void 0 : f.x) ?? 0), y: m + ((f == null ? void 0 : f.y) ?? 0), width: l, height: s, ...g, ...b }, p);
  }
}, zp = (e, t) => {
  var n;
  return !!(!e.viewModeEnabled && ((n = e.openDialog) == null ? void 0 : n.name) !== "elementLinkSelector" && (e.activeTool.type !== "custom" && (e.editingTextElement || e.activeTool.type !== "selection" && e.activeTool.type !== "eraser" && e.activeTool.type !== "hand" && e.activeTool.type !== "laser") || xe(t, e).length));
}, mN = (e) => {
  let t = 5381;
  for (let n = 0; n < e.length; n++) {
    let a = e.charCodeAt(n);
    t = (t << 5) + t + a;
  }
  return t >>> 0;
}, gN = (e) => e.filter((t) => !t.isDeleted && !Us(t)), Qe = (e) => e.filter((t) => !t.isDeleted), O1 = (e) => !e.isDeleted, bN = (e) => Qe(e).map((t) => F0(t.type) ? { ...t, lastCommittedPoint: null } : t), x3 = (e) => bN(e), y3 = async (e) => {
  let t;
  if (e.type === oe.png) try {
    return await (await import("./image-7KUKJ7J4-BO5pC_nI.js")).decodePngMetadata(e);
  } catch (n) {
    throw n.message === "INVALID" ? new zr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : new zr("Error: cannot restore image");
  }
  else if ("text" in Blob ? t = await e.text() : t = await new Promise((n) => {
    let a = new FileReader();
    a.readAsText(e, "utf8"), a.onloadend = () => {
      a.readyState === FileReader.DONE && n(a.result);
    };
  }), e.type === oe.svg) try {
    return JR({ svg: t });
  } catch (n) {
    throw n.message === "INVALID" ? new zr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : new zr("Error: cannot restore image");
  }
  return t;
}, w3 = (e) => {
  var t;
  return e && ((t = e.name.match(/\.(json|excalidraw|png|svg)$/)) == null ? void 0 : t[1]) || null;
}, vN = (e) => e === "png" || e === "svg", Bp = (e) => {
  let t = w3(e);
  return t === "png" || t === "svg";
}, E3 = (e) => !!e && Object.values(ts).includes(e), Kr = (e) => {
  let { type: t } = e || {};
  return E3(t);
}, S3 = async (e, t, n, a) => {
  let i = await y3(e), r;
  try {
    try {
      r = JSON.parse(i);
    } catch (l) {
      throw Kr(e) ? new zr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : l;
    }
    if (XR(r)) return { type: oe.excalidraw, data: oh({ elements: x3(r.elements || []), appState: { theme: t == null ? void 0 : t.theme, fileHandle: a || e.handle || null, ...Wb(r.appState || {}), ...t ? Go(r.elements || [], t) : {} }, files: r.files }, t, n, { repairBindings: !0, refreshDimensions: !1 }) };
    if (O7(r)) return { type: oe.excalidrawlib, data: r };
    throw new Error("Error: invalid file");
  } catch (l) {
    throw l instanceof zr ? l : new Error("Error: invalid file");
  }
}, k3 = async (e, t, n, a) => {
  let i = await S3(e, t, n, a);
  if (i.type !== oe.excalidraw) throw new Error("Error: invalid file");
  return i.data;
}, M3 = (e, t = "unpublished") => {
  let n = JSON.parse(e);
  if (!O7(n)) throw new Error("Invalid library");
  let a = n.libraryItems || n.library;
  return kp(a, t);
}, xN = async (e, t = "unpublished") => M3(await y3(e), t), Qo = async (e) => new Promise(async (t, n) => {
  try {
    pc(e) && (e = await e), e.toBlob((a) => {
      if (!a) return n(new zI("Error: Canvas too big", "CANVAS_POSSIBLY_TOO_BIG"));
      t(a);
    });
  } catch (a) {
    n(a);
  }
}), yN = async (e) => {
  try {
    let t = await window.crypto.subtle.digest("SHA-1", await Hr(e));
    return MM(new Uint8Array(t));
  } catch (t) {
    return console.error(t), I0(40);
  }
}, Mg = async (e) => new Promise((t, n) => {
  let a = new FileReader();
  a.onload = () => {
    let i = a.result;
    t(i);
  }, a.onerror = (i) => n(i), a.readAsDataURL(e);
}), wN = (e, t) => `data:${t};base64,${T3(vu(e), !0)}`, EN = (e, t = "") => {
  let n = e.indexOf(","), a = atob(e.slice(n + 1)), i = e.slice(0, n).split(":")[1].split(";")[0], r = new ArrayBuffer(a.length), l = new Uint8Array(r);
  for (let s = 0; s < a.length; s++) l[s] = a.charCodeAt(s);
  return new File([r], t, { type: i });
}, SN = (e) => _3(e.slice(e.indexOf(",") + 1)), $1 = async (e, t) => {
  if (e.type === oe.svg) return e;
  let [n, a] = await Promise.all([import("./pica-CiogCCkQ.js").then((r) => r.p).then((r) => r.default), import("./image-blob-reduce.esm-BkjLmknz.js").then((r) => r.default)]), i = a({ pica: n({ features: ["js", "wasm"] }) });
  if (t.outputType) {
    let { outputType: r } = t;
    i._create_blob = function(l) {
      return this.pica.toBlob(l.out_canvas, r, 0.8).then((s) => (l.out_blob = s, l));
    };
  }
  if (!Kr(e)) throw new Error("Error: unsupported file type", { cause: "UNSUPPORTED" });
  return new File([await i.toBlob(e, { max: t.maxWidthOrHeight, alpha: !0 })], e.name, { type: t.outputType || e.type });
}, Cg = (e, t = "") => new File([new TextEncoder().encode(e)], t, { type: oe.svg }), kN = async (e, t = "") => {
  let n;
  try {
    n = await fetch(e);
  } catch {
    throw new Error("Error: failed to fetch image", { cause: "FETCH_ERROR" });
  }
  if (!n.ok) throw new Error("Error: failed to fetch image", { cause: "FETCH_ERROR" });
  let a = await n.blob();
  if (a.type && Kr(a)) {
    let i = t || a.name || "";
    return new File([a], i, { type: a.type });
  }
  throw new Error("Error: unsupported file type", { cause: "UNSUPPORTED" });
}, MN = async (e) => {
  let t = e.dataTransfer.files.item(0), n = await CN(e);
  return { file: t ? await Hp(t) : null, fileHandle: n };
}, CN = async (e) => {
  if (ml) try {
    return await e.dataTransfer.items[0].getAsFileSystemHandle() || null;
  } catch (t) {
    return console.warn(t.name, t.message), null;
  }
  return null;
}, Ig = (e) => {
  let t = null, n = `${[...new Uint8Array(e).slice(0, 8)].join(" ")} `, a = { png: "137 80 78 71 13 10 26 10 ", jpg: "255 216 255 ", gif: "71 73 70 56 57 97 " };
  return n === a.png ? t = oe.png : n.startsWith(a.jpg) ? t = oe.jpg : n.startsWith(a.gif) && (t = oe.gif), t;
}, so = (e, t, n) => new File([e], n || "", { type: t }), Hp = async (e) => {
  var t, n;
  if (e.type) {
    if (Kr(e)) {
      let a = await Hr(e), i = Ig(a);
      i && i !== e.type && (e = so(a, i, e.name));
    }
  } else if ((t = e == null ? void 0 : e.name) != null && t.endsWith(".excalidrawlib")) e = so(await Hr(e), oe.excalidrawlib, e.name);
  else if ((n = e == null ? void 0 : e.name) != null && n.endsWith(".excalidraw")) e = so(await Hr(e), oe.excalidraw, e.name);
  else {
    let a = await Hr(e), i = Ig(a);
    i && (e = so(a, i, e.name));
  }
  return e;
}, Hr = (e) => "arrayBuffer" in e ? e.arrayBuffer() : new Promise((t, n) => {
  let a = new FileReader();
  a.onload = (i) => {
    var r;
    if (!((r = i.target) != null && r.result)) return n(new Error("Couldn't convert blob to ArrayBuffer"));
    t(i.target.result);
  }, a.readAsArrayBuffer(e);
}), vu = (e) => {
  let t = typeof e == "string" ? new TextEncoder().encode(e) : e instanceof Uint8Array ? e : new Uint8Array(e), n = "";
  for (let a of t) n += String.fromCharCode(a);
  return n;
}, C3 = (e) => {
  let t = new ArrayBuffer(e.length), n = new Uint8Array(t);
  for (let a = 0, i = e.length; a < i; a++) n[a] = e.charCodeAt(a);
  return t;
}, I3 = (e) => new TextDecoder("utf-8").decode(C3(e)), T3 = (e, t = !1) => t ? window.btoa(e) : window.btoa(vu(e)), _3 = (e, t = !1) => t ? window.atob(e) : I3(window.atob(e)), A3 = ({ text: e, compress: t }) => {
  let n;
  if (t !== !1) try {
    n = vu(EE(e));
  } catch (a) {
    console.error("encode: cannot deflate", a);
  }
  return { version: "1", encoding: "bstring", compressed: !!n, encoded: n || vu(e) };
}, j3 = (e) => {
  let t;
  switch (e.encoding) {
    case "bstring":
      t = e.compressed ? e.encoded : I3(e.encoded);
      break;
    default:
      throw new Error(`decode: unknown encoding "${e.encoding}"`);
  }
  return e.compressed ? SE(new Uint8Array(C3(t)), { to: "string" }) : t;
}, IN = async (e) => {
  let t = P5(new Uint8Array(await Hr(e))).find((n) => n.name === "tEXt");
  return t ? Du.decode(t.data) : null;
}, gZ = async ({ blob: e, metadata: t }) => {
  let n = P5(new Uint8Array(await Hr(e))), a = Du.encode(oe.excalidraw, JSON.stringify(A3({ text: t, compress: !0 })));
  return n.splice(-1, 0, a), new Blob([Wx(n)], { type: oe.png });
}, bZ = async (e) => {
  let t = await IN(e);
  if ((t == null ? void 0 : t.keyword) === oe.excalidraw) try {
    let n = JSON.parse(t.text);
    if (!("encoded" in n)) {
      if ("type" in n && n.type === Gn.excalidraw) return t.text;
      throw new Error("FAILED");
    }
    return j3(n);
  } catch (n) {
    throw console.error(n), new Error("FAILED");
  }
  throw new Error("INVALID");
}, TN = { paste: "Paste", pasteAsPlaintext: "Paste as plaintext", pasteCharts: "Paste charts", selectAll: "Select all", multiSelect: "Add element to selection", moveCanvas: "Move canvas", cut: "Cut", copy: "Copy", copyAsPng: "Copy to clipboard as PNG", copyAsSvg: "Copy to clipboard as SVG", copyText: "Copy to clipboard as text", copySource: "Copy source to clipboard", convertToCode: "Convert to code", bringForward: "Bring forward", sendToBack: "Send to back", bringToFront: "Bring to front", sendBackward: "Send backward", delete: "Delete", copyStyles: "Copy styles", pasteStyles: "Paste styles", stroke: "Stroke", changeStroke: "Change stroke color", background: "Background", changeBackground: "Change background color", fill: "Fill", strokeWidth: "Stroke width", strokeStyle: "Stroke style", strokeStyle_solid: "Solid", strokeStyle_dashed: "Dashed", strokeStyle_dotted: "Dotted", sloppiness: "Sloppiness", opacity: "Opacity", textAlign: "Text align", edges: "Edges", sharp: "Sharp", round: "Round", arrowheads: "Arrowheads", arrowhead_none: "None", arrowhead_arrow: "Arrow", arrowhead_bar: "Bar", arrowhead_circle: "Circle", arrowhead_circle_outline: "Circle (outline)", arrowhead_triangle: "Triangle", arrowhead_triangle_outline: "Triangle (outline)", arrowhead_diamond: "Diamond", arrowhead_diamond_outline: "Diamond (outline)", arrowhead_crowfoot_many: "Crow's foot (many)", arrowhead_crowfoot_one: "Crow's foot (one)", arrowhead_crowfoot_one_or_many: "Crow's foot (one or many)", more_options: "More options", arrowtypes: "Arrow type", arrowtype_sharp: "Sharp arrow", arrowtype_round: "Curved arrow", arrowtype_elbowed: "Elbow arrow", fontSize: "Font size", fontFamily: "Font family", addWatermark: 'Add "Made with Excalidraw"', handDrawn: "Hand-drawn", normal: "Normal", code: "Code", small: "Small", medium: "Medium", large: "Large", veryLarge: "Very large", solid: "Solid", hachure: "Hachure", zigzag: "Zigzag", crossHatch: "Cross-hatch", thin: "Thin", bold: "Bold", left: "Left", center: "Center", right: "Right", extraBold: "Extra bold", architect: "Architect", artist: "Artist", cartoonist: "Cartoonist", fileTitle: "File name", colorPicker: "Color picker", canvasColors: "Used on canvas", canvasBackground: "Canvas background", drawingCanvas: "Drawing canvas", clearCanvas: "Clear canvas", layers: "Layers", actions: "Actions", language: "Language", liveCollaboration: "Live collaboration...", duplicateSelection: "Duplicate", untitled: "Untitled", name: "Name", yourName: "Your name", madeWithExcalidraw: "Made with Excalidraw", group: "Group selection", ungroup: "Ungroup selection", collaborators: "Collaborators", toggleGrid: "Toggle grid", addToLibrary: "Add to library", removeFromLibrary: "Remove from library", libraryLoadingMessage: "Loading library", libraries: "Browse libraries", loadingScene: "Loading scene", loadScene: "Load scene from file", align: "Align", alignTop: "Align top", alignBottom: "Align bottom", alignLeft: "Align left", alignRight: "Align right", centerVertically: "Center vertically", centerHorizontally: "Center horizontally", distributeHorizontally: "Distribute horizontally", distributeVertically: "Distribute vertically", flipHorizontal: "Flip horizontal", flipVertical: "Flip vertical", viewMode: "View mode", share: "Share", showStroke: "Show stroke color picker", showBackground: "Show background color picker", showFonts: "Show font picker", toggleTheme: "Toggle light/dark theme", theme: "Theme", personalLib: "Personal Library", excalidrawLib: "Excalidraw Library", decreaseFontSize: "Decrease font size", increaseFontSize: "Increase font size", unbindText: "Unbind text", bindText: "Bind text to the container", createContainerFromText: "Wrap text in a container", link: { edit: "Edit link", editEmbed: "Edit embeddable link", create: "Add link", label: "Link", labelEmbed: "Link & embed", empty: "No link is set", hint: "Type or paste your link here", goToElement: "Go to target element" }, lineEditor: { edit: "Edit line", editArrow: "Edit arrow" }, elementLock: { lock: "Lock", unlock: "Unlock", lockAll: "Lock all", unlockAll: "Unlock all" }, statusPublished: "Published", sidebarLock: "Keep sidebar open", selectAllElementsInFrame: "Select all elements in frame", removeAllElementsFromFrame: "Remove all elements from frame", eyeDropper: "Pick color from canvas", textToDiagram: "Text to diagram", prompt: "Prompt", followUs: "Follow us", discordChat: "Discord chat", zoomToFitViewport: "Zoom to fit in viewport", zoomToFitSelection: "Zoom to fit selection", zoomToFit: "Zoom to fit all elements", installPWA: "Install Excalidraw locally (PWA)", autoResize: "Enable text auto-resizing", imageCropping: "Image cropping", unCroppedDimension: "Uncropped dimension", copyElementLink: "Copy link to object", linkToElement: "Link to object", wrapSelectionInFrame: "Wrap selection in frame" }, _N = { title: "Link to object", desc: "Click on a shape on canvas or paste a link.", notFound: "Linked object wasn't found on canvas." }, AN = { noItems: "No items added yet...", hint_emptyLibrary: "Select an item on canvas to add it here, or install a library from the public repository, below.", hint_emptyPrivateLibrary: "Select an item on canvas to add it here." }, jN = { title: "Find on canvas", noMatch: "No matches found...", singleResult: "result", multipleResults: "results", placeholder: "Find text on canvas..." }, DN = { clearReset: "Reset the canvas", exportJSON: "Export to file", exportImage: "Export image...", export: "Save to...", copyToClipboard: "Copy to clipboard", copyLink: "Copy link", save: "Save to current file", saveAs: "Save as", load: "Open", getShareableLink: "Get shareable link", close: "Close", selectLanguage: "Select language", scrollBackToContent: "Scroll back to content", zoomIn: "Zoom in", zoomOut: "Zoom out", resetZoom: "Reset zoom", menu: "Menu", done: "Done", edit: "Edit", undo: "Undo", redo: "Redo", resetLibrary: "Reset library", createNewRoom: "Create new room", fullScreen: "Full screen", darkMode: "Dark mode", lightMode: "Light mode", systemMode: "System mode", zenMode: "Zen mode", objectsSnapMode: "Snap to objects", exitZenMode: "Exit zen mode", cancel: "Cancel", clear: "Clear", remove: "Remove", embed: "Toggle embedding", publishLibrary: "Publish", submit: "Submit", confirm: "Confirm", embeddableInteractionButton: "Click to interact" }, LN = { clearReset: "This will clear the whole canvas. Are you sure?", couldNotCreateShareableLink: "Couldn't create shareable link.", couldNotCreateShareableLinkTooBig: "Couldn't create shareable link: the scene is too big", couldNotLoadInvalidFile: "Couldn't load invalid file", importBackendFailed: "Importing from backend failed.", cannotExportEmptyCanvas: "Cannot export empty canvas.", couldNotCopyToClipboard: "Couldn't copy to clipboard.", decryptFailed: "Couldn't decrypt data.", uploadedSecurly: "The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.", loadSceneOverridePrompt: "Loading external drawing will replace your existing content. Do you wish to continue?", collabStopOverridePrompt: `Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`, errorAddingToLibrary: "Couldn't add item to the library", errorRemovingFromLibrary: "Couldn't remove item from the library", confirmAddLibrary: "This will add {{numShapes}} shape(s) to your library. Are you sure?", imageDoesNotContainScene: "This image does not seem to contain any scene data. Have you enabled scene embedding during export?", cannotRestoreFromImage: "Scene couldn't be restored from this image file", invalidSceneUrl: "Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.", resetLibrary: "This will clear your library. Are you sure?", removeItemsFromsLibrary: "Delete {{count}} item(s) from library?", invalidEncryptionKey: "Encryption key must be of 22 characters. Live collaboration is disabled.", collabOfflineWarning: `No internet connection available.
Your changes will not be saved!` }, RN = { unsupportedFileType: "Unsupported file type.", imageInsertError: "Couldn't insert image. Try again later...", fileTooBig: "File is too big. Maximum allowed size is {{maxSize}}.", svgImageInsertError: "Couldn't insert SVG image. The SVG markup looks invalid.", failedToFetchImage: "Failed to fetch image.", cannotResolveCollabServer: "Couldn't connect to the collab server. Please reload the page and try again.", importLibraryError: "Couldn't load library", saveLibraryError: "Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.", collabSaveFailed: "Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.", collabSaveFailed_sizeExceeded: "Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.", imageToolNotSupported: "Images are disabled.", brave_measure_text_error: { line1: "Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.", line2: "This could result in breaking the <bold>Text Elements</bold> in your drawings.", line3: "We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.", line4: "If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>" }, libraryElementTypeError: { embeddable: "Embeddable elements cannot be added to the library.", iframe: "IFrame elements cannot be added to the library.", image: "Support for adding images to the library coming soon!" }, asyncPasteFailedOnRead: "Couldn't paste (couldn't read from system clipboard).", asyncPasteFailedOnParse: "Couldn't paste.", copyToSystemClipboardFailed: "Couldn't copy to clipboard." }, PN = { selection: "Selection", image: "Insert image", rectangle: "Rectangle", diamond: "Diamond", ellipse: "Ellipse", arrow: "Arrow", line: "Line", freedraw: "Draw", text: "Text", library: "Library", lock: "Keep selected tool active after drawing", penMode: "Pen mode - prevent touch", link: "Add / Update link for a selected shape", eraser: "Eraser", frame: "Frame tool", magicframe: "Wireframe to code", embeddable: "Web Embed", laser: "Laser pointer", hand: "Hand (panning tool)", extraTools: "More tools", mermaidToExcalidraw: "Mermaid to Excalidraw" }, NN = { rectangle: "Rectangle", diamond: "Diamond", ellipse: "Ellipse", arrow: "Arrow", line: "Line", freedraw: "Freedraw", text: "Text", image: "Image", group: "Group", frame: "Frame", magicframe: "Wireframe to code", embeddable: "Web Embed", selection: "Selection", iframe: "IFrame" }, ON = { canvasActions: "Canvas actions", selectedShapeActions: "Selected shape actions", shapes: "Shapes" }, $N = { dismissSearch: "Escape to dismiss search", canvasPanning: "To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool", linearElement: "Click to start multiple points, drag for single line", arrowTool: "Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.", freeDraw: "Click and drag, release when you're finished", text: "Tip: you can also add text by double-clicking anywhere with the selection tool", embeddable: "Click-drag to create a website embed", text_selected: "Double-click or press ENTER to edit text", text_editing: "Press Escape or CtrlOrCmd+ENTER to finish editing", linearElementMulti: "Click on last point or press Escape or Enter to finish", lockAngle: "You can constrain angle by holding SHIFT", resize: `You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`, resizeImage: `You can resize freely by holding SHIFT,
hold ALT to resize from the center`, rotate: "You can constrain angles by holding SHIFT while rotating", lineEditor_info: "Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points", lineEditor_pointSelected: `Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`, lineEditor_nothingSelected: `Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`, placeImage: "Click to place the image, or click and drag to set its size manually", publishLibrary: "Publish your own library", bindTextToElement: "Press enter to add text", createFlowchart: "Hold CtrlOrCmd and Arrow key to create a flowchart", deepBoxSelect: "Hold CtrlOrCmd to deep select, and to prevent dragging", eraserRevert: "Hold Alt to revert the elements marked for deletion", firefox_clipboard_write: 'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.', disableSnapping: "Hold CtrlOrCmd to disable snapping", enterCropEditor: "Double click the image or press ENTER to crop the image", leaveCropEditor: "Click outside the image or press ENTER or ESCAPE to finish cropping" }, FN = { cannotShowPreview: "Cannot show preview", canvasTooBig: "The canvas may be too big.", canvasTooBigTip: "Tip: try moving the farthest elements a bit closer together." }, zN = { headingMain: "Encountered an error. Try <button>reloading the page</button>.", clearCanvasMessage: "If reloading doesn't work, try <button>clearing the canvas</button>.", clearCanvasCaveat: " This will result in loss of work ", trackedToSentry: "The error with identifier {{eventId}} was tracked on our system.", openIssueMessage: "We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.", sceneContent: "Scene content:" }, BN = { or: "Or" }, HN = { desc_intro: "Invite people to collaborate on your drawing.", desc_privacy: "Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.", button_startSession: "Start session", button_stopSession: "Stop session", desc_inProgressIntro: "Live-collaboration session is now in progress.", desc_shareLink: "Share this link with anyone you want to collaborate with:", desc_exitSession: "Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.", shareTitle: "Join a live collaboration session on Excalidraw" }, XN = { title: "Error" }, WN = { disk_title: "Save to disk", disk_details: "Export the scene data to a file from which you can import later.", disk_button: "Save to file", link_title: "Shareable link", link_details: "Export as a read-only link.", link_button: "Export to Link", excalidrawplus_description: "Save the scene to your Excalidraw+ workspace.", excalidrawplus_button: "Export", excalidrawplus_exportError: "Couldn't export to Excalidraw+ at this moment..." }, VN = { blog: "Read our blog", click: "click", deepSelect: "Deep select", deepBoxSelect: "Deep select within box, and prevent dragging", createFlowchart: "Create a flowchart from a generic element", navigateFlowchart: "Navigate a flowchart", curvedArrow: "Curved arrow", curvedLine: "Curved line", documentation: "Documentation", doubleClick: "double-click", drag: "drag", editor: "Editor", editLineArrowPoints: "Edit line/arrow points", editText: "Edit text / add label", github: "Found an issue? Submit", howto: "Follow our guides", or: "or", preventBinding: "Prevent arrow binding", tools: "Tools", shortcuts: "Keyboard shortcuts", textFinish: "Finish editing (text editor)", textNewLine: "Add new line (text editor)", title: "Help", view: "View", zoomToFit: "Zoom to fit all elements", zoomToSelection: "Zoom to selection", toggleElementLock: "Lock/unlock selection", movePageUpDown: "Move page up/down", movePageLeftRight: "Move page left/right", cropStart: "Crop image", cropFinish: "Finish image cropping" }, GN = { title: "Clear canvas" }, YN = { title: "Publish library", itemName: "Item name", authorName: "Author name", githubUsername: "GitHub username", twitterUsername: "Twitter username", libraryName: "Library name", libraryDesc: "Library description", website: "Website", placeholder: { authorName: "Your name or username", libraryName: "Name of your library", libraryDesc: "Description of your library to help people understand its usage", githubHandle: "GitHub handle (optional), so you can edit the library once submitted for review", twitterHandle: "Twitter username (optional), so we know who to credit when promoting over Twitter", website: "Link to your personal website or elsewhere (optional)" }, errors: { required: "Required", website: "Enter a valid URL" }, noteDescription: "Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.", noteGuidelines: "The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.", noteLicense: "By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.", noteItems: "Each library item must have its own name so it's filterable. The following library items will be included:", atleastOneLibItem: "Please select at least one library item to get started", republishWarning: "Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission." }, ZN = { title: "Library submitted", content: "Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>" }, KN = { resetLibrary: "Reset library", removeItemsFromLib: "Remove selected items from library" }, qN = { header: "Export image", label: { withBackground: "Background", onlySelected: "Only selected", darkMode: "Dark mode", embedScene: "Embed scene", scale: "Scale", padding: "Padding" }, tooltip: { embedScene: `Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.` }, title: { exportToPng: "Export to PNG", exportToSvg: "Export to SVG", copyPngToClipboard: "Copy PNG to clipboard" }, button: { exportToPng: "PNG", exportToSvg: "SVG", copyPngToClipboard: "Copy to clipboard" } }, JN = { tooltip: "Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.", link: "Blog post on end-to-end encryption in Excalidraw" }, QN = { angle: "Angle", shapes: "Shapes", height: "Height", scene: "Scene", selected: "Selected", storage: "Storage", fullTitle: "Canvas & Shape properties", title: "Properties", generalStats: "General", elementProperties: "Shape properties", total: "Total", version: "Version", versionCopy: "Click to copy", versionNotAvailable: "Version not available", width: "Width" }, eO = { addedToLibrary: "Added to library", copyStyles: "Copied styles.", copyToClipboard: "Copied to clipboard.", copyToClipboardAsPng: `Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`, copyToClipboardAsSvg: `Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`, fileSaved: "File saved.", fileSavedToFilename: "Saved to {filename}", canvas: "canvas", selection: "selection", pasteAsSingleElement: `Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`, unableToEmbed: "Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted", unrecognizedLinkFormat: "The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site", elementLinkCopied: "Link copied to clipboard" }, tO = { transparent: "Transparent", black: "Black", white: "White", red: "Red", pink: "Pink", grape: "Grape", violet: "Violet", gray: "Gray", blue: "Blue", cyan: "Cyan", teal: "Teal", green: "Green", yellow: "Yellow", orange: "Orange", bronze: "Bronze" }, nO = { app: { center_heading: "All your data is saved locally in your browser.", center_heading_plus: "Did you want to go to the Excalidraw+ instead?", menuHint: "Export, preferences, languages, ..." }, defaults: { menuHint: "Export, preferences, and more...", center_heading: "Diagrams. Made. Simple.", toolbarHint: "Pick a tool & Start drawing!", helpHint: "Shortcuts & help" } }, aO = { mostUsedCustomColors: "Most used custom colors", colors: "Colors", shades: "Shades", hexCode: "Hex code", noShades: "No shades available for this color" }, iO = { action: { exportToImage: { title: "Export as image", button: "Export as image", description: "Export the scene data as an image from which you can import later." }, saveToDisk: { title: "Save to disk", button: "Save to disk", description: "Export the scene data to a file from which you can import later." }, excalidrawPlus: { title: "Excalidraw+", button: "Export to Excalidraw+", description: "Save the scene to your Excalidraw+ workspace." } }, modal: { loadFromFile: { title: "Load from file", button: "Load from file", description: "Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below." }, shareableLink: { title: "Load from link", button: "Replace my content", description: "Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below." } } }, rO = { title: "Mermaid to Excalidraw", button: "Insert", description: "Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.", syntax: "Mermaid Syntax", preview: "Preview" }, lO = { placeholder: "Quick search" }, sO = { badge: { old: "old" }, sceneFonts: "In this scene", availableFonts: "Available fonts", empty: "No fonts found" }, oO = { empty: "No users found", hint: { text: "Click on user to follow", followStatus: "You're currently following this user", inCall: "User is in a voice call", micMuted: "User's microphone is muted", isSpeaking: "User is speaking" } }, cO = { title: "Command palette", shortcuts: { select: "Select", confirm: "Confirm", close: "Close" }, recents: "Recently used", search: { placeholder: "Search menus, commands, and discover hidden gems", noMatch: "No matching commands..." }, itemNotAvailable: "Command is not available...", shortcutHint: "For Command palette, use {{shortcut}}" }, D3 = { labels: TN, elementLink: _N, library: AN, search: jN, buttons: DN, alerts: LN, errors: RN, toolBar: PN, element: NN, headings: ON, hints: $N, canvasError: FN, errorSplash: zN, shareDialog: BN, roomDialog: HN, errorDialog: XN, exportDialog: WN, helpDialog: VN, clearCanvasDialog: GN, publishDialog: YN, publishSuccessDialog: ZN, confirmDialog: KN, imageExportDialog: qN, encrypted: JN, stats: QN, toast: eO, colors: tO, welcomeScreen: nO, colorPicker: aO, overwriteConfirm: iO, mermaid: rO, quickSearch: lO, fontList: sO, userList: oO, commandPalette: cO }, dO = 100, uO = 36, hO = { "ar-SA": 94, "az-AZ": 17, "bg-BG": 71, "bn-BD": 52, "ca-ES": 83, "cs-CZ": 86, "da-DK": 61, "de-DE": 100, "el-GR": 80, en: dO, "es-ES": 96, "eu-ES": 97, "fa-IR": 84, "fi-FI": 76, "fr-FR": 99, "gl-ES": 86, "he-IL": 77, "hi-IN": 76, "hu-HU": 76, "id-ID": 91, "it-IT": 98, "ja-JP": 90, kaa: uO, "kab-KAB": 76, "kk-KZ": 18, "km-KH": 83, "ko-KR": 100, "ku-TR": 87, "lt-LT": 48, "lv-LV": 77, "mr-IN": 98, "my-MM": 35, "nb-NO": 93, "nl-NL": 75, "nn-NO": 67, "oc-FR": 92, "pa-IN": 78, "pl-PL": 99, "pt-BR": 91, "pt-PT": 83, "ro-RO": 99, "ru-RU": 92, "si-LK": 7, "sk-SK": 100, "sl-SI": 100, "sv-SE": 100, "ta-IN": 81, "th-TH": 44, "tr-TR": 87, "uk-UA": 93, "vi-VN": 49, "zh-CN": 100, "zh-HK": 22, "zh-TW": 100 };
const ji = {};
let fO = 0;
function Gt(e, t) {
  const n = `atom${++fO}`, a = {
    toString() {
      return (ji ? "production" : void 0) !== "production" && this.debugLabel ? n + ":" + this.debugLabel : n;
    }
  };
  return typeof e == "function" ? a.read = e : (a.init = e, a.read = pO, a.write = UO), a;
}
function pO(e) {
  return e(this);
}
function UO(e, t, n) {
  return t(
    this,
    typeof n == "function" ? n(e(this)) : n
  );
}
const Tg = (e, t) => e.unstable_is ? e.unstable_is(t) : t === e, F1 = (e) => "init" in e, mf = (e) => !!e.write, xu = /* @__PURE__ */ new WeakMap(), z1 = (e) => {
  var t;
  return B1(e) && !((t = xu.get(e)) != null && t[1]);
}, mO = (e, t) => {
  const n = xu.get(e);
  if (n)
    n[1] = !0, n[0].forEach((a) => a(t));
  else if ((ji ? "production" : void 0) !== "production")
    throw new Error("[Bug] cancelable promise not found");
}, gO = (e) => {
  if (xu.has(e))
    return;
  const t = [/* @__PURE__ */ new Set(), !1];
  xu.set(e, t);
  const n = () => {
    t[1] = !0;
  };
  e.then(n, n), e.onCancel = (a) => {
    t[0].add(a);
  };
}, B1 = (e) => typeof (e == null ? void 0 : e.then) == "function", _g = (e) => "v" in e || "e" in e, Gc = (e) => {
  if ("e" in e)
    throw e.e;
  if ((ji ? "production" : void 0) !== "production" && !("v" in e))
    throw new Error("[Bug] atom state is not initialized");
  return e.v;
}, L3 = (e, t, n) => {
  n.p.has(e) || (n.p.add(e), t.then(
    () => {
      n.p.delete(e);
    },
    () => {
      n.p.delete(e);
    }
  ));
}, Ag = (e, t, n, a, i) => {
  var r;
  if ((ji ? "production" : void 0) !== "production" && a === t)
    throw new Error("[Bug] atom cannot depend on itself");
  n.d.set(a, i.n), z1(n.v) && L3(t, n.v, i), (r = i.m) == null || r.t.add(t), e && bO(e, a, t);
}, Ws = () => ({
  D: /* @__PURE__ */ new Map(),
  H: /* @__PURE__ */ new Set(),
  M: /* @__PURE__ */ new Set(),
  L: /* @__PURE__ */ new Set()
}), So = (e, t, n) => {
  e[t].add(n);
}, jg = (e, t, n) => {
  e.D.has(t) || (e.D.set(t, /* @__PURE__ */ new Set()), So(e, "M", () => {
    var a;
    (a = n.m) == null || a.l.forEach((i) => So(e, "M", i));
  }));
}, bO = (e, t, n) => {
  const a = e.D.get(t);
  a && a.add(n);
}, vO = (e, t) => e.D.get(t), Cr = (e) => {
  let t, n = !1;
  const a = (i) => {
    try {
      i();
    } catch (r) {
      n || (t = r, n = !0);
    }
  };
  for (; e.H.size || e.M.size || e.L.size; )
    e.D.clear(), e.H.forEach(a), e.H.clear(), e.M.forEach(a), e.M.clear(), e.L.forEach(a), e.L.clear();
  if (n)
    throw t;
}, R3 = (...[e, t, n, a]) => {
  const i = (b, v, x) => {
    const y = "v" in v, E = v.v, S = z1(v.v) ? v.v : null;
    if (B1(x)) {
      gO(x);
      for (const w of v.d.keys())
        L3(b, x, e(w));
      v.v = x;
    } else
      v.v = x;
    delete v.e, delete v.x, (!y || !Object.is(E, v.v)) && (++v.n, S && mO(S, x));
  }, r = (b, v) => {
    var x;
    const y = e(v);
    if (_g(y) && (y.m && !y.x || Array.from(y.d).every(
      ([T, _]) => (
        // Recursively, read the atom state of the dependency, and
        // check if the atom epoch number is unchanged
        r(b, T).n === _
      )
    )))
      return y;
    y.d.clear();
    let E = !0;
    const S = (T) => {
      if (Tg(v, T)) {
        const A = e(T);
        if (!_g(A))
          if (F1(T))
            i(T, A, T.init);
          else
            throw new Error("no atom init");
        return Gc(A);
      }
      const _ = r(b, T);
      try {
        return Gc(_);
      } finally {
        if (E)
          Ag(b, v, y, T, _);
        else {
          const A = Ws();
          Ag(A, v, y, T, _), u(A, v, y), Cr(A);
        }
      }
    };
    let w, M;
    const I = {
      get signal() {
        return w || (w = new AbortController()), w.signal;
      },
      get setSelf() {
        return (ji ? "production" : void 0) !== "production" && !mf(v) && console.warn("setSelf function cannot be used with read-only atom"), !M && mf(v) && (M = (...T) => {
          if ((ji ? "production" : void 0) !== "production" && E && console.warn("setSelf function cannot be called in sync"), !E)
            return o(v, ...T);
        }), M;
      }
    };
    try {
      const T = t(v, S, I);
      if (i(v, y, T), B1(T)) {
        (x = T.onCancel) == null || x.call(T, () => w == null ? void 0 : w.abort());
        const _ = () => {
          if (y.m) {
            const A = Ws();
            u(A, v, y), Cr(A);
          }
        };
        T.then(_, _);
      }
      return y;
    } catch (T) {
      return delete y.v, y.e = T, delete y.x, ++y.n, y;
    } finally {
      E = !1;
    }
  }, l = (b) => Gc(r(void 0, b)), s = (b, v, x) => {
    var y, E;
    const S = /* @__PURE__ */ new Map();
    for (const w of ((y = x.m) == null ? void 0 : y.t) || []) {
      const M = e(w);
      M.m && S.set(w, M);
    }
    for (const w of x.p)
      S.set(
        w,
        e(w)
      );
    return (E = vO(b, v)) == null || E.forEach((w) => {
      S.set(w, e(w));
    }), S;
  }, c = (b, v, x) => {
    const y = [], E = /* @__PURE__ */ new Set(), S = /* @__PURE__ */ new Set(), w = [[v, x]];
    for (; w.length > 0; ) {
      const [M, I] = w[w.length - 1];
      if (S.has(M)) {
        w.pop();
        continue;
      }
      if (E.has(M)) {
        y.push([M, I, I.n]), S.add(M), I.x = !0, w.pop();
        continue;
      }
      E.add(M);
      for (const [T, _] of s(b, M, I))
        M !== T && !E.has(T) && w.push([T, _]);
    }
    So(b, "H", () => {
      const M = /* @__PURE__ */ new Set([v]);
      for (let I = y.length - 1; I >= 0; --I) {
        const [T, _, A] = y[I];
        let D = !1;
        for (const P of _.d.keys())
          if (P !== T && M.has(P)) {
            D = !0;
            break;
          }
        D && (r(b, T), u(b, T, _), A !== _.n && (jg(b, T, _), M.add(T))), delete _.x;
      }
    });
  }, d = (b, v, ...x) => {
    let y = !0;
    const E = (w) => Gc(r(b, w)), S = (w, ...M) => {
      const I = e(w);
      try {
        if (Tg(v, w)) {
          if (!F1(w))
            throw new Error("atom not writable");
          const T = I.n, _ = M[0];
          i(w, I, _), u(b, w, I), T !== I.n && (jg(b, w, I), c(b, w, I));
          return;
        } else
          return d(b, w, ...M);
      } finally {
        y || Cr(b);
      }
    };
    try {
      return n(v, E, S, ...x);
    } finally {
      y = !1;
    }
  }, o = (b, ...v) => {
    const x = Ws();
    try {
      return d(x, b, ...v);
    } finally {
      Cr(x);
    }
  }, u = (b, v, x) => {
    if (x.m && !z1(x.v)) {
      for (const y of x.d.keys())
        x.m.d.has(y) || (f(b, y, e(y)).t.add(v), x.m.d.add(y));
      for (const y of x.m.d || [])
        if (!x.d.has(y)) {
          x.m.d.delete(y);
          const E = p(b, y, e(y));
          E == null || E.t.delete(v);
        }
    }
  }, f = (b, v, x) => {
    if (!x.m) {
      r(b, v);
      for (const y of x.d.keys())
        f(b, y, e(y)).t.add(v);
      if (x.m = {
        l: /* @__PURE__ */ new Set(),
        d: new Set(x.d.keys()),
        t: /* @__PURE__ */ new Set()
      }, mf(v)) {
        const y = x.m;
        let E;
        const S = (w, M) => {
          let I = !0;
          E = (...T) => {
            try {
              return d(w, v, ...T);
            } finally {
              I || Cr(w);
            }
          };
          try {
            return M();
          } finally {
            I = !1;
          }
        };
        So(b, "L", () => {
          const w = S(
            b,
            () => a(v, (...M) => E(...M))
          );
          w && (y.u = (M) => S(M, w));
        });
      }
    }
    return x.m;
  }, p = (b, v, x) => {
    if (x.m && !x.m.l.size && !Array.from(x.m.t).some((y) => {
      var E;
      return (E = e(y).m) == null ? void 0 : E.d.has(v);
    })) {
      const y = x.m.u;
      y && So(b, "L", () => y(b)), delete x.m;
      for (const E of x.d.keys()) {
        const S = p(b, E, e(E));
        S == null || S.t.delete(v);
      }
      return;
    }
    return x.m;
  };
  return {
    get: l,
    set: o,
    sub: (b, v) => {
      const x = Ws(), y = e(b), S = f(x, b, y).l;
      return S.add(v), Cr(x), () => {
        S.delete(v);
        const w = Ws();
        p(w, b, y), Cr(w);
      };
    },
    unstable_derive: (b) => R3(...b(e, t, n, a))
  };
}, xO = (e) => {
  const t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new Set();
  let a, i = 0;
  const r = e.unstable_derive(
    (c, d, o, u) => (a = c, [
      (f) => {
        let p = t.get(f);
        if (!p) {
          const U = c(f);
          p = new Proxy(U, {
            set(m, g, b) {
              return g === "m" && n.add(f), Reflect.set(m, g, b);
            },
            deleteProperty(m, g) {
              return g === "m" && n.delete(f), Reflect.deleteProperty(m, g);
            }
          }), t.set(f, p);
        }
        return p;
      },
      d,
      (f, p, U, ...m) => i ? U(f, ...m) : o(f, p, U, ...m),
      u
    ])
  ), l = r.set;
  return Object.assign(r, {
    // store dev methods (these are tentative and subject to change without notice)
    dev4_get_internal_weak_map: () => ({
      get: (c) => {
        const d = a(c);
        if (d.n !== 0)
          return d;
      }
    }),
    dev4_get_mounted_atoms: () => n,
    dev4_restore_atoms: (c) => {
      l({
        read: () => null,
        write: (o, u) => {
          ++i;
          try {
            for (const [f, p] of c)
              F1(f) && u(f, p);
          } finally {
            --i;
          }
        }
      });
    }
  });
}, Xp = () => {
  const e = /* @__PURE__ */ new WeakMap(), n = R3(
    (a) => {
      if ((ji ? "production" : void 0) !== "production" && !a)
        throw new Error("Atom is undefined or null");
      let i = e.get(a);
      return i || (i = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 }, e.set(a, i)), i;
    },
    (a, ...i) => a.read(...i),
    (a, ...i) => a.write(...i),
    (a, ...i) => {
      var r;
      return (r = a.onMount) == null ? void 0 : r.call(a, ...i);
    }
  );
  return (ji ? "production" : void 0) !== "production" ? xO(n) : n;
};
let Vs;
const yO = () => (Vs || (Vs = Xp(), (ji ? "production" : void 0) !== "production" && (globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = Vs), globalThis.__JOTAI_DEFAULT_STORE__ !== Vs && console.warn(
  "Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"
))), Vs), P3 = {}, wO = Ql(
  void 0
), hh = (e) => {
  const t = Cn(wO);
  return (e == null ? void 0 : e.store) || t || yO();
}, H1 = (e) => typeof (e == null ? void 0 : e.then) == "function", N3 = (e) => {
  e.status = "pending", e.then(
    (t) => {
      e.status = "fulfilled", e.value = t;
    },
    (t) => {
      e.status = "rejected", e.reason = t;
    }
  );
}, EO = Y.use || ((e) => {
  if (e.status === "pending")
    throw e;
  if (e.status === "fulfilled")
    return e.value;
  throw e.status === "rejected" ? e.reason : (N3(e), e);
}), gf = /* @__PURE__ */ new WeakMap(), Dg = (e) => {
  let t = gf.get(e);
  return t || (t = new Promise((n, a) => {
    let i = e;
    const r = (c) => (d) => {
      i === c && n(d);
    }, l = (c) => (d) => {
      i === c && a(d);
    }, s = (c) => {
      "onCancel" in c && typeof c.onCancel == "function" && c.onCancel((d) => {
        if ((P3 ? "production" : void 0) !== "production" && d === c)
          throw new Error("[Bug] p is not updated even after cancelation");
        H1(d) ? (gf.set(d, t), i = d, d.then(r(d), l(d)), s(d)) : n(d);
      });
    };
    e.then(r(e), l(e)), s(e);
  }), gf.set(e, t)), t;
};
function O3(e, t) {
  const n = hh(t), [[a, i, r], l] = A5(
    (d) => {
      const o = n.get(e);
      return Object.is(d[0], o) && d[1] === n && d[2] === e ? d : [o, n, e];
    },
    void 0,
    () => [n.get(e), n, e]
  );
  let s = a;
  (i !== n || r !== e) && (l(), s = n.get(e));
  const c = t == null ? void 0 : t.delay;
  if (Q(() => {
    const d = n.sub(e, () => {
      if (typeof c == "number") {
        const o = n.get(e);
        H1(o) && N3(Dg(o)), setTimeout(l, c);
        return;
      }
      l();
    });
    return l(), d;
  }, [n, e, c]), wx(s), H1(s)) {
    const d = Dg(s);
    return EO(d);
  }
  return s;
}
function $3(e, t) {
  const n = hh(t);
  return Te(
    (...i) => {
      if ((P3 ? "production" : void 0) !== "production" && !("write" in e))
        throw new Error("not writable atom");
      return n.set(e, ...i);
    },
    [n, e]
  );
}
function SO(e, t) {
  return [
    O3(e, t),
    // We do wrong type assertion here, which results in throwing an error.
    $3(e, t)
  ];
}
const Lg = /* @__PURE__ */ new WeakMap();
function kO(e, t) {
  const n = hh(t), a = MO(n);
  for (const [i, r] of e)
    (!a.has(i) || t != null && t.dangerouslyForceHydrate) && (a.add(i), n.set(i, r));
}
const MO = (e) => {
  let t = Lg.get(e);
  return t || (t = /* @__PURE__ */ new WeakSet(), Lg.set(e, t)), t;
};
function Xl() {
  return Xl = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var a in n)
        Object.prototype.hasOwnProperty.call(n, a) && (e[a] = n[a]);
    }
    return e;
  }, Xl.apply(this, arguments);
}
function F3() {
  const e = Ql(null);
  function t({
    store: l,
    initialValues: s = [],
    children: c
  }) {
    const d = ie(l);
    return d.current || (d.current = Xp()), kO(s, {
      store: d.current
    }), h.jsx(e.Provider, {
      value: d.current,
      children: c
    });
  }
  const n = (l) => {
    const s = Cn(e);
    if (!s) throw new Error("Missing Provider from createIsolation");
    return hh(Xl({
      store: s
    }, l));
  };
  return {
    Provider: t,
    useStore: n,
    useAtom: (l, s) => {
      const c = n();
      return SO(l, Xl({
        store: c
      }, s));
    },
    useAtomValue: (l, s) => {
      const c = n();
      return O3(l, Xl({
        store: c
      }, s));
    },
    useSetAtom: (l, s) => {
      const c = n();
      return $3(l, Xl({
        store: c
      }, s));
    }
  };
}
process.env.NODE_ENV;
const {
  read: vZ,
  write: xZ
} = Gt(null);
Ql({
  scope: void 0,
  baseStore: void 0
});
function dr(e, t, { checkForDefaultPrevented: n = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), n === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function Rg(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function z3(...e) {
  return (t) => {
    let n = !1;
    const a = e.map((i) => {
      const r = Rg(i, t);
      return !n && typeof r == "function" && (n = !0), r;
    });
    if (n)
      return () => {
        for (let i = 0; i < a.length; i++) {
          const r = a[i];
          typeof r == "function" ? r() : Rg(e[i], null);
        }
      };
  };
}
function wr(...e) {
  return z.useCallback(z3(...e), e);
}
function B3(e, t = []) {
  let n = [];
  function a(r, l) {
    const s = z.createContext(l), c = n.length;
    n = [...n, l];
    const d = (u) => {
      var b;
      const { scope: f, children: p, ...U } = u, m = ((b = f == null ? void 0 : f[e]) == null ? void 0 : b[c]) || s, g = z.useMemo(() => U, Object.values(U));
      return /* @__PURE__ */ h.jsx(m.Provider, { value: g, children: p });
    };
    d.displayName = r + "Provider";
    function o(u, f) {
      var m;
      const p = ((m = f == null ? void 0 : f[e]) == null ? void 0 : m[c]) || s, U = z.useContext(p);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return [d, o];
  }
  const i = () => {
    const r = n.map((l) => z.createContext(l));
    return function(s) {
      const c = (s == null ? void 0 : s[e]) || r;
      return z.useMemo(
        () => ({ [`__scope${e}`]: { ...s, [e]: c } }),
        [s, c]
      );
    };
  };
  return i.scopeName = e, [a, CO(i, ...t)];
}
function CO(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(r) {
      const l = a.reduce((s, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return { ...s, ...u };
      }, {});
      return z.useMemo(() => ({ [`__scope${t.scopeName}`]: l }), [l]);
    };
  };
  return n.scopeName = t.scopeName, n;
}
var Wp = z.forwardRef((e, t) => {
  const { children: n, ...a } = e, i = z.Children.toArray(n), r = i.find(TO);
  if (r) {
    const l = r.props.children, s = i.map((c) => c === r ? z.Children.count(l) > 1 ? z.Children.only(null) : z.isValidElement(l) ? l.props.children : null : c);
    return /* @__PURE__ */ h.jsx(X1, { ...a, ref: t, children: z.isValidElement(l) ? z.cloneElement(l, void 0, s) : null });
  }
  return /* @__PURE__ */ h.jsx(X1, { ...a, ref: t, children: n });
});
Wp.displayName = "Slot";
var X1 = z.forwardRef((e, t) => {
  const { children: n, ...a } = e;
  if (z.isValidElement(n)) {
    const i = AO(n), r = _O(a, n.props);
    return n.type !== z.Fragment && (r.ref = t ? z3(t, i) : i), z.cloneElement(n, r);
  }
  return z.Children.count(n) > 1 ? z.Children.only(null) : null;
});
X1.displayName = "SlotClone";
var IO = ({ children: e }) => /* @__PURE__ */ h.jsx(h.Fragment, { children: e });
function TO(e) {
  return z.isValidElement(e) && e.type === IO;
}
function _O(e, t) {
  const n = { ...t };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...s) => {
      r(...s), i(...s);
    } : i && (n[a] = i) : a === "style" ? n[a] = { ...i, ...r } : a === "className" && (n[a] = [i, r].filter(Boolean).join(" "));
  }
  return { ...e, ...n };
}
function AO(e) {
  var a, i;
  let t = (a = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : a.get, n = t && "isReactWarning" in t && t.isReactWarning;
  return n ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, n = t && "isReactWarning" in t && t.isReactWarning, n ? e.props.ref : e.props.ref || e.ref);
}
var jO = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "span",
  "svg",
  "ul"
], Oi = jO.reduce((e, t) => {
  const n = z.forwardRef((a, i) => {
    const { asChild: r, ...l } = a, s = r ? Wp : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ h.jsx(s, { ...l, ref: i });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function DO(e, t) {
  e && D5.flushSync(() => e.dispatchEvent(t));
}
function mr(e) {
  const t = z.useRef(e);
  return z.useEffect(() => {
    t.current = e;
  }), z.useMemo(() => (...n) => {
    var a;
    return (a = t.current) == null ? void 0 : a.call(t, ...n);
  }, []);
}
function LO(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = mr(e);
  z.useEffect(() => {
    const a = (i) => {
      i.key === "Escape" && n(i);
    };
    return t.addEventListener("keydown", a, { capture: !0 }), () => t.removeEventListener("keydown", a, { capture: !0 });
  }, [n, t]);
}
var RO = "DismissableLayer", W1 = "dismissableLayer.update", PO = "dismissableLayer.pointerDownOutside", NO = "dismissableLayer.focusOutside", Pg, H3 = z.createContext({
  layers: /* @__PURE__ */ new Set(),
  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),
  branches: /* @__PURE__ */ new Set()
}), X3 = z.forwardRef(
  (e, t) => {
    const {
      disableOutsidePointerEvents: n = !1,
      onEscapeKeyDown: a,
      onPointerDownOutside: i,
      onFocusOutside: r,
      onInteractOutside: l,
      onDismiss: s,
      ...c
    } = e, d = z.useContext(H3), [o, u] = z.useState(null), f = (o == null ? void 0 : o.ownerDocument) ?? (globalThis == null ? void 0 : globalThis.document), [, p] = z.useState({}), U = wr(t, (w) => u(w)), m = Array.from(d.layers), [g] = [...d.layersWithOutsidePointerEventsDisabled].slice(-1), b = m.indexOf(g), v = o ? m.indexOf(o) : -1, x = d.layersWithOutsidePointerEventsDisabled.size > 0, y = v >= b, E = FO((w) => {
      const M = w.target, I = [...d.branches].some((T) => T.contains(M));
      !y || I || (i == null || i(w), l == null || l(w), w.defaultPrevented || s == null || s());
    }, f), S = zO((w) => {
      const M = w.target;
      [...d.branches].some((T) => T.contains(M)) || (r == null || r(w), l == null || l(w), w.defaultPrevented || s == null || s());
    }, f);
    return LO((w) => {
      v === d.layers.size - 1 && (a == null || a(w), !w.defaultPrevented && s && (w.preventDefault(), s()));
    }, f), z.useEffect(() => {
      if (o)
        return n && (d.layersWithOutsidePointerEventsDisabled.size === 0 && (Pg = f.body.style.pointerEvents, f.body.style.pointerEvents = "none"), d.layersWithOutsidePointerEventsDisabled.add(o)), d.layers.add(o), Ng(), () => {
          n && d.layersWithOutsidePointerEventsDisabled.size === 1 && (f.body.style.pointerEvents = Pg);
        };
    }, [o, f, n, d]), z.useEffect(() => () => {
      o && (d.layers.delete(o), d.layersWithOutsidePointerEventsDisabled.delete(o), Ng());
    }, [o, d]), z.useEffect(() => {
      const w = () => p({});
      return document.addEventListener(W1, w), () => document.removeEventListener(W1, w);
    }, []), /* @__PURE__ */ h.jsx(
      Oi.div,
      {
        ...c,
        ref: U,
        style: {
          pointerEvents: x ? y ? "auto" : "none" : void 0,
          ...e.style
        },
        onFocusCapture: dr(e.onFocusCapture, S.onFocusCapture),
        onBlurCapture: dr(e.onBlurCapture, S.onBlurCapture),
        onPointerDownCapture: dr(
          e.onPointerDownCapture,
          E.onPointerDownCapture
        )
      }
    );
  }
);
X3.displayName = RO;
var OO = "DismissableLayerBranch", $O = z.forwardRef((e, t) => {
  const n = z.useContext(H3), a = z.useRef(null), i = wr(t, a);
  return z.useEffect(() => {
    const r = a.current;
    if (r)
      return n.branches.add(r), () => {
        n.branches.delete(r);
      };
  }, [n.branches]), /* @__PURE__ */ h.jsx(Oi.div, { ...e, ref: i });
});
$O.displayName = OO;
function FO(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = mr(e), a = z.useRef(!1), i = z.useRef(() => {
  });
  return z.useEffect(() => {
    const r = (s) => {
      if (s.target && !a.current) {
        let c = function() {
          W3(
            PO,
            n,
            d,
            { discrete: !0 }
          );
        };
        const d = { originalEvent: s };
        s.pointerType === "touch" ? (t.removeEventListener("click", i.current), i.current = c, t.addEventListener("click", i.current, { once: !0 })) : c();
      } else
        t.removeEventListener("click", i.current);
      a.current = !1;
    }, l = window.setTimeout(() => {
      t.addEventListener("pointerdown", r);
    }, 0);
    return () => {
      window.clearTimeout(l), t.removeEventListener("pointerdown", r), t.removeEventListener("click", i.current);
    };
  }, [t, n]), {
    // ensures we check React component tree (not just DOM tree)
    onPointerDownCapture: () => a.current = !0
  };
}
function zO(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = mr(e), a = z.useRef(!1);
  return z.useEffect(() => {
    const i = (r) => {
      r.target && !a.current && W3(NO, n, { originalEvent: r }, {
        discrete: !1
      });
    };
    return t.addEventListener("focusin", i), () => t.removeEventListener("focusin", i);
  }, [t, n]), {
    onFocusCapture: () => a.current = !0,
    onBlurCapture: () => a.current = !1
  };
}
function Ng() {
  const e = new CustomEvent(W1);
  document.dispatchEvent(e);
}
function W3(e, t, n, { discrete: a }) {
  const i = n.originalEvent.target, r = new CustomEvent(e, { bubbles: !1, cancelable: !0, detail: n });
  t && i.addEventListener(e, t, { once: !0 }), a ? DO(i, r) : i.dispatchEvent(r);
}
var bf = 0;
function BO() {
  z.useEffect(() => {
    const e = document.querySelectorAll("[data-radix-focus-guard]");
    return document.body.insertAdjacentElement("afterbegin", e[0] ?? Og()), document.body.insertAdjacentElement("beforeend", e[1] ?? Og()), bf++, () => {
      bf === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach((t) => t.remove()), bf--;
    };
  }, []);
}
function Og() {
  const e = document.createElement("span");
  return e.setAttribute("data-radix-focus-guard", ""), e.tabIndex = 0, e.style.outline = "none", e.style.opacity = "0", e.style.position = "fixed", e.style.pointerEvents = "none", e;
}
var vf = "focusScope.autoFocusOnMount", xf = "focusScope.autoFocusOnUnmount", $g = { bubbles: !1, cancelable: !0 }, HO = "FocusScope", V3 = z.forwardRef((e, t) => {
  const {
    loop: n = !1,
    trapped: a = !1,
    onMountAutoFocus: i,
    onUnmountAutoFocus: r,
    ...l
  } = e, [s, c] = z.useState(null), d = mr(i), o = mr(r), u = z.useRef(null), f = wr(t, (m) => c(m)), p = z.useRef({
    paused: !1,
    pause() {
      this.paused = !0;
    },
    resume() {
      this.paused = !1;
    }
  }).current;
  z.useEffect(() => {
    if (a) {
      let m = function(x) {
        if (p.paused || !s) return;
        const y = x.target;
        s.contains(y) ? u.current = y : Ki(u.current, { select: !0 });
      }, g = function(x) {
        if (p.paused || !s) return;
        const y = x.relatedTarget;
        y !== null && (s.contains(y) || Ki(u.current, { select: !0 }));
      }, b = function(x) {
        if (document.activeElement === document.body)
          for (const E of x)
            E.removedNodes.length > 0 && Ki(s);
      };
      document.addEventListener("focusin", m), document.addEventListener("focusout", g);
      const v = new MutationObserver(b);
      return s && v.observe(s, { childList: !0, subtree: !0 }), () => {
        document.removeEventListener("focusin", m), document.removeEventListener("focusout", g), v.disconnect();
      };
    }
  }, [a, s, p.paused]), z.useEffect(() => {
    if (s) {
      zg.add(p);
      const m = document.activeElement;
      if (!s.contains(m)) {
        const b = new CustomEvent(vf, $g);
        s.addEventListener(vf, d), s.dispatchEvent(b), b.defaultPrevented || (XO(ZO(G3(s)), { select: !0 }), document.activeElement === m && Ki(s));
      }
      return () => {
        s.removeEventListener(vf, d), setTimeout(() => {
          const b = new CustomEvent(xf, $g);
          s.addEventListener(xf, o), s.dispatchEvent(b), b.defaultPrevented || Ki(m ?? document.body, { select: !0 }), s.removeEventListener(xf, o), zg.remove(p);
        }, 0);
      };
    }
  }, [s, d, o, p]);
  const U = z.useCallback(
    (m) => {
      if (!n && !a || p.paused) return;
      const g = m.key === "Tab" && !m.altKey && !m.ctrlKey && !m.metaKey, b = document.activeElement;
      if (g && b) {
        const v = m.currentTarget, [x, y] = WO(v);
        x && y ? !m.shiftKey && b === y ? (m.preventDefault(), n && Ki(x, { select: !0 })) : m.shiftKey && b === x && (m.preventDefault(), n && Ki(y, { select: !0 })) : b === v && m.preventDefault();
      }
    },
    [n, a, p.paused]
  );
  return /* @__PURE__ */ h.jsx(Oi.div, { tabIndex: -1, ...l, ref: f, onKeyDown: U });
});
V3.displayName = HO;
function XO(e, { select: t = !1 } = {}) {
  const n = document.activeElement;
  for (const a of e)
    if (Ki(a, { select: t }), document.activeElement !== n) return;
}
function WO(e) {
  const t = G3(e), n = Fg(t, e), a = Fg(t.reverse(), e);
  return [n, a];
}
function G3(e) {
  const t = [], n = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (a) => {
      const i = a.tagName === "INPUT" && a.type === "hidden";
      return a.disabled || a.hidden || i ? NodeFilter.FILTER_SKIP : a.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  for (; n.nextNode(); ) t.push(n.currentNode);
  return t;
}
function Fg(e, t) {
  for (const n of e)
    if (!VO(n, { upTo: t })) return n;
}
function VO(e, { upTo: t }) {
  if (getComputedStyle(e).visibility === "hidden") return !0;
  for (; e; ) {
    if (t !== void 0 && e === t) return !1;
    if (getComputedStyle(e).display === "none") return !0;
    e = e.parentElement;
  }
  return !1;
}
function GO(e) {
  return e instanceof HTMLInputElement && "select" in e;
}
function Ki(e, { select: t = !1 } = {}) {
  if (e && e.focus) {
    const n = document.activeElement;
    e.focus({ preventScroll: !0 }), e !== n && GO(e) && t && e.select();
  }
}
var zg = YO();
function YO() {
  let e = [];
  return {
    add(t) {
      const n = e[0];
      t !== n && (n == null || n.pause()), e = Bg(e, t), e.unshift(t);
    },
    remove(t) {
      var n;
      e = Bg(e, t), (n = e[0]) == null || n.resume();
    }
  };
}
function Bg(e, t) {
  const n = [...e], a = n.indexOf(t);
  return a !== -1 && n.splice(a, 1), n;
}
function ZO(e) {
  return e.filter((t) => t.tagName !== "A");
}
var ul = globalThis != null && globalThis.document ? z.useLayoutEffect : () => {
}, KO = z.useId || (() => {
}), qO = 0;
function JO(e) {
  const [t, n] = z.useState(KO());
  return ul(() => {
    n((a) => a ?? String(qO++));
  }, [e]), e || (t ? `radix-${t}` : "");
}
const QO = ["top", "right", "bottom", "left"], gr = Math.min, An = Math.max, yu = Math.round, Yc = Math.floor, Ya = (e) => ({
  x: e,
  y: e
}), e$ = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, t$ = {
  start: "end",
  end: "start"
};
function V1(e, t, n) {
  return An(e, gr(t, n));
}
function Di(e, t) {
  return typeof e == "function" ? e(t) : e;
}
function Li(e) {
  return e.split("-")[0];
}
function Cs(e) {
  return e.split("-")[1];
}
function Vp(e) {
  return e === "x" ? "y" : "x";
}
function Gp(e) {
  return e === "y" ? "height" : "width";
}
function Wa(e) {
  return ["top", "bottom"].includes(Li(e)) ? "y" : "x";
}
function Yp(e) {
  return Vp(Wa(e));
}
function n$(e, t, n) {
  n === void 0 && (n = !1);
  const a = Cs(e), i = Yp(e), r = Gp(i);
  let l = i === "x" ? a === (n ? "end" : "start") ? "right" : "left" : a === "start" ? "bottom" : "top";
  return t.reference[r] > t.floating[r] && (l = wu(l)), [l, wu(l)];
}
function a$(e) {
  const t = wu(e);
  return [G1(e), t, G1(t)];
}
function G1(e) {
  return e.replace(/start|end/g, (t) => t$[t]);
}
function i$(e, t, n) {
  const a = ["left", "right"], i = ["right", "left"], r = ["top", "bottom"], l = ["bottom", "top"];
  switch (e) {
    case "top":
    case "bottom":
      return n ? t ? i : a : t ? a : i;
    case "left":
    case "right":
      return t ? r : l;
    default:
      return [];
  }
}
function r$(e, t, n, a) {
  const i = Cs(e);
  let r = i$(Li(e), n === "start", a);
  return i && (r = r.map((l) => l + "-" + i), t && (r = r.concat(r.map(G1)))), r;
}
function wu(e) {
  return e.replace(/left|right|bottom|top/g, (t) => e$[t]);
}
function l$(e) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...e
  };
}
function Y3(e) {
  return typeof e != "number" ? l$(e) : {
    top: e,
    right: e,
    bottom: e,
    left: e
  };
}
function Eu(e) {
  const {
    x: t,
    y: n,
    width: a,
    height: i
  } = e;
  return {
    width: a,
    height: i,
    top: n,
    left: t,
    right: t + a,
    bottom: n + i,
    x: t,
    y: n
  };
}
function Hg(e, t, n) {
  let {
    reference: a,
    floating: i
  } = e;
  const r = Wa(t), l = Yp(t), s = Gp(l), c = Li(t), d = r === "y", o = a.x + a.width / 2 - i.width / 2, u = a.y + a.height / 2 - i.height / 2, f = a[s] / 2 - i[s] / 2;
  let p;
  switch (c) {
    case "top":
      p = {
        x: o,
        y: a.y - i.height
      };
      break;
    case "bottom":
      p = {
        x: o,
        y: a.y + a.height
      };
      break;
    case "right":
      p = {
        x: a.x + a.width,
        y: u
      };
      break;
    case "left":
      p = {
        x: a.x - i.width,
        y: u
      };
      break;
    default:
      p = {
        x: a.x,
        y: a.y
      };
  }
  switch (Cs(t)) {
    case "start":
      p[l] -= f * (n && d ? -1 : 1);
      break;
    case "end":
      p[l] += f * (n && d ? -1 : 1);
      break;
  }
  return p;
}
const s$ = async (e, t, n) => {
  const {
    placement: a = "bottom",
    strategy: i = "absolute",
    middleware: r = [],
    platform: l
  } = n, s = r.filter(Boolean), c = await (l.isRTL == null ? void 0 : l.isRTL(t));
  let d = await l.getElementRects({
    reference: e,
    floating: t,
    strategy: i
  }), {
    x: o,
    y: u
  } = Hg(d, a, c), f = a, p = {}, U = 0;
  for (let m = 0; m < s.length; m++) {
    const {
      name: g,
      fn: b
    } = s[m], {
      x: v,
      y: x,
      data: y,
      reset: E
    } = await b({
      x: o,
      y: u,
      initialPlacement: a,
      placement: f,
      strategy: i,
      middlewareData: p,
      rects: d,
      platform: l,
      elements: {
        reference: e,
        floating: t
      }
    });
    o = v ?? o, u = x ?? u, p = {
      ...p,
      [g]: {
        ...p[g],
        ...y
      }
    }, E && U <= 50 && (U++, typeof E == "object" && (E.placement && (f = E.placement), E.rects && (d = E.rects === !0 ? await l.getElementRects({
      reference: e,
      floating: t,
      strategy: i
    }) : E.rects), {
      x: o,
      y: u
    } = Hg(d, f, c)), m = -1);
  }
  return {
    x: o,
    y: u,
    placement: f,
    strategy: i,
    middlewareData: p
  };
};
async function ec(e, t) {
  var n;
  t === void 0 && (t = {});
  const {
    x: a,
    y: i,
    platform: r,
    rects: l,
    elements: s,
    strategy: c
  } = e, {
    boundary: d = "clippingAncestors",
    rootBoundary: o = "viewport",
    elementContext: u = "floating",
    altBoundary: f = !1,
    padding: p = 0
  } = Di(t, e), U = Y3(p), g = s[f ? u === "floating" ? "reference" : "floating" : u], b = Eu(await r.getClippingRect({
    element: (n = await (r.isElement == null ? void 0 : r.isElement(g))) == null || n ? g : g.contextElement || await (r.getDocumentElement == null ? void 0 : r.getDocumentElement(s.floating)),
    boundary: d,
    rootBoundary: o,
    strategy: c
  })), v = u === "floating" ? {
    x: a,
    y: i,
    width: l.floating.width,
    height: l.floating.height
  } : l.reference, x = await (r.getOffsetParent == null ? void 0 : r.getOffsetParent(s.floating)), y = await (r.isElement == null ? void 0 : r.isElement(x)) ? await (r.getScale == null ? void 0 : r.getScale(x)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, E = Eu(r.convertOffsetParentRelativeRectToViewportRelativeRect ? await r.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: s,
    rect: v,
    offsetParent: x,
    strategy: c
  }) : v);
  return {
    top: (b.top - E.top + U.top) / y.y,
    bottom: (E.bottom - b.bottom + U.bottom) / y.y,
    left: (b.left - E.left + U.left) / y.x,
    right: (E.right - b.right + U.right) / y.x
  };
}
const o$ = (e) => ({
  name: "arrow",
  options: e,
  async fn(t) {
    const {
      x: n,
      y: a,
      placement: i,
      rects: r,
      platform: l,
      elements: s,
      middlewareData: c
    } = t, {
      element: d,
      padding: o = 0
    } = Di(e, t) || {};
    if (d == null)
      return {};
    const u = Y3(o), f = {
      x: n,
      y: a
    }, p = Yp(i), U = Gp(p), m = await l.getDimensions(d), g = p === "y", b = g ? "top" : "left", v = g ? "bottom" : "right", x = g ? "clientHeight" : "clientWidth", y = r.reference[U] + r.reference[p] - f[p] - r.floating[U], E = f[p] - r.reference[p], S = await (l.getOffsetParent == null ? void 0 : l.getOffsetParent(d));
    let w = S ? S[x] : 0;
    (!w || !await (l.isElement == null ? void 0 : l.isElement(S))) && (w = s.floating[x] || r.floating[U]);
    const M = y / 2 - E / 2, I = w / 2 - m[U] / 2 - 1, T = gr(u[b], I), _ = gr(u[v], I), A = T, D = w - m[U] - _, P = w / 2 - m[U] / 2 + M, N = V1(A, P, D), $ = !c.arrow && Cs(i) != null && P !== N && r.reference[U] / 2 - (P < A ? T : _) - m[U] / 2 < 0, R = $ ? P < A ? P - A : P - D : 0;
    return {
      [p]: f[p] + R,
      data: {
        [p]: N,
        centerOffset: P - N - R,
        ...$ && {
          alignmentOffset: R
        }
      },
      reset: $
    };
  }
}), c$ = function(e) {
  return e === void 0 && (e = {}), {
    name: "flip",
    options: e,
    async fn(t) {
      var n, a;
      const {
        placement: i,
        middlewareData: r,
        rects: l,
        initialPlacement: s,
        platform: c,
        elements: d
      } = t, {
        mainAxis: o = !0,
        crossAxis: u = !0,
        fallbackPlacements: f,
        fallbackStrategy: p = "bestFit",
        fallbackAxisSideDirection: U = "none",
        flipAlignment: m = !0,
        ...g
      } = Di(e, t);
      if ((n = r.arrow) != null && n.alignmentOffset)
        return {};
      const b = Li(i), v = Wa(s), x = Li(s) === s, y = await (c.isRTL == null ? void 0 : c.isRTL(d.floating)), E = f || (x || !m ? [wu(s)] : a$(s)), S = U !== "none";
      !f && S && E.push(...r$(s, m, U, y));
      const w = [s, ...E], M = await ec(t, g), I = [];
      let T = ((a = r.flip) == null ? void 0 : a.overflows) || [];
      if (o && I.push(M[b]), u) {
        const P = n$(i, l, y);
        I.push(M[P[0]], M[P[1]]);
      }
      if (T = [...T, {
        placement: i,
        overflows: I
      }], !I.every((P) => P <= 0)) {
        var _, A;
        const P = (((_ = r.flip) == null ? void 0 : _.index) || 0) + 1, N = w[P];
        if (N && (!(u === "alignment" ? v !== Wa(N) : !1) || // We leave the current main axis only if every placement on that axis
        // overflows the main axis.
        T.every((V) => V.overflows[0] > 0 && Wa(V.placement) === v)))
          return {
            data: {
              index: P,
              overflows: T
            },
            reset: {
              placement: N
            }
          };
        let $ = (A = T.filter((R) => R.overflows[0] <= 0).sort((R, V) => R.overflows[1] - V.overflows[1])[0]) == null ? void 0 : A.placement;
        if (!$)
          switch (p) {
            case "bestFit": {
              var D;
              const R = (D = T.filter((V) => {
                if (S) {
                  const O = Wa(V.placement);
                  return O === v || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  O === "y";
                }
                return !0;
              }).map((V) => [V.placement, V.overflows.filter((O) => O > 0).reduce((O, G) => O + G, 0)]).sort((V, O) => V[1] - O[1])[0]) == null ? void 0 : D[0];
              R && ($ = R);
              break;
            }
            case "initialPlacement":
              $ = s;
              break;
          }
        if (i !== $)
          return {
            reset: {
              placement: $
            }
          };
      }
      return {};
    }
  };
};
function Xg(e, t) {
  return {
    top: e.top - t.height,
    right: e.right - t.width,
    bottom: e.bottom - t.height,
    left: e.left - t.width
  };
}
function Wg(e) {
  return QO.some((t) => e[t] >= 0);
}
const d$ = function(e) {
  return e === void 0 && (e = {}), {
    name: "hide",
    options: e,
    async fn(t) {
      const {
        rects: n
      } = t, {
        strategy: a = "referenceHidden",
        ...i
      } = Di(e, t);
      switch (a) {
        case "referenceHidden": {
          const r = await ec(t, {
            ...i,
            elementContext: "reference"
          }), l = Xg(r, n.reference);
          return {
            data: {
              referenceHiddenOffsets: l,
              referenceHidden: Wg(l)
            }
          };
        }
        case "escaped": {
          const r = await ec(t, {
            ...i,
            altBoundary: !0
          }), l = Xg(r, n.floating);
          return {
            data: {
              escapedOffsets: l,
              escaped: Wg(l)
            }
          };
        }
        default:
          return {};
      }
    }
  };
};
async function u$(e, t) {
  const {
    placement: n,
    platform: a,
    elements: i
  } = e, r = await (a.isRTL == null ? void 0 : a.isRTL(i.floating)), l = Li(n), s = Cs(n), c = Wa(n) === "y", d = ["left", "top"].includes(l) ? -1 : 1, o = r && c ? -1 : 1, u = Di(t, e);
  let {
    mainAxis: f,
    crossAxis: p,
    alignmentAxis: U
  } = typeof u == "number" ? {
    mainAxis: u,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: u.mainAxis || 0,
    crossAxis: u.crossAxis || 0,
    alignmentAxis: u.alignmentAxis
  };
  return s && typeof U == "number" && (p = s === "end" ? U * -1 : U), c ? {
    x: p * o,
    y: f * d
  } : {
    x: f * d,
    y: p * o
  };
}
const h$ = function(e) {
  return e === void 0 && (e = 0), {
    name: "offset",
    options: e,
    async fn(t) {
      var n, a;
      const {
        x: i,
        y: r,
        placement: l,
        middlewareData: s
      } = t, c = await u$(t, e);
      return l === ((n = s.offset) == null ? void 0 : n.placement) && (a = s.arrow) != null && a.alignmentOffset ? {} : {
        x: i + c.x,
        y: r + c.y,
        data: {
          ...c,
          placement: l
        }
      };
    }
  };
}, f$ = function(e) {
  return e === void 0 && (e = {}), {
    name: "shift",
    options: e,
    async fn(t) {
      const {
        x: n,
        y: a,
        placement: i
      } = t, {
        mainAxis: r = !0,
        crossAxis: l = !1,
        limiter: s = {
          fn: (g) => {
            let {
              x: b,
              y: v
            } = g;
            return {
              x: b,
              y: v
            };
          }
        },
        ...c
      } = Di(e, t), d = {
        x: n,
        y: a
      }, o = await ec(t, c), u = Wa(Li(i)), f = Vp(u);
      let p = d[f], U = d[u];
      if (r) {
        const g = f === "y" ? "top" : "left", b = f === "y" ? "bottom" : "right", v = p + o[g], x = p - o[b];
        p = V1(v, p, x);
      }
      if (l) {
        const g = u === "y" ? "top" : "left", b = u === "y" ? "bottom" : "right", v = U + o[g], x = U - o[b];
        U = V1(v, U, x);
      }
      const m = s.fn({
        ...t,
        [f]: p,
        [u]: U
      });
      return {
        ...m,
        data: {
          x: m.x - n,
          y: m.y - a,
          enabled: {
            [f]: r,
            [u]: l
          }
        }
      };
    }
  };
}, p$ = function(e) {
  return e === void 0 && (e = {}), {
    options: e,
    fn(t) {
      const {
        x: n,
        y: a,
        placement: i,
        rects: r,
        middlewareData: l
      } = t, {
        offset: s = 0,
        mainAxis: c = !0,
        crossAxis: d = !0
      } = Di(e, t), o = {
        x: n,
        y: a
      }, u = Wa(i), f = Vp(u);
      let p = o[f], U = o[u];
      const m = Di(s, t), g = typeof m == "number" ? {
        mainAxis: m,
        crossAxis: 0
      } : {
        mainAxis: 0,
        crossAxis: 0,
        ...m
      };
      if (c) {
        const x = f === "y" ? "height" : "width", y = r.reference[f] - r.floating[x] + g.mainAxis, E = r.reference[f] + r.reference[x] - g.mainAxis;
        p < y ? p = y : p > E && (p = E);
      }
      if (d) {
        var b, v;
        const x = f === "y" ? "width" : "height", y = ["top", "left"].includes(Li(i)), E = r.reference[u] - r.floating[x] + (y && ((b = l.offset) == null ? void 0 : b[u]) || 0) + (y ? 0 : g.crossAxis), S = r.reference[u] + r.reference[x] + (y ? 0 : ((v = l.offset) == null ? void 0 : v[u]) || 0) - (y ? g.crossAxis : 0);
        U < E ? U = E : U > S && (U = S);
      }
      return {
        [f]: p,
        [u]: U
      };
    }
  };
}, U$ = function(e) {
  return e === void 0 && (e = {}), {
    name: "size",
    options: e,
    async fn(t) {
      var n, a;
      const {
        placement: i,
        rects: r,
        platform: l,
        elements: s
      } = t, {
        apply: c = () => {
        },
        ...d
      } = Di(e, t), o = await ec(t, d), u = Li(i), f = Cs(i), p = Wa(i) === "y", {
        width: U,
        height: m
      } = r.floating;
      let g, b;
      u === "top" || u === "bottom" ? (g = u, b = f === (await (l.isRTL == null ? void 0 : l.isRTL(s.floating)) ? "start" : "end") ? "left" : "right") : (b = u, g = f === "end" ? "top" : "bottom");
      const v = m - o.top - o.bottom, x = U - o.left - o.right, y = gr(m - o[g], v), E = gr(U - o[b], x), S = !t.middlewareData.shift;
      let w = y, M = E;
      if ((n = t.middlewareData.shift) != null && n.enabled.x && (M = x), (a = t.middlewareData.shift) != null && a.enabled.y && (w = v), S && !f) {
        const T = An(o.left, 0), _ = An(o.right, 0), A = An(o.top, 0), D = An(o.bottom, 0);
        p ? M = U - 2 * (T !== 0 || _ !== 0 ? T + _ : An(o.left, o.right)) : w = m - 2 * (A !== 0 || D !== 0 ? A + D : An(o.top, o.bottom));
      }
      await c({
        ...t,
        availableWidth: M,
        availableHeight: w
      });
      const I = await l.getDimensions(s.floating);
      return U !== I.width || m !== I.height ? {
        reset: {
          rects: !0
        }
      } : {};
    }
  };
};
function fh() {
  return typeof window < "u";
}
function Is(e) {
  return Z3(e) ? (e.nodeName || "").toLowerCase() : "#document";
}
function Ln(e) {
  var t;
  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function ai(e) {
  var t;
  return (t = (Z3(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;
}
function Z3(e) {
  return fh() ? e instanceof Node || e instanceof Ln(e).Node : !1;
}
function Ea(e) {
  return fh() ? e instanceof Element || e instanceof Ln(e).Element : !1;
}
function ni(e) {
  return fh() ? e instanceof HTMLElement || e instanceof Ln(e).HTMLElement : !1;
}
function Vg(e) {
  return !fh() || typeof ShadowRoot > "u" ? !1 : e instanceof ShadowRoot || e instanceof Ln(e).ShadowRoot;
}
function yc(e) {
  const {
    overflow: t,
    overflowX: n,
    overflowY: a,
    display: i
  } = Sa(e);
  return /auto|scroll|overlay|hidden|clip/.test(t + a + n) && !["inline", "contents"].includes(i);
}
function m$(e) {
  return ["table", "td", "th"].includes(Is(e));
}
function ph(e) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return e.matches(t);
    } catch {
      return !1;
    }
  });
}
function Zp(e) {
  const t = Kp(), n = Ea(e) ? Sa(e) : e;
  return ["transform", "translate", "scale", "rotate", "perspective"].some((a) => n[a] ? n[a] !== "none" : !1) || (n.containerType ? n.containerType !== "normal" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== "none" : !1) || !t && (n.filter ? n.filter !== "none" : !1) || ["transform", "translate", "scale", "rotate", "perspective", "filter"].some((a) => (n.willChange || "").includes(a)) || ["paint", "layout", "strict", "content"].some((a) => (n.contain || "").includes(a));
}
function g$(e) {
  let t = br(e);
  for (; ni(t) && !ms(t); ) {
    if (Zp(t))
      return t;
    if (ph(t))
      return null;
    t = br(t);
  }
  return null;
}
function Kp() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
function ms(e) {
  return ["html", "body", "#document"].includes(Is(e));
}
function Sa(e) {
  return Ln(e).getComputedStyle(e);
}
function Uh(e) {
  return Ea(e) ? {
    scrollLeft: e.scrollLeft,
    scrollTop: e.scrollTop
  } : {
    scrollLeft: e.scrollX,
    scrollTop: e.scrollY
  };
}
function br(e) {
  if (Is(e) === "html")
    return e;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    e.assignedSlot || // DOM Element detected.
    e.parentNode || // ShadowRoot detected.
    Vg(e) && e.host || // Fallback.
    ai(e)
  );
  return Vg(t) ? t.host : t;
}
function K3(e) {
  const t = br(e);
  return ms(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : ni(t) && yc(t) ? t : K3(t);
}
function tc(e, t, n) {
  var a;
  t === void 0 && (t = []), n === void 0 && (n = !0);
  const i = K3(e), r = i === ((a = e.ownerDocument) == null ? void 0 : a.body), l = Ln(i);
  if (r) {
    const s = Y1(l);
    return t.concat(l, l.visualViewport || [], yc(i) ? i : [], s && n ? tc(s) : []);
  }
  return t.concat(i, tc(i, [], n));
}
function Y1(e) {
  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;
}
function q3(e) {
  const t = Sa(e);
  let n = parseFloat(t.width) || 0, a = parseFloat(t.height) || 0;
  const i = ni(e), r = i ? e.offsetWidth : n, l = i ? e.offsetHeight : a, s = yu(n) !== r || yu(a) !== l;
  return s && (n = r, a = l), {
    width: n,
    height: a,
    $: s
  };
}
function qp(e) {
  return Ea(e) ? e : e.contextElement;
}
function Yl(e) {
  const t = qp(e);
  if (!ni(t))
    return Ya(1);
  const n = t.getBoundingClientRect(), {
    width: a,
    height: i,
    $: r
  } = q3(t);
  let l = (r ? yu(n.width) : n.width) / a, s = (r ? yu(n.height) : n.height) / i;
  return (!l || !Number.isFinite(l)) && (l = 1), (!s || !Number.isFinite(s)) && (s = 1), {
    x: l,
    y: s
  };
}
const b$ = /* @__PURE__ */ Ya(0);
function J3(e) {
  const t = Ln(e);
  return !Kp() || !t.visualViewport ? b$ : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
function v$(e, t, n) {
  return t === void 0 && (t = !1), !n || t && n !== Ln(e) ? !1 : t;
}
function hl(e, t, n, a) {
  t === void 0 && (t = !1), n === void 0 && (n = !1);
  const i = e.getBoundingClientRect(), r = qp(e);
  let l = Ya(1);
  t && (a ? Ea(a) && (l = Yl(a)) : l = Yl(e));
  const s = v$(r, n, a) ? J3(r) : Ya(0);
  let c = (i.left + s.x) / l.x, d = (i.top + s.y) / l.y, o = i.width / l.x, u = i.height / l.y;
  if (r) {
    const f = Ln(r), p = a && Ea(a) ? Ln(a) : a;
    let U = f, m = Y1(U);
    for (; m && a && p !== U; ) {
      const g = Yl(m), b = m.getBoundingClientRect(), v = Sa(m), x = b.left + (m.clientLeft + parseFloat(v.paddingLeft)) * g.x, y = b.top + (m.clientTop + parseFloat(v.paddingTop)) * g.y;
      c *= g.x, d *= g.y, o *= g.x, u *= g.y, c += x, d += y, U = Ln(m), m = Y1(U);
    }
  }
  return Eu({
    width: o,
    height: u,
    x: c,
    y: d
  });
}
function Jp(e, t) {
  const n = Uh(e).scrollLeft;
  return t ? t.left + n : hl(ai(e)).left + n;
}
function Q3(e, t, n) {
  n === void 0 && (n = !1);
  const a = e.getBoundingClientRect(), i = a.left + t.scrollLeft - (n ? 0 : (
    // RTL <body> scrollbar.
    Jp(e, a)
  )), r = a.top + t.scrollTop;
  return {
    x: i,
    y: r
  };
}
function x$(e) {
  let {
    elements: t,
    rect: n,
    offsetParent: a,
    strategy: i
  } = e;
  const r = i === "fixed", l = ai(a), s = t ? ph(t.floating) : !1;
  if (a === l || s && r)
    return n;
  let c = {
    scrollLeft: 0,
    scrollTop: 0
  }, d = Ya(1);
  const o = Ya(0), u = ni(a);
  if ((u || !u && !r) && ((Is(a) !== "body" || yc(l)) && (c = Uh(a)), ni(a))) {
    const p = hl(a);
    d = Yl(a), o.x = p.x + a.clientLeft, o.y = p.y + a.clientTop;
  }
  const f = l && !u && !r ? Q3(l, c, !0) : Ya(0);
  return {
    width: n.width * d.x,
    height: n.height * d.y,
    x: n.x * d.x - c.scrollLeft * d.x + o.x + f.x,
    y: n.y * d.y - c.scrollTop * d.y + o.y + f.y
  };
}
function y$(e) {
  return Array.from(e.getClientRects());
}
function w$(e) {
  const t = ai(e), n = Uh(e), a = e.ownerDocument.body, i = An(t.scrollWidth, t.clientWidth, a.scrollWidth, a.clientWidth), r = An(t.scrollHeight, t.clientHeight, a.scrollHeight, a.clientHeight);
  let l = -n.scrollLeft + Jp(e);
  const s = -n.scrollTop;
  return Sa(a).direction === "rtl" && (l += An(t.clientWidth, a.clientWidth) - i), {
    width: i,
    height: r,
    x: l,
    y: s
  };
}
function E$(e, t) {
  const n = Ln(e), a = ai(e), i = n.visualViewport;
  let r = a.clientWidth, l = a.clientHeight, s = 0, c = 0;
  if (i) {
    r = i.width, l = i.height;
    const d = Kp();
    (!d || d && t === "fixed") && (s = i.offsetLeft, c = i.offsetTop);
  }
  return {
    width: r,
    height: l,
    x: s,
    y: c
  };
}
function S$(e, t) {
  const n = hl(e, !0, t === "fixed"), a = n.top + e.clientTop, i = n.left + e.clientLeft, r = ni(e) ? Yl(e) : Ya(1), l = e.clientWidth * r.x, s = e.clientHeight * r.y, c = i * r.x, d = a * r.y;
  return {
    width: l,
    height: s,
    x: c,
    y: d
  };
}
function Gg(e, t, n) {
  let a;
  if (t === "viewport")
    a = E$(e, n);
  else if (t === "document")
    a = w$(ai(e));
  else if (Ea(t))
    a = S$(t, n);
  else {
    const i = J3(e);
    a = {
      x: t.x - i.x,
      y: t.y - i.y,
      width: t.width,
      height: t.height
    };
  }
  return Eu(a);
}
function e4(e, t) {
  const n = br(e);
  return n === t || !Ea(n) || ms(n) ? !1 : Sa(n).position === "fixed" || e4(n, t);
}
function k$(e, t) {
  const n = t.get(e);
  if (n)
    return n;
  let a = tc(e, [], !1).filter((s) => Ea(s) && Is(s) !== "body"), i = null;
  const r = Sa(e).position === "fixed";
  let l = r ? br(e) : e;
  for (; Ea(l) && !ms(l); ) {
    const s = Sa(l), c = Zp(l);
    !c && s.position === "fixed" && (i = null), (r ? !c && !i : !c && s.position === "static" && !!i && ["absolute", "fixed"].includes(i.position) || yc(l) && !c && e4(e, l)) ? a = a.filter((o) => o !== l) : i = s, l = br(l);
  }
  return t.set(e, a), a;
}
function M$(e) {
  let {
    element: t,
    boundary: n,
    rootBoundary: a,
    strategy: i
  } = e;
  const l = [...n === "clippingAncestors" ? ph(t) ? [] : k$(t, this._c) : [].concat(n), a], s = l[0], c = l.reduce((d, o) => {
    const u = Gg(t, o, i);
    return d.top = An(u.top, d.top), d.right = gr(u.right, d.right), d.bottom = gr(u.bottom, d.bottom), d.left = An(u.left, d.left), d;
  }, Gg(t, s, i));
  return {
    width: c.right - c.left,
    height: c.bottom - c.top,
    x: c.left,
    y: c.top
  };
}
function C$(e) {
  const {
    width: t,
    height: n
  } = q3(e);
  return {
    width: t,
    height: n
  };
}
function I$(e, t, n) {
  const a = ni(t), i = ai(t), r = n === "fixed", l = hl(e, !0, r, t);
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const c = Ya(0);
  function d() {
    c.x = Jp(i);
  }
  if (a || !a && !r)
    if ((Is(t) !== "body" || yc(i)) && (s = Uh(t)), a) {
      const p = hl(t, !0, r, t);
      c.x = p.x + t.clientLeft, c.y = p.y + t.clientTop;
    } else i && d();
  r && !a && i && d();
  const o = i && !a && !r ? Q3(i, s) : Ya(0), u = l.left + s.scrollLeft - c.x - o.x, f = l.top + s.scrollTop - c.y - o.y;
  return {
    x: u,
    y: f,
    width: l.width,
    height: l.height
  };
}
function yf(e) {
  return Sa(e).position === "static";
}
function Yg(e, t) {
  if (!ni(e) || Sa(e).position === "fixed")
    return null;
  if (t)
    return t(e);
  let n = e.offsetParent;
  return ai(e) === n && (n = n.ownerDocument.body), n;
}
function t4(e, t) {
  const n = Ln(e);
  if (ph(e))
    return n;
  if (!ni(e)) {
    let i = br(e);
    for (; i && !ms(i); ) {
      if (Ea(i) && !yf(i))
        return i;
      i = br(i);
    }
    return n;
  }
  let a = Yg(e, t);
  for (; a && m$(a) && yf(a); )
    a = Yg(a, t);
  return a && ms(a) && yf(a) && !Zp(a) ? n : a || g$(e) || n;
}
const T$ = async function(e) {
  const t = this.getOffsetParent || t4, n = this.getDimensions, a = await n(e.floating);
  return {
    reference: I$(e.reference, await t(e.floating), e.strategy),
    floating: {
      x: 0,
      y: 0,
      width: a.width,
      height: a.height
    }
  };
};
function _$(e) {
  return Sa(e).direction === "rtl";
}
const A$ = {
  convertOffsetParentRelativeRectToViewportRelativeRect: x$,
  getDocumentElement: ai,
  getClippingRect: M$,
  getOffsetParent: t4,
  getElementRects: T$,
  getClientRects: y$,
  getDimensions: C$,
  getScale: Yl,
  isElement: Ea,
  isRTL: _$
};
function n4(e, t) {
  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;
}
function j$(e, t) {
  let n = null, a;
  const i = ai(e);
  function r() {
    var s;
    clearTimeout(a), (s = n) == null || s.disconnect(), n = null;
  }
  function l(s, c) {
    s === void 0 && (s = !1), c === void 0 && (c = 1), r();
    const d = e.getBoundingClientRect(), {
      left: o,
      top: u,
      width: f,
      height: p
    } = d;
    if (s || t(), !f || !p)
      return;
    const U = Yc(u), m = Yc(i.clientWidth - (o + f)), g = Yc(i.clientHeight - (u + p)), b = Yc(o), x = {
      rootMargin: -U + "px " + -m + "px " + -g + "px " + -b + "px",
      threshold: An(0, gr(1, c)) || 1
    };
    let y = !0;
    function E(S) {
      const w = S[0].intersectionRatio;
      if (w !== c) {
        if (!y)
          return l();
        w ? l(!1, w) : a = setTimeout(() => {
          l(!1, 1e-7);
        }, 1e3);
      }
      w === 1 && !n4(d, e.getBoundingClientRect()) && l(), y = !1;
    }
    try {
      n = new IntersectionObserver(E, {
        ...x,
        // Handle <iframe>s
        root: i.ownerDocument
      });
    } catch {
      n = new IntersectionObserver(E, x);
    }
    n.observe(e);
  }
  return l(!0), r;
}
function D$(e, t, n, a) {
  a === void 0 && (a = {});
  const {
    ancestorScroll: i = !0,
    ancestorResize: r = !0,
    elementResize: l = typeof ResizeObserver == "function",
    layoutShift: s = typeof IntersectionObserver == "function",
    animationFrame: c = !1
  } = a, d = qp(e), o = i || r ? [...d ? tc(d) : [], ...tc(t)] : [];
  o.forEach((b) => {
    i && b.addEventListener("scroll", n, {
      passive: !0
    }), r && b.addEventListener("resize", n);
  });
  const u = d && s ? j$(d, n) : null;
  let f = -1, p = null;
  l && (p = new ResizeObserver((b) => {
    let [v] = b;
    v && v.target === d && p && (p.unobserve(t), cancelAnimationFrame(f), f = requestAnimationFrame(() => {
      var x;
      (x = p) == null || x.observe(t);
    })), n();
  }), d && !c && p.observe(d), p.observe(t));
  let U, m = c ? hl(e) : null;
  c && g();
  function g() {
    const b = hl(e);
    m && !n4(m, b) && n(), m = b, U = requestAnimationFrame(g);
  }
  return n(), () => {
    var b;
    o.forEach((v) => {
      i && v.removeEventListener("scroll", n), r && v.removeEventListener("resize", n);
    }), u == null || u(), (b = p) == null || b.disconnect(), p = null, c && cancelAnimationFrame(U);
  };
}
const L$ = h$, R$ = f$, P$ = c$, N$ = U$, O$ = d$, Zg = o$, $$ = p$, F$ = (e, t, n) => {
  const a = /* @__PURE__ */ new Map(), i = {
    platform: A$,
    ...n
  }, r = {
    ...i.platform,
    _c: a
  };
  return s$(e, t, {
    ...i,
    platform: r
  });
};
var z$ = typeof document < "u", B$ = function() {
}, Td = z$ ? Mn : B$;
function Su(e, t) {
  if (e === t)
    return !0;
  if (typeof e != typeof t)
    return !1;
  if (typeof e == "function" && e.toString() === t.toString())
    return !0;
  let n, a, i;
  if (e && t && typeof e == "object") {
    if (Array.isArray(e)) {
      if (n = e.length, n !== t.length) return !1;
      for (a = n; a-- !== 0; )
        if (!Su(e[a], t[a]))
          return !1;
      return !0;
    }
    if (i = Object.keys(e), n = i.length, n !== Object.keys(t).length)
      return !1;
    for (a = n; a-- !== 0; )
      if (!{}.hasOwnProperty.call(t, i[a]))
        return !1;
    for (a = n; a-- !== 0; ) {
      const r = i[a];
      if (!(r === "_owner" && e.$$typeof) && !Su(e[r], t[r]))
        return !1;
    }
    return !0;
  }
  return e !== e && t !== t;
}
function a4(e) {
  return typeof window > "u" ? 1 : (e.ownerDocument.defaultView || window).devicePixelRatio || 1;
}
function Kg(e, t) {
  const n = a4(e);
  return Math.round(t * n) / n;
}
function wf(e) {
  const t = z.useRef(e);
  return Td(() => {
    t.current = e;
  }), t;
}
function H$(e) {
  e === void 0 && (e = {});
  const {
    placement: t = "bottom",
    strategy: n = "absolute",
    middleware: a = [],
    platform: i,
    elements: {
      reference: r,
      floating: l
    } = {},
    transform: s = !0,
    whileElementsMounted: c,
    open: d
  } = e, [o, u] = z.useState({
    x: 0,
    y: 0,
    strategy: n,
    placement: t,
    middlewareData: {},
    isPositioned: !1
  }), [f, p] = z.useState(a);
  Su(f, a) || p(a);
  const [U, m] = z.useState(null), [g, b] = z.useState(null), v = z.useCallback((V) => {
    V !== S.current && (S.current = V, m(V));
  }, []), x = z.useCallback((V) => {
    V !== w.current && (w.current = V, b(V));
  }, []), y = r || U, E = l || g, S = z.useRef(null), w = z.useRef(null), M = z.useRef(o), I = c != null, T = wf(c), _ = wf(i), A = wf(d), D = z.useCallback(() => {
    if (!S.current || !w.current)
      return;
    const V = {
      placement: t,
      strategy: n,
      middleware: f
    };
    _.current && (V.platform = _.current), F$(S.current, w.current, V).then((O) => {
      const G = {
        ...O,
        // The floating element's position may be recomputed while it's closed
        // but still mounted (such as when transitioning out). To ensure
        // `isPositioned` will be `false` initially on the next open, avoid
        // setting it to `true` when `open === false` (must be specified).
        isPositioned: A.current !== !1
      };
      P.current && !Su(M.current, G) && (M.current = G, D5.flushSync(() => {
        u(G);
      }));
    });
  }, [f, t, n, _, A]);
  Td(() => {
    d === !1 && M.current.isPositioned && (M.current.isPositioned = !1, u((V) => ({
      ...V,
      isPositioned: !1
    })));
  }, [d]);
  const P = z.useRef(!1);
  Td(() => (P.current = !0, () => {
    P.current = !1;
  }), []), Td(() => {
    if (y && (S.current = y), E && (w.current = E), y && E) {
      if (T.current)
        return T.current(y, E, D);
      D();
    }
  }, [y, E, D, T, I]);
  const N = z.useMemo(() => ({
    reference: S,
    floating: w,
    setReference: v,
    setFloating: x
  }), [v, x]), $ = z.useMemo(() => ({
    reference: y,
    floating: E
  }), [y, E]), R = z.useMemo(() => {
    const V = {
      position: n,
      left: 0,
      top: 0
    };
    if (!$.floating)
      return V;
    const O = Kg($.floating, o.x), G = Kg($.floating, o.y);
    return s ? {
      ...V,
      transform: "translate(" + O + "px, " + G + "px)",
      ...a4($.floating) >= 1.5 && {
        willChange: "transform"
      }
    } : {
      position: n,
      left: O,
      top: G
    };
  }, [n, s, $.floating, o.x, o.y]);
  return z.useMemo(() => ({
    ...o,
    update: D,
    refs: N,
    elements: $,
    floatingStyles: R
  }), [o, D, N, $, R]);
}
const X$ = (e) => {
  function t(n) {
    return {}.hasOwnProperty.call(n, "current");
  }
  return {
    name: "arrow",
    options: e,
    fn(n) {
      const {
        element: a,
        padding: i
      } = typeof e == "function" ? e(n) : e;
      return a && t(a) ? a.current != null ? Zg({
        element: a.current,
        padding: i
      }).fn(n) : {} : a ? Zg({
        element: a,
        padding: i
      }).fn(n) : {};
    }
  };
}, W$ = (e, t) => ({
  ...L$(e),
  options: [e, t]
}), V$ = (e, t) => ({
  ...R$(e),
  options: [e, t]
}), G$ = (e, t) => ({
  ...$$(e),
  options: [e, t]
}), Y$ = (e, t) => ({
  ...P$(e),
  options: [e, t]
}), Z$ = (e, t) => ({
  ...N$(e),
  options: [e, t]
}), K$ = (e, t) => ({
  ...O$(e),
  options: [e, t]
}), q$ = (e, t) => ({
  ...X$(e),
  options: [e, t]
});
var J$ = "Arrow", i4 = z.forwardRef((e, t) => {
  const { children: n, width: a = 10, height: i = 5, ...r } = e;
  return /* @__PURE__ */ h.jsx(
    Oi.svg,
    {
      ...r,
      ref: t,
      width: a,
      height: i,
      viewBox: "0 0 30 10",
      preserveAspectRatio: "none",
      children: e.asChild ? n : /* @__PURE__ */ h.jsx("polygon", { points: "0,0 30,0 15,10" })
    }
  );
});
i4.displayName = J$;
var Q$ = i4;
function eF(e) {
  const [t, n] = z.useState(void 0);
  return ul(() => {
    if (e) {
      n({ width: e.offsetWidth, height: e.offsetHeight });
      const a = new ResizeObserver((i) => {
        if (!Array.isArray(i) || !i.length)
          return;
        const r = i[0];
        let l, s;
        if ("borderBoxSize" in r) {
          const c = r.borderBoxSize, d = Array.isArray(c) ? c[0] : c;
          l = d.inlineSize, s = d.blockSize;
        } else
          l = e.offsetWidth, s = e.offsetHeight;
        n({ width: l, height: s });
      });
      return a.observe(e, { box: "border-box" }), () => a.unobserve(e);
    } else
      n(void 0);
  }, [e]), t;
}
var Qp = "Popper", [r4, l4] = B3(Qp), [tF, s4] = r4(Qp), o4 = (e) => {
  const { __scopePopper: t, children: n } = e, [a, i] = z.useState(null);
  return /* @__PURE__ */ h.jsx(tF, { scope: t, anchor: a, onAnchorChange: i, children: n });
};
o4.displayName = Qp;
var c4 = "PopperAnchor", d4 = z.forwardRef(
  (e, t) => {
    const { __scopePopper: n, virtualRef: a, ...i } = e, r = s4(c4, n), l = z.useRef(null), s = wr(t, l);
    return z.useEffect(() => {
      r.onAnchorChange((a == null ? void 0 : a.current) || l.current);
    }), a ? null : /* @__PURE__ */ h.jsx(Oi.div, { ...i, ref: s });
  }
);
d4.displayName = c4;
var eU = "PopperContent", [nF, aF] = r4(eU), u4 = z.forwardRef(
  (e, t) => {
    var Ne, It, Yt, Ae, Oe, yt;
    const {
      __scopePopper: n,
      side: a = "bottom",
      sideOffset: i = 0,
      align: r = "center",
      alignOffset: l = 0,
      arrowPadding: s = 0,
      avoidCollisions: c = !0,
      collisionBoundary: d = [],
      collisionPadding: o = 0,
      sticky: u = "partial",
      hideWhenDetached: f = !1,
      updatePositionStrategy: p = "optimized",
      onPlaced: U,
      ...m
    } = e, g = s4(eU, n), [b, v] = z.useState(null), x = wr(t, (Sr) => v(Sr)), [y, E] = z.useState(null), S = eF(y), w = (S == null ? void 0 : S.width) ?? 0, M = (S == null ? void 0 : S.height) ?? 0, I = a + (r !== "center" ? "-" + r : ""), T = typeof o == "number" ? o : { top: 0, right: 0, bottom: 0, left: 0, ...o }, _ = Array.isArray(d) ? d : [d], A = _.length > 0, D = {
      padding: T,
      boundary: _.filter(rF),
      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries
      altBoundary: A
    }, { refs: P, floatingStyles: N, placement: $, isPositioned: R, middlewareData: V } = H$({
      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues
      strategy: "fixed",
      placement: I,
      whileElementsMounted: (...Sr) => D$(...Sr, {
        animationFrame: p === "always"
      }),
      elements: {
        reference: g.anchor
      },
      middleware: [
        W$({ mainAxis: i + M, alignmentAxis: l }),
        c && V$({
          mainAxis: !0,
          crossAxis: !1,
          limiter: u === "partial" ? G$() : void 0,
          ...D
        }),
        c && Y$({ ...D }),
        Z$({
          ...D,
          apply: ({ elements: Sr, rects: Ds, availableWidth: vl, availableHeight: kr }) => {
            const { width: Ma, height: hx } = Ds.reference, Ic = Sr.floating.style;
            Ic.setProperty("--radix-popper-available-width", `${vl}px`), Ic.setProperty("--radix-popper-available-height", `${kr}px`), Ic.setProperty("--radix-popper-anchor-width", `${Ma}px`), Ic.setProperty("--radix-popper-anchor-height", `${hx}px`);
          }
        }),
        y && q$({ element: y, padding: s }),
        lF({ arrowWidth: w, arrowHeight: M }),
        f && K$({ strategy: "referenceHidden", ...D })
      ]
    }), [O, G] = p4($), ae = mr(U);
    ul(() => {
      R && (ae == null || ae());
    }, [R, ae]);
    const he = (Ne = V.arrow) == null ? void 0 : Ne.x, ce = (It = V.arrow) == null ? void 0 : It.y, Be = ((Yt = V.arrow) == null ? void 0 : Yt.centerOffset) !== 0, [He, Xe] = z.useState();
    return ul(() => {
      b && Xe(window.getComputedStyle(b).zIndex);
    }, [b]), /* @__PURE__ */ h.jsx(
      "div",
      {
        ref: P.setFloating,
        "data-radix-popper-content-wrapper": "",
        style: {
          ...N,
          transform: R ? N.transform : "translate(0, -200%)",
          // keep off the page when measuring
          minWidth: "max-content",
          zIndex: He,
          "--radix-popper-transform-origin": [
            (Ae = V.transformOrigin) == null ? void 0 : Ae.x,
            (Oe = V.transformOrigin) == null ? void 0 : Oe.y
          ].join(" "),
          // hide the content if using the hide middleware and should be hidden
          // set visibility to hidden and disable pointer events so the UI behaves
          // as if the PopperContent isn't there at all
          ...((yt = V.hide) == null ? void 0 : yt.referenceHidden) && {
            visibility: "hidden",
            pointerEvents: "none"
          }
        },
        dir: e.dir,
        children: /* @__PURE__ */ h.jsx(
          nF,
          {
            scope: n,
            placedSide: O,
            onArrowChange: E,
            arrowX: he,
            arrowY: ce,
            shouldHideArrow: Be,
            children: /* @__PURE__ */ h.jsx(
              Oi.div,
              {
                "data-side": O,
                "data-align": G,
                ...m,
                ref: x,
                style: {
                  ...m.style,
                  // if the PopperContent hasn't been placed yet (not all measurements done)
                  // we prevent animations so that users's animation don't kick in too early referring wrong sides
                  animation: R ? void 0 : "none"
                }
              }
            )
          }
        )
      }
    );
  }
);
u4.displayName = eU;
var h4 = "PopperArrow", iF = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
}, f4 = z.forwardRef(function(t, n) {
  const { __scopePopper: a, ...i } = t, r = aF(h4, a), l = iF[r.placedSide];
  return (
    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)
    // doesn't report size as we'd expect on SVG elements.
    // it reports their bounding box which is effectively the largest path inside the SVG.
    /* @__PURE__ */ h.jsx(
      "span",
      {
        ref: r.onArrowChange,
        style: {
          position: "absolute",
          left: r.arrowX,
          top: r.arrowY,
          [l]: 0,
          transformOrigin: {
            top: "",
            right: "0 0",
            bottom: "center 0",
            left: "100% 0"
          }[r.placedSide],
          transform: {
            top: "translateY(100%)",
            right: "translateY(50%) rotate(90deg) translateX(-50%)",
            bottom: "rotate(180deg)",
            left: "translateY(50%) rotate(-90deg) translateX(50%)"
          }[r.placedSide],
          visibility: r.shouldHideArrow ? "hidden" : void 0
        },
        children: /* @__PURE__ */ h.jsx(
          Q$,
          {
            ...i,
            ref: n,
            style: {
              ...i.style,
              // ensures the element can be measured correctly (mostly for if SVG)
              display: "block"
            }
          }
        )
      }
    )
  );
});
f4.displayName = h4;
function rF(e) {
  return e !== null;
}
var lF = (e) => ({
  name: "transformOrigin",
  options: e,
  fn(t) {
    var g, b, v;
    const { placement: n, rects: a, middlewareData: i } = t, l = ((g = i.arrow) == null ? void 0 : g.centerOffset) !== 0, s = l ? 0 : e.arrowWidth, c = l ? 0 : e.arrowHeight, [d, o] = p4(n), u = { start: "0%", center: "50%", end: "100%" }[o], f = (((b = i.arrow) == null ? void 0 : b.x) ?? 0) + s / 2, p = (((v = i.arrow) == null ? void 0 : v.y) ?? 0) + c / 2;
    let U = "", m = "";
    return d === "bottom" ? (U = l ? u : `${f}px`, m = `${-c}px`) : d === "top" ? (U = l ? u : `${f}px`, m = `${a.floating.height + c}px`) : d === "right" ? (U = `${-c}px`, m = l ? u : `${p}px`) : d === "left" && (U = `${a.floating.width + c}px`, m = l ? u : `${p}px`), { data: { x: U, y: m } };
  }
});
function p4(e) {
  const [t, n = "center"] = e.split("-");
  return [t, n];
}
var sF = o4, U4 = d4, oF = u4, cF = f4, dF = "Portal", m4 = z.forwardRef((e, t) => {
  var s;
  const { container: n, ...a } = e, [i, r] = z.useState(!1);
  ul(() => r(!0), []);
  const l = n || i && ((s = globalThis == null ? void 0 : globalThis.document) == null ? void 0 : s.body);
  return l ? Mx.createPortal(/* @__PURE__ */ h.jsx(Oi.div, { ...a, ref: t }), l) : null;
});
m4.displayName = dF;
function uF(e, t) {
  return z.useReducer((n, a) => t[n][a] ?? n, e);
}
var tU = (e) => {
  const { present: t, children: n } = e, a = hF(t), i = typeof n == "function" ? n({ present: a.isPresent }) : z.Children.only(n), r = wr(a.ref, fF(i));
  return typeof n == "function" || a.isPresent ? z.cloneElement(i, { ref: r }) : null;
};
tU.displayName = "Presence";
function hF(e) {
  const [t, n] = z.useState(), a = z.useRef({}), i = z.useRef(e), r = z.useRef("none"), l = e ? "mounted" : "unmounted", [s, c] = uF(l, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return z.useEffect(() => {
    const d = Zc(a.current);
    r.current = s === "mounted" ? d : "none";
  }, [s]), ul(() => {
    const d = a.current, o = i.current;
    if (o !== e) {
      const f = r.current, p = Zc(d);
      e ? c("MOUNT") : p === "none" || (d == null ? void 0 : d.display) === "none" ? c("UNMOUNT") : c(o && f !== p ? "ANIMATION_OUT" : "UNMOUNT"), i.current = e;
    }
  }, [e, c]), ul(() => {
    if (t) {
      let d;
      const o = t.ownerDocument.defaultView ?? window, u = (p) => {
        const m = Zc(a.current).includes(p.animationName);
        if (p.target === t && m && (c("ANIMATION_END"), !i.current)) {
          const g = t.style.animationFillMode;
          t.style.animationFillMode = "forwards", d = o.setTimeout(() => {
            t.style.animationFillMode === "forwards" && (t.style.animationFillMode = g);
          });
        }
      }, f = (p) => {
        p.target === t && (r.current = Zc(a.current));
      };
      return t.addEventListener("animationstart", f), t.addEventListener("animationcancel", u), t.addEventListener("animationend", u), () => {
        o.clearTimeout(d), t.removeEventListener("animationstart", f), t.removeEventListener("animationcancel", u), t.removeEventListener("animationend", u);
      };
    } else
      c("ANIMATION_END");
  }, [t, c]), {
    isPresent: ["mounted", "unmountSuspended"].includes(s),
    ref: z.useCallback((d) => {
      d && (a.current = getComputedStyle(d)), n(d);
    }, [])
  };
}
function Zc(e) {
  return (e == null ? void 0 : e.animationName) || "none";
}
function fF(e) {
  var a, i;
  let t = (a = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : a.get, n = t && "isReactWarning" in t && t.isReactWarning;
  return n ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, n = t && "isReactWarning" in t && t.isReactWarning, n ? e.props.ref : e.props.ref || e.ref);
}
function pF({
  prop: e,
  defaultProp: t,
  onChange: n = () => {
  }
}) {
  const [a, i] = UF({ defaultProp: t, onChange: n }), r = e !== void 0, l = r ? e : a, s = mr(n), c = z.useCallback(
    (d) => {
      if (r) {
        const u = typeof d == "function" ? d(e) : d;
        u !== e && s(u);
      } else
        i(d);
    },
    [r, e, i, s]
  );
  return [l, c];
}
function UF({
  defaultProp: e,
  onChange: t
}) {
  const n = z.useState(e), [a] = n, i = z.useRef(a), r = mr(t);
  return z.useEffect(() => {
    i.current !== a && (r(a), i.current = a);
  }, [a, i, r]), n;
}
var mF = function(e) {
  if (typeof document > "u")
    return null;
  var t = Array.isArray(e) ? e[0] : e;
  return t.ownerDocument.body;
}, Cl = /* @__PURE__ */ new WeakMap(), Kc = /* @__PURE__ */ new WeakMap(), qc = {}, Ef = 0, g4 = function(e) {
  return e && (e.host || g4(e.parentNode));
}, gF = function(e, t) {
  return t.map(function(n) {
    if (e.contains(n))
      return n;
    var a = g4(n);
    return a && e.contains(a) ? a : (console.error("aria-hidden", n, "in not contained inside", e, ". Doing nothing"), null);
  }).filter(function(n) {
    return !!n;
  });
}, bF = function(e, t, n, a) {
  var i = gF(t, Array.isArray(e) ? e : [e]);
  qc[n] || (qc[n] = /* @__PURE__ */ new WeakMap());
  var r = qc[n], l = [], s = /* @__PURE__ */ new Set(), c = new Set(i), d = function(u) {
    !u || s.has(u) || (s.add(u), d(u.parentNode));
  };
  i.forEach(d);
  var o = function(u) {
    !u || c.has(u) || Array.prototype.forEach.call(u.children, function(f) {
      if (s.has(f))
        o(f);
      else
        try {
          var p = f.getAttribute(a), U = p !== null && p !== "false", m = (Cl.get(f) || 0) + 1, g = (r.get(f) || 0) + 1;
          Cl.set(f, m), r.set(f, g), l.push(f), m === 1 && U && Kc.set(f, !0), g === 1 && f.setAttribute(n, "true"), U || f.setAttribute(a, "true");
        } catch (b) {
          console.error("aria-hidden: cannot operate on ", f, b);
        }
    });
  };
  return o(t), s.clear(), Ef++, function() {
    l.forEach(function(u) {
      var f = Cl.get(u) - 1, p = r.get(u) - 1;
      Cl.set(u, f), r.set(u, p), f || (Kc.has(u) || u.removeAttribute(a), Kc.delete(u)), p || u.removeAttribute(n);
    }), Ef--, Ef || (Cl = /* @__PURE__ */ new WeakMap(), Cl = /* @__PURE__ */ new WeakMap(), Kc = /* @__PURE__ */ new WeakMap(), qc = {});
  };
}, vF = function(e, t, n) {
  n === void 0 && (n = "data-aria-hidden");
  var a = Array.from(Array.isArray(e) ? e : [e]), i = mF(e);
  return i ? (a.push.apply(a, Array.from(i.querySelectorAll("[aria-live], script"))), bF(a, i, n, "aria-hidden")) : function() {
    return null;
  };
}, Xa = function() {
  return Xa = Object.assign || function(t) {
    for (var n, a = 1, i = arguments.length; a < i; a++) {
      n = arguments[a];
      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]);
    }
    return t;
  }, Xa.apply(this, arguments);
};
function b4(e, t) {
  var n = {};
  for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && t.indexOf(a) < 0 && (n[a] = e[a]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, a = Object.getOwnPropertySymbols(e); i < a.length; i++)
      t.indexOf(a[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, a[i]) && (n[a[i]] = e[a[i]]);
  return n;
}
function xF(e, t, n) {
  if (n || arguments.length === 2) for (var a = 0, i = t.length, r; a < i; a++)
    (r || !(a in t)) && (r || (r = Array.prototype.slice.call(t, 0, a)), r[a] = t[a]);
  return e.concat(r || Array.prototype.slice.call(t));
}
var _d = "right-scroll-bar-position", Ad = "width-before-scroll-bar", yF = "with-scroll-bars-hidden", wF = "--removed-body-scroll-bar-size";
function Sf(e, t) {
  return typeof e == "function" ? e(t) : e && (e.current = t), e;
}
function EF(e, t) {
  var n = re(function() {
    return {
      // value
      value: e,
      // last callback
      callback: t,
      // "memoized" public interface
      facade: {
        get current() {
          return n.value;
        },
        set current(a) {
          var i = n.value;
          i !== a && (n.value = a, n.callback(a, i));
        }
      }
    };
  })[0];
  return n.callback = t, n.facade;
}
var SF = typeof window < "u" ? z.useLayoutEffect : z.useEffect, qg = /* @__PURE__ */ new WeakMap();
function kF(e, t) {
  var n = EF(null, function(a) {
    return e.forEach(function(i) {
      return Sf(i, a);
    });
  });
  return SF(function() {
    var a = qg.get(n);
    if (a) {
      var i = new Set(a), r = new Set(e), l = n.current;
      i.forEach(function(s) {
        r.has(s) || Sf(s, null);
      }), r.forEach(function(s) {
        i.has(s) || Sf(s, l);
      });
    }
    qg.set(n, e);
  }, [e]), n;
}
function MF(e) {
  return e;
}
function CF(e, t) {
  t === void 0 && (t = MF);
  var n = [], a = !1, i = {
    read: function() {
      if (a)
        throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
      return n.length ? n[n.length - 1] : e;
    },
    useMedium: function(r) {
      var l = t(r, a);
      return n.push(l), function() {
        n = n.filter(function(s) {
          return s !== l;
        });
      };
    },
    assignSyncMedium: function(r) {
      for (a = !0; n.length; ) {
        var l = n;
        n = [], l.forEach(r);
      }
      n = {
        push: function(s) {
          return r(s);
        },
        filter: function() {
          return n;
        }
      };
    },
    assignMedium: function(r) {
      a = !0;
      var l = [];
      if (n.length) {
        var s = n;
        n = [], s.forEach(r), l = n;
      }
      var c = function() {
        var o = l;
        l = [], o.forEach(r);
      }, d = function() {
        return Promise.resolve().then(c);
      };
      d(), n = {
        push: function(o) {
          l.push(o), d();
        },
        filter: function(o) {
          return l = l.filter(o), n;
        }
      };
    }
  };
  return i;
}
function IF(e) {
  e === void 0 && (e = {});
  var t = CF(null);
  return t.options = Xa({ async: !0, ssr: !1 }, e), t;
}
var v4 = function(e) {
  var t = e.sideCar, n = b4(e, ["sideCar"]);
  if (!t)
    throw new Error("Sidecar: please provide `sideCar` property to import the right car");
  var a = t.read();
  if (!a)
    throw new Error("Sidecar medium not found");
  return z.createElement(a, Xa({}, n));
};
v4.isSideCarExport = !0;
function TF(e, t) {
  return e.useMedium(t), v4;
}
var x4 = IF(), kf = function() {
}, mh = z.forwardRef(function(e, t) {
  var n = z.useRef(null), a = z.useState({
    onScrollCapture: kf,
    onWheelCapture: kf,
    onTouchMoveCapture: kf
  }), i = a[0], r = a[1], l = e.forwardProps, s = e.children, c = e.className, d = e.removeScrollBar, o = e.enabled, u = e.shards, f = e.sideCar, p = e.noRelative, U = e.noIsolation, m = e.inert, g = e.allowPinchZoom, b = e.as, v = b === void 0 ? "div" : b, x = e.gapMode, y = b4(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noRelative", "noIsolation", "inert", "allowPinchZoom", "as", "gapMode"]), E = f, S = kF([n, t]), w = Xa(Xa({}, y), i);
  return z.createElement(
    z.Fragment,
    null,
    o && z.createElement(E, { sideCar: x4, removeScrollBar: d, shards: u, noRelative: p, noIsolation: U, inert: m, setCallbacks: r, allowPinchZoom: !!g, lockRef: n, gapMode: x }),
    l ? z.cloneElement(z.Children.only(s), Xa(Xa({}, w), { ref: S })) : z.createElement(v, Xa({}, w, { className: c, ref: S }), s)
  );
});
mh.defaultProps = {
  enabled: !0,
  removeScrollBar: !0,
  inert: !1
};
mh.classNames = {
  fullWidth: Ad,
  zeroRight: _d
};
var _F = function() {
  if (typeof __webpack_nonce__ < "u")
    return __webpack_nonce__;
};
function AF() {
  if (!document)
    return null;
  var e = document.createElement("style");
  e.type = "text/css";
  var t = _F();
  return t && e.setAttribute("nonce", t), e;
}
function jF(e, t) {
  e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t));
}
function DF(e) {
  var t = document.head || document.getElementsByTagName("head")[0];
  t.appendChild(e);
}
var LF = function() {
  var e = 0, t = null;
  return {
    add: function(n) {
      e == 0 && (t = AF()) && (jF(t, n), DF(t)), e++;
    },
    remove: function() {
      e--, !e && t && (t.parentNode && t.parentNode.removeChild(t), t = null);
    }
  };
}, RF = function() {
  var e = LF();
  return function(t, n) {
    z.useEffect(function() {
      return e.add(t), function() {
        e.remove();
      };
    }, [t && n]);
  };
}, y4 = function() {
  var e = RF(), t = function(n) {
    var a = n.styles, i = n.dynamic;
    return e(a, i), null;
  };
  return t;
}, PF = {
  left: 0,
  top: 0,
  right: 0,
  gap: 0
}, Mf = function(e) {
  return parseInt(e || "", 10) || 0;
}, NF = function(e) {
  var t = window.getComputedStyle(document.body), n = t[e === "padding" ? "paddingLeft" : "marginLeft"], a = t[e === "padding" ? "paddingTop" : "marginTop"], i = t[e === "padding" ? "paddingRight" : "marginRight"];
  return [Mf(n), Mf(a), Mf(i)];
}, OF = function(e) {
  if (e === void 0 && (e = "margin"), typeof window > "u")
    return PF;
  var t = NF(e), n = document.documentElement.clientWidth, a = window.innerWidth;
  return {
    left: t[0],
    top: t[1],
    right: t[2],
    gap: Math.max(0, a - n + t[2] - t[0])
  };
}, $F = y4(), Zl = "data-scroll-locked", FF = function(e, t, n, a) {
  var i = e.left, r = e.top, l = e.right, s = e.gap;
  return n === void 0 && (n = "margin"), `
  .`.concat(yF, ` {
   overflow: hidden `).concat(a, `;
   padding-right: `).concat(s, "px ").concat(a, `;
  }
  body[`).concat(Zl, `] {
    overflow: hidden `).concat(a, `;
    overscroll-behavior: contain;
    `).concat([
    t && "position: relative ".concat(a, ";"),
    n === "margin" && `
    padding-left: `.concat(i, `px;
    padding-top: `).concat(r, `px;
    padding-right: `).concat(l, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s, "px ").concat(a, `;
    `),
    n === "padding" && "padding-right: ".concat(s, "px ").concat(a, ";")
  ].filter(Boolean).join(""), `
  }
  
  .`).concat(_d, ` {
    right: `).concat(s, "px ").concat(a, `;
  }
  
  .`).concat(Ad, ` {
    margin-right: `).concat(s, "px ").concat(a, `;
  }
  
  .`).concat(_d, " .").concat(_d, ` {
    right: 0 `).concat(a, `;
  }
  
  .`).concat(Ad, " .").concat(Ad, ` {
    margin-right: 0 `).concat(a, `;
  }
  
  body[`).concat(Zl, `] {
    `).concat(wF, ": ").concat(s, `px;
  }
`);
}, Jg = function() {
  var e = parseInt(document.body.getAttribute(Zl) || "0", 10);
  return isFinite(e) ? e : 0;
}, zF = function() {
  z.useEffect(function() {
    return document.body.setAttribute(Zl, (Jg() + 1).toString()), function() {
      var e = Jg() - 1;
      e <= 0 ? document.body.removeAttribute(Zl) : document.body.setAttribute(Zl, e.toString());
    };
  }, []);
}, BF = function(e) {
  var t = e.noRelative, n = e.noImportant, a = e.gapMode, i = a === void 0 ? "margin" : a;
  zF();
  var r = z.useMemo(function() {
    return OF(i);
  }, [i]);
  return z.createElement($F, { styles: FF(r, !t, i, n ? "" : "!important") });
}, Z1 = !1;
if (typeof window < "u")
  try {
    var Jc = Object.defineProperty({}, "passive", {
      get: function() {
        return Z1 = !0, !0;
      }
    });
    window.addEventListener("test", Jc, Jc), window.removeEventListener("test", Jc, Jc);
  } catch {
    Z1 = !1;
  }
var Il = Z1 ? { passive: !1 } : !1, HF = function(e) {
  return e.tagName === "TEXTAREA";
}, w4 = function(e, t) {
  if (!(e instanceof Element))
    return !1;
  var n = window.getComputedStyle(e);
  return (
    // not-not-scrollable
    n[t] !== "hidden" && // contains scroll inside self
    !(n.overflowY === n.overflowX && !HF(e) && n[t] === "visible")
  );
}, XF = function(e) {
  return w4(e, "overflowY");
}, WF = function(e) {
  return w4(e, "overflowX");
}, Qg = function(e, t) {
  var n = t.ownerDocument, a = t;
  do {
    typeof ShadowRoot < "u" && a instanceof ShadowRoot && (a = a.host);
    var i = E4(e, a);
    if (i) {
      var r = S4(e, a), l = r[1], s = r[2];
      if (l > s)
        return !0;
    }
    a = a.parentNode;
  } while (a && a !== n.body);
  return !1;
}, VF = function(e) {
  var t = e.scrollTop, n = e.scrollHeight, a = e.clientHeight;
  return [
    t,
    n,
    a
  ];
}, GF = function(e) {
  var t = e.scrollLeft, n = e.scrollWidth, a = e.clientWidth;
  return [
    t,
    n,
    a
  ];
}, E4 = function(e, t) {
  return e === "v" ? XF(t) : WF(t);
}, S4 = function(e, t) {
  return e === "v" ? VF(t) : GF(t);
}, YF = function(e, t) {
  return e === "h" && t === "rtl" ? -1 : 1;
}, ZF = function(e, t, n, a, i) {
  var r = YF(e, window.getComputedStyle(t).direction), l = r * a, s = n.target, c = t.contains(s), d = !1, o = l > 0, u = 0, f = 0;
  do {
    if (!s)
      break;
    var p = S4(e, s), U = p[0], m = p[1], g = p[2], b = m - g - r * U;
    (U || b) && E4(e, s) && (u += b, f += U);
    var v = s.parentNode;
    s = v && v.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? v.host : v;
  } while (
    // portaled content
    !c && s !== document.body || // self content
    c && (t.contains(s) || t === s)
  );
  return (o && Math.abs(u) < 1 || !o && Math.abs(f) < 1) && (d = !0), d;
}, Qc = function(e) {
  return "changedTouches" in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0];
}, e6 = function(e) {
  return [e.deltaX, e.deltaY];
}, t6 = function(e) {
  return e && "current" in e ? e.current : e;
}, KF = function(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}, qF = function(e) {
  return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`);
}, JF = 0, Tl = [];
function QF(e) {
  var t = z.useRef([]), n = z.useRef([0, 0]), a = z.useRef(), i = z.useState(JF++)[0], r = z.useState(y4)[0], l = z.useRef(e);
  z.useEffect(function() {
    l.current = e;
  }, [e]), z.useEffect(function() {
    if (e.inert) {
      document.body.classList.add("block-interactivity-".concat(i));
      var m = xF([e.lockRef.current], (e.shards || []).map(t6), !0).filter(Boolean);
      return m.forEach(function(g) {
        return g.classList.add("allow-interactivity-".concat(i));
      }), function() {
        document.body.classList.remove("block-interactivity-".concat(i)), m.forEach(function(g) {
          return g.classList.remove("allow-interactivity-".concat(i));
        });
      };
    }
  }, [e.inert, e.lockRef.current, e.shards]);
  var s = z.useCallback(function(m, g) {
    if ("touches" in m && m.touches.length === 2 || m.type === "wheel" && m.ctrlKey)
      return !l.current.allowPinchZoom;
    var b = Qc(m), v = n.current, x = "deltaX" in m ? m.deltaX : v[0] - b[0], y = "deltaY" in m ? m.deltaY : v[1] - b[1], E, S = m.target, w = Math.abs(x) > Math.abs(y) ? "h" : "v";
    if ("touches" in m && w === "h" && S.type === "range")
      return !1;
    var M = Qg(w, S);
    if (!M)
      return !0;
    if (M ? E = w : (E = w === "v" ? "h" : "v", M = Qg(w, S)), !M)
      return !1;
    if (!a.current && "changedTouches" in m && (x || y) && (a.current = E), !E)
      return !0;
    var I = a.current || E;
    return ZF(I, g, m, I === "h" ? x : y);
  }, []), c = z.useCallback(function(m) {
    var g = m;
    if (!(!Tl.length || Tl[Tl.length - 1] !== r)) {
      var b = "deltaY" in g ? e6(g) : Qc(g), v = t.current.filter(function(E) {
        return E.name === g.type && (E.target === g.target || g.target === E.shadowParent) && KF(E.delta, b);
      })[0];
      if (v && v.should) {
        g.cancelable && g.preventDefault();
        return;
      }
      if (!v) {
        var x = (l.current.shards || []).map(t6).filter(Boolean).filter(function(E) {
          return E.contains(g.target);
        }), y = x.length > 0 ? s(g, x[0]) : !l.current.noIsolation;
        y && g.cancelable && g.preventDefault();
      }
    }
  }, []), d = z.useCallback(function(m, g, b, v) {
    var x = { name: m, delta: g, target: b, should: v, shadowParent: ez(b) };
    t.current.push(x), setTimeout(function() {
      t.current = t.current.filter(function(y) {
        return y !== x;
      });
    }, 1);
  }, []), o = z.useCallback(function(m) {
    n.current = Qc(m), a.current = void 0;
  }, []), u = z.useCallback(function(m) {
    d(m.type, e6(m), m.target, s(m, e.lockRef.current));
  }, []), f = z.useCallback(function(m) {
    d(m.type, Qc(m), m.target, s(m, e.lockRef.current));
  }, []);
  z.useEffect(function() {
    return Tl.push(r), e.setCallbacks({
      onScrollCapture: u,
      onWheelCapture: u,
      onTouchMoveCapture: f
    }), document.addEventListener("wheel", c, Il), document.addEventListener("touchmove", c, Il), document.addEventListener("touchstart", o, Il), function() {
      Tl = Tl.filter(function(m) {
        return m !== r;
      }), document.removeEventListener("wheel", c, Il), document.removeEventListener("touchmove", c, Il), document.removeEventListener("touchstart", o, Il);
    };
  }, []);
  var p = e.removeScrollBar, U = e.inert;
  return z.createElement(
    z.Fragment,
    null,
    U ? z.createElement(r, { styles: qF(i) }) : null,
    p ? z.createElement(BF, { noRelative: e.noRelative, gapMode: e.gapMode }) : null
  );
}
function ez(e) {
  for (var t = null; e !== null; )
    e instanceof ShadowRoot && (t = e.host, e = e.host), e = e.parentNode;
  return t;
}
const tz = TF(x4, QF);
var k4 = z.forwardRef(function(e, t) {
  return z.createElement(mh, Xa({}, e, { ref: t, sideCar: tz }));
});
k4.classNames = mh.classNames;
var nU = "Popover", [M4, yZ] = B3(nU, [
  l4
]), wc = l4(), [nz, Er] = M4(nU), C4 = (e) => {
  const {
    __scopePopover: t,
    children: n,
    open: a,
    defaultOpen: i,
    onOpenChange: r,
    modal: l = !1
  } = e, s = wc(t), c = z.useRef(null), [d, o] = z.useState(!1), [u = !1, f] = pF({
    prop: a,
    defaultProp: i,
    onChange: r
  });
  return /* @__PURE__ */ h.jsx(sF, { ...s, children: /* @__PURE__ */ h.jsx(
    nz,
    {
      scope: t,
      contentId: JO(),
      triggerRef: c,
      open: u,
      onOpenChange: f,
      onOpenToggle: z.useCallback(() => f((p) => !p), [f]),
      hasCustomAnchor: d,
      onCustomAnchorAdd: z.useCallback(() => o(!0), []),
      onCustomAnchorRemove: z.useCallback(() => o(!1), []),
      modal: l,
      children: n
    }
  ) });
};
C4.displayName = nU;
var I4 = "PopoverAnchor", az = z.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = Er(I4, n), r = wc(n), { onCustomAnchorAdd: l, onCustomAnchorRemove: s } = i;
    return z.useEffect(() => (l(), () => s()), [l, s]), /* @__PURE__ */ h.jsx(U4, { ...r, ...a, ref: t });
  }
);
az.displayName = I4;
var T4 = "PopoverTrigger", _4 = z.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = Er(T4, n), r = wc(n), l = wr(t, i.triggerRef), s = /* @__PURE__ */ h.jsx(
      Oi.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": i.open,
        "aria-controls": i.contentId,
        "data-state": P4(i.open),
        ...a,
        ref: l,
        onClick: dr(e.onClick, i.onOpenToggle)
      }
    );
    return i.hasCustomAnchor ? s : /* @__PURE__ */ h.jsx(U4, { asChild: !0, ...r, children: s });
  }
);
_4.displayName = T4;
var aU = "PopoverPortal", [iz, rz] = M4(aU, {
  forceMount: void 0
}), A4 = (e) => {
  const { __scopePopover: t, forceMount: n, children: a, container: i } = e, r = Er(aU, t);
  return /* @__PURE__ */ h.jsx(iz, { scope: t, forceMount: n, children: /* @__PURE__ */ h.jsx(tU, { present: n || r.open, children: /* @__PURE__ */ h.jsx(m4, { asChild: !0, container: i, children: a }) }) });
};
A4.displayName = aU;
var gs = "PopoverContent", j4 = z.forwardRef(
  (e, t) => {
    const n = rz(gs, e.__scopePopover), { forceMount: a = n.forceMount, ...i } = e, r = Er(gs, e.__scopePopover);
    return /* @__PURE__ */ h.jsx(tU, { present: a || r.open, children: r.modal ? /* @__PURE__ */ h.jsx(lz, { ...i, ref: t }) : /* @__PURE__ */ h.jsx(sz, { ...i, ref: t }) });
  }
);
j4.displayName = gs;
var lz = z.forwardRef(
  (e, t) => {
    const n = Er(gs, e.__scopePopover), a = z.useRef(null), i = wr(t, a), r = z.useRef(!1);
    return z.useEffect(() => {
      const l = a.current;
      if (l) return vF(l);
    }, []), /* @__PURE__ */ h.jsx(k4, { as: Wp, allowPinchZoom: !0, children: /* @__PURE__ */ h.jsx(
      D4,
      {
        ...e,
        ref: i,
        trapFocus: n.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: dr(e.onCloseAutoFocus, (l) => {
          var s;
          l.preventDefault(), r.current || (s = n.triggerRef.current) == null || s.focus();
        }),
        onPointerDownOutside: dr(
          e.onPointerDownOutside,
          (l) => {
            const s = l.detail.originalEvent, c = s.button === 0 && s.ctrlKey === !0, d = s.button === 2 || c;
            r.current = d;
          },
          { checkForDefaultPrevented: !1 }
        ),
        onFocusOutside: dr(
          e.onFocusOutside,
          (l) => l.preventDefault(),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
), sz = z.forwardRef(
  (e, t) => {
    const n = Er(gs, e.__scopePopover), a = z.useRef(!1), i = z.useRef(!1);
    return /* @__PURE__ */ h.jsx(
      D4,
      {
        ...e,
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: (r) => {
          var l, s;
          (l = e.onCloseAutoFocus) == null || l.call(e, r), r.defaultPrevented || (a.current || (s = n.triggerRef.current) == null || s.focus(), r.preventDefault()), a.current = !1, i.current = !1;
        },
        onInteractOutside: (r) => {
          var c, d;
          (c = e.onInteractOutside) == null || c.call(e, r), r.defaultPrevented || (a.current = !0, r.detail.originalEvent.type === "pointerdown" && (i.current = !0));
          const l = r.target;
          ((d = n.triggerRef.current) == null ? void 0 : d.contains(l)) && r.preventDefault(), r.detail.originalEvent.type === "focusin" && i.current && r.preventDefault();
        }
      }
    );
  }
), D4 = z.forwardRef(
  (e, t) => {
    const {
      __scopePopover: n,
      trapFocus: a,
      onOpenAutoFocus: i,
      onCloseAutoFocus: r,
      disableOutsidePointerEvents: l,
      onEscapeKeyDown: s,
      onPointerDownOutside: c,
      onFocusOutside: d,
      onInteractOutside: o,
      ...u
    } = e, f = Er(gs, n), p = wc(n);
    return BO(), /* @__PURE__ */ h.jsx(
      V3,
      {
        asChild: !0,
        loop: !0,
        trapped: a,
        onMountAutoFocus: i,
        onUnmountAutoFocus: r,
        children: /* @__PURE__ */ h.jsx(
          X3,
          {
            asChild: !0,
            disableOutsidePointerEvents: l,
            onInteractOutside: o,
            onEscapeKeyDown: s,
            onPointerDownOutside: c,
            onFocusOutside: d,
            onDismiss: () => f.onOpenChange(!1),
            children: /* @__PURE__ */ h.jsx(
              oF,
              {
                "data-state": P4(f.open),
                role: "dialog",
                id: f.contentId,
                ...p,
                ...u,
                ref: t,
                style: {
                  ...u.style,
                  "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)",
                  "--radix-popover-content-available-width": "var(--radix-popper-available-width)",
                  "--radix-popover-content-available-height": "var(--radix-popper-available-height)",
                  "--radix-popover-trigger-width": "var(--radix-popper-anchor-width)",
                  "--radix-popover-trigger-height": "var(--radix-popper-anchor-height)"
                }
              }
            )
          }
        )
      }
    );
  }
), L4 = "PopoverClose", oz = z.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = Er(L4, n);
    return /* @__PURE__ */ h.jsx(
      Oi.button,
      {
        type: "button",
        ...a,
        ref: t,
        onClick: dr(e.onClick, () => i.onOpenChange(!1))
      }
    );
  }
);
oz.displayName = L4;
var cz = "PopoverArrow", R4 = z.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = wc(n);
    return /* @__PURE__ */ h.jsx(cF, { ...i, ...a, ref: t });
  }
);
R4.displayName = cz;
function P4(e) {
  return e ? "open" : "closed";
}
var gh = C4, bh = _4, dz = A4, iU = j4, N4 = R4, O4 = { exports: {} };
(function(e, t) {
  (function() {
    var n = {};
    e.exports = n, n.simpleFilter = function(a, i) {
      return i.filter(function(r) {
        return n.test(a, r);
      });
    }, n.test = function(a, i) {
      return n.match(a, i) !== null;
    }, n.match = function(a, i, r) {
      r = r || {};
      var l = 0, s = [], c = i.length, d = 0, o = 0, u = r.pre || "", f = r.post || "", p = r.caseSensitive && i || i.toLowerCase(), U;
      a = r.caseSensitive && a || a.toLowerCase();
      for (var m = 0; m < c; m++)
        U = i[m], p[m] === a[l] ? (U = u + U + f, l += 1, o += 1 + o) : o = 0, d += o, s[s.length] = U;
      return l === a.length ? (d = p === a ? 1 / 0 : d, { rendered: s.join(""), score: d }) : null;
    }, n.filter = function(a, i, r) {
      return !i || i.length === 0 ? [] : typeof a != "string" ? i : (r = r || {}, i.reduce(function(l, s, c, d) {
        var o = s;
        r.extract && (o = r.extract(s));
        var u = n.match(a, o, r);
        return u != null && (l[l.length] = {
          string: u.rendered,
          score: u.score,
          index: c,
          original: s
        }), l;
      }, []).sort(function(l, s) {
        var c = s.score - l.score;
        return c || l.index - s.index;
      }));
    };
  })();
})(O4);
var uz = O4.exports;
const hz = /* @__PURE__ */ pl(uz), fz = {}, n6 = (e) => {
  let t;
  const n = /* @__PURE__ */ new Set(), a = (o, u) => {
    const f = typeof o == "function" ? o(t) : o;
    if (!Object.is(f, t)) {
      const p = t;
      t = u ?? (typeof f != "object" || f === null) ? f : Object.assign({}, t, f), n.forEach((U) => U(t, p));
    }
  }, i = () => t, c = { setState: a, getState: i, getInitialState: () => d, subscribe: (o) => (n.add(o), () => n.delete(o)), destroy: () => {
    (fz ? "production" : void 0) !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), n.clear();
  } }, d = t = e(a, i, c);
  return c;
}, pz = (e) => e ? n6(e) : n6;
var K1 = { exports: {} }, Cf = {}, ed = { exports: {} }, If = {};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var a6;
function Uz() {
  if (a6) return If;
  a6 = 1;
  var e = Y;
  function t(u, f) {
    return u === f && (u !== 0 || 1 / u === 1 / f) || u !== u && f !== f;
  }
  var n = typeof Object.is == "function" ? Object.is : t, a = e.useState, i = e.useEffect, r = e.useLayoutEffect, l = e.useDebugValue;
  function s(u, f) {
    var p = f(), U = a({ inst: { value: p, getSnapshot: f } }), m = U[0].inst, g = U[1];
    return r(
      function() {
        m.value = p, m.getSnapshot = f, c(m) && g({ inst: m });
      },
      [u, p, f]
    ), i(
      function() {
        return c(m) && g({ inst: m }), u(function() {
          c(m) && g({ inst: m });
        });
      },
      [u]
    ), l(p), p;
  }
  function c(u) {
    var f = u.getSnapshot;
    u = u.value;
    try {
      var p = f();
      return !n(u, p);
    } catch {
      return !0;
    }
  }
  function d(u, f) {
    return f();
  }
  var o = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? d : s;
  return If.useSyncExternalStore = e.useSyncExternalStore !== void 0 ? e.useSyncExternalStore : o, If;
}
var Tf = {};
/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var i6;
function mz() {
  return i6 || (i6 = 1, process.env.NODE_ENV !== "production" && function() {
    function e(p, U) {
      return p === U && (p !== 0 || 1 / p === 1 / U) || p !== p && U !== U;
    }
    function t(p, U) {
      o || i.startTransition === void 0 || (o = !0, console.error(
        "You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."
      ));
      var m = U();
      if (!u) {
        var g = U();
        r(m, g) || (console.error(
          "The result of getSnapshot should be cached to avoid an infinite loop"
        ), u = !0);
      }
      g = l({
        inst: { value: m, getSnapshot: U }
      });
      var b = g[0].inst, v = g[1];
      return c(
        function() {
          b.value = m, b.getSnapshot = U, n(b) && v({ inst: b });
        },
        [p, m, U]
      ), s(
        function() {
          return n(b) && v({ inst: b }), p(function() {
            n(b) && v({ inst: b });
          });
        },
        [p]
      ), d(m), m;
    }
    function n(p) {
      var U = p.getSnapshot;
      p = p.value;
      try {
        var m = U();
        return !r(p, m);
      } catch {
        return !0;
      }
    }
    function a(p, U) {
      return U();
    }
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var i = Y, r = typeof Object.is == "function" ? Object.is : e, l = i.useState, s = i.useEffect, c = i.useLayoutEffect, d = i.useDebugValue, o = !1, u = !1, f = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? a : t;
    Tf.useSyncExternalStore = i.useSyncExternalStore !== void 0 ? i.useSyncExternalStore : f, typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  }()), Tf;
}
var r6;
function $4() {
  return r6 || (r6 = 1, process.env.NODE_ENV === "production" ? ed.exports = Uz() : ed.exports = mz()), ed.exports;
}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var l6;
function gz() {
  if (l6) return Cf;
  l6 = 1;
  var e = Y, t = $4();
  function n(d, o) {
    return d === o && (d !== 0 || 1 / d === 1 / o) || d !== d && o !== o;
  }
  var a = typeof Object.is == "function" ? Object.is : n, i = t.useSyncExternalStore, r = e.useRef, l = e.useEffect, s = e.useMemo, c = e.useDebugValue;
  return Cf.useSyncExternalStoreWithSelector = function(d, o, u, f, p) {
    var U = r(null);
    if (U.current === null) {
      var m = { hasValue: !1, value: null };
      U.current = m;
    } else m = U.current;
    U = s(
      function() {
        function b(S) {
          if (!v) {
            if (v = !0, x = S, S = f(S), p !== void 0 && m.hasValue) {
              var w = m.value;
              if (p(w, S))
                return y = w;
            }
            return y = S;
          }
          if (w = y, a(x, S)) return w;
          var M = f(S);
          return p !== void 0 && p(w, M) ? (x = S, w) : (x = S, y = M);
        }
        var v = !1, x, y, E = u === void 0 ? null : u;
        return [
          function() {
            return b(o());
          },
          E === null ? void 0 : function() {
            return b(E());
          }
        ];
      },
      [o, u, f, p]
    );
    var g = i(d, U[0], U[1]);
    return l(
      function() {
        m.hasValue = !0, m.value = g;
      },
      [g]
    ), c(g), g;
  }, Cf;
}
var _f = {};
/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var s6;
function bz() {
  return s6 || (s6 = 1, process.env.NODE_ENV !== "production" && function() {
    function e(d, o) {
      return d === o && (d !== 0 || 1 / d === 1 / o) || d !== d && o !== o;
    }
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var t = Y, n = $4(), a = typeof Object.is == "function" ? Object.is : e, i = n.useSyncExternalStore, r = t.useRef, l = t.useEffect, s = t.useMemo, c = t.useDebugValue;
    _f.useSyncExternalStoreWithSelector = function(d, o, u, f, p) {
      var U = r(null);
      if (U.current === null) {
        var m = { hasValue: !1, value: null };
        U.current = m;
      } else m = U.current;
      U = s(
        function() {
          function b(S) {
            if (!v) {
              if (v = !0, x = S, S = f(S), p !== void 0 && m.hasValue) {
                var w = m.value;
                if (p(w, S))
                  return y = w;
              }
              return y = S;
            }
            if (w = y, a(x, S))
              return w;
            var M = f(S);
            return p !== void 0 && p(w, M) ? (x = S, w) : (x = S, y = M);
          }
          var v = !1, x, y, E = u === void 0 ? null : u;
          return [
            function() {
              return b(o());
            },
            E === null ? void 0 : function() {
              return b(E());
            }
          ];
        },
        [o, u, f, p]
      );
      var g = i(d, U[0], U[1]);
      return l(
        function() {
          m.hasValue = !0, m.value = g;
        },
        [g]
      ), c(g), g;
    }, typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  }()), _f;
}
process.env.NODE_ENV === "production" ? K1.exports = gz() : K1.exports = bz();
var vz = K1.exports;
const xz = /* @__PURE__ */ pl(vz), F4 = {}, { useDebugValue: yz } = Y, { useSyncExternalStoreWithSelector: wz } = xz;
let o6 = !1;
const Ez = (e) => e;
function Sz(e, t = Ez, n) {
  (F4 ? "production" : void 0) !== "production" && n && !o6 && (console.warn(
    "[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"
  ), o6 = !0);
  const a = wz(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    n
  );
  return yz(a), a;
}
const c6 = (e) => {
  (F4 ? "production" : void 0) !== "production" && typeof e != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const t = typeof e == "function" ? pz(e) : e, n = (a, i) => Sz(t, a, i);
  return Object.assign(n, t), n;
}, kz = (e) => e ? c6(e) : c6;
var d6, u6;
const h6 = typeof window < "u" && ((d6 = window.document) != null && d6.createElement || ((u6 = window.navigator) == null ? void 0 : u6.product) === "ReactNative") ? Y.useLayoutEffect : Y.useEffect;
function _a() {
  const e = kz((t) => ({
    current: new Array(),
    version: 0,
    set: t
  }));
  return {
    In: ({
      children: t
    }) => {
      const n = e((i) => i.set), a = e((i) => i.version);
      return h6(() => {
        n((i) => ({
          version: i.version + 1
        }));
      }, []), h6(() => (n(({
        current: i
      }) => ({
        current: [...i, t]
      })), () => n(({
        current: i
      }) => ({
        current: i.filter((r) => r !== t)
      }))), [t, a]), null;
    },
    Out: () => {
      const t = e((n) => n.current);
      return /* @__PURE__ */ Y.createElement(Y.Fragment, null, t);
    }
  };
}
function sn() {
  return sn = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var a in n) ({}).hasOwnProperty.call(n, a) && (e[a] = n[a]);
    }
    return e;
  }, sn.apply(null, arguments);
}
function Ei(e, t, { checkForDefaultPrevented: n = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), n === !1 || !i.defaultPrevented) return t == null ? void 0 : t(i);
  };
}
function rU(e, t = []) {
  let n = [];
  function a(r, l) {
    const s = /* @__PURE__ */ Ql(l), c = n.length;
    n = [
      ...n,
      l
    ];
    function d(u) {
      const { scope: f, children: p, ...U } = u, m = (f == null ? void 0 : f[e][c]) || s, g = nt(
        () => U,
        Object.values(U)
      );
      return /* @__PURE__ */ st(m.Provider, {
        value: g
      }, p);
    }
    function o(u, f) {
      const p = (f == null ? void 0 : f[e][c]) || s, U = Cn(p);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return d.displayName = r + "Provider", [
      d,
      o
    ];
  }
  const i = () => {
    const r = n.map((l) => /* @__PURE__ */ Ql(l));
    return function(s) {
      const c = (s == null ? void 0 : s[e]) || r;
      return nt(
        () => ({
          [`__scope${e}`]: {
            ...s,
            [e]: c
          }
        }),
        [
          s,
          c
        ]
      );
    };
  };
  return i.scopeName = e, [
    a,
    Mz(i, ...t)
  ];
}
function Mz(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map(
      (i) => ({
        useScope: i(),
        scopeName: i.scopeName
      })
    );
    return function(r) {
      const l = a.reduce((s, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return {
          ...s,
          ...u
        };
      }, {});
      return nt(
        () => ({
          [`__scope${t.scopeName}`]: l
        }),
        [
          l
        ]
      );
    };
  };
  return n.scopeName = t.scopeName, n;
}
function Cz(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function z4(...e) {
  return (t) => e.forEach(
    (n) => Cz(n, t)
  );
}
function q1(...e) {
  return Te(z4(...e), e);
}
const J1 = /* @__PURE__ */ Ot((e, t) => {
  const { children: n, ...a } = e, i = Wn.toArray(n), r = i.find(Tz);
  if (r) {
    const l = r.props.children, s = i.map((c) => c === r ? Wn.count(l) > 1 ? Wn.only(null) : /* @__PURE__ */ ur(l) ? l.props.children : null : c);
    return /* @__PURE__ */ st(Q1, sn({}, a, {
      ref: t
    }), /* @__PURE__ */ ur(l) ? /* @__PURE__ */ lc(l, void 0, s) : null);
  }
  return /* @__PURE__ */ st(Q1, sn({}, a, {
    ref: t
  }), n);
});
J1.displayName = "Slot";
const Q1 = /* @__PURE__ */ Ot((e, t) => {
  const { children: n, ...a } = e;
  return /* @__PURE__ */ ur(n) ? /* @__PURE__ */ lc(n, {
    ..._z(a, n.props),
    ref: z4(t, n.ref)
  }) : Wn.count(n) > 1 ? Wn.only(null) : null;
});
Q1.displayName = "SlotClone";
const Iz = ({ children: e }) => /* @__PURE__ */ st(x0, null, e);
function Tz(e) {
  return /* @__PURE__ */ ur(e) && e.type === Iz;
}
function _z(e, t) {
  const n = {
    ...t
  };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...s) => {
      r(...s), i(...s);
    } : i && (n[a] = i) : a === "style" ? n[a] = {
      ...i,
      ...r
    } : a === "className" && (n[a] = [
      i,
      r
    ].filter(Boolean).join(" "));
  }
  return {
    ...e,
    ...n
  };
}
function Az(e) {
  const t = e + "CollectionProvider", [n, a] = rU(t), [i, r] = n(t, {
    collectionRef: {
      current: null
    },
    itemMap: /* @__PURE__ */ new Map()
  }), l = (p) => {
    const { scope: U, children: m } = p, g = Y.useRef(null), b = Y.useRef(/* @__PURE__ */ new Map()).current;
    return /* @__PURE__ */ Y.createElement(i, {
      scope: U,
      itemMap: b,
      collectionRef: g
    }, m);
  }, s = e + "CollectionSlot", c = /* @__PURE__ */ Y.forwardRef((p, U) => {
    const { scope: m, children: g } = p, b = r(s, m), v = q1(U, b.collectionRef);
    return /* @__PURE__ */ Y.createElement(J1, {
      ref: v
    }, g);
  }), d = e + "CollectionItemSlot", o = "data-radix-collection-item", u = /* @__PURE__ */ Y.forwardRef((p, U) => {
    const { scope: m, children: g, ...b } = p, v = Y.useRef(null), x = q1(U, v), y = r(d, m);
    return Y.useEffect(() => (y.itemMap.set(v, {
      ref: v,
      ...b
    }), () => void y.itemMap.delete(v))), /* @__PURE__ */ Y.createElement(J1, {
      [o]: "",
      ref: x
    }, g);
  });
  function f(p) {
    const U = r(e + "CollectionConsumer", p);
    return Y.useCallback(() => {
      const g = U.collectionRef.current;
      if (!g) return [];
      const b = Array.from(g.querySelectorAll(`[${o}]`));
      return Array.from(U.itemMap.values()).sort(
        (y, E) => b.indexOf(y.ref.current) - b.indexOf(E.ref.current)
      );
    }, [
      U.collectionRef,
      U.itemMap
    ]);
  }
  return [
    {
      Provider: l,
      Slot: c,
      ItemSlot: u
    },
    f,
    a
  ];
}
const jz = globalThis != null && globalThis.document ? Mn : () => {
}, Dz = z.useId || (() => {
});
let Lz = 0;
function B4(e) {
  const [t, n] = z.useState(Dz());
  return jz(() => {
    n(
      (a) => a ?? String(Lz++)
    );
  }, [
    e
  ]), e || (t ? `radix-${t}` : "");
}
function Rz(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function Pz(...e) {
  return (t) => e.forEach(
    (n) => Rz(n, t)
  );
}
const H4 = /* @__PURE__ */ Ot((e, t) => {
  const { children: n, ...a } = e, i = Wn.toArray(n), r = i.find(Oz);
  if (r) {
    const l = r.props.children, s = i.map((c) => c === r ? Wn.count(l) > 1 ? Wn.only(null) : /* @__PURE__ */ ur(l) ? l.props.children : null : c);
    return /* @__PURE__ */ st(e0, sn({}, a, {
      ref: t
    }), /* @__PURE__ */ ur(l) ? /* @__PURE__ */ lc(l, void 0, s) : null);
  }
  return /* @__PURE__ */ st(e0, sn({}, a, {
    ref: t
  }), n);
});
H4.displayName = "Slot";
const e0 = /* @__PURE__ */ Ot((e, t) => {
  const { children: n, ...a } = e;
  return /* @__PURE__ */ ur(n) ? /* @__PURE__ */ lc(n, {
    ...$z(a, n.props),
    ref: Pz(t, n.ref)
  }) : Wn.count(n) > 1 ? Wn.only(null) : null;
});
e0.displayName = "SlotClone";
const Nz = ({ children: e }) => /* @__PURE__ */ st(x0, null, e);
function Oz(e) {
  return /* @__PURE__ */ ur(e) && e.type === Nz;
}
function $z(e, t) {
  const n = {
    ...t
  };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...s) => {
      r(...s), i(...s);
    } : i && (n[a] = i) : a === "style" ? n[a] = {
      ...i,
      ...r
    } : a === "className" && (n[a] = [
      i,
      r
    ].filter(Boolean).join(" "));
  }
  return {
    ...e,
    ...n
  };
}
const Fz = [
  "a",
  "button",
  "div",
  "h2",
  "h3",
  "img",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "span",
  "svg",
  "ul"
], Ts = Fz.reduce((e, t) => {
  const n = /* @__PURE__ */ Ot((a, i) => {
    const { asChild: r, ...l } = a, s = r ? H4 : t;
    return Q(() => {
      window[Symbol.for("radix-ui")] = !0;
    }, []), /* @__PURE__ */ st(s, sn({}, l, {
      ref: i
    }));
  });
  return n.displayName = `Primitive.${t}`, {
    ...e,
    [t]: n
  };
}, {});
function zz(e) {
  const t = ie(e);
  return Q(() => {
    t.current = e;
  }), nt(
    () => (...n) => {
      var a;
      return (a = t.current) === null || a === void 0 ? void 0 : a.call(t, ...n);
    },
    []
  );
}
function X4(e) {
  const t = ie(e);
  return Q(() => {
    t.current = e;
  }), nt(
    () => (...n) => {
      var a;
      return (a = t.current) === null || a === void 0 ? void 0 : a.call(t, ...n);
    },
    []
  );
}
function W4({ prop: e, defaultProp: t, onChange: n = () => {
} }) {
  const [a, i] = Bz({
    defaultProp: t,
    onChange: n
  }), r = e !== void 0, l = r ? e : a, s = X4(n), c = Te((d) => {
    if (r) {
      const u = typeof d == "function" ? d(e) : d;
      u !== e && s(u);
    } else i(d);
  }, [
    r,
    e,
    i,
    s
  ]);
  return [
    l,
    c
  ];
}
function Bz({ defaultProp: e, onChange: t }) {
  const n = re(e), [a] = n, i = ie(a), r = X4(t);
  return Q(() => {
    i.current !== a && (r(a), i.current = a);
  }, [
    a,
    i,
    r
  ]), n;
}
const Hz = /* @__PURE__ */ Ql(void 0);
function V4(e) {
  const t = Cn(Hz);
  return e || t || "ltr";
}
const Af = "rovingFocusGroup.onEntryFocus", Xz = {
  bubbles: !1,
  cancelable: !0
}, lU = "RovingFocusGroup", [t0, G4, Wz] = Az(lU), [Vz, Y4] = rU(lU, [
  Wz
]), [Gz, Yz] = Vz(lU), Zz = /* @__PURE__ */ Ot((e, t) => /* @__PURE__ */ st(t0.Provider, {
  scope: e.__scopeRovingFocusGroup
}, /* @__PURE__ */ st(t0.Slot, {
  scope: e.__scopeRovingFocusGroup
}, /* @__PURE__ */ st(Kz, sn({}, e, {
  ref: t
}))))), Kz = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeRovingFocusGroup: n, orientation: a, loop: i = !1, dir: r, currentTabStopId: l, defaultCurrentTabStopId: s, onCurrentTabStopIdChange: c, onEntryFocus: d, ...o } = e, u = ie(null), f = q1(t, u), p = V4(r), [U = null, m] = W4({
    prop: l,
    defaultProp: s,
    onChange: c
  }), [g, b] = re(!1), v = zz(d), x = G4(n), y = ie(!1), [E, S] = re(0);
  return Q(() => {
    const w = u.current;
    if (w)
      return w.addEventListener(Af, v), () => w.removeEventListener(Af, v);
  }, [
    v
  ]), /* @__PURE__ */ st(Gz, {
    scope: n,
    orientation: a,
    dir: p,
    loop: i,
    currentTabStopId: U,
    onItemFocus: Te(
      (w) => m(w),
      [
        m
      ]
    ),
    onItemShiftTab: Te(
      () => b(!0),
      []
    ),
    onFocusableItemAdd: Te(
      () => S(
        (w) => w + 1
      ),
      []
    ),
    onFocusableItemRemove: Te(
      () => S(
        (w) => w - 1
      ),
      []
    )
  }, /* @__PURE__ */ st(Ts.div, sn({
    tabIndex: g || E === 0 ? -1 : 0,
    "data-orientation": a
  }, o, {
    ref: f,
    style: {
      outline: "none",
      ...e.style
    },
    onMouseDown: Ei(e.onMouseDown, () => {
      y.current = !0;
    }),
    onFocus: Ei(e.onFocus, (w) => {
      const M = !y.current;
      if (w.target === w.currentTarget && M && !g) {
        const I = new CustomEvent(Af, Xz);
        if (w.currentTarget.dispatchEvent(I), !I.defaultPrevented) {
          const T = x().filter(
            (N) => N.focusable
          ), _ = T.find(
            (N) => N.active
          ), A = T.find(
            (N) => N.id === U
          ), P = [
            _,
            A,
            ...T
          ].filter(Boolean).map(
            (N) => N.ref.current
          );
          Z4(P);
        }
      }
      y.current = !1;
    }),
    onBlur: Ei(
      e.onBlur,
      () => b(!1)
    )
  })));
}), qz = "RovingFocusGroupItem", Jz = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeRovingFocusGroup: n, focusable: a = !0, active: i = !1, tabStopId: r, ...l } = e, s = B4(), c = r || s, d = Yz(qz, n), o = d.currentTabStopId === c, u = G4(n), { onFocusableItemAdd: f, onFocusableItemRemove: p } = d;
  return Q(() => {
    if (a)
      return f(), () => p();
  }, [
    a,
    f,
    p
  ]), /* @__PURE__ */ st(t0.ItemSlot, {
    scope: n,
    id: c,
    focusable: a,
    active: i
  }, /* @__PURE__ */ st(Ts.span, sn({
    tabIndex: o ? 0 : -1,
    "data-orientation": d.orientation
  }, l, {
    ref: t,
    onMouseDown: Ei(e.onMouseDown, (U) => {
      a ? d.onItemFocus(c) : U.preventDefault();
    }),
    onFocus: Ei(
      e.onFocus,
      () => d.onItemFocus(c)
    ),
    onKeyDown: Ei(e.onKeyDown, (U) => {
      if (U.key === "Tab" && U.shiftKey) {
        d.onItemShiftTab();
        return;
      }
      if (U.target !== U.currentTarget) return;
      const m = tB(U, d.orientation, d.dir);
      if (m !== void 0) {
        U.preventDefault();
        let b = u().filter(
          (v) => v.focusable
        ).map(
          (v) => v.ref.current
        );
        if (m === "last") b.reverse();
        else if (m === "prev" || m === "next") {
          m === "prev" && b.reverse();
          const v = b.indexOf(U.currentTarget);
          b = d.loop ? nB(b, v + 1) : b.slice(v + 1);
        }
        setTimeout(
          () => Z4(b)
        );
      }
    })
  })));
}), Qz = {
  ArrowLeft: "prev",
  ArrowUp: "prev",
  ArrowRight: "next",
  ArrowDown: "next",
  PageUp: "first",
  Home: "first",
  PageDown: "last",
  End: "last"
};
function eB(e, t) {
  return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e;
}
function tB(e, t, n) {
  const a = eB(e.key, n);
  if (!(t === "vertical" && [
    "ArrowLeft",
    "ArrowRight"
  ].includes(a)) && !(t === "horizontal" && [
    "ArrowUp",
    "ArrowDown"
  ].includes(a)))
    return Qz[a];
}
function Z4(e) {
  const t = document.activeElement;
  for (const n of e)
    if (n === t || (n.focus(), document.activeElement !== t)) return;
}
function nB(e, t) {
  return e.map(
    (n, a) => e[(t + a) % e.length]
  );
}
const aB = Zz, iB = Jz;
function rB(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function lB(...e) {
  return (t) => e.forEach(
    (n) => rB(n, t)
  );
}
function sB(...e) {
  return Te(lB(...e), e);
}
const f6 = globalThis != null && globalThis.document ? Mn : () => {
};
function oB(e, t) {
  return A5((n, a) => {
    const i = t[n][a];
    return i ?? n;
  }, e);
}
const K4 = (e) => {
  const { present: t, children: n } = e, a = cB(t), i = typeof n == "function" ? n({
    present: a.isPresent
  }) : Wn.only(n), r = sB(a.ref, i.ref);
  return typeof n == "function" || a.isPresent ? /* @__PURE__ */ lc(i, {
    ref: r
  }) : null;
};
K4.displayName = "Presence";
function cB(e) {
  const [t, n] = re(), a = ie({}), i = ie(e), r = ie("none"), l = e ? "mounted" : "unmounted", [s, c] = oB(l, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return Q(() => {
    const d = td(a.current);
    r.current = s === "mounted" ? d : "none";
  }, [
    s
  ]), f6(() => {
    const d = a.current, o = i.current;
    if (o !== e) {
      const f = r.current, p = td(d);
      e ? c("MOUNT") : p === "none" || (d == null ? void 0 : d.display) === "none" ? c("UNMOUNT") : c(o && f !== p ? "ANIMATION_OUT" : "UNMOUNT"), i.current = e;
    }
  }, [
    e,
    c
  ]), f6(() => {
    if (t) {
      const d = (u) => {
        const p = td(a.current).includes(u.animationName);
        u.target === t && p && Pa(
          () => c("ANIMATION_END")
        );
      }, o = (u) => {
        u.target === t && (r.current = td(a.current));
      };
      return t.addEventListener("animationstart", o), t.addEventListener("animationcancel", d), t.addEventListener("animationend", d), () => {
        t.removeEventListener("animationstart", o), t.removeEventListener("animationcancel", d), t.removeEventListener("animationend", d);
      };
    } else
      c("ANIMATION_END");
  }, [
    t,
    c
  ]), {
    isPresent: [
      "mounted",
      "unmountSuspended"
    ].includes(s),
    ref: Te((d) => {
      d && (a.current = getComputedStyle(d)), n(d);
    }, [])
  };
}
function td(e) {
  return (e == null ? void 0 : e.animationName) || "none";
}
const q4 = "Tabs", [dB, wZ] = rU(q4, [
  Y4
]), J4 = Y4(), [uB, sU] = dB(q4), hB = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeTabs: n, value: a, onValueChange: i, defaultValue: r, orientation: l = "horizontal", dir: s, activationMode: c = "automatic", ...d } = e, o = V4(s), [u, f] = W4({
    prop: a,
    onChange: i,
    defaultProp: r
  });
  return /* @__PURE__ */ st(uB, {
    scope: n,
    baseId: B4(),
    value: u,
    onValueChange: f,
    orientation: l,
    dir: o,
    activationMode: c
  }, /* @__PURE__ */ st(Ts.div, sn({
    dir: o,
    "data-orientation": l
  }, d, {
    ref: t
  })));
}), fB = "TabsList", pB = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeTabs: n, loop: a = !0, ...i } = e, r = sU(fB, n), l = J4(n);
  return /* @__PURE__ */ st(aB, sn({
    asChild: !0
  }, l, {
    orientation: r.orientation,
    dir: r.dir,
    loop: a
  }), /* @__PURE__ */ st(Ts.div, sn({
    role: "tablist",
    "aria-orientation": r.orientation
  }, i, {
    ref: t
  })));
}), UB = "TabsTrigger", mB = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeTabs: n, value: a, disabled: i = !1, ...r } = e, l = sU(UB, n), s = J4(n), c = Q4(l.baseId, a), d = e9(l.baseId, a), o = a === l.value;
  return /* @__PURE__ */ st(iB, sn({
    asChild: !0
  }, s, {
    focusable: !i,
    active: o
  }), /* @__PURE__ */ st(Ts.button, sn({
    type: "button",
    role: "tab",
    "aria-selected": o,
    "aria-controls": d,
    "data-state": o ? "active" : "inactive",
    "data-disabled": i ? "" : void 0,
    disabled: i,
    id: c
  }, r, {
    ref: t,
    onMouseDown: Ei(e.onMouseDown, (u) => {
      !i && u.button === 0 && u.ctrlKey === !1 ? l.onValueChange(a) : u.preventDefault();
    }),
    onKeyDown: Ei(e.onKeyDown, (u) => {
      [
        " ",
        "Enter"
      ].includes(u.key) && l.onValueChange(a);
    }),
    onFocus: Ei(e.onFocus, () => {
      const u = l.activationMode !== "manual";
      !o && !i && u && l.onValueChange(a);
    })
  })));
}), gB = "TabsContent", bB = /* @__PURE__ */ Ot((e, t) => {
  const { __scopeTabs: n, value: a, forceMount: i, children: r, ...l } = e, s = sU(gB, n), c = Q4(s.baseId, a), d = e9(s.baseId, a), o = a === s.value, u = ie(o);
  return Q(() => {
    const f = requestAnimationFrame(
      () => u.current = !1
    );
    return () => cancelAnimationFrame(f);
  }, []), /* @__PURE__ */ st(
    K4,
    {
      present: i || o
    },
    ({ present: f }) => /* @__PURE__ */ st(Ts.div, sn({
      "data-state": o ? "active" : "inactive",
      "data-orientation": s.orientation,
      role: "tabpanel",
      "aria-labelledby": c,
      hidden: !f,
      id: d,
      tabIndex: 0
    }, l, {
      ref: t,
      style: {
        ...e.style,
        animationDuration: u.current ? "0s" : void 0
      }
    }), f && r)
  );
});
function Q4(e, t) {
  return `${e}-trigger-${t}`;
}
function e9(e, t) {
  return `${e}-content-${t}`;
}
const t9 = hB, n9 = pB, a9 = mB, i9 = bB;
var vB = "Expected a function", p6 = NaN, xB = "[object Symbol]", yB = /^\s+|\s+$/g, wB = /^[-+]0x[0-9a-f]+$/i, EB = /^0b[01]+$/i, SB = /^0o[0-7]+$/i, kB = parseInt, MB = typeof gi == "object" && gi && gi.Object === Object && gi, CB = typeof self == "object" && self && self.Object === Object && self, IB = MB || CB || Function("return this")(), TB = Object.prototype, _B = TB.toString, AB = Math.max, jB = Math.min, jf = function() {
  return IB.Date.now();
};
function DB(e, t, n) {
  var a, i, r, l, s, c, d = 0, o = !1, u = !1, f = !0;
  if (typeof e != "function")
    throw new TypeError(vB);
  t = U6(t) || 0, n0(n) && (o = !!n.leading, u = "maxWait" in n, r = u ? AB(U6(n.maxWait) || 0, t) : r, f = "trailing" in n ? !!n.trailing : f);
  function p(S) {
    var w = a, M = i;
    return a = i = void 0, d = S, l = e.apply(M, w), l;
  }
  function U(S) {
    return d = S, s = setTimeout(b, t), o ? p(S) : l;
  }
  function m(S) {
    var w = S - c, M = S - d, I = t - w;
    return u ? jB(I, r - M) : I;
  }
  function g(S) {
    var w = S - c, M = S - d;
    return c === void 0 || w >= t || w < 0 || u && M >= r;
  }
  function b() {
    var S = jf();
    if (g(S))
      return v(S);
    s = setTimeout(b, m(S));
  }
  function v(S) {
    return s = void 0, f && a ? p(S) : (a = i = void 0, l);
  }
  function x() {
    s !== void 0 && clearTimeout(s), d = 0, a = c = i = s = void 0;
  }
  function y() {
    return s === void 0 ? l : v(jf());
  }
  function E() {
    var S = jf(), w = g(S);
    if (a = arguments, i = this, c = S, w) {
      if (s === void 0)
        return U(c);
      if (u)
        return s = setTimeout(b, t), p(c);
    }
    return s === void 0 && (s = setTimeout(b, t)), l;
  }
  return E.cancel = x, E.flush = y, E;
}
function n0(e) {
  var t = typeof e;
  return !!e && (t == "object" || t == "function");
}
function LB(e) {
  return !!e && typeof e == "object";
}
function RB(e) {
  return typeof e == "symbol" || LB(e) && _B.call(e) == xB;
}
function U6(e) {
  if (typeof e == "number")
    return e;
  if (RB(e))
    return p6;
  if (n0(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = n0(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = e.replace(yB, "");
  var n = EB.test(e);
  return n || SB.test(e) ? kB(e.slice(2), n ? 2 : 8) : wB.test(e) ? p6 : +e;
}
var PB = DB;
const NB = /* @__PURE__ */ pl(PB);
function OB(e, t, n, a) {
  Object.defineProperty(e, t, { get: n, set: a, enumerable: !0, configurable: !0 });
}
var $B = {};
OB($B, "LaserPointer", () => Mu);
function Et([e, t, n], [a, i, r]) {
  return [
    e + a,
    t + i,
    n + r
  ];
}
function oo([e, t, n], [a, i, r]) {
  return [
    e - a,
    t - i,
    n - r
  ];
}
function Tt([e, t, n], a) {
  return [
    e * a,
    t * a,
    n * a
  ];
}
function _l([e, t, n]) {
  return [
    e / Math.sqrt(e ** 2 + t ** 2),
    t / Math.sqrt(e ** 2 + t ** 2),
    n
  ];
}
function Jt([e, t, n], a) {
  return [
    Math.cos(a) * e - Math.sin(a) * t,
    Math.sin(a) * e + Math.cos(a) * t,
    n
  ];
}
function FB(e, t, n) {
  return Et(e, Tt(oo(t, e), n));
}
function m6(e, t, n) {
  return Math.atan2(n[1] - e[1], n[0] - e[0]) - Math.atan2(t[1] - e[1], t[0] - e[0]);
}
function g6(e) {
  return Math.atan2(Math.sin(e), Math.cos(e));
}
function b6([e, t]) {
  return Math.sqrt(e ** 2 + t ** 2);
}
function Kl([e, t], [n, a]) {
  return Math.sqrt((n - e) ** 2 + (a - t) ** 2);
}
function zB(e) {
  if (e.length < 2) return 0;
  let t = 0;
  for (let n = 1; n <= e.length - 1; n++) t += Kl(e[n - 1], e[n]);
  return t += Kl(e[e.length - 2], e[e.length - 1]), t;
}
const BB = (e, t, n) => Math.max(t, Math.min(n, e));
function HB(e, t, n) {
  const a = Kl(t, n);
  if (a === 0) return Kl(e, t);
  const i = BB(((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a ** 2, 0, 1), r = [
    t[0] + i * (n[0] - t[0]),
    t[1] + i * (n[1] - t[1]),
    e[2]
  ];
  return Kl(r, e);
}
function ku(e, t) {
  if (t === 0 || e.length <= 2) return e;
  const n = e[0], a = e[e.length - 1], [i, r] = e.reduce(([l, s], c, d) => {
    const o = HB(c, n, a);
    return o > l ? [
      o,
      d
    ] : [
      l,
      s
    ];
  }, [
    0,
    -1
  ]);
  if (i >= t) {
    const l = e[r];
    return [
      ...ku([
        n,
        ...e.slice(1, r),
        l
      ], t).slice(0, -1),
      l,
      ...ku([
        l,
        ...e.slice(r, -1),
        a
      ], t).slice(1)
    ];
  } else return [
    n,
    a
  ];
}
const Ji = class Ji {
  constructor(t) {
    this.originalPoints = [], this.stablePoints = [], this.tailPoints = [], this.isFresh = !0, this.options = Object.assign({}, Ji.defaults, t);
  }
  get lastPoint() {
    return this.tailPoints[this.tailPoints.length - 1] ?? this.stablePoints[this.stablePoints.length - 1];
  }
  addPoint(t) {
    const n = this.originalPoints[this.originalPoints.length - 1];
    if (!(n && n[0] === t[0] && n[1] === t[1])) {
      if (this.originalPoints.push(t), this.isFresh) {
        this.isFresh = !1, this.stablePoints.push(t);
        return;
      }
      this.options.streamline > 0 && (t = FB(this.lastPoint, t, 1 - this.options.streamline)), this.tailPoints.push(t), zB(this.tailPoints) > Ji.constants.maxTailLength && this.stabilizeTail();
    }
  }
  close() {
    this.stabilizeTail();
  }
  stabilizeTail() {
    if (this.options.simplify > 0 && this.options.simplifyPhase == "tail") throw new Error("Not implemented yet");
    this.stablePoints.push(...this.tailPoints), this.tailPoints = [];
  }
  getSize(t, n, a, i, r) {
    return (t ?? this.options.size) * this.options.sizeMapping({
      pressure: n,
      runningLength: r,
      currentIndex: a,
      totalLength: i
    });
  }
  getStrokeOutline(t) {
    if (this.isFresh) return [];
    let n = [
      ...this.stablePoints,
      ...this.tailPoints
    ];
    this.options.simplify > 0 && this.options.simplifyPhase === "input" && (n = ku(n, this.options.simplify));
    const a = n.length;
    if (a === 0) return [];
    if (a === 1) {
      const w = n[0], M = this.getSize(t, w[2], 0, a, 0);
      if (M < 0.5) return [];
      const I = [];
      for (let T = 0; T <= Math.PI * 2; T += Math.PI / 16) I.push(Et(w, Tt(Jt([
        1,
        0,
        0
      ], T), M)));
      return I.push(Et(w, Tt([
        1,
        0,
        0
      ], this.getSize(t, w[2], 0, a, 0)))), I;
    }
    if (a === 2) {
      const w = n[0], M = n[1], I = this.getSize(t, w[2], 0, a, 0), T = this.getSize(t, M[2], 0, a, 0);
      if (I < 0.5 || T < 0.5) return [];
      const _ = [], A = m6(w, [
        w[0],
        w[1] - 100,
        w[2]
      ], M);
      for (let D = A; D <= Math.PI + A; D += Math.PI / 16) _.push(Et(w, Tt(Jt([
        1,
        0,
        0
      ], D), I)));
      for (let D = Math.PI + A; D <= Math.PI * 2 + A; D += Math.PI / 16) _.push(Et(M, Tt(Jt([
        1,
        0,
        0
      ], D), T)));
      return _.push(_[0]), _;
    }
    const i = [], r = [];
    let l = 0, s = 0, c = 0, d = 0;
    for (let w = 1; w < a - 1; w++) {
      const M = n[w - 1], I = n[w], T = n[w + 1];
      let _ = I[2];
      const A = Kl(M, I);
      d += A, l = s + (A - s) * 0.2;
      const D = this.getSize(t, _, w, a, d);
      if (D === 0) {
        c = w + 1;
        continue;
      }
      const P = _l(oo(M, I)), N = _l(oo(T, I)), $ = Jt(P, Math.PI / 2), R = Jt(P, -Math.PI / 2), V = Jt(N, Math.PI / 2), O = Jt(N, -Math.PI / 2), G = Et(I, Tt($, D)), ae = Et(I, Tt(R, D)), he = Et(I, Tt(V, D)), ce = Et(I, Tt(O, D)), Be = Et($, O), He = Et(R, V), Xe = Et(I, Tt(b6(Be) === 0 ? P : _l(Be), D)), Ne = Et(I, Tt(b6(He) === 0 ? N : _l(He), D)), It = g6(m6(I, M, T)), Yt = Ji.constants.cornerDetectionMaxAngle / 180 * Math.PI * Ji.constants.cornerDetectionVariance(l);
      if (Math.abs(It) < Yt) {
        const Ae = Math.abs(g6(Math.PI - It));
        if (Ae === 0) continue;
        if (It < 0) {
          r.push(ae, Ne);
          for (let Oe = 0; Oe <= Ae; Oe += Ae / 4) i.push(Et(I, Jt(Tt($, D), Oe)));
          for (let Oe = Ae; Oe >= 0; Oe -= Ae / 4) r.push(Et(I, Jt(Tt($, D), Oe)));
          r.push(Ne, he);
        } else {
          i.push(G, Xe);
          for (let Oe = 0; Oe <= Ae; Oe += Ae / 4) r.push(Et(I, Jt(Tt($, -D), -Oe)));
          for (let Oe = Ae; Oe >= 0; Oe -= Ae / 4) i.push(Et(I, Jt(Tt($, -D), -Oe)));
          i.push(Xe, ce);
        }
      } else
        i.push(Xe), r.push(Ne);
      s = l;
    }
    if (c >= a - 2)
      if (this.options.keepHead) {
        const w = n[a - 1], M = [];
        for (let I = 0; I <= Math.PI * 2; I += Math.PI / 16) M.push(Et(w, Tt(Jt([
          1,
          0,
          0
        ], I), this.options.size)));
        return M.push(Et(w, Tt([
          1,
          0,
          0
        ], this.options.size))), M;
      } else return [];
    const o = n[c], u = n[c + 1], f = n[a - 2], p = n[a - 1], U = _l(oo(u, o)), m = _l(oo(f, p)), g = Jt(U, -Math.PI / 2), b = Jt(m, Math.PI / 2), v = this.getSize(t, o[2], 0, a, 0), x = [], y = this.options.keepHead ? this.options.size : this.getSize(t, f[2], a - 2, a, d), E = [];
    if (v > 1) {
      for (let w = 0; w <= Math.PI; w += Math.PI / 16) x.unshift(Et(o, Jt(Tt(g, v), -w)));
      x.unshift(Et(o, Tt(g, -v)));
    } else x.push(o);
    for (let w = 0; w <= Math.PI * 3; w += Math.PI / 16) E.push(Et(p, Jt(Tt(b, -y), -w)));
    const S = [
      ...x,
      ...i,
      ...E.reverse(),
      ...r.reverse()
    ];
    return x.length > 0 && S.push(x[0]), this.options.simplify > 0 && this.options.simplifyPhase === "output" ? ku(S, this.options.simplify) : S;
  }
};
Ji.defaults = {
  size: 2,
  streamline: 0.45,
  simplify: 0.1,
  simplifyPhase: "output",
  keepHead: !1,
  sizeMapping: () => 1
}, Ji.constants = {
  cornerDetectionMaxAngle: 75,
  cornerDetectionVariance: (t) => t > 35 ? 0.5 : 1,
  maxTailLength: 50
};
let Mu = Ji;
var r9 = F3(), { useAtom: xt, useSetAtom: vh, useAtomValue: l9, useStore: EZ } = r9, XB = r9.Provider, fa = Xp(), WB = Ix({ "./locales/ar-SA.json": () => import("./ar-SA-G6X2FPQ2-Dy_grM-J.js"), "./locales/az-AZ.json": () => import("./az-AZ-76LH7QW2-BwIKNGFq.js"), "./locales/bg-BG.json": () => import("./bg-BG-XCXSNQG7-B2Sakvjg.js"), "./locales/bn-BD.json": () => import("./bn-BD-2XOGV67Q-BFzos66K.js"), "./locales/ca-ES.json": () => import("./ca-ES-6MX7JW3Y-B3u1pe8_.js"), "./locales/cs-CZ.json": () => import("./cs-CZ-2BRQDIVT-CLmUrlfW.js"), "./locales/da-DK.json": () => import("./da-DK-5WZEPLOC-CN0rRdXf.js"), "./locales/de-DE.json": () => import("./de-DE-XR44H4JA-YQuwyiPu.js"), "./locales/el-GR.json": () => import("./el-GR-BZB4AONW-CuXVELio.js"), "./locales/en.json": () => import("./en-B4ZKOASM-CnFxz9Rq.js"), "./locales/es-ES.json": () => import("./es-ES-U4NZUMDT-DOoAOf2a.js"), "./locales/eu-ES.json": () => import("./eu-ES-A7QVB2H4-LkQkOwps.js"), "./locales/fa-IR.json": () => import("./fa-IR-HGAKTJCU-cf272W2A.js"), "./locales/fi-FI.json": () => import("./fi-FI-Z5N7JZ37-HenVBQDD.js"), "./locales/fr-FR.json": () => import("./fr-FR-RHASNOE6-DDh6oqed.js"), "./locales/gl-ES.json": () => import("./gl-ES-HMX3MZ6V-DED1QoAU.js"), "./locales/he-IL.json": () => import("./he-IL-6SHJWFNN-BKp6jz74.js"), "./locales/hi-IN.json": () => import("./hi-IN-IWLTKZ5I-CaAVjuu4.js"), "./locales/hu-HU.json": () => import("./hu-HU-A5ZG7DT2-D_FQsuaG.js"), "./locales/id-ID.json": () => import("./id-ID-SAP4L64H-Bc2IDCEu.js"), "./locales/it-IT.json": () => import("./it-IT-JPQ66NNP-fmeb73BD.js"), "./locales/ja-JP.json": () => import("./ja-JP-DBVTYXUO-BpQcP5s2.js"), "./locales/kaa.json": () => import("./kaa-6HZHGXH3-Sk06LLkG.js"), "./locales/kab-KAB.json": () => import("./kab-KAB-ZGHBKWFO-wMo2NOTo.js"), "./locales/kk-KZ.json": () => import("./kk-KZ-P5N5QNE5-J2ZhYr5h.js"), "./locales/km-KH.json": () => import("./km-KH-HSX4SM5Z-BiqkWIKI.js"), "./locales/ko-KR.json": () => import("./ko-KR-MTYHY66A-DzNut7Ou.js"), "./locales/ku-TR.json": () => import("./ku-TR-6OUDTVRD-I8nbOTVT.js"), "./locales/lt-LT.json": () => import("./lt-LT-XHIRWOB4-CA1Qoina.js"), "./locales/lv-LV.json": () => import("./lv-LV-5QDEKY6T-yGmweUQ9.js"), "./locales/mr-IN.json": () => import("./mr-IN-CRQNXWMA-DD56q2Bb.js"), "./locales/my-MM.json": () => import("./my-MM-5M5IBNSE-CiUJob7M.js"), "./locales/nb-NO.json": () => import("./nb-NO-T6EIAALU-yU4ZmxsH.js"), "./locales/nl-NL.json": () => import("./nl-NL-IS3SIHDZ-Bfndc-bA.js"), "./locales/nn-NO.json": () => import("./nn-NO-6E72VCQL-k-yEBBtp.js"), "./locales/oc-FR.json": () => import("./oc-FR-POXYY2M6-BHP0BngQ.js"), "./locales/pa-IN.json": () => import("./pa-IN-N4M65BXN-iMBOUDEL.js"), "./locales/percentages.json": () => import("./percentages-BXMCSKIN-C1Ob5L1O.js"), "./locales/pl-PL.json": () => import("./pl-PL-T2D74RX3-umY3X993.js"), "./locales/pt-BR.json": () => import("./pt-BR-5N22H2LF-BbXRxAiQ.js"), "./locales/pt-PT.json": () => import("./pt-PT-UZXXM6DQ-CAbk9uyR.js"), "./locales/ro-RO.json": () => import("./ro-RO-JPDTUUEW-CQsvWL7e.js"), "./locales/ru-RU.json": () => import("./ru-RU-B4JR7IUQ-eCqrXW16.js"), "./locales/si-LK.json": () => import("./si-LK-N5RQ5JYF-BJ0aT0qF.js"), "./locales/sk-SK.json": () => import("./sk-SK-C5VTKIMK-a0oC6nqc.js"), "./locales/sl-SI.json": () => import("./sl-SI-NN7IZMDC-CzC9Nu0t.js"), "./locales/sv-SE.json": () => import("./sv-SE-XGPEYMSR-BdBLf6mA.js"), "./locales/ta-IN.json": () => import("./ta-IN-2NMHFXQM-QdbBrB9Y.js"), "./locales/th-TH.json": () => import("./th-TH-HPSO5L25-DHq5qULv.js"), "./locales/tr-TR.json": () => import("./tr-TR-DEFEU3FU-Co2gtM1k.js"), "./locales/uk-UA.json": () => import("./uk-UA-QMV73CPH-CigUaW_y.js"), "./locales/vi-VN.json": () => import("./vi-VN-M7AON7JQ-D5_qki82.js"), "./locales/zh-CN.json": () => import("./zh-CN-LNUGB5OW-4vEvoGvU.js"), "./locales/zh-HK.json": () => import("./zh-HK-E62DVLB3-DxugmW4V.js"), "./locales/zh-TW.json": () => import("./zh-TW-RAJ6MFWO-CiujHcbT.js") }), VB = 85, _s = { code: "en", label: "English" }, oU = [_s, ...[{ code: "ar-SA", label: "", rtl: !0 }, { code: "bg-BG", label: "" }, { code: "ca-ES", label: "Catal" }, { code: "cs-CZ", label: "esky" }, { code: "de-DE", label: "Deutsch" }, { code: "el-GR", label: "" }, { code: "es-ES", label: "Espaol" }, { code: "eu-ES", label: "Euskara" }, { code: "fa-IR", label: "", rtl: !0 }, { code: "fi-FI", label: "Suomi" }, { code: "fr-FR", label: "Franais" }, { code: "gl-ES", label: "Galego" }, { code: "he-IL", label: "", rtl: !0 }, { code: "hi-IN", label: "" }, { code: "hu-HU", label: "Magyar" }, { code: "id-ID", label: "Bahasa Indonesia" }, { code: "it-IT", label: "Italiano" }, { code: "ja-JP", label: "" }, { code: "kab-KAB", label: "Taqbaylit" }, { code: "kk-KZ", label: " " }, { code: "ko-KR", label: "" }, { code: "ku-TR", label: "Kurd" }, { code: "lt-LT", label: "Lietuvi" }, { code: "lv-LV", label: "Latvieu" }, { code: "my-MM", label: "Burmese" }, { code: "nb-NO", label: "Norsk bokml" }, { code: "nl-NL", label: "Nederlands" }, { code: "nn-NO", label: "Norsk nynorsk" }, { code: "oc-FR", label: "Occitan" }, { code: "pa-IN", label: "" }, { code: "pl-PL", label: "Polski" }, { code: "pt-BR", label: "Portugus Brasileiro" }, { code: "pt-PT", label: "Portugus" }, { code: "ro-RO", label: "Romn" }, { code: "ru-RU", label: "" }, { code: "sk-SK", label: "Slovenina" }, { code: "sv-SE", label: "Svenska" }, { code: "sl-SI", label: "Slovenina" }, { code: "tr-TR", label: "Trke" }, { code: "uk-UA", label: "" }, { code: "zh-CN", label: "" }, { code: "zh-TW", label: "" }, { code: "vi-VN", label: "Ting Vit" }, { code: "mr-IN", label: "" }].filter((e) => hO[e.code] >= VB).sort((e, t) => e.label > t.label ? 1 : -1)], Cu = "__test__";
ve.DEV && oU.unshift({ code: Cu, label: "test language" }, { code: `${Cu}.rtl`, label: "test language (rtl)", rtl: !0 });
var Wl = _s, jd = {}, s9 = async (e) => {
  if (Wl = e, document.documentElement.dir = Wl.rtl ? "rtl" : "ltr", document.documentElement.lang = Wl.code, e.code.startsWith(Cu)) jd = {};
  else try {
    jd = await WB(`./locales/${Wl.code}.json`);
  } catch (t) {
    console.error(`Failed to load language ${e.code}:`, t.message), jd = D3;
  }
  fa.set(o9, e.code);
}, nc = () => Wl, v6 = (e, t) => {
  for (let n = 0; n < t.length; ++n) {
    let a = t[n];
    if (e[a] === void 0) return;
    e = e[a];
  }
  if (typeof e == "string") return e;
}, C = (e, t, n) => {
  if (Wl.code.startsWith(Cu)) return `[[${t ? `${e}(${JSON.stringify(t).slice(1, -1)})` : e}]]`;
  let a = e.split("."), i = v6(jd, a) || v6(D3, a) || n;
  if (i === void 0) {
    let r = `Can't find translation for ${e}`;
    return console.warn(r), "";
  }
  if (t) for (let r in t) i = i.replace(`{{${r}}}`, String(t[r]));
  return i;
}, o9 = Gt(_s.code), on = () => {
  let e = l9(o9);
  return { t: C, langCode: e };
}, GB = ({ size: e = "1em", circleWidth: t = 8, synchronized: n = !1, className: a = "" }) => {
  let i = -(Y.useRef(Date.now()).current % 1600);
  return h.jsx("div", { className: `Spinner ${a}`, children: h.jsx("svg", { viewBox: "0 0 100 100", style: { width: e, height: e, "--spinner-delay": n ? `${i}ms` : 0 }, children: h.jsx("circle", { cx: "50", cy: "50", r: 50 - t / 2, strokeWidth: t, fill: "none", strokeMiterlimit: "10" }) }) });
}, Ri = GB, c9 = ({ delay: e, theme: t }) => {
  let [n, a] = re(!!e);
  return Q(() => {
    if (!e) return;
    let i = setTimeout(() => {
      a(!1);
    }, e);
    return () => clearTimeout(i);
  }, [e]), n ? null : h.jsxs("div", { className: ne("LoadingMessage", { "LoadingMessage--dark": t === Me.DARK }), children: [h.jsx("div", { children: h.jsx(Ri, {}) }), h.jsx("div", { className: "LoadingMessage-text", children: C("labels.loadingScene") })] });
}, YB = (e) => {
  let [t, n] = re(!0);
  return Q(() => {
    let a = async () => {
      await s9(i), n(!1);
    }, i = oU.find((r) => r.code === e.langCode) || _s;
    a();
  }, [e.langCode]), t ? h.jsx(c9, { theme: e.theme }) : e.children;
}, Ce = Y.forwardRef(({ size: e = "medium", visible: t = !0, className: n = "", ...a }, i) => {
  let { id: r } = li(), l = Y.useRef(null);
  Y.useImperativeHandle(i, () => l.current);
  let s = `ToolIcon_size_${e}`, [c, d] = re(!1), o = ie(!0), u = async (p) => {
    var m;
    let U = "onClick" in a && ((m = a.onClick) == null ? void 0 : m.call(a, p));
    if (pc(U)) try {
      d(!0), await U;
    } catch (g) {
      if (g instanceof Zu) console.warn(g);
      else throw g;
    } finally {
      o.current && d(!1);
    }
  };
  Q(() => (o.current = !0, () => {
    o.current = !1;
  }), []);
  let f = ie(null);
  if (a.type === "button" || a.type === "icon" || a.type === "submit") {
    let p = a.type === "icon" ? "button" : a.type;
    return h.jsxs("button", { className: ne("ToolIcon_type_button", s, n, t && !a.hidden ? "ToolIcon_type_button--show" : "ToolIcon_type_button--hide", { ToolIcon: !a.hidden, "ToolIcon--selected": a.selected, "ToolIcon--plain": a.type === "icon" }), style: a.style, "data-testid": a["data-testid"], hidden: a.hidden, title: a.title, "aria-label": a["aria-label"], type: p, onClick: u, ref: l, disabled: c || a.isLoading || !!a.disabled, children: [(a.icon || a.label) && h.jsxs("div", { className: "ToolIcon__icon", "aria-hidden": "true", "aria-disabled": !!a.disabled, children: [a.icon || a.label, a.keyBindingLabel && h.jsx("span", { className: "ToolIcon__keybinding", children: a.keyBindingLabel }), a.isLoading && h.jsx(Ri, {})] }), a.showAriaLabel && h.jsxs("div", { className: "ToolIcon__label", children: [a["aria-label"], " ", c && h.jsx(Ri, {})] }), a.children] });
  }
  return h.jsxs("label", { className: ne("ToolIcon", n), title: a.title, onPointerDown: (p) => {
    var U;
    f.current = p.pointerType || null, (U = a.onPointerDown) == null || U.call(a, { pointerType: p.pointerType || null });
  }, onPointerUp: () => {
    requestAnimationFrame(() => {
      f.current = null;
    });
  }, children: [h.jsx("input", { className: `ToolIcon_type_radio ${s}`, type: "radio", name: a.name, "aria-label": a["aria-label"], "aria-keyshortcuts": a["aria-keyshortcuts"], "data-testid": a["data-testid"], id: `${r}-${a.id}`, onChange: () => {
    var p;
    (p = a.onChange) == null || p.call(a, { pointerType: f.current });
  }, checked: a.checked, ref: l }), h.jsxs("div", { className: "ToolIcon__icon", children: [a.icon, a.keyBindingLabel && h.jsx("span", { className: "ToolIcon__keybinding", children: a.keyBindingLabel })] })] });
});
Ce.displayName = "ToolButton";
var ZB = (e, t, n) => {
  let a = new Set(xe(e.filter((o) => de(o)), t).map((o) => o.id)), i = {}, r = n.scene.getNonDeletedElementsMap(), l = /* @__PURE__ */ new Set();
  for (let o of a) {
    let u = ti(e, o);
    for (let f of u) if (!l.has(f.id)) {
      if (rt(f)) {
        let p = Vt(f, r);
        p && (i[p.id] = !0);
      } else i[f.id] = !0;
      l.add(f.id);
    }
  }
  let s = !0, c = e.map((o) => {
    if (t.selectedElementIds[o.id]) {
      let u = rt(o) ? Vt(o, r) : null;
      return o.frameId && a.has(o.frameId) ? (s = !1, i[o.id] = !0, o) : u != null && u.frameId && a.has(u == null ? void 0 : u.frameId) ? o : (o.boundElements && o.boundElements.forEach((f) => {
        var U, m;
        let p = n.scene.getNonDeletedElementsMap().get(f.id);
        p && ee(p) && (W(p, { startBinding: o.id === ((U = p.startBinding) == null ? void 0 : U.elementId) ? null : p.startBinding, endBinding: o.id === ((m = p.endBinding) == null ? void 0 : m.elementId) ? null : p.endBinding }), W(p, { points: p.points }));
      }), ge(o, { isDeleted: !0 }));
    }
    return o.frameId && a.has(o.frameId) ? (s = !1, rt(o) || (i[o.id] = !0), ge(o, { frameId: null })) : rt(o) && t.selectedElementIds[o.containerId] ? ge(o, { isDeleted: !0 }) : o;
  }), d = t.editingGroupId;
  if (s && t.editingGroupId) {
    let o = it(c, t.editingGroupId).filter((u) => !u.isDeleted);
    if (o.length > 1) o[0] && (i[o[0].id] = !0);
    else {
      d = null, o[0] && (i[o[0].id] = !0);
      let u = o[0];
      if (u) {
        let f = u.groupIds.findIndex((U) => U === t.editingGroupId), p = u.groupIds[f + 1];
        if (p) {
          let U = it(c, p).filter((m) => !m.isDeleted);
          U.length > 1 && (d = p, U.forEach((m) => {
            i[m.id] = !0;
          }));
        }
      }
    }
  }
  return { elements: c, appState: { ...t, ...dn({ selectedElementIds: i, editingGroupId: d }, c, t, null) } };
}, x6 = (e, t) => {
  if (e.editingGroupId) {
    let n = it(Qe(t), e.editingGroupId);
    if (n.length) return { ...e, selectedElementIds: { [n[0].id]: !0 } };
  }
  return e;
}, d9 = Z({ name: "deleteSelectedElements", label: "labels.delete", icon: ll, trackEvent: { category: "element", action: "delete" }, perform: (e, t, n, a) => {
  if (t.editingLinearElement) {
    let { elementId: l, selectedPointsIndices: s, startBindingElement: c, endBindingElement: d } = t.editingLinearElement, o = a.scene.getNonDeletedElementsMap(), u = J.getElement(l, o);
    if (!u || s == null) return !1;
    if (u.points.length < 2) {
      let p = e.map((m) => m.id === u.id ? ge(m, { isDeleted: !0 }) : m), U = x6(t, p);
      return { elements: p, appState: { ...U, editingLinearElement: null }, captureUpdate: H.IMMEDIATELY };
    }
    let f = { startBindingElement: s != null && s.includes(0) ? null : c, endBindingElement: s != null && s.includes(u.points.length - 1) ? null : d };
    return J.deletePoints(u, s), { elements: e, appState: { ...t, editingLinearElement: { ...t.editingLinearElement, ...f, selectedPointsIndices: (s == null ? void 0 : s[0]) > 0 ? [s[0] - 1] : [0] } }, captureUpdate: H.IMMEDIATELY };
  }
  let { elements: i, appState: r } = ZB(e, t, a);
  return h7(i, i.filter((l) => l.isDeleted)), r = x6(r, i), { elements: i, appState: { ...r, activeTool: Ct(t, { type: "selection" }), multiElement: null, activeEmbeddable: null }, captureUpdate: Dt(Qe(e), t) ? H.IMMEDIATELY : H.EVENTUALLY };
}, keyTest: (e, t, n) => (e.key === L.BACKSPACE || e.key === L.DELETE) && !e[L.CTRL_OR_CMD], PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsx(Ce, { type: "button", icon: ll, title: C("labels.delete"), "aria-label": C("labels.delete"), onClick: () => n(null), visible: Dt(Qe(e), t) }) }), a0 = (e, t) => e.frameId === t || e.id === t, u9 = (e, t, n) => {
  let a = [], i = [], r = null, l = -1, s = ue(n || xe(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 }));
  for (; ++l < e.length; ) {
    let c = e[l];
    s.get(c.id) ? (i.length && (a = a.concat(i), i = []), a.push(l), r = l + 1) : c.isDeleted && r === l ? (r = l + 1, i.push(l)) : i = [];
  }
  return a;
}, KB = (e) => {
  let t = 0;
  return e.reduce((n, a, i) => (i > 0 && e[i - 1] !== a - 1 && (t = ++t), (n[t] || (n[t] = [])).push(a), n), []);
}, y6 = (e, t, n) => {
  var a, i;
  if ("containerId" in e && e.containerId) {
    let r = Ai.getScene(e).getElement(e.containerId);
    if (r) return n === "left" ? Math.min(t.indexOf(r), t.indexOf(e)) : Math.max(t.indexOf(r), t.indexOf(e));
  } else {
    let r = (i = (a = e.boundElements) == null ? void 0 : a.find((l) => l.type !== "arrow")) == null ? void 0 : i.id;
    if (r) {
      let l = Ai.getScene(e).getElement(r);
      if (l) return n === "left" ? Math.min(t.indexOf(l), t.indexOf(e)) : Math.max(t.indexOf(l), t.indexOf(e));
    }
  }
}, qB = (e, t) => {
  let n = -1, a = -1;
  return e.forEach((i, r) => {
    a0(i, t) && (n === -1 && (n = r), a = r);
  }), n === -1 ? [] : e.slice(n, a + 1);
}, JB = (e, t, n, a, i) => {
  let r = t[n], l = (u) => u.isDeleted ? !1 : i ? u.frameId === i : e.editingGroupId ? u.groupIds.includes(e.editingGroupId) : !0, s = a === "left" ? Pr(t, (u) => l(u), Math.max(0, n - 1)) : Jb(t, (u) => l(u), n + 1), c = t[s];
  if (!c) return -1;
  if (e.editingGroupId) {
    if ((r == null ? void 0 : r.groupIds.join("")) === (c == null ? void 0 : c.groupIds.join(""))) return y6(c, t, a) ?? s;
    if (!(c != null && c.groupIds.includes(e.editingGroupId))) return -1;
  }
  if (!i && (c.frameId || de(c))) {
    let u = qB(t, c.frameId || c.id);
    return a === "left" ? t.indexOf(u[0]) : t.indexOf(u[u.length - 1]);
  }
  if (!c.groupIds.length) return y6(c, t, a) ?? s;
  let d = e.editingGroupId ? c.groupIds[c.groupIds.indexOf(e.editingGroupId) - 1] : c.groupIds[c.groupIds.length - 1], o = it(t, d);
  return o.length ? a === "left" ? t.indexOf(o[0]) : t.indexOf(o[o.length - 1]) : s;
}, h9 = (e, t) => t.reduce((n, a) => {
  let i = e[a];
  return n.set(i.id, i), n;
}, /* @__PURE__ */ new Map()), f9 = (e, t, n) => {
  let a = u9(e, t), i = h9(e, a), r = KB(a);
  n === "right" && (r = r.reverse());
  let l = new Set(a.filter((s) => de(e[s])).map((s) => e[s].id));
  return r.forEach((s, c) => {
    var v;
    let d = s[0], o = s[s.length - 1], u = n === "left" ? d : o, f = s.some((x) => {
      let y = e[x];
      return y.frameId && l.has(y.frameId);
    }) ? null : (v = e[u]) == null ? void 0 : v.frameId, p = JB(t, e, u, n, f);
    if (p === -1 || u === p) return;
    let U = n === "left" ? e.slice(0, p) : e.slice(0, d), m = e.slice(d, o + 1), g = n === "left" ? e.slice(p, d) : e.slice(o + 1, p + 1), b = n === "left" ? e.slice(o + 1) : e.slice(p + 1);
    e = n === "left" ? [...U, ...m, ...g, ...b] : [...U, ...g, ...m, ...b];
  }), ei(e, i), e;
}, p9 = (e, t, n, a, i) => {
  let r = u9(e, t, i), l = h9(e, r), s = [], c, d;
  if (n === "left") {
    if (a) c = Jb(e, (U) => a0(U, a));
    else if (t.editingGroupId) {
      let U = it(e, t.editingGroupId);
      if (!U.length) return e;
      c = e.indexOf(U[0]);
    } else c = 0;
    d = r[r.length - 1];
  } else {
    if (a) d = Pr(e, (U) => a0(U, a));
    else if (t.editingGroupId) {
      let U = it(e, t.editingGroupId);
      if (!U.length) return e;
      d = e.indexOf(U[U.length - 1]);
    } else d = e.length - 1;
    c = r[0];
  }
  c === -1 && (c = 0);
  for (let U = c; U < d + 1; U++) r.includes(U) || s.push(e[U]);
  let o = Array.from(l.values()), u = e.slice(0, c), f = e.slice(d + 1), p = n === "left" ? [...u, ...o, ...s, ...f] : [...u, ...s, ...o, ...f];
  return ei(p, l), p;
};
function U9(e, t, n, a) {
  let i = ue(xe(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 })), r = { regularElements: [], frameChildren: /* @__PURE__ */ new Map() }, l = /* @__PURE__ */ new Set();
  for (let d of e) i.has(d.id) && de(d) && l.add(d.id);
  for (let d of e) if (i.has(d.id)) if (de(d) || d.frameId && l.has(d.frameId)) r.regularElements.push(d);
  else if (!d.frameId) r.regularElements.push(d);
  else {
    let o = r.frameChildren.get(d.frameId) || [];
    o.push(d), r.frameChildren.set(d.frameId, o);
  }
  let s = e, c = Array.from(r.frameChildren.entries());
  for (let [d, o] of c) s = a(e, t, n, d, o);
  return a(s, t, n, null, r.regularElements);
}
var QB = (e, t) => f9(e, t, "left"), eH = (e, t) => f9(e, t, "right"), tH = (e, t) => U9(e, t, "left", p9), nH = (e, t) => U9(e, t, "right", p9), aH = Z({ name: "sendBackward", label: "labels.sendBackward", keywords: ["move down", "zindex", "layer"], icon: lm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: QB(e, t), appState: t, captureUpdate: H.IMMEDIATELY }), keyPriority: 40, keyTest: (e) => e[L.CTRL_OR_CMD] && !e.shiftKey && e.code === _e.BRACKET_LEFT, PanelComponent: ({ updateData: e, appState: t }) => h.jsx("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.sendBackward")}  ${X("CtrlOrCmd+[")}`, children: lm }) }), iH = Z({ name: "bringForward", label: "labels.bringForward", keywords: ["move up", "zindex", "layer"], icon: rm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: eH(e, t), appState: t, captureUpdate: H.IMMEDIATELY }), keyPriority: 40, keyTest: (e) => e[L.CTRL_OR_CMD] && !e.shiftKey && e.code === _e.BRACKET_RIGHT, PanelComponent: ({ updateData: e, appState: t }) => h.jsx("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.bringForward")}  ${X("CtrlOrCmd+]")}`, children: rm }) }), rH = Z({ name: "sendToBack", label: "labels.sendToBack", keywords: ["move down", "zindex", "layer"], icon: om, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: tH(e, t), appState: t, captureUpdate: H.IMMEDIATELY }), keyTest: (e) => Za ? e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.BRACKET_LEFT : e[L.CTRL_OR_CMD] && e.shiftKey && e.code === _e.BRACKET_LEFT, PanelComponent: ({ updateData: e, appState: t }) => h.jsx("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.sendToBack")}  ${X(Za ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")}`, children: om }) }), lH = Z({ name: "bringToFront", label: "labels.bringToFront", keywords: ["move up", "zindex", "layer"], icon: sm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: nH(e, t), appState: t, captureUpdate: H.IMMEDIATELY }), keyTest: (e) => Za ? e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.BRACKET_RIGHT : e[L.CTRL_OR_CMD] && e.shiftKey && e.code === _e.BRACKET_RIGHT, PanelComponent: ({ updateData: e, appState: t }) => h.jsx("button", { type: "button", className: "zIndexButton", onClick: (n) => e(null), title: `${C("labels.bringToFront")}  ${X(Za ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")}`, children: sm }) }), sH = Z({ name: "selectAll", label: "labels.selectAll", icon: SI, trackEvent: { category: "canvas" }, viewMode: !1, perform: (e, t, n, a) => {
  if (t.editingLinearElement) return !1;
  let i = e.filter((r) => !r.isDeleted && !(q(r) && r.containerId) && !r.locked).reduce((r, l) => (r[l.id] = !0, r), {});
  return { appState: { ...t, ...dn({ editingGroupId: null, selectedElementIds: i }, Qe(e), t, a), selectedLinearElement: Object.keys(i).length === 1 && pe(e[0]) ? new J(e[0]) : null }, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.A }), oH = (e) => {
  let t = e.slice(), n = /* @__PURE__ */ new Set(), a = (r) => {
    var d, o, u;
    let l = (o = (d = r[0]) == null ? void 0 : d.groupIds) == null ? void 0 : o.join(""), s = [r[0]], c = [];
    for (let f of r.slice(1)) ((u = f.groupIds) == null ? void 0 : u.join("")) === l ? s.push(f) : c.push(f);
    return c.length ? [...s, ...a(c)] : s;
  }, i = /* @__PURE__ */ new Map();
  return t.forEach((r, l) => {
    var s;
    if (!i.has(r.id)) if ((s = r.groupIds) != null && s.length) {
      let c = r.groupIds[r.groupIds.length - 1], d = t.slice(l).filter((o) => {
        var f;
        let u = (f = o == null ? void 0 : o.groupIds) == null ? void 0 : f.some((p) => p === c);
        return u && i.set(o.id, !0), u;
      });
      for (let o of a(d)) n.add(o);
    } else n.add(r);
  }), n.size !== e.length ? (console.error("normalizeGroupElementOrder: lost some elements... bailing!"), e) : [...n];
}, cH = (e) => {
  let t = CM(e), n = e.slice(), a = /* @__PURE__ */ new Set();
  return n.forEach((i, r) => {
    var l, s, c;
    i && ((l = i.boundElements) != null && l.length ? (a.add(i), n[r] = null, i.boundElements.forEach((d) => {
      let o = t.get(d.id);
      o && d.type === "text" && (a.add(o[0]), n[o[1]] = null);
    })) : i.type === "text" && i.containerId && ((c = (s = t.get(i.containerId)) == null ? void 0 : s[0].boundElements) != null && c.find((d) => d.id === i.id)) || (a.add(i), n[r] = null));
  }), a.size !== e.length ? (console.error("normalizeBoundElementsOrder: lost some elements... bailing!"), e) : [...a];
}, dH = (e) => cH(oH(e)), uH = Z({ name: "duplicateSelection", label: "labels.duplicateSelection", icon: U1, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  if (t.editingLinearElement) try {
    let r = J.duplicateSelectedPoints(t, a.scene.getNonDeletedElementsMap());
    return { elements: e, appState: r, captureUpdate: H.IMMEDIATELY };
  } catch {
    return !1;
  }
  let i = hH(e, t);
  if (a.props.onDuplicate && i.elements) {
    let r = a.props.onDuplicate(i.elements, e);
    r && (i.elements = r);
  }
  return { ...i, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.D, PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsx(Ce, { type: "button", icon: U1, title: `${C("labels.duplicateSelection")}  ${X("CtrlOrCmd+D")}`, "aria-label": C("labels.duplicateSelection"), onClick: () => n(null), visible: Dt(Qe(e), t) }) }), hH = (e, t) => {
  let n = /* @__PURE__ */ new Map(), a = [], i = [], r = /* @__PURE__ */ new Map(), l = /* @__PURE__ */ new Map(), s = ue(e), c = (m) => {
    let g = Q2(m).reduce((b, v) => {
      if (o.has(v.id)) return b;
      o.set(v.id, !0);
      let x = j7(t.editingGroupId, n, v, { x: v.x + Gd / 2, y: v.y + Gd / 2 });
      return o.set(x.id, !0), l.set(x.id, x), r.set(v.id, x.id), i.push(v), a.push(x), b.push(x), b;
    }, []);
    return Array.isArray(m) ? g : g[0] || null;
  };
  e = dH(e);
  let d = ue(xe(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 })), o = /* @__PURE__ */ new Map(), u = e.slice(), f = (m, g) => {
    rn(m !== -1, "targetIndex === -1 "), !(!Array.isArray(g) && !g) && u.splice(m + 1, 0, ...Q2(g));
  }, p = new Set(e.filter((m) => d.has(m.id) && de(m)).map((m) => m.id));
  for (let m of e) {
    if (o.has(m.id) || !d.has(m.id)) continue;
    let g = g7(t, m);
    if (g) {
      let b = it(e, g).flatMap((x) => de(x) ? [...ti(e, x.id), x] : [x]), v = Pr(u, (x) => {
        var y;
        return (y = x.groupIds) == null ? void 0 : y.includes(g);
      });
      f(v, c(b));
      continue;
    }
    if (!(m.frameId && p.has(m.frameId))) {
      if (de(m)) {
        let b = m.id, v = ti(e, b), x = Pr(u, (y) => y.frameId === b || y.id === b);
        f(x, c([...v, m]));
        continue;
      }
      if (Jn(m)) {
        let b = be(m, s), v = Pr(u, (x) => x.id === m.id || "containerId" in x && x.containerId === m.id);
        b ? f(v, c([m, b])) : f(v, c(m));
        continue;
      }
      if (rt(m)) {
        let b = Vt(m, s), v = Pr(u, (x) => x.id === m.id || x.id === (b == null ? void 0 : b.id));
        b ? f(v, c([b, m])) : f(v, c(m));
        continue;
      }
      f(Pr(u, (b) => b.id === m.id), c(m));
    }
  }
  w7(u, i, r), u7(u, i, r), l3(u, i, r);
  let U = Rp(a);
  return { elements: u, appState: { ...t, ...dn({ editingGroupId: t.editingGroupId, selectedElementIds: U.reduce((m, g) => (rt(g) || (m[g.id] = !0), m), {}) }, Qe(u), t, null) } };
}, fH = /* @__PURE__ */ new Set(["command_palette", "export"]), tt = (e, t, n, a) => {
  try {
    if (typeof window > "u" || ve.VITE_WORKER_ID || ve.VITE_APP_ENABLE_TRACKING !== "true" || !fH.has(e) || ve.DEV) return;
    ve.PROD || console.info("trackEvent", { category: e, action: t, label: n, value: a }), window.sa_event && window.sa_event(t, { category: e, label: n, value: a });
  } catch (i) {
    console.error("error during analytics", i);
  }
}, m9 = Ot((e, t) => {
  let { title: n, className: a, testId: i, active: r, standalone: l, icon: s, onClick: c } = e;
  return h.jsx("button", { type: "button", ref: t, title: n, "data-testid": i, className: ne(a, { standalone: l, active: r }), onClick: c, children: s }, n);
}), ii = (e) => h.jsx("div", { className: "buttonList", children: e.options.map((t) => e.type === "button" ? h.jsx(m9, { icon: t.icon, title: t.text, testId: t.testId, active: t.active ?? e.value === t.value, onClick: (n) => e.onClick(t.value, n) }, t.text) : h.jsxs("label", { className: ne({ active: e.value === t.value }), title: t.text, children: [h.jsx("input", { type: "radio", name: e.group, onChange: () => e.onChange(t.value), checked: e.value === t.value, "data-testid": t.testId }), t.icon] }, t.text)) }), pH = ({ onChange: e, type: t, activeColor: n, topPicks: a }) => {
  let i;
  return t === "elementStroke" && (i = Lb), t === "elementBackground" && (i = Rb), t === "canvasBackground" && (i = Pb), a && (i = a), i ? h.jsx("div", { className: "color-picker__top-picks", children: i.map((r) => h.jsx("button", { className: ne("color-picker__button", { active: r === n, "is-transparent": r === "transparent" || !r }), style: { "--swatch-color": r }, type: "button", title: r, onClick: () => e(r), "data-testid": `color-top-pick-${r}`, children: h.jsx("div", { className: "color-picker__button-outline" }) }, r)) }) : (console.error("Invalid type for TopPicks"), null);
}, g9 = () => h.jsx("div", { style: { width: 1, height: "1rem", backgroundColor: "var(--default-border-color)", margin: "0 auto" } }), xh = ({ palette: e, color: t }) => {
  for (let [n, a] of Object.entries(e)) if (Array.isArray(a)) {
    let i = a.indexOf(t);
    if (i > -1) return { colorName: n, shade: i };
  } else if (a === t) return { colorName: n, shade: null };
  return null;
}, i0 = [["q", "w", "e", "r", "t"], ["a", "s", "d", "f", "g"], ["z", "x", "c", "v", "b"]].flat(), b9 = ({ color: e, palette: t }) => !Object.values(t).flat().includes(e), UH = (e, t, n) => {
  let a = { elementBackground: "backgroundColor", elementStroke: "strokeColor" }, i = e.filter((l) => {
    if (l.isDeleted) return !1;
    let s = l[a[t]];
    return b9({ color: s, palette: n });
  }), r = /* @__PURE__ */ new Map();
  return i.forEach((l) => {
    let s = l[a[t]];
    r.has(s) ? r.set(s, r.get(s) + 1) : r.set(s, 1);
  }), [...r.entries()].sort((l, s) => s[1] - l[1]).map((l) => l[0]).slice(0, vk);
}, As = Gt(null), w6 = (e, t, n) => (e * 299 + t * 587 + n * 114) / 1e3 >= 160 ? "black" : "white", mH = (e, t) => {
  if (t) {
    let r = new Option().style;
    if (r.color = e, r.color) {
      let l = r.color.replace(/^(rgb|rgba)\(/, "").replace(/\)$/, "").replace(/\s/g, "").split(","), s = parseInt(l[0]), c = parseInt(l[1]), d = parseInt(l[2]);
      return w6(s, c, d);
    }
  }
  if (e === "transparent") return "black";
  let n = parseInt(e.substring(1, 3), 16), a = parseInt(e.substring(3, 5), 16), i = parseInt(e.substring(5, 7), 16);
  return w6(n, a, i);
}, gH = ({ color: e, keyLabel: t, isCustomColor: n = !1, isShade: a = !1 }) => h.jsxs("div", { className: "color-picker__button__hotkey-label", style: { color: mH(e, n) }, children: [a && "", t] }), cU = gH, bH = ({ hex: e, onChange: t, palette: n }) => {
  let a = xh({ color: e || "transparent", palette: n }), [i, r] = xt(As), l = ie(null);
  if (Q(() => {
    l.current && i === "shades" && l.current.focus();
  }, [a, i]), a) {
    let { colorName: s, shade: c } = a, d = n[s];
    if (Array.isArray(d)) return h.jsx("div", { className: "color-picker-content--default shades", children: d.map((o, u) => h.jsxs("button", { ref: u === c && i === "shades" ? l : void 0, tabIndex: -1, type: "button", className: ne("color-picker__button color-picker__button--large", { active: u === c }), "aria-label": "Shade", title: `${s} - ${u + 1}`, style: o ? { "--swatch-color": o } : void 0, onClick: () => {
      t(o), r("shades");
    }, children: [h.jsx("div", { className: "color-picker__button-outline" }), h.jsx(cU, { color: o, keyLabel: u + 1, isShade: !0 })] }, u)) });
  }
  return h.jsxs("div", { className: "color-picker-content--default", style: { position: "relative" }, tabIndex: -1, children: [h.jsx("button", { type: "button", tabIndex: -1, className: "color-picker__button color-picker__button--large color-picker__button--no-focus-visible" }), h.jsx("div", { tabIndex: -1, style: { position: "absolute", top: 0, left: 0, right: 0, bottom: 0, display: "flex", alignItems: "center", justifyContent: "center", textAlign: "center", fontSize: "0.75rem" }, children: C("colorPicker.noShades") })] });
}, vH = ({ palette: e, color: t, onChange: n, label: a, activeShade: i }) => {
  let r = xh({ color: t || "transparent", palette: e }), [l, s] = xt(As), c = ie(null);
  return Q(() => {
    c.current && l === "baseColors" && c.current.focus();
  }, [r == null ? void 0 : r.colorName, l]), h.jsx("div", { className: "color-picker-content--default", children: Object.entries(e).map(([d, o], u) => {
    let f = (Array.isArray(o) ? o[i] : o) || "transparent", p = i0[u], U = C(`colors.${d.replace(/\d+/, "")}`, null, "");
    return h.jsxs("button", { ref: (r == null ? void 0 : r.colorName) === d ? c : void 0, tabIndex: -1, type: "button", className: ne("color-picker__button color-picker__button--large", { active: (r == null ? void 0 : r.colorName) === d, "is-transparent": f === "transparent" || !f }), onClick: () => {
      n(f), s("baseColors");
    }, title: `${U}${f.startsWith("#") ? ` ${f}` : ""}  ${p}`, "aria-label": `${U}  ${p}`, style: { "--swatch-color": f }, "data-testid": `color-${d}`, children: [h.jsx("div", { className: "color-picker__button-outline" }), h.jsx(cU, { color: f, keyLabel: p })] }, d);
  }) });
}, xH = vH, yH = ({ colors: e, color: t, onChange: n, label: a }) => {
  let [i, r] = xt(As), l = ie(null);
  return Q(() => {
    l.current && l.current.focus();
  }, [t, i]), h.jsx("div", { className: "color-picker-content--default", children: e.map((s, c) => h.jsxs("button", { ref: t === s ? l : void 0, tabIndex: -1, type: "button", className: ne("color-picker__button color-picker__button--large", { active: t === s, "is-transparent": s === "transparent" || !s }), onClick: () => {
    n(s), r("custom");
  }, title: s, "aria-label": a, style: { "--swatch-color": s }, children: [h.jsx("div", { className: "color-picker__button-outline" }), h.jsx(cU, { color: s, keyLabel: c + 1, isCustomColor: !0 })] }, c)) });
}, Df = (e, t, n) => {
  let a = Math.ceil(n / Ll);
  switch (t = t ?? -1, e) {
    case "ArrowLeft": {
      let i = t - 1;
      return i < 0 ? n - 1 : i;
    }
    case "ArrowRight":
      return (t + 1) % n;
    case "ArrowDown": {
      let i = t + Ll;
      return i >= n ? t % Ll : i;
    }
    case "ArrowUp": {
      let i = t - Ll, r = i < 0 ? Ll * a + i : i;
      return r >= n ? void 0 : r;
    }
  }
}, wH = ({ e, colorObj: t, onChange: n, palette: a, customColors: i, setActiveColorPickerSection: r, activeShade: l }) => {
  if ((t == null ? void 0 : t.shade) != null && ["Digit1", "Digit2", "Digit3", "Digit4", "Digit5"].includes(e.code) && e.shiftKey) {
    let s = Number(e.code.slice(-1)) - 1;
    return n(a[t.colorName][s]), r("shades"), !0;
  }
  if (["1", "2", "3", "4", "5"].includes(e.key) && i[Number(e.key) - 1]) return n(i[Number(e.key) - 1]), r("custom"), !0;
  if (i0.includes(e.key)) {
    let s = i0.indexOf(e.key), c = Object.keys(a)[s], d = a[c], o = Array.isArray(d) ? d[l] : d;
    return n(o), r("baseColors"), !0;
  }
  return !1;
}, EH = ({ event: e, activeColorPickerSection: t, palette: n, color: a, onChange: i, customColors: r, setActiveColorPickerSection: l, updateData: s, activeShade: c, onEyeDropperToggle: d, onEscape: o }) => {
  if (e[L.CTRL_OR_CMD]) return !1;
  if (e.key === L.ESCAPE) return o(e), !0;
  if (e.key === L.ALT) return d(!0), !0;
  if (e.key === L.I) return d(), !0;
  let u = xh({ color: a, palette: n });
  if (e.key === L.TAB) {
    let f = { custom: !!r.length, baseColors: !0, shades: (u == null ? void 0 : u.shade) != null, hex: !0 }, p = Object.entries(f).reduce((v, [x, y]) => (y && v.push(x), v), []), U = p.indexOf(t), m = e.shiftKey ? -1 : 1, g = U + m > p.length - 1 ? 0 : U + m < 0 ? p.length - 1 : U + m, b = p[g];
    return b && l(b), b === "custom" ? i(r[0]) : b === "baseColors" && (Object.entries(n).find(([v, x]) => Array.isArray(x) ? x.includes(a) : x === a ? v : null) || i(Ee.black)), e.preventDefault(), e.stopPropagation(), !0;
  }
  if (wH({ e, colorObj: u, onChange: i, palette: n, customColors: r, setActiveColorPickerSection: l, activeShade: c })) return !0;
  if (t === "shades" && u) {
    let { shade: f } = u, p = Df(e.key, f, Ll);
    if (p !== void 0) return i(n[u.colorName][p]), !0;
  }
  if (t === "baseColors" && u) {
    let { colorName: f } = u, p = Object.keys(n), U = p.indexOf(f), m = Df(e.key, U, p.length);
    if (m !== void 0) {
      let g = p[m], b = n[g];
      return i(Array.isArray(b) ? b[c] : b), !0;
    }
  }
  if (t === "custom") {
    let f = r.indexOf(a), p = Df(e.key, f, r.length);
    if (p !== void 0) {
      let U = r[p];
      return i(U), !0;
    }
  }
  return !1;
}, SH = ({ children: e }) => h.jsx("div", { className: "color-picker__heading", children: e }), Dd = SH, kH = ({ color: e, onChange: t, label: n, type: a, elements: i, palette: r, updateData: l, children: s, onEyeDropperToggle: c, onEscape: d }) => {
  let [o] = Y.useState(() => a === "canvasBackground" ? [] : UH(i, a, r)), [u, f] = xt(As), p = xh({ color: e, palette: r });
  Q(() => {
    if (!u) {
      let b = b9({ color: e, palette: r }), v = b && !o.includes(e);
      f(v ? "hex" : b ? "custom" : (p == null ? void 0 : p.shade) != null ? "shades" : "baseColors");
    }
  }, [u, e, r, f, p, o]);
  let [U, m] = re((p == null ? void 0 : p.shade) ?? (a === "elementBackground" ? no : to));
  Q(() => {
    (p == null ? void 0 : p.shade) != null && m(p.shade);
    let b = (v) => {
      v.key === L.ALT && c(!1);
    };
    return document.addEventListener("keyup", b, { capture: !0 }), () => {
      document.removeEventListener("keyup", b, { capture: !0 });
    };
  }, [p, c]);
  let g = Y.useRef(null);
  return h.jsx("div", { role: "dialog", "aria-modal": "true", "aria-label": C("labels.colorPicker"), children: h.jsxs("div", { ref: g, onKeyDown: (b) => {
    EH({ event: b, activeColorPickerSection: u, palette: r, color: e, onChange: t, onEyeDropperToggle: c, customColors: o, setActiveColorPickerSection: f, updateData: l, activeShade: U, onEscape: d }) && (b.preventDefault(), b.stopPropagation());
  }, className: "color-picker-content properties-content", tabIndex: -1, children: [!!o.length && h.jsxs("div", { children: [h.jsx(Dd, { children: C("colorPicker.mostUsedCustomColors") }), h.jsx(yH, { colors: o, color: e, label: C("colorPicker.mostUsedCustomColors"), onChange: t })] }), h.jsxs("div", { children: [h.jsx(Dd, { children: C("colorPicker.colors") }), h.jsx(xH, { color: e, label: n, palette: r, onChange: t, activeShade: U })] }), h.jsxs("div", { children: [h.jsx(Dd, { children: C("colorPicker.shades") }), h.jsx(bH, { hex: e, onChange: t, palette: r })] }), s] }) });
}, v9 = Y.createContext(null), pn = () => Y.useContext(v9), x9 = (e) => {
  let [t, n] = re(null), a = $t(), { theme: i } = pn(), { container: r } = li();
  return Mn(() => {
    var l;
    t && (t.className = "", t.classList.add("excalidraw", ...((l = e == null ? void 0 : e.className) == null ? void 0 : l.split(/\s+/)) || []), t.classList.toggle("excalidraw--mobile", a.editor.isMobile), t.classList.toggle("theme--dark", i === Me.DARK));
  }, [t, i, a.editor.isMobile, e == null ? void 0 : e.className]), Mn(() => {
    let l = e != null && e.parentSelector ? r == null ? void 0 : r.querySelector(e.parentSelector) : document.body;
    if (!l) return;
    let s = document.createElement("div");
    return l.appendChild(s), n(s), () => {
      l.removeChild(s);
    };
  }, [r, e == null ? void 0 : e.parentSelector]), t;
};
function dU(e, t, n) {
  Q(() => {
    function a(i) {
      let r = i;
      if (!e.current) return;
      let l = n == null ? void 0 : n(r, e.current);
      if (l !== !0) {
        if (l === !1) return t(r);
        e.current.contains(r.target) || !document.documentElement.contains(r.target) || r.target.closest("[data-radix-portal]") || r.target === document.documentElement && document.body.style.pointerEvents === "none" || r.target.closest("[data-prevent-outside-click]") || t(r);
      }
    }
    return document.addEventListener("pointerdown", a), document.addEventListener("touchstart", a), () => {
      document.removeEventListener("pointerdown", a), document.removeEventListener("touchstart", a);
    };
  }, [e, t, n]);
}
var yh = (e) => {
  let t = ie(e);
  return Object.assign(t.current, e), t.current;
}, wh = Gt(null), MH = ({ onCancel: e, onChange: t, onSelect: n, colorPickerType: a }) => {
  let i = x9({ className: "excalidraw-eye-dropper-backdrop", parentSelector: ".excalidraw-eye-dropper-container" }), r = pn(), l = Th(), s = ri(), c = xe(l, r), d = yh({ app: s, onCancel: e, onChange: t, onSelect: n, selectedElements: c }), { container: o } = li();
  Q(() => {
    let f = u.current;
    if (!f || !s.canvas || !i) return;
    let p = !1, U = s.canvas.getContext("2d"), m = ({ clientX: S, clientY: w }) => {
      let M = U.getImageData((S - r.offsetLeft) * window.devicePixelRatio, (w - r.offsetTop) * window.devicePixelRatio, 1, 1).data;
      return Sk(M[0], M[1], M[2]);
    }, g = ({ clientX: S, clientY: w, altKey: M }) => {
      f.style.top = `${w + 20}px`, f.style.left = `${S + 20}px`;
      let I = m({ clientX: S, clientY: w });
      p && d.onChange(a, I, d.selectedElements, { altKey: M }), f.style.background = I;
    }, b = () => {
      d.onCancel();
    }, v = (S, w) => {
      d.onSelect(S, w);
    }, x = (S) => {
      p = !0, S.stopImmediatePropagation();
    }, y = (S) => {
      p = !1, o == null || o.focus(), S.stopImmediatePropagation(), S.preventDefault(), v(m(S), S);
    }, E = (S) => {
      S.key === L.ESCAPE && (S.preventDefault(), S.stopImmediatePropagation(), b());
    };
    return i.tabIndex = -1, i.focus(), g({ clientX: d.app.lastViewportPosition.x, clientY: d.app.lastViewportPosition.y, altKey: !1 }), i.addEventListener("keydown", E), i.addEventListener("pointerdown", x), i.addEventListener("pointerup", y), window.addEventListener("pointermove", g, { passive: !0 }), window.addEventListener("blur", b), () => {
      p = !1, i.removeEventListener("keydown", E), i.removeEventListener("pointerdown", x), i.removeEventListener("pointerup", y), window.removeEventListener("pointermove", g), window.removeEventListener("blur", b);
    };
  }, [d, s.canvas, i, a, o, r.offsetLeft, r.offsetTop]);
  let u = ie(null);
  return dU(u, () => {
    e();
  }, (f) => !!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")), i ? w0(h.jsx("div", { ref: u, className: "excalidraw-eye-dropper-preview" }), i) : null;
}, CH = ({ color: e, onChange: t, label: n, colorPickerType: a }) => {
  let i = $t(), [r, l] = re(e), [s, c] = xt(As);
  Q(() => {
    l(e);
  }, [e]);
  let d = Te((U) => {
    let m = U.toLowerCase(), g = IH(m);
    g && t(g), l(m);
  }, [t]), o = ie(null), u = ie(null);
  Q(() => {
    o.current && o.current.focus();
  }, [s]);
  let [f, p] = xt(wh);
  return Q(() => () => {
    p(null);
  }, [p]), h.jsxs("div", { className: "color-picker__input-label", children: [h.jsx("div", { className: "color-picker__input-hash", children: "#" }), h.jsx("input", { ref: s === "hex" ? o : void 0, style: { border: 0, padding: 0 }, spellCheck: !1, className: "color-picker-input", "aria-label": n, onChange: (U) => {
    d(U.target.value);
  }, value: (r || "").replace(/^#/, ""), onBlur: () => {
    l(e);
  }, tabIndex: -1, onFocus: () => c("hex"), onKeyDown: (U) => {
    var m;
    U.key !== L.TAB && (U.key === L.ESCAPE && ((m = u.current) == null || m.focus()), U.stopPropagation());
  } }), !i.editor.isMobile && h.jsxs(h.Fragment, { children: [h.jsx("div", { style: { width: "1px", height: "1.25rem", backgroundColor: "var(--default-border-color)" } }), h.jsx("div", { ref: u, className: ne("excalidraw-eye-dropper-trigger", { selected: f }), onClick: () => p((U) => U ? null : { keepOpenOnAlt: !1, onSelect: (m) => t(m), colorPickerType: a }), title: `${C("labels.eyeDropper")}  ${L.I.toLocaleUpperCase()} or ${X("Alt")} `, children: mI })] })] });
}, ba = Y.forwardRef(({ children: e, padding: t, className: n, style: a }, i) => h.jsx("div", { className: ne("Island", n), style: { "--padding": t, ...a }, ref: i, children: e })), y9 = Y.forwardRef(({ className: e, container: t, children: n, style: a, onClose: i, onKeyDown: r, onFocusOutside: l, onPointerLeave: s, onPointerDownOutside: c }, d) => {
  let o = $t();
  return h.jsx(dz, { container: t, children: h.jsxs(iU, { ref: d, className: ne("focus-visible-none", e), "data-prevent-outside-click": !0, side: o.editor.isMobile && !o.viewport.isLandscape ? "bottom" : "right", align: o.editor.isMobile && !o.viewport.isLandscape ? "center" : "start", alignOffset: -16, sideOffset: 20, style: { zIndex: "var(--zIndex-popup)" }, onPointerLeave: s, onKeyDown: r, onFocusOutside: l, onPointerDownOutside: c, onCloseAutoFocus: (u) => {
    u.stopPropagation(), u.preventDefault(), t && !gM(document.activeElement) && t.focus(), i();
  }, children: [h.jsx(ba, { padding: 3, style: a, children: n }), h.jsx(N4, { width: 20, height: 10, style: { fill: "var(--popup-bg-color)", filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)" } })] }) });
}), E6 = (e) => {
  let t = new Option().style;
  return t.color = e, !!t.color;
}, IH = (e) => ua(e) ? e : E6(`#${e}`) ? `#${e}` : E6(e) ? e : null, TH = ({ type: e, color: t, onChange: n, label: a, elements: i, palette: r = Ee, updateData: l }) => {
  let { container: s } = li(), [, c] = xt(As), [d, o] = xt(wh), u = h.jsxs("div", { children: [h.jsx(Dd, { children: C("colorPicker.hexCode") }), h.jsx(CH, { color: t, label: a, onChange: (U) => {
    n(U);
  }, colorPickerType: e })] }), f = ie(null), p = () => {
    var U, m;
    (m = (U = f.current) == null ? void 0 : U.querySelector(".color-picker-content")) == null || m.focus();
  };
  return h.jsx(y9, { container: s, style: { maxWidth: "13rem" }, onFocusOutside: (U) => {
    p(), U.preventDefault();
  }, onPointerDownOutside: (U) => {
    d && U.preventDefault();
  }, onClose: () => {
    l({ openPopup: null }), c(null);
  }, children: r ? h.jsx(kH, { palette: r, color: t, onChange: (U) => {
    n(U);
  }, onEyeDropperToggle: (U) => {
    o((m) => U ? (m = m || { keepOpenOnAlt: !0, onSelect: n, colorPickerType: e }, m.keepOpenOnAlt = !0, m) : U === !1 || m ? null : { keepOpenOnAlt: !1, onSelect: n, colorPickerType: e });
  }, onEscape: (U) => {
    d ? o(null) : l({ openPopup: null });
  }, label: a, type: e, elements: i, updateData: l, children: u }) : u });
}, _H = ({ label: e, color: t, type: n }) => h.jsx(bh, { type: "button", className: ne("color-picker__button active-color properties-trigger", { "is-transparent": t === "transparent" || !t }), "aria-label": e, style: t ? { "--swatch-color": t } : void 0, title: C(n === "elementStroke" ? "labels.showStroke" : "labels.showBackground"), children: h.jsx("div", { className: "color-picker__button-outline" }) }), uU = ({ type: e, color: t, onChange: n, label: a, elements: i, palette: r = Ee, topPicks: l, updateData: s, appState: c }) => h.jsx("div", { children: h.jsxs("div", { role: "dialog", "aria-modal": "true", className: "color-picker-container", children: [h.jsx(pH, { activeColor: t, onChange: n, type: e, topPicks: l }), h.jsx(g9, {}), h.jsxs(gh, { open: c.openPopup === e, onOpenChange: (d) => {
  s({ openPopup: d ? e : null });
}, children: [h.jsx(_H, { color: t, label: a, type: e }), c.openPopup === e && h.jsx(TH, { type: e, color: t, onChange: n, label: a, elements: i, palette: r, updateData: s })] })] }) }), Eh = ({ icon: e }) => h.jsx("span", { style: { width: "1em", margin: "0 0.5ex 0 0.5ex", display: "inline-block", lineHeight: 0, verticalAlign: "middle" }, children: e }), AH = ({ label: e, open: t, openTrigger: n, children: a, className: i }) => h.jsxs(h.Fragment, { children: [h.jsxs("div", { style: { cursor: "pointer", display: "flex", justifyContent: "space-between", alignItems: "center" }, className: i, onClick: n, children: [e, h.jsx(Eh, { icon: t ? $I : C8 })] }), t && h.jsx("div", { style: { display: "flex", flexDirection: "column" }, children: a })] }), r0 = AH, jH = Gt(!1);
function DH({ options: e, value: t, label: n, onChange: a, onClose: i, numberOfOptionsToAlwaysShow: r = e.length }) {
  let l = $t(), s = (p) => {
    let U = e.find((m) => m.keyBinding === p.key.toLowerCase());
    if (!(p.metaKey || p.altKey || p.ctrlKey) && U) a(U.value), p.preventDefault();
    else if (p.key === L.TAB) {
      let m = e.findIndex((b) => b.value === t), g = p.shiftKey ? (e.length + m - 1) % e.length : (m + 1) % e.length;
      a(e[g].value);
    } else if (ao(p.key)) {
      let m = nc().rtl, g = e.findIndex((b) => b.value === t);
      if (g !== -1) {
        let b = e.length, v = g;
        switch (p.key) {
          case (m ? L.ARROW_LEFT : L.ARROW_RIGHT):
            v = (g + 1) % b;
            break;
          case (m ? L.ARROW_RIGHT : L.ARROW_LEFT):
            v = (b + g - 1) % b;
            break;
          case L.ARROW_DOWN: {
            v = (g + (r ?? 1)) % b;
            break;
          }
          case L.ARROW_UP: {
            v = (b + g - (r ?? 1)) % b;
            break;
          }
        }
        a(e[v].value);
      }
      p.preventDefault();
    } else (p.key === L.ESCAPE || p.key === L.ENTER) && (p.preventDefault(), i());
    p.nativeEvent.stopImmediatePropagation(), p.stopPropagation();
  }, [c, d] = xt(jH), o = Y.useMemo(() => e.slice(0, r), [e, r]), u = Y.useMemo(() => e.slice(r), [e, r]);
  Q(() => {
    o.some((p) => p.value === t) || d(!0);
  }, [t, o, d]);
  let f = (p) => h.jsx("div", { className: "picker-content", children: p.map((U, m) => h.jsxs("button", { type: "button", className: ne("picker-option", { active: t === U.value }), onClick: (g) => {
    a(U.value);
  }, title: `${U.text} ${U.keyBinding && ` ${U.keyBinding.toUpperCase()}`}`, "aria-label": U.text || "none", "aria-keyshortcuts": U.keyBinding || void 0, ref: (g) => {
    t === U.value && setTimeout(() => {
      g == null || g.focus();
    }, 0);
  }, children: [U.icon, U.keyBinding && h.jsx("span", { className: "picker-keybinding", children: U.keyBinding })] }, U.text)) });
  return h.jsx(iU, { side: l.editor.isMobile && !l.viewport.isLandscape ? "top" : "bottom", align: "start", sideOffset: 12, style: { zIndex: "var(--zIndex-popup)" }, onKeyDown: s, children: h.jsxs("div", { className: "picker", role: "dialog", "aria-modal": "true", "aria-label": n, children: [f(o), u.length > 0 && h.jsx(r0, { label: C("labels.more_options"), open: c, openTrigger: () => {
    d((p) => !p);
  }, className: "picker-collapsible", children: f(u) })] }) });
}
function S6({ value: e, label: t, options: n, onChange: a, group: i = "", numberOfOptionsToAlwaysShow: r }) {
  var d;
  let [l, s] = Y.useState(!1), c = Y.useRef(null);
  return h.jsx("div", { children: h.jsxs(gh, { open: l, onOpenChange: (o) => s(o), children: [h.jsx(bh, { name: i, type: "button", "aria-label": t, onClick: () => s(!l), ref: c, className: l ? "active" : "", children: (d = n.find((o) => o.value === e)) == null ? void 0 : d.icon }), l && h.jsx(DH, { options: n, value: e, label: t, onChange: a, onClose: () => {
    s(!1);
  }, numberOfOptionsToAlwaysShow: r })] }) });
}
var w9 = Y.forwardRef(({ className: e, placeholder: t, onChange: n }, a) => h.jsxs("div", { className: ne("QuickSearch__wrapper", e), children: [sl, h.jsx("input", { ref: a, className: "QuickSearch__input", type: "text", placeholder: t, onChange: (i) => n(i.target.value.trim().toLowerCase()) })] })), E9 = ({ className: e, placeholder: t, children: n }) => {
  let a = !Wn.count(n);
  return h.jsx("div", { className: ne("ScrollableList__wrapper", e), role: "menu", children: a ? h.jsx("div", { className: "empty", children: t }) : n });
}, S9 = ({ children: e, className: t = "", style: n, title: a }) => h.jsxs("div", { className: `dropdown-menu-group ${t}`, style: n, children: [a && h.jsx("p", { className: "dropdown-menu-group-title", children: a }), e] }), l0 = S9;
S9.displayName = "DropdownMenuGroup";
var k9 = Y.createContext({}), M9 = (e = "", t = !1, n = !1) => `dropdown-menu-item dropdown-menu-item-base ${e}
  ${t ? "dropdown-menu-item--selected" : ""} ${n ? "dropdown-menu-item--hovered" : ""}`.trim(), C9 = (e, t) => {
  let n = Cn(k9);
  return Xu(e, (a) => {
    var r;
    let i = new CustomEvent("menu.itemSelect", { bubbles: !0, cancelable: !0 });
    t == null || t(i), i.defaultPrevented || ((r = n.onSelect) == null || r.call(n, i));
  });
}, LH = ({ textStyle: e, icon: t, shortcut: n, children: a }) => {
  let i = $t();
  return h.jsxs(h.Fragment, { children: [t && h.jsx("div", { className: "dropdown-menu-item__icon", children: t }), h.jsx("div", { style: e, className: "dropdown-menu-item__text", children: a }), n && !i.editor.isMobile && h.jsx("div", { className: "dropdown-menu-item__shortcut", children: n })] });
}, I9 = LH, hU = ({ icon: e, value: t, order: n, children: a, shortcut: i, className: r, hovered: l, selected: s, textStyle: c, onSelect: d, onClick: o, ...u }) => {
  let f = C9(o, d), p = ie(null);
  return Q(() => {
    var U, m;
    l && (n === 0 ? (U = p.current) == null || U.scrollIntoView({ block: "end" }) : (m = p.current) == null || m.scrollIntoView({ block: "nearest" }));
  }, [l, n]), h.jsx("button", { ...u, ref: p, value: t, onClick: f, className: M9(r, s, l), title: u.title ?? u["aria-label"], children: h.jsx(I9, { textStyle: c, icon: e, shortcut: i, children: a }) });
};
hU.displayName = "DropdownMenuItem";
var co = { GREEN: "green", RED: "red", BLUE: "blue" }, fU = ({ type: e = co.BLUE, children: t }) => {
  let { theme: n } = Mc(), a = { display: "inline-flex", marginLeft: "auto", padding: "2px 4px", borderRadius: 6, fontSize: 9, fontFamily: "Cascadia, monospace", border: n === Me.LIGHT ? "1.5px solid white" : "none" };
  switch (e) {
    case co.GREEN:
      Object.assign(a, { backgroundColor: "var(--background-color-badge)", color: "var(--color-badge)" });
      break;
    case co.RED:
      Object.assign(a, { backgroundColor: "pink", color: "darkred" });
      break;
    case co.BLUE:
    default:
      Object.assign(a, { background: "var(--color-promo)", color: "var(--color-surface-lowest)" });
  }
  return h.jsx("div", { className: "DropDownMenuItemBadge", style: a, children: t });
};
fU.displayName = "DropdownMenuItemBadge";
hU.Badge = fU;
var ea = hU, RH = ({ event: e, inputRef: t, hoveredFont: n, filteredFonts: a, onClose: i, onSelect: r, onHover: l }) => {
  var s, c, d;
  if (!e[L.CTRL_OR_CMD] && e.shiftKey && e.key.toLowerCase() === L.F) return (s = t.current) == null || s.focus(), !0;
  if (e.key === L.ESCAPE) return i(), !0;
  if (e.key === L.ENTER) return n != null && n.value && r(n.value), !0;
  if (e.key === L.ARROW_DOWN) return n != null && n.next ? l(n.next.value) : (c = a[0]) != null && c.value && l(a[0].value), !0;
  if (e.key === L.ARROW_UP) return n != null && n.prev ? l(n.prev.value) : (d = a[a.length - 1]) != null && d.value && l(a[a.length - 1].value), !0;
}, PH = Y.memo(({ selectedFontFamily: e, hoveredFontFamily: t, onSelect: n, onHover: a, onLeave: i, onOpen: r, onClose: l }) => {
  let { container: s } = li(), { fonts: c } = ri(), { showDeprecatedFonts: d } = kc(), [o, u] = re(""), f = ie(null), p = nt(() => Array.from(wi.registered.entries()).filter(([M, { metadata: I }]) => !I.serverSide && !I.fallback).map(([M, { metadata: I, fontFaces: T }]) => {
    var A, D;
    let _ = { value: M, icon: I.icon ?? au, text: ((D = (A = T[0]) == null ? void 0 : A.fontFace) == null ? void 0 : D.family) ?? "Unknown" };
    return I.deprecated && Object.assign(_, { deprecated: I.deprecated, badge: { type: co.RED, placeholder: C("fontList.badge.old") } }), _;
  }).sort((M, I) => M.text.toLowerCase() > I.text.toLowerCase() ? 1 : -1), []), U = nt(() => new Set(c.getSceneFamilies()), [e]), m = nt(() => p.filter((M) => U.has(M.value)), [p, U]), g = nt(() => p.filter((M) => !U.has(M.value) && (d || !M.deprecated)), [p, U, d]), b = nt(() => IM([...m, ...g].filter((M) => {
    var I;
    return (I = M.text) == null ? void 0 : I.toLowerCase().includes(o);
  })), [m, g, o]), v = nt(() => {
    var I;
    let M;
    return t ? M = b.find((T) => T.value === t) : e && (M = b.find((T) => T.value === e)), !M && o && ((I = b[0]) != null && I.value ? a(b[0].value) : i()), M;
  }, [t, e, o, b, a, i]), x = Te((M) => {
    RH({ event: M, inputRef: f, hoveredFont: v, filteredFonts: b, onSelect: n, onHover: a, onClose: l }) && (M.preventDefault(), M.stopPropagation());
  }, [v, b, n, a, l]);
  Q(() => (r(), () => {
    l();
  }), []);
  let y = nt(() => b.filter((M) => U.has(M.value)), [b, U]), E = nt(() => b.filter((M) => !U.has(M.value)), [b, U]), S = (M, I) => h.jsxs(ea, { icon: M.icon, value: M.value, order: I, textStyle: { fontFamily: as({ fontFamily: M.value }) }, hovered: M.value === (v == null ? void 0 : v.value), selected: M.value === e, tabIndex: M.value === e ? 0 : -1, onClick: (T) => {
    n(Number(T.currentTarget.value));
  }, onMouseMove: () => {
    (v == null ? void 0 : v.value) !== M.value && a(M.value);
  }, children: [M.text, M.badge && h.jsx(fU, { type: M.badge.type, children: M.badge.placeholder })] }, M.value), w = [];
  return y.length && w.push(h.jsx(l0, { title: C("fontList.sceneFonts"), children: y.map(S) }, "group_1")), E.length && w.push(h.jsx(l0, { title: C("fontList.availableFonts"), children: E.map((M, I) => S(M, I + y.length)) }, "group_2")), h.jsxs(y9, { className: "properties-content", container: s, style: { width: "15rem" }, onClose: l, onPointerLeave: i, onKeyDown: x, children: [h.jsx(w9, { ref: f, placeholder: C("quickSearch.placeholder"), onChange: is(u, 20) }), h.jsx(E9, { className: "dropdown-menu fonts manual-hover", placeholder: C("fontList.empty"), children: w.length ? w : null })] });
}, (e, t) => e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily), NH = ({ selectedFontFamily: e }) => {
  let t = nt(() => !!(e && !$H(e)), [e]);
  return h.jsx(bh, { asChild: !0, children: h.jsx("div", { children: h.jsx(m9, { standalone: !0, icon: u8, title: C("labels.showFonts"), className: "properties-trigger", testId: "font-family-show-fonts", active: t, onClick: () => {
  } }) }) });
}, T9 = [{ value: ut.Excalifont, icon: Ho, text: C("labels.handDrawn"), testId: "font-family-hand-drawn" }, { value: ut.Nunito, icon: au, text: C("labels.normal"), testId: "font-family-normal" }, { value: ut["Comic Shanns"], icon: v1, text: C("labels.code"), testId: "font-family-code" }], OH = new Set(T9.map((e) => e.value)), $H = (e) => e ? OH.has(e) : !1, FH = Y.memo(({ isOpened: e, selectedFontFamily: t, hoveredFontFamily: n, onSelect: a, onHover: i, onLeave: r, onPopupChange: l }) => {
  let s = nt(() => T9, []), c = Te((d) => {
    d && a(d);
  }, [a]);
  return h.jsxs("div", { role: "dialog", "aria-modal": "true", className: "FontPicker__container", children: [h.jsx(ii, { type: "button", options: s, value: t, onClick: c }), h.jsx(g9, {}), h.jsxs(gh, { open: e, onOpenChange: l, children: [h.jsx(NH, { selectedFontFamily: t }), e && h.jsx(PH, { selectedFontFamily: t, hoveredFontFamily: n, onSelect: c, onHover: i, onLeave: r, onOpen: () => l(!0), onClose: () => l(!1) })] })] });
}, (e, t) => e.isOpened === t.isOpened && e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily), zH = ({ updateData: e, appState: t, elements: n, testId: a }) => {
  let i = Y.useRef(null), r = Y.useRef(null), l = fn(n, t, (s) => s.opacity, !0, t.currentItemOpacity);
  return Q(() => {
    if (i.current && r.current) {
      let s = i.current, c = r.current, d = s.offsetWidth, o = 15, u = l / 100 * (d - o) + o / 2;
      c.style.left = `${u}px`, s.style.background = `linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${l}%, var(--button-bg) ${l}%, var(--button-bg) 100%)`;
    }
  }, [l]), h.jsxs("label", { className: "control-label", children: [C("labels.opacity"), h.jsxs("div", { className: "range-wrapper", children: [h.jsx("input", { ref: i, type: "range", min: "0", max: "100", step: "10", onChange: (s) => {
    e(+s.target.value);
  }, value: l, className: "range-input", "data-testid": a }), h.jsx("div", { className: "value-bubble", ref: r, children: l !== 0 ? l : null }), h.jsx("div", { className: "zero-label", children: "0" })] })] });
}, _9 = 0.1, hn = (e, t, n, a = !1) => {
  let i = ue(xe(e, t, { includeBoundTextElement: a }));
  return e.map((r) => {
    var l;
    return i.get(r.id) || r.id === ((l = t.editingTextElement) == null ? void 0 : l.id) ? n(r) : r;
  });
}, fn = function(e, t, n, a, i) {
  let r = t.editingTextElement, l = Qe(e), s = null;
  return r && (s = n(r)), s || (Dt(l, t) ? s = KP(a === !0 ? l : l.filter((c) => a(c)), t, n) ?? (typeof i == "function" ? i(!0) : i) : s = typeof i == "function" ? i(!1) : i), s;
}, BH = (e, t) => rt(t) || !t.autoResize ? t : W(t, { x: e.textAlign === "left" ? e.x : e.x + (e.width - t.width) / (e.textAlign === "center" ? 2 : 1), y: e.y + (e.height - t.height) / 2 }, !1), pU = (e, t, n, a, i) => {
  let r = /* @__PURE__ */ new Set(), l = hn(e, t, (c) => {
    if (q(c)) {
      let d = a(c);
      r.add(d);
      let o = ge(c, { fontSize: d });
      return un(o, n.scene.getContainerElement(c), n.scene.getNonDeletedElementsMap()), o = BH(c, o), o;
    }
    return c;
  }, !0), s = ue(l);
  return xe(e, t, { includeBoundTextElement: !0 }).forEach((c) => {
    q(c) && Sn(c, s);
  }), { elements: l, appState: { ...t, currentItemFontSize: r.size === 1 ? [...r][0] : i ?? t.currentItemFontSize }, captureUpdate: H.IMMEDIATELY };
};
Z({ name: "changeStrokeColor", label: "labels.stroke", trackEvent: !1, perform: (e, t, n) => ({ ...n.currentItemStrokeColor && { elements: hn(e, t, (a) => S1(a.type) ? ge(a, { strokeColor: n.currentItemStrokeColor }) : a, !0) }, appState: { ...t, ...n }, captureUpdate: n.currentItemStrokeColor ? H.IMMEDIATELY : H.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => h.jsxs(h.Fragment, { children: [h.jsx("h3", { "aria-hidden": "true", children: C("labels.stroke") }), h.jsx(uU, { topPicks: Lb, palette: yk, type: "elementStroke", label: C("labels.stroke"), color: fn(e, t, (i) => i.strokeColor, !0, t.currentItemStrokeColor), onChange: (i) => n({ currentItemStrokeColor: i }), elements: e, appState: t, updateData: n })] }) });
Z({ name: "changeBackgroundColor", label: "labels.changeBackground", trackEvent: !1, perform: (e, t, n) => ({ ...n.currentItemBackgroundColor && { elements: hn(e, t, (a) => ge(a, { backgroundColor: n.currentItemBackgroundColor })) }, appState: { ...t, ...n }, captureUpdate: n.currentItemBackgroundColor ? H.IMMEDIATELY : H.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => h.jsxs(h.Fragment, { children: [h.jsx("h3", { "aria-hidden": "true", children: C("labels.background") }), h.jsx(uU, { topPicks: Rb, palette: wk, type: "elementBackground", label: C("labels.background"), color: fn(e, t, (i) => i.backgroundColor, !0, t.currentItemBackgroundColor), onChange: (i) => n({ currentItemBackgroundColor: i }), elements: e, appState: t, updateData: n })] }) });
Z({ name: "changeFillStyle", label: "labels.fill", trackEvent: !1, perform: (e, t, n, a) => (tt("element", "changeFillStyle", `${n} (${a.device.editor.isMobile ? "mobile" : "desktop"})`), { elements: hn(e, t, (i) => ge(i, { fillStyle: n })), appState: { ...t, currentItemFillStyle: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = xe(e, t), i = a.length > 0 && a.every((r) => r.fillStyle === "zigzag");
  return h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.fill") }), h.jsx(ii, { type: "button", options: [{ value: "hachure", text: `${C(i ? "labels.zigzag" : "labels.hachure")} (${X("Alt-Click")})`, icon: i ? TC : _C, active: i ? !0 : void 0, testId: "fill-hachure" }, { value: "cross-hatch", text: C("labels.crossHatch"), icon: AC, testId: "fill-cross-hatch" }, { value: "solid", text: C("labels.solid"), icon: jC, testId: "fill-solid" }], value: fn(e, t, (r) => r.fillStyle, (r) => r.hasOwnProperty("fillStyle"), (r) => r ? null : t.currentItemFillStyle), onClick: (r, l) => {
    let s = l.altKey && r === "hachure" && a.every((c) => c.fillStyle === "hachure") ? "zigzag" : r;
    n(s);
  } })] });
} });
Z({ name: "changeStrokeWidth", label: "labels.strokeWidth", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => ge(a, { strokeWidth: n })), appState: { ...t, currentItemStrokeWidth: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.strokeWidth") }), h.jsx(ii, { group: "stroke-width", options: [{ value: Kh.thin, text: C("labels.thin"), icon: b8, testId: "strokeWidth-thin" }, { value: Kh.bold, text: C("labels.bold"), icon: DC, testId: "strokeWidth-bold" }, { value: Kh.extraBold, text: C("labels.extraBold"), icon: LC, testId: "strokeWidth-extraBold" }], value: fn(e, t, (a) => a.strokeWidth, (a) => a.hasOwnProperty("strokeWidth"), (a) => a ? null : t.currentItemStrokeWidth), onChange: (a) => n(a) })] }) });
Z({ name: "changeSloppiness", label: "labels.sloppiness", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => ge(a, { seed: Ja(), roughness: n })), appState: { ...t, currentItemRoughness: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.sloppiness") }), h.jsx(ii, { group: "sloppiness", options: [{ value: 0, text: C("labels.architect"), icon: NC }, { value: 1, text: C("labels.artist"), icon: OC }, { value: 2, text: C("labels.cartoonist"), icon: $C }], value: fn(e, t, (a) => a.roughness, (a) => a.hasOwnProperty("roughness"), (a) => a ? null : t.currentItemRoughness), onChange: (a) => n(a) })] }) });
Z({ name: "changeStrokeStyle", label: "labels.strokeStyle", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => ge(a, { strokeStyle: n })), appState: { ...t, currentItemStrokeStyle: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.strokeStyle") }), h.jsx(ii, { group: "strokeStyle", options: [{ value: "solid", text: C("labels.strokeStyle_solid"), icon: b8 }, { value: "dashed", text: C("labels.strokeStyle_dashed"), icon: RC }, { value: "dotted", text: C("labels.strokeStyle_dotted"), icon: PC }], value: fn(e, t, (a) => a.strokeStyle, (a) => a.hasOwnProperty("strokeStyle"), (a) => a ? null : t.currentItemStrokeStyle), onChange: (a) => n(a) })] }) });
Z({ name: "changeOpacity", label: "labels.opacity", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => ge(a, { opacity: n }), !0), appState: { ...t, currentItemOpacity: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsx(zH, { updateData: n, elements: e, appState: t, testId: "opacity" }) });
Z({ name: "changeFontSize", label: "labels.fontSize", trackEvent: !1, perform: (e, t, n, a) => pU(e, t, a, () => n, n), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.fontSize") }), h.jsx(ii, { group: "font-size", options: [{ value: 16, text: C("labels.small"), icon: eI, testId: "fontSize-small" }, { value: 20, text: C("labels.medium"), icon: tI, testId: "fontSize-medium" }, { value: 28, text: C("labels.large"), icon: nI, testId: "fontSize-large" }, { value: 36, text: C("labels.veryLarge"), icon: aI, testId: "fontSize-veryLarge" }], value: fn(e, t, (i) => {
  if (q(i)) return i.fontSize;
  let r = be(i, a.scene.getNonDeletedElementsMap());
  return r ? r.fontSize : null;
}, (i) => q(i) || be(i, a.scene.getNonDeletedElementsMap()) !== null, (i) => i ? null : t.currentItemFontSize || Ni), onChange: (i) => n(i) })] }) });
var k6 = Z({ name: "decreaseFontSize", label: "labels.decreaseFontSize", icon: Yu, trackEvent: !1, perform: (e, t, n, a) => pU(e, t, a, (i) => Math.round(1 / (1 + _9) * i.fontSize)), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && (e.key === L.CHEVRON_LEFT || e.key === L.COMMA) }), M6 = Z({ name: "increaseFontSize", label: "labels.increaseFontSize", icon: Yu, trackEvent: !1, perform: (e, t, n, a) => pU(e, t, a, (i) => Math.round(i.fontSize * (1 + _9))), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && (e.key === L.CHEVRON_RIGHT || e.key === L.PERIOD) });
Z({ name: "changeFontFamily", label: "labels.fontFamily", trackEvent: !1, perform: (e, t, n, a) => {
  var U;
  let { cachedElements: i, resetAll: r, resetContainers: l, ...s } = n;
  if (r) return { elements: hn(e, t, (m) => {
    let g = i == null ? void 0 : i.get(m.id);
    return g ? ge(m, { ...g }) : m;
  }, !0), appState: { ...t, ...s }, captureUpdate: H.NEVER };
  let { currentItemFontFamily: c, currentHoveredFontFamily: d } = n, o = H.EVENTUALLY, u, f = !1;
  if (c) u = c, o = H.IMMEDIATELY;
  else if (d) {
    u = d, o = H.EVENTUALLY;
    let m = xe(e, t, { includeBoundTextElement: !0 }).filter((g) => q(g));
    if (m.length > 200) f = !0;
    else {
      let g = 0, b = 0;
      for (; g < m.length && b < 5e3; ) {
        let v = m[g];
        b += (v == null ? void 0 : v.originalText.length) || 0, g++;
      }
      b > 5e3 && (f = !0);
    }
  }
  let p = { appState: { ...t, ...s }, captureUpdate: o };
  if (u && !f) {
    let m = /* @__PURE__ */ new Map(), g = /* @__PURE__ */ new Set(), b = !1, v = Array.from(wi.loadedFontsCache.values()), x = (U = Object.entries(ut).find(([S, w]) => w === u)) == null ? void 0 : U[0];
    d && x && v.some((S) => S.startsWith(x)) && (b = !0), Object.assign(p, { elements: hn(e, t, (S) => {
      if (q(S) && (S.fontFamily !== u || c)) {
        let w = ge(S, { fontFamily: u, lineHeight: ol(u) }), M = (i == null ? void 0 : i.get(S.containerId || "")) || {}, I = a.scene.getContainerElement(S);
        return l && I && M && W(I, { ...M }, !1), b || (g = /* @__PURE__ */ new Set([...g, ...Array.from(w.originalText)])), m.set(w, I), w;
      }
      return S;
    }, !0) });
    let y = `10px ${as({ fontFamily: u })}`, E = Array.from(g.values()).join();
    if (b || window.document.fonts.check(y, E)) for (let [S, w] of m) un(S, w, a.scene.getNonDeletedElementsMap(), !1);
    else window.document.fonts.load(y, E).then((S) => {
      for (let [w, M] of m) {
        let I = a.scene.getElement(w.id), T = M ? a.scene.getElement(M.id) : null;
        I && un(I, T, a.scene.getNonDeletedElementsMap(), !1);
      }
      a.fonts.onLoaded(S);
    });
  }
  return p;
}, PanelComponent: ({ elements: e, appState: t, app: n, updateData: a }) => {
  let i = ie(/* @__PURE__ */ new Map()), r = ie(null), [l, s] = re({}), c = ie(!0), d = nt(() => {
    var u;
    let o = (f, p) => fn(f, t, (U) => {
      if (q(U)) return U.fontFamily;
      let m = be(U, p);
      return m ? m.fontFamily : null;
    }, (U) => q(U) || be(U, p) !== null, (U) => U ? null : t.currentItemFontFamily || xr);
    return l.openPopup === "fontFamily" && t.openPopup === "fontFamily" ? o(Array.from(((u = i.current) == null ? void 0 : u.values()) ?? []), i.current) : !l.openPopup && t.openPopup !== "fontFamily" ? o(e, n.scene.getNonDeletedElementsMap()) : r.current;
  }, [l.openPopup, t, e, n.scene]);
  return Q(() => {
    r.current = d;
  }, [d]), Q(() => {
    Object.keys(l).length && (a(l), s({}));
  }, [l]), Q(() => (c.current = !1, () => {
    c.current = !0;
  }), []), h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.fontFamily") }), h.jsx(FH, { isOpened: t.openPopup === "fontFamily", selectedFontFamily: d, hoveredFontFamily: t.currentHoveredFontFamily, onSelect: (o) => {
    s({ openPopup: null, currentHoveredFontFamily: null, currentItemFontFamily: o }), i.current.clear();
  }, onHover: (o) => {
    s({ currentHoveredFontFamily: o, cachedElements: new Map(i.current), resetContainers: !0 });
  }, onLeave: () => {
    s({ currentHoveredFontFamily: null, cachedElements: new Map(i.current), resetAll: !0 });
  }, onPopupChange: (o) => {
    if (o) {
      i.current.clear();
      let { editingTextElement: u } = t;
      if ((u == null ? void 0 : u.type) === "text") {
        let f = n.scene.getElement(u.id);
        i.current.set(u.id, ge(f || u, {}, !0));
      } else {
        let f = xe(e, t, { includeBoundTextElement: !0 });
        for (let p of f) i.current.set(p.id, ge(p, {}, !0));
      }
      s({ openPopup: "fontFamily" });
    } else {
      let u = { openPopup: null, currentHoveredFontFamily: null, cachedElements: new Map(i.current), resetAll: !0 };
      c.current ? a({ ...l, ...u }) : s(u), i.current.clear();
    }
  } })] });
} });
Z({ name: "changeTextAlign", label: "Change text alignment", trackEvent: !1, perform: (e, t, n, a) => ({ elements: hn(e, t, (i) => {
  if (q(i)) {
    let r = ge(i, { textAlign: n });
    return un(r, a.scene.getContainerElement(i), a.scene.getNonDeletedElementsMap()), r;
  }
  return i;
}, !0), appState: { ...t, currentItemTextAlign: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => {
  let i = a.scene.getNonDeletedElementsMap();
  return h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.textAlign") }), h.jsx(ii, { group: "text-align", options: [{ value: "left", text: C("labels.left"), icon: rI, testId: "align-left" }, { value: "center", text: C("labels.center"), icon: lI, testId: "align-horizontal-center" }, { value: "right", text: C("labels.right"), icon: sI, testId: "align-right" }], value: fn(e, t, (r) => {
    if (q(r)) return r.textAlign;
    let l = be(r, i);
    return l ? l.textAlign : null;
  }, (r) => q(r) || be(r, i) !== null, (r) => r ? null : t.currentItemTextAlign), onChange: (r) => n(r) })] });
} });
Z({ name: "changeVerticalAlign", label: "Change vertical alignment", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: hn(e, t, (i) => {
  if (q(i)) {
    let r = ge(i, { verticalAlign: n });
    return un(r, a.scene.getContainerElement(i), a.scene.getNonDeletedElementsMap()), r;
  }
  return i;
}, !0), appState: { ...t }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx("fieldset", { children: h.jsx(ii, { group: "text-align", options: [{ value: jn.TOP, text: C("labels.alignTop"), icon: h.jsx(oI, { theme: t.theme }), testId: "align-top" }, { value: jn.MIDDLE, text: C("labels.centerVertically"), icon: h.jsx(dI, { theme: t.theme }), testId: "align-middle" }, { value: jn.BOTTOM, text: C("labels.alignBottom"), icon: h.jsx(cI, { theme: t.theme }), testId: "align-bottom" }], value: fn(e, t, (i) => {
  if (q(i) && i.containerId) return i.verticalAlign;
  let r = be(i, a.scene.getNonDeletedElementsMap());
  return r ? r.verticalAlign : null;
}, (i) => q(i) || be(i, a.scene.getNonDeletedElementsMap()) !== null, (i) => i ? null : jn.MIDDLE), onChange: (i) => n(i) }) }) });
Z({ name: "changeRoundness", label: "Change edge roundness", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => ee(a) ? a : ge(a, { roundness: n === "round" ? { type: ks(a.type) ? jt.ADAPTIVE_RADIUS : jt.PROPORTIONAL_RADIUS } : null })), appState: { ...t, currentItemRoundness: n }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = f3(Qe(e), t).some((i) => {
    var r;
    return ((r = i.roundness) == null ? void 0 : r.type) === jt.LEGACY;
  });
  return h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.edges") }), h.jsx(ii, { group: "edges", options: [{ value: "sharp", text: C("labels.sharp"), icon: FC }, { value: "round", text: C("labels.round"), icon: zC }], value: fn(e, t, (i) => a ? null : i.roundness ? "round" : "sharp", (i) => !ye(i) && i.hasOwnProperty("roundness"), (i) => i ? null : t.currentItemRoundness), onChange: (i) => n(i) })] });
} });
var C6 = (e) => [{ value: null, text: C("labels.arrowhead_none"), keyBinding: "q", icon: BC }, { value: "arrow", text: C("labels.arrowhead_arrow"), keyBinding: "w", icon: h.jsx(HC, { flip: e }) }, { value: "triangle", text: C("labels.arrowhead_triangle"), icon: h.jsx(GC, { flip: e }), keyBinding: "e" }, { value: "triangle_outline", text: C("labels.arrowhead_triangle_outline"), icon: h.jsx(YC, { flip: e }), keyBinding: "r" }, { value: "circle", text: C("labels.arrowhead_circle"), keyBinding: "a", icon: h.jsx(XC, { flip: e }) }, { value: "circle_outline", text: C("labels.arrowhead_circle_outline"), keyBinding: "s", icon: h.jsx(WC, { flip: e }) }, { value: "diamond", text: C("labels.arrowhead_diamond"), icon: h.jsx(ZC, { flip: e }), keyBinding: "d" }, { value: "diamond_outline", text: C("labels.arrowhead_diamond_outline"), icon: h.jsx(KC, { flip: e }), keyBinding: "f" }, { value: "bar", text: C("labels.arrowhead_bar"), keyBinding: "z", icon: h.jsx(VC, { flip: e }) }, { value: "crowfoot_one", text: C("labels.arrowhead_crowfoot_one"), icon: h.jsx(JC, { flip: e }), keyBinding: "c" }, { value: "crowfoot_many", text: C("labels.arrowhead_crowfoot_many"), icon: h.jsx(qC, { flip: e }), keyBinding: "x" }, { value: "crowfoot_one_or_many", text: C("labels.arrowhead_crowfoot_one_or_many"), icon: h.jsx(QC, { flip: e }), keyBinding: "v" }];
Z({ name: "changeArrowhead", label: "Change arrowheads", trackEvent: !1, perform: (e, t, n) => ({ elements: hn(e, t, (a) => {
  if (pe(a)) {
    let { position: i, type: r } = n;
    if (i === "start") return ge(a, { startArrowhead: r });
    if (i === "end") return ge(a, { endArrowhead: r });
  }
  return a;
}), appState: { ...t, [n.position === "start" ? "currentItemStartArrowhead" : "currentItemEndArrowhead"]: n.type }, captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = nc().rtl;
  return h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.arrowheads") }), h.jsxs("div", { className: "iconSelectList buttonList", children: [h.jsx(S6, { label: "arrowhead_start", options: C6(!a), value: fn(e, t, (i) => pe(i) && lu(i.type) ? i.startArrowhead : t.currentItemStartArrowhead, !0, t.currentItemStartArrowhead), onChange: (i) => n({ position: "start", type: i }), numberOfOptionsToAlwaysShow: 4 }), h.jsx(S6, { label: "arrowhead_end", group: "arrowheads", options: C6(!!a), value: fn(e, t, (i) => pe(i) && lu(i.type) ? i.endArrowhead : t.currentItemEndArrowhead, !0, t.currentItemEndArrowhead), onChange: (i) => n({ position: "end", type: i }), numberOfOptionsToAlwaysShow: 4 })] })] });
} });
Z({ name: "changeArrowType", label: "Change arrow types", trackEvent: !1, perform: (e, t, n, a) => {
  var s;
  let i = hn(e, t, (c) => {
    if (!ye(c)) return c;
    let d = ge(c, { roundness: n === Ht.round ? { type: jt.PROPORTIONAL_RADIUS } : null, elbowed: n === Ht.elbow, points: n === Ht.elbow || c.elbowed ? [c.points[0], c.points[c.points.length - 1]] : c.points });
    if (ee(d)) {
      let o = a.scene.getNonDeletedElementsMap();
      a.dismissLinearEditor();
      let u = J.getPointAtIndexGlobalCoordinates(d, 0, o), f = J.getPointAtIndexGlobalCoordinates(d, -1, o), p = !d.startBinding && ha(da(u), e, o, t.zoom, !1, !0), U = !d.endBinding && ha(da(f), e, o, t.zoom, !1, !0), m = p || d.startBinding && o.get(d.startBinding.elementId), g = U || d.endBinding && o.get(d.endBinding.elementId), b = p ? Wo(d, p, "start") : u, v = U ? Wo(d, U, "end") : f;
      p && qa(d, p, "start", o), U && qa(d, U, "end", o), W(d, { points: [b, v].map((x) => k(x[0] - d.x, x[1] - d.y)), ...m && d.startBinding ? { startBinding: { ...d.startBinding, ...cu(d, m, "start") } } : {}, ...g && d.endBinding ? { endBinding: { ...d.endBinding, ...cu(d, g, "end") } } : {} }), J.updateEditorMidPointsCache(d, o, a.state);
    }
    return d;
  }), r = { ...t, currentItemArrowType: n }, l = (s = t.selectedLinearElement) == null ? void 0 : s.elementId;
  if (l) {
    let c = i.find((d) => d.id === l);
    c && (r.selectedLinearElement = new J(c));
  }
  return { elements: i, appState: r, captureUpdate: H.IMMEDIATELY };
}, PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.arrowtypes") }), h.jsx(ii, { group: "arrowtypes", options: [{ value: Ht.sharp, text: C("labels.arrowtype_sharp"), icon: PI, testId: "sharp-arrow" }, { value: Ht.round, text: C("labels.arrowtype_round"), icon: OI, testId: "round-arrow" }, { value: Ht.elbow, text: C("labels.arrowtype_elbowed"), icon: NI, testId: "elbow-arrow" }], value: fn(e, t, (a) => ye(a) ? a.elbowed ? Ht.elbow : a.roundness ? Ht.round : Ht.sharp : null, (a) => ye(a), (a) => a ? null : t.currentItemArrowType), onChange: (a) => n(a) })] }) });
var Xr = ({ viewportX: e, viewportY: t, nextZoom: n }, a) => {
  let i = e - a.offsetLeft, r = t - a.offsetTop, l = a.zoom.value, s = a.scrollX + (i - i / l), c = a.scrollY + (r - r / l), d = -(i - i / n), o = -(r - r / n);
  return { scrollX: s + d, scrollY: c + o, zoom: { value: n } };
}, ko = () => {
  let e = document.querySelector(".excalidraw-tooltip");
  if (e) return e;
  let t = document.createElement("div");
  return document.body.appendChild(t), t.classList.add("excalidraw-tooltip"), t;
}, A9 = (e, t, n = "bottom") => {
  let a = e.getBoundingClientRect(), i = window.innerWidth, r = window.innerHeight, l = 5, s = t.left + t.width / 2 - a.width / 2;
  s < 0 ? s = l : s + a.width >= i && (s = i - a.width - l);
  let c;
  n === "bottom" ? (c = t.top + t.height + l, c + a.height >= r && (c = t.top - a.height - l)) : (c = t.top - a.height - l, c < 0 && (c = t.top + t.height + l)), Object.assign(e.style, { top: `${c}px`, left: `${s}px` });
}, HH = (e, t, n, a) => {
  t.classList.add("excalidraw-tooltip--visible"), t.style.minWidth = a ? "50ch" : "10ch", t.style.maxWidth = a ? "50ch" : "15ch", t.textContent = n;
  let i = e.getBoundingClientRect();
  A9(t, i);
}, fl = ({ children: e, label: t, long: n = !1, style: a, disabled: i }) => (Q(() => () => ko().classList.remove("excalidraw-tooltip--visible"), []), i ? null : h.jsx("div", { className: "excalidraw-tooltip-wrapper", onPointerEnter: (r) => HH(r.currentTarget, ko(), t, n), onPointerLeave: () => ko().classList.remove("excalidraw-tooltip--visible"), style: a, children: e }));
Z({ name: "changeViewBackgroundColor", label: "labels.canvasBackground", paletteName: "Change canvas background color", trackEvent: !1, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.changeViewBackgroundColor && !t.viewModeEnabled, perform: (e, t, n) => ({ appState: { ...t, ...n }, captureUpdate: n.viewBackgroundColor ? H.IMMEDIATELY : H.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => h.jsx(uU, { palette: null, topPicks: Pb, label: C("labels.canvasBackground"), type: "canvasBackground", color: t.viewBackgroundColor, onChange: (i) => n({ viewBackgroundColor: i }), "data-testid": "canvas-background-picker", elements: e, appState: t, updateData: n }) });
var Mo = Z({ name: "clearCanvas", label: "labels.clearCanvas", paletteName: "Clear canvas", icon: ll, trackEvent: { category: "canvas" }, predicate: (e, t, n, a) => {
  var i;
  return !!a.props.UIOptions.canvasActions.clearCanvas && !t.viewModeEnabled && ((i = t.openDialog) == null ? void 0 : i.name) !== "elementLinkSelector";
}, perform: (e, t, n, a) => (a.imageCache.clear(), { elements: e.map((i) => ge(i, { isDeleted: !0 })), appState: { ...Ka(), files: {}, theme: t.theme, penMode: t.penMode, penDetected: t.penDetected, exportBackground: t.exportBackground, exportEmbedScene: t.exportEmbedScene, gridSize: t.gridSize, gridStep: t.gridStep, gridModeEnabled: t.gridModeEnabled, stats: t.stats, pasteDialog: t.pasteDialog, activeTool: t.activeTool.type === "image" ? { ...t.activeTool, type: "selection" } : t.activeTool }, captureUpdate: H.IMMEDIATELY }) }), I6 = Z({ name: "zoomIn", label: "buttons.zoomIn", viewMode: !0, icon: em, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Xr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: xi(t.zoom.value + zu) }, t), userToFollow: null }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => h.jsx(Ce, { type: "button", className: "zoom-in-button zoom-button", icon: em, title: `${C("buttons.zoomIn")}  ${X("CtrlOrCmd++")}`, "aria-label": C("buttons.zoomIn"), disabled: t.zoom.value >= R0, onClick: () => {
  e(null);
} }), keyTest: (e) => (e.code === _e.EQUAL || e.code === _e.NUM_ADD) && (e[L.CTRL_OR_CMD] || e.shiftKey) }), T6 = Z({ name: "zoomOut", label: "buttons.zoomOut", icon: tm, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Xr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: xi(t.zoom.value - zu) }, t), userToFollow: null }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => h.jsx(Ce, { type: "button", className: "zoom-out-button zoom-button", icon: tm, title: `${C("buttons.zoomOut")}  ${X("CtrlOrCmd+-")}`, "aria-label": C("buttons.zoomOut"), disabled: t.zoom.value <= L0, onClick: () => {
  e(null);
} }), keyTest: (e) => (e.code === _e.MINUS || e.code === _e.NUM_SUBTRACT) && (e[L.CTRL_OR_CMD] || e.shiftKey) }), _6 = Z({ name: "resetZoom", label: "buttons.resetZoom", icon: UC, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Xr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: xi(1) }, t), userToFollow: null }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => h.jsx(fl, { label: C("buttons.resetZoom"), style: { height: "100%" }, children: h.jsxs(Ce, { type: "button", className: "reset-zoom-button zoom-button", title: C("buttons.resetZoom"), "aria-label": C("buttons.resetZoom"), onClick: () => {
  e(null);
}, children: [(t.zoom.value * 100).toFixed(0), "%"] }) }), keyTest: (e) => (e.code === _e.ZERO || e.code === _e.NUM_ZERO) && (e[L.CTRL_OR_CMD] || e.shiftKey) }), XH = (e, t, n = 1) => {
  let [a, i, r, l] = e, s = r - a, c = t.width / s, d = l - i, o = t.height / d, u = Math.min(c, o) * Se(n, 0.1, 1);
  return Math.min(u, 1);
}, WH = ({ bounds: e, appState: t, canvasOffsets: n, fitToViewport: a = !1, viewportZoomFactor: i = 1, minZoom: r = -1 / 0, maxZoom: l = 1 / 0 }) => {
  i = Se(i, L0, R0);
  let [s, c, d, o] = e, u = (s + d) / 2, f = (c + o) / 2, p = (n == null ? void 0 : n.left) ?? 0, U = (n == null ? void 0 : n.top) ?? 0, m = (n == null ? void 0 : n.right) ?? 0, g = (n == null ? void 0 : n.bottom) ?? 0, b = t.width - p - m, v = t.height - U - g, x;
  if (a) {
    let S = d - s, w = o - c;
    x = Math.min(b / S, v / w) * i;
  } else x = XH(e, { width: b, height: v }, i);
  let y = xi(Se(iM(x, zu, "floor"), r, l)), E = f7({ scenePoint: { x: u, y: f }, viewportDimensions: { width: t.width, height: t.height }, offsets: n, zoom: { value: y } });
  return { appState: { ...t, scrollX: E.scrollX, scrollY: E.scrollY, zoom: { value: y } }, captureUpdate: H.EVENTUALLY };
}, Sh = ({ canvasOffsets: e, targetElements: t, appState: n, fitToViewport: a, viewportZoomFactor: i, minZoom: r, maxZoom: l }) => {
  let s = ze(Qe(t));
  return WH({ canvasOffsets: e, bounds: s, appState: n, fitToViewport: a, viewportZoomFactor: i, minZoom: r, maxZoom: l });
};
Z({ name: "zoomToFitSelectionInViewport", label: "labels.zoomToFitViewport", icon: q0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return Sh({ targetElements: i.length ? i : e, appState: { ...t, userToFollow: null }, fitToViewport: !1, canvasOffsets: a.getEditorUIOffsets() });
}, keyTest: (e) => e.code === _e.TWO && e.shiftKey && !e.altKey && !e[L.CTRL_OR_CMD] });
Z({ name: "zoomToFitSelection", label: "helpDialog.zoomToSelection", icon: q0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return Sh({ targetElements: i.length ? i : e, appState: { ...t, userToFollow: null }, fitToViewport: !0, canvasOffsets: a.getEditorUIOffsets() });
}, keyTest: (e) => e.code === _e.THREE && e.shiftKey && !e.altKey && !e[L.CTRL_OR_CMD] });
Z({ name: "zoomToFit", label: "helpDialog.zoomToFit", icon: q0, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => Sh({ targetElements: e, appState: { ...t, userToFollow: null }, fitToViewport: !1, canvasOffsets: a.getEditorUIOffsets() }), keyTest: (e) => e.code === _e.ONE && e.shiftKey && !e.altKey && !e[L.CTRL_OR_CMD] });
var Iu = Z({ name: "toggleTheme", label: (e, t) => t.theme === Me.DARK ? "buttons.lightMode" : "buttons.darkMode", keywords: ["toggle", "dark", "light", "mode", "theme"], icon: (e) => e.theme === Me.LIGHT ? m1 : g1, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n) => ({ appState: { ...t, theme: n || (t.theme === Me.LIGHT ? Me.DARK : Me.LIGHT) }, captureUpdate: H.EVENTUALLY }), keyTest: (e) => e.altKey && e.shiftKey && e.code === _e.D, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.toggleTheme });
Z({ name: "toggleEraserTool", label: "toolBar.eraser", trackEvent: { category: "toolbar" }, perform: (e, t) => {
  let n;
  return Na(t) ? n = Ct(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : n = Ct(t, { type: "eraser", lastActiveToolBeforeEraser: t.activeTool }), { appState: { ...t, selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null, activeTool: n }, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => e.key === L.E });
var VH = Z({ name: "toggleHandTool", label: "toolBar.hand", paletteName: "Toggle hand tool", trackEvent: { category: "toolbar" }, icon: x8, viewMode: !1, perform: (e, t, n, a) => {
  let i;
  return ns(t) ? i = Ct(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : (i = Ct(t, { type: "hand", lastActiveToolBeforeEraser: t.activeTool }), Ge(a.interactiveCanvas, We.GRAB)), { appState: { ...t, selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null, activeTool: i }, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => !e.altKey && !e[L.CTRL_OR_CMD] && e.key === L.H }), aa = Z({ name: "finalize", label: "", trackEvent: !1, perform: (e, t, n, a) => {
  var f;
  let { interactiveCanvas: i, focusContainer: r, scene: l } = a, s = l.getNonDeletedElementsMap();
  if (t.editingLinearElement) {
    let { elementId: p, startBindingElement: U, endBindingElement: m } = t.editingLinearElement, g = J.getElement(p, s);
    if (g) return Ha(g) && Qu(g, U, m, s, l), { elements: g.points.length < 2 || Us(g) ? e.filter((b) => b.id !== g.id) : void 0, appState: { ...t, cursorButton: "up", editingLinearElement: null }, captureUpdate: H.IMMEDIATELY };
  }
  let c = e, d = t.pendingImageElementId && l.getElement(t.pendingImageElementId);
  d && W(d, { isDeleted: !0 }, !1), window.document.activeElement instanceof HTMLElement && r();
  let o = t.multiElement ? t.multiElement : ((f = t.newElement) == null ? void 0 : f.type) === "freedraw" ? t.newElement : null;
  if (o) {
    if (o.type !== "freedraw" && t.lastPointerDownWith !== "touch") {
      let { points: U, lastCommittedPoint: m } = o;
      (!m || U[U.length - 1] !== m) && W(o, { points: o.points.slice(0, -1) });
    }
    Us(o) && (c = c.filter((U) => U.id !== o.id));
    let p = Mi(o.points, t.zoom.value);
    if ((o.type === "line" || o.type === "freedraw") && p) {
      let U = o.points, m = U[0];
      W(o, { points: U.map((g, b) => b === U.length - 1 ? k(m[0], m[1]) : g) });
    }
    if (Ha(o) && !p && o.points.length > 1) {
      let [U, m] = J.getPointAtIndexGlobalCoordinates(o, -1, ue(e));
      M1(o, t, { x: U, y: m }, s, e);
    }
  }
  (!t.activeTool.locked && t.activeTool.type !== "freedraw" || !o) && ra(i);
  let u;
  return t.activeTool.type === "eraser" ? u = Ct(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : u = Ct(t, { type: "selection" }), { elements: c, appState: { ...t, cursorButton: "up", activeTool: (t.activeTool.locked || t.activeTool.type === "freedraw") && o ? t.activeTool : u, activeEmbeddable: null, newElement: null, selectionElement: null, multiElement: null, editingTextElement: null, startBoundElement: null, suggestedBindings: [], selectedElementIds: o && !t.activeTool.locked && t.activeTool.type !== "freedraw" ? { ...t.selectedElementIds, [o.id]: !0 } : t.selectedElementIds, selectedLinearElement: o && pe(o) ? new J(o) : t.selectedLinearElement, pendingImageElementId: null }, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e, t) => e.key === L.ESCAPE && (t.editingLinearElement !== null || !t.newElement && t.multiElement === null) || (e.key === L.ESCAPE || e.key === L.ENTER) && t.multiElement !== null, PanelComponent: ({ appState: e, updateData: t, data: n }) => h.jsx(Ce, { type: "button", icon: kC, title: C("buttons.done"), "aria-label": C("buttons.done"), onClick: t, visible: e.multiElement != null, size: (n == null ? void 0 : n.size) || "medium", style: { pointerEvents: "all" } }) }), GH = (e) => {
  let { id: t } = li(), [n, a] = re(e.value), i = (l) => {
    e.ignoreFocus || kM(l.target);
    let s = l.target.value;
    s !== e.value && e.onChange(s);
  }, r = (l) => {
    if (l.key === L.ENTER) {
      if (l.preventDefault(), l.nativeEvent.isComposing || l.keyCode === 229) return;
      l.currentTarget.blur();
    }
  };
  return h.jsxs("div", { className: "ProjectName", children: [h.jsx("label", { className: "ProjectName-label", htmlFor: "filename", children: `${e.label}:` }), h.jsx("input", { type: "text", className: "TextInput", onBlur: i, onKeyDown: r, id: `${t}-filename`, value: n, onChange: (l) => a(l.target.value) })] });
}, YH = (e) => {
  let t = e.title || (e.value === Me.DARK ? C("buttons.lightMode") : C("buttons.darkMode"));
  return h.jsx(Ce, { type: "icon", icon: e.value === Me.LIGHT ? A6.MOON : A6.SUN, title: t, "aria-label": t, onClick: () => e.onChange(e.value === Me.DARK ? Me.LIGHT : Me.DARK), "data-testid": "toggle-dark-mode" });
}, A6 = { SUN: h.jsx("svg", { width: "512", height: "512", className: "rtl-mirror", viewBox: "0 0 512 512", children: h.jsx("path", { fill: "currentColor", d: "M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z" }) }), MOON: h.jsx("svg", { width: "512", height: "512", className: "rtl-mirror", viewBox: "0 0 512 512", children: h.jsx("path", { fill: "currentColor", d: "M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z" }) }) }, kh = (e, { selectedElementIds: t }, n) => {
  e = Qe(e);
  let a = n && Dt(e, { selectedElementIds: t }), i = null, r = a ? xe(e, { selectedElementIds: t }, { includeBoundTextElement: !0 }) : e;
  return a && (r.length === 1 && de(r[0]) ? (i = r[0], r = Lp(e, i)) : r.length > 1 && (r = xe(e, { selectedElementIds: t }, { includeBoundTextElement: !0, includeElementsInFrames: !0 }))), { exportingFrame: i, exportedElements: yi(r) };
}, Mh = async (e, t, n, a, { exportBackground: i, exportPadding: r = Es, viewBackgroundColor: l, name: s = n.name || Hb, fileHandle: c = null, exportingFrame: d = null }) => {
  if (t.length === 0) throw new Error(C("alerts.cannotExportEmptyCanvas"));
  if (e === "svg" || e === "clipboard-svg") {
    let u = Up(t, { exportBackground: i, exportWithDarkMode: n.exportWithDarkMode, viewBackgroundColor: l, exportPadding: r, exportScale: n.exportScale, exportEmbedScene: n.exportEmbedScene && e === "svg" }, a, { exportingFrame: d });
    if (e === "svg") return pu(u.then((f) => new Blob([f.outerHTML], { type: oe.svg })), { description: "Export to SVG", name: s, extension: n.exportEmbedScene ? "excalidraw.svg" : "svg", mimeTypes: [ts.svg], fileHandle: c });
    if (e === "clipboard-svg") {
      let f = await u.then((p) => p.outerHTML);
      try {
        await vc(f);
      } catch {
        throw new Error(C("errors.copyToSystemClipboardFailed"));
      }
      return;
    }
  }
  let o = Q7(t, n, a, { exportBackground: i, viewBackgroundColor: l, exportPadding: r, exportingFrame: d });
  if (e === "png") {
    let u = Qo(o);
    return n.exportEmbedScene && (u = u.then((f) => import("./image-7KUKJ7J4-BO5pC_nI.js").then(({ encodePngMetadata: p }) => p({ blob: f, metadata: up(t, n, a) })))), pu(u, { description: "Export to PNG", name: s, extension: n.exportEmbedScene ? "excalidraw.png" : "png", mimeTypes: [ts.png], fileHandle: c });
  } else if (e === "clipboard") try {
    let u = Qo(o);
    await PP(u);
  } catch (u) {
    throw console.warn(u), u.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : Oo && u.name === "TypeError" ? new Error(`${C("alerts.couldNotCopyToClipboard")}

${C("hints.firefox_clipboard_write")}`) : new Error(C("alerts.couldNotCopyToClipboard"));
  }
  else throw new Error("Unsupported export type");
}, ZH = async (e, t, n, a) => {
  let { exportBackground: i, viewBackgroundColor: r, fileHandle: l } = t, s = w3(l);
  if (!l || !vN(s)) throw new Error("fileHandle should exist and should be of type svg or png when resaving");
  t = { ...t, exportEmbedScene: !0 };
  let { exportedElements: c, exportingFrame: d } = kh(e, t, !1);
  return await Mh(s, c, t, n, { exportBackground: i, viewBackgroundColor: r, name: a, fileHandle: l, exportingFrame: d }), { fileHandle: l };
}, UU = ({ children: e, checked: t, onChange: n, className: a }) => h.jsxs("div", { className: ne("Checkbox", a, { "is-checked": t }), onClick: (i) => {
  n(!t, i), i.currentTarget.querySelector(".Checkbox-box").focus();
}, children: [h.jsx("button", { type: "button", className: "Checkbox-box", role: "checkbox", "aria-checked": t, children: xC }), h.jsx("div", { className: "Checkbox-label", children: e })] }), KH = Z({ name: "changeProjectName", label: "labels.fileTitle", trackEvent: !1, perform: (e, t, n) => ({ appState: { ...t, name: n }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t, appProps: n, data: a, app: i }) => h.jsx(GH, { label: C("labels.fileTitle"), value: i.getName(), onChange: (r) => t(r), ignoreFocus: (a == null ? void 0 : a.ignoreFocus) ?? !1 }) }), qH = Z({ name: "changeExportScale", label: "imageExportDialog.scale", trackEvent: { category: "export", action: "scale" }, perform: (e, t, n) => ({ appState: { ...t, exportScale: n }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = Qe(e), i = Dt(a, t) ? xe(a, t) : a;
  return h.jsx(h.Fragment, { children: N0.map((r) => {
    let [l, s] = QR(i, Es, r), c = `${C("imageExportDialog.label.scale")} ${r}x (${l}x${s})`;
    return h.jsx(Ce, { size: "small", type: "radio", icon: `${r}x`, name: "export-canvas-scale", title: c, "aria-label": c, id: "export-canvas-scale", checked: r === t.exportScale, onChange: () => n(r) }, r);
  }) });
} }), JH = Z({ name: "changeExportBackground", label: "imageExportDialog.label.withBackground", trackEvent: { category: "export", action: "toggleBackground" }, perform: (e, t, n) => ({ appState: { ...t, exportBackground: n }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => h.jsx(UU, { checked: e.exportBackground, onChange: (n) => t(n), children: C("imageExportDialog.label.withBackground") }) }), j9 = Z({ name: "changeExportEmbedScene", label: "imageExportDialog.tooltip.embedScene", trackEvent: { category: "export", action: "embedScene" }, perform: (e, t, n) => ({ appState: { ...t, exportEmbedScene: n }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => h.jsxs(UU, { checked: e.exportEmbedScene, onChange: (n) => t(n), children: [C("imageExportDialog.label.embedScene"), h.jsx(fl, { label: C("imageExportDialog.tooltip.embedScene"), long: !0, children: h.jsx("div", { className: "excalidraw-tooltip-icon", children: MC }) })] }) }), j6 = Z({ name: "saveToActiveFile", label: "buttons.save", icon: Gu, trackEvent: { category: "export" }, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.saveToActiveFile && !!t.fileHandle && !t.viewModeEnabled, perform: async (e, t, n, a) => {
  let i = !!t.fileHandle;
  try {
    let { fileHandle: r } = Bp(t.fileHandle) ? await ZH(e, t, a.files, a.getName()) : await N7(e, t, a.files, a.getName());
    return { captureUpdate: H.EVENTUALLY, appState: { ...t, fileHandle: r, toast: i ? { message: r != null && r.name ? C("toast.fileSavedToFilename").replace("{filename}", `"${r.name}"`) : C("toast.fileSaved") } : null } };
  } catch (r) {
    return (r == null ? void 0 : r.name) !== "AbortError" ? console.error(r) : console.warn(r), { captureUpdate: H.EVENTUALLY };
  }
}, keyTest: (e) => e.key === L.S && e[L.CTRL_OR_CMD] && !e.shiftKey }), D9 = Z({ name: "saveFileToDisk", label: "exportDialog.disk_title", icon: Gu, viewMode: !0, trackEvent: { category: "export" }, perform: async (e, t, n, a) => {
  try {
    let { fileHandle: i } = await N7(e, { ...t, fileHandle: null }, a.files, a.getName());
    return { captureUpdate: H.EVENTUALLY, appState: { ...t, openDialog: null, fileHandle: i, toast: { message: C("toast.fileSaved") } } };
  } catch (i) {
    return (i == null ? void 0 : i.name) !== "AbortError" ? console.error(i) : console.warn(i), { captureUpdate: H.EVENTUALLY };
  }
}, keyTest: (e) => e.key === L.S && e.shiftKey && e[L.CTRL_OR_CMD], PanelComponent: ({ updateData: e }) => h.jsx(Ce, { type: "button", icon: wC, title: C("buttons.saveAs"), "aria-label": C("buttons.saveAs"), showAriaLabel: $t().editor.isMobile, hidden: !ml, onClick: () => e(null), "data-testid": "save-as-button" }) }), s0 = Z({ name: "loadScene", label: "buttons.load", trackEvent: { category: "export" }, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.loadScene && !t.viewModeEnabled, perform: async (e, t, n, a) => {
  try {
    let { elements: i, appState: r, files: l } = await HR(t, e);
    return { elements: i, appState: r, files: l, captureUpdate: H.IMMEDIATELY };
  } catch (i) {
    return (i == null ? void 0 : i.name) === "AbortError" ? (console.warn(i), !1) : { elements: e, appState: { ...t, errorMessage: i.message }, files: a.files, captureUpdate: H.EVENTUALLY };
  }
}, keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.O }), QH = Z({ name: "exportWithDarkMode", label: "imageExportDialog.label.darkMode", trackEvent: { category: "export", action: "toggleTheme" }, perform: (e, t, n) => ({ appState: { ...t, exportWithDarkMode: n }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => h.jsx("div", { style: { display: "flex", justifyContent: "flex-end", marginTop: "-45px", marginBottom: "10px" }, children: h.jsx(YH, { value: e.exportWithDarkMode ? Me.DARK : Me.LIGHT, onChange: (n) => {
  t(n === Me.DARK);
}, title: C("imageExportDialog.label.darkMode") }) }) }), L9 = "{}", eX = Z({ name: "copyStyles", label: "labels.copyStyles", icon: M8, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = [], r = e.find((l) => t.selectedElementIds[l.id]);
  if (i.push(r), r && Jn(r)) {
    let l = be(r, a.scene.getNonDeletedElementsMap());
    i.push(l);
  }
  return r && (L9 = JSON.stringify(i)), { appState: { ...t, toast: { message: C("toast.copyStyles") } }, captureUpdate: H.EVENTUALLY };
}, keyTest: (e) => e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.C }), tX = Z({ name: "pasteStyles", label: "labels.pasteStyles", icon: M8, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = JSON.parse(L9), r = i[0], l = i[1];
  if (!r8(r)) return { elements: e, captureUpdate: H.EVENTUALLY };
  let s = xe(e, t, { includeBoundTextElement: !0 }), c = s.map((d) => d.id);
  return { elements: e.map((d) => {
    if (c.includes(d.id)) {
      let o = r;
      if (q(d) && d.containerId && (o = l), !o) return d;
      let u = ge(d, { backgroundColor: o == null ? void 0 : o.backgroundColor, strokeWidth: o == null ? void 0 : o.strokeWidth, strokeColor: o == null ? void 0 : o.strokeColor, strokeStyle: o == null ? void 0 : o.strokeStyle, fillStyle: o == null ? void 0 : o.fillStyle, opacity: o == null ? void 0 : o.opacity, roughness: o == null ? void 0 : o.roughness, roundness: o.roundness ? PM(o.roundness.type, d) ? o.roundness : NM(d) : null });
      if (q(u)) {
        let f = o.fontSize || Ni, p = o.fontFamily || xr;
        u = ge(u, { fontSize: f, fontFamily: p, textAlign: o.textAlign || uc, lineHeight: o.lineHeight || ol(p) });
        let U = null;
        u.containerId && (U = s.find((m) => q(u) && m.id === u.containerId) || null), un(u, U, a.scene.getNonDeletedElementsMap());
      }
      return u.type === "arrow" && ye(o) && (u = ge(u, { startArrowhead: o.startArrowhead, endArrowhead: o.endArrowhead })), de(d) && (u = ge(u, { roundness: null, backgroundColor: "transparent" })), u;
    }
    return d;
  }), captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.V });
Z({ name: "toggleCanvasMenu", label: "buttons.menu", trackEvent: { category: "menu" }, perform: (e, t) => ({ appState: { ...t, openMenu: t.openMenu === "canvas" ? null : "canvas" }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => h.jsx(Ce, { type: "button", icon: h8, "aria-label": C("buttons.menu"), onClick: t, selected: e.openMenu === "canvas" }) });
Z({ name: "toggleEditMenu", label: "buttons.edit", trackEvent: { category: "menu" }, perform: (e, t) => ({ appState: { ...t, openMenu: t.openMenu === "shape" ? null : "shape" }, captureUpdate: H.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsx(Ce, { visible: zp(t, Qe(e)), type: "button", icon: EC, "aria-label": C("buttons.edit"), onClick: n, selected: t.openMenu === "shape" }) });
var mU = Z({ name: "toggleShortcuts", label: "welcomeScreen.defaults.helpHint", icon: gC, viewMode: !0, trackEvent: { category: "menu", action: "toggleHelpDialog" }, perform: (e, t, n, { focusContainer: a }) => {
  var i, r;
  return ((i = t.openDialog) == null ? void 0 : i.name) === "help" && a(), { appState: { ...t, openDialog: ((r = t.openDialog) == null ? void 0 : r.name) === "help" ? null : { name: "help" } }, captureUpdate: H.EVENTUALLY };
}, keyTest: (e) => e.key === L.QUESTION_MARK }), nX = (e) => {
  if (e.length >= 2) {
    let t = e[0].groupIds;
    for (let n of t) if (e.reduce((a, i) => a && Yo(i, n), !0)) return !0;
  }
  return !1;
}, D6 = (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 });
  return a.length >= 2 && !nX(a) && !u3(a);
}, aX = Z({ name: "group", label: "labels.group", icon: (e) => h.jsx(Um, { theme: e.theme }), trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = Dp(a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 }));
  if (i.length < 2) return { appState: t, elements: e, captureUpdate: H.EVENTUALLY };
  let r = Yr(t);
  if (r.length === 1) {
    let m = r[0], g = new Set(it(e, m).map((v) => v.id)), b = new Set(i.map((v) => v.id));
    if ((/* @__PURE__ */ new Set([...Array.from(g), ...Array.from(b)])).size === g.size) return { appState: t, elements: e, captureUpdate: H.EVENTUALLY };
  }
  let l = [...e];
  new Set(i.map((m) => m.frameId)).size > 1 && VP(i).forEach((m, g) => {
    ch(m, a.scene.getNonDeletedElementsMap());
  });
  let s = Qn(), c = ue(i);
  l = l.map((m) => c.get(m.id) ? ge(m, { groupIds: ZL(m.groupIds, s, t.editingGroupId) }) : m);
  let d = it(l, s), o = d[d.length - 1], u = l.lastIndexOf(o), f = l.slice(u + 1), p = l.slice(0, u).filter((m) => !Yo(m, s)), U = ei([...p, ...d, ...f], ue(d));
  return { appState: { ...t, ...U7(s, { ...t, selectedGroupIds: {} }, Qe(l)) }, elements: U, captureUpdate: H.IMMEDIATELY };
}, predicate: (e, t, n, a) => D6(e, t, a), keyTest: (e) => !e.shiftKey && e[L.CTRL_OR_CMD] && e.key === L.G, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !D6(e, t, a), type: "button", icon: h.jsx(Um, { theme: t.theme }), onClick: () => n(null), title: `${C("labels.group")}  ${X("CtrlOrCmd+G")}`, "aria-label": C("labels.group"), visible: Dt(Qe(e), t) }) }), iX = Z({ name: "ungroup", label: "labels.ungroup", icon: (e) => h.jsx(mm, { theme: e.theme }), trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = Yr(t), r = ue(e);
  if (i.length === 0) return { appState: t, elements: e, captureUpdate: H.EVENTUALLY };
  let l = [...e], s = [];
  l = l.map((u) => {
    rt(u) && s.push(u.id);
    let f = KL(u.groupIds, t.selectedGroupIds);
    return f.length === u.groupIds.length ? u : ge(u, { groupIds: f });
  });
  let c = dn(t, Qe(l), t, null), d = a.scene.getSelectedElements(t), o = new Set(d.filter((u) => u.frameId).map((u) => u.frameId));
  return jp(e).filter((u) => o.has(u.id)).forEach((u) => {
    u && (l = c3(l, Md(l, u, t, r), u, a));
  }), c.selectedElementIds = Object.entries(c.selectedElementIds).reduce((u, [f, p]) => (p && !s.includes(f) && (u[f] = !0), u), {}), { appState: { ...t, ...c }, elements: l, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e) => e.shiftKey && e[L.CTRL_OR_CMD] && e.key === L.G.toUpperCase(), predicate: (e, t) => Yr(t).length > 0, PanelComponent: ({ elements: e, appState: t, updateData: n }) => h.jsx(Ce, { type: "button", hidden: Yr(t).length === 0, icon: h.jsx(mm, { theme: t.theme }), onClick: () => n(null), title: `${C("labels.ungroup")}  ${X("CtrlOrCmd+Shift+G")}`, "aria-label": C("labels.ungroup"), visible: Dt(Qe(e), t) }) }), R9 = (e, t, n, a, i, r, l) => {
  e.beginPath(), e.moveTo(t + r, n), e.lineTo(t + a - r, n), e.quadraticCurveTo(t + a, n, t + a, n + r), e.lineTo(t + a, n + i - r), e.quadraticCurveTo(t + a, n + i, t + a - r, n + i), e.lineTo(t + r, n + i), e.quadraticCurveTo(t, n + i, t, n + i - r), e.lineTo(t, n + r), e.quadraticCurveTo(t, n, t + r, n), e.closePath(), e.fill(), l && (e.strokeStyle = l), e.stroke();
};
function rX(e) {
  let t = 0;
  if (e.length === 0) return t;
  for (let n = 0; n < e.length; n++) {
    let a = e.charCodeAt(n);
    t = (t << 5) - t + a;
  }
  return t;
}
var Ch = (e, t) => `hsl(${Math.abs(rX((t == null ? void 0 : t.id) || e)) % 37 * 10}, 100%, 83%)`, lX = (e) => {
  var n;
  let t = (n = e == null ? void 0 : e.trim()) == null ? void 0 : n.codePointAt(0);
  return (t ? String.fromCodePoint(t) : "?").toUpperCase();
}, sX = ({ context: e, renderConfig: t, appState: n, normalizedWidth: a, normalizedHeight: i }) => {
  for (let [r, l] of t.remotePointerViewportCoords) {
    let { x: s, y: c } = l, d = n.collaborators.get(r);
    s -= n.offsetLeft, c -= n.offsetTop;
    let o = 11, u = 14, f = s < 0 || s > a - o || c < 0 || c > i - u;
    s = Math.max(s, 0), s = Math.min(s, a - o), c = Math.max(c, 0), c = Math.min(c, i - u);
    let p = Ch(r, d);
    e.save(), e.strokeStyle = p, e.fillStyle = p;
    let U = t.remotePointerUserStates.get(r), m = f || U === "idle" || U === "away";
    m && (e.globalAlpha = 0.3), t.remotePointerButton.get(r) === "down" && (e.beginPath(), e.arc(s, c, 15, 0, 2 * Math.PI, !1), e.lineWidth = 3, e.strokeStyle = "#ffffff88", e.stroke(), e.closePath(), e.beginPath(), e.arc(s, c, 15, 0, 2 * Math.PI, !1), e.lineWidth = 1, e.strokeStyle = p, e.stroke(), e.closePath());
    let g = n.theme === Me.DARK ? "#2f6330" : Nk, b = d == null ? void 0 : d.isSpeaking;
    b && (e.fillStyle = g, e.strokeStyle = g, e.lineWidth = 10, e.lineJoin = "round", e.beginPath(), e.moveTo(s, c), e.lineTo(s + 0, c + 14), e.lineTo(s + 4, c + 9), e.lineTo(s + 11, c + 8), e.closePath(), e.stroke(), e.fill()), e.fillStyle = $c, e.strokeStyle = $c, e.lineWidth = 6, e.lineJoin = "round", e.beginPath(), e.moveTo(s, c), e.lineTo(s + 0, c + 14), e.lineTo(s + 4, c + 9), e.lineTo(s + 11, c + 8), e.closePath(), e.stroke(), e.fill(), e.fillStyle = p, e.strokeStyle = p, e.lineWidth = 2, e.lineJoin = "round", e.beginPath(), m ? (e.moveTo(s - 1, c - 1), e.lineTo(s - 1, c + 15), e.lineTo(s + 5, c + 10), e.lineTo(s + 12, c + 9), e.closePath(), e.fill()) : (e.moveTo(s, c), e.lineTo(s + 0, c + 14), e.lineTo(s + 4, c + 9), e.lineTo(s + 11, c + 8), e.closePath(), e.fill(), e.stroke());
    let v = t.remotePointerUsernames.get(r) || "";
    if (!f && v) {
      e.font = "600 12px sans-serif";
      let x = (b ? s + 0 : s) + o / 2, y = (b ? c + 0 : c) + u + 2, E = 5, S = 3, w = e.measureText(v), M = w.actualBoundingBoxDescent + w.actualBoundingBoxAscent, I = Math.max(M, 12), T = x - 1, _ = y - 1, A = w.width + 2 + E * 2 + 2, D = I + 2 + S * 2 + 2;
      if (e.roundRect ? (e.beginPath(), e.roundRect(T, _, A, D, 8), e.fillStyle = p, e.fill(), e.strokeStyle = $c, e.stroke(), b && (e.beginPath(), e.roundRect(T - 2, _ - 2, A + 4, D + 4, 8), e.strokeStyle = g, e.stroke())) : R9(e, T, _, A, D, 8, $c), e.fillStyle = Pk, e.fillText(v, x + E + 1, y + S + w.actualBoundingBoxAscent + Math.floor((I - M) / 2) + 2), b) {
        e.fillStyle = g;
        let P = 8, N = 8, $ = 5;
        e.fillRect(T + A + N, _ + (D / 2 - P / 2), 2, P), e.fillRect(T + A + N + $, _ + (D / 2 - P * 2 / 2), 2, P * 2), e.fillRect(T + A + N + $ * 2, _ + (D / 2 - P / 2), 2, P);
      }
    }
    e.restore(), e.closePath();
  }
}, L6 = ({ color: e, onClick: t, name: n, src: a, className: i }) => {
  let r = lX(n), [l, s] = re(!1), c = !l && a, d = c ? void 0 : { background: e };
  return h.jsx("div", { className: ne("Avatar", i), style: d, onClick: t, children: c ? h.jsx("img", { className: "Avatar-img", src: a, alt: r, referrerPolicy: "no-referrer", onError: () => s(!0) }) : r });
};
Z({ name: "goToCollaborator", label: "Go to a collaborator", viewMode: !0, trackEvent: { category: "collab" }, perform: (e, t, n) => {
  var a;
  return !n.socketId || ((a = t.userToFollow) == null ? void 0 : a.socketId) === n.socketId || n.isCurrentUser ? { appState: { ...t, userToFollow: null }, captureUpdate: H.EVENTUALLY } : { appState: { ...t, userToFollow: { socketId: n.socketId, username: n.username || "" }, openMenu: t.openMenu === "canvas" ? null : t.openMenu }, captureUpdate: H.EVENTUALLY };
}, PanelComponent: ({ updateData: e, data: t, appState: n }) => {
  let { socketId: a, collaborator: i, withName: r, isBeingFollowed: l } = t, s = Ch(a, i), c = ne({ "is-followed": l, "is-current-user": i.isCurrentUser === !0, "is-speaking": i.isSpeaking, "is-in-call": i.isInCall, "is-muted": i.isMuted }), d = i.isInCall ? i.isSpeaking ? h.jsxs("div", { className: "UserList__collaborator-status-icon-speaking-indicator", title: C("userList.hint.isSpeaking"), children: [h.jsx("div", {}), h.jsx("div", {}), h.jsx("div", {})] }) : i.isMuted ? h.jsx("div", { className: "UserList__collaborator-status-icon-microphone-muted", title: C("userList.hint.micMuted"), children: EI }) : h.jsx("div", { title: C("userList.hint.inCall"), children: wI }) : null;
  return r ? h.jsxs("div", { className: `dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${c}`, style: { "--avatar-size": "1.5rem" }, onClick: () => e(i), children: [h.jsx(L6, { color: s, onClick: () => {
  }, name: i.username || "", src: i.avatarUrl, className: c }), h.jsx("div", { className: "UserList__collaborator-name", children: i.username }), h.jsxs("div", { className: "UserList__collaborator-status-icons", "aria-hidden": !0, children: [l && h.jsx("div", { className: "UserList__collaborator-status-icon-is-followed", title: C("userList.hint.followStatus"), children: K0 }), d] })] }) : h.jsxs("div", { className: `UserList__collaborator UserList__collaborator--avatar-only ${c}`, children: [h.jsx(L6, { color: s, onClick: () => {
    e(i);
  }, name: i.username || "", src: i.avatarUrl, className: c }), d && h.jsx("div", { className: "UserList__collaborator-status-icon", children: d })] });
} });
var oX = Z({ name: "addToLibrary", trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  for (let r of Bb) if (i.some((l) => l.type === r)) return { captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: C(`errors.libraryElementTypeError.${r}`) } };
  return a.library.getLatestLibrary().then((r) => a.library.setLibrary([{ id: Qn(), status: "unpublished", elements: i.map(bl), created: Date.now() }, ...r])).then(() => ({ captureUpdate: H.EVENTUALLY, appState: { ...t, toast: { message: C("toast.addedToLibrary") } } })).catch((r) => ({ captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: r.message } }));
}, label: "labels.addToLibrary" }), cX = (e, t, n, a) => {
  let i = ah(e, t), r = ga(e);
  return i.flatMap((l) => {
    let s = dX(l, r, n);
    return l.map((c) => {
      let d = W(c, { x: c.x + s.x, y: c.y + s.y });
      return Sn(c, a.getNonDeletedElementsMap(), { simultaneouslyUpdated: l }), d;
    });
  });
}, dX = (e, t, { axis: n, position: a }) => {
  let i = ga(e), [r, l] = n === "x" ? ["minX", "maxX"] : ["minY", "maxY"], s = { x: 0, y: 0 };
  return a === "start" ? { ...s, [n]: t[r] - i[r] } : a === "end" ? { ...s, [n]: t[l] - i[l] } : { ...s, [n]: (t[r] + t[l]) / 2 - (i[r] + i[l]) / 2 };
}, Pn = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length > 1 && !n.some((a) => de(a));
}, js = (e, t, n, a) => {
  let i = n.scene.getSelectedElements(t), r = ue(e), l = cX(i, r, a, n.scene), s = ue(l);
  return ps(e.map((c) => s.get(c.id) || c), t, n);
};
Z({ name: "alignTop", label: "labels.alignTop", icon: cm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "start", axis: "y" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && e.key === L.ARROW_UP, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: cm, onClick: () => n(null), title: `${C("labels.alignTop")}  ${X("CtrlOrCmd+Shift+Up")}`, "aria-label": C("labels.alignTop"), visible: Dt(Qe(e), t) }) });
Z({ name: "alignBottom", label: "labels.alignBottom", icon: dm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "end", axis: "y" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && e.key === L.ARROW_DOWN, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: dm, onClick: () => n(null), title: `${C("labels.alignBottom")}  ${X("CtrlOrCmd+Shift+Down")}`, "aria-label": C("labels.alignBottom"), visible: Dt(Qe(e), t) }) });
Z({ name: "alignLeft", label: "labels.alignLeft", icon: um, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "start", axis: "x" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && e.key === L.ARROW_LEFT, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: um, onClick: () => n(null), title: `${C("labels.alignLeft")}  ${X("CtrlOrCmd+Shift+Left")}`, "aria-label": C("labels.alignLeft"), visible: Dt(Qe(e), t) }) });
Z({ name: "alignRight", label: "labels.alignRight", icon: hm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "end", axis: "x" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e[L.CTRL_OR_CMD] && e.shiftKey && e.key === L.ARROW_RIGHT, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: hm, onClick: () => n(null), title: `${C("labels.alignRight")}  ${X("CtrlOrCmd+Shift+Right")}`, "aria-label": C("labels.alignRight"), visible: Dt(Qe(e), t) }) });
Z({ name: "alignVerticallyCentered", label: "labels.centerVertically", icon: fm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "center", axis: "y" }), captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: fm, onClick: () => n(null), title: C("labels.centerVertically"), "aria-label": C("labels.centerVertically"), visible: Dt(Qe(e), t) }) });
Z({ name: "alignHorizontallyCentered", label: "labels.centerHorizontally", icon: pm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => Pn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: js(e, t, a, { position: "center", axis: "x" }), captureUpdate: H.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !Pn(t, a), type: "button", icon: pm, onClick: () => n(null), title: C("labels.centerHorizontally"), "aria-label": C("labels.centerHorizontally"), visible: Dt(Qe(e), t) }) });
var uX = (e, t, n) => {
  let [a, i, r, l] = n.axis === "x" ? ["minX", "midX", "maxX", "width"] : ["minY", "midY", "maxY", "height"], s = ga(e), c = ah(e, t).map((f) => [f, ga(f)]).sort((f, p) => f[1][i] - p[1][i]), d = 0;
  for (let f of c) d += f[1][l];
  let o = (s[l] - d) / (c.length - 1);
  if (o < 0) {
    let f = c.findIndex((g) => g[1][a] === s[a]), p = c.findIndex((g) => g[1][r] === s[r]), U = (c[p][1][i] - c[f][1][i]) / (c.length - 1), m = c[f][1][i];
    return c.flatMap(([g, b], v) => {
      let x = { x: 0, y: 0 };
      return v !== f && v !== p && (m += U, x[n.axis] = m - b[i]), g.map((y) => ge(y, { x: y.x + x.x, y: y.y + x.y }));
    });
  }
  let u = s[a];
  return c.flatMap(([f, p]) => {
    let U = { x: 0, y: 0 };
    return U[n.axis] = u - p[a], u += o, u += p[l], f.map((m) => ge(m, { x: m.x + U.x, y: m.y + U.y }));
  });
}, P9 = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length > 1 && !n.some((a) => de(a));
}, N9 = (e, t, n, a) => {
  let i = n.scene.getSelectedElements(t), r = uX(i, n.scene.getNonDeletedElementsMap(), a), l = ue(r);
  return ps(e.map((s) => l.get(s.id) || s), t, n);
};
Z({ name: "distributeHorizontally", label: "labels.distributeHorizontally", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ appState: t, elements: N9(e, t, a, { axis: "x" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.H, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !P9(t, a), type: "button", icon: CC, onClick: () => n(null), title: `${C("labels.distributeHorizontally")}  ${X("Alt+H")}`, "aria-label": C("labels.distributeHorizontally"), visible: Dt(Qe(e), t) }) });
Z({ name: "distributeVertically", label: "labels.distributeVertically", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ appState: t, elements: N9(e, t, a, { axis: "y" }), captureUpdate: H.IMMEDIATELY }), keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.V, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => h.jsx(Ce, { hidden: !P9(t, a), type: "button", icon: IC, onClick: () => n(null), title: `${C("labels.distributeVertically")}  ${X("Alt+V")}`, "aria-label": C("labels.distributeVertically"), visible: Dt(Qe(e), t) }) });
var hX = Z({ name: "flipHorizontal", label: "labels.flipHorizontal", icon: CI, trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: ps(O9(e, a.scene.getNonDeletedElementsMap(), t, "horizontal", a), t, a), appState: t, captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e.shiftKey && e.code === _e.H }), fX = Z({ name: "flipVertical", label: "labels.flipVertical", icon: MI, trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: ps(O9(e, a.scene.getNonDeletedElementsMap(), t, "vertical", a), t, a), appState: t, captureUpdate: H.IMMEDIATELY }), keyTest: (e) => e.shiftKey && e.code === _e.V && !e[L.CTRL_OR_CMD] }), O9 = (e, t, n, a, i) => {
  let r = xe(Qe(e), n, { includeBoundTextElement: !0, includeElementsInFrames: !0 }), l = pX(r, t, n, a, i), s = ue(l);
  return e.map((c) => s.get(c.id) || c);
}, pX = (e, t, n, a, i) => {
  if (e.every((p) => ye(p) && (p.startBinding || p.endBinding))) return e.map((p) => {
    let U = p;
    return ge(U, { startArrowhead: U.endArrowhead, endArrowhead: U.startArrowhead });
  });
  let { midX: r, midY: l } = ga(e);
  v3(e, t, "nw", i.scene, new Map(Array.from(t.values()).map((p) => [p.id, bl(p)])), { flipByX: a === "horizontal", flipByY: a === "vertical", shouldResizeFromCenter: !0, shouldMaintainAspectRatio: !0 }), ou(e.filter(pe), t, i.scene.getNonDeletedElements(), i.scene, Br(n), [], n.zoom);
  let { elbowArrows: s, otherElements: c } = e.reduce((p, U) => ee(U) ? { ...p, elbowArrows: p.elbowArrows.concat(U) } : { ...p, otherElements: p.otherElements.concat(U) }, { elbowArrows: [], otherElements: [] }), { midX: d, midY: o } = ga(e), [u, f] = [r - d, l - o];
  return c.forEach((p) => W(p, { x: p.x + u, y: p.y + f })), s.forEach((p) => W(p, { x: p.x + u, y: p.y + f })), e;
}, Ld = Z({ name: "copy", label: "labels.copy", icon: U1, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  try {
    await AP(i, a.files, n);
  } catch (r) {
    return { captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: r.message } };
  }
  return { captureUpdate: H.EVENTUALLY };
}, keyTest: void 0 }), R6 = Z({ name: "paste", label: "labels.paste", trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i;
  try {
    i = await LP();
  } catch (r) {
    return r.name === "AbortError" || r.name === "NotAllowedError" ? !1 : (console.error(`actionPaste ${r.name}: ${r.message}`), Oo ? { captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: C("hints.firefox_clipboard_write") } } : { captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: C("errors.asyncPasteFailedOnRead") } });
  }
  try {
    a.pasteFromClipboard(TP({ types: i }));
  } catch (r) {
    return console.error(r), { captureUpdate: H.EVENTUALLY, appState: { ...t, errorMessage: C("errors.asyncPasteFailedOnParse") } };
  }
  return { captureUpdate: H.EVENTUALLY };
}, keyTest: void 0 }), P6 = Z({ name: "cut", label: "labels.cut", icon: hI, trackEvent: { category: "element" }, perform: (e, t, n, a) => (Ld.perform(e, t, n, a), d9.perform(e, t, null, a)), keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.X }), N6 = Z({ name: "copyAsSvg", label: "labels.copyAsSvg", icon: II, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  if (!a.canvas) return { captureUpdate: H.EVENTUALLY };
  let { exportedElements: i, exportingFrame: r } = kh(e, t, !0);
  try {
    await Mh("clipboard-svg", i, t, a.files, { ...t, exportingFrame: r, name: a.getName() });
    let l = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
    return { appState: { toast: { message: C("toast.copyToClipboardAsSvg", { exportSelection: l.length ? C("toast.selection") : C("toast.canvas"), exportColorScheme: t.exportWithDarkMode ? C("buttons.darkMode") : C("buttons.lightMode") }) } }, captureUpdate: H.EVENTUALLY };
  } catch (l) {
    return console.error(l), { appState: { errorMessage: l.message }, captureUpdate: H.EVENTUALLY };
  }
}, predicate: (e) => Mp && e.length > 0, keywords: ["svg", "clipboard", "copy"] }), O6 = Z({ name: "copyAsPng", label: "labels.copyAsPng", icon: TI, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  if (!a.canvas) return { captureUpdate: H.EVENTUALLY };
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }), { exportedElements: r, exportingFrame: l } = kh(e, t, !0);
  try {
    return await Mh("clipboard", r, t, a.files, { ...t, exportingFrame: l, name: a.getName() }), { appState: { ...t, toast: { message: C("toast.copyToClipboardAsPng", { exportSelection: i.length ? C("toast.selection") : C("toast.canvas"), exportColorScheme: t.exportWithDarkMode ? C("buttons.darkMode") : C("buttons.lightMode") }) } }, captureUpdate: H.EVENTUALLY };
  } catch (s) {
    return console.error(s), { appState: { ...t, errorMessage: s.message }, captureUpdate: H.EVENTUALLY };
  }
}, predicate: (e) => Cp && e.length > 0, keyTest: (e) => e.code === _e.C && e.altKey && e.shiftKey, keywords: ["png", "clipboard", "copy"] }), $6 = Z({ name: "copyText", label: "labels.copyText", trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 });
  try {
    vc(mR(i));
  } catch {
    throw new Error(C("errors.copyToSystemClipboardFailed"));
  }
  return { captureUpdate: H.EVENTUALLY };
}, predicate: (e, t, n, a) => Mp && a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 }).some(q), keywords: ["text", "clipboard", "copy"] }), F6 = Z({ name: "gridMode", icon: LI, keywords: ["snap"], label: "labels.toggleGrid", viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => e.gridModeEnabled }, perform(e, t) {
  return { appState: { ...t, gridModeEnabled: !this.checked(t), objectsSnapModeEnabled: !1 }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.gridModeEnabled, predicate: (e, t, n) => n.gridModeEnabled === void 0, keyTest: (e) => e[L.CTRL_OR_CMD] && e.code === _e.QUOTE }), o0 = Z({ name: "zenMode", label: "buttons.zenMode", icon: AI, paletteName: "Toggle zen mode", viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => !e.zenModeEnabled }, perform(e, t) {
  return { appState: { ...t, zenModeEnabled: !this.checked(t) }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.zenModeEnabled, predicate: (e, t, n) => typeof n.zenModeEnabled > "u", keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.Z }), UX = Z({ name: "objectsSnapMode", label: "buttons.objectsSnapMode", icon: _I, viewMode: !1, trackEvent: { category: "canvas", predicate: (e) => !e.objectsSnapModeEnabled }, perform(e, t) {
  return { appState: { ...t, objectsSnapModeEnabled: !this.checked(t), gridModeEnabled: !1 }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.objectsSnapModeEnabled, predicate: (e, t, n) => typeof n.objectsSnapModeEnabled > "u", keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.S }), c0 = Z({ name: "stats", label: "stats.fullTitle", icon: kI, paletteName: "Toggle stats", viewMode: !0, trackEvent: { category: "menu" }, keywords: ["edit", "attributes", "customize"], perform(e, t) {
  return { appState: { ...t, stats: { ...t.stats, open: !this.checked(t) } }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.stats.open, keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.SLASH }), mX = Z({ name: "unbindText", label: "labels.unbindText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => a.scene.getSelectedElements(t).some((i) => Jn(i)), perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r = a.scene.getNonDeletedElementsMap();
  return i.forEach((l) => {
    var c;
    let s = be(l, r);
    if (s) {
      let { width: d, height: o } = ln(s.originalText, Ye(s), s.lineHeight), u = cR(l.id);
      y7(l.id);
      let { x: f, y: p } = rh(l, s, r);
      W(s, { containerId: null, width: d, height: o, text: s.originalText, x: f, y: p }), W(l, { boundElements: (c = l.boundElements) == null ? void 0 : c.filter((U) => U.id !== s.id), height: u || l.height });
    }
  }), { elements: e, appState: t, captureUpdate: H.IMMEDIATELY };
} }), gX = Z({ name: "bindText", label: "labels.bindText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  if (i.length === 2) {
    let r = q(i[0]) || q(i[1]), l;
    if (Gr(i[0]) ? l = i[0] : Gr(i[1]) && (l = i[1]), r && l && be(l, a.scene.getNonDeletedElementsMap()) === null) return !0;
  }
  return !1;
}, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r, l;
  q(i[0]) && Gr(i[1]) ? (r = i[0], l = i[1]) : (r = i[1], l = i[0]), W(r, { containerId: l.id, verticalAlign: jn.MIDDLE, textAlign: Fo.CENTER, autoResize: !0 }), W(l, { boundElements: (l.boundElements || []).concat({ type: "text", id: r.id }) });
  let s = l.height;
  return un(r, l, a.scene.getNonDeletedElementsMap()), du(l.id, s), { elements: bX(e, l, r), appState: { ...t, selectedElementIds: { [l.id]: !0 } }, captureUpdate: H.IMMEDIATELY };
} }), bX = (e, t, n) => {
  let a = e.slice(), i = a.findIndex((l) => l.id === n.id);
  a.splice(i, 1);
  let r = a.findIndex((l) => l.id === t.id);
  return a.splice(r + 1, 0, n), ei(a, ue([t, n])), a;
}, vX = (e, t, n) => {
  let a = e.slice(), i = a.findIndex((l) => l.id === t.id);
  a.splice(i, 1);
  let r = a.findIndex((l) => l.id === n.id);
  return a.splice(r, 0, t), ei(a, ue([t, n])), a;
}, xX = Z({ name: "wrapTextInContainer", label: "labels.createContainerFromText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r = i.every((l) => q(l));
  return i.length > 0 && r;
}, perform: (e, t, n, a) => {
  var s;
  let i = a.scene.getSelectedElements(t), r = e.slice(), l = {};
  for (let c of i) if (q(c)) {
    let d = Qa({ type: "rectangle", backgroundColor: t.currentItemBackgroundColor, boundElements: [...c.boundElements || [], { id: c.id, type: "text" }], angle: c.angle, fillStyle: t.currentItemFillStyle, strokeColor: t.currentItemStrokeColor, roughness: t.currentItemRoughness, strokeWidth: t.currentItemStrokeWidth, strokeStyle: t.currentItemStrokeStyle, roundness: t.currentItemRoundness === "round" ? { type: ks("rectangle") ? jt.ADAPTIVE_RADIUS : jt.PROPORTIONAL_RADIUS } : null, opacity: 100, locked: !1, x: c.x - At, y: c.y - At, width: dl(c.width, "rectangle"), height: dl(c.height, "rectangle"), groupIds: c.groupIds, frameId: c.frameId });
    if ((s = c.boundElements) != null && s.length) {
      let o = c.boundElements.filter((u) => u.type === "arrow").map((u) => u.id);
      r.filter((u) => o.includes(u.id)).forEach((u) => {
        let f = u.startBinding, p = u.endBinding;
        (f == null ? void 0 : f.elementId) === c.id && (f = { ...f, elementId: d.id }), (p == null ? void 0 : p.elementId) === c.id && (p = { ...p, elementId: d.id }), (f || p) && W(u, { startBinding: f, endBinding: p }, !1);
      });
    }
    W(c, { containerId: d.id, verticalAlign: jn.MIDDLE, boundElements: null, textAlign: Fo.CENTER, autoResize: !0 }, !1), un(c, d, a.scene.getNonDeletedElementsMap()), r = vX([...r, d], d, c), l[d.id] = !0;
  }
  return { elements: r, appState: { ...t, selectedElementIds: l }, captureUpdate: H.IMMEDIATELY };
} }), gU = 380, yX = 42, d0 = 5, $9 = 85, wX = 500, u0 = !1, nd = /* @__PURE__ */ new Map(), EX = ({ element: e, elementsMap: t, setAppState: n, onLinkOpen: a, setToast: i, updateEmbedValidationStatus: r }) => {
  let l = Mc(), s = kc(), c = $t(), d = e.link || "", [o, u] = re(d), f = ie(null), p = l.showHyperlinkPopup === "editor", U = Te(() => {
    var y;
    if (!f.current) return;
    let x = Dn(f.current.value) || null;
    if (!e.link && x && tt("hyperlink", "create"), vn(e)) {
      if (((y = l.activeEmbeddable) == null ? void 0 : y.element) === e && n({ activeEmbeddable: null }), !x) {
        W(e, { link: null }), r(e, !1);
        return;
      }
      if (!Sd(x, s.validateEmbeddable)) x && i({ message: C("toast.unableToEmbed"), closable: !0 }), e.link && nd.set(e.id, e.link), W(e, { link: x }), r(e, !1);
      else {
        let { width: E, height: S } = e, w = Hl(x);
        (w == null ? void 0 : w.error) instanceof URIError && i({ message: C("toast.unrecognizedLinkFormat"), closable: !0 });
        let M = w ? w.intrinsicSize.w / w.intrinsicSize.h : 1, I = nd.get(e.id) !== e.link;
        W(e, { ...I ? { width: (w == null ? void 0 : w.type) === "video" ? E > S ? E : S * M : E, height: (w == null ? void 0 : w.type) === "video" && E > S ? E / M : S } : {}, link: x }), r(e, !0), nd.has(e.id) && nd.delete(e.id);
      }
    } else W(e, { link: x });
  }, [e, i, s.validateEmbeddable, l.activeEmbeddable, n, r]);
  Mn(() => () => {
    U();
  }, [U]), Q(() => {
    p && (f != null && f.current) && !(c.viewport.isMobile || c.isTouchScreen) && f.current.select();
  }, [p, c.viewport.isMobile, c.isTouchScreen]), Q(() => {
    let x = null, y = (E) => {
      p || (x && clearTimeout(x), MX(e, t, l, k(E.clientX, E.clientY)) && (x = window.setTimeout(() => {
        n({ showHyperlinkPopup: !1 });
      }, wX)));
    };
    return window.addEventListener("pointermove", y, !1), () => {
      window.removeEventListener("pointermove", y, !1), x && clearTimeout(x);
    };
  }, [l, e, p, n, t]);
  let m = Te(() => {
    tt("hyperlink", "delete"), W(e, { link: null }), n({ showHyperlinkPopup: !1 });
  }, [n, e]), g = () => {
    tt("hyperlink", "edit", "popup-ui"), n({ showHyperlinkPopup: "editor" });
  }, { x: b, y: v } = F9(e, l, t);
  return l.contextMenu || l.selectedElementsAreBeingDragged || l.resizingElement || l.isRotating || l.openMenu || l.viewModeEnabled ? null : h.jsxs("div", { className: "excalidraw-hyperlinkContainer", style: { top: `${v}px`, left: `${b}px`, width: gU, padding: d0 }, children: [p ? h.jsx("input", { className: ne("excalidraw-hyperlinkContainer-input"), placeholder: C("labels.link.hint"), ref: f, value: o, onChange: (x) => u(x.target.value), autoFocus: !0, onKeyDown: (x) => {
    x.stopPropagation(), x[L.CTRL_OR_CMD] && x.key === L.K && x.preventDefault(), (x.key === L.ENTER || x.key === L.ESCAPE) && (U(), n({ showHyperlinkPopup: "info" }));
  } }) : e.link ? h.jsx("a", { href: Dn(e.link || ""), className: "excalidraw-hyperlinkContainer-link", target: E7(e.link) ? "_self" : "_blank", onClick: (x) => {
    if (e.link && a) {
      let y = e8("excalidraw-link", x.nativeEvent);
      a({ ...e, link: Dn(e.link) }, y), y.defaultPrevented && x.preventDefault();
    }
  }, rel: "noopener noreferrer", children: e.link }) : h.jsx("div", { className: "excalidraw-hyperlinkContainer-link", children: C("labels.link.empty") }), h.jsxs("div", { className: "excalidraw-hyperlinkContainer__buttons", children: [!p && h.jsx(Ce, { type: "button", title: C("buttons.edit"), "aria-label": C("buttons.edit"), label: C("buttons.edit"), onClick: g, className: "excalidraw-hyperlinkContainer--edit", icon: Ho }), h.jsx(Ce, { type: "button", title: C("labels.linkToElement"), "aria-label": C("labels.linkToElement"), label: C("labels.linkToElement"), onClick: () => {
    n({ openDialog: { name: "elementLinkSelector", sourceElementId: e.id } });
  }, icon: I8 }), d && !vn(e) && h.jsx(Ce, { type: "button", title: C("buttons.remove"), "aria-label": C("buttons.remove"), label: C("buttons.remove"), onClick: m, className: "excalidraw-hyperlinkContainer--remove", icon: ll })] })] });
}, F9 = (e, t, n) => {
  let [a, i] = Ue(e, n), { x: r, y: l } = ca({ sceneX: a + e.width / 2, sceneY: i }, t), s = r - t.offsetLeft - gU / 2, c = l - t.offsetTop - $9;
  return { x: s, y: c };
}, z6 = (e, t) => {
  var a;
  let n = xe(e, t);
  return vn(n[0]) ? "labels.link.editEmbed" : (a = n[0]) != null && a.link ? "labels.link.edit" : "labels.link.create";
}, Co = null, SX = (e, t, n) => {
  Co && clearTimeout(Co), Co = window.setTimeout(() => kX(e, t, n), Hk);
}, kX = (e, t, n) => {
  if (!e.link) return;
  let a = ko();
  a.classList.add("excalidraw-tooltip--visible"), a.style.maxWidth = "20rem", a.textContent = yo(e.link) ? C("labels.link.goToElement") : e.link;
  let [i, r, l, s] = Ue(e, n), [c, d, o, u] = hp([i, r, l, s], e.angle, t), f = ca({ sceneX: c, sceneY: d }, t);
  A9(a, { left: f.x, top: f.y, width: o, height: u }, "top"), tt("hyperlink", "tooltip", "link-icon"), u0 = !0;
}, B6 = () => {
  Co && clearTimeout(Co), u0 && (u0 = !1, ko().classList.remove("excalidraw-tooltip--visible"));
}, MX = (e, t, n, [a, i]) => {
  let { x: r, y: l } = et({ clientX: a, clientY: i }, n), s = 15 / n.zoom.value;
  if (Q0(r, l, e, t)) return !1;
  let [c, d, o] = Ue(e, t);
  if (r >= c && r <= o && l >= d - $9 && l <= d) return !1;
  let { x: u, y: f } = F9(e, n, t);
  return !(a >= u - s && a <= u + gU + d0 * 2 + s && i >= f - s && i <= f + s + d0 * 2 + yX);
}, z9 = Z({ name: "hyperlink", label: (e, t) => z6(e, t), icon: b1, perform: (e, t) => t.showHyperlinkPopup === "editor" ? !1 : { elements: e, appState: { ...t, showHyperlinkPopup: "editor", openMenu: null }, captureUpdate: H.IMMEDIATELY }, trackEvent: { category: "hyperlink", action: "click" }, keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.K, predicate: (e, t) => xe(e, t).length === 1, PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = xe(e, t);
  return h.jsx(Ce, { type: "button", icon: b1, "aria-label": C(z6(e, t)), title: `${vn(e[0]) ? C("labels.link.labelEmbed") : C("labels.link.label")} - ${X("CtrlOrCmd+K")}`, onClick: () => n(null), selected: a.length === 1 && !!a[0].link });
} }), Lf = (e) => e.every((t) => !t.locked), CX = Z({ name: "toggleElementLock", label: (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 });
  return a.length === 1 && !de(a[0]) ? a[0].locked ? "labels.elementLock.unlock" : "labels.elementLock.lock" : Lf(a) ? "labels.elementLock.lockAll" : "labels.elementLock.unlockAll";
}, icon: (e, t) => {
  let n = xe(t, e);
  return Lf(n) ? V0 : Vu;
}, trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return i.length > 0 && !i.some((r) => r.locked && r.frameId);
}, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  if (!i.length) return !1;
  let r = Lf(i), l = ue(i);
  return { elements: e.map((s) => l.has(s.id) ? ge(s, { locked: r }) : s), appState: { ...t, selectedLinearElement: r ? null : t.selectedLinearElement }, captureUpdate: H.IMMEDIATELY };
}, keyTest: (e, t, n, a) => e.key.toLocaleLowerCase() === L.L && e[L.CTRL_OR_CMD] && e.shiftKey && a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 }).length > 0 }), IX = Z({ name: "unlockAllElements", paletteName: "Unlock all elements", trackEvent: { category: "canvas" }, viewMode: !1, icon: Vu, predicate: (e, t) => xe(e, t).length === 0 && e.some((n) => n.locked), perform: (e, t) => {
  let n = e.filter((a) => a.locked);
  return { elements: e.map((a) => a.locked ? ge(a, { locked: !1 }) : a), appState: { ...t, selectedElementIds: Object.fromEntries(n.map((a) => [a.id, !0])) }, captureUpdate: H.IMMEDIATELY };
}, label: "labels.elementLock.unlockAll" }), TX = () => {
  let [e, t] = re(null), n = Te((a) => t(a), []);
  return [e, n];
}, _X = (e) => {
  let { closeOnClickOutside: t = !0 } = e, n = x9({ className: "excalidraw-modal-container" }), a = ie(document.body.classList.contains("excalidraw-animations-disabled"));
  if (!n) return null;
  let i = (r) => {
    r.key === L.ESCAPE && (r.nativeEvent.stopImmediatePropagation(), r.stopPropagation(), e.onCloseRequest());
  };
  return w0(h.jsxs("div", { className: ne("Modal", e.className, { "animations-disabled": a.current }), role: "dialog", "aria-modal": "true", onKeyDown: i, "aria-labelledby": e.labelledBy, "data-prevent-outside-click": !0, children: [h.jsx("div", { className: "Modal__background", onClick: t ? e.onCloseRequest : void 0 }), h.jsx("div", { className: "Modal__content", style: { "--max-width": `${e.maxWidth}px` }, tabIndex: 0, children: e.children })] }), n);
}, B9 = Gt(/* @__PURE__ */ new Map()), H6 = async (e) => await Tp({ elements: e, appState: { exportBackground: !1, viewBackgroundColor: Ee.white }, files: null, renderEmbeddables: !1, skipInliningFonts: !0 }), AX = (e, t, n) => {
  let [a, i] = re();
  return Q(() => {
    if (t) if (e) {
      let r = n.get(e);
      r ? i(r) : (async () => {
        var s;
        let l = await H6(t);
        (s = l.querySelector(".style-fonts")) == null || s.remove(), l && (n.set(e, l), i(l));
      })();
    } else (async () => {
      let r = await H6(t);
      i(r);
    })();
  }, [e, t, n, i]), a;
}, H9 = () => {
  let [e] = xt(B9);
  return { clearLibraryCache: () => e.clear(), deleteItemsFromLibraryCache: (t) => {
    t.forEach((n) => e.delete(n));
  }, svgCache: e };
}, jX = class {
  constructor() {
    j(this, "jobs", []), j(this, "running", !1);
  }
  tick() {
    if (this.running) return;
    let e = this.jobs.shift();
    e ? (this.running = !0, e.promise.resolve(rs(e.jobFactory, ...e.args).finally(() => {
      this.running = !1, this.tick();
    }))) : this.running = !1;
  }
  push(e, ...t) {
    let n = EM();
    return this.jobs.push({ jobFactory: e, promise: n, args: t }), this.tick(), n;
  }
}, DX = new Oa(), ac = Gt({ status: "loaded", isInitialized: !1, libraryItems: [] }), Gs = (e) => yi(e), LX = (e, t) => !e.find((n) => n.elements.length !== t.elements.length ? !1 : n.elements.every((a, i) => a.id === t.elements[i].id && a.versionNonce === t.elements[i].versionNonce)), RX = (e, t) => {
  let n = [];
  for (let a of t) LX(e, a) && n.push(a);
  return [...n, ...e];
}, PX = (e, t) => {
  let n = ue(t), a = { deletedItems: /* @__PURE__ */ new Map(), addedItems: /* @__PURE__ */ new Map() };
  for (let r of e) n.has(r.id) || a.deletedItems.set(r.id, r);
  let i = ue(e);
  for (let r of t) i.has(r.id) || a.addedItems.set(r.id, r);
  return a;
}, NX = class {
  constructor(e) {
    j(this, "currLibraryItems", []), j(this, "prevLibraryItems", Gs(this.currLibraryItems)), j(this, "app"), j(this, "updateQueue", []), j(this, "getLastUpdateTask", () => this.updateQueue[this.updateQueue.length - 1]), j(this, "notifyListeners", () => {
      var t, n;
      if (this.updateQueue.length > 0) fa.set(ac, (a) => ({ status: "loading", libraryItems: this.currLibraryItems, isInitialized: a.isInitialized }));
      else {
        fa.set(ac, { status: "loaded", libraryItems: this.currLibraryItems, isInitialized: !0 });
        try {
          let a = this.prevLibraryItems;
          this.prevLibraryItems = Gs(this.currLibraryItems);
          let i = Gs(this.currLibraryItems);
          (n = (t = this.app.props).onLibraryChange) == null || n.call(t, i), DX.trigger(PX(a, i), i);
        } catch (a) {
          console.error(a);
        }
      }
    }), j(this, "destroy", () => {
      this.updateQueue = [], this.currLibraryItems = [], fa.set(B9, /* @__PURE__ */ new Map());
    }), j(this, "resetLibrary", () => this.setLibrary([])), j(this, "getLatestLibrary", () => new Promise(async (t) => {
      try {
        let n = await (this.getLastUpdateTask() || this.currLibraryItems);
        this.updateQueue.length > 0 ? t(this.getLatestLibrary()) : t(Gs(n));
      } catch {
        return t(this.currLibraryItems);
      }
    })), j(this, "updateLibrary", async ({ libraryItems: t, prompt: n = !1, merge: a = !1, openLibraryMenu: i = !1, defaultStatus: r = "unpublished" }) => (i && this.app.setState({ openSidebar: { name: Ua.name, tab: Yd } }), this.setLibrary(() => new Promise(async (l, s) => {
      try {
        let c = await (typeof t == "function" && !(t instanceof Blob) ? t(this.currLibraryItems) : t), d;
        c instanceof Blob ? d = await xN(c, r) : d = kp(c, r), !n || window.confirm(C("alerts.confirmAddLibrary", { numShapes: d.length })) ? (n && this.app.focusContainer(), l(a ? RX(this.currLibraryItems, d) : d)) : s(new Zu());
      } catch (c) {
        s(c);
      }
    })))), j(this, "setLibrary", (t) => {
      let n = new Promise(async (a, i) => {
        try {
          await this.getLastUpdateTask(), typeof t == "function" && (t = t(this.currLibraryItems)), this.currLibraryItems = Gs(await t), a(this.currLibraryItems);
        } catch (r) {
          i(r);
        }
      }).catch((a) => {
        if (a.name === "AbortError") return console.warn("Library update aborted by user"), this.currLibraryItems;
        throw a;
      }).finally(() => {
        this.updateQueue = this.updateQueue.filter((a) => a !== n), this.notifyListeners();
      });
      return this.updateQueue.push(n), this.notifyListeners(), n;
    }), this.app = e;
  }
}, OX = NX, X9 = (e) => {
  let t = Math.ceil(Math.sqrt(e.length)), n = [], a = (f) => e.slice(f * t, f * t + t).reduce((p, U) => {
    let { height: m } = ga(U.elements);
    return Math.max(p, m);
  }, 0), i = (f) => {
    let p = 0, U = 0, m = 0;
    for (let g of e) {
      if (p % t === 0 && (U = 0), U === f) {
        let { width: b } = ga(g.elements);
        m = Math.max(m, b);
      }
      p++, U++;
    }
    return m;
  }, r = 0, l = 0, s = 0, c = 0, d = 0, o = 0, u = 0;
  for (let f of e) {
    d && d % t === 0 && (l += s + 50, r = 0, o = 0, u++), o === 0 && (s = a(u)), c = i(o);
    let { minX: p, minY: U, width: m, height: g } = ga(f.elements), b = (c - m) / 2, v = (s - g) / 2;
    n.push(...f.elements.map((x) => ({ ...x, x: x.x + r + b - p, y: x.y + l + v - U }))), r += c + 50, d++, o++;
  }
  return n;
}, ad = class h0 {
  constructor(t) {
    j(this, "adapter"), this.adapter = t;
  }
  static async getLibraryItems(t, n, a = !0) {
    let i = () => new Promise(async (r, l) => {
      try {
        let s = await t.load({ source: n });
        r(kp((s == null ? void 0 : s.libraryItems) || [], "published"));
      } catch (s) {
        l(s);
      }
    });
    return a ? h0.queue.push(i) : i();
  }
  getLibraryItems(t) {
    return h0.getLibraryItems(this.adapter, t, !1);
  }
};
j(ad, "queue", new jX()), j(ad, "run", async (e, t) => {
  let n = new ad(e);
  return ad.queue.push(() => t(n));
});
var $X = Ot(({ children: e, gap: t, align: n, justifyContent: a, className: i, style: r }, l) => h.jsx("div", { className: ne("Stack Stack_horizontal", i), style: { "--gap": t, alignItems: n, justifyContent: a, ...r }, ref: l, children: e })), FX = Ot(({ children: e, gap: t, align: n, justifyContent: a, className: i, style: r }, l) => h.jsx("div", { className: ne("Stack Stack_vertical", i), style: { "--gap": t, justifyItems: n, justifyContent: a, ...r }, ref: l, children: e })), Xn = { Row: $X, Col: FX }, zX = ({ theme: e, id: t, libraryReturnUrl: n }) => {
  let a = n || window.location.origin + window.location.pathname;
  return h.jsx("a", { className: "library-menu-browse-button", href: `${ve.VITE_APP_LIBRARY_URL}?target=${window.name || "_blank"}&referrer=${a}&useHash=true&token=${t}&theme=${e}&version=${Bu.excalidrawLibrary}`, target: "_excalidraw_libraries", children: C("labels.libraries") });
}, BX = zX, W9 = ({ libraryReturnUrl: e, theme: t, id: n, style: a, children: i, className: r }) => h.jsxs("div", { className: ne("library-menu-control-buttons", r), style: a, children: [h.jsx(BX, { id: n, libraryReturnUrl: e, theme: t }), i] }), HX = /({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g, XX = /{{([\w-]+)}}/, WX = /<([\w-]+)>/, VX = /<\/([\w-]+)>/, GX = (e, t) => {
  let n = [{ name: "", children: [] }];
  return e.split(HX).filter(Boolean).forEach((a) => {
    let i = a.match(WX), r = a.match(VX), l = a.match(XX);
    if (i !== null) {
      let s = i[1];
      t.hasOwnProperty(s) ? n.push({ name: s, children: [] }) : console.warn(`Trans: missed to pass in prop ${s} for interpolating ${e}`);
    } else if (r !== null) if (r[1] === n[n.length - 1].name) {
      let s = n.pop(), c = Y.createElement(Y.Fragment, {}, ...s.children), d = t[s.name];
      typeof d == "function" && n[n.length - 1].children.push(d(c));
    } else console.warn(`Trans: unexpected end tag ${a} for interpolating ${e}`);
    else if (l !== null) {
      let s = l[1];
      t.hasOwnProperty(s) ? n[n.length - 1].children.push(t[s]) : console.warn(`Trans: key ${s} not in props for interpolating ${e}`);
    } else n[n.length - 1].children.push(a);
  }), n.length !== 1 && console.warn(`Trans: stack not empty for interpolating ${e}`), n[0].children;
}, YX = ({ i18nKey: e, children: t, ...n }) => {
  let { t: a } = on();
  return Y.createElement(Y.Fragment, {}, ...GX(a(e), n));
}, Va = YX, ZX = ({ label: e, onClick: t, className: n, children: a, actionType: i, type: r = "button", isLoading: l, ...s }) => {
  let c = i ? `Dialog__action-button--${i}` : "";
  return h.jsxs("button", { className: ne("Dialog__action-button", c, n), type: r, "aria-label": e, onClick: t, ...s, children: [a && h.jsx("div", { style: l ? { visibility: "hidden" } : {}, children: a }), h.jsx("div", { style: l ? { visibility: "hidden" } : {}, children: e }), l && h.jsx("div", { style: { position: "absolute", inset: 0 }, children: h.jsx(Ri, {}) })] });
}, bs = ZX, KX = (e) => {
  let { onConfirm: t, onCancel: n, children: a, confirmText: i = C("buttons.confirm"), cancelText: r = C("buttons.cancel"), className: l = "", ...s } = e, c = Ft(), d = vh(bU), { container: o } = li();
  return h.jsxs(ka, { onCloseRequest: n, size: "small", ...s, className: `confirm-dialog ${l}`, children: [a, h.jsxs("div", { className: "confirm-dialog-buttons", children: [h.jsx(bs, { label: r, onClick: () => {
    c({ openMenu: null }), d(!1), Pa(() => {
      n();
    }), o == null || o.focus();
  } }), h.jsx(bs, { label: i, onClick: () => {
    c({ openMenu: null }), d(!1), Pa(() => {
      t();
    }), o == null || o.focus();
  }, actionType: "danger" })] })] });
}, V9 = KX, qr = class {
  static has(e) {
    try {
      return !!window.localStorage.getItem(e);
    } catch (t) {
      return console.warn(`localStorage.getItem error: ${t.message}`), !1;
    }
  }
  static get(e) {
    try {
      let t = window.localStorage.getItem(e);
      return t ? JSON.parse(t) : null;
    } catch (t) {
      return console.warn(`localStorage.getItem error: ${t.message}`), null;
    }
  }
};
j(qr, "set", (e, t) => {
  try {
    return window.localStorage.setItem(e, JSON.stringify(t)), !0;
  } catch (n) {
    return console.warn(`localStorage.setItem error: ${n.message}`), !1;
  }
}), j(qr, "delete", (e) => {
  try {
    window.localStorage.removeItem(e);
  } catch (t) {
    console.warn(`localStorage.removeItem error: ${t.message}`);
  }
});
var qX = async (e) => {
  let t = Math.round(8), n = Math.max(Math.round(128 / 64), 2), a = vM(e, 6), i = document.createElement("canvas");
  i.width = a[0].length * 128 + (a[0].length + 1) * (t * 2) - t * 2, i.height = a.length * 128 + (a.length + 1) * (t * 2) - t * 2;
  let r = i.getContext("2d");
  r.fillStyle = Wt.white, r.fillRect(0, 0, i.width, i.height);
  for (let [l, s] of e.entries()) {
    let c = await Ip({ elements: s.elements, files: null, maxWidthOrHeight: 128 }), { width: d, height: o } = c, u = Math.floor(l / 6) * (128 + t * 2), f = l % 6 * (128 + t * 2);
    r.drawImage(c, f + (128 - d) / 2 + t, u + (128 - o) / 2 + t), r.lineWidth = n, r.strokeStyle = Wt.gray[4], r.strokeRect(f + t / 2, u + t / 2, 128 + t, 128 + t);
  }
  return await $1(new File([await Qo(i)], "preview", { type: oe.png }), { outputType: oe.jpg, maxWidthOrHeight: 5e3 });
}, JX = ({ libItem: e, appState: t, index: n, onChange: a, onRemove: i }) => {
  let r = ie(null), l = ie(null);
  return Q(() => {
    let s = r.current;
    s && (async () => {
      let c = await Tp({ elements: e.elements, appState: { ...t, viewBackgroundColor: Wt.white, exportBackground: !0 }, files: null, skipInliningFonts: !0 });
      s.innerHTML = c.outerHTML;
    })();
  }, [e.elements, t]), h.jsxs("div", { className: "single-library-item", children: [e.status === "published" && h.jsx("span", { className: "single-library-item-status", children: C("labels.statusPublished") }), h.jsx("div", { ref: r, className: "single-library-item__svg" }), h.jsx(Ce, { "aria-label": C("buttons.remove"), type: "button", icon: Ms, className: "single-library-item--remove", onClick: i.bind(null, e.id), title: C("buttons.remove") }), h.jsxs("div", { style: { display: "flex", margin: "0.8rem 0", width: "100%", fontSize: "14px", fontWeight: 500, flexDirection: "column" }, children: [h.jsxs("label", { style: { display: "flex", justifyContent: "space-between", flexDirection: "column" }, children: [h.jsxs("div", { style: { padding: "0.5em 0" }, children: [h.jsx("span", { style: { fontWeight: 500, color: Wt.gray[6] }, children: C("publishDialog.itemName") }), h.jsx("span", { "aria-hidden": "true", className: "required", children: "*" })] }), h.jsx("input", { type: "text", ref: l, style: { width: "80%", padding: "0.2rem" }, defaultValue: e.name, placeholder: "Item name", onChange: (s) => {
    a(s.target.value, n);
  } })] }), h.jsx("span", { className: "error", children: e.error })] })] });
}, QX = ({ onClose: e, libraryItems: t, appState: n, onSuccess: a, onError: i, updateItemsInStorage: r, onRemove: l }) => {
  let [s, c] = re({ authorName: "", githubHandle: "", name: "", description: "", twitterHandle: "", website: "" }), [d, o] = re(!1);
  Q(() => {
    let x = qr.get(Uo.PUBLISH_LIBRARY);
    x && c(x);
  }, []);
  let [u, f] = re(t.slice());
  Q(() => {
    f(t.slice());
  }, [t]);
  let p = (x) => {
    c({ ...s, [x.target.name]: x.target.value });
  }, U = async (x) => {
    x.preventDefault(), o(!0);
    let y = [], E = !1;
    if (u.forEach((_) => {
      let A = "";
      _.name || (A = C("publishDialog.errors.required"), E = !0), y.push({ ..._, error: A });
    }), E) {
      f(y), o(!1);
      return;
    }
    let S = await qX(u), w = { type: Gn.excalidrawLibrary, version: Bu.excalidrawLibrary, source: D0, libraryItems: u }, M = JSON.stringify(w, null, 2), I = new Blob([M], { type: "application/json" }), T = new FormData();
    T.append("excalidrawLib", I), T.append("previewImage", S), T.append("previewImageType", S.type), T.append("title", s.name), T.append("authorName", s.authorName), T.append("githubHandle", s.githubHandle), T.append("name", s.name), T.append("description", s.description), T.append("twitterHandle", s.twitterHandle), T.append("website", s.website), fetch(`${ve.VITE_APP_LIBRARY_BACKEND}/submit`, { method: "post", body: T }).then((_) => _.ok ? _.json().then(({ url: A }) => {
      qr.delete(Uo.PUBLISH_LIBRARY), a({ url: A, authorName: s.authorName, items: u });
    }) : _.json().catch(() => {
      throw new Error(_.statusText || "something went wrong");
    }).then((A) => {
      throw new Error(A.message || _.statusText || "something went wrong");
    }), (_) => {
      console.error(_), i(_), o(!1);
    }).catch((_) => {
      console.error(_), i(_), o(!1);
    });
  }, m = () => {
    let x = [];
    return u.forEach((y, E) => {
      x.push(h.jsx("div", { className: "single-library-item-wrapper", children: h.jsx(JX, { libItem: y, appState: n, index: E, onChange: (S, w) => {
        let M = u.slice();
        M[w].name = S, f(M);
      }, onRemove: l }) }, E));
    }), h.jsx("div", { className: "selected-library-items", children: x });
  }, g = Te(() => {
    r(u), qr.set(Uo.PUBLISH_LIBRARY, s), e();
  }, [u, e, r, s]), b = !!t.length, v = t.some((x) => x.status === "published");
  return h.jsx(ka, { onCloseRequest: g, title: C("publishDialog.title"), className: "publish-library", children: b ? h.jsxs("form", { onSubmit: U, children: [h.jsx("div", { className: "publish-library-note", children: h.jsx(Va, { i18nKey: "publishDialog.noteDescription", link: (x) => h.jsx("a", { href: "https://libraries.excalidraw.com", target: "_blank", rel: "noopener noreferrer", children: x }) }) }), h.jsx("span", { className: "publish-library-note", children: h.jsx(Va, { i18nKey: "publishDialog.noteGuidelines", link: (x) => h.jsx("a", { href: "https://github.com/excalidraw/excalidraw-libraries#guidelines", target: "_blank", rel: "noopener noreferrer", children: x }) }) }), h.jsx("div", { className: "publish-library-note", children: C("publishDialog.noteItems") }), v && h.jsx("span", { className: "publish-library-note publish-library-warning", children: C("publishDialog.republishWarning") }), m(), h.jsxs("div", { className: "publish-library__fields", children: [h.jsxs("label", { children: [h.jsxs("div", { children: [h.jsx("span", { children: C("publishDialog.libraryName") }), h.jsx("span", { "aria-hidden": "true", className: "required", children: "*" })] }), h.jsx("input", { type: "text", name: "name", required: !0, value: s.name, onChange: p, placeholder: C("publishDialog.placeholder.libraryName") })] }), h.jsxs("label", { style: { alignItems: "flex-start" }, children: [h.jsxs("div", { children: [h.jsx("span", { children: C("publishDialog.libraryDesc") }), h.jsx("span", { "aria-hidden": "true", className: "required", children: "*" })] }), h.jsx("textarea", { name: "description", rows: 4, required: !0, value: s.description, onChange: p, placeholder: C("publishDialog.placeholder.libraryDesc") })] }), h.jsxs("label", { children: [h.jsxs("div", { children: [h.jsx("span", { children: C("publishDialog.authorName") }), h.jsx("span", { "aria-hidden": "true", className: "required", children: "*" })] }), h.jsx("input", { type: "text", name: "authorName", required: !0, value: s.authorName, onChange: p, placeholder: C("publishDialog.placeholder.authorName") })] }), h.jsxs("label", { children: [h.jsx("span", { children: C("publishDialog.githubUsername") }), h.jsx("input", { type: "text", name: "githubHandle", value: s.githubHandle, onChange: p, placeholder: C("publishDialog.placeholder.githubHandle") })] }), h.jsxs("label", { children: [h.jsx("span", { children: C("publishDialog.twitterUsername") }), h.jsx("input", { type: "text", name: "twitterHandle", value: s.twitterHandle, onChange: p, placeholder: C("publishDialog.placeholder.twitterHandle") })] }), h.jsxs("label", { children: [h.jsx("span", { children: C("publishDialog.website") }), h.jsx("input", { type: "text", name: "website", pattern: "https?://.+", title: C("publishDialog.errors.website"), value: s.website, onChange: p, placeholder: C("publishDialog.placeholder.website") })] }), h.jsx("span", { className: "publish-library-note", children: h.jsx(Va, { i18nKey: "publishDialog.noteLicense", link: (x) => h.jsx("a", { href: "https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE", target: "_blank", rel: "noopener noreferrer", children: x }) }) })] }), h.jsxs("div", { className: "publish-library__buttons", children: [h.jsx(bs, { label: C("buttons.cancel"), onClick: g, "data-testid": "cancel-clear-canvas-button" }), h.jsx(bs, { type: "submit", label: C("buttons.submit"), actionType: "primary", isLoading: d })] })] }) : h.jsx("p", { style: { padding: "1em", textAlign: "center", fontWeight: 500 }, children: C("publishDialog.atleastOneLibItem") }) });
}, eW = QX, G9 = ({ className: e = "", children: t, onToggle: n, title: a, ...i }) => {
  let r = $t(), l = ne(`dropdown-menu-button ${e}`, "zen-mode-transition", { "dropdown-menu-button--mobile": r.editor.isMobile }).trim();
  return h.jsx("button", { "data-prevent-outside-click": !0, className: l, onClick: n, type: "button", "data-testid": "dropdown-menu-button", title: a, ...i, children: t });
}, tW = G9;
G9.displayName = "DropdownMenuTrigger";
var Y9 = () => h.jsx("div", { style: { height: "1px", backgroundColor: "var(--default-border-color)", margin: ".5rem 0" } }), nW = Y9;
Y9.displayName = "DropdownMenuSeparator";
var Z9 = ({ children: e, onClickOutside: t, className: n = "", onSelect: a, style: i }) => {
  let r = $t(), l = ie(null), s = yh({ onClickOutside: t });
  dU(l, () => {
    var d;
    (d = s.onClickOutside) == null || d.call(s);
  }), Q(() => {
    let d = (u) => {
      var f;
      u.key === L.ESCAPE && (u.stopImmediatePropagation(), (f = s.onClickOutside) == null || f.call(s));
    }, o = { capture: !0 };
    return document.addEventListener("keydown", d, o), () => {
      document.removeEventListener("keydown", d, o);
    };
  }, [s]);
  let c = ne(`dropdown-menu ${n}`, { "dropdown-menu--mobile": r.editor.isMobile }).trim();
  return h.jsx(k9.Provider, { value: { onSelect: a }, children: h.jsx("div", { ref: l, className: c, style: i, "data-testid": "dropdown-menu", children: r.editor.isMobile ? h.jsx(Xn.Col, { className: "dropdown-menu-container", children: e }) : h.jsx(ba, { className: "dropdown-menu-container", padding: 2, style: { zIndex: 2 }, children: e }) }) });
};
Z9.displayName = "DropdownMenuContent";
var aW = Z9, K9 = ({ icon: e, shortcut: t, href: n, children: a, onSelect: i, className: r = "", selected: l, rel: s = "noreferrer", ...c }) => {
  let d = C9(c.onClick, i);
  return h.jsx("a", { ...c, href: n, target: "_blank", rel: "noreferrer", className: M9(r, l), title: c.title ?? c["aria-label"], onClick: d, children: h.jsx(I9, { icon: e, shortcut: t, children: a }) });
}, Rd = K9;
K9.displayName = "DropdownMenuItemLink";
var iW = ({ children: e, className: t = "", selected: n, ...a }) => h.jsx("div", { ...a, className: `dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n ? "dropdown-menu-item--selected" : ""}`.trim(), children: e }), rW = iW, lW = (e) => Y.Children.toArray(e).find((n) => Y.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuTrigger") || null, sW = (e) => Y.Children.toArray(e).find((n) => Y.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuContent") || null, $i = ({ children: e, open: t }) => {
  let n = lW(e), a = sW(e);
  return h.jsxs(h.Fragment, { children: [n, t && a] });
};
$i.Trigger = tW;
$i.Content = aW;
$i.Item = ea;
$i.ItemLink = Rd;
$i.ItemCustom = rW;
$i.Group = l0;
$i.Separator = nW;
var lt = $i;
$i.displayName = "DropdownMenu";
var oW = (e, t) => e.filter((n) => t.includes(n.id)), cW = ({ setAppState: e, selectedItems: t, library: n, onRemoveFromLibrary: a, resetLibrary: i, onSelectItems: r, appState: l, className: s }) => {
  let [c] = xt(ac), [d, o] = xt(bU), u = () => {
    let T = t.length ? C("alerts.removeItemsFromsLibrary", { count: t.length }) : C("alerts.resetLibrary"), _ = t.length ? C("confirmDialog.removeItemsFromLib") : C("confirmDialog.resetLibrary");
    return h.jsx(V9, { onConfirm: () => {
      t.length ? a() : i(), p(!1);
    }, onCancel: () => {
      p(!1);
    }, title: _, children: h.jsx("p", { children: T }) });
  }, [f, p] = re(!1), U = !!t.length, m = U ? c.libraryItems.filter((T) => t.includes(T.id)) : c.libraryItems, g = C(U ? "buttons.remove" : "buttons.resetLibrary"), [b, v] = re(!1), [x, y] = re(null), E = Te(() => h.jsxs(ka, { onCloseRequest: () => y(null), title: C("publishSuccessDialog.title"), className: "publish-library-success", size: "small", children: [h.jsx("p", { children: h.jsx(Va, { i18nKey: "publishSuccessDialog.content", authorName: x.authorName, link: (T) => h.jsx("a", { href: x == null ? void 0 : x.url, target: "_blank", rel: "noopener noreferrer", children: T }) }) }), h.jsx(Ce, { type: "button", title: C("buttons.close"), "aria-label": C("buttons.close"), label: C("buttons.close"), onClick: () => y(null), "data-testid": "publish-library-success-close", className: "publish-library-success-close" })] }), [y, x]), S = (T, _) => {
    v(!1), y({ url: T.url, authorName: T.authorName });
    let A = _.slice();
    A.forEach((D) => {
      t.includes(D.id) && (D.status = "published");
    }), n.setLibrary(A);
  }, w = async () => {
    try {
      await n.updateLibrary({ libraryItems: dp({ description: "Excalidraw library files" }), merge: !0, openLibraryMenu: !0 });
    } catch (T) {
      if ((T == null ? void 0 : T.name) === "AbortError") {
        console.warn(T);
        return;
      }
      e({ errorMessage: C("errors.importLibraryError") });
    }
  }, M = async () => {
    let T = U ? m : await n.getLatestLibrary();
    WR(T).catch(qb).catch((_) => {
      e({ errorMessage: _.message });
    });
  }, I = () => h.jsxs(lt, { open: d, children: [h.jsx(lt.Trigger, { onToggle: () => o(!d), children: tC }), h.jsxs(lt.Content, { onClickOutside: () => o(!1), onSelect: () => o(!1), className: "library-menu", children: [!U && h.jsx(lt.Item, { onSelect: w, icon: Y0, "data-testid": "lib-dropdown--load", children: C("buttons.load") }), !!m.length && h.jsx(lt.Item, { onSelect: M, icon: Gu, "data-testid": "lib-dropdown--export", children: C("buttons.export") }), !!m.length && h.jsx(lt.Item, { onSelect: () => p(!0), icon: ll, children: g }), U && h.jsx(lt.Item, { icon: uI, onSelect: () => v(!0), "data-testid": "lib-dropdown--remove", children: C("buttons.publishLibrary") })] })] });
  return h.jsxs("div", { className: ne("library-menu-dropdown-container", s), children: [I(), t.length > 0 && h.jsx("div", { className: "library-actions-counter", children: t.length }), f && u(), b && h.jsx(eW, { onClose: () => v(!1), libraryItems: oW(c.libraryItems, t), appState: l, onSuccess: (T) => S(T, c.libraryItems), onError: (T) => window.alert(T), updateItemsInStorage: () => n.setLibrary(c.libraryItems), onRemove: (T) => r(t.filter((_) => _ !== T)) }), x && E()] });
}, X6 = ({ selectedItems: e, onSelectItems: t, className: n }) => {
  let { library: a } = ri(), { clearLibraryCache: i, deleteItemsFromLibraryCache: r } = H9(), l = pn(), s = Ft(), [c] = xt(ac), d = async (o) => {
    let u = o.filter((f) => !e.includes(f.id));
    a.setLibrary(u).catch(() => {
      s({ errorMessage: C("alerts.errorRemovingFromLibrary") });
    }), r(e), t([]);
  };
  return h.jsx(cW, { appState: l, setAppState: s, selectedItems: e, onSelectItems: t, library: a, onRemoveFromLibrary: () => d(c.libraryItems), resetLibrary: () => {
    a.resetLibrary(), i();
  }, className: n });
}, dW = xs(({ id: e, elements: t, isPending: n, onClick: a, selected: i, onToggle: r, onDrag: l, svgCache: s }) => {
  let c = ie(null), d = AX(e, t, s);
  Q(() => {
    let U = c.current;
    if (U) return d && (U.innerHTML = d.outerHTML), () => {
      U.innerHTML = "";
    };
  }, [d]);
  let [o, u] = re(!1), f = $t().editor.isMobile, p = n && h.jsx("div", { className: "library-unit__adder", children: eC });
  return h.jsxs("div", { className: ne("library-unit", { "library-unit__active": t, "library-unit--hover": t && o, "library-unit--selected": i, "library-unit--skeleton": !d }), onMouseEnter: () => u(!0), onMouseLeave: () => u(!1), children: [h.jsx("div", { className: ne("library-unit__dragger", { "library-unit__pulse": !!n }), ref: c, draggable: !!t, onClick: t || n ? (U) => {
    e && U.shiftKey ? r(e, U) : a(e);
  } : void 0, onDragStart: (U) => {
    if (!e) {
      U.preventDefault();
      return;
    }
    u(!1), l(e, U);
  } }), p, e && t && (o || f || i) && h.jsx(UU, { checked: i, onChange: (U, m) => r(e, m), className: "library-unit__checkbox" })] });
}), uW = () => h.jsx("div", { className: "library-unit library-unit--skeleton" });
function hW() {
  return [!1, Te((e) => e(), [])];
}
var fW = Y.useTransition || hW, W6 = ({ children: e }) => h.jsx("div", { className: "library-menu-items-container__grid", children: e }), Rf = xs(({ items: e, onItemSelectToggle: t, onItemDrag: n, isItemSelected: a, onClick: i, svgCache: r, itemsRenderedPerBatch: l }) => {
  let [, s] = fW(), [c, d] = re(0);
  return Q(() => {
    c < e.length && s(() => {
      d(c + l);
    });
  }, [c, e.length, s, l]), h.jsx(h.Fragment, { children: e.map((o, u) => u < c ? h.jsx(dW, { elements: o == null ? void 0 : o.elements, isPending: !(o != null && o.id) && !!(o != null && o.elements), onClick: i, svgCache: r, id: o == null ? void 0 : o.id, selected: a(o.id), onToggle: t, onDrag: n }, (o == null ? void 0 : o.id) ?? u) : h.jsx(uW, {}, u)) });
}), pW = Gt(0), UW = (e) => {
  let [t, n] = xt(pW);
  return Q(() => {
    let { current: a } = e;
    if (!a) return;
    let i = cc(() => {
      let { scrollTop: r } = a;
      n(r);
    }, 200);
    return a.addEventListener("scroll", i), () => {
      i.cancel(), a.removeEventListener("scroll", i);
    };
  }, [e, n]), t;
}, mW = 17, gW = 64;
function bW({ isLoading: e, libraryItems: t, onAddToLibrary: n, onInsertLibraryItems: a, pendingElements: i, theme: r, id: l, libraryReturnUrl: s, onSelectItems: c, selectedItems: d }) {
  let o = ie(null), u = UW(o);
  Q(() => {
    var T;
    u > 0 && ((T = o.current) == null || T.scrollTo(0, u));
  }, []);
  let { svgCache: f } = H9(), p = nt(() => t.filter((T) => T.status !== "published"), [t]), U = nt(() => t.filter((T) => T.status === "published"), [t]), m = !t.length && !i.length, g = !i.length && !p.length && !U.length, [b, v] = re(null), x = Te((T, _) => {
    let A = !d.includes(T), D = [...p, ...U];
    if (A) {
      if (_.shiftKey && b) {
        let P = D.findIndex((V) => V.id === b), N = D.findIndex((V) => V.id === T);
        if (P === -1 || N === -1) {
          c([...d, T]);
          return;
        }
        let $ = ue(d), R = D.reduce((V, O, G) => ((G >= P && G <= N || $.has(O.id)) && V.push(O.id), V), []);
        c(R);
      } else c([...d, T]);
      v(T);
    } else v(null), c(d.filter((P) => P !== T));
  }, [b, c, U, d, p]), y = Te((T) => {
    let _;
    return d.includes(T) ? _ = t.filter((A) => d.includes(A.id)) : _ = t.filter((A) => A.id === T), _.map((A) => ({ ...A, elements: D7(A.elements, { randomizeSeed: !0 }) }));
  }, [t, d]), E = Te((T, _) => {
    _.dataTransfer.setData(oe.excalidrawlib, $7(y(T)));
  }, [y]), S = Te((T) => T ? d.includes(T) : !1, [d]), w = Te(() => {
    n(i);
  }, [i, n]), M = Te((T) => {
    T && a(y(T));
  }, [y, a]), I = f.size >= t.length ? gW : mW;
  return h.jsxs("div", { className: "library-menu-items-container", style: i.length || p.length || U.length ? { justifyContent: "flex-start" } : { borderBottom: 0 }, children: [!g && h.jsx(X6, { selectedItems: d, onSelectItems: c, className: "library-menu-dropdown-container--in-heading" }), h.jsxs(Xn.Col, { className: "library-menu-items-container__items", align: "start", gap: 1, style: { flex: U.length > 0 ? 1 : "0 1 auto", marginBottom: 0 }, ref: o, children: [h.jsxs(h.Fragment, { children: [!g && h.jsx("div", { className: "library-menu-items-container__header", children: C("labels.personalLib") }), e && h.jsx("div", { style: { position: "absolute", top: "var(--container-padding-y)", right: "var(--container-padding-x)", transform: "translateY(50%)" }, children: h.jsx(Ri, {}) }), !i.length && !p.length ? h.jsxs("div", { className: "library-menu-items__no-items", children: [h.jsx("div", { className: "library-menu-items__no-items__label", children: C("library.noItems") }), h.jsx("div", { className: "library-menu-items__no-items__hint", children: U.length > 0 ? C("library.hint_emptyPrivateLibrary") : C("library.hint_emptyLibrary") })] }) : h.jsxs(W6, { children: [i.length > 0 && h.jsx(Rf, { itemsRenderedPerBatch: I, items: [{ id: null, elements: i }], onItemSelectToggle: x, onItemDrag: E, onClick: w, isItemSelected: S, svgCache: f }), h.jsx(Rf, { itemsRenderedPerBatch: I, items: p, onItemSelectToggle: x, onItemDrag: E, onClick: M, isItemSelected: S, svgCache: f })] })] }), h.jsxs(h.Fragment, { children: [(U.length > 0 || i.length > 0 || p.length > 0) && h.jsx("div", { className: "library-menu-items-container__header library-menu-items-container__header--excal", children: C("labels.excalidrawLib") }), U.length > 0 ? h.jsx(W6, { children: h.jsx(Rf, { itemsRenderedPerBatch: I, items: U, onItemSelectToggle: x, onItemDrag: E, onClick: M, isItemSelected: S, svgCache: f }) }) : p.length > 0 ? h.jsx("div", { style: { margin: "1rem 0", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", width: "100%", fontSize: ".9rem" }, children: C("library.noItems") }) : null] }), m && h.jsx(W9, { style: { padding: "16px 0", width: "100%" }, id: l, libraryReturnUrl: s, theme: r, children: h.jsx(X6, { selectedItems: d, onSelectItems: c }) })] })] });
}
var bU = Gt(!1), V6 = ({ children: e }) => h.jsx("div", { className: "layer-ui__library", children: e }), vW = xs(({ onInsertLibraryItems: e, pendingElements: t, onAddToLibrary: n, setAppState: a, libraryReturnUrl: i, library: r, id: l, theme: s, selectedItems: c, onSelectItems: d }) => {
  let [o] = xt(ac), u = Te((U) => {
    (async (m, g) => {
      tt("element", "addToLibrary", "ui");
      for (let v of Bb) if (m.some((x) => x.type === v)) return a({ errorMessage: C(`errors.libraryElementTypeError.${v}`) });
      let b = [{ status: "unpublished", elements: m, id: Qn(), created: Date.now() }, ...g];
      n(), r.setLibrary(b).catch(() => {
        a({ errorMessage: C("alerts.errorAddingToLibrary") });
      });
    })(U, o.libraryItems);
  }, [n, r, a, o.libraryItems]), f = nt(() => o.libraryItems, [o]);
  if (o.status === "loading" && !o.isInitialized) return h.jsx(V6, { children: h.jsx("div", { className: "layer-ui__library-message", children: h.jsxs("div", { children: [h.jsx(Ri, { size: "2em" }), h.jsx("span", { children: C("labels.libraryLoadingMessage") })] }) }) });
  let p = o.libraryItems.length > 0 || t.length > 0;
  return h.jsxs(V6, { children: [h.jsx(bW, { isLoading: o.status === "loading", libraryItems: f, onAddToLibrary: u, onInsertLibraryItems: e, pendingElements: t, id: l, libraryReturnUrl: i, theme: s, onSelectItems: d, selectedItems: c }), p && h.jsx(W9, { className: "library-menu-control-buttons--at-bottom", style: { padding: "16px 12px 0 12px" }, id: l, libraryReturnUrl: i, theme: s })] });
}), Pf = (e, t) => ({ elements: e, pending: xe(e, { selectedElementIds: t }, { includeBoundTextElement: !0, includeElementsInFrames: !0 }), selectedElementIds: t }), xW = (e, t) => {
  let n = Th(), [a, i] = re(() => Pf(n, e.selectedElementIds)), r = ie(/* @__PURE__ */ new Map());
  return Q(() => {
    for (let l of a.pending) r.current.set(l.id, l.version);
  }, [a.pending]), Q(() => {
    t.state.cursorButton === "up" && t.state.activeTool.type === "selection" && i((l) => {
      var c;
      if (!qt(l.selectedElementIds, e.selectedElementIds)) return r.current.clear(), Pf(n, e.selectedElementIds);
      let s = t.scene.getNonDeletedElementsMap();
      for (let d of Object.keys(e.selectedElementIds)) {
        let o = (c = s.get(d)) == null ? void 0 : c.version;
        if (o && o !== r.current.get(d)) return Pf(n, e.selectedElementIds);
      }
      return l;
    });
  }, [t, t.state.cursorButton, t.state.activeTool.type, e.selectedElementIds, n]), a.pending;
}, yW = xs(() => {
  let e = ri(), { onInsertElements: t } = e, n = kc(), a = pn(), i = Ft(), [r, l] = re([]), s = nt(() => e.library, [e.library]), c = xW(a, e), d = Te((u) => {
    t(X9(u));
  }, [t]), o = Te(() => {
    i({ selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null });
  }, [i]);
  return h.jsx(vW, { pendingElements: c, onInsertLibraryItems: d, onAddToLibrary: o, setAppState: i, libraryReturnUrl: n.libraryReturnUrl, library: s, id: e.id, theme: a.theme, selectedItems: r, onSelectItems: l });
});
function wW(e) {
  if (e && typeof e == "number") return e;
  switch (e) {
    case "small":
      return 550;
    case "wide":
      return 1024;
    case "regular":
    default:
      return 800;
  }
}
var ka = (e) => {
  let [t, n] = TX(), [a] = re(document.activeElement), { id: i } = li(), r = $t().viewport.isMobile;
  Q(() => {
    if (!t) return;
    let d = p1(t);
    setTimeout(() => {
      d.length > 0 && e.autofocus !== !1 && (d[1] || d[0]).focus();
    });
    let o = (u) => {
      if (u.key === L.TAB) {
        let f = p1(t), { activeElement: p } = document, U = f.findIndex((m) => m === p);
        U === 0 && u.shiftKey ? (f[f.length - 1].focus(), u.preventDefault()) : U === f.length - 1 && !u.shiftKey && (f[0].focus(), u.preventDefault());
      }
    };
    return t.addEventListener("keydown", o), () => t.removeEventListener("keydown", o);
  }, [t, e.autofocus]);
  let l = Ft(), s = vh(bU), c = () => {
    l({ openMenu: null }), s(!1), a.focus(), e.onCloseRequest();
  };
  return h.jsx(_X, { className: ne("Dialog", e.className, { "Dialog--fullscreen": r }), labelledBy: "dialog-title", maxWidth: wW(e.size), onCloseRequest: c, closeOnClickOutside: e.closeOnClickOutside, children: h.jsxs(ba, { ref: n, children: [e.title && h.jsx("h2", { id: `${i}-dialog-title`, className: "Dialog__title", children: h.jsx("span", { className: "Dialog__titleContent", children: e.title }) }), r && h.jsx("button", { className: "Dialog__close", onClick: c, title: C("buttons.close"), "aria-label": C("buttons.close"), type: "button", children: Ms }), h.jsx("div", { className: "Dialog__content", children: e.children })] }) });
}, vs = ({ type: e = "button", onSelect: t, selected: n, children: a, className: i = "", ...r }) => h.jsx("button", { onClick: Xu(r.onClick, (l) => {
  t();
}), type: e, className: ne("excalidraw-button", i, { selected: n }), ...r, children: a }), vU = Ot(({ onChange: e, label: t, fullWidth: n, placeholder: a, readonly: i, selectOnRender: r, onKeyDown: l, isRedacted: s = !1, icon: c, className: d, ...o }, u) => {
  let f = ie(null);
  j5(u, () => f.current), Mn(() => {
    var m, g;
    r && ((m = f.current) == null || m.focus(), (g = f.current) == null || g.select());
  }, [r]);
  let [p, U] = re(!1);
  return h.jsxs("div", { className: ne("ExcTextField", d, { "ExcTextField--fullWidth": n, "ExcTextField--hasIcon": !!c }), onClick: () => {
    var m;
    (m = f.current) == null || m.focus();
  }, children: [c, t && h.jsx("div", { className: "ExcTextField__label", children: t }), h.jsxs("div", { className: ne("ExcTextField__input", { "ExcTextField__input--readonly": i }), children: [h.jsx("input", { className: ne({ "is-redacted": "value" in o && o.value && s && !p }), readOnly: i, value: "value" in o ? o.value : void 0, defaultValue: "defaultValue" in o ? o.defaultValue : void 0, placeholder: a, ref: f, onChange: (m) => e == null ? void 0 : e(m.target.value), onKeyDown: l }), s && h.jsx(vs, { onSelect: () => U(!p), style: { border: 0, userSelect: "none" }, children: p ? vI : K0 })] })] });
}), EW = { toggleTheme: [X("Shift+Alt+D")], saveScene: [X("CtrlOrCmd+S")], loadScene: [X("CtrlOrCmd+O")], clearCanvas: [X("CtrlOrCmd+Delete")], imageExport: [X("CtrlOrCmd+Shift+E")], commandPalette: [X("CtrlOrCmd+/"), X("CtrlOrCmd+Shift+P")], cut: [X("CtrlOrCmd+X")], copy: [X("CtrlOrCmd+C")], paste: [X("CtrlOrCmd+V")], copyStyles: [X("CtrlOrCmd+Alt+C")], pasteStyles: [X("CtrlOrCmd+Alt+V")], selectAll: [X("CtrlOrCmd+A")], deleteSelectedElements: [X("Delete")], duplicateSelection: [X("CtrlOrCmd+D"), X(`Alt+${C("helpDialog.drag")}`)], sendBackward: [X("CtrlOrCmd+[")], bringForward: [X("CtrlOrCmd+]")], sendToBack: [X(Za ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")], bringToFront: [X(Za ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")], copyAsPng: [X("Shift+Alt+C")], group: [X("CtrlOrCmd+G")], ungroup: [X("CtrlOrCmd+Shift+G")], gridMode: [X("CtrlOrCmd+'")], zenMode: [X("Alt+Z")], objectsSnapMode: [X("Alt+S")], stats: [X("Alt+/")], addToLibrary: [], flipHorizontal: [X("Shift+H")], flipVertical: [X("Shift+V")], viewMode: [X("Alt+R")], hyperlink: [X("CtrlOrCmd+K")], toggleElementLock: [X("CtrlOrCmd+Shift+L")], resetZoom: [X("CtrlOrCmd+0")], zoomOut: [X("CtrlOrCmd+-")], zoomIn: [X("CtrlOrCmd++")], zoomToFitSelection: [X("Shift+3")], zoomToFit: [X("Shift+1")], zoomToFitSelectionInViewport: [X("Shift+2")], toggleEraserTool: [X("E")], toggleHandTool: [X("H")], setFrameAsActiveTool: [X("F")], saveFileToDisk: [X("CtrlOrCmd+S")], saveToActiveFile: [X("CtrlOrCmd+S")], toggleShortcuts: [X("?")], searchMenu: [X("CtrlOrCmd+F")], wrapSelectionInFrame: [] }, an = (e, t = 0) => {
  let n = EW[e];
  return n && n.length > 0 ? n[t] || n[0] : "";
}, SW = "\\u0300-\\u036f", kW = "\\ufe20-\\ufe2f", MW = "\\u20d0-\\u20ff", CW = SW + kW + MW, IW = `[${CW}]`, TW = RegExp(IW, "g"), _W = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, AW = { : "A", : "A", : "A", : "A", : "A", : "A", : "a", : "a", : "a", : "a", : "a", : "a", : "C", : "c", : "D", : "d", : "E", : "E", : "E", : "E", : "e", : "e", : "e", : "e", : "I", : "I", : "I", : "I", : "i", : "i", : "i", : "i", : "N", : "n", : "O", : "O", : "O", : "O", : "O", : "O", : "o", : "o", : "o", : "o", : "o", : "o", : "U", : "U", : "U", : "U", : "u", : "u", : "u", : "u", : "Y", : "y", : "y", : "E", : "e", : "T", : "t", : "s", : "A", : "A", : "A", : "a", : "a", : "a", : "C", : "C", : "C", : "C", : "c", : "c", : "c", : "c", : "D", : "D", : "d", : "d", : "E", : "E", : "E", : "E", : "E", : "e", : "e", : "e", : "e", : "e", : "G", : "G", : "G", : "G", : "g", : "g", : "g", : "g", : "H", : "H", : "h", : "h", : "I", : "I", : "I", : "I", : "I", : "i", : "i", : "i", : "i", : "i", : "J", : "j", : "K", : "k", : "k", : "L", : "L", : "L", : "L", : "L", : "l", : "l", : "l", : "l", : "l", : "N", : "N", : "N", : "N", : "n", : "n", : "n", : "n", : "O", : "O", : "O", : "o", : "o", : "o", : "R", : "R", : "R", : "r", : "r", : "r", : "S", : "S", : "S", : "S", : "s", : "s", : "s", : "s", : "T", : "T", : "T", : "t", : "t", : "t", : "U", : "U", : "U", : "U", : "U", : "U", : "u", : "u", : "u", : "u", : "u", : "u", : "W", : "w", : "Y", : "y", : "Y", : "Z", : "Z", : "Z", : "z", : "z", : "z", : "I", : "i", : "E", : "e", : "n", : "s" }, G6 = (e) => e.replace(_W, (t) => AW[t] || t).replace(TW, ""), q9 = Y.createContext(null), Nn = () => Y.useContext(q9), jW = F3(), DW = () => Y.useMemo(() => ({ MainMenuTunnel: _a(), WelcomeScreenMenuHintTunnel: _a(), WelcomeScreenToolbarHintTunnel: _a(), WelcomeScreenHelpHintTunnel: _a(), WelcomeScreenCenterTunnel: _a(), FooterCenterTunnel: _a(), DefaultSidebarTriggerTunnel: _a(), DefaultSidebarTabTriggersTunnel: _a(), OverwriteConfirmDialogTunnel: _a(), TTDDialogTriggerTunnel: _a(), tunnelsJotai: jW }), []), J9 = (e, t) => {
  var a;
  let n = ((a = t[0]) == null ? void 0 : a.type) || null;
  for (let i of t) if (i.type !== n) {
    n = null;
    break;
  }
  return S1(e.activeTool.type) && e.activeTool.type !== "image" && n !== "image" && n !== "frame" && n !== "magicframe" || t.some((i) => S1(i.type));
}, Q9 = (e, t) => os(e.activeTool.type) || t.some((n) => os(n.type)), ev = ({ appState: e, elementsMap: t, renderAction: n, app: a }) => {
  let i = f3(t, e), r = !1;
  i.length === 2 && (Jn(i[0]) || Jn(i[1])) && (r = !0);
  let l = !!(e.editingTextElement || e.newElement), s = $t(), c = document.documentElement.getAttribute("dir") === "rtl", d = os(e.activeTool.type) && !ua(e.currentItemBackgroundColor) || i.some((U) => os(U.type) && !ua(U.backgroundColor)), o = i.length === 1 || r, u = !e.editingLinearElement && i.length === 1 && pe(i[0]) && !ee(i[0]), f = !e.croppingElementId && i.length === 1 && Re(i[0]), p = !r && Pn(e, a);
  return h.jsxs("div", { className: "panelColumn", children: [h.jsx("div", { children: J9(e, i) && n("changeStrokeColor") }), Q9(e, i) && h.jsx("div", { children: n("changeBackgroundColor") }), d && n("changeFillStyle"), (Em(e.activeTool.type) || i.some((U) => Em(U.type))) && n("changeStrokeWidth"), (e.activeTool.type === "freedraw" || i.some((U) => U.type === "freedraw")) && n("changeStrokeShape"), (Sm(e.activeTool.type) || i.some((U) => Sm(U.type))) && h.jsxs(h.Fragment, { children: [n("changeStrokeStyle"), n("changeSloppiness")] }), (k1(e.activeTool.type) || i.some((U) => k1(U.type))) && h.jsx(h.Fragment, { children: n("changeRoundness") }), (km(e.activeTool.type) || i.some((U) => km(U.type))) && h.jsx(h.Fragment, { children: n("changeArrowType") }), (e.activeTool.type === "text" || i.some(q)) && h.jsxs(h.Fragment, { children: [n("changeFontFamily"), n("changeFontSize"), (e.activeTool.type === "text" || fR(i, t)) && n("changeTextAlign")] }), hR(i, t) && n("changeVerticalAlign"), (lu(e.activeTool.type) || i.some((U) => lu(U.type))) && h.jsx(h.Fragment, { children: n("changeArrowhead") }), n("changeOpacity"), h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.layers") }), h.jsxs("div", { className: "buttonList", children: [n("sendToBack"), n("sendBackward"), n("bringForward"), n("bringToFront")] })] }), p && !r && h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.align") }), h.jsxs("div", { className: "buttonList", children: [c ? h.jsxs(h.Fragment, { children: [n("alignRight"), n("alignHorizontallyCentered"), n("alignLeft")] }) : h.jsxs(h.Fragment, { children: [n("alignLeft"), n("alignHorizontallyCentered"), n("alignRight")] }), i.length > 2 && n("distributeHorizontally"), h.jsx("div", { style: { flexBasis: "100%", height: 0 } }), h.jsxs("div", { style: { display: "flex", flexWrap: "wrap", gap: ".5rem", marginTop: "-0.5rem" }, children: [n("alignTop"), n("alignVerticallyCentered"), n("alignBottom"), i.length > 2 && n("distributeVertically")] })] })] }), !l && i.length > 0 && h.jsxs("fieldset", { children: [h.jsx("legend", { children: C("labels.actions") }), h.jsxs("div", { className: "buttonList", children: [!s.editor.isMobile && n("duplicateSelection"), !s.editor.isMobile && n("deleteSelectedElements"), n("group"), n("ungroup"), o && n("hyperlink"), f && n("cropEditor"), u && n("toggleLinearEditor")] })] })] });
}, tv = ({ activeTool: e, appState: t, app: n, UIOptions: a }) => {
  let [i, r] = re(!1), l = e.type === "frame", s = e.type === "laser", c = e.type === "embeddable", { TTDDialogTriggerTunnel: d } = Nn();
  return h.jsxs(h.Fragment, { children: [ep.map(({ value: o, icon: u, key: f, numericKey: p, fillable: U }, m) => {
    var x;
    if (((x = a.tools) == null ? void 0 : x[o]) === !1) return null;
    let g = C(`toolBar.${o}`), b = f && bo(typeof f == "string" ? f : f[0]), v = b ? `${b} ${C("helpDialog.or")} ${p}` : `${p}`;
    return h.jsx(Ce, { className: ne("Shape", { fillable: U }), type: "radio", icon: u, checked: e.type === o, name: "editor-current-shape", title: `${bo(g)}  ${v}`, keyBindingLabel: p || b, "aria-label": bo(g), "aria-keyshortcuts": v, "data-testid": `toolbar-${o}`, onPointerDown: ({ pointerType: y }) => {
      !t.penDetected && y === "pen" && n.togglePenMode(!0);
    }, onChange: ({ pointerType: y }) => {
      t.activeTool.type !== o && tt("toolbar", o, "ui"), o === "image" ? n.setActiveTool({ type: o, insertOnCanvasDirectly: y !== "mouse" }) : n.setActiveTool({ type: o });
    } }, o);
  }), h.jsx("div", { className: "App-toolbar__divider" }), h.jsxs(lt, { open: i, children: [h.jsx(lt.Trigger, { className: ne("App-toolbar__extra-tools-trigger", { "App-toolbar__extra-tools-trigger--selected": l || c || s && !n.props.isCollaborating }), onToggle: () => r(!i), title: C("toolBar.extraTools"), children: gI }), h.jsxs(lt.Content, { onClickOutside: () => r(!1), onSelect: () => r(!1), className: "App-toolbar__extra-tools-dropdown", children: [h.jsx(lt.Item, { onSelect: () => n.setActiveTool({ type: "frame" }), icon: y8, shortcut: L.F.toLocaleUpperCase(), "data-testid": "toolbar-frame", selected: l, children: C("toolBar.frame") }), h.jsx(lt.Item, { onSelect: () => n.setActiveTool({ type: "embeddable" }), icon: mC, "data-testid": "toolbar-embeddable", selected: c, children: C("toolBar.embeddable") }), h.jsx(lt.Item, { onSelect: () => n.setActiveTool({ type: "laser" }), icon: E8, "data-testid": "toolbar-laser", selected: s, shortcut: L.K.toLocaleUpperCase(), children: C("toolBar.laser") }), h.jsx("div", { style: { margin: "6px 0", fontSize: 14, fontWeight: 600 }, children: "Generate" }), n.props.aiEnabled !== !1 && h.jsx(d.Out, {}), h.jsx(lt.Item, { onSelect: () => n.setOpenDialog({ name: "ttd", tab: "mermaid" }), icon: w8, "data-testid": "toolbar-embeddable", children: C("toolBar.mermaidToExcalidraw") }), n.props.aiEnabled !== !1 && n.plugins.diagramToCode && h.jsx(h.Fragment, { children: h.jsxs(lt.Item, { onSelect: () => n.onMagicframeToolSelect(), icon: S8, "data-testid": "toolbar-magicframe", children: [C("toolBar.magicframe"), h.jsx(lt.Item.Badge, { children: "AI" })] }) })] })] })] });
}, LW = ({ renderAction: e, zoom: t }) => h.jsx(Xn.Col, { gap: 1, className: es.ZOOM_ACTIONS, children: h.jsxs(Xn.Row, { align: "center", children: [e("zoomOut"), e("resetZoom"), e("zoomIn")] }) }), RW = ({ renderAction: e, className: t }) => h.jsxs("div", { className: `undo-redo-buttons ${t}`, children: [h.jsx("div", { className: "undo-button-container", children: h.jsx(fl, { label: C("buttons.undo"), children: e("undo") }) }), h.jsx("div", { className: "redo-button-container", children: h.jsxs(fl, { label: C("buttons.redo"), children: [" ", e("redo")] }) })] }), PW = ({ actionManager: e, showExitZenModeBtn: t }) => h.jsx("button", { type: "button", className: ne("disable-zen-mode", { "disable-zen-mode--visible": t }), onClick: () => e.executeAction(o0), children: C("buttons.exitZenMode") }), NW = ({ renderAction: e, className: t }) => h.jsx("div", { className: `finalize-button ${t}`, children: e("finalize", { size: "small" }) }), Y6 = (e) => {
  let t = ie({ userFn: e });
  return t.current.userFn = e, t.current.stableFn || (t.current.stableFn = (...n) => t.current.userFn(...n)), t.current.stableFn;
}, Ih = Gt(null), OW = () => {
  let [e, t] = xt(Ih), n = In();
  return e && e === "clearCanvas" ? h.jsx(V9, { onConfirm: () => {
    n.executeAction(Mo), t(null);
  }, onCancel: () => t(null), title: C("clearCanvasDialog.title"), children: h.jsxs("p", { className: "clear-canvas__content", children: [" ", C("alerts.clearReset")] }) }) : null;
}, nv = {};
R5(nv, { toggleTheme: () => $W });
var $W = { ...Iu, category: "App", label: "Toggle theme", perform: ({ actionManager: e }) => {
  e.executeAction(Iu, "commandPalette");
} }, av = Z({ name: "copyElementLink", label: "labels.copyElementLink", icon: Z0, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i = xe(e, t);
  try {
    if (window.location) {
      let r = G7(i, t);
      return r ? (await vc(a.props.generateLinkForSelection ? a.props.generateLinkForSelection(r.id, r.type) : V7(r.id, r.type)), { appState: { toast: { message: C("toast.elementLinkCopied"), closable: !0 } }, captureUpdate: H.EVENTUALLY }) : { appState: t, elements: e, app: a, captureUpdate: H.EVENTUALLY };
    }
  } catch (r) {
    console.error(r);
  }
  return { appState: t, elements: e, app: a, captureUpdate: H.EVENTUALLY };
}, predicate: (e, t) => Uu(xe(e, t)) }), FW = Z({ name: "linkToElement", label: "labels.linkToElement", icon: I8, perform: (e, t, n, a) => {
  let i = xe(e, t);
  return i.length !== 1 || !Uu(i) ? { elements: e, appState: t, app: a, captureUpdate: H.EVENTUALLY } : { appState: { ...t, openDialog: { name: "elementLinkSelector", sourceElementId: xe(e, t)[0].id } }, captureUpdate: H.IMMEDIATELY };
}, predicate: (e, t, n, a) => {
  var r;
  let i = xe(e, t);
  return ((r = t.openDialog) == null ? void 0 : r.name) !== "elementLinkSelector" && i.length === 1 && Uu(i);
}, trackEvent: !1 }), zW = Gt(null), St = { app: "App", export: "Export", tools: "Tools", editor: "Editor", elements: "Elements", links: "Links" }, BW = (e) => {
  switch (e) {
    case St.app:
      return 1;
    case St.export:
      return 2;
    case St.editor:
      return 3;
    case St.tools:
      return 4;
    case St.elements:
      return 5;
    case St.links:
      return 6;
    default:
      return 10;
  }
}, Pd = ({ shortcut: e, className: t, children: n }) => {
  let a = e.replace("++", "+$").split("+");
  return h.jsxs("div", { className: ne("shortcut", t), children: [a.map((i, r) => h.jsx("div", { className: "shortcut-wrapper", children: h.jsx("div", { className: "shortcut-key", children: i === "$" ? "+" : i }) }, i)), h.jsx("div", { className: "shortcut-desc", children: n })] });
}, iv = (e) => !e.altKey && e[L.CTRL_OR_CMD] && (e.shiftKey && e.key.toLowerCase() === L.P || e.key === L.SLASH);
Object.assign((e) => {
  var a;
  let t = pn(), n = Ft();
  return Q(() => {
    let i = (r) => {
      iv(r) && (r.preventDefault(), r.stopPropagation(), n((l) => {
        var c;
        let s = ((c = l.openDialog) == null ? void 0 : c.name) === "commandPalette" ? null : { name: "commandPalette" };
        return s && tt("command_palette", "open", "shortcut"), { openDialog: s };
      }));
    };
    return window.addEventListener("keydown", i, { capture: !0 }), () => window.removeEventListener("keydown", i, { capture: !0 });
  }, [n]), ((a = t.openDialog) == null ? void 0 : a.name) !== "commandPalette" ? null : h.jsx(HW, { ...e });
}, { defaultItems: nv });
function HW({ customCommandPaletteItems: e }) {
  let t = ri(), n = pn(), a = Ft(), i = kc(), r = In(), [l, s] = xt(zW), [c, d] = re(null), o = ie(null), u = yh({ uiAppState: n, customCommandPaletteItems: e, appProps: i });
  Q(() => {
    let { uiAppState: S, customCommandPaletteItems: w, appProps: M } = u, I = (D) => {
      let P = "";
      return D.label && (typeof D.label == "function" ? P = C(D.label(t.scene.getNonDeletedElements(), S, t)) : P = C(D.label)), P;
    }, T = (D) => typeof D.icon == "function" ? D.icon(S, t.scene.getNonDeletedElements()) : D.icon, _ = [], A = (D, P, N) => {
      let $ = { label: I(D), icon: T(D), category: P, shortcut: an(D.name), keywords: D.keywords, predicate: D.predicate, viewMode: D.viewMode, perform: () => {
        r.executeAction(D, "commandPalette");
      } };
      return N ? N($, D) : $;
    };
    if (S && t.scene && r) {
      let D = [r.actions.group, r.actions.ungroup, r.actions.cut, r.actions.copy, r.actions.deleteSelectedElements, r.actions.wrapSelectionInFrame, r.actions.copyStyles, r.actions.pasteStyles, r.actions.bringToFront, r.actions.bringForward, r.actions.sendBackward, r.actions.sendToBack, r.actions.alignTop, r.actions.alignBottom, r.actions.alignLeft, r.actions.alignRight, r.actions.alignVerticallyCentered, r.actions.alignHorizontallyCentered, r.actions.duplicateSelection, r.actions.flipHorizontal, r.actions.flipVertical, r.actions.zoomToFitSelection, r.actions.zoomToFitSelectionInViewport, r.actions.increaseFontSize, r.actions.decreaseFontSize, r.actions.toggleLinearEditor, r.actions.cropEditor, z9, av, FW].map((O) => A(O, St.elements, (G, ae) => ({ ...G, predicate: ae.predicate ? ae.predicate : (he, ce, Be, He) => xe(he, ce).length > 0 }))), P = [r.actions.toggleHandTool, r.actions.setFrameAsActiveTool].map((O) => A(O, St.tools)), N = [r.actions.undo, r.actions.redo, r.actions.zoomIn, r.actions.zoomOut, r.actions.resetZoom, r.actions.zoomToFit, r.actions.zenMode, r.actions.viewMode, r.actions.gridMode, r.actions.objectsSnapMode, r.actions.toggleShortcuts, r.actions.selectAll, r.actions.toggleElementLock, r.actions.unlockAllElements, r.actions.stats].map((O) => A(O, St.editor)), $ = [r.actions.saveToActiveFile, r.actions.saveFileToDisk, r.actions.copyAsPng, r.actions.copyAsSvg].map((O) => A(O, St.export));
      _ = [...D, ...N, { label: I(Mo), icon: T(Mo), shortcut: an(Mo.name), category: St.editor, keywords: ["delete", "destroy"], viewMode: !1, perform: () => {
        fa.set(Ih, "clearCanvas");
      } }, { label: C("buttons.exportImage"), category: St.export, icon: p8, shortcut: an("imageExport"), keywords: ["export", "image", "png", "jpeg", "svg", "clipboard", "picture"], perform: () => {
        a({ openDialog: { name: "imageExport" } });
      } }, ...$];
      let R = [{ label: C("toolBar.library"), category: St.app, icon: W0, viewMode: !1, perform: () => {
        S.openSidebar ? a({ openSidebar: null }) : a({ openSidebar: { name: Ua.name, tab: Ua.defaultTab } });
      } }, { label: C("search.title"), category: St.app, icon: sl, viewMode: !0, perform: () => {
        r.executeAction(rv);
      } }, { label: C("labels.changeStroke"), keywords: ["color", "outline"], category: St.elements, icon: tf, viewMode: !1, predicate: (O, G) => {
        let ae = xe(O, G);
        return ae.length > 0 && J9(G, ae);
      }, perform: () => {
        a((O) => ({ openMenu: O.openMenu === "shape" ? null : "shape", openPopup: "elementStroke" }));
      } }, { label: C("labels.changeBackground"), keywords: ["color", "fill"], icon: tf, category: St.elements, viewMode: !1, predicate: (O, G) => {
        let ae = xe(O, G);
        return ae.length > 0 && Q9(G, ae);
      }, perform: () => {
        a((O) => ({ openMenu: O.openMenu === "shape" ? null : "shape", openPopup: "elementBackground" }));
      } }, { label: C("labels.canvasBackground"), keywords: ["color"], icon: tf, category: St.editor, viewMode: !1, perform: () => {
        a((O) => ({ openMenu: O.openMenu === "canvas" ? null : "canvas", openPopup: "canvasBackground" }));
      } }, ...ep.reduce((O, G) => {
        var Ne;
        let { value: ae, icon: he, key: ce, numericKey: Be } = G;
        if (((Ne = M.UIOptions.tools) == null ? void 0 : Ne[ae]) === !1) return O;
        let He = ce && bo(typeof ce == "string" ? ce : ce[0]) || Be, Xe = { label: C(`toolBar.${ae}`), category: St.tools, shortcut: He, icon: he, keywords: ["toolbar"], viewMode: !1, perform: ({ event: It }) => {
          ae === "image" ? t.setActiveTool({ type: ae, insertOnCanvasDirectly: It.type === "keydown" }) : t.setActiveTool({ type: ae });
        } };
        return O.push(Xe), O;
      }, []), ...P, { label: C("toolBar.lock"), category: St.tools, icon: S.activeTool.locked ? V0 : Vu, shortcut: L.Q.toLocaleUpperCase(), viewMode: !1, perform: () => {
        t.toggleLock();
      } }, { label: `${C("labels.textToDiagram")}...`, category: St.tools, icon: xI, viewMode: !1, predicate: M.aiEnabled, perform: () => {
        a((O) => ({ ...O, openDialog: { name: "ttd", tab: "text-to-diagram" } }));
      } }, { label: `${C("toolBar.mermaidToExcalidraw")}...`, category: St.tools, icon: w8, viewMode: !1, predicate: M.aiEnabled, perform: () => {
        a((O) => ({ ...O, openDialog: { name: "ttd", tab: "mermaid" } }));
      } }], V = [..._, ...R, ...w || []].map((O) => {
        var G;
        return { ...O, icon: O.icon || k8, order: O.order ?? BW(O.category), haystack: `${G6(O.label.toLocaleLowerCase())} ${((G = O.keywords) == null ? void 0 : G.join(" ")) || ""}` };
      });
      d(V), s(V.find((O) => O.label === (l == null ? void 0 : l.label)) ?? null);
    }
  }, [u, t, r, d, l == null ? void 0 : l.label, s, a]);
  let [f, p] = re(""), [U, m] = re(null), [g, b] = re({}), v = (S) => {
    a({ openDialog: null }, S), p("");
  }, x = (S, w) => {
    var M;
    ((M = n.openDialog) == null ? void 0 : M.name) === "commandPalette" && (w.stopPropagation(), w.preventDefault(), document.body.classList.add("excalidraw-animations-disabled"), v(() => {
      S.perform({ actionManager: r, event: w }), s(S), requestAnimationFrame(() => {
        document.body.classList.remove("excalidraw-animations-disabled");
      });
    }));
  }, y = Y6((S) => S.viewMode === !1 && n.viewModeEnabled ? !1 : typeof S.predicate == "function" ? S.predicate(t.scene.getNonDeletedElements(), n, i, t) : S.predicate === void 0 || S.predicate), E = Y6((S) => {
    var T;
    let w = Rr(S.target) || iv(S) || S.key === L.ESCAPE;
    if (w && S.key !== L.ARROW_UP && S.key !== L.ARROW_DOWN && S.key !== L.ENTER) return;
    let M = Object.values(g).flat(), I = l && !f && y(l);
    if (S.key === L.ARROW_UP) {
      S.preventDefault();
      let _ = M.findIndex((P) => P.label === (U == null ? void 0 : U.label));
      if (I) {
        if (_ === 0) {
          m(l);
          return;
        }
        if (U === l) {
          let P = M[M.length - 1];
          P && m(P);
          return;
        }
      }
      let A;
      _ === -1 ? A = M.length - 1 : A = _ === 0 ? M.length - 1 : (_ - 1) % M.length;
      let D = M[A];
      D && m(D);
      return;
    }
    if (S.key === L.ARROW_DOWN) {
      S.preventDefault();
      let _ = M.findIndex((P) => P.label === (U == null ? void 0 : U.label));
      if (I) {
        if (!U || _ === M.length - 1) {
          m(l);
          return;
        }
        if (U === l) {
          let P = M[0];
          P && m(P);
          return;
        }
      }
      let A = (_ + 1) % M.length, D = M[A];
      D && m(D);
      return;
    }
    if (S.key === L.ENTER && U && setTimeout(() => {
      x(U, S);
    }), !w) {
      if (S.stopPropagation(), /^[a-zA-Z0-9]$/.test(S.key)) {
        (T = o == null ? void 0 : o.current) == null || T.focus();
        return;
      }
      S.preventDefault();
    }
  });
  return Q(() => (window.addEventListener("keydown", E, { capture: !0 }), () => window.removeEventListener("keydown", E, { capture: !0 })), [E]), Q(() => {
    if (!c) return;
    let S = (T) => {
      let _ = {};
      for (let A of T) _[A.category] ? _[A.category].push(A) : _[A.category] = [A];
      return _;
    }, w = c.filter(y).sort((T, _) => T.order - _.order), M = !f && l && y(l);
    if (!f) {
      b(S(M ? w.filter((T) => T.label !== (l == null ? void 0 : l.label)) : w)), m(M ? l : w[0] || null);
      return;
    }
    let I = G6(f.toLocaleLowerCase().replace(/[<>_| -]/g, ""));
    w = hz.filter(I, w, { extract: (T) => T.haystack }).sort((T, _) => _.score - T.score).map((T) => T.original), b(S(w)), m(w[0] ?? null);
  }, [f, c, y, l]), h.jsxs(ka, { onCloseRequest: () => v(), closeOnClickOutside: !0, title: !1, size: 720, autofocus: !0, className: "command-palette-dialog", children: [h.jsx(vU, { value: f, placeholder: C("commandPalette.search.placeholder"), onChange: (S) => {
    p(S);
  }, selectOnRender: !0, ref: o }), !t.device.viewport.isMobile && h.jsxs("div", { className: "shortcuts-wrapper", children: [h.jsx(Pd, { shortcut: "", children: C("commandPalette.shortcuts.select") }), h.jsx(Pd, { shortcut: "", children: C("commandPalette.shortcuts.confirm") }), h.jsx(Pd, { shortcut: X("Esc"), children: C("commandPalette.shortcuts.close") })] }), h.jsxs("div", { className: "commands", children: [l && !f && h.jsxs("div", { className: "command-category", children: [h.jsxs("div", { className: "command-category-title", children: [C("commandPalette.recents"), h.jsx("div", { className: "icon", style: { marginLeft: "6px" }, children: yI })] }), h.jsx(Z6, { command: l, isSelected: l.label === (U == null ? void 0 : U.label), onClick: (S) => x(l, S), disabled: !y(l), onMouseMove: () => m(l), showShortcut: !t.device.viewport.isMobile, appState: n })] }), Object.keys(g).length > 0 ? Object.keys(g).map((S, w) => h.jsxs("div", { className: "command-category", children: [h.jsx("div", { className: "command-category-title", children: S }), g[S].map((M) => h.jsx(Z6, { command: M, isSelected: M.label === (U == null ? void 0 : U.label), onClick: (I) => x(M, I), onMouseMove: () => m(M), showShortcut: !t.device.viewport.isMobile, appState: n }, M.label))] }, S)) : c ? h.jsxs("div", { className: "no-match", children: [h.jsx("div", { className: "icon", children: sl }), " ", C("commandPalette.search.noMatch")] }) : null] })] });
}
var Z6 = ({ command: e, isSelected: t, disabled: n, onMouseMove: a, onClick: i, showShortcut: r, appState: l }) => {
  let s = () => {
  };
  return h.jsxs("div", { className: ne("command-item", { "item-selected": t, "item-disabled": n }), ref: (c) => {
    var d;
    t && !n && ((d = c == null ? void 0 : c.scrollIntoView) == null || d.call(c, { block: "nearest" }));
  }, onClick: n ? s : i, onMouseMove: n ? s : a, title: n ? C("commandPalette.itemNotAvailable") : "", children: [h.jsxs("div", { className: "name", children: [e.icon && h.jsx(Eh, { icon: typeof e.icon == "function" ? e.icon(l) : e.icon }), e.label] }), r && e.shortcut && h.jsx(Pd, { shortcut: e.shortcut })] });
}, XW = Z({ name: "toggleLinearEditor", category: St.elements, label: (e, t, n) => {
  var a;
  return ((a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds })[0]) == null ? void 0 : a.type) === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit";
}, keywords: ["line"], trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return !!(!t.editingLinearElement && i.length === 1 && pe(i[0]) && !ee(i[0]));
}, perform(e, t, n, a) {
  var l;
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 })[0], r = ((l = t.editingLinearElement) == null ? void 0 : l.elementId) === i.id ? null : new J(i);
  return { appState: { ...t, editingLinearElement: r }, captureUpdate: H.IMMEDIATELY };
}, PanelComponent: ({ appState: e, updateData: t, app: n }) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: e.selectedElementIds })[0], i = C(a.type === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit");
  return h.jsx(Ce, { type: "button", icon: RI, title: i, "aria-label": i, onClick: () => t(null) });
} }), rv = Z({ name: "searchMenu", icon: sl, keywords: ["search", "find"], label: "search.title", viewMode: !0, trackEvent: { category: "search_menu", action: "toggle", predicate: (e) => e.gridModeEnabled }, perform(e, t, n, a) {
  var i, r;
  if (((i = t.openSidebar) == null ? void 0 : i.name) === Ua.name && t.openSidebar.tab === Gl) {
    let l = (r = a.excalidrawContainerValue.container) == null ? void 0 : r.querySelector(`.${es.SEARCH_MENU_INPUT_WRAPPER} input`);
    return l != null && l.matches(":focus") ? { appState: { ...t, openSidebar: null }, captureUpdate: H.EVENTUALLY } : (l == null || l.focus(), l == null || l.select(), !1);
  }
  return { appState: { ...t, openSidebar: { name: Ua.name, tab: Gl }, openDialog: null }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.gridModeEnabled, predicate: (e, t, n) => n.gridModeEnabled === void 0, keyTest: (e) => e[L.CTRL_OR_CMD] && e.key === L.F }), WW = Z({ name: "cropEditor", label: "helpDialog.cropStart", icon: bm, viewMode: !0, trackEvent: { category: "menu" }, keywords: ["image", "crop"], perform(e, t, n, a) {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 })[0];
  return { appState: { ...t, isCropping: !1, croppingElementId: i.id }, captureUpdate: H.IMMEDIATELY };
}, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return !!(!t.croppingElementId && i.length === 1 && Re(i[0]));
}, PanelComponent: ({ appState: e, updateData: t, app: n }) => {
  let a = C("helpDialog.cropStart");
  return h.jsx(Ce, { type: "button", icon: bm, title: a, "aria-label": a, onClick: () => t(null) });
} }), Tu = class {
  constructor(e = !0, t = !0) {
    this.isUndoStackEmpty = e, this.isRedoStackEmpty = t;
  }
}, K6 = class uo {
  constructor() {
    j(this, "onHistoryChangedEmitter", new Oa()), j(this, "undoStack", []), j(this, "redoStack", []);
  }
  get isUndoStackEmpty() {
    return this.undoStack.length === 0;
  }
  get isRedoStackEmpty() {
    return this.redoStack.length === 0;
  }
  clear() {
    this.undoStack.length = 0, this.redoStack.length = 0;
  }
  record(t, n) {
    let a = VW.create(n, t);
    a.isEmpty() || (this.undoStack.push(a.inverse()), a.elementsChange.isEmpty() || (this.redoStack.length = 0), this.onHistoryChangedEmitter.trigger(new Tu(this.isUndoStackEmpty, this.isRedoStackEmpty)));
  }
  undo(t, n, a) {
    return this.perform(t, n, a, () => uo.pop(this.undoStack), (i) => uo.push(this.redoStack, i, t));
  }
  redo(t, n, a) {
    return this.perform(t, n, a, () => uo.pop(this.redoStack), (i) => uo.push(this.undoStack, i, t));
  }
  perform(t, n, a, i, r) {
    try {
      let l = i();
      if (l === null) return;
      let s = t, c = n, d = !1;
      for (; l; ) {
        try {
          [s, c, d] = l.applyTo(s, c, a);
        } finally {
          r(l);
        }
        if (d) break;
        l = i();
      }
      return [s, c];
    } finally {
      this.onHistoryChangedEmitter.trigger(new Tu(this.isUndoStackEmpty, this.isRedoStackEmpty));
    }
  }
  static pop(t) {
    if (!t.length) return null;
    let n = t.pop();
    return n !== void 0 ? n : null;
  }
  static push(t, n, a) {
    let i = n.inverse().applyLatestChanges(a);
    return t.push(i);
  }
}, VW = class Nd {
  constructor(t, n) {
    this.appStateChange = t, this.elementsChange = n;
  }
  static create(t, n) {
    return new Nd(t, n);
  }
  inverse() {
    return new Nd(this.appStateChange.inverse(), this.elementsChange.inverse());
  }
  applyTo(t, n, a) {
    let [i, r] = this.elementsChange.applyTo(t, a.elements), [l, s] = this.appStateChange.applyTo(n, i);
    return [i, l, r || s];
  }
  applyLatestChanges(t) {
    let n = this.elementsChange.applyLatestChanges(t);
    return Nd.create(this.appStateChange, n);
  }
  isEmpty() {
    return this.appStateChange.isEmpty() && this.elementsChange.isEmpty();
  }
}, lv = (e, t) => {
  let [n, a] = re(t);
  return Q(() => {
    let i = e.on((r) => {
      a(r);
    });
    return () => {
      i();
    };
  }, [e]), n;
}, sv = (e, t, n) => {
  if (!t.multiElement && !t.resizingElement && !t.editingTextElement && !t.newElement && !t.selectedElementsAreBeingDragged && !t.selectionElement && !e.flowChartCreator.isCreatingChart) {
    let a = n();
    if (!a) return { captureUpdate: H.EVENTUALLY };
    let [i, r] = a, l = Array.from(i.values());
    return { appState: r, elements: l, captureUpdate: H.NEVER };
  }
  return { captureUpdate: H.EVENTUALLY };
}, GW = (e, t) => ({ name: "undo", label: "buttons.undo", icon: am, trackEvent: { category: "history" }, viewMode: !1, perform: (n, a, i, r) => sv(r, a, () => e.undo(ue(n), a, t.snapshot)), keyTest: (n) => n[L.CTRL_OR_CMD] && w1(n, L.Z) && !n.shiftKey, PanelComponent: ({ updateData: n, data: a }) => {
  let { isUndoStackEmpty: i } = lv(e.onHistoryChangedEmitter, new Tu(e.isUndoStackEmpty, e.isRedoStackEmpty));
  return h.jsx(Ce, { type: "button", icon: am, "aria-label": C("buttons.undo"), onClick: n, size: (a == null ? void 0 : a.size) || "medium", disabled: i, "data-testid": "button-undo" });
} }), YW = (e, t) => ({ name: "redo", label: "buttons.redo", icon: im, trackEvent: { category: "history" }, viewMode: !1, perform: (n, a, i, r) => sv(r, a, () => e.redo(ue(n), a, t.snapshot)), keyTest: (n) => n[L.CTRL_OR_CMD] && n.shiftKey && w1(n, L.Z) || Nb && n.ctrlKey && !n.shiftKey && w1(n, L.Y), PanelComponent: ({ updateData: n, data: a }) => {
  let { isRedoStackEmpty: i } = lv(e.onHistoryChangedEmitter, new Tu(e.isUndoStackEmpty, e.isRedoStackEmpty));
  return h.jsx(Ce, { type: "button", icon: im, "aria-label": C("buttons.redo"), onClick: n, size: (a == null ? void 0 : a.size) || "medium", disabled: i, "data-testid": "button-redo" });
} }), Nf = (e, t, n, a, i, r) => {
  if (e.trackEvent) try {
    typeof e.trackEvent == "object" && (!e.trackEvent.predicate || e.trackEvent.predicate(n, a, r)) && tt(e.trackEvent.category, e.trackEvent.action || e.name, `${t} (${i.device.editor.isMobile ? "mobile" : "desktop"})`);
  } catch (l) {
    console.error("error while logging action:", l);
  }
}, ZW = class {
  constructor(e, t, n, a) {
    j(this, "actions", {}), j(this, "updater"), j(this, "getAppState"), j(this, "getElementsIncludingDeleted"), j(this, "app"), j(this, "renderAction", (i, r) => {
      let l = this.app.props.UIOptions.canvasActions;
      if (this.actions[i] && "PanelComponent" in this.actions[i] && (!(i in l) || l[i])) {
        let s = this.actions[i], c = s.PanelComponent;
        c.displayName = "PanelComponent";
        let d = this.getElementsIncludingDeleted(), o = this.getAppState(), u = (f) => {
          Nf(s, "ui", o, d, this.app, f), this.updater(s.perform(this.getElementsIncludingDeleted(), this.getAppState(), f, this.app));
        };
        return h.jsx(c, { elements: this.getElementsIncludingDeleted(), appState: this.getAppState(), updateData: u, appProps: this.app.props, app: this.app, data: r });
      }
      return null;
    }), j(this, "isActionEnabled", (i) => {
      let r = this.getElementsIncludingDeleted(), l = this.getAppState();
      return !i.predicate || i.predicate(r, l, this.app.props, this.app);
    }), this.updater = (i) => {
      if (pc(i)) i.then((r) => e(r));
      else return e(i);
    }, this.getAppState = t, this.getElementsIncludingDeleted = n, this.app = a;
  }
  registerAction(e) {
    this.actions[e.name] = e;
  }
  registerAll(e) {
    e.forEach((t) => this.registerAction(t));
  }
  handleKeyDown(e) {
    let t = this.app.props.UIOptions.canvasActions, n = Object.values(this.actions).sort((s, c) => (c.keyPriority || 0) - (s.keyPriority || 0)).filter((s) => (s.name in t ? t[s.name] : !0) && s.keyTest && s.keyTest(e, this.getAppState(), this.getElementsIncludingDeleted(), this.app));
    if (n.length !== 1) return n.length > 1 && console.warn("Canceling as multiple actions match this shortcut", n), !1;
    let a = n[0];
    if (this.getAppState().viewModeEnabled && a.viewMode !== !0) return !1;
    let i = this.getElementsIncludingDeleted(), r = this.getAppState();
    return Nf(a, "keyboard", r, i, this.app, null), e.preventDefault(), e.stopPropagation(), this.updater(n[0].perform(i, r, null, this.app)), !0;
  }
  executeAction(e, t = "api", n = null) {
    let a = this.getElementsIncludingDeleted(), i = this.getAppState();
    Nf(e, t, i, a, this.app, n), this.updater(e.perform(a, i, n, this.app));
  }
}, q6 = (e) => {
  let t = Array.from(e.values());
  return { x: Q6(t, (n) => n.x) / t.length, y: Q6(t, (n) => n.y) / t.length };
}, J6 = ([e, t]) => Math.hypot(e.x - t.x, e.y - t.y), Q6 = (e, t) => e.reduce((n, a) => n + t(a), 0), KW = ({ children: e, left: t, top: n, onCloseRequest: a, fitInViewport: i = !1, offsetLeft: r = 0, offsetTop: l = 0, viewportWidth: s = window.innerWidth, viewportHeight: c = window.innerHeight }) => {
  let d = ie(null);
  Q(() => {
    let u = d.current;
    if (!u) return;
    u.contains(document.activeElement) || u.focus();
    let f = (p) => {
      var U, m, g;
      if (p.key === L.TAB) {
        let b = p1(u), { activeElement: v } = document, x = b.findIndex((y) => y === v);
        v === u ? (p.shiftKey ? (U = b[b.length - 1]) == null || U.focus() : b[0].focus(), p.preventDefault(), p.stopImmediatePropagation()) : x === 0 && p.shiftKey ? ((m = b[b.length - 1]) == null || m.focus(), p.preventDefault(), p.stopImmediatePropagation()) : x === b.length - 1 && !p.shiftKey && ((g = b[0]) == null || g.focus(), p.preventDefault(), p.stopImmediatePropagation());
      }
    };
    return u.addEventListener("keydown", f), () => u.removeEventListener("keydown", f);
  }, []);
  let o = ie(null);
  return Mn(() => {
    var u, f;
    if (i && d.current && n != null && t != null) {
      let p = d.current, { width: U, height: m } = p.getBoundingClientRect();
      if (((u = o.current) == null ? void 0 : u.top) === n && ((f = o.current) == null ? void 0 : f.left) === t) return;
      o.current = { top: n, left: t }, U >= s ? (p.style.width = `${s}px`, p.style.left = "0px", p.style.overflowX = "scroll") : t + U - r > s ? p.style.left = `${s - U - 10}px` : p.style.left = `${t}px`, m >= c ? (p.style.height = `${c - 20}px`, p.style.top = "10px", p.style.overflowY = "scroll") : n + m - l > c ? p.style.top = `${c - m}px` : p.style.top = `${n}px`;
    }
  }, [n, t, i, s, c, r, l]), Q(() => {
    if (a) {
      let u = (f) => {
        var p;
        (p = d.current) != null && p.contains(f.target) || y0(() => a(f));
      };
      return document.addEventListener("pointerdown", u, !1), () => document.removeEventListener("pointerdown", u, !1);
    }
  }, [a]), h.jsx("div", { className: "popover", ref: d, tabIndex: -1, children: e });
}, Lt = "separator", qW = Y.memo(({ actionManager: e, items: t, top: n, left: a, onClose: i }) => {
  let r = Mc(), l = Th(), s = t.reduce((c, d) => (d && (d === Lt || !d.predicate || d.predicate(l, r, e.app.props, e.app)) && c.push(d), c), []);
  return h.jsx(KW, { onCloseRequest: () => {
    i();
  }, top: n, left: a, fitInViewport: !0, offsetLeft: r.offsetLeft, offsetTop: r.offsetTop, viewportWidth: r.width, viewportHeight: r.height, children: h.jsx("ul", { className: "context-menu", onContextMenu: (c) => c.preventDefault(), children: s.map((c, d) => {
    var f;
    if (c === Lt) return !s[d - 1] || s[d - 1] === Lt ? null : h.jsx("hr", { className: "context-menu-item-separator" }, d);
    let o = c.name, u = "";
    return c.label && (typeof c.label == "function" ? u = C(c.label(l, r, e.app)) : u = C(c.label)), h.jsx("li", { "data-testid": o, onClick: () => {
      i(() => {
        e.executeAction(c, "contextMenu");
      });
    }, children: h.jsxs("button", { type: "button", className: ne("context-menu-item", { dangerous: o === "deleteSelectedElements", checkmark: (f = c.checked) == null ? void 0 : f.call(c, r) }), children: [h.jsx("div", { className: "context-menu-item__label", children: u }), h.jsx("kbd", { className: "context-menu-item__shortcut", children: o ? an(o) : "" })] }) }, d);
  }) }) });
}), JW = ({ children: e, onClose: t }) => {
  let [n, a] = re(!!e), { container: i } = li(), r = Y.useCallback(() => {
    a(!1), t && t(), i == null || i.focus();
  }, [t, i]);
  return h.jsx(h.Fragment, { children: n && h.jsx(ka, { size: "small", onCloseRequest: r, title: C("errorDialog.title"), children: h.jsx("div", { style: { whiteSpace: "pre-wrap" }, children: e }) }) });
}, ov = function({ onChange: e, value: t, choices: n, name: a }) {
  return h.jsx("div", { className: "RadioGroup", children: n.map((i) => h.jsxs("div", { className: ne("RadioGroup__choice", { active: i.value === t }), title: i.ariaLabel, children: [h.jsx("input", { name: a, type: "radio", checked: i.value === t, onChange: () => e(i.value), "aria-label": i.ariaLabel }), i.label] }, String(i.value))) });
}, id = ({ title: e, name: t, checked: n, onChange: a, disabled: i = !1 }) => h.jsx("div", { className: ne("Switch", { toggled: n, disabled: i }), children: h.jsx("input", { name: t, id: t, title: e, type: "checkbox", checked: n, disabled: i, onChange: () => a(!n), onKeyDown: (r) => {
  r.key === " " && a(!n);
} }) }), Io = Ot(({ children: e, icon: t, onClick: n, label: a, variant: i = "filled", color: r = "primary", size: l = "medium", fullWidth: s, className: c, status: d }, o) => {
  let [u, f] = re(!1), p = async (m) => {
    let g = n == null ? void 0 : n(m);
    if (pc(g)) {
      let b = window.setTimeout(() => {
        f(!0);
      }, 50);
      try {
        await g;
      } catch (v) {
        if (v instanceof Zu) console.warn(v);
        else throw v;
      } finally {
        clearTimeout(b), f(!1);
      }
    }
  }, U = u ? "loading" : d;
  return r = U === "success" ? "success" : r, h.jsx("button", { className: ne("ExcButton", `ExcButton--color-${r}`, `ExcButton--variant-${i}`, `ExcButton--size-${l}`, `ExcButton--status-${U}`, { "ExcButton--fullWidth": s }, c), onClick: p, type: "button", "aria-label": a, ref: o, disabled: U === "loading" || U === "success", children: h.jsxs("div", { className: "ExcButton__contents", children: [U === "loading" ? h.jsx(Ri, { className: "ExcButton__statusIcon" }) : U === "success" && h.jsx("div", { className: "ExcButton__statusIcon", children: pI }), t && h.jsx("div", { className: "ExcButton__icon", "aria-hidden": !0, children: t }), i !== "icon" && (e ?? a)] }) });
}), QW = 2e3, eV = () => {
  let [e, t] = re(null), n = ie(0), a = () => {
    clearTimeout(n.current), t("success"), n.current = window.setTimeout(() => {
      t(null);
    }, QW);
  }, i = Te(() => {
    t(null);
  }, []);
  return { copyStatus: e, resetCopyStatus: i, onCopy: a };
}, tV = "filter" in document.createElement("canvas").getContext("2d"), nV = () => h.jsxs("div", { children: [h.jsx("h3", { children: C("canvasError.cannotShowPreview") }), h.jsx("p", { children: h.jsx("span", { children: C("canvasError.canvasTooBig") }) }), h.jsxs("em", { children: ["(", C("canvasError.canvasTooBigTip"), ")"] })] }), aV = ({ appStateSnapshot: e, elementsSnapshot: t, files: n, actionManager: a, onExportImage: i, name: r }) => {
  let l = Dt(t, e), [s, c] = re(r), [d, o] = re(l), [u, f] = re(e.exportBackground), [p, U] = re(e.exportWithDarkMode), [m, g] = re(e.exportEmbedScene), [b, v] = re(e.exportScale), x = ie(null), [y, E] = re(null), { onCopy: S, copyStatus: w, resetCopyStatus: M } = eV();
  Q(() => {
    M();
  }, [s, u, p, b, m, M]);
  let { exportedElements: I, exportingFrame: T } = kh(t, e, d);
  return Q(() => {
    let _ = x.current;
    if (!_) return;
    let A = _.offsetWidth, D = _.offsetHeight;
    A && Ip({ elements: I, appState: { ...e, name: s, exportBackground: u, exportWithDarkMode: p, exportScale: b, exportEmbedScene: m }, files: n, exportPadding: Es, maxWidthOrHeight: Math.max(A, D), exportingFrame: T }).then((P) => (E(null), Qo(P).then(() => {
      _.replaceChildren(P);
    }).catch((N) => {
      throw N.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : N;
    }))).catch((P) => {
      console.error(P), E(P);
    });
  }, [e, n, I, T, s, u, p, b, m]), h.jsxs("div", { className: "ImageExportModal", children: [h.jsx("h3", { children: C("imageExportDialog.header") }), h.jsxs("div", { className: "ImageExportModal__preview", children: [h.jsx("div", { className: "ImageExportModal__preview__canvas", ref: x, children: y && h.jsx(nV, {}) }), h.jsx("div", { className: "ImageExportModal__preview__filename", children: !ml && h.jsx("input", { type: "text", className: "TextInput", value: s, style: { width: "30ch" }, onChange: (_) => {
    c(_.target.value), a.executeAction(KH, "ui", _.target.value);
  } }) })] }), h.jsxs("div", { className: "ImageExportModal__settings", children: [h.jsx("h3", { children: C("imageExportDialog.header") }), l && h.jsx(Ys, { label: C("imageExportDialog.label.onlySelected"), name: "exportOnlySelected", children: h.jsx(id, { name: "exportOnlySelected", checked: d, onChange: (_) => {
    o(_);
  } }) }), h.jsx(Ys, { label: C("imageExportDialog.label.withBackground"), name: "exportBackgroundSwitch", children: h.jsx(id, { name: "exportBackgroundSwitch", checked: u, onChange: (_) => {
    f(_), a.executeAction(JH, "ui", _);
  } }) }), tV && h.jsx(Ys, { label: C("imageExportDialog.label.darkMode"), name: "exportDarkModeSwitch", children: h.jsx(id, { name: "exportDarkModeSwitch", checked: p, onChange: (_) => {
    U(_), a.executeAction(QH, "ui", _);
  } }) }), h.jsx(Ys, { label: C("imageExportDialog.label.embedScene"), tooltip: C("imageExportDialog.tooltip.embedScene"), name: "exportEmbedSwitch", children: h.jsx(id, { name: "exportEmbedSwitch", checked: m, onChange: (_) => {
    g(_), a.executeAction(j9, "ui", _);
  } }) }), h.jsx(Ys, { label: C("imageExportDialog.label.scale"), name: "exportScale", children: h.jsx(ov, { name: "exportScale", value: b, onChange: (_) => {
    v(_), a.executeAction(qH, "ui", _);
  }, choices: N0.map((_) => ({ value: _, label: `${_}` })) }) }), h.jsxs("div", { className: "ImageExportModal__settings__buttons", children: [h.jsx(Io, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.exportToPng"), onClick: () => i(Yh.png, I, { exportingFrame: T }), icon: gm, children: C("imageExportDialog.button.exportToPng") }), h.jsx(Io, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.exportToSvg"), onClick: () => i(Yh.svg, I, { exportingFrame: T }), icon: gm, children: C("imageExportDialog.button.exportToSvg") }), (Cp || Oo) && h.jsx(Io, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.copyPngToClipboard"), status: w, onClick: async () => {
    await i(Yh.clipboard, I, { exportingFrame: T }), S();
  }, icon: Z0, children: C("imageExportDialog.button.copyPngToClipboard") })] })] })] });
}, Ys = ({ label: e, children: t, tooltip: n, name: a }) => h.jsxs("div", { className: "ImageExportModal__settings__setting", title: e, children: [h.jsxs("label", { htmlFor: a, className: "ImageExportModal__settings__setting__label", children: [e, n && h.jsx(fl, { label: n, long: !0, children: fI })] }), h.jsx("div", { className: "ImageExportModal__settings__setting__content", children: t })] }), iV = ({ elements: e, appState: t, files: n, actionManager: a, onExportImage: i, onCloseRequest: r, name: l }) => {
  let [{ appStateSnapshot: s, elementsSnapshot: c }] = re(() => ({ appStateSnapshot: yi(t), elementsSnapshot: yi(e) }));
  return h.jsx(ka, { onCloseRequest: r, size: "wide", title: !1, children: h.jsx(aV, { elementsSnapshot: c, appStateSnapshot: s, files: n, actionManager: a, onExportImage: i, name: l }) });
}, cv = ({ children: e, side: t, className: n }) => h.jsx("div", { className: ne("FixedSideContainer", `FixedSideContainer_side_${t}`, n), children: e }), ql = 100, Jl = 100, e5 = (e) => {
  switch (e) {
    case L.ARROW_UP:
      return "up";
    case L.ARROW_DOWN:
      return "down";
    case L.ARROW_RIGHT:
      return "right";
    case L.ARROW_LEFT:
      return "left";
    default:
      return "right";
  }
}, dv = (e, t, n, a) => {
  let i = [...n.values()].reduce((r, l) => {
    var c;
    let s;
    if (ee(l) && (s = l[e === "predecessors" ? "startBinding" : "endBinding"]) && ((c = l[e === "predecessors" ? "endBinding" : "startBinding"]) == null ? void 0 : c.elementId) === t.id) {
      let d = n.get(s.elementId);
      if (!d) return r;
      rn(xa(d), "not an ExcalidrawBindableElement");
      let o = e === "predecessors" ? l.points[l.points.length - 1] : [0, 0], u = t7(t, Fa(t), [o[0] + l.x, o[1] + l.y]);
      r.push({ relative: d, heading: u });
    }
    return r;
  }, []);
  switch (a) {
    case "up":
      return i.filter((r) => vt(r.heading, yn)).map((r) => r.relative);
    case "down":
      return i.filter((r) => vt(r.heading, Xt)).map((r) => r.relative);
    case "right":
      return i.filter((r) => vt(r.heading, gt)).map((r) => r.relative);
    case "left":
      return i.filter((r) => vt(r.heading, xn)).map((r) => r.relative);
  }
}, f0 = (e, t, n) => dv("successors", e, t, n), p0 = (e, t, n) => dv("predecessors", e, t, n), rV = (e, t, n) => {
  let a = Jl + e.width;
  if (n === "up" || n === "down") {
    let s = ql + e.height, c = e.x, d = e.x + e.width;
    if (t.every((o) => o.x + o.width < c || o.x > d)) return { x: 0, y: s * (n === "up" ? -1 : 1) };
  } else if (n === "right" || n === "left") {
    let s = e.y, c = e.y + e.height;
    if (t.every((d) => d.y + d.height < s || d.y > c)) return { x: (Jl + e.width) * (n === "left" ? -1 : 1), y: 0 };
  }
  if (n === "up" || n === "down") {
    let s = ql + e.height, c = (t.length, s), d = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * a : t.length / 2 * a * -1;
    return n === "up" ? { x: d, y: c * -1 } : { x: d, y: c };
  }
  let i = ql + e.height, r = (t.length, Jl + e.width), l = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * i : t.length / 2 * i * -1;
  return n === "left" ? { x: r * -1, y: l } : { x: r, y: l };
}, lV = (e, t, n, a) => {
  let i = f0(e, t, a), r = p0(e, t, a), l = rV(e, [...i, ...r], a), s = Qa({ type: e.type, x: e.x + l.x, y: e.y + l.y, width: e.width, height: e.height, roundness: e.roundness, roughness: e.roughness, backgroundColor: e.backgroundColor, strokeColor: e.strokeColor, strokeWidth: e.strokeWidth, opacity: e.opacity, fillStyle: e.fillStyle, strokeStyle: e.strokeStyle });
  rn(Wu(s), "not an ExcalidrawFlowchartNodeElement");
  let c = uv(e, s, t, a, n);
  return { nextNode: s, bindingArrow: c };
}, sV = (e, t, n, a, i) => {
  let r = [];
  for (let l = 0; l < i; l++) {
    let s, c;
    if (a === "left" || a === "right") {
      let u = ql * (i - 1) + i * e.height, f = e.y + e.height / 2 - u / 2, p = Jl + e.width;
      a === "left" && (p *= -1), s = e.x + p;
      let U = (ql + e.height) * l;
      c = f + U;
    } else {
      let u = Jl * (i - 1) + i * e.width, f = e.x + e.width / 2 - u / 2, p = ql + e.height;
      a === "up" && (p *= -1), c = e.y + p;
      let U = (Jl + e.width) * l;
      s = f + U;
    }
    let d = Qa({ type: e.type, x: s, y: c, width: e.width, height: e.height, roundness: e.roundness, roughness: e.roughness, backgroundColor: e.backgroundColor, strokeColor: e.strokeColor, strokeWidth: e.strokeWidth, opacity: e.opacity, fillStyle: e.fillStyle, strokeStyle: e.strokeStyle });
    rn(Wu(d), "not an ExcalidrawFlowchartNodeElement");
    let o = uv(e, d, t, a, n);
    r.push(d), r.push(o);
  }
  return r;
}, uv = (e, t, n, a, i) => {
  let r, l;
  switch (a) {
    case "up": {
      r = e.x + e.width / 2, l = e.y - 6;
      break;
    }
    case "down": {
      r = e.x + e.width / 2, l = e.y + e.height + 6;
      break;
    }
    case "right": {
      r = e.x + e.width + 6, l = e.y + e.height / 2;
      break;
    }
    case "left": {
      r = e.x - 6, l = e.y + e.height / 2;
      break;
    }
  }
  let s, c;
  switch (a) {
    case "up": {
      s = t.x + t.width / 2 - r, c = t.y + t.height - l + 6;
      break;
    }
    case "down": {
      s = t.x + t.width / 2 - r, c = t.y - l - 6;
      break;
    }
    case "right": {
      s = t.x - r - 6, c = t.y - l + t.height / 2;
      break;
    }
    case "left": {
      s = t.x + t.width - r + 6, c = t.y - l + t.height / 2;
      break;
    }
  }
  let d = op({ type: "arrow", x: r, y: l, startArrowhead: null, endArrowhead: i.currentItemEndArrowhead, strokeColor: e.strokeColor, strokeStyle: e.strokeStyle, strokeWidth: e.strokeWidth, opacity: e.opacity, roughness: e.roughness, points: [k(0, 0), k(s, c)], elbowed: !0 });
  qa(d, e, "start", n), qa(d, t, "end", n);
  let o = /* @__PURE__ */ new Map();
  o.set(e.id, e), o.set(t.id, t), o.set(d.id, d), J.movePoints(d, [{ index: 1, point: d.points[1] }]);
  let u = bp(d, Kn(new Map([...n.entries(), [e.id, e], [t.id, t], [d.id, d]])), { points: d.points });
  return { ...d, ...u };
}, oV = class {
  constructor() {
    j(this, "isExploring", !1), j(this, "sameLevelNodes", []), j(this, "sameLevelIndex", 0), j(this, "direction", null), j(this, "visitedNodes", /* @__PURE__ */ new Set());
  }
  clear() {
    this.isExploring = !1, this.sameLevelNodes = [], this.sameLevelIndex = 0, this.direction = null, this.visitedNodes.clear();
  }
  exploreByDirection(e, t, n) {
    if (!xa(e)) return null;
    if (n !== this.direction && this.clear(), this.visitedNodes.has(e.id) || this.visitedNodes.add(e.id), this.isExploring && n === this.direction && this.sameLevelNodes.length > 1) return this.sameLevelIndex = (this.sameLevelIndex + 1) % this.sameLevelNodes.length, this.sameLevelNodes[this.sameLevelIndex].id;
    let a = [...f0(e, t, n), ...p0(e, t, n)];
    if (a.length > 0) return this.sameLevelIndex = 0, this.isExploring = !0, this.sameLevelNodes = a, this.direction = n, this.visitedNodes.add(a[0].id), a[0].id;
    if (n === this.direction || !this.isExploring) {
      this.isExploring || this.visitedNodes.add(e.id);
      let i = ["up", "right", "down", "left"].filter((r) => r !== n).map((r) => [...f0(e, t, r), ...p0(e, t, r)]).flat().filter((r) => !this.visitedNodes.has(r.id));
      for (let r of i) if (!this.visitedNodes.has(r.id)) return this.visitedNodes.add(r.id), this.isExploring = !0, this.direction = n, r.id;
    }
    return null;
  }
}, cV = class {
  constructor() {
    j(this, "isCreatingChart", !1), j(this, "numberOfNodes", 0), j(this, "direction", "right"), j(this, "pendingNodes", null);
  }
  createNodes(e, t, n, a) {
    if (a !== this.direction) {
      let { nextNode: i, bindingArrow: r } = lV(e, t, n, a);
      this.numberOfNodes = 1, this.isCreatingChart = !0, this.direction = a, this.pendingNodes = [i, r];
    } else {
      this.numberOfNodes += 1;
      let i = sV(e, t, n, a, this.numberOfNodes);
      this.isCreatingChart = !0, this.direction = a, this.pendingNodes = i;
    }
    if (e.frameId) {
      let i = t.get(e.frameId);
      rn(i && a8(i), "not an ExcalidrawFrameElement"), i && this.pendingNodes.every((r) => xc([r], i, t) || Ur(r, i, t)) && (this.pendingNodes = this.pendingNodes.map((r) => W(r, { frameId: e.frameId }, !1)));
    }
  }
  clear() {
    this.isCreatingChart = !1, this.pendingNodes = null, this.direction = null, this.numberOfNodes = 0;
  }
}, dV = (e, t) => {
  var n, a;
  for (let [, i] of t) if (i.type === "arrow" && (((n = i.startBinding) == null ? void 0 : n.elementId) === e.id || ((a = i.endBinding) == null ? void 0 : a.elementId) === e.id)) return !0;
  return !1;
}, uV = ({ appState: e, isMobile: t, device: n, app: a }) => {
  var o, u;
  let { activeTool: i, isResizing: r, isRotating: l, lastPointerDownWith: s } = e, c = e.multiElement !== null;
  if (((o = e.openSidebar) == null ? void 0 : o.name) === Ua.name && e.openSidebar.tab === Gl && ((u = e.searchMatches) != null && u.length)) return C("hints.dismissSearch");
  if (e.openSidebar && !n.editor.canFitSidebar) return null;
  if (Na(e)) return C("hints.eraserRevert");
  if (i.type === "arrow" || i.type === "line") return c ? C("hints.linearElementMulti") : i.type === "arrow" ? C("hints.arrowTool", { arrowShortcut: X("A") }) : C("hints.linearElement");
  if (i.type === "freedraw") return C("hints.freeDraw");
  if (i.type === "text") return C("hints.text");
  if (i.type === "embeddable") return C("hints.embeddable");
  if (e.activeTool.type === "image" && e.pendingImageElementId) return C("hints.placeImage");
  let d = a.scene.getSelectedElements(e);
  if (r && s === "mouse" && d.length === 1) {
    let f = d[0];
    return pe(f) && f.points.length === 2 ? C("hints.lockAngle") : Re(f) ? C("hints.resizeImage") : C("hints.resize");
  }
  if (l && s === "mouse") return C("hints.rotate");
  if (d.length === 1 && q(d[0])) return C("hints.text_selected");
  if (e.editingTextElement) return C("hints.text_editing");
  if (e.croppingElementId) return C("hints.leaveCropEditor");
  if (d.length === 1 && Re(d[0])) return C("hints.enterCropEditor");
  if (i.type === "selection") {
    if (e.selectionElement && !d.length && !e.editingTextElement && !e.editingLinearElement) return C("hints.deepBoxSelect");
    if (Zo(a) && e.selectedElementsAreBeingDragged) return C("hints.disableSnapping");
    if (!d.length && !t) return C("hints.canvasPanning");
    if (d.length === 1) {
      if (pe(d[0])) return e.editingLinearElement ? e.editingLinearElement.selectedPointsIndices ? C("hints.lineEditor_pointSelected") : C("hints.lineEditor_nothingSelected") : C("hints.lineEditor_info");
      if (!e.newElement && !e.selectedElementsAreBeingDragged && Gr(d[0])) return Wu(d[0]) ? dV(d[0], a.scene.getNonDeletedElementsMap()) ? [C("hints.bindTextToElement"), C("hints.createFlowchart")] : [C("hints.bindTextToElement"), C("hints.createFlowchart")] : C("hints.bindTextToElement");
    }
  }
  return null;
}, hv = ({ appState: e, isMobile: t, device: n, app: a }) => {
  let i = uV({ appState: e, isMobile: t, device: n, app: a });
  if (!i) return null;
  let r = Array.isArray(i) ? i.map((l) => X(l).replace(/\. ?$/, "")).join(". ") : X(i);
  return h.jsx("div", { className: "HintViewer", children: h.jsx("span", { children: r }) });
}, hV = "medium", t5 = { CHECKED: V0, UNCHECKED: Vu }, fv = (e) => h.jsxs("label", { className: ne("ToolIcon ToolIcon__lock", `ToolIcon_size_${hV}`, { "is-mobile": e.isMobile }), title: `${e.title}  Q`, children: [h.jsx("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title, "data-testid": "toolbar-lock" }), h.jsx("div", { className: "ToolIcon__icon", children: e.checked ? t5.CHECKED : t5.UNCHECKED })] }), ic = ({ heading: e, children: t, ...n }) => {
  let { id: a } = li(), i = h.jsx("h2", { className: "visually-hidden", id: `${a}-${e}-title`, children: C(`headings.${e}`) });
  return h.jsx("section", { ...n, "aria-labelledby": `${a}-${e}-title`, children: typeof t == "function" ? t(i) : h.jsxs(h.Fragment, { children: [i, t] }) });
}, $a = 4, ar = 6, fV = "rgba(0,0,0,0.3)", pV = (e, t, n, a) => {
  if (!e.length) return { horizontal: null, vertical: null };
  let [i, r, l, s] = ze(e), c = t / a.zoom.value, d = n / a.zoom.value, o = t - c, u = n - d, f = { top: parseInt(Bc("sat")) || 0, bottom: parseInt(Bc("sab")) || 0, left: parseInt(Bc("sal")) || 0, right: parseInt(Bc("sar")) || 0 }, p = nc().rtl, U = -a.scrollX + o / 2 + f.left, m = -a.scrollY + u / 2 + f.top, g = U + c - f.right, b = m + d - f.bottom, v = Math.min(i, U), x = Math.min(r, m), y = Math.max(l, g), E = Math.max(s, b);
  return { horizontal: U === v && g === y ? null : { x: Math.max(f.left, $a) + (U - v) / (y - v) * t, y: n - ar - Math.max($a, f.bottom), width: (g - U) / (y - v) * t - Math.max($a * 2, f.left + f.right), height: ar }, vertical: m === x && b === E ? null : { x: p ? Math.max(f.left, $a) : t - ar - Math.max(f.right, $a), y: (m - x) / (E - x) * n + Math.max(f.top, $a), width: ar, height: (b - m) / (E - x) * n - Math.max($a * 2, f.top + f.bottom) } };
}, n5 = (e, t, n) => {
  let [a, i] = [e.horizontal, e.vertical].map((r) => r != null && r.x <= t && t <= r.x + r.width && r.y <= n && n <= r.y + r.height);
  return { isOverEither: a || i, isOverHorizontal: a, isOverVertical: i };
}, UV = "medium", pv = (e) => e.penDetected ? h.jsxs("label", { className: ne("ToolIcon ToolIcon__penMode", `ToolIcon_size_${UV}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [h.jsx("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title }), h.jsx("div", { className: "ToolIcon__icon", children: hC })] }) : null, Uv = (e) => h.jsx(Ce, { className: ne("Shape", { fillable: !1 }), type: "radio", icon: x8, name: "editor-current-shape", checked: e.checked, title: `${e.title}  H`, keyBindingLabel: e.isMobile ? void 0 : L.H.toLocaleUpperCase(), "aria-label": `${e.title}  H`, "aria-keyshortcuts": L.H, "data-testid": "toolbar-hand", onChange: () => {
  var t;
  return (t = e.onChange) == null ? void 0 : t.call(e);
} }), mV = ({ appState: e, elements: t, actionManager: n, setAppState: a, onLockToggle: i, onHandToolToggle: r, onPenModeToggle: l, renderTopRightUI: s, renderCustomStats: c, renderSidebars: d, device: o, renderWelcomeScreen: u, UIOptions: f, app: p }) => {
  var x, y;
  let { WelcomeScreenCenterTunnel: U, MainMenuTunnel: m, DefaultSidebarTriggerTunnel: g } = Nn(), b = () => h.jsxs(cv, { side: "top", className: "App-top-bar", children: [u && h.jsx(U.Out, {}), h.jsx(ic, { heading: "shapes", children: (E) => {
    var S;
    return h.jsx(Xn.Col, { gap: 4, align: "center", children: h.jsxs(Xn.Row, { gap: 1, className: "App-toolbar-container", children: [h.jsxs(ba, { padding: 1, className: "App-toolbar App-toolbar--mobile", children: [E, h.jsx(Xn.Row, { gap: 1, children: h.jsx(tv, { appState: e, activeTool: e.activeTool, UIOptions: f, app: p }) })] }), s && s(!0, e), h.jsxs("div", { className: "mobile-misc-tools-container", children: [!e.viewModeEnabled && ((S = e.openDialog) == null ? void 0 : S.name) !== "elementLinkSelector" && h.jsx(g.Out, {}), h.jsx(pv, { checked: e.penMode, onChange: () => l(null), title: C("toolBar.penMode"), isMobile: !0, penDetected: e.penDetected }), h.jsx(fv, { checked: e.activeTool.locked, onChange: i, title: C("toolBar.lock"), isMobile: !0 }), h.jsx(Uv, { checked: ns(e), onChange: () => r(), title: C("toolBar.hand"), isMobile: !0 })] })] }) });
  } }), h.jsx(hv, { appState: e, isMobile: !0, device: o, app: p })] }), v = () => {
    var E;
    return e.viewModeEnabled || ((E = e.openDialog) == null ? void 0 : E.name) === "elementLinkSelector" ? h.jsx("div", { className: "App-toolbar-content", children: h.jsx(m.Out, {}) }) : h.jsxs("div", { className: "App-toolbar-content", children: [h.jsx(m.Out, {}), n.renderAction("toggleEditMenu"), n.renderAction(e.multiElement ? "finalize" : "duplicateSelection"), n.renderAction("deleteSelectedElements"), h.jsxs("div", { children: [n.renderAction("undo"), n.renderAction("redo")] })] });
  };
  return h.jsxs(h.Fragment, { children: [d(), !e.viewModeEnabled && ((x = e.openDialog) == null ? void 0 : x.name) !== "elementLinkSelector" && b(), h.jsx("div", { className: "App-bottom-bar", style: { marginBottom: ar + $a * 2, marginLeft: ar + $a * 2, marginRight: ar + $a * 2 }, children: h.jsxs(ba, { padding: 0, children: [e.openMenu === "shape" && !e.viewModeEnabled && ((y = e.openDialog) == null ? void 0 : y.name) !== "elementLinkSelector" && zp(e, t) ? h.jsx(ic, { className: "App-mobile-menu", heading: "selectedShapeActions", children: h.jsx(ev, { appState: e, elementsMap: p.scene.getNonDeletedElementsMap(), renderAction: n.renderAction, app: p }) }) : null, h.jsxs("footer", { className: "App-toolbar", children: [v(), e.scrolledOutside && !e.openMenu && !e.openSidebar && h.jsx("button", { type: "button", className: "scroll-back-to-content", onClick: () => {
    a((E) => ({ ...Go(t, E) }));
  }, children: C("buttons.scrollBackToContent") })] })] }) })] });
}, a5 = (e) => {
  let t = ie(null), [n, a] = re(null);
  return Mn(() => {
    if (!e.spreadsheet) return;
    let i = CP(e.chartType, e.spreadsheet, 0, 0);
    a(i);
    let r, l = t.current;
    return (async () => {
      var s;
      return r = await Up(i, { exportBackground: !1, viewBackgroundColor: Wt.white }, null, { skipInliningFonts: !0 }), (s = r.querySelector(".style-fonts")) == null || s.remove(), l.replaceChildren(), l.appendChild(r), e.selected && l.parentNode.focus();
    })(), () => {
      l.replaceChildren();
    };
  }, [e.spreadsheet, e.chartType, e.selected]), h.jsx("button", { type: "button", className: "ChartPreview", onClick: () => {
    n && e.onClick(e.chartType, n);
  }, children: h.jsx("div", { ref: t }) });
}, gV = ({ setAppState: e, appState: t, onClose: n }) => {
  let { onInsertElements: a } = ri(), i = Y.useCallback(() => {
    n && n();
  }, [n]), r = (l, s) => {
    a(s), tt("paste", "chart", l), e({ currentChartType: l, pasteDialog: { shown: !1, data: null } });
  };
  return h.jsx(ka, { size: "small", onCloseRequest: i, title: C("labels.pasteCharts"), className: "PasteChartDialog", autofocus: !1, children: h.jsxs("div", { className: "container", children: [h.jsx(a5, { chartType: "bar", spreadsheet: t.pasteDialog.data, selected: t.currentChartType === "bar", onClick: r }), h.jsx(a5, { chartType: "line", spreadsheet: t.pasteDialog.data, selected: t.currentChartType === "line", onClick: r })] }) });
}, bV = () => h.jsxs("div", { className: "HelpDialog__header", children: [h.jsxs("a", { className: "HelpDialog__btn", href: "https://docs.excalidraw.com", target: "_blank", rel: "noopener noreferrer", children: [h.jsx("div", { className: "HelpDialog__link-icon", children: nm }), C("helpDialog.documentation")] }), h.jsxs("a", { className: "HelpDialog__btn", href: "https://plus.excalidraw.com/blog", target: "_blank", rel: "noopener noreferrer", children: [h.jsx("div", { className: "HelpDialog__link-icon", children: nm }), C("helpDialog.blog")] }), h.jsxs("a", { className: "HelpDialog__btn", href: "https://github.com/excalidraw/excalidraw/issues", target: "_blank", rel: "noopener noreferrer", children: [h.jsx("div", { className: "HelpDialog__link-icon", children: f8 }), C("helpDialog.github")] }), h.jsxs("a", { className: "HelpDialog__btn", href: "https://youtube.com/@excalidraw", target: "_blank", rel: "noopener noreferrer", children: [h.jsx("div", { className: "HelpDialog__link-icon", children: DI }), "YouTube"] })] }), vV = (e) => h.jsxs(h.Fragment, { children: [h.jsx("h3", { children: e.title }), h.jsx("div", { className: "HelpDialog__islands-container", children: e.children })] }), Of = (e) => h.jsxs("div", { className: `HelpDialog__island ${e.className}`, children: [h.jsx("h4", { className: "HelpDialog__island-title", children: e.caption }), h.jsx("div", { className: "HelpDialog__island-content", children: e.children })] });
function* xV(e, t) {
  let n = !0;
  for (let a of e) n || (yield t), n = !1, yield a;
}
var yV = (e) => e.replace(/\b[a-z]\b/, (t) => t.toUpperCase()), te = ({ label: e, shortcuts: t, isOr: n = !0 }) => {
  let a = t.map((i) => (i.endsWith("++") ? [...i.slice(0, -2).split("+"), "+"] : i.split("+")).map((r) => h.jsx(wV, { children: yV(r) }, r)));
  return h.jsxs("div", { className: "HelpDialog__shortcut", children: [h.jsx("div", { children: e }), h.jsx("div", { className: "HelpDialog__key-container", children: [...xV(a, n ? C("helpDialog.or") : null)] })] });
}, wV = (e) => h.jsx("kbd", { className: "HelpDialog__key", ...e }), EV = ({ onClose: e }) => {
  let t = Y.useCallback(() => {
    e && e();
  }, [e]);
  return h.jsx(h.Fragment, { children: h.jsxs(ka, { onCloseRequest: t, title: C("helpDialog.title"), className: "HelpDialog", children: [h.jsx(bV, {}), h.jsxs(vV, { title: C("helpDialog.shortcuts"), children: [h.jsxs(Of, { className: "HelpDialog__island--tools", caption: C("helpDialog.tools"), children: [h.jsx(te, { label: C("toolBar.hand"), shortcuts: [L.H] }), h.jsx(te, { label: C("toolBar.selection"), shortcuts: [L.V, L[1]] }), h.jsx(te, { label: C("toolBar.rectangle"), shortcuts: [L.R, L[2]] }), h.jsx(te, { label: C("toolBar.diamond"), shortcuts: [L.D, L[3]] }), h.jsx(te, { label: C("toolBar.ellipse"), shortcuts: [L.O, L[4]] }), h.jsx(te, { label: C("toolBar.arrow"), shortcuts: [L.A, L[5]] }), h.jsx(te, { label: C("toolBar.line"), shortcuts: [L.L, L[6]] }), h.jsx(te, { label: C("toolBar.freedraw"), shortcuts: [L.P, L[7]] }), h.jsx(te, { label: C("toolBar.text"), shortcuts: [L.T, L[8]] }), h.jsx(te, { label: C("toolBar.image"), shortcuts: [L[9]] }), h.jsx(te, { label: C("toolBar.eraser"), shortcuts: [L.E, L[0]] }), h.jsx(te, { label: C("toolBar.frame"), shortcuts: [L.F] }), h.jsx(te, { label: C("toolBar.laser"), shortcuts: [L.K] }), h.jsx(te, { label: C("labels.eyeDropper"), shortcuts: [L.I, "Shift+S", "Shift+G"] }), h.jsx(te, { label: C("helpDialog.editLineArrowPoints"), shortcuts: [X("CtrlOrCmd+Enter")] }), h.jsx(te, { label: C("helpDialog.editText"), shortcuts: [X("Enter")] }), h.jsx(te, { label: C("helpDialog.textNewLine"), shortcuts: [X("Enter"), X("Shift+Enter")] }), h.jsx(te, { label: C("helpDialog.textFinish"), shortcuts: [X("Esc"), X("CtrlOrCmd+Enter")] }), h.jsx(te, { label: C("helpDialog.curvedArrow"), shortcuts: ["A", C("helpDialog.click"), C("helpDialog.click"), C("helpDialog.click")], isOr: !1 }), h.jsx(te, { label: C("helpDialog.curvedLine"), shortcuts: ["L", C("helpDialog.click"), C("helpDialog.click"), C("helpDialog.click")], isOr: !1 }), h.jsx(te, { label: C("helpDialog.cropStart"), shortcuts: [C("helpDialog.doubleClick"), X("Enter")], isOr: !0 }), h.jsx(te, { label: C("helpDialog.cropFinish"), shortcuts: [X("Enter"), X("Escape")], isOr: !0 }), h.jsx(te, { label: C("toolBar.lock"), shortcuts: [L.Q] }), h.jsx(te, { label: C("helpDialog.preventBinding"), shortcuts: [X("CtrlOrCmd")] }), h.jsx(te, { label: C("toolBar.link"), shortcuts: [X("CtrlOrCmd+K")] })] }), h.jsxs(Of, { className: "HelpDialog__island--view", caption: C("helpDialog.view"), children: [h.jsx(te, { label: C("buttons.zoomIn"), shortcuts: [X("CtrlOrCmd++")] }), h.jsx(te, { label: C("buttons.zoomOut"), shortcuts: [X("CtrlOrCmd+-")] }), h.jsx(te, { label: C("buttons.resetZoom"), shortcuts: [X("CtrlOrCmd+0")] }), h.jsx(te, { label: C("helpDialog.zoomToFit"), shortcuts: ["Shift+1"] }), h.jsx(te, { label: C("helpDialog.zoomToSelection"), shortcuts: ["Shift+2"] }), h.jsx(te, { label: C("helpDialog.movePageUpDown"), shortcuts: ["PgUp/PgDn"] }), h.jsx(te, { label: C("helpDialog.movePageLeftRight"), shortcuts: ["Shift+PgUp/PgDn"] }), h.jsx(te, { label: C("buttons.zenMode"), shortcuts: [X("Alt+Z")] }), h.jsx(te, { label: C("buttons.objectsSnapMode"), shortcuts: [X("Alt+S")] }), h.jsx(te, { label: C("labels.toggleGrid"), shortcuts: [X("CtrlOrCmd+'")] }), h.jsx(te, { label: C("labels.viewMode"), shortcuts: [X("Alt+R")] }), h.jsx(te, { label: C("labels.toggleTheme"), shortcuts: [X("Alt+Shift+D")] }), h.jsx(te, { label: C("stats.fullTitle"), shortcuts: [X("Alt+/")] }), h.jsx(te, { label: C("search.title"), shortcuts: [an("searchMenu")] }), h.jsx(te, { label: C("commandPalette.title"), shortcuts: Oo ? [an("commandPalette")] : [an("commandPalette"), an("commandPalette", 1)] })] }), h.jsxs(Of, { className: "HelpDialog__island--editor", caption: C("helpDialog.editor"), children: [h.jsx(te, { label: C("helpDialog.createFlowchart"), shortcuts: [X("CtrlOrCmd+Arrow Key")], isOr: !0 }), h.jsx(te, { label: C("helpDialog.navigateFlowchart"), shortcuts: [X("Alt+Arrow Key")], isOr: !0 }), h.jsx(te, { label: C("labels.moveCanvas"), shortcuts: [X(`Space+${C("helpDialog.drag")}`), X(`Wheel+${C("helpDialog.drag")}`)], isOr: !0 }), h.jsx(te, { label: C("buttons.clearReset"), shortcuts: [X("CtrlOrCmd+Delete")] }), h.jsx(te, { label: C("labels.delete"), shortcuts: [X("Delete")] }), h.jsx(te, { label: C("labels.cut"), shortcuts: [X("CtrlOrCmd+X")] }), h.jsx(te, { label: C("labels.copy"), shortcuts: [X("CtrlOrCmd+C")] }), h.jsx(te, { label: C("labels.paste"), shortcuts: [X("CtrlOrCmd+V")] }), h.jsx(te, { label: C("labels.pasteAsPlaintext"), shortcuts: [X("CtrlOrCmd+Shift+V")] }), h.jsx(te, { label: C("labels.selectAll"), shortcuts: [X("CtrlOrCmd+A")] }), h.jsx(te, { label: C("labels.multiSelect"), shortcuts: [X(`Shift+${C("helpDialog.click")}`)] }), h.jsx(te, { label: C("helpDialog.deepSelect"), shortcuts: [X(`CtrlOrCmd+${C("helpDialog.click")}`)] }), h.jsx(te, { label: C("helpDialog.deepBoxSelect"), shortcuts: [X(`CtrlOrCmd+${C("helpDialog.drag")}`)] }), (Cp || Oo) && h.jsx(te, { label: C("labels.copyAsPng"), shortcuts: [X("Shift+Alt+C")] }), h.jsx(te, { label: C("labels.copyStyles"), shortcuts: [X("CtrlOrCmd+Alt+C")] }), h.jsx(te, { label: C("labels.pasteStyles"), shortcuts: [X("CtrlOrCmd+Alt+V")] }), h.jsx(te, { label: C("labels.sendToBack"), shortcuts: [X(Za ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")] }), h.jsx(te, { label: C("labels.bringToFront"), shortcuts: [X(Za ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")] }), h.jsx(te, { label: C("labels.sendBackward"), shortcuts: [X("CtrlOrCmd+[")] }), h.jsx(te, { label: C("labels.bringForward"), shortcuts: [X("CtrlOrCmd+]")] }), h.jsx(te, { label: C("labels.alignTop"), shortcuts: [X("CtrlOrCmd+Shift+Up")] }), h.jsx(te, { label: C("labels.alignBottom"), shortcuts: [X("CtrlOrCmd+Shift+Down")] }), h.jsx(te, { label: C("labels.alignLeft"), shortcuts: [X("CtrlOrCmd+Shift+Left")] }), h.jsx(te, { label: C("labels.alignRight"), shortcuts: [X("CtrlOrCmd+Shift+Right")] }), h.jsx(te, { label: C("labels.duplicateSelection"), shortcuts: [X("CtrlOrCmd+D"), X(`Alt+${C("helpDialog.drag")}`)] }), h.jsx(te, { label: C("helpDialog.toggleElementLock"), shortcuts: [X("CtrlOrCmd+Shift+L")] }), h.jsx(te, { label: C("buttons.undo"), shortcuts: [X("CtrlOrCmd+Z")] }), h.jsx(te, { label: C("buttons.redo"), shortcuts: Nb ? [X("CtrlOrCmd+Y"), X("CtrlOrCmd+Shift+Z")] : [X("CtrlOrCmd+Shift+Z")] }), h.jsx(te, { label: C("labels.group"), shortcuts: [X("CtrlOrCmd+G")] }), h.jsx(te, { label: C("labels.ungroup"), shortcuts: [X("CtrlOrCmd+Shift+G")] }), h.jsx(te, { label: C("labels.flipHorizontal"), shortcuts: [X("Shift+H")] }), h.jsx(te, { label: C("labels.flipVertical"), shortcuts: [X("Shift+V")] }), h.jsx(te, { label: C("labels.showStroke"), shortcuts: [X("S")] }), h.jsx(te, { label: C("labels.showBackground"), shortcuts: [X("G")] }), h.jsx(te, { label: C("labels.showFonts"), shortcuts: [X("Shift+F")] }), h.jsx(te, { label: C("labels.decreaseFontSize"), shortcuts: [X("CtrlOrCmd+Shift+<")] }), h.jsx(te, { label: C("labels.increaseFontSize"), shortcuts: [X("CtrlOrCmd+Shift+>")] })] })] })] }) });
}, SV = 4, kV = 8, MV = ({ shouldWrap: e, children: t, username: n }) => e ? h.jsx(fl, { label: n || "Unknown user", children: t }) : h.jsx(h.Fragment, { children: t }), $f = ({ actionManager: e, collaborator: t, socketId: n, withName: a = !1, shouldWrapWithTooltip: i = !1, isBeingFollowed: r }) => {
  let l = { socketId: n, collaborator: t, withName: a, isBeingFollowed: r }, s = e.renderAction("goToCollaborator", l);
  return h.jsx(MV, { username: t.username, shouldWrap: i, children: s }, n);
}, CV = ["avatarUrl", "id", "socketId", "username", "isInCall", "isSpeaking", "isMuted"], mv = Y.memo(({ className: e, mobile: t, collaborators: n, userToFollow: a }) => {
  let i = In(), r = /* @__PURE__ */ new Map();
  n.forEach((U, m) => {
    let g = U.id || m;
    r.set(g, { ...U, socketId: m });
  });
  let l = Array.from(r.values()).filter((U) => {
    var m;
    return (m = U.username) == null ? void 0 : m.trim();
  }), [s, c] = Y.useState(""), d = l.filter((U) => {
    var m;
    return (m = U.username) == null ? void 0 : m.toLowerCase().includes(s);
  }), o = Y.useRef(null);
  Mn(() => {
    if (o.current) {
      let U = (g) => {
        let b = Math.max(1, Math.min(8, Math.floor(g / 38)));
        f(b);
      };
      if (U(o.current.clientWidth), !d1) return;
      let m = new ResizeObserver((g) => {
        for (let b of g) {
          let { width: v } = b.contentRect;
          U(v);
        }
      });
      return m.observe(o.current), () => {
        m.disconnect();
      };
    }
  }, []);
  let [u, f] = Y.useState(SV), p = l.slice(0, u - 1).map((U) => $f({ actionManager: i, collaborator: U, socketId: U.socketId, shouldWrapWithTooltip: !0, isBeingFollowed: U.socketId === a }));
  return t ? h.jsx("div", { className: ne("UserList UserList_mobile", e), children: l.map((U) => $f({ actionManager: i, collaborator: U, socketId: U.socketId, shouldWrapWithTooltip: !0, isBeingFollowed: U.socketId === a })) }) : h.jsx("div", { className: "UserList__wrapper", ref: o, children: h.jsxs("div", { className: ne("UserList", e), style: { "--max-avatars": u }, children: [p, l.length > u - 1 && h.jsxs(gh, { children: [h.jsxs(bh, { className: "UserList__more", children: ["+", l.length - u + 1] }), h.jsx(iU, { style: { zIndex: 2, width: "15rem", textAlign: "left" }, align: "end", sideOffset: 10, children: h.jsxs(ba, { padding: 2, children: [l.length >= kV && h.jsx(w9, { placeholder: C("quickSearch.placeholder"), onChange: c }), h.jsx(E9, { className: "dropdown-menu UserList__collaborators", placeholder: C("userList.empty"), children: d.length > 0 ? [h.jsx("div", { className: "hint", children: C("userList.hint.text") }), d.map((U) => $f({ actionManager: i, collaborator: U, socketId: U.socketId, withName: !0, isBeingFollowed: U.socketId === a }))] : [] }), h.jsx(N4, { width: 20, height: 10, style: { fill: "var(--popup-bg-color)", filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)" } })] }) })] })] }) });
}, (e, t) => {
  if (e.collaborators.size !== t.collaborators.size || e.mobile !== t.mobile || e.className !== t.className || e.userToFollow !== t.userToFollow) return !1;
  let n = t.collaborators.keys();
  for (let [a, i] of e.collaborators) {
    let r = t.collaborators.get(a);
    if (!r || a !== n.next().value || !qt(i, r, CV)) return !1;
  }
  return !0;
}), i5 = ({ children: e, color: t }) => h.jsx("div", { className: "Card", style: { "--card-color": t === "primary" ? "var(--color-primary)" : Wt[t][7], "--card-color-darker": t === "primary" ? "var(--color-primary-darker)" : Wt[t][8], "--card-color-darkest": t === "primary" ? "var(--color-primary-darkest)" : Wt[t][9] }, children: e }), IV = ({ elements: e, appState: t, setAppState: n, files: a, actionManager: i, exportOpts: r, canvas: l, onCloseRequest: s }) => {
  let { onExportToBackend: c } = r;
  return h.jsx("div", { className: "ExportDialog ExportDialog--json", children: h.jsxs("div", { className: "ExportDialog-cards", children: [r.saveFileToDisk && h.jsxs(i5, { color: "lime", children: [h.jsx("div", { className: "Card-icon", children: SC }), h.jsx("h2", { children: C("exportDialog.disk_title") }), h.jsxs("div", { className: "Card-details", children: [C("exportDialog.disk_details"), !ml && i.renderAction("changeProjectName")] }), h.jsx(Ce, { className: "Card-button", type: "button", title: C("exportDialog.disk_button"), "aria-label": C("exportDialog.disk_button"), showAriaLabel: !0, onClick: () => {
    i.executeAction(D9, "ui");
  } })] }), c && h.jsxs(i5, { color: "pink", children: [h.jsx("div", { className: "Card-icon", children: b1 }), h.jsx("h2", { children: C("exportDialog.link_title") }), h.jsx("div", { className: "Card-details", children: C("exportDialog.link_details") }), h.jsx(Ce, { className: "Card-button", type: "button", title: C("exportDialog.link_button"), "aria-label": C("exportDialog.link_button"), showAriaLabel: !0, onClick: async () => {
    try {
      tt("export", "link", `ui (${_M()})`), await c(e, t, a), s();
    } catch (d) {
      n({ errorMessage: d.message });
    }
  } })] }), r.renderCustomUI && r.renderCustomUI(e, t, a, l)] }) });
}, TV = ({ elements: e, appState: t, files: n, actionManager: a, exportOpts: i, canvas: r, setAppState: l }) => {
  var c;
  let s = Y.useCallback(() => {
    l({ openDialog: null });
  }, [l]);
  return h.jsx(h.Fragment, { children: ((c = t.openDialog) == null ? void 0 : c.name) === "jsonExport" && h.jsx(ka, { onCloseRequest: s, title: C("buttons.export"), children: h.jsx(IV, { elements: e, appState: t, setAppState: l, files: n, actionManager: a, onCloseRequest: s, exportOpts: i, canvas: r }) }) });
}, _V = (e) => h.jsx("button", { className: "help-icon", onClick: e.onClick, type: "button", title: `${C("helpDialog.title")}  ?`, "aria-label": C("helpDialog.title"), children: G0 }), gv = ({ appState: e, actionManager: t, showExitZenModeBtn: n, renderWelcomeScreen: a }) => {
  let { FooterCenterTunnel: i, WelcomeScreenHelpHintTunnel: r } = Nn(), l = $t(), s = !e.viewModeEnabled && e.multiElement && l.isTouchScreen;
  return h.jsxs("footer", { role: "contentinfo", className: "layer-ui__wrapper__footer App-menu App-menu_bottom", children: [h.jsx("div", { className: ne("layer-ui__wrapper__footer-left zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled }), children: h.jsx(Xn.Col, { gap: 2, children: h.jsxs(ic, { heading: "canvasActions", children: [h.jsx(LW, { renderAction: t.renderAction, zoom: e.zoom }), !e.viewModeEnabled && h.jsx(RW, { renderAction: t.renderAction, className: ne("zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-bottom": e.zenModeEnabled }) }), s && h.jsx(NW, { renderAction: t.renderAction, className: ne("zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled }) })] }) }) }), h.jsx(i.Out, {}), h.jsx("div", { className: ne("layer-ui__wrapper__footer-right zen-mode-transition", { "transition-right": e.zenModeEnabled }), children: h.jsxs("div", { style: { position: "relative" }, children: [a && h.jsx(r.Out, {}), h.jsx(_V, { onClick: () => t.executeAction(mU) })] }) }), h.jsx(PW, { actionManager: t, showExitZenModeBtn: n })] });
}, AV = gv;
gv.displayName = "Footer";
var bv = Y.createContext({}), vv = ({ children: e, className: t }) => {
  let n = $t(), a = Cn(bv), i = !!(n.editor.canFitSidebar && a.shouldRenderDockButton);
  return h.jsxs("div", { className: ne("sidebar__header", t), "data-testid": "sidebar-header", children: [e, h.jsxs("div", { className: "sidebar__header__buttons", children: [i && h.jsx(fl, { label: C("labels.sidebarLock"), children: h.jsx(vs, { onSelect: () => {
    var r;
    return (r = a.onDock) == null ? void 0 : r.call(a, !a.docked);
  }, selected: !!a.docked, className: "sidebar__dock", "data-testid": "sidebar-dock", "aria-label": C("labels.sidebarLock"), children: nC }) }), h.jsx(vs, { "data-testid": "sidebar-close", className: "sidebar__close", onSelect: a.onCloseRequest, "aria-label": C("buttons.close"), children: Ms })] })] });
};
vv.displayName = "SidebarHeader";
var xv = ({ name: e, tab: t, icon: n, title: a, children: i, onToggle: r, className: l, style: s }) => {
  var o;
  let c = Ft(), d = pn();
  return h.jsxs("label", { title: a, className: "sidebar-trigger__label-element", children: [h.jsx("input", { className: "ToolIcon_type_checkbox", type: "checkbox", onChange: (u) => {
    var p;
    (p = document.querySelector(".layer-ui__wrapper")) == null || p.classList.remove("animate");
    let f = u.target.checked;
    c({ openSidebar: f ? { name: e, tab: t } : null }), r == null || r(f);
  }, checked: ((o = d.openSidebar) == null ? void 0 : o.name) === e, "aria-label": a, "aria-keyshortcuts": "0" }), h.jsxs("div", { className: ne("sidebar-trigger", l), style: s, children: [n && h.jsx("div", { children: n }), i && h.jsx("div", { className: "sidebar-trigger__label", children: i })] })] });
};
xv.displayName = "SidebarTrigger";
var yv = ({ children: e, ...t }) => h.jsx(n9, { className: "sidebar-triggers", ...t, children: e });
yv.displayName = "SidebarTabTriggers";
var wv = ({ children: e, tab: t, onSelect: n, ...a }) => h.jsx(a9, { value: t, asChild: !0, onSelect: n, children: h.jsx("button", { type: "button", className: "excalidraw-button sidebar-tab-trigger", ...a, children: e }) });
wv.displayName = "SidebarTabTrigger";
var Ev = ({ children: e, ...t }) => {
  let n = pn(), a = Ft();
  if (!n.openSidebar) return null;
  let { name: i } = n.openSidebar;
  return h.jsx(t9, { className: "sidebar-tabs-root", value: n.openSidebar.tab, onValueChange: (r) => a((l) => ({ ...l, openSidebar: { ...l.openSidebar, name: i, tab: r } })), ...t, children: e });
};
Ev.displayName = "SidebarTabs";
var Sv = ({ tab: e, children: t, ...n }) => h.jsx(i9, { ...n, value: e, "data-testid": e, children: t });
Sv.displayName = "SidebarTab";
var xU = Gt(!1), kv = Ot(({ name: e, children: t, onDock: n, docked: a, className: i, ...r }, l) => {
  ve.DEV && n && a == null && console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");
  let s = Ft(), c = vh(xU);
  Mn(() => (c(!!a), () => {
    c(!1);
  }), [c, a]);
  let d = ie({});
  d.current.onCloseRequest = () => {
    s({ openSidebar: null });
  }, d.current.onDock = (p) => n == null ? void 0 : n(p), d.current = md(d.current, { docked: a, shouldRenderDockButton: !!n && a != null });
  let o = ie(null);
  j5(l, () => o.current);
  let u = $t(), f = Te(() => {
    document.querySelector(".Dialog") || s({ openSidebar: null });
  }, [s]);
  return dU(o, Te((p) => {
    p.target.closest(".sidebar-trigger") || (!a || !u.editor.canFitSidebar) && f();
  }, [f, a, u.editor.canFitSidebar])), Q(() => {
    let p = (U) => {
      U.key === L.ESCAPE && (!a || !u.editor.canFitSidebar) && f();
    };
    return document.addEventListener("keydown", p), () => {
      document.removeEventListener("keydown", p);
    };
  }, [f, a, u.editor.canFitSidebar]), h.jsx(ba, { ...r, className: ne("sidebar", { "sidebar--docked": a }, i), ref: o, children: h.jsx(bv.Provider, { value: d.current, children: t }) });
});
kv.displayName = "SidebarInner";
var Ra = Object.assign(Ot((e, t) => {
  var s;
  let n = pn(), { onStateChange: a } = e, i = ie(n.openSidebar);
  Q(() => {
    var c, d, o, u, f;
    (!n.openSidebar && ((c = i == null ? void 0 : i.current) == null ? void 0 : c.name) === e.name || ((d = n.openSidebar) == null ? void 0 : d.name) === e.name && ((o = i == null ? void 0 : i.current) == null ? void 0 : o.name) !== e.name || ((u = i.current) == null ? void 0 : u.name) === e.name) && n.openSidebar !== i.current && (a == null || a(((f = n.openSidebar) == null ? void 0 : f.name) !== e.name ? null : n.openSidebar)), i.current = n.openSidebar;
  }, [n.openSidebar, a, e.name]);
  let [r, l] = re(!1);
  return Mn(() => (l(!0), () => l(!1)), []), r && ((s = n.openSidebar) == null ? void 0 : s.name) === e.name ? st(kv, { ...e, ref: t, key: e.name }) : null;
}), { Header: vv, TabTriggers: yv, TabTrigger: wv, Tabs: Ev, Tab: Sv, Trigger: xv });
Ra.displayName = "Sidebar";
var Mv = {};
R5(Mv, { ChangeCanvasBackground: () => Nv, ClearCanvas: () => Rv, CommandPalette: () => jv, Export: () => Ov, Help: () => Lv, LiveCollaborationTrigger: () => Fv, LoadScene: () => Tv, SaveAsImage: () => Av, SaveToActiveFile: () => _v, SearchMenu: () => Dv, Socials: () => $v, ToggleTheme: () => Pv });
var Cv = Gt({ active: !1 });
async function jV({ title: e, description: t, actionLabel: n, color: a }) {
  return new Promise((i) => {
    fa.set(Cv, { active: !0, onConfirm: () => i(!0), onClose: () => i(!1), onReject: () => i(!1), title: e, description: t, actionLabel: n, color: a });
  });
}
var Iv = ({ value: e, shortcut: t, onChange: n, choices: a, children: i, name: r }) => {
  let l = $t();
  return h.jsxs(h.Fragment, { children: [h.jsxs("div", { className: "dropdown-menu-item-base dropdown-menu-item-bare", children: [h.jsx("label", { className: "dropdown-menu-item__text", htmlFor: r, children: i }), h.jsx(ov, { name: r, value: e, onChange: n, choices: a })] }), t && !l.editor.isMobile && h.jsx("div", { className: "dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned", children: t })] });
};
Iv.displayName = "DropdownMenuItemContentRadio";
var DV = Iv, Tv = () => {
  let { t: e } = on(), t = In(), n = Th();
  return t.isActionEnabled(s0) ? h.jsx(ea, { icon: Y0, onSelect: async () => {
    (!n.length || await jV({ title: e("overwriteConfirm.modal.loadFromFile.title"), actionLabel: e("overwriteConfirm.modal.loadFromFile.button"), color: "warning", description: h.jsx(Va, { i18nKey: "overwriteConfirm.modal.loadFromFile.description", bold: (a) => h.jsx("strong", { children: a }), br: () => h.jsx("br", {}) }) })) && t.executeAction(s0);
  }, "data-testid": "load-button", shortcut: an("loadScene"), "aria-label": e("buttons.load"), children: e("buttons.load") }) : null;
};
Tv.displayName = "LoadScene";
var _v = () => {
  let { t: e } = on(), t = In();
  return t.isActionEnabled(j6) ? h.jsx(ea, { shortcut: an("saveScene"), "data-testid": "save-button", onSelect: () => t.executeAction(j6), icon: yC, "aria-label": `${e("buttons.save")}`, children: `${e("buttons.save")}` }) : null;
};
_v.displayName = "SaveToActiveFile";
var Av = () => {
  let e = Ft(), { t } = on();
  return h.jsx(ea, { icon: p8, "data-testid": "image-export-button", onSelect: () => e({ openDialog: { name: "imageExport" } }), shortcut: an("imageExport"), "aria-label": t("buttons.exportImage"), children: t("buttons.exportImage") });
};
Av.displayName = "SaveAsImage";
var jv = (e) => {
  let t = Ft(), { t: n } = on();
  return h.jsx(ea, { icon: k8, "data-testid": "command-palette-button", onSelect: () => {
    tt("command_palette", "open", "menu"), t({ openDialog: { name: "commandPalette" } });
  }, shortcut: an("commandPalette"), "aria-label": n("commandPalette.title"), className: e == null ? void 0 : e.className, children: n("commandPalette.title") });
};
jv.displayName = "CommandPalette";
var Dv = (e) => {
  let { t } = on(), n = In();
  return h.jsx(ea, { icon: sl, "data-testid": "search-menu-button", onSelect: () => {
    n.executeAction(rv);
  }, shortcut: an("searchMenu"), "aria-label": t("search.title"), className: e == null ? void 0 : e.className, children: t("search.title") });
};
Dv.displayName = "SearchMenu";
var Lv = () => {
  let { t: e } = on(), t = In();
  return h.jsx(ea, { "data-testid": "help-menu-item", icon: G0, onSelect: () => t.executeAction(mU), shortcut: "?", "aria-label": e("helpDialog.title"), children: e("helpDialog.title") });
};
Lv.displayName = "Help";
var Rv = () => {
  let { t: e } = on(), t = vh(Ih);
  return In().isActionEnabled(Mo) ? h.jsx(ea, { icon: ll, onSelect: () => t("clearCanvas"), "data-testid": "clear-canvas-button", "aria-label": e("buttons.clearReset"), children: e("buttons.clearReset") }) : null;
};
Rv.displayName = "ClearCanvas";
var Pv = (e) => {
  let { t } = on(), n = pn(), a = In(), i = an("toggleTheme");
  return a.isActionEnabled(Iu) ? e != null && e.allowSystemTheme ? h.jsx(DV, { name: "theme", value: e.theme, onChange: (r) => e.onSelect(r), choices: [{ value: Me.LIGHT, label: g1, ariaLabel: `${t("buttons.lightMode")} - ${i}` }, { value: Me.DARK, label: m1, ariaLabel: `${t("buttons.darkMode")} - ${i}` }, { value: "system", label: jI, ariaLabel: t("buttons.systemMode") }], children: t("labels.theme") }) : h.jsx(ea, { onSelect: (r) => {
    if (r.preventDefault(), e == null ? void 0 : e.onSelect) e.onSelect(n.theme === Me.DARK ? Me.LIGHT : Me.DARK);
    else return a.executeAction(Iu);
  }, icon: n.theme === Me.DARK ? g1 : m1, "data-testid": "toggle-dark-mode", shortcut: i, "aria-label": n.theme === Me.DARK ? t("buttons.lightMode") : t("buttons.darkMode"), children: n.theme === Me.DARK ? t("buttons.lightMode") : t("buttons.darkMode") }) : null;
};
Pv.displayName = "ToggleTheme";
var Nv = () => {
  let { t: e } = on(), t = pn(), n = In(), a = kc();
  return t.viewModeEnabled || !a.UIOptions.canvasActions.changeViewBackgroundColor ? null : h.jsxs("div", { style: { marginTop: "0.5rem" }, children: [h.jsx("div", { "data-testid": "canvas-background-label", style: { fontSize: ".75rem", marginBottom: ".5rem" }, children: e("labels.canvasBackground") }), h.jsx("div", { style: { padding: "0 0.625rem" }, children: n.renderAction("changeViewBackgroundColor") })] });
};
Nv.displayName = "ChangeCanvasBackground";
var Ov = () => {
  let { t: e } = on(), t = Ft();
  return h.jsx(ea, { icon: Gu, onSelect: () => {
    t({ openDialog: { name: "jsonExport" } });
  }, "data-testid": "json-export-button", "aria-label": e("buttons.export"), children: e("buttons.export") });
};
Ov.displayName = "Export";
var $v = () => {
  let { t: e } = on();
  return h.jsxs(h.Fragment, { children: [h.jsx(Rd, { icon: f8, href: "https://github.com/excalidraw/excalidraw", "aria-label": "GitHub", children: "GitHub" }), h.jsx(Rd, { icon: vC, href: "https://x.com/excalidraw", "aria-label": "X", children: e("labels.followUs") }), h.jsx(Rd, { icon: bC, href: "https://discord.gg/UexuTaE", "aria-label": "Discord", children: e("labels.discordChat") })] });
};
$v.displayName = "Socials";
var Fv = ({ onSelect: e, isCollaborating: t }) => {
  let { t: n } = on();
  return h.jsx(ea, { "data-testid": "collab-button", icon: g8, className: ne({ "active-collab": t }), onSelect: e, children: n("labels.liveCollaboration") });
};
Fv.displayName = "LiveCollaborationTrigger";
var Ec = (e, t) => {
  let n = Gt(0), a = (i) => {
    let { tunnelsJotai: { useAtom: r } } = Nn(), [, l] = r(n), s = ie({ preferHost: !1, counter: 0 });
    return Mn(() => {
      let c = s.current;
      return l((d) => {
        let o = d + 1;
        return c.counter = o, o;
      }), () => {
        l((d) => {
          let o = d - 1;
          return c.counter = o, o || (c.preferHost = !1), o;
        });
      };
    }, [l]), i.__fallback || (s.current.preferHost = !0), !s.current.counter && i.__fallback && s.current.preferHost || s.current.counter > 1 && i.__fallback ? null : h.jsx(t, { ...i });
  };
  return a.displayName = e, a;
}, LV = Object.assign(Ec("MainMenu", ({ children: e, onSelect: t }) => {
  var s;
  let { MainMenuTunnel: n } = Nn(), a = $t(), i = pn(), r = Ft(), l = a.editor.isMobile ? void 0 : () => r({ openMenu: null });
  return h.jsx(n.In, { children: h.jsxs(lt, { open: i.openMenu === "canvas", children: [h.jsx(lt.Trigger, { onToggle: () => {
    r({ openMenu: i.openMenu === "canvas" ? null : "canvas" });
  }, "data-testid": "main-menu-trigger", className: "main-menu-trigger", children: h8 }), h.jsxs(lt.Content, { onClickOutside: l, onSelect: Xu(t, () => {
    r({ openMenu: null });
  }), children: [e, a.editor.isMobile && i.collaborators.size > 0 && h.jsxs("fieldset", { className: "UserList-Wrapper", children: [h.jsx("legend", { children: C("labels.collaborators") }), h.jsx(mv, { mobile: !0, collaborators: i.collaborators, userToFollow: ((s = i.userToFollow) == null ? void 0 : s.socketId) || null })] })] })] }) });
}), { Trigger: lt.Trigger, Item: lt.Item, ItemLink: lt.ItemLink, ItemCustom: lt.ItemCustom, Group: lt.Group, Separator: lt.Separator, DefaultItems: Mv }), mn = LV, yU = ({ title: e, children: t, actionLabel: n, onClick: a }) => h.jsxs("div", { className: "OverwriteConfirm__Actions__Action", children: [h.jsx("h4", { children: e }), h.jsx("div", { className: "OverwriteConfirm__Actions__Action__content", children: t }), h.jsx(Io, { variant: "outlined", color: "muted", label: n, size: "large", fullWidth: !0, onClick: a })] }), RV = () => {
  let { t: e } = on(), t = In(), n = Ft();
  return h.jsx(yU, { title: e("overwriteConfirm.action.exportToImage.title"), actionLabel: e("overwriteConfirm.action.exportToImage.button"), onClick: () => {
    t.executeAction(j9, "ui", !0), n({ openDialog: { name: "imageExport" } });
  }, children: e("overwriteConfirm.action.exportToImage.description") });
}, PV = () => {
  let { t: e } = on(), t = In();
  return h.jsx(yU, { title: e("overwriteConfirm.action.saveToDisk.title"), actionLabel: e("overwriteConfirm.action.saveToDisk.button"), onClick: () => {
    t.executeAction(D9, "ui");
  }, children: e("overwriteConfirm.action.saveToDisk.description") });
}, r5 = Object.assign(({ children: e }) => h.jsx("div", { className: "OverwriteConfirm__Actions", children: e }), { ExportToImage: RV, SaveToDisk: PV }), Ff = Object.assign(Ec("OverwriteConfirmDialog", ({ children: e }) => {
  let { OverwriteConfirmDialogTunnel: t } = Nn(), [n, a] = xt(Cv);
  if (!n.active) return null;
  let i = () => {
    n.onClose(), a((l) => ({ ...l, active: !1 }));
  }, r = () => {
    n.onConfirm(), a((l) => ({ ...l, active: !1 }));
  };
  return h.jsx(t.In, { children: h.jsx(ka, { onCloseRequest: i, title: !1, size: 916, children: h.jsxs("div", { className: "OverwriteConfirm", children: [h.jsx("h3", { children: n.title }), h.jsxs("div", { className: `OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`, children: [h.jsx("div", { className: "OverwriteConfirm__Description__icon", children: UI }), h.jsx("div", { children: n.description }), h.jsx("div", { className: "OverwriteConfirm__Description__spacer" }), h.jsx(Io, { color: n.color, size: "large", label: n.actionLabel, onClick: r })] }), h.jsx(r5, { children: e })] }) }) });
}), { Actions: r5, Action: yU }), NV = Gt(""), zv = Gt(null), OV = 350, $V = () => {
  let e = ri(), t = Ft(), n = ie(null), [a, i] = xt(NV), r = a.trim(), [l, s] = re(!1), [c, d] = re({ nonce: null, items: [] }), o = ie(null), u = ie(void 0), [f, p] = xt(zv), U = e.scene.getNonDeletedElementsMap();
  Q(() => {
    l || (r !== o.current || e.scene.getSceneNonce() !== u.current) && (o.current = null, l5(r, e, (x, y) => {
      d({ nonce: Ja(), items: x }), o.current = r, u.current = e.scene.getSceneNonce(), t({ searchMatches: x.map((E) => ({ id: E.textElement.id, focus: !1, matchedLines: E.matchedLines })) });
    }));
  }, [l, r, U, e, t, p, u]);
  let m = () => {
    c.items.length > 0 && p((x) => x === null ? 0 : (x + 1) % c.items.length);
  }, g = () => {
    c.items.length > 0 && p((x) => x === null ? 0 : x - 1 < 0 ? c.items.length - 1 : x - 1);
  };
  Q(() => {
    t((x) => ({ searchMatches: x.searchMatches.map((y, E) => E === f ? { ...y, focus: !0 } : { ...y, focus: !1 }) }));
  }, [f, t]), Q(() => {
    var x, y, E, S;
    if (c.items.length > 0 && f !== null) {
      let w = c.items[f];
      if (w) {
        let M = e.state.zoom.value, I = Rn({ text: w.searchQuery, x: w.textElement.x + (((x = w.matchedLines[0]) == null ? void 0 : x.offsetX) ?? 0), y: w.textElement.y + (((y = w.matchedLines[0]) == null ? void 0 : y.offsetY) ?? 0), width: (E = w.matchedLines[0]) == null ? void 0 : E.width, height: (S = w.matchedLines[0]) == null ? void 0 : S.height, fontSize: w.textElement.fontSize, fontFamily: w.textElement.fontFamily }), T = 14, _ = w.textElement.fontSize, A = _ * M < T;
        if (!Id([I], e.canvas.width / window.devicePixelRatio, e.canvas.height / window.devicePixelRatio, { offsetLeft: e.state.offsetLeft, offsetTop: e.state.offsetTop, scrollX: e.state.scrollX, scrollY: e.state.scrollY, zoom: e.state.zoom }, e.scene.getNonDeletedElementsMap(), e.getEditorUIOffsets()) || A) {
          let D;
          A ? _ >= T ? D = { fitToContent: !0 } : D = { fitToViewport: !0, maxZoom: Ga(T / _, 1) } : D = { fitToContent: !0 }, e.scrollToContent(I, { animate: !0, duration: 300, ...D, canvasOffsets: e.getEditorUIOffsets() });
        }
      }
    }
  }, [f, c, e]), Q(() => () => {
    p(null), o.current = null, u.current = void 0, t({ searchMatches: [] }), s(!1);
  }, [t, p]);
  let b = yh({ goToNextItem: m, goToPreviousItem: g, searchMatches: c });
  Q(() => ct(window, "keydown", (y) => {
    var E, S, w;
    if (y.key === L.ESCAPE && !e.state.openDialog && !e.state.openPopup) {
      y.preventDefault(), y.stopPropagation(), t({ openSidebar: null });
      return;
    }
    y[L.CTRL_OR_CMD] && y.key === L.F && (y.preventDefault(), y.stopPropagation(), (E = n.current) != null && E.matches(":focus") ? t({ openSidebar: null }) : (e.state.openDialog && t({ openDialog: null }), (S = n.current) == null || S.focus(), (w = n.current) == null || w.select())), y.target instanceof HTMLElement && y.target.closest(".layer-ui__search") && b.searchMatches.items.length && (y.key === L.ENTER && (y.stopPropagation(), b.goToNextItem()), y.key === L.ARROW_UP ? (y.stopPropagation(), b.goToPreviousItem()) : y.key === L.ARROW_DOWN && (y.stopPropagation(), b.goToNextItem()));
  }, { capture: !0, passive: !1 }), [t, b, e]);
  let v = `${c.items.length} ${c.items.length === 1 ? C("search.singleResult") : C("search.multipleResults")}`;
  return h.jsxs("div", { className: "layer-ui__search", children: [h.jsx("div", { className: "layer-ui__search-header", children: h.jsx(vU, { className: es.SEARCH_MENU_INPUT_WRAPPER, value: a, ref: n, placeholder: C("search.placeholder"), icon: sl, onChange: (x) => {
    i(x), s(!0);
    let y = x.trim();
    l5(y, e, (E, S) => {
      d({ nonce: Ja(), items: E }), p(S), o.current = y, u.current = e.scene.getSceneNonce(), t({ searchMatches: E.map((w) => ({ id: w.textElement.id, focus: !1, matchedLines: w.matchedLines })) }), s(!1);
    });
  }, selectOnRender: !0 }) }), h.jsxs("div", { className: "layer-ui__search-count", children: [c.items.length > 0 && h.jsxs(h.Fragment, { children: [f !== null && f > -1 ? h.jsxs("div", { children: [f + 1, " / ", v] }) : h.jsx("div", { children: v }), h.jsxs("div", { className: "result-nav", children: [h.jsx(vs, { onSelect: () => {
    m();
  }, className: "result-nav-btn", children: C8 }), h.jsx(vs, { onSelect: () => {
    g();
  }, className: "result-nav-btn", children: FI })] })] }), c.items.length === 0 && r && o.current && h.jsx("div", { style: { margin: "1rem auto" }, children: C("search.noMatch") })] }), h.jsx(HV, { matches: c, onItemClick: p, focusIndex: f, searchQuery: r })] });
}, FV = (e) => {
  let t = [e.preview.moreBefore ? "..." : "", e.preview.previewText.slice(0, e.preview.indexInSearchQuery), e.preview.previewText.slice(e.preview.indexInSearchQuery, e.preview.indexInSearchQuery + e.searchQuery.length), e.preview.previewText.slice(e.preview.indexInSearchQuery + e.searchQuery.length), e.preview.moreAfter ? "..." : ""];
  return h.jsx("div", { tabIndex: -1, className: ne("layer-ui__result-item", { active: e.highlighted }), onClick: e.onClick, ref: (n) => {
    e.highlighted && (n == null || n.scrollIntoView({ behavior: "auto", block: "nearest" }));
  }, children: h.jsx("div", { className: "preview-text", children: t.flatMap((n, a) => h.jsx(x0, { children: a === 2 ? h.jsx("b", { children: n }) : n }, a)) }) });
}, zV = (e) => h.jsx("div", { className: "layer-ui__search-result-container", children: e.matches.items.map((t, n) => h.jsx(FV, { searchQuery: e.searchQuery, preview: t.preview, highlighted: n === e.focusIndex, onClick: () => e.onItemClick(n) }, t.textElement.id + t.index)) }), BV = (e, t) => e.matches.nonce === t.matches.nonce && e.focusIndex === t.focusIndex, HV = xs(zV, BV), XV = (e, t, n) => {
  let a = e.slice(0, t), i = a.split(/\s+/), r = a.endsWith(" "), l = i.length - 2 - 1 - (r ? 0 : 1), s = i.slice(l <= 0 ? 0 : l).join(" ") + (r ? " " : ""), c = 20;
  s = s.length > c ? s.slice(-c) : s;
  let d = e.slice(t + n.length), o = d.split(/\s+/), u = !d.startsWith(" "), f = u ? 6 : 5, p = (u ? "" : " ") + o.slice(0, f).join(" ");
  return { indexInSearchQuery: s.length, previewText: s + n + p, moreBefore: l > 0, moreAfter: o.length > f };
}, WV = (e, t) => {
  let n = e.split(`
`), a = [], i = 0;
  for (let r = 0; r < n.length; r++) {
    let l = n[r], s = n[r + 1];
    if (s) {
      let c = t.indexOf(s, i);
      if (c > l.length + i) {
        let d = c - (l.length + i);
        for (; d > 0; ) l += " ", d--;
      }
    }
    a.push(l), i = i + l.length;
  }
  return a.join(`
`);
}, VV = (e, t, n) => {
  let a = WV(e.text, e.originalText).split(`
`), i = [], r = 0, l = 0;
  for (let o of a) {
    let u = r, f = u + o.length - 1;
    i.push({ line: o, startIndex: u, endIndex: f, lineNumber: l }), r = f + 1, l++;
  }
  let s = n, c = e.originalText.slice(n, n + t.length), d = [];
  for (let o of i) {
    if (c === "") break;
    if (s >= o.startIndex && s <= o.endIndex) {
      let u = o.endIndex + 1 - s, f = o.line.slice(0, s - o.startIndex), p = c.slice(0, u);
      c = c.slice(u);
      let U = ln(f, Ye(e), e.lineHeight);
      if (f === "" && (U.width = 0), e.textAlign !== "left" && o.line.length > 0) {
        let x = ln(o.line, Ye(e), e.lineHeight), y = e.textAlign === "center" ? (e.width - x.width) / 2 : e.width - x.width;
        U.width += y;
      }
      let { width: m, height: g } = ln(p, Ye(e), e.lineHeight), b = U.width, v = o.lineNumber * U.height;
      d.push({ offsetX: b, offsetY: v, width: m, height: g }), s += u;
    }
  }
  return d;
}, GV = (e) => e.replace(/[.*+?^${}()|[\]\\-]/g, "\\$&"), l5 = NB((e, t, n) => {
  if (!e || e === "") {
    n([], null);
    return;
  }
  let a = t.scene.getNonDeletedElements().filter((c) => q(c));
  a.sort((c, d) => c.y - d.y);
  let i = [], r = new RegExp(GV(e), "gi");
  for (let c of a) {
    let d = null, o = c.originalText;
    for (; (d = r.exec(o)) !== null; ) {
      let u = XV(o, d.index, e), f = VV(c, e, d.index);
      f.length > 0 && i.push({ textElement: c, searchQuery: e, preview: u, index: d.index, matchedLines: f });
    }
  }
  let l = new Set(t.visibleElements.map((c) => c.id)), s = i.findIndex((c) => l.has(c.textElement.id)) ?? null;
  n(i, s);
}, OV), Bv = Ec("DefaultSidebarTrigger", (e) => {
  let { DefaultSidebarTriggerTunnel: t } = Nn();
  return h.jsx(t.In, { children: h.jsx(Ra.Trigger, { ...e, className: "default-sidebar-trigger", name: Ua.name }) });
});
Bv.displayName = "DefaultSidebarTrigger";
var Hv = ({ children: e }) => {
  let { DefaultSidebarTabTriggersTunnel: t } = Nn();
  return h.jsx(t.In, { children: e });
};
Hv.displayName = "DefaultTabTriggers";
var s5 = Object.assign(Ec("DefaultSidebar", ({ children: e, className: t, onDock: n, docked: a, ...i }) => {
  var d;
  let r = pn(), l = Ft(), { DefaultSidebarTabTriggersTunnel: s } = Nn(), c = ((d = r.openSidebar) == null ? void 0 : d.tab) === Gl;
  return st(Ra, { ...i, name: "default", key: "default", className: ne("default-sidebar", t), docked: c || (a ?? r.defaultSidebarDockedPreference), onDock: c || n === !1 || !n && a != null ? void 0 : Xu(n, (o) => {
    l({ defaultSidebarDockedPreference: o });
  }) }, h.jsxs(Ra.Tabs, { children: [h.jsx(Ra.Header, { children: h.jsxs(Ra.TabTriggers, { children: [h.jsx(Ra.TabTrigger, { tab: Gl, children: sl }), h.jsx(Ra.TabTrigger, { tab: Yd, children: W0 }), h.jsx(s.Out, {})] }) }), h.jsx(Ra.Tab, { tab: Yd, children: h.jsx(yW, {}) }), h.jsx(Ra.Tab, { tab: Gl, children: h.jsx($V, {}) }), e] }));
}), { Trigger: Bv, TabTriggers: Hv }), YV = "small", ZV = (e) => h.jsxs("label", { className: ne("ToolIcon ToolIcon__LaserPointer", `ToolIcon_size_${YV}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [h.jsx("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title, "data-testid": "toolbar-LaserPointer" }), h.jsx("div", { className: "ToolIcon__icon", children: E8 })] }), KV = ({ canvasRef: e, setError: t }) => {
  let n = e.current;
  if (!n) return;
  let a = n.parentElement;
  a && (a.style.background = "", t(null), n.replaceChildren());
}, Xv = async ({ canvasRef: e, mermaidToExcalidrawLib: t, mermaidDefinition: n, setError: a, data: i }) => {
  let r = e.current, l = r == null ? void 0 : r.parentElement;
  if (!(!r || !l)) {
    if (!n) {
      KV({ canvasRef: e, setError: a });
      return;
    }
    try {
      let s = await t.api, c;
      try {
        c = await s.parseMermaidToExcalidraw(n);
      } catch {
        c = await s.parseMermaidToExcalidraw(n.replace(/"/g, "'"));
      }
      let { elements: d, files: o } = c;
      a(null), i.current = { elements: b0(d, { regenerateIds: !0 }), files: o };
      let u = await Ip({ elements: i.current.elements, files: i.current.files, exportPadding: Es, maxWidthOrHeight: Math.max(l.offsetWidth, l.offsetHeight) * window.devicePixelRatio });
      try {
        await Qo(u);
      } catch (f) {
        throw f.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : f;
      }
      l.style.background = "var(--default-bg-color)", r.replaceChildren(u);
    } catch (s) {
      throw l.style.background = "var(--default-bg-color)", n && a(s), s;
    }
  }
}, wU = (e) => {
  qr.set(Uo.MERMAID_TO_EXCALIDRAW, e);
}, Wv = ({ app: e, data: t, text: n, shouldSaveMermaidDataToStorage: a }) => {
  let { elements: i, files: r } = t.current;
  i.length && (e.addElementsFromPasteOrLibrary({ elements: i, files: r, position: "center", fitToContent: !0 }), e.setOpenDialog(null), a && n && wU(n));
}, Vv = ({ children: e }) => h.jsx("div", { className: "ttd-dialog-panels", children: e }), _u = ({ label: e, children: t, panelAction: n, panelActionDisabled: a = !1, onTextSubmitInProgess: i, renderTopRight: r, renderSubmitShortcut: l, renderBottomRight: s }) => h.jsxs("div", { className: "ttd-dialog-panel", children: [h.jsxs("div", { className: "ttd-dialog-panel__header", children: [h.jsx("label", { children: e }), r == null ? void 0 : r()] }), t, h.jsxs("div", { className: ne("ttd-dialog-panel-button-container", { invisible: !n }), style: { display: "flex", alignItems: "center" }, children: [h.jsxs(vs, { className: "ttd-dialog-panel-button", onSelect: n ? n.action : () => {
}, disabled: a || i, children: [h.jsxs("div", { className: ne({ invisible: i }), children: [n == null ? void 0 : n.label, (n == null ? void 0 : n.icon) && h.jsx("span", { children: n.icon })] }), i && h.jsx(Ri, {})] }), !a && !i && (l == null ? void 0 : l()), s == null ? void 0 : s()] })] }), Gv = ({ input: e, placeholder: t, onChange: n, onKeyboardSubmit: a }) => {
  let i = ie(null), r = ie(a);
  return r.current = a, Q(() => {
    if (!r.current) return;
    let l = i.current;
    if (l) {
      let s = (c) => {
        var d;
        c[L.CTRL_OR_CMD] && c.key === L.ENTER && (c.preventDefault(), (d = r.current) == null || d.call(r));
      };
      return l.addEventListener("keydown", s), () => {
        l.removeEventListener("keydown", s);
      };
    }
  }, []), h.jsx("textarea", { className: "ttd-dialog-input", onChange: n, value: e, placeholder: t, autoFocus: !0, ref: i });
}, qV = ({ error: e }) => h.jsxs("div", { "data-testid": "ttd-dialog-output-error", className: "ttd-dialog-output-error", children: ["Error! ", h.jsx("p", { children: e })] }), Yv = ({ error: e, canvasRef: t, loaded: n }) => h.jsxs("div", { className: "ttd-dialog-output-wrapper", children: [e && h.jsx(qV, { error: e.message }), n ? h.jsx("div", { ref: t, style: { opacity: e ? "0.15" : 1 }, className: "ttd-dialog-output-canvas-container" }) : h.jsx(Ri, { size: "2rem" })] }), Zv = () => h.jsxs("div", { className: "ttd-dialog-submit-shortcut", children: [h.jsx("div", { className: "ttd-dialog-submit-shortcut__key", children: X("CtrlOrCmd") }), h.jsx("div", { className: "ttd-dialog-submit-shortcut__key", children: X("Enter") })] }), JV = `flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`, o5 = is(wU, 300), QV = ({ mermaidToExcalidrawLib: e }) => {
  let [t, n] = re(() => qr.get(Uo.MERMAID_TO_EXCALIDRAW) || JV), a = Sx(t.trim()), [i, r] = re(null), l = ie(null), s = ie({ elements: [], files: null }), c = ri();
  Q(() => {
    Xv({ canvasRef: l, data: s, mermaidToExcalidrawLib: e, setError: r, mermaidDefinition: a }).catch((o) => {
      Qb() && console.error("Failed to parse mermaid definition", o);
    }), o5(a);
  }, [a, e]), Q(() => () => {
    o5.flush();
  }, []);
  let d = () => {
    Wv({ app: c, data: s, text: t, shouldSaveMermaidDataToStorage: !0 });
  };
  return h.jsxs(h.Fragment, { children: [h.jsx("div", { className: "ttd-dialog-desc", children: h.jsx(Va, { i18nKey: "mermaid.description", flowchartLink: (o) => h.jsx("a", { href: "https://mermaid.js.org/syntax/flowchart.html", children: o }), sequenceLink: (o) => h.jsx("a", { href: "https://mermaid.js.org/syntax/sequenceDiagram.html", children: o }), classLink: (o) => h.jsx("a", { href: "https://mermaid.js.org/syntax/classDiagram.html", children: o }) }) }), h.jsxs(Vv, { children: [h.jsx(_u, { label: C("mermaid.syntax"), children: h.jsx(Gv, { input: t, placeholder: "Write Mermaid diagram defintion here...", onChange: (o) => n(o.target.value), onKeyboardSubmit: () => {
    d();
  } }) }), h.jsx(_u, { label: C("mermaid.preview"), panelAction: { action: () => {
    d();
  }, label: C("mermaid.button"), icon: vd }, renderSubmitShortcut: () => h.jsx(Zv, {}), children: h.jsx(Yv, { canvasRef: l, loaded: e.loaded, error: i }) })] })] });
}, eG = QV, Kv = (e) => {
  let t = Ft(), n = ie(null), a = ie(0);
  return h.jsx(t9, { ref: n, className: "ttd-dialog-tabs-root", value: e.tab, onValueChange: (i) => {
    var l;
    if (!i) return;
    let r = (l = n.current) == null ? void 0 : l.closest(".Modal__content");
    if (r) {
      let s = r.offsetHeight || 0;
      s > a.current && (a.current = s, r.style.minHeight = `min(${a.current}px, 100%)`);
    }
    e.dialog === "ttd" && t8(["text-to-diagram", "mermaid"], i) && t({ openDialog: { name: e.dialog, tab: i } });
  }, children: e.children });
};
Kv.displayName = "TTDDialogTabs";
var tG = Kv, qv = ({ children: e, ...t }) => h.jsx(n9, { className: "ttd-dialog-triggers", ...t, children: e });
qv.displayName = "TTDDialogTabTriggers";
var U0 = ({ children: e, tab: t, onSelect: n, ...a }) => h.jsx(a9, { value: t, asChild: !0, onSelect: n, children: h.jsx("button", { type: "button", className: "ttd-dialog-tab-trigger", ...a, children: e }) });
U0.displayName = "TTDDialogTabTrigger";
var m0 = ({ tab: e, children: t, ...n }) => h.jsx(i9, { ...n, value: e, children: t });
m0.displayName = "TTDDialogTab";
var zf = 3, Al = 1e3, nG = Gt(null), aG = Gt(null), iG = (e) => {
  var n;
  let t = pn();
  return ((n = t.openDialog) == null ? void 0 : n.name) !== "ttd" ? null : h.jsx(rG, { ...e, tab: t.openDialog.tab });
}, rG = Ec("TTDDialogBase", ({ tab: e, ...t }) => {
  let n = ri(), a = Ft(), i = ie(null), [r, l] = xt(aG), [s, c] = re((r == null ? void 0 : r.prompt) ?? ""), d = s.trim(), o = (S) => {
    c(S.target.value), l((w) => ({ generatedResponse: (w == null ? void 0 : w.generatedResponse) ?? null, prompt: S.target.value }));
  }, [u, f] = re(!1), [p, U] = xt(nG), m = async () => {
    if (d.length > Al || d.length < zf || u || (p == null ? void 0 : p.rateLimitRemaining) === 0 || "__fallback" in t) {
      d.length < zf && E(new Error(`Prompt is too short (min ${zf} characters)`)), d.length > Al && E(new Error(`Prompt is too long (max ${Al} characters)`));
      return;
    }
    try {
      f(!0), tt("ai", "generate", "ttd");
      let { generatedResponse: S, error: w, rateLimit: M, rateLimitRemaining: I } = await t.onTextSubmit(d);
      if (typeof S == "string" && l((T) => ({ generatedResponse: S, prompt: (T == null ? void 0 : T.prompt) ?? null })), mo(M) && mo(I) && U({ rateLimit: M, rateLimitRemaining: I }), w) {
        E(w);
        return;
      }
      if (!S) {
        E(new Error("Generation failed"));
        return;
      }
      try {
        await Xv({ canvasRef: i, data: x, mermaidToExcalidrawLib: b, setError: E, mermaidDefinition: S }), tt("ai", "mermaid parse success", "ttd");
      } catch (T) {
        console.info(`%cTTD mermaid render errror: ${T.message}`, "color: red"), console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${T.message}`, "color: yellow"), tt("ai", "mermaid parse failed", "ttd"), E(new Error("Generated an invalid diagram :(. You may also try a different prompt."));
      }
    } catch (S) {
      let w = S.message;
      (!w || w === "Failed to fetch") && (w = "Request failed"), E(new Error(w));
    } finally {
      f(!1);
    }
  }, g = ie(m);
  g.current = m;
  let [b, v] = re({ loaded: !1, api: import("./index-BZXBCQdV.js").then((S) => S.b1) });
  Q(() => {
    (async () => (await b.api, v((S) => ({ ...S, loaded: !0 }))))();
  }, [b.api]);
  let x = ie({ elements: [], files: null }), [y, E] = re(null);
  return h.jsx(ka, { className: "ttd-dialog", onCloseRequest: () => {
    n.setOpenDialog(null);
  }, size: 1200, title: !1, ...t, autofocus: !1, children: h.jsxs(tG, { dialog: "ttd", tab: e, children: ["__fallback" in t && t.__fallback ? h.jsx("p", { className: "dialog-mermaid-title", children: C("mermaid.title") }) : h.jsxs(qv, { children: [h.jsx(U0, { tab: "text-to-diagram", children: h.jsxs("div", { style: { display: "flex", alignItems: "center" }, children: [C("labels.textToDiagram"), h.jsx("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", padding: "1px 6px", marginLeft: "10px", fontSize: 10, borderRadius: "12px", background: "var(--color-promo)", color: "var(--color-surface-lowest)" }, children: "AI Beta" })] }) }), h.jsx(U0, { tab: "mermaid", children: "Mermaid" })] }), h.jsx(m0, { className: "ttd-dialog-content", tab: "mermaid", children: h.jsx(eG, { mermaidToExcalidrawLib: b }) }), !("__fallback" in t) && h.jsxs(m0, { className: "ttd-dialog-content", tab: "text-to-diagram", children: [h.jsx("div", { className: "ttd-dialog-desc", children: "Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar." }), h.jsxs(Vv, { children: [h.jsx(_u, { label: C("labels.prompt"), panelAction: { action: m, label: "Generate", icon: vd }, onTextSubmitInProgess: u, panelActionDisabled: d.length > Al || (p == null ? void 0 : p.rateLimitRemaining) === 0, renderTopRight: () => p ? h.jsxs("div", { className: "ttd-dialog-rate-limit", style: { fontSize: 12, marginLeft: "auto", color: p.rateLimitRemaining === 0 ? "var(--color-danger)" : void 0 }, children: [p.rateLimitRemaining, " requests left today"] }) : null, renderSubmitShortcut: () => h.jsx(Zv, {}), renderBottomRight: () => {
    if (typeof (r == null ? void 0 : r.generatedResponse) == "string") return h.jsxs("div", { className: "excalidraw-link", style: { marginLeft: "auto", fontSize: 14 }, onClick: () => {
      typeof (r == null ? void 0 : r.generatedResponse) == "string" && (wU(r.generatedResponse), a({ openDialog: { name: "ttd", tab: "mermaid" } }));
    }, children: ["View as Mermaid", h.jsx(Eh, { icon: vd })] });
    let S = d.length / Al;
    return S > 0.8 ? h.jsxs("div", { style: { marginLeft: "auto", fontSize: 12, fontFamily: "monospace", color: S > 1 ? "var(--color-danger)" : void 0 }, children: ["Length: ", d.length, "/", Al] }) : null;
  }, children: h.jsx(Gv, { onChange: o, input: s, placeholder: "Describe what you want to see...", onKeyboardSubmit: () => {
    g.current();
  } }) }), h.jsx(_u, { label: "Preview", panelAction: { action: () => {
    console.info("Panel action clicked"), Wv({ app: n, data: x });
  }, label: "Insert", icon: vd }, children: h.jsx(Yv, { canvasRef: i, error: y, loaded: b.loaded }) })] })] })] }) });
}), lG = 0.01, Pi = (e, t) => !(t === "height" && q(e) || t === "width" && q(e) || t === "angle" && de(e)), tn = (e, t) => {
  let n = e + t / 2;
  return n - n % t;
}, Au = (e, t, n) => Object.keys(e).map((a) => ({ original: (n ?? t).get(a), latest: t.get(a) })).filter((a) => a.original !== void 0 && a.latest !== void 0), rc = (e, t, n, a, i, r, l, s = !0) => {
  let c = a.get(n.id);
  if (!c) return;
  let [d, o] = [n.x + n.width / 2, n.y + n.height / 2], [u, f] = B(k(n.x, n.y), k(d, o), n.angle), p = e - u, U = t - f, [m, g] = B(k(e, t), k(d + p, o + U), -n.angle);
  W(c, { x: m, y: g }, s), g0(c, a, i, r);
  let b = be(n, l);
  if (b) {
    let v = a.get(b.id);
    v && W(v, { x: b.x + p, y: b.y + U }, s);
  }
}, EU = (e, t) => {
  let n = Yr(t).map((a) => it(e, a).reduce((i, r) => (i[r.id] = !0, i), {}));
  return e.filter((a) => !ds(a)).forEach((a) => {
    n.push({ [a.id]: !0 });
  }), n;
}, g0 = (e, t, n, a, i) => {
  pe(e) ? ou([e], t, n, a, !0, [], i == null ? void 0 : i.zoom) : Sn(e, t, i);
}, sG = ({ label: e, icon: t, dragInputCallback: n, value: a, elements: i, editable: r = !0, shouldKeepAspectRatio: l, property: s, scene: c, appState: d, sensitivity: o = 1 }) => {
  let u = ri(), f = ie(null), p = ie(null), [U, m] = re(a.toString()), g = ie(null);
  g.current || (g.current = { originalAppState: yi(d), originalElements: i, lastUpdatedValue: U, updatePending: !1 }), Q(() => {
    let x = a.toString();
    m(x), g.current.lastUpdatedValue = x;
  }, [a]);
  let b = (x, y, E) => {
    if (!g.current.updatePending) return !1;
    g.current.updatePending = !1;
    let S = Number(x);
    if (isNaN(S)) {
      m(a.toString());
      return;
    }
    let w = Number(S.toFixed(2)), M = Number(a);
    (isNaN(M) || Math.abs(w - M) >= lG) && (g.current.lastUpdatedValue = x, n({ accumulatedChange: 0, instantChange: 0, originalElements: y, originalElementsMap: u.scene.getNonDeletedElementsMap(), shouldKeepAspectRatio: l, shouldChangeByStepSize: !1, scene: c, nextValue: w, property: s, originalAppState: E, setInputValue: (I) => m(String(I)) }), u.syncActionResult({ captureUpdate: H.IMMEDIATELY }));
  }, v = ie({});
  return v.current.handleInputValue = b, Q(() => {
    let x = f.current, y = v.current;
    return () => {
      var S;
      let E = x == null ? void 0 : x.value;
      E && ((S = y.handleInputValue) == null || S.call(y, E, g.current.originalElements, g.current.originalAppState)), window.removeEventListener("pointermove", y.onPointerMove, !1), window.removeEventListener("pointerup", y.onPointerUp, !1);
    };
  }, [r]), r ? h.jsxs("div", { className: ne("drag-input-container", !r && "disabled"), "data-testid": e, children: [h.jsx("div", { className: "drag-input-label", ref: p, onPointerDown: (x) => {
    if (f.current && r) {
      document.body.classList.add("excalidraw-cursor-resize"), Number(f.current.value);
      let y = null, E = u.scene.getNonDeletedElements().reduce((A, D) => (A.set(D.id, bl(D)), A), /* @__PURE__ */ new Map()), S = i.map((A) => E.get(A.id)), w = yi(d), M = 0, I = 0, T = (A) => {
        if (y && E !== null && S !== null) {
          let D = A.clientX - y.x;
          D !== 0 && (I += D, Math.abs(I) >= o && (I = Math.sign(I) * Math.floor(Math.abs(I) / o), M += I, n({ accumulatedChange: M, instantChange: I, originalElements: S, originalElementsMap: E, shouldKeepAspectRatio: l, shouldChangeByStepSize: A.shiftKey, property: s, scene: c, originalAppState: w, setInputValue: (P) => m(String(P)) }), I = 0));
        }
        y = { x: A.clientX, y: A.clientY };
      }, _ = () => {
        window.removeEventListener("pointermove", T, !1), u.syncActionResult({ captureUpdate: H.IMMEDIATELY }), y = null, M = 0, I = 0, S = null, E = null, document.body.classList.remove("excalidraw-cursor-resize"), window.removeEventListener("pointerup", _, !1);
      };
      v.current.onPointerMove = T, v.current.onPointerUp = _, window.addEventListener("pointermove", T, !1), window.addEventListener("pointerup", _, !1);
    }
  }, onPointerEnter: () => {
    p.current && (p.current.style.cursor = "ew-resize");
  }, children: t ? h.jsx(Eh, { icon: t }) : e }), h.jsx("input", { className: "drag-input", autoComplete: "off", spellCheck: "false", onKeyDown: (x) => {
    if (r) {
      let y = x.target;
      y instanceof HTMLInputElement && x.key === L.ENTER && (b(y.value, i, d), u.focusContainer());
    }
  }, ref: f, value: U, onChange: (x) => {
    g.current.updatePending = !0, m(x.target.value);
  }, onFocus: (x) => {
    x.target.select(), g.current.originalElements = i, g.current.originalAppState = yi(d);
  }, onBlur: (x) => {
    U ? r && b(x.target.value, g.current.originalElements, g.current.originalAppState) : m(a.toString());
  }, disabled: !r })] }) : null;
}, Fi = sG, c5 = 10, oG = (e) => e.type === "image", cG = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldKeepAspectRatio: a, shouldChangeByStepSize: i, nextValue: r, property: l, originalAppState: s, instantChange: c, scene: d }) => {
  let o = d.getNonDeletedElementsMap(), u = t[0], f = o.get(u.id);
  if (u && f) {
    let p = a || oG(u), U = u.width / u.height;
    if (s.croppingElementId === u.id) {
      let x = o.get(u.id);
      if (!x || !Re(x) || !x.crop) return;
      let y = x.crop, E = { ...y }, S = x.scale[0] === -1, w = x.scale[1] === -1, { width: M, height: I } = Ci(x), T = y.naturalWidth / M, _ = y.naturalHeight / I, A = S ? y.width + y.x : y.naturalWidth - y.x, D = w ? y.height + y.y : y.naturalHeight - y.y, P = zt * T, N = zt * _;
      if (r !== void 0) {
        if (l === "width") {
          let G = r * T, ae = Se(G, P, A);
          E = { ...E, width: ae, x: S ? y.x + y.width - ae : y.x };
        } else if (l === "height") {
          let G = r * _, ae = Se(G, N, D);
          E = { ...E, height: ae, y: w ? y.y + y.height - ae : y.y };
        }
        W(x, { crop: E, width: E.width / (y.naturalWidth / M), height: E.height / (y.naturalHeight / I) });
        return;
      }
      let $ = l === "width" ? c : 0, R = l === "height" ? c : 0, V = Se(y.width + $, P, A), O = Se(y.height + R, P, D);
      E = { ...y, x: S ? y.x + y.width - V : y.x, y: w ? y.y + y.height - O : y.y, width: V, height: O }, W(x, { crop: E, width: E.width / (y.naturalWidth / M), height: E.height / (y.naturalHeight / I) });
      return;
    }
    if (r !== void 0) {
      let x = Math.max(l === "width" ? r : p ? r * U : u.width, zn), y = Math.max(l === "height" ? r : p ? r / U : u.height, zn);
      Jo(x, y, f, u, o, n, l === "width" ? "e" : "s", { shouldMaintainAspectRatio: p });
      return;
    }
    let m = l === "width" ? e : 0, g = l === "height" ? e : 0, b = Math.max(0, u.width + m);
    l === "width" && (i ? b = tn(b, c5) : b = Math.round(b));
    let v = Math.max(0, u.height + g);
    l === "height" && (i ? v = tn(v, c5) : v = Math.round(v)), p && (l === "width" ? v = Math.round(b / U * 100) / 100 : b = Math.round(v * U * 100) / 100), v = Math.max(zn, v), b = Math.max(zn, b), Jo(b, v, f, u, o, n, l === "width" ? "e" : "s", { shouldMaintainAspectRatio: p });
  }
}, dG = ({ property: e, element: t, scene: n, appState: a }) => {
  let i = Ga(e === "width" ? t.width : t.height, 2);
  if (a.croppingElementId && a.croppingElementId === t.id && Re(t) && t.crop) {
    let { width: r, height: l } = Ci(t);
    if (e === "width") {
      let s = r / t.crop.naturalWidth;
      i = Ga(t.crop.width * s, 2);
    }
    if (e === "height") {
      let s = l / t.crop.naturalHeight;
      i = Ga(t.crop.height * s, 2);
    }
  }
  return h.jsx(Fi, { label: e === "width" ? "W" : "H", elements: [t], dragInputCallback: cG, value: i, editable: Pi(t, e), scene: n, appState: a, property: e });
}, d5 = dG, uG = 15, hG = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = i.getNonDeletedElements(), s = t[0];
  if (s && !ee(s)) {
    let c = r.get(s.id);
    if (!c) return;
    if (a !== void 0) {
      let U = Wr(a);
      W(c, { angle: U }), g0(c, r, l, i);
      let m = be(c, r);
      m && !ye(c) && W(m, { angle: U });
      return;
    }
    let d = Math.round(hc(s.angle) * 100) / 100, o = Math.round(e), u = (d + o) % 360;
    n && (u = tn(u, uG)), u = u < 0 ? u + 360 : u;
    let f = Wr(u);
    W(c, { angle: f }), g0(c, r, l, i);
    let p = be(c, r);
    p && !ye(c) && W(p, { angle: f });
  }
}, fG = ({ element: e, scene: t, appState: n, property: a }) => h.jsx(Fi, { label: "A", icon: v8, value: Math.round(hc(e.angle) % 360 * 100) / 100, elements: [e], dragInputCallback: hG, editable: Pi(e, "angle"), scene: t, appState: n, property: a }), pG = fG, u5 = 4, UG = 4, mG = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = t[0];
  if (l) {
    let s = r.get(l.id);
    if (!s || !q(s)) return;
    let c;
    if (a !== void 0) c = Math.max(Math.round(a), u5);
    else if (l.type === "text") {
      let d = Math.round(l.fontSize), o = Math.round(e);
      c = Math.max(d + o, u5), n && (c = tn(c, UG));
    }
    c && (W(s, { fontSize: c }), un(s, i.getContainerElement(s), i.getNonDeletedElementsMap()));
  }
}, gG = ({ element: e, scene: t, appState: n, property: a }) => {
  let i = q(e) ? e : Jn(e) ? be(e, t.getNonDeletedElementsMap()) : null;
  return i ? h.jsx(Fi, { label: "F", value: Math.round(i.fontSize * 10) / 10, elements: [i], dragInputCallback: mG, icon: Yu, appState: n, scene: t, property: a }) : null;
}, bG = gG, jl = 10, vG = (e, t, n, a) => {
  let i = a.x - e, r = a.y - t, l = a.width * n, s = a.height * n, c = e + i * n, d = t + r * n;
  return { width: l, height: s, x: c, y: d, ...$p(a, l, s, !1), ...q(a) ? { fontSize: a.fontSize * n } : {} };
}, xG = (e, t, n, a, i, r, l, s) => {
  let c = vG(e, t, a, r);
  W(i, c, !1);
  let d = be(r, s);
  if (d) {
    let o = d.fontSize * a;
    Sn(i, l, { newSize: { width: c.width, height: c.height } });
    let u = l.get(d.id);
    u && q(u) && (W(u, { fontSize: o }, !1), bc(i, l, n === "width" ? "e" : "s", !0));
  }
}, h5 = (e, t, n, a, i, r, l, s, c, d) => {
  r === "width" ? t = Math.round(e / a * 100) / 100 : e = Math.round(t * a * 100) / 100;
  let o = t / n;
  for (let u = 0; u < s.length; u++) {
    let f = s[u], p = l[u];
    xG(i[0], i[1], r, o, p, f, c, d);
  }
}, yG = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, originalAppState: a, shouldChangeByStepSize: i, nextValue: r, scene: l, property: s }) => {
  let c = l.getNonDeletedElementsMap(), d = EU(t, a);
  if (r !== void 0) {
    for (let f of d) {
      let p = Au(f, c, n);
      if (p.length > 1) {
        let U = p.map((I) => I.latest), m = p.map((I) => I.original), [g, b, v, x] = ze(m), y = v - g, E = x - b, S = y / E, w = Math.max(zn, s === "width" ? Math.max(0, r) : y), M = Math.max(zn, s === "height" ? Math.max(0, r) : E);
        h5(w, M, E, S, k(g, b), s, U, m, c, n);
      } else {
        let [U] = p, m = U == null ? void 0 : U.latest, g = U == null ? void 0 : U.original;
        if (m && g && Pi(m, s)) {
          let b = s === "width" ? Math.max(0, r) : m.width;
          s === "width" && (i ? b = tn(b, jl) : b = Math.round(b));
          let v = s === "height" ? Math.max(0, r) : m.height;
          s === "height" && (i ? v = tn(v, jl) : v = Math.round(v)), b = Math.max(zn, b), v = Math.max(zn, v), Jo(b, v, m, g, c, n, s === "width" ? "e" : "s", { shouldInformMutation: !1 });
        }
      }
    }
    l.triggerUpdate();
    return;
  }
  let o = s === "width" ? e : 0, u = s === "height" ? e : 0;
  for (let f of d) {
    let p = Au(f, c, n);
    if (p.length > 1) {
      let U = p.map((I) => I.latest), m = p.map((I) => I.original), [g, b, v, x] = ze(m), y = v - g, E = x - b, S = y / E, w = Math.max(0, y + o);
      s === "width" && (i ? w = tn(w, jl) : w = Math.round(w));
      let M = Math.max(0, E + u);
      s === "height" && (i ? M = tn(M, jl) : M = Math.round(M)), w = Math.max(zn, w), M = Math.max(zn, M), h5(w, M, E, S, k(g, b), s, U, m, c, n);
    } else {
      let [U] = p, m = U == null ? void 0 : U.latest, g = U == null ? void 0 : U.original;
      if (m && g && Pi(m, s)) {
        let b = Math.max(0, g.width + o);
        s === "width" && (i ? b = tn(b, jl) : b = Math.round(b));
        let v = Math.max(0, g.height + u);
        s === "height" && (i ? v = tn(v, jl) : v = Math.round(v)), b = Math.max(zn, b), v = Math.max(zn, v), Jo(b, v, m, g, c, n, s === "width" ? "e" : "s", { shouldInformMutation: !1 });
      }
    }
  }
  l.triggerUpdate();
}, wG = ({ property: e, elements: t, elementsMap: n, atomicUnits: a, scene: i, appState: r }) => {
  let l = nt(() => a.map((d) => {
    let o = Au(d, n);
    if (o.length > 1) {
      let [f, p, U, m] = ze(o.map((g) => g.latest));
      return Math.round((e === "width" ? U - f : m - p) * 100) / 100;
    }
    let [u] = o;
    return Math.round((e === "width" ? u.latest.width : u.latest.height) * 100) / 100;
  }), [n, a, e]), s = new Set(l).size === 1 ? Math.round(l[0] * 100) / 100 : "Mixed", c = l.length > 0;
  return h.jsx(Fi, { label: e === "width" ? "W" : "H", elements: t, dragInputCallback: yG, value: s, editable: c, appState: r, property: e, scene: i });
}, f5 = wG, EG = 15, SG = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, property: i, scene: r }) => {
  let l = r.getNonDeletedElementsMap(), s = t.map((d) => l.get(d.id)).filter((d) => d && !ds(d) && Pi(d, i)), c = t.filter((d) => !ds(d) && Pi(d, i));
  if (a !== void 0) {
    let d = Wr(a);
    for (let o of s) {
      if (!o) continue;
      W(o, { angle: d }, !1);
      let u = be(o, l);
      u && !ye(o) && W(u, { angle: d }, !1);
    }
    r.triggerUpdate();
    return;
  }
  for (let d = 0; d < s.length; d++) {
    let o = s[d];
    if (!o) continue;
    let u = c[d], f = Math.round(hc(u.angle) * 100) / 100, p = Math.round(e), U = (f + p) % 360;
    n && (U = tn(U, EG)), U = U < 0 ? U + 360 : U;
    let m = Wr(U);
    W(o, { angle: m }, !1);
    let g = be(o, l);
    g && !ye(o) && W(g, { angle: m }, !1);
  }
  r.triggerUpdate();
}, kG = ({ elements: e, scene: t, appState: n, property: a }) => {
  let i = e.filter((c) => !ds(c) && Pi(c, "angle")), r = i.map((c) => Math.round(hc(c.angle) % 360 * 100) / 100), l = new Set(r).size === 1 ? r[0] : "Mixed", s = i.some((c) => Pi(c, "angle"));
  return h.jsx(Fi, { label: "A", icon: v8, value: l, elements: e, dragInputCallback: SG, editable: s, appState: n, scene: t, property: a });
}, MG = kG, p5 = 4, CG = 4, IG = (e, t) => e.reduce((n, a) => {
  if (!a || ds(a)) return n;
  if (q(a)) return n.push(a), n;
  if (Jn(a)) {
    let i = be(a, t);
    if (i) return n.push(i), n;
  }
  return n;
}, []), TG = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = t.map((c) => r.get(c.id)), s;
  if (a) {
    s = Math.max(Math.round(a), p5);
    for (let c of l) W(c, { fontSize: s }, !1), un(c, i.getContainerElement(c), r, !1);
    i.triggerUpdate();
  } else {
    let c = t;
    for (let d = 0; d < l.length; d++) {
      let o = l[d], u = c[d], f = Math.round(u.fontSize), p = Math.round(e), U = Math.max(f + p, p5);
      n && (U = tn(U, CG)), W(o, { fontSize: U }, !1), un(o, i.getContainerElement(o), r, !1);
    }
    i.triggerUpdate();
  }
}, _G = ({ elements: e, scene: t, appState: n, property: a, elementsMap: i }) => {
  let r = IG(e, i);
  if (!r.length) return null;
  let l = r.map((d) => Math.round(d.fontSize * 10) / 10), s = new Set(l).size === 1 ? l[0] : "Mixed", c = l.length > 0;
  return h.jsx(Fi, { label: "F", icon: Yu, elements: r, dragInputCallback: TG, value: s, editable: c, scene: t, property: a, appState: n });
}, AG = _G, U5 = 10, jG = ({ accumulatedChange: e, instantChange: t, originalElements: n, originalElementsMap: a, shouldChangeByStepSize: i, nextValue: r, property: l, scene: s, originalAppState: c }) => {
  let d = s.getNonDeletedElementsMap(), o = s.getNonDeletedElements(), u = n[0], [f, p] = [u.x + u.width / 2, u.y + u.height / 2], [U, m] = B(k(u.x, u.y), k(f, p), u.angle);
  if (c.croppingElementId === u.id) {
    let y = d.get(u.id);
    if (!y || !Re(y) || !y.crop) return;
    let E = y.crop, S = E, w = y.scale[0] === -1, M = y.scale[1] === -1, { width: I, height: T } = Ci(y);
    if (r !== void 0) {
      if (l === "x") {
        let D = r * (E.naturalWidth / I);
        w ? S = { ...E, x: Se(E.naturalWidth - D - E.width, 0, E.naturalWidth - E.width) } : S = { ...E, x: Se(r * (E.naturalWidth / I), 0, E.naturalWidth - E.width) };
      }
      l === "y" && (S = { ...E, y: Se(r * (E.naturalHeight / T), 0, E.naturalHeight - E.height) }), W(y, { crop: S });
      return;
    }
    let _ = (l === "x" ? t : 0) * (w ? -1 : 1), A = (l === "y" ? t : 0) * (M ? -1 : 1);
    S = { ...E, x: Se(E.x + _, 0, E.naturalWidth - E.width), y: Se(E.y + A, 0, E.naturalHeight - E.height) }, W(y, { crop: S });
    return;
  }
  if (r !== void 0) {
    rc(l === "x" ? r : U, l === "y" ? r : m, u, d, o, s, a);
    return;
  }
  let g = l === "x" ? e : 0, b = l === "y" ? e : 0, v = l === "x" ? Math.round(i ? tn(u.x + g, U5) : U + g) : U, x = l === "y" ? Math.round(i ? tn(u.y + b, U5) : m + b) : m;
  rc(v, x, u, d, o, s, a);
}, DG = ({ property: e, element: t, elementsMap: n, scene: a, appState: i }) => {
  let [r, l] = B(k(t.x, t.y), k(t.x + t.width / 2, t.y + t.height / 2), t.angle), s = Ga(e === "x" ? r : l, 2);
  if (i.croppingElementId === t.id && Re(t) && t.crop) {
    let c = YD(t);
    c && (s = Ga(e === "x" ? c.x : c.y, 2));
  }
  return h.jsx(Fi, { label: e === "x" ? "X" : "Y", elements: [t], dragInputCallback: jG, scene: a, value: s, property: e, appState: i });
}, m5 = DG, LG = 10, RG = (e, t, n, a, i, r, l, s) => {
  for (let c = 0; c < a.length; c++) {
    let d = i[c], [o, u] = [d.x + d.width / 2, d.y + d.height / 2], [f, p] = B(k(d.x, d.y), k(o, u), d.angle), U = e === "x" ? Math.round(f + t) : f, m = e === "y" ? Math.round(p + n) : p;
    rc(U, m, d, r, a, s, l, !1);
  }
}, PG = (e, t, n, a, i, r, l) => {
  let [s, c, ,] = ze(n), d = e - s, o = t - c;
  for (let u = 0; u < n.length; u++) {
    let f = n[u], p = a.get(f.id);
    if (p && (!q(p) || !p.containerId)) {
      let [U, m] = [p.x + p.width / 2, p.y + p.height / 2], [g, b] = B(k(p.x, p.y), k(U, m), p.angle);
      rc(g + d, b + o, f, a, i, l, r, !1);
    }
  }
}, NG = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldChangeByStepSize: a, nextValue: i, property: r, scene: l, originalAppState: s }) => {
  var u, f;
  let c = l.getNonDeletedElementsMap(), d = l.getNonDeletedElements();
  if (i !== void 0) {
    for (let p of EU(t, s)) {
      let U = Au(p, c, n);
      if (U.length > 1) {
        let [m, g, ,] = ze(U.map((b) => b.latest));
        PG(r === "x" ? i : m, r === "y" ? i : g, U.map((b) => b.original), c, d, n, l);
      } else {
        let m = (u = U[0]) == null ? void 0 : u.original, g = (f = U[0]) == null ? void 0 : f.latest;
        if (m && g && Pi(g, r)) {
          let [b, v] = [m.x + m.width / 2, m.y + m.height / 2], [x, y] = B(k(m.x, m.y), k(b, v), m.angle);
          rc(r === "x" ? i : x, r === "y" ? i : y, m, c, d, l, n, !1);
        }
      }
    }
    l.triggerUpdate();
    return;
  }
  let o = a ? tn(e, LG) : e;
  RG(r, r === "x" ? o : 0, r === "y" ? o : 0, t, t, c, n, l), l.triggerUpdate();
}, OG = ({ property: e, elements: t, elementsMap: n, atomicUnits: a, scene: i, appState: r }) => {
  let l = nt(() => a.map((c) => {
    let d = Object.keys(c).map((m) => n.get(m)).filter((m) => m !== void 0);
    if (d.length > 1) {
      let [m, g] = ze(d);
      return Math.round((e === "x" ? m : g) * 100) / 100;
    }
    let [o] = d, [u, f] = [o.x + o.width / 2, o.y + o.height / 2], [p, U] = B(k(o.x, o.y), k(u, f), o.angle);
    return Math.round((e === "x" ? p : U) * 100) / 100;
  }), [a, n, e]), s = new Set(l).size === 1 ? l[0] : "Mixed";
  return h.jsx(Fi, { label: e === "x" ? "X" : "Y", elements: t, dragInputCallback: NG, value: s, property: e, scene: i, appState: r });
}, g5 = OG, b5 = 5, $G = ({ property: e, scene: t, appState: n, setAppState: a }) => h.jsx(Fi, { label: "Grid step", sensitivity: 8, elements: [], dragInputCallback: ({ nextValue: i, instantChange: r, shouldChangeByStepSize: l, setInputValue: s }) => {
  a((c) => {
    let d;
    return i ? d = i : r && (d = l ? tn(c.gridStep + b5 * Math.sign(r), b5) : c.gridStep + r), d ? (d = p7(d), s(d), { gridStep: d }) : (s(c.gridStep), null);
  });
}, scene: t, value: n.gridStep, property: e, appState: n }), FG = $G, zG = 50, SU = (e) => {
  let t = Mc(), n = e.app.scene.getSceneNonce() || 1, a = e.app.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 }), i = Zo(e.app);
  return h.jsx(BG, { ...e, appState: t, sceneNonce: n, selectedElements: a, gridModeEnabled: i });
}, at = ({ children: e, columns: t = 1, heading: n, style: a, ...i }) => h.jsx("div", { className: ne("exc-stats__row", { "exc-stats__row--heading": n }), style: { gridTemplateColumns: `repeat(${t}, 1fr)`, ...a }, ...i, children: e });
at.displayName = "StatsRow";
var ju = ({ children: e, order: t, style: n, ...a }) => h.jsx("div", { className: "exc-stats__rows", style: { order: t, ...n }, ...a, children: e });
ju.displayName = "StatsRows";
SU.StatsRow = at;
SU.StatsRows = ju;
var BG = xs(({ app: e, onClose: t, renderCustomStats: n, selectedElements: a, appState: i, sceneNonce: r, gridModeEnabled: l }) => {
  let s = e.scene, c = s.getNonDeletedElements(), d = s.getNonDeletedElementsMap(), o = Ft(), u = a.length === 1 ? a[0] : null, f = a.length > 1 ? a : null, p = i.croppingElementId && Re(u), U = p ? Ci(u) : null, [m, g] = re({ width: 0, height: 0 }), b = nt(() => cc((y) => {
    let E = ze(y);
    g({ width: Math.round(E[2]) - Math.round(E[0]), height: Math.round(E[3]) - Math.round(E[1]) });
  }, zG), []);
  Q(() => {
    b(c);
  }, [r, c, b]), Q(() => () => b.cancel(), [b]);
  let v = nt(() => EU(a, i), [a, i]), x = nt(() => u3(a), [a]);
  return h.jsx("div", { className: "exc-stats", children: h.jsxs(ba, { padding: 3, children: [h.jsxs("div", { className: "title", children: [h.jsx("h2", { children: C("stats.title") }), h.jsx("div", { className: "close", onClick: t, children: Ms })] }), h.jsxs(r0, { label: h.jsx("h3", { children: C("stats.generalStats") }), open: !!(i.stats.panels & $l.generalStats), openTrigger: () => o((y) => ({ stats: { open: !0, panels: y.stats.panels ^ $l.generalStats } })), children: [h.jsxs(ju, { children: [h.jsx(at, { heading: !0, children: C("stats.scene") }), h.jsxs(at, { columns: 2, children: [h.jsx("div", { children: C("stats.shapes") }), h.jsx("div", { children: c.length })] }), h.jsxs(at, { columns: 2, children: [h.jsx("div", { children: C("stats.width") }), h.jsx("div", { children: m.width })] }), h.jsxs(at, { columns: 2, children: [h.jsx("div", { children: C("stats.height") }), h.jsx("div", { children: m.height })] }), l && h.jsxs(h.Fragment, { children: [h.jsx(at, { heading: !0, children: "Canvas" }), h.jsx(at, { children: h.jsx(FG, { property: "gridStep", scene: s, appState: i, setAppState: o }) })] })] }), n == null ? void 0 : n(c, i)] }), !x && a.length > 0 && h.jsx("div", { id: "elementStats", style: { marginTop: 12 }, children: h.jsx(r0, { label: h.jsx("h3", { children: C("stats.elementProperties") }), open: !!(i.stats.panels & $l.elementProperties), openTrigger: () => o((y) => ({ stats: { open: !0, panels: y.stats.panels ^ $l.elementProperties } })), children: h.jsxs(ju, { children: [u && h.jsxs(h.Fragment, { children: [p && h.jsx(at, { heading: !0, children: C("labels.unCroppedDimension") }), i.croppingElementId && Re(u) && U && h.jsxs(at, { columns: 2, children: [h.jsx("div", { children: C("stats.width") }), h.jsx("div", { children: Ga(U.width, 2) })] }), i.croppingElementId && Re(u) && U && h.jsxs(at, { columns: 2, children: [h.jsx("div", { children: C("stats.height") }), h.jsx("div", { children: Ga(U.height, 2) })] }), h.jsx(at, { heading: !0, "data-testid": "stats-element-type", children: i.croppingElementId ? C("labels.imageCropping") : C(`element.${u.type}`) }), h.jsx(at, { children: h.jsx(m5, { element: u, property: "x", elementsMap: d, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(m5, { element: u, property: "y", elementsMap: d, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(d5, { property: "width", element: u, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(d5, { property: "height", element: u, scene: s, appState: i }) }), !ee(u) && h.jsx(at, { children: h.jsx(pG, { property: "angle", element: u, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(bG, { property: "fontSize", element: u, scene: s, appState: i }) })] }), f && h.jsxs(h.Fragment, { children: [v7(f) && h.jsx(at, { heading: !0, children: C("element.group") }), h.jsxs(at, { columns: 2, style: { margin: "0.3125rem 0" }, children: [h.jsx("div", { children: C("stats.shapes") }), h.jsx("div", { children: a.length })] }), h.jsx(at, { children: h.jsx(g5, { property: "x", elements: f, elementsMap: d, atomicUnits: v, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(g5, { property: "y", elements: f, elementsMap: d, atomicUnits: v, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(f5, { property: "width", elements: f, elementsMap: d, atomicUnits: v, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(f5, { property: "height", elements: f, elementsMap: d, atomicUnits: v, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(MG, { property: "angle", elements: f, scene: s, appState: i }) }), h.jsx(at, { children: h.jsx(AG, { property: "fontSize", elements: f, scene: s, appState: i, elementsMap: d }) })] })] }) }) })] }) });
}, (e, t) => e.sceneNonce === t.sceneNonce && e.selectedElements === t.selectedElements && e.appState.stats.panels === t.appState.stats.panels && e.gridModeEnabled === t.gridModeEnabled && e.appState.gridStep === t.appState.gridStep && e.appState.croppingElementId === t.appState.croppingElementId), HG = ({ sourceElementId: e, onClose: t, elementsMap: n, appState: a, generateLinkForSelection: i = V7 }) => {
  var u;
  let r = ((u = n.get(e)) == null ? void 0 : u.link) ?? null, [l, s] = re(r), [c, d] = re(!1);
  Q(() => {
    let f = xe(n, a), p = r;
    if (f.length > 0 && i) {
      let U = G7(f, a);
      U && (p = Dn(i(U.id, U.type)));
    }
    s(p);
  }, [n, a, a.selectedElementIds, r, i]);
  let o = Te(() => {
    var f;
    if (l && l !== ((f = n.get(e)) == null ? void 0 : f.link)) {
      let p = n.get(e);
      p && W(p, { link: l });
    }
    if (!l && c && e) {
      let p = n.get(e);
      p && W(p, { link: null });
    }
    t == null || t();
  }, [e, l, n, c, t]);
  return Q(() => {
    let f = (p) => {
      var U, m;
      ((U = a.openDialog) == null ? void 0 : U.name) === "elementLinkSelector" && p.key === L.ENTER && o(), ((m = a.openDialog) == null ? void 0 : m.name) === "elementLinkSelector" && p.key === L.ESCAPE && (t == null || t());
    };
    return window.addEventListener("keydown", f), () => {
      window.removeEventListener("keydown", f);
    };
  }, [a, t, o]), h.jsxs("div", { className: "ElementLinkDialog", children: [h.jsxs("div", { className: "ElementLinkDialog__header", children: [h.jsx("h2", { children: C("elementLink.title") }), h.jsx("p", { children: C("elementLink.desc") })] }), h.jsxs("div", { className: "ElementLinkDialog__input", children: [h.jsx(vU, { value: l ?? "", onChange: (f) => {
    c || d(!0), s(f);
  }, onKeyDown: (f) => {
    f.key === L.ENTER && o();
  }, className: "ElementLinkDialog__input-field", selectOnRender: !0 }), r && l && h.jsx(Ce, { type: "button", title: C("buttons.remove"), "aria-label": C("buttons.remove"), label: C("buttons.remove"), onClick: () => {
    s(null), d(!0);
  }, className: "ElementLinkDialog__remove", icon: ll })] }), h.jsxs("div", { className: "ElementLinkDialog__actions", children: [h.jsx(bs, { label: C("buttons.cancel"), onClick: () => {
    t == null || t();
  }, style: { marginRight: 10 } }), h.jsx(bs, { label: C("buttons.confirm"), onClick: o, actionType: "primary" })] })] });
}, XG = HG, WG = ({ UIOptions: e }) => h.jsxs(mn, { __fallback: !0, children: [h.jsx(mn.DefaultItems.LoadScene, {}), h.jsx(mn.DefaultItems.SaveToActiveFile, {}), e.canvasActions.export && h.jsx(mn.DefaultItems.Export, {}), e.canvasActions.saveAsImage && h.jsx(mn.DefaultItems.SaveAsImage, {}), h.jsx(mn.DefaultItems.SearchMenu, {}), h.jsx(mn.DefaultItems.Help, {}), h.jsx(mn.DefaultItems.ClearCanvas, {}), h.jsx(mn.Separator, {}), h.jsx(mn.Group, { title: "Excalidraw links", children: h.jsx(mn.DefaultItems.Socials, {}) }), h.jsx(mn.Separator, {}), h.jsx(mn.DefaultItems.ToggleTheme, {}), h.jsx(mn.DefaultItems.ChangeCanvasBackground, {})] }), VG = () => h.jsxs(Ff, { __fallback: !0, children: [h.jsx(Ff.Actions.SaveToDisk, {}), h.jsx(Ff.Actions.ExportToImage, {})] }), GG = ({ actionManager: e, appState: t, files: n, setAppState: a, elements: i, canvas: r, onLockToggle: l, onHandToolToggle: s, onPenModeToggle: c, showExitZenModeBtn: d, renderTopRightUI: o, renderCustomStats: u, UIOptions: f, onExportImage: p, renderWelcomeScreen: U, children: m, app: g, isCollaborating: b, generateLinkForSelection: v }) => {
  var $, R, V;
  let x = $t(), y = DW(), E = y.tunnelsJotai.Provider, [S, w] = xt(wh), M = () => f.canvasActions.export ? h.jsx(TV, { elements: i, appState: t, files: n, actionManager: e, exportOpts: f.canvasActions.export, canvas: r, setAppState: a }) : null, I = () => {
    var O;
    return !f.canvasActions.saveAsImage || ((O = t.openDialog) == null ? void 0 : O.name) !== "imageExport" ? null : h.jsx(iV, { elements: i, appState: t, files: n, actionManager: e, onExportImage: p, onCloseRequest: () => a({ openDialog: null }), name: g.getName() });
  }, T = () => h.jsxs("div", { style: { position: "relative" }, children: [h.jsx(y.MainMenuTunnel.Out, {}), U && h.jsx(y.WelcomeScreenMenuHintTunnel.Out, {})] }), _ = () => h.jsx(ic, { heading: "selectedShapeActions", className: ne("selected-shape-actions zen-mode-transition", { "transition-left": t.zenModeEnabled }), children: h.jsx(ba, { className: es.SHAPE_ACTIONS_MENU, padding: 2, style: { maxHeight: `${t.height - 166}px` }, children: h.jsx(ev, { appState: t, elementsMap: g.scene.getNonDeletedElementsMap(), renderAction: e.renderAction, app: g }) }) }), A = () => {
    var ae, he, ce, Be, He;
    let O = zp(t, i), G = t.stats.open && !t.zenModeEnabled && !t.viewModeEnabled && ((ae = t.openDialog) == null ? void 0 : ae.name) !== "elementLinkSelector";
    return h.jsx(cv, { side: "top", children: h.jsxs("div", { className: "App-menu App-menu_top", children: [h.jsxs(Xn.Col, { gap: 6, className: ne("App-menu_top__left"), children: [T(), O && _()] }), !t.viewModeEnabled && ((he = t.openDialog) == null ? void 0 : he.name) !== "elementLinkSelector" && h.jsx(ic, { heading: "shapes", className: "shapes-section", children: (Xe) => h.jsxs("div", { style: { position: "relative" }, children: [U && h.jsx(y.WelcomeScreenToolbarHintTunnel.Out, {}), h.jsx(Xn.Col, { gap: 4, align: "start", children: h.jsxs(Xn.Row, { gap: 1, className: ne("App-toolbar-container", { "zen-mode": t.zenModeEnabled }), children: [h.jsxs(ba, { padding: 1, className: ne("App-toolbar", { "zen-mode": t.zenModeEnabled }), children: [h.jsx(hv, { appState: t, isMobile: x.editor.isMobile, device: x, app: g }), Xe, h.jsxs(Xn.Row, { gap: 1, children: [h.jsx(pv, { zenModeEnabled: t.zenModeEnabled, checked: t.penMode, onChange: () => c(null), title: C("toolBar.penMode"), penDetected: t.penDetected }), h.jsx(fv, { checked: t.activeTool.locked, onChange: l, title: C("toolBar.lock") }), h.jsx("div", { className: "App-toolbar__divider" }), h.jsx(Uv, { checked: ns(t), onChange: () => s(), title: C("toolBar.hand"), isMobile: !0 }), h.jsx(tv, { appState: t, activeTool: t.activeTool, UIOptions: f, app: g })] })] }), b && h.jsx(ba, { style: { marginLeft: 8, alignSelf: "center", height: "fit-content" }, children: h.jsx(ZV, { title: C("toolBar.laser"), checked: t.activeTool.type === Pt.laser, onChange: () => g.setActiveTool({ type: Pt.laser }), isMobile: !0 }) })] }) })] }) }), h.jsxs("div", { className: ne("layer-ui__wrapper__top-right zen-mode-transition", { "transition-right": t.zenModeEnabled }), children: [t.collaborators.size > 0 && h.jsx(mv, { collaborators: t.collaborators, userToFollow: ((ce = t.userToFollow) == null ? void 0 : ce.socketId) || null }), o == null ? void 0 : o(x.editor.isMobile, t), !t.viewModeEnabled && ((Be = t.openDialog) == null ? void 0 : Be.name) !== "elementLinkSelector" && (!P || ((He = t.openSidebar) == null ? void 0 : He.name) !== Ua.name) && h.jsx(y.DefaultSidebarTriggerTunnel.Out, {}), G && h.jsx(SU, { app: g, onClose: () => {
      e.executeAction(c0);
    }, renderCustomStats: u })] })] }) });
  }, D = () => h.jsx(s5, { __fallback: !0, onDock: (O) => {
    tt("sidebar", `toggleDock (${O ? "dock" : "undock"})`, `(${x.editor.isMobile ? "mobile" : "desktop"})`);
  } }), P = l9(xU), N = h.jsxs(h.Fragment, { children: [m, h.jsx(WG, { UIOptions: f }), h.jsx(s5.Trigger, { __fallback: !0, icon: W0, title: bo(C("toolBar.library")), onToggle: (O) => {
    O && tt("sidebar", `${Ua.name} (open)`, `button (${x.editor.isMobile ? "mobile" : "desktop"})`);
  }, tab: Ua.defaultTab, children: C("toolBar.library") }), h.jsx(VG, {}), (($ = t.openDialog) == null ? void 0 : $.name) === "ttd" && h.jsx(iG, { __fallback: !0 }), t.isLoading && h.jsx(c9, { delay: 250 }), t.errorMessage && h.jsx(JW, { onClose: () => a({ errorMessage: null }), children: t.errorMessage }), S && !x.editor.isMobile && h.jsx(MH, { colorPickerType: S.colorPickerType, onCancel: () => {
    w(null);
  }, onChange: (O, G, ae, { altKey: he }) => {
    var ce;
    if (!(O !== "elementBackground" && O !== "elementStroke")) if (ae.length) {
      for (let Be of ae) W(Be, { [he && S.swapPreviewOnAlt ? O === "elementBackground" ? "strokeColor" : "backgroundColor" : O === "elementBackground" ? "backgroundColor" : "strokeColor"]: G }, !1), pt.delete(Be);
      (ce = Ai.getScene(ae[0])) == null || ce.triggerUpdate();
    } else a(O === "elementBackground" ? { currentItemBackgroundColor: G } : { currentItemStrokeColor: G });
  }, onSelect: (O, G) => {
    var ae;
    w((he) => he != null && he.keepOpenOnAlt && G.altKey ? he : null), (ae = S == null ? void 0 : S.onSelect) == null || ae.call(S, O, G);
  } }), ((R = t.openDialog) == null ? void 0 : R.name) === "help" && h.jsx(EV, { onClose: () => {
    a({ openDialog: null });
  } }), h.jsx(OW, {}), ((V = t.openDialog) == null ? void 0 : V.name) === "elementLinkSelector" && h.jsx(XG, { sourceElementId: t.openDialog.sourceElementId, onClose: () => {
    a({ openDialog: null });
  }, elementsMap: g.scene.getNonDeletedElementsMap(), appState: t, generateLinkForSelection: v }), h.jsx(y.OverwriteConfirmDialogTunnel.Out, {}), I(), M(), t.pasteDialog.shown && h.jsx(gV, { setAppState: a, appState: t, onClose: () => a({ pasteDialog: { shown: !1, data: null } }) }), x.editor.isMobile && h.jsx(mV, { app: g, appState: t, elements: i, actionManager: e, renderJSONExportDialog: M, renderImageExportDialog: I, setAppState: a, onLockToggle: l, onHandToolToggle: s, onPenModeToggle: c, renderTopRightUI: o, renderCustomStats: u, renderSidebars: D, device: x, renderWelcomeScreen: U, UIOptions: f }), !x.editor.isMobile && h.jsxs(h.Fragment, { children: [h.jsxs("div", { className: "layer-ui__wrapper", style: t.openSidebar && P && x.editor.canFitSidebar ? { width: "calc(100% - var(--right-sidebar-width))" } : {}, children: [U && h.jsx(y.WelcomeScreenCenterTunnel.Out, {}), A(), h.jsx(AV, { appState: t, actionManager: e, showExitZenModeBtn: d, renderWelcomeScreen: U }), t.scrolledOutside && h.jsx("button", { type: "button", className: "scroll-back-to-content", onClick: () => {
    a((O) => ({ ...Go(i, O) }));
  }, children: C("buttons.scrollBackToContent") })] }), D()] })] });
  return h.jsx(v9.Provider, { value: t, children: h.jsx(E, { children: h.jsx(q9.Provider, { value: y, children: N }) }) });
}, v5 = (e) => {
  let { suggestedBindings: t, startBoundElement: n, cursorButton: a, scrollX: i, scrollY: r, ...l } = e;
  return l;
}, YG = (e, t) => {
  if (e.children !== t.children) return !1;
  let { canvas: n, appState: a, ...i } = e, { canvas: r, appState: l, ...s } = t;
  return qt(v5(a), v5(l), { selectedElementIds: qt, selectedGroupIds: qt }) && qt(i, s);
}, ZG = Y.memo(GG, YG), KG = 5e3, qG = ({ message: e, onClose: t, closable: n = !1, duration: a = KG, style: i }) => {
  let r = ie(0), l = a !== 1 / 0, s = Te(() => {
    l && (r.current = window.setTimeout(() => t(), a));
  }, [t, a, l]);
  return Q(() => {
    if (l) return s(), () => clearTimeout(r.current);
  }, [s, e, a, l]), h.jsxs("div", { className: "Toast", onMouseEnter: l ? () => clearTimeout(r == null ? void 0 : r.current) : void 0, onMouseLeave: l ? s : void 0, style: i, children: [h.jsx("p", { className: "Toast__message", children: e }), n && h.jsx(Ce, { icon: Ms, "aria-label": "close", type: "icon", onClick: t, className: "close" })] });
}, x5 = Z({ name: "viewMode", label: "labels.viewMode", paletteName: "Toggle view mode", icon: K0, viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => !e.viewModeEnabled }, perform(e, t) {
  return { appState: { ...t, viewModeEnabled: !this.checked(t) }, captureUpdate: H.EVENTUALLY };
}, checked: (e) => e.viewModeEnabled, predicate: (e, t, n) => typeof n.viewModeEnabled > "u", keyTest: (e) => !e[L.CTRL_OR_CMD] && e.altKey && e.code === _e.R }), Jv = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length === 1 && de(n[0]);
}, JG = Z({ name: "selectAllElementsInFrame", label: "labels.selectAllElementsInFrame", trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t).at(0) || null;
  if (de(i)) {
    let r = ti(Qe(e), i.id).filter((l) => !(l.type === "text" && l.containerId));
    return { elements: e, appState: { ...t, selectedElementIds: r.reduce((l, s) => (l[s.id] = !0, l), {}) }, captureUpdate: H.IMMEDIATELY };
  }
  return { elements: e, appState: t, captureUpdate: H.EVENTUALLY };
}, predicate: (e, t, n, a) => Jv(t, a) }), QG = Z({ name: "removeAllElementsFromFrame", label: "labels.removeAllElementsFromFrame", trackEvent: { category: "history" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t).at(0) || null;
  return de(i) ? { elements: o3(e, i), appState: { ...t, selectedElementIds: { [i.id]: !0 } }, captureUpdate: H.IMMEDIATELY } : { elements: e, appState: t, captureUpdate: H.EVENTUALLY };
}, predicate: (e, t, n, a) => Jv(t, a) });
Z({ name: "updateFrameRendering", label: "labels.updateFrameRendering", viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t) => ({ elements: e, appState: { ...t, frameRendering: { ...t.frameRendering, enabled: !t.frameRendering.enabled } }, captureUpdate: H.EVENTUALLY }), checked: (e) => e.frameRendering.enabled });
Z({ name: "setFrameAsActiveTool", label: "toolBar.frame", trackEvent: { category: "toolbar" }, icon: y8, viewMode: !1, perform: (e, t, n, a) => {
  let i = Ct(t, { type: "frame" });
  return La(a.interactiveCanvas, { ...t, activeTool: i }), { elements: e, appState: { ...t, activeTool: Ct(t, { type: "frame" }) }, captureUpdate: H.EVENTUALLY };
}, keyTest: (e) => !e[L.CTRL_OR_CMD] && !e.shiftKey && !e.altKey && e.key.toLocaleLowerCase() === L.F });
var eY = Z({ name: "wrapSelectionInFrame", label: "labels.wrapSelectionInFrame", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = xe(e, t);
  return i.length > 0 && !i.some((r) => de(r));
}, perform: (e, t, n, a) => {
  let i = xe(e, t), [r, l, s, c] = ze(i, a.scene.getNonDeletedElementsMap()), d = 16, o = sp({ x: r - d, y: l - d, width: s - r + d * 2, height: c - l + d * 2 });
  if (t.editingGroupId) {
    let u = it(i, t.editingGroupId);
    for (let f of u) {
      let p = f.groupIds.indexOf(t.editingGroupId);
      W(f, { groupIds: f.groupIds.slice(0, p) }, !1);
    }
  }
  return { elements: wo([...a.scene.getElementsIncludingDeleted(), o], i, o, t), appState: { selectedElementIds: { [o.id]: !0 } }, captureUpdate: H.IMMEDIATELY };
} }), tY = () => h.jsxs("div", { "data-testid": "brave-measure-text-error", children: [h.jsx("p", { children: h.jsx(Va, { i18nKey: "errors.brave_measure_text_error.line1", bold: (e) => h.jsx("span", { style: { fontWeight: 600 }, children: e }) }) }), h.jsx("p", { children: h.jsx(Va, { i18nKey: "errors.brave_measure_text_error.line2", bold: (e) => h.jsx("span", { style: { fontWeight: 600 }, children: e }) }) }), h.jsx("p", { children: h.jsx(Va, { i18nKey: "errors.brave_measure_text_error.line3", link: (e) => h.jsx("a", { href: "http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser", children: e }) }) }), h.jsx("p", { children: h.jsx(Va, { i18nKey: "errors.brave_measure_text_error.line4", issueLink: (e) => h.jsx("a", { href: "https://github.com/excalidraw/excalidraw/issues/new", children: e }), discordLink: (e) => h.jsxs("a", { href: "https://discord.gg/UexuTaE", children: [e, "."] }) }) })] }), nY = tY, rd = { width: 100, height: 0 }, ir = 100, aY = (e, t, n) => {
  let a = Rn({ x: 0, y: 0, textAlign: Fo.CENTER, verticalAlign: jn.MIDDLE, ...t, containerId: e.id, strokeColor: t.strokeColor || e.strokeColor });
  return Object.assign(e, { boundElements: (e.boundElements || []).concat({ type: "text", id: a.id }) }), un(a, e, n), [e, a];
}, y5 = (e, t, n, a, i) => {
  let r, l;
  if (Object.assign(e, { startBinding: (e == null ? void 0 : e.startBinding) || null, endBinding: e.endBinding || null }), t) {
    let o = (t == null ? void 0 : t.width) ?? ir, u = (t == null ? void 0 : t.height) ?? ir, f;
    t.id && (f = a.getElement(t.id), f || console.error(`No element for start binding with id ${t.id} found`));
    let p = t.x || e.x - o, U = t.y || e.y - u / 2, m = f ? f.type : t.type;
    if (m) {
      if (m === "text") {
        let g = "";
        f && f.type === "text" ? g = f.text : t.type === "text" && (g = t.text), g || console.error(`No text found for start binding text element for ${e.id}`), r = Rn({ x: p, y: U, type: "text", ...f, ...t, text: g }), Object.assign(r, { x: t.x || e.x - r.width, y: t.y || e.y - r.height / 2 });
      } else switch (m) {
        case "rectangle":
        case "ellipse":
        case "diamond": {
          r = Qa({ x: p, y: U, width: o, height: u, ...f, ...t, type: m });
          break;
        }
        default:
          il(e, `Unhandled element start type "${t.type}"`, !0);
      }
      qa(e, r, "start", i);
    }
  }
  if (n) {
    let o = (n == null ? void 0 : n.height) ?? ir, u = (n == null ? void 0 : n.width) ?? ir, f;
    n.id && (f = a.getElement(n.id), f || console.error(`No element for end binding with id ${n.id} found`));
    let p = n.x || e.x + e.width, U = n.y || e.y - o / 2, m = f ? f.type : n.type;
    if (m) {
      if (m === "text") {
        let g = "";
        f && f.type === "text" ? g = f.text : n.type === "text" && (g = n.text), g || console.error(`No text found for end binding text element for ${e.id}`), l = Rn({ x: p, y: U, type: "text", ...f, ...n, text: g }), Object.assign(l, { y: n.y || e.y - l.height / 2 });
      } else switch (m) {
        case "rectangle":
        case "ellipse":
        case "diamond": {
          l = Qa({ x: p, y: U, width: u, height: o, ...f, ...n, type: m });
          break;
        }
        default:
          il(e, `Unhandled element end type "${m}"`, !0);
      }
      qa(e, l, "end", i);
    }
  }
  if (e.points.length < 2) return { linearElement: e, startBoundElement: r, endBoundElement: l };
  let s = e.points.length - 1, c = 0.5, d = yi(e.points);
  return e.points[s][0] > e.points[s - 1][0] && (d[0][0] = c, d[s][0] -= c), e.points[s][0] < e.points[s - 1][0] && (d[0][0] = -c, d[s][0] += c), e.points[s][1] > e.points[s - 1][1] && (d[0][1] = c, d[s][1] -= c), e.points[s][1] < e.points[s - 1][1] && (d[0][1] = -c, d[s][1] += c), Object.assign(e, { points: d }), { linearElement: e, startBoundElement: r, endBoundElement: l };
}, iY = class {
  constructor() {
    j(this, "excalidrawElements", /* @__PURE__ */ new Map()), j(this, "add", (e) => {
      e && this.excalidrawElements.set(e.id, e);
    }), j(this, "getElements", () => _i(Array.from(this.excalidrawElements.values()))), j(this, "getElementsMap", () => Kn(ue(this.getElements()))), j(this, "getElement", (e) => this.excalidrawElements.get(e));
  }
}, b0 = (e, t) => {
  var s, c, d;
  if (!e) return [];
  let n = yi(e), a = new iY(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map();
  for (let o of n) {
    let u, f = o.id;
    switch ((t == null ? void 0 : t.regenerateIds) !== !1 && Object.assign(o, { id: Qn() }), o.type) {
      case "rectangle":
      case "ellipse":
      case "diamond": {
        let p = (s = o == null ? void 0 : o.label) != null && s.text && o.width === void 0 ? 0 : (o == null ? void 0 : o.width) || ir, U = (c = o == null ? void 0 : o.label) != null && c.text && o.height === void 0 ? 0 : (o == null ? void 0 : o.height) || ir;
        u = Qa({ ...o, width: p, height: U });
        break;
      }
      case "line": {
        let p = o.width || rd.width, U = o.height || rd.height;
        u = Zr({ width: p, height: U, points: [k(0, 0), k(p, U)], ...o });
        break;
      }
      case "arrow": {
        let p = o.width || rd.width, U = o.height || rd.height;
        u = op({ width: p, height: U, endArrowhead: "arrow", points: [k(0, 0), k(p, U)], ...o, type: "arrow" }), Object.assign(u, cs(u.points));
        break;
      }
      case "text": {
        let p = (o == null ? void 0 : o.fontFamily) || xr, U = (o == null ? void 0 : o.fontSize) || Ni, m = (o == null ? void 0 : o.lineHeight) || ol(p), g = o.text ?? "", b = ls(g), v = ln(b, Ye({ fontFamily: p, fontSize: U }), m);
        u = Rn({ width: v.width, height: v.height, fontFamily: p, fontSize: U, ...o });
        break;
      }
      case "image": {
        u = _7({ width: (o == null ? void 0 : o.width) || ir, height: (o == null ? void 0 : o.height) || ir, ...o });
        break;
      }
      case "frame": {
        u = sp({ x: 0, y: 0, ...o });
        break;
      }
      case "magicframe": {
        u = T1({ x: 0, y: 0, ...o });
        break;
      }
      case "freedraw":
      case "iframe":
      case "embeddable": {
        u = o;
        break;
      }
      default:
        u = o, il(o, `Unhandled element type "${o.type}"`, !0);
    }
    a.getElement(u.id) ? console.error(`Duplicate id found for ${u.id}`) : (a.add(u), i.set(u.id, o), f && r.set(f, u.id));
  }
  let l = a.getElementsMap();
  for (let [o, u] of i) {
    let f = a.getElement(o);
    switch (u.type) {
      case "rectangle":
      case "ellipse":
      case "diamond":
      case "arrow": {
        if ((d = u.label) != null && d.text) {
          let [p, U] = aY(f, u == null ? void 0 : u.label, l);
          if (a.add(p), a.add(U), ye(p)) {
            let m = u.type === "arrow" ? u == null ? void 0 : u.start : void 0, g = u.type === "arrow" ? u == null ? void 0 : u.end : void 0;
            if (m && m.id) {
              let y = r.get(m.id);
              y && Object.assign(m, { id: y });
            }
            if (g && g.id) {
              let y = r.get(g.id);
              y && Object.assign(g, { id: y });
            }
            let { linearElement: b, startBoundElement: v, endBoundElement: x } = y5(p, m, g, a, l);
            p = b, a.add(b), a.add(v), a.add(x);
          }
        } else switch (u.type) {
          case "arrow": {
            let { start: p, end: U } = u;
            if (p && p.id) {
              let v = r.get(p.id);
              Object.assign(p, { id: v });
            }
            if (U && U.id) {
              let v = r.get(U.id);
              Object.assign(U, { id: v });
            }
            let { linearElement: m, startBoundElement: g, endBoundElement: b } = y5(f, p, U, a, l);
            a.add(m), a.add(g), a.add(b);
            break;
          }
        }
        break;
      }
    }
  }
  for (let [o, u] of i) {
    if (u.type !== "frame" && u.type !== "magicframe") continue;
    let f = a.getElement(o);
    if (!f) throw new Error(`Excalidraw element with id ${o} doesn't exist`);
    let p = [];
    u.children.forEach((w) => {
      var T;
      let M = r.get(w);
      if (!M) throw new Error(`Element with ${w} wasn't mapped correctly`);
      let I = a.getElement(M);
      if (!I) throw new Error(`Frame element with id ${M} doesn't exist`);
      Object.assign(I, { frameId: f.id }), (T = I == null ? void 0 : I.boundElements) == null || T.forEach((_) => {
        let A = a.getElement(_.id);
        if (!A) throw new Error(`Bound element with id ${_.id} doesn't exist`);
        Object.assign(A, { frameId: f.id }), p.push(A);
      }), p.push(I);
    });
    let [U, m, g, b] = ze(p), v = 10;
    U = U - v, m = m - v, g = g + v, b = b + v;
    let x = (f == null ? void 0 : f.x) || U, y = (f == null ? void 0 : f.y) || m, E = (f == null ? void 0 : f.width) || g - U, S = (f == null ? void 0 : f.height) || b - m;
    Object.assign(f, { x, y, width: E, height: S }), Qb() && u.children.length && (f != null && f.x || f != null && f.y || f != null && f.width || f != null && f.height) && console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically");
  }
  return a.getElements();
}, Ut = (e) => (t) => {
  y0(e, t);
}, Bf = (e) => Hu((t) => {
  y0(e, t);
}), kU = (() => {
  let e;
  try {
    let n = Ex.split(".");
    e = Number(n[0]) > 17;
  } catch {
    e = !1;
  }
  let t = !1;
  return () => window.EXCALIDRAW_THROTTLE_RENDER === !0 ? e ? !0 : (t || (t = !0, console.warn("Excalidraw: render throttling is disabled on React versions < 18.")), !1) : !1;
})(), rY = "#ff6b6b", lY = "#ff0000", w5 = 1, E5 = 2, sY = (e, t) => {
  if (!t.snapLines.length) return;
  let n = t.theme === Me.LIGHT || t.zenModeEnabled ? rY : lY, a = (t.zenModeEnabled ? w5 * 1.5 : w5) / t.zoom.value;
  e.save(), e.translate(t.scrollX, t.scrollY);
  for (let i of t.snapLines) i.type === "pointer" ? (e.lineWidth = a, e.strokeStyle = n, cY(i, e, t)) : i.type === "gap" ? (e.lineWidth = a, e.strokeStyle = n, dY(i.points[0], i.points[1], i.direction, t, e)) : i.type === "points" && (e.lineWidth = a, e.strokeStyle = n, oY(i, e, t));
  e.restore();
}, oY = (e, t, n) => {
  if (!n.zenModeEnabled) {
    let a = e.points[0], i = e.points[e.points.length - 1];
    $n(a, i, t);
  }
  for (let a of e.points) Qv(a, n, t);
}, cY = (e, t, n) => {
  Qv(e.points[0], n, t), n.zenModeEnabled || $n(e.points[0], e.points[1], t);
}, Qv = ([e, t], n, a) => {
  a.save();
  let i = (n.zenModeEnabled ? E5 * 1.5 : E5) / n.zoom.value;
  a.beginPath(), a.moveTo(e - i, t - i), a.lineTo(e + i, t + i), a.moveTo(e + i, t - i), a.lineTo(e - i, t + i), a.stroke(), a.restore();
}, $n = (e, t, n) => {
  n.beginPath(), n.lineTo(e[0], e[1]), n.lineTo(t[0], t[1]), n.stroke();
}, dY = (e, t, n, a, i) => {
  let r = 8 / a.zoom.value, l = r / 2, s = r / 4;
  if (n === "horizontal") {
    let c = [(e[0] + t[0]) / 2, e[1]];
    a.zenModeEnabled || $n(k(e[0], e[1] - r), k(e[0], e[1] + r), i), $n(k(c[0] - s, c[1] - l), k(c[0] - s, c[1] + l), i), $n(k(c[0] + s, c[1] - l), k(c[0] + s, c[1] + l), i), a.zenModeEnabled || ($n(k(t[0], t[1] - r), k(t[0], t[1] + r), i), $n(e, t, i));
  } else {
    let c = [e[0], (e[1] + t[1]) / 2];
    a.zenModeEnabled || $n(k(e[0] - r, e[1]), k(e[0] + r, e[1]), i), $n(k(c[0] - l, c[1] - s), k(c[0] + l, c[1] - s), i), $n(k(c[0] - l, c[1] + s), k(c[0] + l, c[1] + s), i), a.zenModeEnabled || ($n(k(t[0] - r, t[1]), k(t[0] + r, t[1]), i), $n(e, t, i));
  }
}, uY = (e, t) => {
  rn(t.selectedLinearElement, "selectedLinearElement is null");
  let { segmentMidPointHoveredCoords: n } = t.selectedLinearElement;
  rn(n, "midPointCoords is null"), e.save(), e.translate(t.scrollX, t.scrollY), ex(n, e, t), e.restore();
}, hY = (e, t, n) => {
  var s, c;
  let { elementId: a, hoverPointIndex: i } = t.selectedLinearElement;
  if ((c = (s = t.editingLinearElement) == null ? void 0 : s.selectedPointsIndices) != null && c.includes(i)) return;
  let r = J.getElement(a, n);
  if (!r) return;
  let l = J.getPointAtIndexGlobalCoordinates(r, i, n);
  e.save(), e.translate(t.scrollX, t.scrollY), ex(l, e, t), e.restore();
}, ex = (e, t, n) => {
  t.fillStyle = "rgba(105, 101, 219, 0.4)", sh(t, e[0], e[1], J.POINT_HANDLE_SIZE / n.zoom.value, !1);
}, Sc = (e, t, n, a, i, r, l, s, c = !1, d = 0) => {
  e.save(), e.translate(r, l), e.rotate(s), c && e.fillRect(t - r, n - l, a, i), d && e.roundRect ? (e.beginPath(), e.roundRect(t - r, n - l, a, i, d), e.stroke(), e.closePath()) : e.strokeRect(t - r, n - l, a, i), e.restore();
}, fY = (e, t, n, a, i, r) => {
  e.save(), e.translate(a, i), e.rotate(r), e.beginPath(), e.moveTo(0, n / 2), e.lineTo(t / 2, 0), e.lineTo(0, -n / 2), e.lineTo(-t / 2, 0), e.closePath(), e.stroke(), e.restore();
}, Hf = (e, t, n, a, i, r = !1) => {
  e.strokeStyle = "#5e5ad8", e.setLineDash([]), e.fillStyle = "rgba(255, 255, 255, 0.9)", i ? e.fillStyle = "rgba(134, 131, 226, 0.9)" : r && (e.fillStyle = "rgba(177, 151, 252, 0.7)"), sh(e, n[0], n[1], a / t.zoom.value, !r);
}, pY = (e, t, n, a, i, r) => {
  e.beginPath(), e.ellipse(a, i, t / 2, n / 2, r, 0, Math.PI * 2), e.stroke();
}, UY = (e, t, n, a) => {
  let [i, r, l, s] = Ue(t, n), c = l - i, d = s - r;
  e.strokeStyle = "rgba(0,0,0,.05)";
  let o = a.value < 1 ? a.value : 1;
  e.lineWidth = ip / o;
  let u = e.lineWidth / 2 + rp, f = ma(Math.min(t.width, t.height), t);
  switch (t.type) {
    case "rectangle":
    case "text":
    case "image":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      Sc(e, i - u, r - u, c + u * 2, d + u * 2, i + c / 2, r + d / 2, t.angle, void 0, f);
      break;
    case "diamond":
      let p = Math.hypot(c, d), U = u * p / d, m = u * p / c;
      fY(e, c + U * 2, d + m * 2, i + c / 2, r + d / 2, t.angle);
      break;
    case "ellipse":
      pY(e, c + u * 2, d + u * 2, i + c / 2, r + d / 2, t.angle);
      break;
  }
}, mY = (e, t, n, a) => {
  let [i, r, l] = t, s = gc(l, l.width, l.height, a);
  e.strokeStyle = "rgba(0,0,0,0)", e.fillStyle = "rgba(0,0,0,.05)", (r === "both" ? [0, -1] : r === "start" ? [0] : [-1]).forEach((c) => {
    let [d, o] = J.getPointAtIndexGlobalCoordinates(i, c, n);
    sh(e, d, o, s);
  });
}, tx = (e, t, n) => {
  let { angle: a, x1: i, y1: r, x2: l, y2: s, selectionColors: c, cx: d, cy: o, dashed: u, activeEmbeddable: f } = n, p = l - i, U = s - r, m = (n.padding ?? nl * 2) / t.zoom.value, g = 8 / t.zoom.value, b = 4 / t.zoom.value;
  e.save(), e.translate(t.scrollX, t.scrollY), e.lineWidth = (f ? 4 : 1) / t.zoom.value;
  let v = c.length;
  for (let x = 0; x < v; ++x) e.strokeStyle = c[x], u && e.setLineDash([g, b + (g + b) * (v - 1)]), e.lineDashOffset = (g + b) * x, Sc(e, i - m, r - m, p + m * 2, U + m * 2, d, o, a);
  e.restore();
}, gY = (e, t, n, a) => {
  let i = Array.isArray(n) ? mY : UY;
  e.save(), e.translate(t.scrollX, t.scrollY), i(e, n, a, t.zoom), e.restore();
}, bY = (e, t, n, a) => {
  let [i, r, l, s] = Ue(n, a), c = l - i, d = s - r;
  e.strokeStyle = "rgb(0,118,255)", e.lineWidth = ht.strokeWidth / t.zoom.value, e.save(), e.translate(t.scrollX, t.scrollY), Sc(e, i, r, c, d, i + c / 2, r + d / 2, n.angle, !1, ht.radius / t.zoom.value), e.restore();
}, vY = (e, t, n) => {
  let a = n.filter((s) => s.groupIds.length === 0), i = n.filter((s) => s.groupIds.length > 0), r = (s) => {
    let [c, d, o, u] = ze(s);
    return { angle: 0, x1: c, x2: o, y1: d, y2: u, selectionColors: ["rgb(0,118,255)"], dashed: !1, cx: c + (o - c) / 2, cy: d + (u - d) / 2, activeEmbeddable: !1 };
  }, l = (s) => {
    let c = it(n, s);
    return r(c);
  };
  Object.entries(b7(i, t)).filter(([s, c]) => c).map(([s, c]) => s).map((s) => l(s)).concat(a.map((s) => r([s]))).forEach((s) => tx(e, t, s));
}, Xf = (e, t, n, a) => {
  var s;
  if (!t.selectedLinearElement) return;
  e.save(), e.translate(t.scrollX, t.scrollY), e.lineWidth = 1 / t.zoom.value;
  let i = J.getPointsGlobalCoordinates(n, a), { POINT_HANDLE_SIZE: r } = J, l = t.editingLinearElement ? r : r / 2;
  if (i.forEach((c, d) => {
    var u, f;
    if (ee(n) && d !== 0 && d !== i.length - 1) return;
    let o = !!((f = (u = t.editingLinearElement) == null ? void 0 : u.selectedPointsIndices) != null && f.includes(d));
    Hf(e, t, c, l, o);
  }), ee(n)) {
    let c = ((s = n.fixedSegments) == null ? void 0 : s.map((d) => d.index)) || [];
    i.slice(0, -1).forEach((d, o) => {
      J.isSegmentTooShort(n, i[o + 1], i[o], o, t.zoom) || Hf(e, t, k((d[0] + i[o + 1][0]) / 2, (d[1] + i[o + 1][1]) / 2), r / 2, !1, !c.includes(o + 1));
    });
  } else J.getEditorMidPoints(n, a, t).filter((c, d, o) => c !== null && !(ee(n) && (d === 0 || d === o.length - 1))).forEach((c) => {
    (t.editingLinearElement || i.length === 2) && Hf(e, t, c, r / 2, !1, !0);
  });
  e.restore();
}, S5 = (e, t, n, a, i) => {
  Object.keys(a).forEach((r) => {
    let l = a[r];
    if (l !== void 0) {
      let [s, c, d, o] = l;
      e.save(), e.lineWidth = 1 / n.zoom.value, t.selectionColor && (e.strokeStyle = t.selectionColor), r === "rotation" ? sh(e, s + d / 2, c + o / 2, d / 2) : e.roundRect ? (e.beginPath(), e.roundRect(s, c, d, o, 2 / n.zoom.value), e.fill(), e.stroke()) : Sc(e, s, c, d, o, s + d / 2, c + o / 2, i, !0), e.restore();
    }
  });
}, xY = (e, t, n, a, i) => {
  let [r, l, , , s, c] = Ue(a, i), d = 3, o = 20, u = d / n.zoom.value, f = u / 2, p = s - r + u, U = c - l + u, m = Math.min(o / n.zoom.value, p), g = Math.min(o / n.zoom.value, U);
  e.save(), e.fillStyle = t.selectionColor, e.strokeStyle = t.selectionColor, e.lineWidth = u, [[[-p, -U], [0, f], [m, f], [f, 0], [f, g]], [[p - f, -U], [f, f], [-m + f, f], [0, 0], [0, g]], [[-p, U], [0, -f], [m, -f], [f, 0], [f, -g]], [[p - f, U], [f, -f], [-m + f, -f], [0, 0], [0, -g]]].forEach((b) => {
    let [[v, x], [y, E], [S, w], [M, I], [T, _]] = b;
    e.save(), e.translate(s, c), e.rotate(a.angle), e.beginPath(), e.moveTo(v + y, x + E), e.lineTo(v + S, x + w), e.stroke(), e.beginPath(), e.moveTo(v + M, x + I), e.lineTo(v + T, x + _), e.stroke(), e.restore();
  }), e.restore();
}, yY = (e, t, n, a) => {
  t.save();
  let i = nl * 2 / n.zoom.value, r = e.width + i * 2, l = e.height + i * 2, s = e.x + r / 2, c = e.y + l / 2, d = -(r / 2 + i), o = -(l / 2 + i);
  t.translate(s + n.scrollX, c + n.scrollY), t.rotate(e.angle), t.lineWidth = 1 / n.zoom.value, t.strokeStyle = a, t.strokeRect(d, o, r, l), t.restore();
}, nx = ({ canvas: e, elementsMap: t, visibleElements: n, selectedElements: a, allElementsMap: i, scale: r, appState: l, renderConfig: s, device: c }) => {
  var m, g, b;
  if (e === null) return { atLeastOneVisibleElement: !1, elementsMap: t };
  let [d, o] = fp(e, r), u = pp({ canvas: e, scale: r, normalizedWidth: d, normalizedHeight: o });
  u.save(), u.scale(l.zoom.value, l.zoom.value);
  let f;
  if (n.forEach((v) => {
    var x;
    ((x = l.editingLinearElement) == null ? void 0 : x.elementId) === v.id && v && (f = v);
  }), f && Xf(u, l, f, t), l.selectionElement && !l.isCropping) try {
    QD(l.selectionElement, u, l, s.selectionColor);
  } catch (v) {
    console.error(v);
  }
  if (l.editingTextElement && q(l.editingTextElement)) {
    let v = i.get(l.editingTextElement.id);
    v && !v.autoResize && yY(v, u, l, s.selectionColor);
  }
  l.isBindingEnabled && l.suggestedBindings.filter((v) => v != null).forEach((v) => {
    gY(u, l, v, t);
  }), l.frameToHighlight && bY(u, l, l.frameToHighlight, t), l.elementsToHighlight && vY(u, l, l.elementsToHighlight);
  let p = a.some((v) => de(v));
  if (a.length === 1 && ((m = l.editingLinearElement) == null ? void 0 : m.elementId) === a[0].id && Xf(u, l, a[0], t), ee(a[0]) && l.selectedLinearElement && l.selectedLinearElement.segmentMidPointHoveredCoords ? uY(u, l) : l.selectedLinearElement && l.selectedLinearElement.hoverPointIndex >= 0 && !(ee(a[0]) && l.selectedLinearElement.hoverPointIndex > 0 && l.selectedLinearElement.hoverPointIndex < a[0].points.length - 1) && hY(u, l, t), !l.multiElement && !l.editingLinearElement) {
    let v = g3(a, l), x = a.length === 1 && pe(a[0]);
    x && ((g = l.selectedLinearElement) == null ? void 0 : g.elementId) === a[0].id && !a[0].locked && Xf(u, l, a[0], t);
    let y = s.selectionColor || Wt.black;
    if (v) {
      let E = ue(a), S = [];
      for (let M of t.values()) {
        let I = [], T = s.remoteSelectedElementIds.get(M.id);
        if (x && ee(M) && (M.startBinding || M.endBinding) || (E.has(M.id) && !m7(l, M) && I.push(y), T && I.push(...T.map((_) => Ch(_, l.collaborators.get(_))))), I.length) {
          let [_, A, D, P, N, $] = Ue(M, t, !0);
          S.push({ angle: M.angle, x1: _, y1: A, x2: D, y2: P, selectionColors: I, dashed: !!T, cx: N, cy: $, activeEmbeddable: ((b = l.activeEmbeddable) == null ? void 0 : b.element) === M && l.activeEmbeddable.state === "active", padding: M.id === l.croppingElementId || Re(M) ? 0 : void 0 });
        }
      }
      let w = (M) => {
        let I = it(t, M), [T, _, A, D] = ze(I);
        S.push({ angle: 0, x1: T, x2: A, y1: _, y2: D, selectionColors: [Wt.black], dashed: !0, cx: T + (A - T) / 2, cy: _ + (D - _) / 2, activeEmbeddable: !1 });
      };
      for (let M of Yr(l)) w(M);
      l.editingGroupId && w(l.editingGroupId), S.forEach((M) => tx(u, l, M));
    }
    if (u.save(), u.translate(l.scrollX, l.scrollY), a.length === 1) {
      u.fillStyle = Wt.white;
      let E = m3(a[0], l.zoom, t, "mouse", Eo(c));
      if (!l.viewModeEnabled && v && !q(l.editingTextElement) && !l.croppingElementId && S5(u, s, l, E, a[0].angle), l.croppingElementId && !l.isCropping) {
        let S = t.get(l.croppingElementId);
        S && Re(S) && xY(u, s, l, S, t);
      }
    } else if (a.length > 1 && !l.isRotating) {
      let E = nl * 2 / l.zoom.value;
      u.fillStyle = Wt.white;
      let [S, w, M, I] = ze(a), T = u.getLineDash();
      u.setLineDash([2 / l.zoom.value]);
      let _ = u.lineWidth;
      u.lineWidth = 1 / l.zoom.value, u.strokeStyle = y, Sc(u, S - E, w - E, M - S + E * 2, I - w + E * 2, (S + M) / 2, (w + I) / 2, 0), u.lineWidth = _, u.setLineDash(T);
      let A = Op([S, w, M, I, (S + M) / 2, (w + I) / 2], 0, l.zoom, "mouse", p ? { ...Eo(c), rotation: !0 } : Eo(c));
      a.some((D) => !D.locked) && S5(u, s, l, A, 0);
    }
    u.restore();
  }
  l.searchMatches.forEach(({ id: v, focus: x, matchedLines: y }) => {
    let E = t.get(v);
    if (E && q(E)) {
      let [S, w, , , M, I] = Ue(E, t, !0);
      u.save(), l.theme === Me.LIGHT ? x ? u.fillStyle = "rgba(255, 124, 0, 0.4)" : u.fillStyle = "rgba(255, 226, 0, 0.4)" : x ? u.fillStyle = "rgba(229, 82, 0, 0.4)" : u.fillStyle = "rgba(99, 52, 0, 0.4)", u.translate(l.scrollX, l.scrollY), u.translate(M, I), u.rotate(E.angle), y.forEach((T) => {
        u.fillRect(S + T.offsetX - M, w + T.offsetY - I, T.width, T.height);
      }), u.restore();
    }
  }), sY(u, l), u.restore(), sX({ context: u, renderConfig: s, appState: l, normalizedWidth: d, normalizedHeight: o });
  let U;
  return s.renderScrollbars && (U = pV(n, d, o, l), u.save(), u.fillStyle = fV, u.strokeStyle = "rgba(255,255,255,0.8)", [U.horizontal, U.vertical].forEach((v) => {
    v && R9(u, v.x, v.y, v.width, v.height, ar / 2);
  }), u.restore()), { scrollBars: U, atLeastOneVisibleElement: n.length > 0, elementsMap: t };
}, ax = Hu((e) => {
  var n;
  let t = nx(e);
  (n = e.callback) == null || n.call(e, t);
}, { trailing: !0 }), wY = (e, t) => {
  if (t) {
    ax(e);
    return;
  }
  let n = nx(e);
  return e.callback(n), n;
}, EY = (e) => {
  let t = ie(!1);
  return Q(() => {
    var c;
    if (!t.current) {
      t.current = !0;
      return;
    }
    let n = /* @__PURE__ */ new Map(), a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map(), l = /* @__PURE__ */ new Map();
    e.appState.collaborators.forEach((d, o) => {
      if (d.selectedElementIds) for (let u of Object.keys(d.selectedElementIds)) i.has(u) || i.set(u, []), i.get(u).push(o);
      !d.pointer || d.pointer.renderCursor === !1 || (d.username && r.set(o, d.username), d.userState && l.set(o, d.userState), a.set(o, ca({ sceneX: d.pointer.x, sceneY: d.pointer.y }, e.appState)), n.set(o, d.button));
    });
    let s = ((c = e.containerRef) == null ? void 0 : c.current) && getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection") || "#6965db";
    wY({ canvas: e.canvas, elementsMap: e.elementsMap, visibleElements: e.visibleElements, selectedElements: e.selectedElements, allElementsMap: e.allElementsMap, scale: window.devicePixelRatio, appState: e.appState, renderConfig: { remotePointerViewportCoords: a, remotePointerButton: n, remoteSelectedElementIds: i, remotePointerUsernames: r, remotePointerUserStates: l, selectionColor: s, renderScrollbars: !1 }, device: e.device, callback: e.renderInteractiveSceneCallback }, kU());
  }), h.jsx("canvas", { className: "excalidraw__canvas interactive", style: { width: e.appState.width, height: e.appState.height, cursor: e.appState.viewModeEnabled ? We.GRAB : We.AUTO }, width: e.appState.width * e.scale, height: e.appState.height * e.scale, ref: e.handleCanvasRef, onContextMenu: e.onContextMenu, onPointerMove: e.onPointerMove, onPointerUp: e.onPointerUp, onPointerCancel: e.onPointerCancel, onTouchMove: e.onTouchMove, onPointerDown: e.onPointerDown, onDoubleClick: e.appState.viewModeEnabled ? void 0 : e.onDoubleClick, children: C("labels.drawingCanvas") });
}, k5 = (e) => ({ zoom: e.zoom, scrollX: e.scrollX, scrollY: e.scrollY, width: e.width, height: e.height, viewModeEnabled: e.viewModeEnabled, openDialog: e.openDialog, editingGroupId: e.editingGroupId, editingLinearElement: e.editingLinearElement, selectedElementIds: e.selectedElementIds, frameToHighlight: e.frameToHighlight, offsetLeft: e.offsetLeft, offsetTop: e.offsetTop, theme: e.theme, pendingImageElementId: e.pendingImageElementId, selectionElement: e.selectionElement, selectedGroupIds: e.selectedGroupIds, selectedLinearElement: e.selectedLinearElement, multiElement: e.multiElement, isBindingEnabled: e.isBindingEnabled, suggestedBindings: e.suggestedBindings, isRotating: e.isRotating, elementsToHighlight: e.elementsToHighlight, collaborators: e.collaborators, activeEmbeddable: e.activeEmbeddable, snapLines: e.snapLines, zenModeEnabled: e.zenModeEnabled, editingTextElement: e.editingTextElement, isCropping: e.isCropping, croppingElementId: e.croppingElementId, searchMatches: e.searchMatches }), SY = (e, t) => e.selectionNonce !== t.selectionNonce || e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements || e.selectedElements !== t.selectedElements ? !1 : qt(k5(e.appState), k5(t.appState)), kY = Y.memo(EY, SY), MY = (e) => {
  let t = ie(null), n = ie(!1);
  return Q(() => {
    let a = t.current;
    if (!a) return;
    let i = e.canvas;
    n.current || (n.current = !0, a.replaceChildren(i), i.classList.add("excalidraw__canvas", "static"));
    let r = `${e.appState.width}px`, l = `${e.appState.height}px`;
    i.style.width !== r && (i.style.width = r), i.style.height !== l && (i.style.height = l);
    let s = e.appState.width * e.scale, c = e.appState.height * e.scale;
    i.width !== s && (i.width = s), i.height !== c && (i.height = c), K7({ canvas: i, rc: e.rc, scale: e.scale, elementsMap: e.elementsMap, allElementsMap: e.allElementsMap, visibleElements: e.visibleElements, appState: e.appState, renderConfig: e.renderConfig }, kU());
  }), h.jsx("div", { className: "excalidraw__canvas-wrapper", ref: t });
}, M5 = (e) => ({ zoom: e.zoom, scrollX: e.scrollX, scrollY: e.scrollY, width: e.width, height: e.height, viewModeEnabled: e.viewModeEnabled, openDialog: e.openDialog, hoveredElementIds: e.hoveredElementIds, offsetLeft: e.offsetLeft, offsetTop: e.offsetTop, theme: e.theme, pendingImageElementId: e.pendingImageElementId, shouldCacheIgnoreZoom: e.shouldCacheIgnoreZoom, viewBackgroundColor: e.viewBackgroundColor, exportScale: e.exportScale, selectedElementsAreBeingDragged: e.selectedElementsAreBeingDragged, gridSize: e.gridSize, gridStep: e.gridStep, frameRendering: e.frameRendering, selectedElementIds: e.selectedElementIds, frameToHighlight: e.frameToHighlight, editingGroupId: e.editingGroupId, currentHoveredFontFamily: e.currentHoveredFontFamily, croppingElementId: e.croppingElementId }), CY = (e, t) => e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements ? !1 : qt(M5(e.appState), M5(t.appState)) && qt(e.renderConfig, t.renderConfig), IY = Y.memo(MY, CY), C5 = class {
  constructor(e) {
    j(this, "scene"), j(this, "getRenderableElements", (() => {
      let t = ({ elementsMap: a, zoom: i, offsetLeft: r, offsetTop: l, scrollX: s, scrollY: c, height: d, width: o }) => {
        let u = [];
        for (let f of a.values()) bu(f, o, d, { zoom: i, offsetLeft: r, offsetTop: l, scrollX: s, scrollY: c }, a) && u.push(f);
        return u;
      }, n = ({ elements: a, editingTextElement: i, newElementId: r, pendingImageElementId: l }) => {
        let s = Kn(/* @__PURE__ */ new Map());
        for (let c of a) Re(c) && l === c.id || r !== c.id && (!i || i.type !== "text" || c.id !== i.id) && s.set(c.id, c);
        return s;
      };
      return AM(({ zoom: a, offsetLeft: i, offsetTop: r, scrollX: l, scrollY: s, height: c, width: d, editingTextElement: o, newElementId: u, pendingImageElementId: f, sceneNonce: p }) => {
        let U = this.scene.getNonDeletedElements(), m = n({ elements: U, editingTextElement: o, newElementId: u, pendingImageElementId: f }), g = t({ elementsMap: m, zoom: a, offsetLeft: i, offsetTop: r, scrollX: l, scrollY: s, height: c, width: d });
        return { elementsMap: m, visibleElements: g };
      });
    })()), this.scene = e;
  }
  destroy() {
    ax.cancel(), Z7.cancel(), this.getRenderableElements.clear();
  }
}, TY = ({ trails: e }) => {
  let t = ie(null);
  return Q(() => {
    if (t.current) for (let n of e) n.start(t.current);
    return () => {
      for (let n of e) n.stop();
    };
  }, e), h.jsx("div", { className: "SVGLayer", children: h.jsx("svg", { ref: t }) });
}, _Y = 5, AY = (e, t, n) => {
  let [a, i] = Ue(e, n), { x: r, y: l } = ca({ sceneX: a + e.width, sceneY: i }, t), s = r - t.offsetLeft + 10, c = l - t.offsetTop;
  return { x: s, y: c };
}, I5 = ({ children: e, element: t, elementsMap: n }) => {
  let a = Mc();
  if (a.contextMenu || a.newElement || a.resizingElement || a.isRotating || a.openMenu || a.viewModeEnabled) return null;
  let { x: i, y: r } = AY(t, a, n);
  return h.jsx("div", { className: "excalidraw-canvas-buttons", style: { top: `${r}px`, left: `${i}px`, padding: _Y }, children: e });
}, jY = "small", Wf = (e) => h.jsxs("label", { className: ne("ToolIcon ToolIcon__MagicButton", `ToolIcon_size_${jY}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [h.jsx("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title }), h.jsx("div", { className: "ToolIcon__icon", children: e.icon })] }), DY = ({ height: e, width: t, userToFollow: n, onDisconnect: a }) => h.jsx("div", { className: "follow-mode", style: { width: t, height: e }, children: h.jsxs("div", { className: "follow-mode__badge", children: [h.jsxs("div", { className: "follow-mode__badge__label", children: ["Following", " ", h.jsx("span", { className: "follow-mode__badge__username", title: n.username, children: n.username })] }), h.jsx("button", { type: "button", onClick: a, className: "follow-mode__disconnect-btn", children: Ms })] }) }), LY = DY, RY = class {
  constructor() {
    j(this, "targets", /* @__PURE__ */ new WeakMap()), j(this, "rafIds", /* @__PURE__ */ new WeakMap());
  }
  register(e, t) {
    this.targets.set(e, { callback: t, stopped: !0 });
  }
  start(e) {
    let t = this.targets.get(e);
    t && (this.rafIds.has(e) || (this.targets.set(e, { ...t, stopped: !1 }), this.scheduleFrame(e)));
  }
  stop(e) {
    let t = this.targets.get(e);
    t && !t.stopped && this.targets.set(e, { ...t, stopped: !0 }), this.cancelFrame(e);
  }
  constructFrame(e) {
    return (t) => {
      let n = this.targets.get(e);
      if (!n) return;
      let a = this.onFrame(n, t);
      !n.stopped && !a ? this.scheduleFrame(e) : this.cancelFrame(e);
    };
  }
  scheduleFrame(e) {
    let t = requestAnimationFrame(this.constructFrame(e));
    this.rafIds.set(e, t);
  }
  cancelFrame(e) {
    if (this.rafIds.has(e)) {
      let t = this.rafIds.get(e);
      cancelAnimationFrame(t);
    }
    this.rafIds.delete(e);
  }
  onFrame(e, t) {
    return e.callback(t) ?? !1;
  }
}, v0 = class {
  constructor(e, t, n) {
    this.animationFrameHandler = e, this.app = t, this.options = n, j(this, "currentTrail"), j(this, "pastTrails", []), j(this, "container"), j(this, "trailElement"), this.animationFrameHandler.register(this, this.onFrame.bind(this)), this.trailElement = document.createElementNS(je, "path");
  }
  get hasCurrentTrail() {
    return !!this.currentTrail;
  }
  hasLastPoint(e, t) {
    if (this.currentTrail) {
      let n = this.currentTrail.originalPoints.length;
      return this.currentTrail.originalPoints[n - 1][0] === e && this.currentTrail.originalPoints[n - 1][1] === t;
    }
    return !1;
  }
  start(e) {
    e && (this.container = e), this.trailElement.parentNode !== this.container && this.container && this.container.appendChild(this.trailElement), this.animationFrameHandler.start(this);
  }
  stop() {
    var e;
    this.animationFrameHandler.stop(this), this.trailElement.parentNode === this.container && ((e = this.container) == null || e.removeChild(this.trailElement));
  }
  startPath(e, t) {
    this.currentTrail = new Mu(this.options), this.currentTrail.addPoint([e, t, performance.now()]), this.update();
  }
  addPointToPath(e, t) {
    this.currentTrail && (this.currentTrail.addPoint([e, t, performance.now()]), this.update());
  }
  endPath() {
    this.currentTrail && (this.currentTrail.close(), this.currentTrail.options.keepHead = !1, this.pastTrails.push(this.currentTrail), this.currentTrail = void 0, this.update());
  }
  update() {
    this.start();
  }
  onFrame() {
    let e = [];
    for (let n of this.pastTrails) e.push(this.drawTrail(n, this.app.state));
    if (this.currentTrail) {
      let n = this.drawTrail(this.currentTrail, this.app.state);
      e.push(n);
    }
    this.pastTrails = this.pastTrails.filter((n) => n.getStrokeOutline().length !== 0), e.length === 0 && this.stop();
    let t = e.join(" ").trim();
    this.trailElement.setAttribute("d", t), this.trailElement.setAttribute("fill", (this.options.fill ?? (() => "black"))(this));
  }
  drawTrail(e, t) {
    let n = e.getStrokeOutline(e.options.size / t.zoom.value).map(([a, i]) => {
      let r = ca({ sceneX: a, sceneY: i }, t);
      return [r.x, r.y];
    });
    return jM(n, !0);
  }
}, PY = class {
  constructor(e, t) {
    this.animationFrameHandler = e, this.app = t, j(this, "localTrail"), j(this, "collabTrails", /* @__PURE__ */ new Map()), j(this, "container"), this.animationFrameHandler.register(this, this.onFrame.bind(this)), this.localTrail = new v0(e, t, { ...this.getTrailOptions(), fill: () => Dk });
  }
  getTrailOptions() {
    return { simplify: 0, streamline: 0.4, sizeMapping: (e) => {
      let t = Math.max(0, 1 - (performance.now() - e.pressure) / 1e3), n = (50 - Math.min(50, e.totalLength - e.currentIndex)) / 50;
      return Math.min(Vr(n), Vr(t));
    } };
  }
  startPath(e, t) {
    this.localTrail.startPath(e, t);
  }
  addPointToPath(e, t) {
    this.localTrail.addPointToPath(e, t);
  }
  endPath() {
    this.localTrail.endPath();
  }
  start(e) {
    this.container = e, this.animationFrameHandler.start(this), this.localTrail.start(e);
  }
  stop() {
    this.animationFrameHandler.stop(this), this.localTrail.stop();
  }
  onFrame() {
    this.updateCollabTrails();
  }
  updateCollabTrails() {
    if (!(!this.container || this.app.state.collaborators.size === 0)) {
      for (let [e, t] of this.app.state.collaborators.entries()) {
        let n;
        this.collabTrails.has(e) ? n = this.collabTrails.get(e) : (n = new v0(this.animationFrameHandler, this.app, { ...this.getTrailOptions(), fill: () => {
          var a;
          return ((a = t.pointer) == null ? void 0 : a.laserColor) || Ch(e, t);
        } }), n.start(this.container), this.collabTrails.set(e, n)), t.pointer && t.pointer.tool === "laser" && (t.button === "down" && !n.hasCurrentTrail && n.startPath(t.pointer.x, t.pointer.y), t.button === "down" && n.hasCurrentTrail && !n.hasLastPoint(t.pointer.x, t.pointer.y) && n.addPointToPath(t.pointer.x, t.pointer.y), t.button === "up" && n.hasCurrentTrail && (n.addPointToPath(t.pointer.x, t.pointer.y), n.endPath()));
      }
      for (let e of this.collabTrails.keys()) this.app.state.collaborators.has(e) || (this.collabTrails.get(e).stop(), this.collabTrails.delete(e));
    }
  }
}, NY = (e, t, n, a, i, r) => {
  let { zoom: l } = a, s = 180 * n / Math.PI, c = e * (l.value - 1) / 2, d = t * (l.value - 1) / 2;
  return e > i && l.value !== 1 && (c = i * (l.value - 1) / 2), t > r && l.value !== 1 && (d = r * (l.value - 1) / 2), `translate(${c}px, ${d}px) scale(${l.value}) rotate(${s}deg)`;
}, OY = ({ id: e, onChange: t, onSubmit: n, getViewportCoords: a, element: i, canvas: r, excalidrawContainer: l, app: s, autoSelect: c = !0 }) => {
  let d = (N, $) => {
    if (!$.style.fontFamily || !$.style.fontSize) return !1;
    let R = $.style.fontFamily.replace(/"/g, "");
    return as({ fontFamily: N.fontFamily }) !== R || `${N.fontSize}px` !== $.style.fontSize;
  }, o = () => {
    var G;
    let N = s.state, $ = (G = Ai.getScene(i)) == null ? void 0 : G.getElement(e);
    if (!$) return;
    let { textAlign: R, verticalAlign: V } = $, O = s.scene.getNonDeletedElementsMap();
    if ($ && q($)) {
      let ae = $.x, he = $.y, ce = Vt($, s.scene.getNonDeletedElementsMap()), Be = $.width, He = $.height, Xe = $.width, Ne = $.height;
      if (ce && $.containerId) {
        if (ye(ce)) {
          let Ma = J.getBoundTextElementPosition(ce, $, O);
          ae = Ma.x, he = Ma.y;
        }
        let vl = d($, u), kr;
        if (vl ? kr = du(ce.id, ce.height) : (kr = hs[ce.id], kr || (kr = du(ce.id, ce.height))), Xe = Ti(ce, $), Ne = lh(ce, $), !ye(ce) && He > Ne) {
          let Ma = dl(He, ce.type);
          W(ce, { height: Ma });
          return;
        } else if (!ye(ce) && ce.height > kr.height && He < Ne) {
          let Ma = dl(He, ce.type);
          W(ce, { height: Ma });
        } else {
          let { y: Ma } = rh(ce, $, O);
          he = Ma;
        }
      }
      let [It, Yt] = a(ae, he), Ae = u.selectionStart, Oe = u.selectionEnd, yt = u.value.length;
      if (Ae === Oe && Oe !== yt) {
        let vl = yt - Oe;
        u.selectionStart = u.value.length - vl, u.selectionEnd = u.value.length - vl;
      }
      ce ? Be += 0.5 : (Xe = (N.width - 8 - It) / N.zoom.value, Be = Math.min(Be, Xe)), He *= 1.05;
      let Sr = Ye($), Ds = (N.height - Yt) / N.zoom.value;
      Object.assign(u.style, { font: Sr, lineHeight: $.lineHeight, width: `${Be}px`, height: `${He}px`, left: `${It}px`, top: `${Yt}px`, transform: NY(Be, He, uR($, ce), N, Xe, Ds), textAlign: R, verticalAlign: V, color: $.strokeColor, opacity: $.opacity / 100, filter: "var(--theme-filter)", maxHeight: `${Ds}px` }), u.scrollTop = 0, ki() && (u.style.fontFamily = as($)), W($, { x: ae, y: he });
    }
  }, u = document.createElement("textarea");
  u.dir = "auto", u.tabIndex = 0, u.dataset.type = "wysiwyg", u.wrap = "off", u.classList.add("excalidraw-wysiwyg");
  let f = "pre", p = "normal";
  (rt(i) || !i.autoResize) && (f = "pre-wrap", p = "break-word"), Object.assign(u.style, { position: "absolute", display: "inline-block", minHeight: "1em", backfaceVisibility: "hidden", margin: 0, padding: 0, border: 0, outline: 0, resize: "none", background: "transparent", overflow: "hidden", zIndex: "var(--zIndex-wysiwyg)", wordBreak: p, whiteSpace: f, overflowWrap: "break-word", boxSizing: "content-box" }), u.value = i.originalText, o(), t && (u.onpaste = async (N) => {
    let $ = await r3(N, !0);
    if (!$.text) return;
    let R = ls($.text);
    if (!R) return;
    let V = Vt(i, s.scene.getNonDeletedElementsMap()), O = Ye({ fontSize: s.state.currentItemFontSize, fontFamily: s.state.currentItemFontFamily });
    if (V) {
      let G = be(V, s.scene.getNonDeletedElementsMap()), ae = gl(`${u.value}${R}`, O, Ti(V, G)), he = H0(ae, O);
      u.style.width = `${he}px`;
    }
  }, u.oninput = () => {
    let N = ls(u.value);
    if (u.value !== N) {
      let $ = u.selectionStart;
      u.value = N, u.selectionStart = $, u.selectionEnd = $;
    }
    t(u.value);
  }), u.onkeydown = (N) => {
    if (!N.shiftKey && I6.keyTest(N)) N.preventDefault(), s.actionManager.executeAction(I6), o();
    else if (!N.shiftKey && T6.keyTest(N)) N.preventDefault(), s.actionManager.executeAction(T6), o();
    else if (!N.shiftKey && _6.keyTest(N)) N.preventDefault(), s.actionManager.executeAction(_6), o();
    else if (k6.keyTest(N)) s.actionManager.executeAction(k6);
    else if (M6.keyTest(N)) s.actionManager.executeAction(M6);
    else if (N.key === L.ESCAPE) N.preventDefault(), E = !0, S();
    else if (N.key === L.ENTER && N[L.CTRL_OR_CMD]) {
      if (N.preventDefault(), N.isComposing || N.keyCode === 229) return;
      E = !0, S();
    } else if (N.key === L.TAB || N[L.CTRL_OR_CMD] && (N.code === _e.BRACKET_LEFT || N.code === _e.BRACKET_RIGHT)) {
      if (N.preventDefault(), N.isComposing) return;
      N.shiftKey || N.code === _e.BRACKET_LEFT ? v() : b(), u.dispatchEvent(new Event("input"));
    }
  };
  let U = 4, m = " ".repeat(U), g = new RegExp(`^ {1,${U}}`), b = () => {
    let { selectionStart: N, selectionEnd: $ } = u, R = x(), V = u.value;
    R.forEach((O) => {
      let G = V.slice(0, O), ae = V.slice(O);
      V = `${G}${m}${ae}`;
    }), u.value = V, u.selectionStart = N + U, u.selectionEnd = $ + U * R.length;
  }, v = () => {
    let { selectionStart: N, selectionEnd: $ } = u, R = x(), V = [], O = u.value;
    R.forEach((G) => {
      let ae = O.slice(G, G + U).match(g);
      if (ae) {
        let he = O.slice(0, G), ce = O.slice(G + ae[0].length);
        O = `${he}${ce}`, V.push(G);
      }
    }), u.value = O, V.length && (N > V[V.length - 1] ? u.selectionStart = Math.max(N - U, V[V.length - 1]) : u.selectionStart = N, u.selectionEnd = Math.max(u.selectionStart, $ - U * V.length));
  }, x = () => {
    let { selectionStart: N, selectionEnd: $, value: R } = u, V = R.slice(0, N).match(/[^\n]*$/)[0].length;
    return N = N - V, R.slice(N, $).split(`
`).reduce((O, G, ae, he) => O.concat(ae ? O[ae - 1] + he[ae - 1].length + 1 : N), []).reverse();
  }, y = (N) => {
    N.target instanceof HTMLCanvasElement && (N.preventDefault(), N.stopPropagation());
  }, E = !1, S = () => {
    var R, V;
    if (D) return;
    D = !0, w();
    let N = (R = Ai.getScene(i)) == null ? void 0 : R.getElement(i.id);
    if (!N) return;
    let $ = Vt(N, s.scene.getNonDeletedElementsMap());
    if ($) {
      if (u.value.trim()) {
        let O = Ii($);
        !O || O !== i.id ? W($, { boundElements: ($.boundElements || []).concat({ type: "text", id: i.id }) }) : ye($) && uh($);
      } else W($, { boundElements: (V = $.boundElements) == null ? void 0 : V.filter((O) => !q(O)) });
      un(N, $, s.scene.getNonDeletedElementsMap());
    }
    n({ viaKeyboard: E, nextOriginalText: u.value });
  }, w = () => {
    u.onblur = null, u.oninput = null, u.onkeydown = null, P && P.disconnect(), window.removeEventListener("resize", o), window.removeEventListener("wheel", y, !0), window.removeEventListener("pointerdown", T), window.removeEventListener("pointerup", M), window.removeEventListener("blur", S), window.removeEventListener("beforeunload", S), _(), A(), u.remove();
  }, M = (N) => {
    window.removeEventListener("pointerup", M);
    let $ = N == null ? void 0 : N.target, R = $ instanceof HTMLElement && $.classList.contains("properties-trigger");
    setTimeout(() => {
      u.onblur = S, R || u.focus();
    });
  }, I = () => {
    u.onblur = null, window.addEventListener("pointerup", M), window.addEventListener("blur", S);
  }, T = (N) => {
    let $ = N == null ? void 0 : N.target;
    if (N.button === Gi.WHEEL) {
      $ instanceof HTMLTextAreaElement && (N.preventDefault(), s.handleCanvasPanUsingWheelOrSpaceDrag(N)), I();
      return;
    }
    let R = $ instanceof HTMLElement && $.classList.contains("properties-trigger");
    (N.target instanceof HTMLElement || N.target instanceof SVGElement) && N.target.closest(`.${es.SHAPE_ACTIONS_MENU}, .${es.ZOOM_ACTIONS}`) && !Rr(N.target) || R ? I() : N.target instanceof HTMLCanvasElement && !ki() && requestAnimationFrame(() => {
      S();
    });
  }, _ = s.scene.onUpdate(() => {
    var N;
    o(), (N = document.activeElement) != null && N.closest(".properties-content") || u.focus();
  }), A = s.onScrollChangeEmitter.on(() => {
    o();
  }), D = !1;
  c && u.select(), M();
  let P = null;
  r && "ResizeObserver" in window ? (P = new window.ResizeObserver(() => {
    o();
  }), P.observe(r)) : window.addEventListener("resize", o), u.onpointerdown = (N) => N.stopPropagation(), requestAnimationFrame(() => {
    window.addEventListener("pointerdown", T, { capture: !0 });
  }), window.addEventListener("beforeunload", S), l == null || l.querySelector(".excalidraw-textEditorContainer").appendChild(u);
}, $Y = Z({ name: "autoResize", label: "labels.autoResize", icon: null, trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = xe(e, t);
  return i.length === 1 && q(i[0]) && !i[0].autoResize;
}, perform: (e, t, n, a) => {
  let i = xe(e, t);
  return { appState: t, elements: e.map((r) => {
    if (r.id === i[0].id && q(r)) {
      let l = ln(r.originalText, Ye(r), r.lineHeight);
      return ge(r, { autoResize: !0, width: l.width, height: l.height, text: r.originalText });
    }
    return r;
  }), captureUpdate: H.IMMEDIATELY };
} }), FY = (e) => {
  let t = ["flowchart", "graph", "sequenceDiagram", "classDiagram", "stateDiagram", "stateDiagram-v2", "erDiagram", "journey", "gantt", "pie", "quadrantChart", "requirementDiagram", "gitGraph", "C4Context", "mindmap", "timeline", "zenuml", "sankey", "xychart", "block"];
  return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map((n) => `\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim());
}, ix = ({ canvas: e, rc: t, newElement: n, elementsMap: a, allElementsMap: i, scale: r, appState: l, renderConfig: s }) => {
  if (e) {
    let [c, d] = fp(e, r), o = pp({ canvas: e, scale: r, normalizedWidth: c, normalizedHeight: d });
    o.save(), o.scale(l.zoom.value, l.zoom.value), n && n.type !== "selection" ? Lr(n, a, i, t, o, s, l) : o.clearRect(0, 0, c, d);
  }
}, zY = Hu((e) => {
  ix(e);
}, { trailing: !0 }), BY = (e, t) => {
  if (t) {
    zY(e);
    return;
  }
  ix(e);
}, HY = (e) => {
  let t = ie(null);
  return Q(() => {
    t.current && BY({ canvas: t.current, scale: e.scale, newElement: e.appState.newElement, elementsMap: e.elementsMap, allElementsMap: e.allElementsMap, rc: e.rc, renderConfig: e.renderConfig, appState: e.appState }, kU());
  }), h.jsx("canvas", { className: "excalidraw__canvas", style: { width: e.appState.width, height: e.appState.height }, width: e.appState.width * e.scale, height: e.appState.height * e.scale, ref: t });
}, XY = HY, rx = Y.createContext(null), lx = Y.createContext(null), sx = { viewport: { isMobile: !1, isLandscape: !1 }, editor: { isMobile: !1, canFitSidebar: !1 }, isTouchScreen: !1 }, MU = Y.createContext(sx);
MU.displayName = "DeviceContext";
var CU = Y.createContext({ container: null, id: null });
CU.displayName = "ExcalidrawContainerContext";
var IU = Y.createContext([]);
IU.displayName = "ExcalidrawElementsContext";
var TU = Y.createContext({ ...Ka(), width: 0, height: 0, offsetLeft: 0, offsetTop: 0 });
TU.displayName = "ExcalidrawAppStateContext";
var _U = Y.createContext(() => {
  console.warn("Uninitialized ExcalidrawSetAppStateContext context!");
});
_U.displayName = "ExcalidrawSetAppStateContext";
var AU = Y.createContext(null);
AU.displayName = "ExcalidrawActionManagerContext";
var ri = () => Cn(rx), kc = () => Cn(lx), $t = () => Cn(MU), li = () => Cn(CU), Th = () => Cn(IU), Mc = () => Cn(TU), Ft = () => Cn(_U), In = () => Cn(AU), Zs = !1, Vf = 0, Ir = !1, Ks = !1, Gf = !1, Yf = { horizontal: null, vertical: null }, Wi = 0, qs = !1, Zf = /* @__PURE__ */ new Map(), ld = !1, T5 = 0, _5 = !1, Tr = null, De = { pointers: /* @__PURE__ */ new Map(), lastCenter: null, initialDistance: null, initialScale: null }, WY = class ox extends Y.Component {
  constructor(t) {
    super(t), j(this, "canvas"), j(this, "interactiveCanvas", null), j(this, "rc"), j(this, "unmounted", !1), j(this, "actionManager"), j(this, "device", sx), j(this, "excalidrawContainerRef", Y.createRef()), j(this, "scene"), j(this, "fonts"), j(this, "renderer"), j(this, "visibleElements"), j(this, "resizeObserver"), j(this, "nearestScrollableContainer"), j(this, "library"), j(this, "libraryItemsFromStorage"), j(this, "id"), j(this, "store"), j(this, "history"), j(this, "excalidrawContainerValue"), j(this, "files", {}), j(this, "imageCache", /* @__PURE__ */ new Map()), j(this, "iFrameRefs", /* @__PURE__ */ new Map()), j(this, "embedsValidationStatus", /* @__PURE__ */ new Map()), j(this, "initializedEmbeds", /* @__PURE__ */ new Set()), j(this, "elementsPendingErasure", /* @__PURE__ */ new Set()), j(this, "flowChartCreator", new cV()), j(this, "flowChartNavigator", new oV()), j(this, "hitLinkElement"), j(this, "lastPointerDownEvent", null), j(this, "lastPointerUpEvent", null), j(this, "lastPointerMoveEvent", null), j(this, "lastPointerMoveCoords", null), j(this, "lastViewportPosition", { x: 0, y: 0 }), j(this, "animationFrameHandler", new RY()), j(this, "laserTrails", new PY(this.animationFrameHandler, this)), j(this, "eraserTrail", new v0(this.animationFrameHandler, this, { streamline: 0.2, size: 5, keepHead: !0, sizeMapping: (o) => {
      let u = Math.max(0, 1 - (performance.now() - o.pressure) / 200), f = (10 - Math.min(10, o.totalLength - o.currentIndex)) / 10;
      return Math.min(Vr(f), Vr(u));
    }, fill: () => this.state.theme === Me.LIGHT ? "rgba(0, 0, 0, 0.2)" : "rgba(255, 255, 255, 0.2)" })), j(this, "onChangeEmitter", new Oa()), j(this, "onPointerDownEmitter", new Oa()), j(this, "onPointerUpEmitter", new Oa()), j(this, "onUserFollowEmitter", new Oa()), j(this, "onScrollChangeEmitter", new Oa()), j(this, "missingPointerEventCleanupEmitter", new Oa()), j(this, "onRemoveEventListenersEmitter", new Oa()), j(this, "getEffectiveGridSize", () => Zo(this) ? this.state.gridSize : null), j(this, "updateEmbedValidationStatus", (o, u) => {
      this.embedsValidationStatus.set(o.id, u), pt.delete(o);
    }), j(this, "updateEmbeddables", () => {
      let o = /* @__PURE__ */ new Set(), u = !1;
      this.scene.getNonDeletedElements().filter((f) => {
        if (vn(f)) {
          if (o.add(f.id), !this.embedsValidationStatus.has(f.id)) {
            u = !0;
            let p = Sd(f.link, this.props.validateEmbeddable);
            this.updateEmbedValidationStatus(f, p);
          }
        } else qi(f) && o.add(f.id);
        return !1;
      }), u && this.scene.triggerUpdate(), this.iFrameRefs.forEach((f, p) => {
        o.has(p) || this.iFrameRefs.delete(p);
      });
    }), j(this, "getFrameNameDOMId", (o) => `${this.id}-frame-name-${o.id}`), j(this, "frameNameBoundsCache", { get: (o) => {
      let u = this.frameNameBoundsCache._cache.get(o.id);
      if (!u || u.zoom !== this.state.zoom.value || u.versionNonce !== o.versionNonce) {
        let f = document.getElementById(this.getFrameNameDOMId(o));
        if (f) {
          let p = f.getBoundingClientRect(), U = et({ clientX: p.x, clientY: p.y }, this.state), m = et({ clientX: p.right, clientY: p.bottom }, this.state);
          return u = { x: U.x, y: U.y, width: m.x - U.x, height: m.y - U.y, angle: 0, zoom: this.state.zoom.value, versionNonce: o.versionNonce }, this.frameNameBoundsCache._cache.set(o.id, u), u;
        }
        return null;
      }
      return u;
    }, _cache: /* @__PURE__ */ new Map() }), j(this, "resetEditingFrame", (o) => {
      var u;
      o && W(o, { name: ((u = o.name) == null ? void 0 : u.trim()) || null }), this.setState({ editingFrame: null });
    }), j(this, "renderFrameNames", () => {
      if (!this.state.frameRendering.enabled || !this.state.frameRendering.name) return this.state.editingFrame && this.resetEditingFrame(null), null;
      let o = this.state.theme === Me.DARK;
      return this.scene.getNonDeletedFramesLikes().map((u) => {
        if (!bu(u, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap())) return this.state.editingFrame === u.id && this.resetEditingFrame(u), null;
        let { x: f, y: p } = ca({ sceneX: u.x, sceneY: u.y }, this.state), U = 6, m, g = d3(u);
        if (u.id === this.state.editingFrame) {
          let b = g;
          m = h.jsx("input", { autoFocus: !0, value: b, onChange: (v) => {
            W(u, { name: v.target.value });
          }, onFocus: (v) => v.target.select(), onBlur: () => this.resetEditingFrame(u), onKeyDown: (v) => {
            (v.key === L.ESCAPE || v.key === L.ENTER) && this.resetEditingFrame(u);
          }, style: { background: this.state.viewBackgroundColor, filter: o ? P0 : "none", zIndex: 2, border: "none", display: "block", padding: `${U}px`, borderRadius: 4, boxShadow: "inset 0 0 0 1px var(--color-primary)", fontFamily: "Assistant", fontSize: "14px", transform: `translate(-${U}px, ${U}px)`, color: "var(--color-gray-80)", overflow: "hidden", maxWidth: `${document.body.clientWidth - f - U}px` }, size: b.length + 1 || 1, dir: "auto", autoComplete: "off", autoCapitalize: "off", autoCorrect: "off" });
        } else m = g;
        return h.jsx("div", { id: this.getFrameNameDOMId(u), style: { position: "absolute", bottom: `${this.state.height + ht.nameOffsetY - p + this.state.offsetTop}px`, left: `${f - this.state.offsetLeft}px`, zIndex: 2, fontSize: ht.nameFontSize, color: o ? ht.nameColorDarkTheme : ht.nameColorLightTheme, lineHeight: ht.nameLineHeight, width: "max-content", maxWidth: `${u.width}px`, overflow: u.id === this.state.editingFrame ? "visible" : "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis", cursor: We.MOVE, pointerEvents: this.state.viewModeEnabled ? Sl.disabled : Sl.enabled }, onPointerDown: (b) => this.handleCanvasPointerDown(b), onWheel: (b) => this.handleWheel(b), onContextMenu: this.handleCanvasContextMenu, onDoubleClick: () => {
          this.setState({ editingFrame: u.id });
        }, children: m }, u.id);
      });
    }), j(this, "focusContainer", () => {
      var o;
      (o = this.excalidrawContainerRef.current) == null || o.focus();
    }), j(this, "getSceneElementsIncludingDeleted", () => this.scene.getElementsIncludingDeleted()), j(this, "getSceneElements", () => this.scene.getNonDeletedElements()), j(this, "onInsertElements", (o) => {
      this.addElementsFromPasteOrLibrary({ elements: o, position: "center", files: null });
    }), j(this, "onExportImage", async (o, u, f) => {
      tt("export", o, "ui");
      let p = await Mh(o, u, this.state, this.files, { exportBackground: this.state.exportBackground, name: this.getName(), viewBackgroundColor: this.state.viewBackgroundColor, exportingFrame: f.exportingFrame }).catch(qb).catch((U) => {
        console.error(U), this.setState({ errorMessage: U.message });
      });
      this.state.exportEmbedScene && p && Bp(p) && this.setState({ fileHandle: p });
    }), j(this, "magicGenerations", /* @__PURE__ */ new Map()), j(this, "updateMagicGeneration", ({ frameElement: o, data: u }) => {
      u.status === "pending" ? W(o, { customData: { generationData: void 0 } }, !1) : W(o, { customData: { generationData: u } }, !1), this.magicGenerations.set(o.id, u), this.triggerRender();
    }), j(this, "plugins", {}), j(this, "onMagicframeToolSelect", () => {
      let o = this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds });
      if (o.length === 0) this.setActiveTool({ type: Pt.magicframe }), tt("ai", "tool-select (empty-selection)", "d2c");
      else {
        let u = o.length === 1 && bd(o[0]) && o[0];
        if (!u && o.some((p) => de(p) || p.frameId)) {
          this.setActiveTool({ type: Pt.magicframe });
          return;
        }
        tt("ai", "tool-select (existing selection)", "d2c");
        let f;
        if (u) f = u;
        else {
          let [p, U, m, g] = ze(o), b = 50;
          f = T1({ ...ht, x: p - b, y: U - b, width: m - p + b * 2, height: g - U + b * 2, opacity: 100, locked: !1 }), this.scene.insertElement(f);
          for (let v of o) W(v, { frameId: f.id });
          this.setState({ selectedElementIds: { [f.id]: !0 } });
        }
        this.onMagicFrameGenerate(f, "upstream");
      }
    }), j(this, "openEyeDropper", ({ type: o }) => {
      fa.set(wh, { swapPreviewOnAlt: !0, colorPickerType: o === "stroke" ? "elementStroke" : "elementBackground", onSelect: (u, f) => {
        let p = o === "background" && f.altKey || o === "stroke" && !f.altKey;
        !this.scene.getSelectedElements(this.state).length || this.state.activeTool.type !== "selection" ? p ? this.syncActionResult({ appState: { ...this.state, currentItemStrokeColor: u }, captureUpdate: H.IMMEDIATELY }) : this.syncActionResult({ appState: { ...this.state, currentItemBackgroundColor: u }, captureUpdate: H.IMMEDIATELY }) : this.updateScene({ elements: this.scene.getElementsIncludingDeleted().map((U) => this.state.selectedElementIds[U.id] ? ge(U, { [p ? "strokeColor" : "backgroundColor"]: u }) : U), captureUpdate: H.IMMEDIATELY });
      }, keepOpenOnAlt: !1 });
    }), j(this, "dismissLinearEditor", () => {
      setTimeout(() => {
        this.setState({ editingLinearElement: null });
      });
    }), j(this, "syncActionResult", Ut((o) => {
      var p, U, m, g, b, v;
      if (this.unmounted || o === !1) return;
      o.captureUpdate === H.NEVER ? this.store.shouldUpdateSnapshot() : o.captureUpdate === H.IMMEDIATELY && this.store.shouldCaptureIncrement();
      let u = !1, f = null;
      if (o.elements && (this.scene.replaceAllElements(o.elements), u = !0), o.files && (this.addMissingFiles(o.files, o.replaceFiles), this.addNewImagesToImageCache()), o.appState || f || this.state.contextMenu) {
        let x = ((p = o == null ? void 0 : o.appState) == null ? void 0 : p.viewModeEnabled) || !1, y = ((U = o == null ? void 0 : o.appState) == null ? void 0 : U.zenModeEnabled) || !1, E = ((m = o == null ? void 0 : o.appState) == null ? void 0 : m.theme) || this.props.theme || Me.LIGHT, S = ((g = o == null ? void 0 : o.appState) == null ? void 0 : g.name) ?? this.state.name, w = ((b = o == null ? void 0 : o.appState) == null ? void 0 : b.errorMessage) ?? this.state.errorMessage;
        typeof this.props.viewModeEnabled < "u" && (x = this.props.viewModeEnabled), typeof this.props.zenModeEnabled < "u" && (y = this.props.zenModeEnabled), f = ((v = o.appState) == null ? void 0 : v.editingTextElement) || null, o.elements && f && o.elements.forEach((M) => {
          (f == null ? void 0 : f.id) === M.id && f !== M && O1(M) && q(M) && (f = M);
        }), f != null && f.isDeleted && (f = null), this.setState((M) => {
          let I = o.appState || {};
          return { ...M, ...I, contextMenu: null, editingTextElement: f, viewModeEnabled: x, zenModeEnabled: y, theme: E, name: S, errorMessage: w };
        }), u = !0;
      }
      !u && o.captureUpdate !== H.EVENTUALLY && this.scene.triggerUpdate();
    })), j(this, "onBlur", Ut(() => {
      Ir = !1, this.setState({ isBindingEnabled: !0 });
    })), j(this, "onUnload", () => {
      this.onBlur();
    }), j(this, "disableEvent", (o) => {
      o.preventDefault();
    }), j(this, "resetHistory", () => {
      this.history.clear();
    }), j(this, "resetStore", () => {
      this.store.clear();
    }), j(this, "resetScene", Ut((o) => {
      this.scene.replaceAllElements([]), this.setState((u) => ({ ...Ka(), isLoading: o != null && o.resetLoadingState ? !1 : u.isLoading, theme: this.state.theme })), this.resetStore(), this.resetHistory();
    })), j(this, "initializeScene", async () => {
      var f;
      "launchQueue" in window && "LaunchParams" in window && window.launchQueue.setConsumer(async (p) => {
        if (!p.files.length) return;
        let U = p.files[0], m = await U.getFile();
        this.loadFileToCanvas(new File([m], m.name || "", { type: m.type }), U);
      }), this.props.theme && this.setState({ theme: this.props.theme }), this.state.isLoading || this.setState({ isLoading: !0 });
      let o = null;
      try {
        typeof this.props.initialData == "function" ? o = await this.props.initialData() || null : o = await this.props.initialData || null, o != null && o.libraryItems && this.library.updateLibrary({ libraryItems: o.libraryItems, merge: !0 }).catch((p) => {
          console.error(p);
        });
      } catch (p) {
        console.error(p), o = { appState: { errorMessage: p.message || "Encountered an error during importing or restoring scene data" } };
      }
      let u = oh(o, null, null, { repairBindings: !0 });
      u.appState = { ...u.appState, theme: this.props.theme || u.appState.theme, openSidebar: ((f = u.appState) == null ? void 0 : f.openSidebar) || this.state.openSidebar, activeTool: u.appState.activeTool.type === "image" ? { ...u.appState.activeTool, type: "selection" } : u.appState.activeTool, isLoading: !1, toast: this.state.toast }, o != null && o.scrollToContent && (u.appState = { ...u.appState, ...Go(u.elements, { ...u.appState, width: this.state.width, height: this.state.height, offsetTop: this.state.offsetTop, offsetLeft: this.state.offsetLeft }) }), this.resetStore(), this.resetHistory(), this.syncActionResult({ ...u, captureUpdate: H.NEVER }), this.clearImageShapeCache(), this.fonts.loadSceneFonts().then((p) => {
        this.fonts.onLoaded(p);
      }), yo(window.location.href) && this.scrollToContent(window.location.href, { animate: !1 });
    }), j(this, "isMobileBreakpoint", (o, u) => o < Xk || u < Vk && o < Wk), j(this, "refreshViewportBreakpoints", () => {
      if (!this.excalidrawContainerRef.current) return;
      let { clientWidth: o, clientHeight: u } = document.body, f = this.device.viewport, p = md(f, { isLandscape: o > u, isMobile: this.isMobileBreakpoint(o, u) });
      return f !== p ? (this.device = { ...this.device, viewport: p }, !0) : !1;
    }), j(this, "refreshEditorBreakpoints", () => {
      let o = this.excalidrawContainerRef.current;
      if (!o) return;
      let { width: u, height: f } = o.getBoundingClientRect(), p = this.props.UIOptions.dockedSidebarBreakpoint != null ? this.props.UIOptions.dockedSidebarBreakpoint : Gk, U = this.device.editor, m = md(U, { isMobile: this.isMobileBreakpoint(u, f), canFitSidebar: u > p });
      return U !== m ? (this.device = { ...this.device, editor: m }, !0) : !1;
    }), j(this, "onResize", Ut(() => {
      this.scene.getElementsIncludingDeleted().forEach((o) => pt.delete(o)), this.refreshViewportBreakpoints(), this.updateDOMRect(), d1 || this.refreshEditorBreakpoints(), this.setState({});
    })), j(this, "onFullscreenChange", () => {
      var o;
      !document.fullscreenElement && ((o = this.state.activeEmbeddable) == null ? void 0 : o.state) === "active" && this.setState({ activeEmbeddable: null });
    }), j(this, "renderInteractiveSceneCallback", ({ atLeastOneVisibleElement: o, scrollBars: u, elementsMap: f }) => {
      u && (Yf = u);
      let p = this.state.editingTextElement ? !1 : !o && f.size > 0;
      this.state.scrolledOutside !== p && this.setState({ scrolledOutside: p }), this.scheduleImageRefresh();
    }), j(this, "onScroll", is(() => {
      let { offsetTop: o, offsetLeft: u } = this.getCanvasOffsets();
      this.setState((f) => f.offsetLeft === u && f.offsetTop === o ? null : { offsetTop: o, offsetLeft: u });
    }, Bk)), j(this, "onCut", Ut((o) => {
      var u;
      !((u = this.excalidrawContainerRef.current) != null && u.contains(document.activeElement)) || Rr(o.target) || (this.actionManager.executeAction(P6, "keyboard", o), o.preventDefault(), o.stopPropagation());
    })), j(this, "onCopy", Ut((o) => {
      var u;
      !((u = this.excalidrawContainerRef.current) != null && u.contains(document.activeElement)) || Rr(o.target) || (this.actionManager.executeAction(Ld, "keyboard", o), o.preventDefault(), o.stopPropagation());
    })), j(this, "onTouchStart", (o) => {
      if (Ob && o.preventDefault(), !Zs) {
        Zs = !0, clearTimeout(Vf), Vf = window.setTimeout(ox.resetTapTwice, Fk);
        return;
      }
      if (Zs && o.touches.length === 1) {
        let u = o.touches[0];
        this.handleCanvasDoubleClick({ clientX: u.clientX, clientY: u.clientY }), Zs = !1, clearTimeout(Vf);
      }
      o.touches.length === 2 && this.setState({ selectedElementIds: Le({}, this.state), activeEmbeddable: null });
    }), j(this, "onTouchEnd", (o) => {
      this.resetContextMenuTimer(), o.touches.length > 0 ? this.setState({ previousSelectedElementIds: {}, selectedElementIds: Le(this.state.previousSelectedElementIds, this.state) }) : De.pointers.clear();
    }), j(this, "pasteFromClipboard", Ut(async (o) => {
      var x, y;
      let u = !!ld, f = document.activeElement, p = (x = this.excalidrawContainerRef.current) == null ? void 0 : x.contains(f);
      if (o && !p) return;
      let U = document.elementFromPoint(this.lastViewportPosition.x, this.lastViewportPosition.y);
      if (o && (!(U instanceof HTMLCanvasElement) || Rr(f))) return;
      let { x: m, y: g } = et({ clientX: this.lastViewportPosition.x, clientY: this.lastViewportPosition.y }, this.state), b = (y = o == null ? void 0 : o.clipboardData) == null ? void 0 : y.files[0], v = await r3(o, u);
      if (!b && !u) {
        if (v.mixedContent) return this.addElementsFromMixedContentPaste(v.mixedContent, { isPlainPaste: u, sceneX: m, sceneY: g });
        if (v.text) {
          let E = v.text.trim();
          E.startsWith("<svg") && E.endsWith("</svg>") && (b = Cg(E));
        }
      }
      if (Kr(b) && !v.spreadsheet) {
        if (!this.isToolSupported("image")) {
          this.setState({ errorMessage: C("errors.imageToolNotSupported") });
          return;
        }
        let E = this.createImageElement({ sceneX: m, sceneY: g });
        this.insertImageElement(E, b), this.initializeImageDimensions(E), this.setState({ selectedElementIds: Le({ [E.id]: !0 }, this.state) });
        return;
      }
      if (this.props.onPaste) try {
        if (await this.props.onPaste(v, o) === !1) return;
      } catch (E) {
        console.error(E);
      }
      if (v.errorMessage) this.setState({ errorMessage: v.errorMessage });
      else if (v.spreadsheet && !u) this.setState({ pasteDialog: { data: v.spreadsheet, shown: !0 } });
      else if (v.elements) {
        let E = v.programmaticAPI ? b0(v.elements) : v.elements;
        this.addElementsFromPasteOrLibrary({ elements: E, files: v.files || null, position: "cursor", retainSeed: u });
      } else if (v.text) {
        if (v.text && FY(v.text)) {
          let w = await import("./index-BZXBCQdV.js").then((M) => M.b1);
          try {
            let { elements: M, files: I } = await w.parseMermaidToExcalidraw(v.text), T = b0(M, { regenerateIds: !0 });
            this.addElementsFromPasteOrLibrary({ elements: T, files: I, position: "cursor" });
            return;
          } catch (M) {
            console.warn(`parsing pasted text as mermaid definition failed: ${M.message}`);
          }
        }
        let E = n8(v.text).split(/\n+/).map((w) => w.trim()).filter(Boolean), S = E.map((w) => FR(w)).filter((w) => {
          var M;
          return Sd(w, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(w) || ((M = Hl(w)) == null ? void 0 : M.type) === "video");
        });
        if (!ld && S.length > 0 && S.length === E.length) {
          let w = [];
          for (let M of S) {
            let I = w[w.length - 1], T = this.insertEmbeddableElement({ sceneX: I ? I.x + I.width + 20 : m, sceneY: g, link: Dn(M) });
            T && w.push(T);
          }
          w.length && this.setState({ selectedElementIds: Object.fromEntries(w.map((M) => [M.id, !0])) });
          return;
        }
        this.addTextFromPaste(v.text, u);
      }
      this.setActiveTool({ type: "selection" }), o == null || o.preventDefault();
    })), j(this, "addElementsFromPasteOrLibrary", (o) => {
      var N, $;
      let u = Sp(o.elements, null, void 0), [f, p, U, m] = ze(u), g = en(f, U) / 2, b = en(p, m) / 2, v = typeof o.position == "object" ? o.position.clientX : o.position === "cursor" ? this.lastViewportPosition.x : this.state.width / 2 + this.state.offsetLeft, x = typeof o.position == "object" ? o.position.clientY : o.position === "cursor" ? this.lastViewportPosition.y : this.state.height / 2 + this.state.offsetTop, { x: y, y: E } = et({ clientX: v, clientY: x }, this.state), S = y - g, w = E - b, [M, I] = _t(S, w, this.getEffectiveGridSize()), T = D7(u.map((R) => ge(R, { x: R.x + M - f, y: R.y + I - p })), { randomizeSeed: !o.retainSeed }), _ = this.scene.getElementsIncludingDeleted(), A = [..._, ...T];
      A = (($ = (N = this.props).onDuplicate) == null ? void 0 : $.call(N, A, _)) || A, ei(A, ue(T));
      let D = this.getTopLayerFrameAtSceneCoords({ x: y, y: E });
      if (D) {
        let R = ZP(T, D);
        wo(A, R, D, this.state);
      }
      this.scene.replaceAllElements(A), T.forEach((R) => {
        if (q(R) && rt(R)) {
          let V = Vt(R, this.scene.getElementsMapIncludingDeleted());
          un(R, V, this.scene.getElementsMapIncludingDeleted());
        }
      }), Ck && wi.loadElementsFonts(T).then((R) => {
        this.fonts.onLoaded(R);
      }), o.files && this.addMissingFiles(o.files), this.store.shouldCaptureIncrement();
      let P = Rp(T);
      this.setState({ ...this.state, openSidebar: this.state.openSidebar && this.device.editor.canFitSidebar && fa.get(xU) ? this.state.openSidebar : null, ...dn({ editingGroupId: null, selectedElementIds: P.reduce((R, V) => (rt(V) || (R[V.id] = !0), R), {}) }, this.scene.getNonDeletedElements(), this.state, this) }, () => {
        o.files && this.addNewImagesToImageCache();
      }), this.setActiveTool({ type: "selection" }), o.fitToContent && this.scrollToContent(T, { fitToContent: !0, canvasOffsets: this.getEditorUIOffsets() });
    }), j(this, "setAppState", (o, u) => {
      this.setState(o, u);
    }), j(this, "removePointer", (o) => {
      Wi && this.resetContextMenuTimer(), De.pointers.delete(o.pointerId);
    }), j(this, "toggleLock", (o = "ui") => {
      this.state.activeTool.locked || tt("toolbar", "toggleLock", `${o} (${this.device.editor.isMobile ? "mobile" : "desktop"})`), this.setState((u) => ({ activeTool: { ...u.activeTool, ...Ct(this.state, u.activeTool.locked ? { type: "selection" } : u.activeTool), locked: !u.activeTool.locked } }));
    }), j(this, "updateFrameRendering", (o) => {
      this.setState((u) => {
        let f = typeof o == "function" ? o(u.frameRendering) : o;
        return { frameRendering: { enabled: (f == null ? void 0 : f.enabled) ?? u.frameRendering.enabled, clip: (f == null ? void 0 : f.clip) ?? u.frameRendering.clip, name: (f == null ? void 0 : f.name) ?? u.frameRendering.name, outline: (f == null ? void 0 : f.outline) ?? u.frameRendering.outline } };
      });
    }), j(this, "togglePenMode", (o) => {
      this.setState((u) => ({ penMode: o ?? !u.penMode, penDetected: !0 }));
    }), j(this, "onHandToolToggle", () => {
      this.actionManager.executeAction(VH);
    }), j(this, "zoomCanvas", (o) => {
      this.setState({ ...Xr({ viewportX: this.state.width / 2 + this.state.offsetLeft, viewportY: this.state.height / 2 + this.state.offsetTop, nextZoom: xi(o) }, this.state) });
    }), j(this, "cancelInProgressAnimation", null), j(this, "scrollToContent", (o = this.scene.getNonDeletedElements(), u) => {
      var g;
      if (typeof o == "string") {
        let b;
        if (yo(o) ? b = GR(o) : b = o, b) {
          let v = this.scene.getElementsFromId(b);
          v != null && v.length ? this.scrollToContent(v, { fitToContent: (u == null ? void 0 : u.fitToContent) ?? !0, animate: (u == null ? void 0 : u.animate) ?? !0 }) : yo(o) && this.setState({ toast: { message: C("elementLink.notFound"), duration: 3e3, closable: !0 } });
        }
        return;
      }
      (g = this.cancelInProgressAnimation) == null || g.call(this);
      let f = Array.isArray(o) ? o : [o], p = this.state.zoom, U = this.state.scrollX, m = this.state.scrollY;
      if (u != null && u.fitToContent || u != null && u.fitToViewport) {
        let { appState: b } = Sh({ canvasOffsets: u.canvasOffsets, targetElements: f, appState: this.state, fitToViewport: !!(u != null && u.fitToViewport), viewportZoomFactor: u == null ? void 0 : u.viewportZoomFactor, minZoom: u == null ? void 0 : u.minZoom, maxZoom: u == null ? void 0 : u.maxZoom });
        p = b.zoom, U = b.scrollX, m = b.scrollY;
      } else {
        let b = Go(f, this.state);
        U = b.scrollX, m = b.scrollY;
      }
      if (u != null && u.animate) {
        let b = this.state.scrollX, v = this.state.scrollY, x = this.state.zoom.value, y = bM({ fromValues: { scrollX: b, scrollY: v, zoom: x }, toValues: { scrollX: U, scrollY: m, zoom: p.value }, interpolateValue: (E, S, w, M) => {
          if (M === "zoom") return E * Math.pow(S / E, Vr(w));
        }, onStep: ({ scrollX: E, scrollY: S, zoom: w }) => {
          this.setState({ scrollX: E, scrollY: S, zoom: { value: w } });
        }, onStart: () => {
          this.setState({ shouldCacheIgnoreZoom: !0 });
        }, onEnd: () => {
          this.setState({ shouldCacheIgnoreZoom: !1 });
        }, onCancel: () => {
          this.setState({ shouldCacheIgnoreZoom: !1 });
        }, duration: (u == null ? void 0 : u.duration) ?? 500 });
        this.cancelInProgressAnimation = () => {
          y(), this.cancelInProgressAnimation = null;
        };
      } else this.setState({ scrollX: U, scrollY: m, zoom: p });
    }), j(this, "maybeUnfollowRemoteUser", () => {
      this.state.userToFollow && this.setState({ userToFollow: null });
    }), j(this, "translateCanvas", (o) => {
      var u;
      (u = this.cancelInProgressAnimation) == null || u.call(this), this.maybeUnfollowRemoteUser(), this.setState(o);
    }), j(this, "setToast", (o) => {
      this.setState({ toast: o });
    }), j(this, "restoreFileFromShare", async () => {
      try {
        let o = await caches.open("web-share-target"), u = await o.match("shared-file");
        if (u) {
          let f = await u.blob(), p = new File([f], f.name || "", { type: f.type });
          this.loadFileToCanvas(p, null), await o.delete("shared-file"), window.history.replaceState(null, Tk, window.location.pathname);
        }
      } catch (o) {
        this.setState({ errorMessage: o.message });
      }
    }), j(this, "addFiles", Ut((o) => {
      let { addedFiles: u } = this.addMissingFiles(o);
      this.clearImageShapeCache(u), this.scene.triggerUpdate(), this.addNewImagesToImageCache();
    })), j(this, "addMissingFiles", (o, u = !1) => {
      let f = u ? {} : { ...this.files }, p = {}, U = Array.isArray(o) ? o : Object.values(o);
      for (let m of U) if (!f[m.id] && (p[m.id] = m, f[m.id] = m, m.mimeType === oe.svg)) try {
        let g = wN(Jm(SN(m.dataURL)), oe.svg);
        m.dataURL !== g && (m.version = (m.version ?? 1) + 1, m.dataURL = g);
      } catch (g) {
        console.error(g);
      }
      return this.files = f, { addedFiles: p };
    }), j(this, "updateScene", Ut((o) => {
      let u = _i(o.elements ?? []);
      if (o.captureUpdate && o.captureUpdate !== H.EVENTUALLY) {
        let f = this.store.snapshot.appState, p = this.store.snapshot.elements, U = o.appState ? Object.assign({}, f, o.appState) : f, m = o.elements ? this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(), ue(u)) : p;
        o.captureUpdate === H.IMMEDIATELY ? this.store.captureIncrement(m, U) : o.captureUpdate === H.NEVER && this.store.updateSnapshot(m, U);
      }
      o.appState && this.setState(o.appState), o.elements && this.scene.replaceAllElements(u), o.collaborators && this.setState({ collaborators: o.collaborators });
    })), j(this, "triggerRender", (o) => {
      o === !0 ? this.scene.triggerUpdate() : this.setState({});
    }), j(this, "toggleSidebar", ({ name: o, tab: u, force: f }) => {
      var m, g;
      let p;
      f === void 0 ? p = ((m = this.state.openSidebar) == null ? void 0 : m.name) === o && ((g = this.state.openSidebar) == null ? void 0 : g.tab) === u ? null : o : p = f ? o : null;
      let U = p ? { name: p } : null;
      return U && u && (U.tab = u), this.setState({ openSidebar: U }), !!p;
    }), j(this, "updateCurrentCursorPosition", Ut((o) => {
      this.lastViewportPosition.x = o.clientX, this.lastViewportPosition.y = o.clientY;
    })), j(this, "getEditorUIOffsets", () => {
      var U, m, g, b, v, x, y, E, S, w;
      let o = ((b = (g = (m = (U = this.excalidrawContainerRef) == null ? void 0 : U.current) == null ? void 0 : m.querySelector(".App-toolbar")) == null ? void 0 : g.getBoundingClientRect()) == null ? void 0 : b.bottom) ?? 0, u = (y = (x = (v = this.excalidrawContainerRef) == null ? void 0 : v.current) == null ? void 0 : x.querySelector(".sidebar")) == null ? void 0 : y.getBoundingClientRect(), f = (w = (S = (E = this.excalidrawContainerRef) == null ? void 0 : E.current) == null ? void 0 : S.querySelector(".App-menu__left")) == null ? void 0 : w.getBoundingClientRect(), p = 16;
      return nc().rtl ? { top: o + p, right: Math.max(this.state.width - ((f == null ? void 0 : f.left) ?? this.state.width), 0) + p, bottom: p, left: Math.max((u == null ? void 0 : u.right) ?? 0, 0) + p } : { top: o + p, right: Math.max(this.state.width - ((u == null ? void 0 : u.left) ?? this.state.width) + p, 0), bottom: p, left: Math.max((f == null ? void 0 : f.right) ?? 0, 0) + p };
    }), j(this, "onKeyDown", Ut((o) => {
      var U, m;
      if ("Proxy" in window && (!o.shiftKey && /^[A-Z]$/.test(o.key) || o.shiftKey && /^[a-z]$/.test(o.key)) && (o = new Proxy(o, { get(g, b) {
        let v = g[b];
        return typeof v == "function" ? v.bind(g) : b === "key" ? o.shiftKey ? g.key.toUpperCase() : g.key.toLowerCase() : v;
      } })), !f1(o.target)) {
        if ((o.key === L.ESCAPE || o.key === L.ENTER) && this.state.croppingElementId) {
          this.finishImageCropping();
          return;
        }
        let g = xe(this.scene.getNonDeletedElementsMap(), this.state);
        if (g.length === 1 && Re(g[0]) && o.key === L.ENTER) {
          this.startImageCropping(g[0]);
          return;
        }
        if (o.key === L.ESCAPE && this.flowChartCreator.isCreatingChart) {
          this.flowChartCreator.clear(), this.triggerRender(!0);
          return;
        }
        let b = ao(o.key);
        if (o[L.CTRL_OR_CMD] && b && !o.shiftKey) {
          o.preventDefault();
          let v = xe(this.scene.getNonDeletedElementsMap(), this.state);
          v.length === 1 && Wu(v[0]) && this.flowChartCreator.createNodes(v[0], this.scene.getNonDeletedElementsMap(), this.state, e5(o.key)), (U = this.flowChartCreator.pendingNodes) != null && U.length && !Id(this.flowChartCreator.pendingNodes, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(this.flowChartCreator.pendingNodes, { animate: !0, duration: 300, fitToContent: !0, canvasOffsets: this.getEditorUIOffsets() });
          return;
        }
        if (o.altKey) {
          let v = xe(this.scene.getNonDeletedElementsMap(), this.state);
          if (v.length === 1 && b) {
            o.preventDefault();
            let x = this.flowChartNavigator.exploreByDirection(v[0], this.scene.getNonDeletedElementsMap(), e5(o.key));
            if (x) {
              this.setState((E) => ({ selectedElementIds: Le({ [x]: !0 }, E) }));
              let y = this.scene.getNonDeletedElementsMap().get(x);
              y && !Id([y], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(y, { animate: !0, duration: 300, canvasOffsets: this.getEditorUIOffsets() });
            }
            return;
          }
        }
      }
      if (o[L.CTRL_OR_CMD] && o.key === L.P && !o.shiftKey && !o.altKey) {
        this.setToast({ message: C("commandPalette.shortcutHint", { shortcut: an("commandPalette") }) }), o.preventDefault();
        return;
      }
      if (o[L.CTRL_OR_CMD] && o.key.toLowerCase() === L.V && (ld = o.shiftKey, clearTimeout(T5), T5 = window.setTimeout(() => {
        ld = !1;
      }, 100)), o[L.CTRL_OR_CMD] && Rr(o.target) && (o.code === _e.MINUS || o.code === _e.EQUAL)) {
        o.preventDefault();
        return;
      }
      if (Rr(o.target) && o.key !== L.ESCAPE || ao(o.key) && f1(o.target)) return;
      if (o.key === L.QUESTION_MARK) {
        this.setState({ openDialog: { name: "help" } });
        return;
      } else if (o.key.toLowerCase() === L.E && o.shiftKey && o[L.CTRL_OR_CMD]) {
        o.preventDefault(), this.setState({ openDialog: { name: "imageExport" } });
        return;
      }
      if (o.key === L.PAGE_UP || o.key === L.PAGE_DOWN) {
        let g = (o.shiftKey ? this.state.width : this.state.height) / this.state.zoom.value;
        o.key === L.PAGE_DOWN && (g = -g), o.shiftKey ? this.translateCanvas((b) => ({ scrollX: b.scrollX + g })) : this.translateCanvas((b) => ({ scrollY: b.scrollY + g }));
      }
      if (((m = this.state.openDialog) == null ? void 0 : m.name) === "elementLinkSelector" || this.actionManager.handleKeyDown(o) || this.state.viewModeEnabled) return;
      if (o[L.CTRL_OR_CMD] && this.state.isBindingEnabled && this.setState({ isBindingEnabled: !1 }), ao(o.key)) {
        let g = this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }), b = g.find(ee), v = /* @__PURE__ */ new Set();
        g.filter(ee).filter((S) => {
          let w = S.startBinding && !g.some((I) => {
            var T;
            return I.id === ((T = S.startBinding) == null ? void 0 : T.elementId);
          }), M = S.endBinding && !g.some((I) => {
            var T;
            return I.id === ((T = S.endBinding) == null ? void 0 : T.elementId);
          });
          return w || M;
        }).forEach((S) => v.add(S.id)), g = g.filter((S) => !v.has(S.id));
        let x = this.getEffectiveGridSize() && (o.shiftKey ? z2 : this.getEffectiveGridSize()) || (o.shiftKey ? Ak : z2), y = 0, E = 0;
        o.key === L.ARROW_LEFT ? y = -x : o.key === L.ARROW_RIGHT ? y = x : o.key === L.ARROW_UP ? E = -x : o.key === L.ARROW_DOWN && (E = x), g.forEach((S) => {
          W(S, { x: S.x + y, y: S.y + E }, !1), Sn(S, this.scene.getNonDeletedElementsMap(), { simultaneouslyUpdated: g });
        }), this.setState({ suggestedBindings: of(g.filter((S) => S.id !== (b == null ? void 0 : b.id) || x !== 0), this.scene.getNonDeletedElementsMap(), this.state.zoom) }), this.scene.triggerUpdate(), o.preventDefault();
      } else if (o.key === L.ENTER) {
        let g = this.scene.getSelectedElements(this.state);
        if (g.length === 1) {
          let b = g[0];
          if (o[L.CTRL_OR_CMD]) pe(b) && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== g[0].id) && (this.store.shouldCaptureIncrement(), ee(b) || this.setState({ editingLinearElement: new J(b) }));
          else if (q(b) || UR(b)) {
            let v;
            q(b) || (v = b);
            let x = cf(b, this.state, this.scene.getNonDeletedElementsMap()), y = x.x, E = x.y;
            this.startTextEditing({ sceneX: y, sceneY: E, container: v }), o.preventDefault();
            return;
          } else de(b) && this.setState({ editingFrame: b.id });
        }
      } else if (!o.ctrlKey && !o.altKey && !o.metaKey && !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged) {
        let g = FD(o.key);
        g ? (this.state.activeTool.type !== g && tt("toolbar", g, `keyboard (${this.device.editor.isMobile ? "mobile" : "desktop"})`), g === "arrow" && this.state.activeTool.type === "arrow" && this.setState((b) => ({ currentItemArrowType: b.currentItemArrowType === Ht.sharp ? Ht.round : b.currentItemArrowType === Ht.round ? Ht.elbow : Ht.sharp })), this.setActiveTool({ type: g }), o.stopPropagation()) : o.key === L.Q && (this.toggleLock("keyboard"), o.stopPropagation());
      }
      if (o.key === L.SPACE && De.pointers.size === 0 && (Ir = !0, Ge(this.interactiveCanvas, We.GRAB), o.preventDefault()), (o.key === L.G || o.key === L.S) && !o.altKey && !o[L.CTRL_OR_CMD]) {
        let g = this.scene.getSelectedElements(this.state);
        if (this.state.activeTool.type === "selection" && !g.length) return;
        o.key === L.G && (os(this.state.activeTool.type) || g.some((b) => os(b.type))) && (this.setState({ openPopup: "elementBackground" }), o.stopPropagation()), o.key === L.S && (this.setState({ openPopup: "elementStroke" }), o.stopPropagation());
      }
      if (!o[L.CTRL_OR_CMD] && o.shiftKey && o.key.toLowerCase() === L.F) {
        let g = this.scene.getSelectedElements(this.state);
        if (this.state.activeTool.type === "selection" && !g.length) return;
        (this.state.activeTool.type === "text" || g.find((b) => q(b) || be(b, this.scene.getNonDeletedElementsMap()))) && (o.preventDefault(), this.setState({ openPopup: "fontFamily" }));
      }
      if (o.key === L.K && !o.altKey && !o[L.CTRL_OR_CMD]) {
        this.state.activeTool.type === "laser" ? this.setActiveTool({ type: "selection" }) : this.setActiveTool({ type: "laser" });
        return;
      }
      o[L.CTRL_OR_CMD] && (o.key === L.BACKSPACE || o.key === L.DELETE) && fa.set(Ih, "clearCanvas");
      let u = o.key.toLocaleLowerCase(), f = u === L.S && o.shiftKey, p = o.key === L.I || u === L.G && o.shiftKey;
      (f || p) && this.openEyeDropper({ type: f ? "stroke" : "background" });
    })), j(this, "onKeyUp", Ut((o) => {
      var u, f, p, U;
      if (o.key === L.SPACE && (this.state.viewModeEnabled || ((u = this.state.openDialog) == null ? void 0 : u.name) === "elementLinkSelector" ? Ge(this.interactiveCanvas, We.GRAB) : this.state.activeTool.type === "selection" ? ra(this.interactiveCanvas) : (La(this.interactiveCanvas, this.state), this.setState({ selectedElementIds: Le({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null })), Ir = !1), !o[L.CTRL_OR_CMD] && !this.state.isBindingEnabled && this.setState({ isBindingEnabled: !0 }), ao(o.key) && (ou(this.scene.getSelectedElements(this.state).filter(pe), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, Br(this.state), ((f = this.state.selectedLinearElement) == null ? void 0 : f.selectedPointsIndices) ?? [], this.state.zoom), this.setState({ suggestedBindings: [] })), o.altKey || this.flowChartNavigator.isExploring && (this.flowChartNavigator.clear(), this.syncActionResult({ captureUpdate: H.IMMEDIATELY })), !o[L.CTRL_OR_CMD] && this.flowChartCreator.isCreatingChart) {
        (p = this.flowChartCreator.pendingNodes) != null && p.length && this.scene.insertElements(this.flowChartCreator.pendingNodes);
        let m = (U = this.flowChartCreator.pendingNodes) == null ? void 0 : U[0];
        m && (this.setState((g) => ({ selectedElementIds: Le({ [m.id]: !0 }, g) })), Id([m], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) || this.scrollToContent(m, { animate: !0, duration: 300, canvasOffsets: this.getEditorUIOffsets() })), this.flowChartCreator.clear(), this.syncActionResult({ captureUpdate: H.IMMEDIATELY });
      }
    })), j(this, "isToolSupported", (o) => {
      var u;
      return ((u = this.props.UIOptions.tools) == null ? void 0 : u[o]) !== !1;
    }), j(this, "setActiveTool", (o) => {
      if (!this.isToolSupported(o.type)) {
        console.warn(`"${o.type}" tool is disabled via "UIOptions.canvasActions.tools.${o.type}"`);
        return;
      }
      let u = Ct(this.state, o);
      u.type === "hand" ? Ge(this.interactiveCanvas, We.GRAB) : Ir || La(this.interactiveCanvas, { ...this.state, activeTool: u }), mM(document.activeElement) && this.focusContainer(), F0(u.type) || this.setState({ suggestedBindings: [] }), u.type === "image" && this.onImageAction({ insertOnCanvasDirectly: (o.type === "image" && o.insertOnCanvasDirectly) ?? !1 }), this.setState((f) => {
        let p = { snapLines: f.snapLines.length ? [] : f.snapLines, originSnapOffset: null, activeEmbeddable: null };
        return u.type === "freedraw" && this.store.shouldCaptureIncrement(), u.type !== "selection" ? { ...f, activeTool: u, selectedElementIds: Le({}, f), selectedGroupIds: Le({}, f), editingGroupId: null, multiElement: null, ...p } : { ...f, activeTool: u, ...p };
      });
    }), j(this, "setOpenDialog", (o) => {
      this.setState({ openDialog: o });
    }), j(this, "setCursor", (o) => {
      Ge(this.interactiveCanvas, o);
    }), j(this, "resetCursor", () => {
      ra(this.interactiveCanvas);
    }), j(this, "isTouchScreenMultiTouchGesture", () => De.pointers.size >= 2), j(this, "getName", () => this.state.name || this.props.name || `${C("labels.untitled")}-${Z2()}`), j(this, "onGestureStart", Ut((o) => {
      o.preventDefault(), this.isTouchScreenMultiTouchGesture() && this.setState({ selectedElementIds: Le({}, this.state), activeEmbeddable: null }), De.initialScale = this.state.zoom.value;
    })), j(this, "onGestureChange", Ut((o) => {
      if (o.preventDefault(), this.isTouchScreenMultiTouchGesture()) return;
      let u = De.initialScale;
      u && this.setState((f) => ({ ...Xr({ viewportX: this.lastViewportPosition.x, viewportY: this.lastViewportPosition.y, nextZoom: xi(u * o.scale) }, f) }));
    })), j(this, "onGestureEnd", Ut((o) => {
      o.preventDefault(), this.isTouchScreenMultiTouchGesture() && this.setState({ previousSelectedElementIds: {}, selectedElementIds: Le(this.state.previousSelectedElementIds, this.state) }), De.initialScale = null;
    })), j(this, "startTextEditing", ({ sceneX: o, sceneY: u, insertAtParentCenter: f = !0, container: p, autoEdit: U = !0 }) => {
      let m = !1, g = f && this.getTextWysiwygSnappedToCenterPosition(o, u, this.state, p);
      p && g && (be(p, this.scene.getNonDeletedElementsMap()) || (m = !0));
      let b = null, v = this.scene.getSelectedElements(this.state);
      v.length === 1 ? q(v[0]) ? b = v[0] : p ? b = be(v[0], this.scene.getNonDeletedElementsMap()) : b = this.getTextElementAtPosition(o, u) : b = this.getTextElementAtPosition(o, u);
      let x = (b == null ? void 0 : b.fontFamily) || this.state.currentItemFontFamily, y = (b == null ? void 0 : b.lineHeight) || ol(x), E = this.state.currentItemFontSize;
      if (!b && m && p && !ye(p)) {
        let M = o8(Ye({ fontSize: E, fontFamily: x }), y), I = c8(E, y), T = Math.max(p.height, I), _ = Math.max(p.width, M);
        W(p, { height: T, width: _ }), o = p.x + _ / 2, u = p.y + T / 2, g && (g = this.getTextWysiwygSnappedToCenterPosition(o, u, this.state, p));
      }
      let S = this.getTopLayerFrameAtSceneCoords({ x: o, y: u }), w = b || Rn({ x: g ? g.elementCenterX : o, y: g ? g.elementCenterY : u, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, text: "", fontSize: E, fontFamily: x, textAlign: g ? "center" : this.state.currentItemTextAlign, verticalAlign: g ? jn.MIDDLE : Wd, containerId: m ? p == null ? void 0 : p.id : void 0, groupIds: (p == null ? void 0 : p.groupIds) ?? [], lineHeight: y, angle: (p == null ? void 0 : p.angle) ?? 0, frameId: S ? S.id : null });
      if (!b && m && p && W(p, { boundElements: (p.boundElements || []).concat({ type: "text", id: w.id }) }), this.setState({ editingTextElement: w }), !b) if (p && m) {
        let M = this.scene.getElementIndex(p.id);
        this.scene.insertElementAtIndex(w, M + 1);
      } else this.scene.insertElement(w);
      U || b || p ? this.handleTextWysiwyg(w, { isExistingElement: !!b }) : this.setState({ newElement: w, multiElement: null });
    }), j(this, "startImageCropping", (o) => {
      this.store.shouldCaptureIncrement(), this.setState({ croppingElementId: o.id });
    }), j(this, "finishImageCropping", () => {
      this.state.croppingElementId && (this.store.shouldCaptureIncrement(), this.setState({ croppingElementId: null }));
    }), j(this, "handleCanvasDoubleClick", (o) => {
      if (this.state.multiElement || this.state.activeTool.type !== "selection") return;
      let u = this.scene.getSelectedElements(this.state), { x: f, y: p } = et(o, this.state);
      if (u.length === 1 && pe(u[0])) {
        if (o[L.CTRL_OR_CMD] && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== u[0].id) && !ee(u[0])) {
          this.store.shouldCaptureIncrement(), this.setState({ editingLinearElement: new J(u[0]) });
          return;
        } else if (this.state.selectedLinearElement && ee(u[0])) {
          let U = J.getSegmentMidpointHitCoords(this.state.selectedLinearElement, { x: f, y: p }, this.state, this.scene.getNonDeletedElementsMap()), m = U ? J.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, U, this.scene.getNonDeletedElementsMap()) : -1;
          if (m && m > -1) {
            this.store.shouldCaptureIncrement(), J.deleteFixedSegment(u[0], m);
            let g = J.getSegmentMidpointHitCoords({ ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: null }, { x: f, y: p }, this.state, this.scene.getNonDeletedElementsMap()), b = g ? J.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, g, this.scene.getNonDeletedElementsMap()) : null;
            this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, pointerDownState: { ...this.state.selectedLinearElement.pointerDownState, segmentMidpoint: { index: b, value: U, added: !1 } }, segmentMidPointHoveredCoords: g } });
            return;
          }
        }
      }
      if (u.length === 1 && Re(u[0])) {
        this.startImageCropping(u[0]);
        return;
      }
      if (ra(this.interactiveCanvas), Yr(this.state).length > 0) {
        let U = this.getElementAtPosition(f, p), m = U && GL(U, this.state.selectedGroupIds);
        if (m) {
          this.store.shouldCaptureIncrement(), this.setState((g) => ({ ...g, ...dn({ editingGroupId: m, selectedElementIds: { [U.id]: !0 } }, this.scene.getNonDeletedElements(), g, this) }));
          return;
        }
      }
      if (ra(this.interactiveCanvas), !o[L.CTRL_OR_CMD] && !this.state.viewModeEnabled) {
        let U = this.getElementAtPosition(f, p);
        if (Hn(U)) {
          this.setState({ activeEmbeddable: { element: U, state: "active" } });
          return;
        }
        let m = this.getTextBindableContainerAtPosition(f, p);
        if (m && (Jn(m) || !ua(m.backgroundColor) || Rl({ x: f, y: p, element: m, shape: Ui(m, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() }))) {
          let g = cf(m, this.state, this.scene.getNonDeletedElementsMap());
          f = g.x, p = g.y;
        }
        this.startTextEditing({ sceneX: f, sceneY: p, insertAtParentCenter: !o.altKey, container: m });
      }
    }), j(this, "getElementLinkAtPosition", (o, u) => {
      let f = this.scene.getNonDeletedElements(), p = -1;
      for (let U = f.length - 1; U >= 0; U--) {
        let m = f[U];
        if (u && m.id === u.id && (p = U), m.link && U >= p && df(m, this.scene.getNonDeletedElementsMap(), this.state, k(o.x, o.y), this.device.editor.isMobile)) return m;
      }
    }), j(this, "redirectToLink", (o, u) => {
      let f = Pe(k(this.lastPointerDownEvent.clientX, this.lastPointerDownEvent.clientY), k(this.lastPointerUpEvent.clientX, this.lastPointerUpEvent.clientY));
      if (!this.hitLinkElement || f > Dr) return;
      let p = et(this.lastPointerDownEvent, this.state), U = this.scene.getNonDeletedElementsMap(), m = df(this.hitLinkElement, U, this.state, k(p.x, p.y), this.device.editor.isMobile), g = et(this.lastPointerUpEvent, this.state), b = df(this.hitLinkElement, U, this.state, k(g.x, g.y), this.device.editor.isMobile);
      if (m && b) {
        B6();
        let v = this.hitLinkElement.link;
        if (v) {
          v = Dn(v);
          let x;
          if (this.props.onLinkOpen && (x = e8("excalidraw-link", o.nativeEvent), this.props.onLinkOpen({ ...this.hitLinkElement, link: v }, x)), !(x != null && x.defaultPrevented)) {
            let y = E7(v) ? "_self" : "_blank", E = window.open(void 0, y);
            E && (E.opener = null, E.location = v);
          }
        }
      }
    }), j(this, "getTopLayerFrameAtSceneCoords", (o) => {
      let u = this.scene.getNonDeletedElementsMap(), f = this.scene.getNonDeletedFramesLikes().filter((p) => pg(o, p, u));
      return f.length ? f[f.length - 1] : null;
    }), j(this, "handleCanvasPointerMove", (o) => {
      var x, y, E, S, w, M;
      this.savePointer(o.clientX, o.clientY, this.state.cursorButton), this.lastPointerMoveEvent = o.nativeEvent, De.pointers.has(o.pointerId) && De.pointers.set(o.pointerId, { x: o.clientX, y: o.clientY });
      let u = De.initialScale;
      if (De.pointers.size === 2 && De.lastCenter && u && De.initialDistance) {
        let I = q6(De.pointers), T = I.x - De.lastCenter.x, _ = I.y - De.lastCenter.y;
        De.lastCenter = I;
        let A = J6(Array.from(De.pointers.values())), D = this.state.activeTool.type === "freedraw" && this.state.penMode ? 1 : A / De.initialDistance, P = D ? xi(u * D) : this.state.zoom.value;
        this.setState((N) => {
          let $ = Xr({ viewportX: I.x, viewportY: I.y, nextZoom: P }, N);
          this.translateCanvas({ zoom: $.zoom, scrollX: $.scrollX + 2 * (T / P), scrollY: $.scrollY + 2 * (_ / P), shouldCacheIgnoreZoom: !0 });
        }), this.resetShouldCacheIgnoreZoomDebounced();
      } else De.lastCenter = De.initialDistance = De.initialScale = null;
      if (Ir || Ks || Gf || ns(this.state)) return;
      let f = n5(Yf, o.clientX - this.state.offsetLeft, o.clientY - this.state.offsetTop).isOverEither;
      !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged && !this.state.multiElement && (f ? ra(this.interactiveCanvas) : La(this.interactiveCanvas, this.state));
      let p = et(o, this.state), { x: U, y: m } = p;
      if (!this.state.newElement && sR(this.state.activeTool.type)) {
        let { originOffset: I, snapLines: T } = lR(this.scene.getNonDeletedElements(), this, { x: U, y: m }, o, this.scene.getNonDeletedElementsMap());
        this.setState((_) => {
          let A = zs(_.snapLines, T), D = _.originSnapOffset ? zs(_.originSnapOffset, I) : I;
          return _.snapLines === A && _.originSnapOffset === D ? null : { snapLines: A, originSnapOffset: D };
        });
      } else !this.state.newElement && !this.state.selectedElementsAreBeingDragged && !this.state.selectionElement && this.setState((I) => I.snapLines.length ? { snapLines: [] } : null);
      if (this.state.editingLinearElement && !this.state.editingLinearElement.isDragging) {
        let I = J.handlePointerMove(o, U, m, this, this.scene.getNonDeletedElementsMap());
        I && I !== this.state.editingLinearElement && Pa(() => {
          this.setState({ editingLinearElement: I });
        }), (I == null ? void 0 : I.lastUncommittedPoint) != null ? this.maybeSuggestBindingAtCursor(p, I.elbowed) : Pa(() => {
          this.setState({ suggestedBindings: [] });
        });
      }
      if (i8(this.state.activeTool.type)) {
        let { newElement: I } = this.state;
        Ha(I, !1) ? this.maybeSuggestBindingsForLinearElementAtCoords(I, [p], this.state.startBoundElement) : this.maybeSuggestBindingAtCursor(p, !1);
      }
      if (this.state.multiElement) {
        let { multiElement: I } = this.state, { x: T, y: _ } = I, { points: A, lastCommittedPoint: D } = I, P = A[A.length - 1];
        if (La(this.interactiveCanvas, this.state), P === D) Pe(k(U - T, m - _), P) >= Ud ? W(I, { points: [...A, k(U - T, m - _)] }, !1) : Ge(this.interactiveCanvas, We.POINTER);
        else if (A.length > 2 && D && Pe(k(U - T, m - _), D) < Ud) Ge(this.interactiveCanvas, We.POINTER), W(I, { points: A.slice(0, -1) }, !1);
        else {
          let [N, $] = _t(U, m, o[L.CTRL_OR_CMD] || ee(I) ? null : this.getEffectiveGridSize()), [R, V] = (I == null ? void 0 : I.lastCommittedPoint) ?? [0, 0], O = N - T - R, G = $ - _ - V;
          vo(o) && ({ width: O, height: G } = P1(R + T, V + _, N, $)), Mi(A, this.state.zoom.value) && Ge(this.interactiveCanvas, We.POINTER), W(I, { points: [...A.slice(0, -1), k(R + O, V + G)] }, !1, { isDragging: !0 }), this.triggerRender(!1);
        }
        return;
      }
      if (o.buttons || this.state.activeTool.type !== "selection" && this.state.activeTool.type !== "text" && this.state.activeTool.type !== "eraser") return;
      let g = this.scene.getNonDeletedElements(), b = this.scene.getSelectedElements(this.state);
      if (b.length === 1 && !f && !this.state.editingLinearElement) {
        if (this.state.selectedLinearElement && this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, U, m), (!this.state.selectedLinearElement || this.state.selectedLinearElement.hoverPointIndex === -1) && ((x = this.state.openDialog) == null ? void 0 : x.name) !== "elementLinkSelector" && !(b.length === 1 && ee(b[0]))) {
          let I = yg(g, this.state, U, m, this.state.zoom, o.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
          if (I && I.transformHandleType) {
            Ge(this.interactiveCanvas, Eg(I));
            return;
          }
        }
      } else if (b.length > 1 && !f && ((y = this.state.openDialog) == null ? void 0 : y.name) !== "elementLinkSelector") {
        let I = wg(ze(b), U, m, this.state.zoom, o.pointerType, this.device);
        if (I) {
          Ge(this.interactiveCanvas, Eg({ transformHandleType: I }));
          return;
        }
      }
      let v = this.getElementAtPosition(p.x, p.y);
      this.hitLinkElement = this.getElementLinkAtPosition(p, v), !Na(this.state) && (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? (Ge(this.interactiveCanvas, We.POINTER), SX(this.hitLinkElement, this.state, this.scene.getNonDeletedElementsMap())) : (B6(), v && (v.link || vn(v)) && this.state.selectedElementIds[v.id] && !this.state.contextMenu && !this.state.showHyperlinkPopup ? this.setState({ showHyperlinkPopup: "info" }) : this.state.activeTool.type === "text" ? Ge(this.interactiveCanvas, q(v) ? We.TEXT : We.CROSSHAIR) : this.state.viewModeEnabled ? Ge(this.interactiveCanvas, We.GRAB) : ((E = this.state.openDialog) == null ? void 0 : E.name) === "elementLinkSelector" ? Ge(this.interactiveCanvas, We.AUTO) : f ? Ge(this.interactiveCanvas, We.AUTO) : this.state.selectedLinearElement ? this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, U, m) : o[L.CTRL_OR_CMD] ? Ge(this.interactiveCanvas, We.AUTO) : (v || this.isHittingCommonBoundingBoxOfSelectedElements(p, b)) && !(v != null && v.locked) && (v && Hn(v) && this.isIframeLikeElementCenter(v, o, U, m) ? (Ge(this.interactiveCanvas, We.POINTER), this.setState({ activeEmbeddable: { element: v, state: "hover" } })) : (!v || !ee(v)) && (Ge(this.interactiveCanvas, We.MOVE), ((S = this.state.activeEmbeddable) == null ? void 0 : S.state) === "hover" && this.setState({ activeEmbeddable: null })))), ((w = this.state.openDialog) == null ? void 0 : w.name) === "elementLinkSelector" && v ? this.setState((I) => ({ hoveredElementIds: zs(I.hoveredElementIds, dn({ editingGroupId: I.editingGroupId, selectedElementIds: { [v.id]: !0 } }, this.scene.getNonDeletedElements(), I, this).selectedElementIds) })) : ((M = this.state.openDialog) == null ? void 0 : M.name) === "elementLinkSelector" && !v && this.setState((I) => ({ hoveredElementIds: zs(I.hoveredElementIds, {}) })));
    }), j(this, "handleEraser", (o, u, f) => {
      this.eraserTrail.addPointToPath(f.x, f.y);
      let p = !1, U = /* @__PURE__ */ new Set(), m = this.scene.getNonDeletedElements(), g = (E) => {
        var S;
        for (let w of E) {
          if (w.locked) return;
          if (o.altKey ? this.elementsPendingErasure.delete(w.id) && (p = !0) : this.elementsPendingErasure.has(w.id) || (p = !0, this.elementsPendingErasure.add(w.id)), p && ((S = w.groupIds) == null ? void 0 : S.length)) {
            let M = w.groupIds.at(-1);
            if (!U.has(M)) {
              U.add(M);
              let I = it(m, M);
              for (let T of I) o.altKey ? this.elementsPendingErasure.delete(T.id) : this.elementsPendingErasure.add(T.id);
            }
          }
        }
      }, b = Pe(k(u.lastCoords.x, u.lastCoords.y), k(f.x, f.y)), v = this.getElementHitThreshold(), x = { ...u.lastCoords }, y = 0;
      for (; y <= b; ) {
        let E = this.getElementsAtPosition(x.x, x.y);
        if (g(E), y === b) break;
        y = Math.min(y + v, b);
        let S = y / b, w = (1 - S) * x.x + S * f.x, M = (1 - S) * x.y + S * f.y;
        x.x = w, x.y = M;
      }
      if (u.lastCoords.x = f.x, u.lastCoords.y = f.y, p) {
        for (let E of this.scene.getNonDeletedElements()) rt(E) && (this.elementsPendingErasure.has(E.id) || this.elementsPendingErasure.has(E.containerId)) && (o.altKey ? (this.elementsPendingErasure.delete(E.id), this.elementsPendingErasure.delete(E.containerId)) : (this.elementsPendingErasure.add(E.id), this.elementsPendingErasure.add(E.containerId)));
        this.elementsPendingErasure = new Set(this.elementsPendingErasure), this.triggerRender();
      }
    }), j(this, "handleTouchMove", (o) => {
      qs = !0;
    }), j(this, "handleCanvasPointerDown", (o) => {
      var v, x, y;
      let u = o.target;
      if (u.setPointerCapture && u.setPointerCapture(o.pointerId), this.maybeCleanupAfterMissingPointerUp(o.nativeEvent), this.maybeUnfollowRemoteUser(), this.state.searchMatches && (this.setState((E) => ({ searchMatches: E.searchMatches.map((S) => ({ ...S, focus: !1 })) })), fa.set(zv, null)), this.state.contextMenu && this.setState({ contextMenu: null }), this.state.snapLines && this.setAppState({ snapLines: [] }), this.updateGestureOnPointerDown(o), o.pointerType === "touch" && this.state.newElement && this.state.newElement.type === "freedraw") {
        let E = this.state.newElement;
        this.updateScene({ ...E.points.length < 10 ? { elements: this.scene.getElementsIncludingDeleted().filter((S) => S.id !== E.id) } : {}, appState: { newElement: null, editingTextElement: null, startBoundElement: null, suggestedBindings: [], selectedElementIds: Le(Object.keys(this.state.selectedElementIds).filter((S) => S !== E.id).reduce((S, w) => (S[w] = this.state.selectedElementIds[w], S), {}), this.state) }, captureUpdate: ((v = this.state.openDialog) == null ? void 0 : v.name) === "elementLinkSelector" ? H.EVENTUALLY : H.NEVER });
        return;
      }
      let f = document.getSelection();
      if (f != null && f.anchorNode && f.removeAllRanges(), this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(o), !this.state.penDetected && o.pointerType === "pen" && this.setState((E) => ({ penMode: !0, penDetected: !0 })), !this.device.isTouchScreen && ["pen", "touch"].includes(o.pointerType) && (this.device = md(this.device, { isTouchScreen: !0 })), Ks || (this.lastPointerDownEvent = o, this.handleCanvasPanUsingWheelOrSpaceDrag(o))) return;
      if (this.setState({ lastPointerDownWith: o.pointerType, cursorButton: "down" }), this.savePointer(o.clientX, o.clientY, "down"), o.button === Gi.ERASER && this.state.activeTool.type !== Pt.eraser) {
        this.setState({ activeTool: Ct(this.state, { type: Pt.eraser, lastActiveToolBeforeEraser: this.state.activeTool }) }, () => {
          this.handleCanvasPointerDown(o);
          let E = () => {
            S(), w == null || w(), Na(this.state) && this.setState({ activeTool: Ct(this.state, { ...this.state.activeTool.lastActiveTool || { type: Pt.selection }, lastActiveToolBeforeEraser: null }) });
          }, S = ct(window, "pointerup", E, { once: !0 }), w;
          requestAnimationFrame(() => {
            w = this.missingPointerEventCleanupEmitter.once(E);
          });
        });
        return;
      }
      if (o.button !== Gi.MAIN && o.button !== Gi.TOUCH && o.button !== Gi.ERASER || De.pointers.size > 1) return;
      let p = this.initialPointerDownState(o);
      if (this.setState({ selectedElementsAreBeingDragged: !1 }), this.handleDraggingScrollBar(o, p) || (this.clearSelectionIfNotUsingSelection(), this.updateBindingEnabledOnPointerMove(o), this.handleSelectionOnPointerDown(o, p)) || !(!this.state.penMode || o.pointerType !== "touch" || this.state.activeTool.type === "selection" || this.state.activeTool.type === "text" || this.state.activeTool.type === "image")) return;
      if (this.state.activeTool.type === "text") this.handleTextOnPointerDown(o, p);
      else if (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") this.handleLinearElementOnPointerDown(o, this.state.activeTool.type, p);
      else if (this.state.activeTool.type === "image") {
        Ge(this.interactiveCanvas, We.CROSSHAIR);
        let E = this.state.pendingImageElementId && this.scene.getElement(this.state.pendingImageElementId);
        if (!E) return;
        this.setState({ newElement: E, pendingImageElementId: null, multiElement: null });
        let { x: S, y: w } = et(o, this.state), M = this.getTopLayerFrameAtSceneCoords({ x: S, y: w });
        W(E, { x: S, y: w, frameId: M ? M.id : null });
      } else this.state.activeTool.type === "freedraw" ? this.handleFreeDrawElementOnPointerDown(o, this.state.activeTool.type, p) : this.state.activeTool.type === "custom" ? La(this.interactiveCanvas, this.state) : this.state.activeTool.type === Pt.frame || this.state.activeTool.type === Pt.magicframe ? this.createFrameElementOnPointerDown(p, this.state.activeTool.type) : this.state.activeTool.type === "laser" ? this.laserTrails.startPath(p.lastCoords.x, p.lastCoords.y) : this.state.activeTool.type !== "eraser" && this.state.activeTool.type !== "hand" && this.createGenericElementOnPointerDown(this.state.activeTool.type, p);
      (y = (x = this.props) == null ? void 0 : x.onPointerDown) == null || y.call(x, this.state.activeTool, p), this.onPointerDownEmitter.trigger(this.state.activeTool, p, o), this.state.activeTool.type === "eraser" && this.eraserTrail.startPath(p.lastCoords.x, p.lastCoords.y);
      let U = this.onPointerMoveFromPointerDownHandler(p), m = this.onPointerUpFromPointerDownHandler(p), g = this.onKeyDownFromPointerDownHandler(p), b = this.onKeyUpFromPointerDownHandler(p);
      this.missingPointerEventCleanupEmitter.once((E) => m(E || o.nativeEvent)), (!this.state.viewModeEnabled || this.state.activeTool.type === "laser") && (window.addEventListener("pointermove", U), window.addEventListener("pointerup", m), window.addEventListener("keydown", g), window.addEventListener("keyup", b), p.eventListeners.onMove = U, p.eventListeners.onUp = m, p.eventListeners.onKeyUp = b, p.eventListeners.onKeyDown = g);
    }), j(this, "handleCanvasPointerUp", (o) => {
      var p;
      this.removePointer(o), this.lastPointerUpEvent = o;
      let u = et({ clientX: o.clientX, clientY: o.clientY }, this.state), f = o.timeStamp - (((p = this.lastPointerDownEvent) == null ? void 0 : p.timeStamp) ?? 0);
      if (this.device.editor.isMobile && f < 300) {
        let U = this.getElementAtPosition(u.x, u.y);
        if (Hn(U) && this.isIframeLikeElementCenter(U, o, u.x, u.y)) {
          this.handleEmbeddableCenterClick(U);
          return;
        }
      }
      if (this.device.isTouchScreen) {
        let U = this.getElementAtPosition(u.x, u.y);
        this.hitLinkElement = this.getElementLinkAtPosition(u, U);
      }
      this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? f < 300 && Hn(this.hitLinkElement) && !W7(this.hitLinkElement, this.scene.getNonDeletedElementsMap(), this.state, k(u.x, u.y)) ? this.handleEmbeddableCenterClick(this.hitLinkElement) : this.redirectToLink(o, this.device.isTouchScreen) : this.state.viewModeEnabled && this.setState({ activeEmbeddable: null, selectedElementIds: {} });
    }), j(this, "maybeOpenContextMenuAfterPointerDownOnTouchDevices", (o) => {
      o.pointerType === "touch" && (qs = !1, Wi ? qs = !0 : Wi = window.setTimeout(() => {
        Wi = 0, qs || this.handleCanvasContextMenu(o);
      }, zk));
    }), j(this, "resetContextMenuTimer", () => {
      clearTimeout(Wi), Wi = 0, qs = !1;
    }), j(this, "maybeCleanupAfterMissingPointerUp", (o) => {
      Tr == null || Tr(), this.missingPointerEventCleanupEmitter.trigger(o).clear();
    }), j(this, "handleCanvasPanUsingWheelOrSpaceDrag", (o) => {
      if (!(De.pointers.size <= 1 && (o.button === Gi.WHEEL || o.button === Gi.MAIN && Ir || ns(this.state) || this.state.viewModeEnabled))) return !1;
      Ks = !0, this.focusContainer(), this.state.editingTextElement || o.preventDefault();
      let u = !1, f = typeof window === void 0 ? !1 : /Linux/.test(window.navigator.platform);
      Ge(this.interactiveCanvas, We.GRABBING);
      let { clientX: p, clientY: U } = o, m = Bf((b) => {
        let v = p - b.clientX, x = U - b.clientY;
        if (p = b.clientX, U = b.clientY, f && !u && (Math.abs(v) > 1 || Math.abs(x) > 1)) {
          u = !0;
          let y = (S) => {
            document.body.removeEventListener("paste", y), S.stopPropagation();
          }, E = () => {
            setTimeout(() => {
              document.body.removeEventListener("paste", y), window.removeEventListener("pointerup", E);
            }, 100);
          };
          document.body.addEventListener("paste", y), window.addEventListener("pointerup", E);
        }
        this.translateCanvas({ scrollX: this.state.scrollX - v / this.state.zoom.value, scrollY: this.state.scrollY - x / this.state.zoom.value });
      }), g = Ut(Tr = () => {
        Tr = null, Ks = !1, Ir || (this.state.viewModeEnabled ? Ge(this.interactiveCanvas, We.GRAB) : La(this.interactiveCanvas, this.state)), this.setState({ cursorButton: "up" }), this.savePointer(o.clientX, o.clientY, "up"), window.removeEventListener("pointermove", m), window.removeEventListener("pointerup", g), window.removeEventListener("blur", g), m.flush();
      });
      return window.addEventListener("blur", g), window.addEventListener("pointermove", m, { passive: !0 }), window.addEventListener("pointerup", g), !0;
    }), j(this, "clearSelectionIfNotUsingSelection", () => {
      this.state.activeTool.type !== "selection" && this.setState({ selectedElementIds: Le({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null });
    }), j(this, "handleSelectionOnPointerDown", (o, u) => {
      var f;
      if (this.state.activeTool.type === "selection") {
        let p = this.scene.getNonDeletedElements(), U = this.scene.getNonDeletedElementsMap(), m = this.scene.getSelectedElements(this.state);
        if (m.length === 1 && !this.state.editingLinearElement && !ee(m[0]) && !(this.state.selectedLinearElement && this.state.selectedLinearElement.hoverPointIndex !== -1)) {
          let g = yg(p, this.state, u.origin.x, u.origin.y, this.state.zoom, o.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
          g != null && (g.transformHandleType === "rotation" ? (this.setState({ resizingElement: g.element }), u.resize.handleType = g.transformHandleType) : (this.state.croppingElementId || this.setState({ resizingElement: g.element }), u.resize.handleType = g.transformHandleType));
        } else m.length > 1 && (u.resize.handleType = wg(ze(m), u.origin.x, u.origin.y, this.state.zoom, o.pointerType, this.device));
        if (u.resize.handleType) u.resize.isResizing = !0, u.resize.offset = da(sN(u.resize.handleType, m, U, u.origin.x, u.origin.y)), m.length === 1 && pe(m[0]) && m[0].points.length === 2 && (u.resize.arrowDirection = oN(u.resize.handleType, m[0]));
        else {
          if (this.state.selectedLinearElement) {
            let v = this.state.editingLinearElement || this.state.selectedLinearElement, x = J.handlePointerDown(o, this, this.store, u.origin, v, this.scene);
            if (x.hitElement && (u.hit.element = x.hitElement), x.linearElementEditor && (this.setState({ selectedLinearElement: x.linearElementEditor }), this.state.editingLinearElement && this.setState({ editingLinearElement: x.linearElementEditor })), x.didAddPoint) return !0;
          }
          if (u.hit.element = u.hit.element ?? this.getElementAtPosition(u.origin.x, u.origin.y), this.hitLinkElement = this.getElementLinkAtPosition(u.origin, u.hit.element), this.hitLinkElement) return !0;
          if (this.state.croppingElementId && ((f = u.hit.element) == null ? void 0 : f.id) !== this.state.croppingElementId && this.finishImageCropping(), u.hit.element && this.getElementLinkAtPosition({ x: u.origin.x, y: u.origin.y }, u.hit.element)) return !1;
          u.hit.allHitElements = this.getElementsAtPosition(u.origin.x, u.origin.y);
          let g = u.hit.element, b = u.hit.allHitElements.some((v) => this.isASelectedElement(v));
          if ((g === null || !b) && !o.shiftKey && !u.hit.hasHitCommonBoundingBoxOfSelectedElements && this.clearSelection(g), this.state.editingLinearElement) this.setState({ selectedElementIds: Le({ [this.state.editingLinearElement.elementId]: !0 }, this.state) });
          else if (g != null) {
            if (o[L.CTRL_OR_CMD]) return this.state.selectedElementIds[g.id] || (u.hit.wasAddedToSelection = !0), this.setState((v) => ({ ...VL(v, g), previousSelectedElementIds: this.state.selectedElementIds })), !1;
            this.state.selectedElementIds[g.id] || (this.state.editingGroupId && !Yo(g, this.state.editingGroupId) && this.setState({ selectedElementIds: Le({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null }), !b && !u.hit.hasHitCommonBoundingBoxOfSelectedElements && (this.setState((v) => {
              var E;
              let x = { ...v.selectedElementIds, [g.id]: !0 }, y = [];
              if (Object.keys(v.selectedElementIds).forEach((S) => {
                let w = this.scene.getElement(S);
                w && y.push(w);
              }), de(g)) ti(y, g.id).forEach((S) => {
                delete x[S.id];
              });
              else if (g.frameId) x[g.frameId] && delete x[g.id];
              else {
                let S = g.groupIds, w = new Set(S.flatMap((M) => it(this.scene.getNonDeletedElements(), M)).filter((M) => de(M)).map((M) => M.id));
                w.size > 0 && y.forEach((M) => {
                  M.frameId && w.has(M.frameId) && (delete x[M.id], M.groupIds.flatMap((I) => it(this.scene.getNonDeletedElements(), I)).forEach((I) => {
                    delete x[I.id];
                  }));
                });
              }
              return ((E = v.openDialog) == null ? void 0 : E.name) === "elementLinkSelector" && (g.groupIds.some((S) => v.selectedGroupIds[S]) || (x = { [g.id]: !0 })), { ...dn({ editingGroupId: v.editingGroupId, selectedElementIds: x }, this.scene.getNonDeletedElements(), v, this), showHyperlinkPopup: g.link || vn(g) ? "info" : !1 };
            }), u.hit.wasAddedToSelection = !0));
          }
          this.setState({ previousSelectedElementIds: this.state.selectedElementIds });
        }
      }
      return !1;
    }), j(this, "handleTextOnPointerDown", (o, u) => {
      if (this.state.editingTextElement) return;
      let f = u.origin.x, p = u.origin.y, U = this.getElementAtPosition(f, p, { includeBoundTextElement: !0 }), m = this.getTextBindableContainerAtPosition(f, p);
      Jn(U) && (m = U, f = U.x + U.width / 2, p = U.y + U.height / 2), this.startTextEditing({ sceneX: f, sceneY: p, insertAtParentCenter: !o.altKey, container: m, autoEdit: !1 }), ra(this.interactiveCanvas), this.state.activeTool.locked || this.setState({ activeTool: Ct(this.state, { type: "selection" }) });
    }), j(this, "handleFreeDrawElementOnPointerDown", (o, u, f) => {
      let [p, U] = _t(f.origin.x, f.origin.y, null), m = this.getTopLayerFrameAtSceneCoords({ x: p, y: U }), g = o.pressure === 0.5, b = kR({ type: u, x: p, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: null, simulatePressure: g, locked: !1, frameId: m ? m.id : null, points: [k(0, 0)], pressures: g ? [] : [o.pressure] });
      this.scene.insertElement(b), this.setState((x) => {
        let y = { ...x.selectedElementIds };
        return delete y[b.id], { selectedElementIds: Le(y, x) };
      });
      let v = ha(f.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom);
      this.setState({ newElement: b, startBoundElement: v, suggestedBindings: [] });
    }), j(this, "insertIframeElement", ({ sceneX: o, sceneY: u, width: f, height: p }) => {
      var b;
      let [U, m] = _t(o, u, (b = this.lastPointerDownEvent) != null && b[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), g = wR({ type: "iframe", x: U, y: m, strokeColor: "transparent", backgroundColor: "transparent", fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: this.getCurrentItemRoundness("iframe"), opacity: this.state.currentItemOpacity, locked: !1, width: f, height: p });
      return this.scene.insertElement(g), g;
    }), j(this, "insertEmbeddableElement", ({ sceneX: o, sceneY: u, link: f }) => {
      var b;
      let [p, U] = _t(o, u, (b = this.lastPointerDownEvent) != null && b[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = Hl(f);
      if (!m) return;
      m.error instanceof URIError && this.setToast({ message: C("toast.unrecognizedLinkFormat"), closable: !0 });
      let g = zm({ type: "embeddable", x: p, y: U, strokeColor: "transparent", backgroundColor: "transparent", fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: this.getCurrentItemRoundness("embeddable"), opacity: this.state.currentItemOpacity, locked: !1, width: m.intrinsicSize.w, height: m.intrinsicSize.h, link: f });
      return this.scene.insertElement(g), g;
    }), j(this, "createImageElement", ({ sceneX: o, sceneY: u, addToFrameUnderCursor: f = !0 }) => {
      var g;
      let [p, U] = _t(o, u, (g = this.lastPointerDownEvent) != null && g[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = f ? this.getTopLayerFrameAtSceneCoords({ x: p, y: U }) : null;
      return _7({ type: "image", x: p, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: null, opacity: this.state.currentItemOpacity, locked: !1, frameId: m ? m.id : null });
    }), j(this, "handleLinearElementOnPointerDown", (o, u, f) => {
      if (this.state.multiElement) {
        let { multiElement: p } = this.state;
        if (p.type === "line" && Mi(p.points, this.state.zoom.value)) {
          W(p, { lastCommittedPoint: p.points[p.points.length - 1] }), this.actionManager.executeAction(aa);
          return;
        }
        if (ee(p) && p.points.length > 1) {
          W(p, { lastCommittedPoint: p.points[p.points.length - 1] }), this.actionManager.executeAction(aa);
          return;
        }
        let { x: U, y: m, lastCommittedPoint: g } = p;
        if (p.points.length > 1 && g && Pe(k(f.origin.x - U, f.origin.y - m), g) < Ud) {
          this.actionManager.executeAction(aa);
          return;
        }
        this.setState((b) => ({ selectedElementIds: Le({ ...b.selectedElementIds, [p.id]: !0 }, b) })), W(p, { lastCommittedPoint: p.points[p.points.length - 1] }), Ge(this.interactiveCanvas, We.POINTER);
      } else {
        let [p, U] = _t(f.origin.x, f.origin.y, o[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = this.getTopLayerFrameAtSceneCoords({ x: p, y: U }), { currentItemStartArrowhead: g, currentItemEndArrowhead: b } = this.state, [v, x] = u === "arrow" ? [g, b] : [null, null], y = u === "arrow" ? op({ type: u, x: p, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.state.currentItemArrowType === Ht.round ? { type: jt.PROPORTIONAL_RADIUS } : null, startArrowhead: v, endArrowhead: x, locked: !1, frameId: m ? m.id : null, elbowed: this.state.currentItemArrowType === Ht.elbow, fixedSegments: this.state.currentItemArrowType === Ht.elbow ? [] : null }) : Zr({ type: u, x: p, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.state.currentItemRoundness === "round" ? { type: jt.PROPORTIONAL_RADIUS } : null, locked: !1, frameId: m ? m.id : null });
        this.setState((S) => {
          let w = { ...S.selectedElementIds };
          return delete w[y.id], { selectedElementIds: Le(w, S) };
        }), W(y, { points: [...y.points, k(0, 0)] });
        let E = ha(f.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, ee(y), ee(y));
        this.scene.insertElement(y), this.setState({ newElement: y, startBoundElement: E, suggestedBindings: [] });
      }
    }), j(this, "createGenericElementOnPointerDown", (o, u) => {
      var b;
      let [f, p] = _t(u.origin.x, u.origin.y, (b = this.lastPointerDownEvent) != null && b[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), U = this.getTopLayerFrameAtSceneCoords({ x: f, y: p }), m = { x: f, y: p, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.getCurrentItemRoundness(o), locked: !1, frameId: U ? U.id : null }, g;
      o === "embeddable" ? g = zm({ type: "embeddable", ...m }) : g = Qa({ type: o, ...m }), g.type === "selection" ? this.setState({ selectionElement: g }) : (this.scene.insertElement(g), this.setState({ multiElement: null, newElement: g }));
    }), j(this, "createFrameElementOnPointerDown", (o, u) => {
      var g;
      let [f, p] = _t(o.origin.x, o.origin.y, (g = this.lastPointerDownEvent) != null && g[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), U = { x: f, y: p, opacity: this.state.currentItemOpacity, locked: !1, ...ht }, m = u === Pt.magicframe ? T1(U) : sp(U);
      this.scene.insertElement(m), this.setState({ multiElement: null, newElement: m });
    }), j(this, "restoreReadyToEraseElements", () => {
      this.elementsPendingErasure = /* @__PURE__ */ new Set(), this.triggerRender();
    }), j(this, "eraseElements", () => {
      let o = !1, u = this.scene.getElementsIncludingDeleted().map((f) => this.elementsPendingErasure.has(f.id) || f.frameId && this.elementsPendingErasure.has(f.frameId) || rt(f) && this.elementsPendingErasure.has(f.containerId) ? (o = !0, ge(f, { isDeleted: !0 })) : f);
      this.elementsPendingErasure = /* @__PURE__ */ new Set(), o && (this.store.shouldCaptureIncrement(), this.scene.replaceAllElements(u));
    }), j(this, "initializeImage", async ({ imageFile: o, imageElement: u, showCursorImagePreview: f = !1 }) => {
      var b, v, x, y, E;
      if (!Kr(o)) throw new Error(C("errors.unsupportedFileType"));
      let p = o.type;
      if (Ge(this.interactiveCanvas, "wait"), p === oe.svg) try {
        o = Cg(Jm(await o.text()), o.name);
      } catch (S) {
        throw console.warn(S), new Error(C("errors.svgImageInsertError"));
      }
      let U = await (((v = (b = this.props).generateIdForFile) == null ? void 0 : v.call(b, o)) || yN(o));
      if (!U) throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."), new Error(C("errors.imageInsertError"));
      if (!((x = this.files[U]) != null && x.dataURL)) {
        try {
          o = await $1(o, { maxWidthOrHeight: Yk });
        } catch (S) {
          console.error("Error trying to resizing image file on insertion", S);
        }
        if (o.size > H2) throw new Error(C("errors.fileTooBig", { maxSize: `${Math.trunc(H2 / 1024 / 1024)}MB` }));
      }
      if (f) {
        let S = (y = this.files[U]) == null ? void 0 : y.dataURL, w = S && EN(S);
        this.setImagePreviewCursor(w || o);
      }
      let m = ((E = this.files[U]) == null ? void 0 : E.dataURL) || await Mg(o), g = W(u, { fileId: U }, !1);
      return new Promise(async (S, w) => {
        var M;
        try {
          this.addMissingFiles([{ mimeType: p, id: U, dataURL: m, created: Date.now(), lastRetrieved: Date.now() }]);
          let I = this.imageCache.get(U);
          I || (this.addNewImagesToImageCache(), await this.updateImageCache([g])), (I == null ? void 0 : I.image) instanceof Promise && await I.image, this.state.pendingImageElementId !== g.id && ((M = this.state.newElement) == null ? void 0 : M.id) !== g.id && this.initializeImageDimensions(g, !0), S(g);
        } catch (I) {
          console.error(I), w(new Error(C("errors.imageInsertError")));
        } finally {
          f || ra(this.interactiveCanvas);
        }
      });
    }), j(this, "insertImageElement", async (o, u, f) => {
      if (!this.isToolSupported("image")) {
        this.setState({ errorMessage: C("errors.imageToolNotSupported") });
        return;
      }
      this.scene.insertElement(o);
      try {
        return await this.initializeImage({ imageFile: u, imageElement: o, showCursorImagePreview: f });
      } catch (p) {
        return W(o, { isDeleted: !0 }), this.actionManager.executeAction(aa), this.setState({ errorMessage: p.message || C("errors.imageInsertError") }), null;
      }
    }), j(this, "setImagePreviewCursor", async (o) => {
      let u;
      try {
        u = await $1(o, { maxWidthOrHeight: 96 });
      } catch (p) {
        throw p.cause === "UNSUPPORTED" ? new Error(C("errors.unsupportedFileType")) : p;
      }
      let f = await Mg(u);
      if (o.type === oe.svg) {
        let p = await F7(f), U = Math.min(p.height, 96), m = U * (p.width / p.height);
        m > 96 && (m = 96, U = m * (p.height / p.width));
        let g = document.createElement("canvas");
        g.height = U, g.width = m, g.getContext("2d").drawImage(p, 0, 0, m, U), f = g.toDataURL(oe.svg);
      }
      this.state.pendingImageElementId && Ge(this.interactiveCanvas, `url(${f}) 4 4, auto`);
    }), j(this, "onImageAction", async ({ insertOnCanvasDirectly: o }) => {
      try {
        let u = this.state.width / 2 + this.state.offsetLeft, f = this.state.height / 2 + this.state.offsetTop, { x: p, y: U } = et({ clientX: u, clientY: f }, this.state), m = await dp({ description: "Image", extensions: Object.keys(ts) }), g = this.createImageElement({ sceneX: p, sceneY: U, addToFrameUnderCursor: !1 });
        o ? (this.insertImageElement(g, m), this.initializeImageDimensions(g), this.setState({ selectedElementIds: Le({ [g.id]: !0 }, this.state) }, () => {
          this.actionManager.executeAction(aa);
        })) : this.setState({ pendingImageElementId: g.id }, () => {
          this.insertImageElement(g, m, !0);
        });
      } catch (u) {
        u.name !== "AbortError" ? console.error(u) : console.warn(u), this.setState({ pendingImageElementId: null, newElement: null, activeTool: Ct(this.state, { type: "selection" }) }, () => {
          this.actionManager.executeAction(aa);
        });
      }
    }), j(this, "initializeImageDimensions", (o, u = !1) => {
      var p;
      let f = Bn(o) && ((p = this.imageCache.get(o.fileId)) == null ? void 0 : p.image);
      if (!f || f instanceof Promise) {
        if (o.width < Dr / this.state.zoom.value && o.height < Dr / this.state.zoom.value) {
          let U = 100 / this.state.zoom.value;
          W(o, { x: o.x - U / 2, y: o.y - U / 2, width: U, height: U });
        }
        return;
      }
      if (u || o.width < Dr / this.state.zoom.value && o.height < Dr / this.state.zoom.value) {
        let U = Math.max(this.state.height - 120, 160), m = Math.min(U, Math.floor(this.state.height * 0.5) / this.state.zoom.value), g = Math.min(f.naturalHeight, m), b = g * (f.naturalWidth / f.naturalHeight), v = o.x + o.width / 2 - b / 2, x = o.y + o.height / 2 - g / 2;
        W(o, { x: v, y: x, width: b, height: g, crop: null });
      }
    }), j(this, "updateImageCache", async (o, u = this.files) => {
      let { updatedFiles: f, erroredFiles: p } = await z7({ imageCache: this.imageCache, fileIds: o.map((U) => U.fileId), files: u });
      if (f.size || p.size) for (let U of o) f.has(U.fileId) && pt.delete(U);
      return p.size && this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map((U) => Bn(U) && p.has(U.fileId) ? ge(U, { status: "error" }) : U)), { updatedFiles: f, erroredFiles: p };
    }), j(this, "addNewImagesToImageCache", async (o = B7(this.scene.getNonDeletedElements()), u = this.files) => {
      let f = o.filter((p) => !p.isDeleted && !this.imageCache.has(p.fileId));
      if (f.length) {
        let { updatedFiles: p } = await this.updateImageCache(f, u);
        p.size && this.scene.triggerUpdate();
      }
    }), j(this, "scheduleImageRefresh", cc(() => {
      this.addNewImagesToImageCache();
    }, $k)), j(this, "updateBindingEnabledOnPointerMove", (o) => {
      let u = yL(o);
      this.state.isBindingEnabled !== u && this.setState({ isBindingEnabled: u });
    }), j(this, "maybeSuggestBindingAtCursor", (o, u) => {
      let f = ha(o, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, !1, u);
      this.setState({ suggestedBindings: f != null ? [f] : [] });
    }), j(this, "maybeSuggestBindingsForLinearElementAtCoords", (o, u, f) => {
      if (!u.length) return;
      let p = u.reduce((U, m) => {
        let g = ha(m, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, ee(o), ee(o));
        return g != null && !o7(o, f == null ? void 0 : f.id, g) && U.push(g), U;
      }, []);
      this.setState({ suggestedBindings: p });
    }), j(this, "handleInteractiveCanvasRef", (o) => {
      var u, f;
      o !== null ? (this.interactiveCanvas = o, this.interactiveCanvas.addEventListener("touchstart", this.onTouchStart, { passive: !1 }), this.interactiveCanvas.addEventListener("touchend", this.onTouchEnd)) : ((u = this.interactiveCanvas) == null || u.removeEventListener("touchstart", this.onTouchStart), (f = this.interactiveCanvas) == null || f.removeEventListener("touchend", this.onTouchEnd));
    }), j(this, "handleAppOnDrop", async (o) => {
      var g, b, v, x;
      let { file: u, fileHandle: f } = await MN(o), { x: p, y: U } = et(o, this.state);
      try {
        if (Kr(u) && this.isToolSupported("image")) {
          if ((u == null ? void 0 : u.type) === oe.png || (u == null ? void 0 : u.type) === oe.svg) try {
            let E = await k3(u, this.state, this.scene.getElementsIncludingDeleted(), f);
            this.syncActionResult({ ...E, appState: { ...E.appState || this.state, isLoading: !1 }, replaceFiles: !0, captureUpdate: H.IMMEDIATELY });
            return;
          } catch (E) {
            if (E.name !== "EncodingError") throw new Error(C("alerts.couldNotLoadInvalidFile"));
          }
          let y = this.createImageElement({ sceneX: p, sceneY: U });
          this.insertImageElement(y, u), this.initializeImageDimensions(y), this.setState({ selectedElementIds: Le({ [y.id]: !0 }, this.state) });
          return;
        }
      } catch (y) {
        return this.setState({ isLoading: !1, errorMessage: y.message });
      }
      let m = o.dataTransfer.getData(oe.excalidrawlib);
      if (m && typeof m == "string") {
        try {
          let y = M3(m);
          this.addElementsFromPasteOrLibrary({ elements: X9(y), position: o, files: null });
        } catch (y) {
          this.setState({ errorMessage: y.message });
        }
        return;
      }
      if (u && await this.loadFileToCanvas(u, f), (b = (g = o.dataTransfer) == null ? void 0 : g.types) == null ? void 0 : b.includes("text/plain")) {
        let y = (v = o.dataTransfer) == null ? void 0 : v.getData("text");
        if (y && Sd(y, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(y) || ((x = Hl(y)) == null ? void 0 : x.type) === "video")) {
          let E = this.insertEmbeddableElement({ sceneX: p, sceneY: U, link: Dn(y) });
          E && this.setState({ selectedElementIds: { [E.id]: !0 } });
        }
      }
    }), j(this, "loadFileToCanvas", async (o, u) => {
      o = await Hp(o);
      try {
        let f = this.scene.getElementsIncludingDeleted(), p;
        try {
          p = await S3(o, this.state, f, u);
        } catch (U) {
          let m = U instanceof zr;
          if (m && U.code === "IMAGE_NOT_CONTAINS_SCENE_DATA" && !this.isToolSupported("image")) {
            this.setState({ isLoading: !1, errorMessage: C("errors.imageToolNotSupported") });
            return;
          }
          let g = C(m ? "alerts.cannotRestoreFromImage" : "alerts.couldNotLoadInvalidFile");
          this.setState({ isLoading: !1, errorMessage: g });
        }
        if (!p) return;
        p.type === oe.excalidraw ? (_i(f.concat(p.data.elements)), this.store.updateSnapshot(ue(f), this.state), this.setState({ isLoading: !0 }), this.syncActionResult({ ...p.data, appState: { ...p.data.appState || this.state, isLoading: !1 }, replaceFiles: !0, captureUpdate: H.IMMEDIATELY })) : p.type === oe.excalidrawlib && await this.library.updateLibrary({ libraryItems: o, merge: !0, openLibraryMenu: !0 }).catch((U) => {
          console.error(U), this.setState({ errorMessage: C("errors.importLibraryError") });
        });
      } catch (f) {
        this.setState({ isLoading: !1, errorMessage: f.message });
      }
    }), j(this, "handleCanvasContextMenu", (o) => {
      if (o.preventDefault(), ("pointerType" in o.nativeEvent && o.nativeEvent.pointerType === "touch" || "pointerType" in o.nativeEvent && o.nativeEvent.pointerType === "pen" && o.button !== Gi.SECONDARY) && this.state.activeTool.type !== "selection") return;
      let { x: u, y: f } = et(o, this.state), p = this.getElementAtPosition(u, f, { preferSelected: !0, includeLockedElements: !0 }), U = this.scene.getSelectedElements(this.state), m = this.isHittingCommonBoundingBoxOfSelectedElements({ x: u, y: f }, U), g = p || m ? "element" : "canvas", b = this.excalidrawContainerRef.current, { top: v, left: x } = b.getBoundingClientRect(), y = o.clientX - x, E = o.clientY - v;
      tt("contextMenu", "openContextMenu", g), this.setState({ ...p && !this.state.selectedElementIds[p.id] ? { ...this.state, ...dn({ editingGroupId: this.state.editingGroupId, selectedElementIds: { [p.id]: !0 } }, this.scene.getNonDeletedElements(), this.state, this), selectedLinearElement: pe(p) ? new J(p) : null } : this.state, showHyperlinkPopup: !1 }, () => {
        this.setState({ contextMenu: { top: E, left: y, items: this.getContextMenuItems(g) } });
      });
    }), j(this, "maybeDragNewGenericElement", (o, u, f = !0) => {
      var S, w, M;
      let p = this.state.selectionElement, U = o.lastCoords;
      if (p && this.state.activeTool.type !== "eraser") {
        kg({ newElement: p, elementType: this.state.activeTool.type, originX: o.origin.x, originY: o.origin.y, x: U.x, y: U.y, width: en(o.origin.x, U.x), height: en(o.origin.y, U.y), shouldMaintainAspectRatio: Bs(u), shouldResizeFromCenter: lf(u), zoom: this.state.zoom.value, informMutation: f });
        return;
      }
      let m = this.state.newElement;
      if (!m) return;
      let [g, b] = _t(U.x, U.y, u[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = Bn(m) && ((S = this.imageCache.get(m.fileId)) == null ? void 0 : S.image), x = v && !(v instanceof Promise) ? v.width / v.height : null;
      this.maybeCacheReferenceSnapPoints(u, [m]);
      let { snapOffset: y, snapLines: E } = rR(m, this, u, { x: o.originInGrid.x + (((w = this.state.originSnapOffset) == null ? void 0 : w.x) ?? 0), y: o.originInGrid.y + (((M = this.state.originSnapOffset) == null ? void 0 : M.y) ?? 0) }, { x: g - o.originInGrid.x, y: b - o.originInGrid.y }, this.scene.getNonDeletedElementsMap());
      g += y.x, b += y.y, this.setState({ snapLines: E }), kg({ newElement: m, elementType: this.state.activeTool.type, originX: o.originInGrid.x, originY: o.originInGrid.y, x: g, y: b, width: en(o.originInGrid.x, g), height: en(o.originInGrid.y, b), shouldMaintainAspectRatio: Re(m) ? !Bs(u) : Bs(u), shouldResizeFromCenter: lf(u), zoom: this.state.zoom.value, widthAspectRatio: x, originOffset: this.state.originSnapOffset, informMutation: f }), this.setState({ newElement: m }), (this.state.activeTool.type === Pt.frame || this.state.activeTool.type === Pt.magicframe) && this.setState({ elementsToHighlight: Md(this.scene.getNonDeletedElements(), m, this.state, this.scene.getNonDeletedElementsMap()) });
    }), j(this, "maybeHandleCrop", (o, u) => {
      var b;
      if (!this.state.croppingElementId) return !1;
      let f = o.resize.handleType, p = o.lastCoords, [U, m] = _t(p.x - o.resize.offset.x, p.y - o.resize.offset.y, u[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), g = this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);
      if (f && g && Re(g)) {
        let v = o.originalElements.get(g.id), x = Bn(g) && ((b = this.imageCache.get(g.fileId)) == null ? void 0 : b.image);
        if (v && Re(v) && x && !(x instanceof Promise)) {
          let [y, E] = _t(p.x, p.y, u[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), S = { x: y - o.originInGrid.x, y: E - o.originInGrid.y };
          this.maybeCacheReferenceSnapPoints(u, [g]);
          let { snapOffset: w, snapLines: M } = $m([g], [v], this, u, S, f);
          W(g, XD(g, f, x.naturalWidth, x.naturalHeight, U + w.x, m + w.y, u.shiftKey ? v.width / v.height : void 0)), Sn(g, this.scene.getNonDeletedElementsMap(), { newSize: { width: g.width, height: g.height } }), this.setState({ isCropping: f && f !== "rotation", snapLines: M });
        }
        return !0;
      }
      return !1;
    }), j(this, "maybeHandleResize", (o, u) => {
      let f = this.scene.getSelectedElements(this.state), p = f.filter((x) => de(x)), U = o.resize.handleType;
      if (p.length > 0 && U === "rotation" || f.length === 1 && ee(f[0]) || this.state.croppingElementId) return !1;
      this.setState({ isResizing: U && U !== "rotation", isRotating: U === "rotation", activeEmbeddable: null });
      let m = o.lastCoords, [g, b] = _t(m.x - o.resize.offset.x, m.y - o.resize.offset.y, u[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = /* @__PURE__ */ new Map();
      if (p.forEach((x) => {
        ti(this.scene.getNonDeletedElements(), x.id).forEach((y) => {
          v.set(x.id + y.id, { x: y.x - x.x, y: y.y - x.y });
        });
      }), !this.state.selectedElementsAreBeingDragged) {
        let [x, y] = _t(m.x, m.y, u[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), E = { x: x - o.originInGrid.x, y: y - o.originInGrid.y }, S = [...o.originalElements.values()];
        this.maybeCacheReferenceSnapPoints(u, f);
        let { snapOffset: w, snapLines: M } = $m(f, xe(S, this.state), this, u, E, U);
        g += w.x, b += w.y, this.setState({ snapLines: M });
      }
      if (aN(o.originalElements, U, f, this.scene.getElementsMapIncludingDeleted(), this.scene, vo(u), lf(u), f.some((x) => Re(x)) ? !Bs(u) : Bs(u), g, b, o.resize.center.x, o.resize.center.y)) {
        let x = of(f, this.scene.getNonDeletedElementsMap(), this.state.zoom), y = /* @__PURE__ */ new Set();
        return p.forEach((E) => {
          Md(this.scene.getNonDeletedElements(), E, this.state, this.scene.getNonDeletedElementsMap()).forEach((S) => y.add(S));
        }), this.setState({ elementsToHighlight: [...y], suggestedBindings: x }), !0;
      }
      return !1;
    }), j(this, "getContextMenuItems", (o) => {
      let u = [];
      return u.push(O6, N6), o === "canvas" ? this.state.viewModeEnabled ? [...u, F6, o0, x5, c0] : [R6, Lt, O6, N6, $6, Lt, sH, IX, Lt, F6, UX, o0, x5, c0] : (u.push($6), this.state.viewModeEnabled ? [Ld, ...u] : [Lt, P6, Ld, R6, Lt, JG, QG, eY, Lt, WW, Lt, ...u, Lt, eX, tX, Lt, aX, $Y, mX, gX, xX, iX, Lt, oX, Lt, aH, iH, rH, lH, Lt, hX, fX, Lt, XW, Lt, z9, av, Lt, uH, CX, Lt, d9]);
    }), j(this, "handleWheel", Ut((o) => {
      if (!(o.target instanceof HTMLCanvasElement || o.target instanceof HTMLTextAreaElement || o.target instanceof HTMLIFrameElement)) {
        o[L.CTRL_OR_CMD] && o.preventDefault();
        return;
      }
      if (o.preventDefault(), Ks) return;
      let { deltaX: u, deltaY: f } = o;
      if (o.metaKey || o.ctrlKey) {
        let p = Math.sign(f), U = zu * 100, m = Math.abs(f), g = f;
        m > U && (g = U * p);
        let b = this.state.zoom.value - g / 100;
        b += Math.log10(Math.max(1, this.state.zoom.value)) * -p * Math.min(1, m / 20), this.translateCanvas((v) => ({ ...Xr({ viewportX: this.lastViewportPosition.x, viewportY: this.lastViewportPosition.y, nextZoom: xi(b) }, v), shouldCacheIgnoreZoom: !0 })), this.resetShouldCacheIgnoreZoomDebounced();
        return;
      }
      if (o.shiftKey) {
        this.translateCanvas(({ zoom: p, scrollX: U }) => ({ scrollX: U - (f || u) / p.value }));
        return;
      }
      this.translateCanvas(({ zoom: p, scrollX: U, scrollY: m }) => ({ scrollX: U - u / p.value, scrollY: m - f / p.value }));
    })), j(this, "savePointer", (o, u, f) => {
      var g, b;
      if (!o || !u) return;
      let { x: p, y: U } = et({ clientX: o, clientY: u }, this.state), m = { x: p, y: U, tool: this.state.activeTool.type === "laser" ? "laser" : "pointer" };
      (b = (g = this.props).onPointerUpdate) == null || b.call(g, { pointer: m, button: f, pointersMap: De.pointers });
    }), j(this, "resetShouldCacheIgnoreZoomDebounced", is(() => {
      this.unmounted || this.setState({ shouldCacheIgnoreZoom: !1 });
    }, 300)), j(this, "updateDOMRect", (o) => {
      var u;
      if ((u = this.excalidrawContainerRef) != null && u.current) {
        let f = this.excalidrawContainerRef.current, { width: p, height: U, left: m, top: g } = f.getBoundingClientRect(), { width: b, height: v, offsetTop: x, offsetLeft: y } = this.state;
        if (p === b && U === v && m === y && g === x) {
          o && o();
          return;
        }
        this.setState({ width: p, height: U, offsetLeft: m, offsetTop: g }, () => {
          o && o();
        });
      }
    }), j(this, "refresh", () => {
      this.setState({ ...this.getCanvasOffsets() });
    });
    let n = Ka(), { excalidrawAPI: a, viewModeEnabled: i = !1, zenModeEnabled: r = !1, gridModeEnabled: l = !1, objectsSnapModeEnabled: s = !1, theme: c = n.theme, name: d = `${C("labels.untitled")}-${Z2()}` } = t;
    if (this.state = { ...n, theme: c, isLoading: !0, ...this.getCanvasOffsets(), viewModeEnabled: i, zenModeEnabled: r, objectsSnapModeEnabled: s, gridModeEnabled: l ?? n.gridModeEnabled, name: d, width: window.innerWidth, height: window.innerHeight }, this.id = I0(), this.library = new OX(this), this.actionManager = new ZW(this.syncActionResult, () => this.state, () => this.scene.getElementsIncludingDeleted(), this), this.scene = new Ai(), this.canvas = document.createElement("canvas"), this.rc = vr.canvas(this.canvas), this.renderer = new C5(this.scene), this.visibleElements = [], this.store = new AR(), this.history = new K6(), a) {
      let o = { updateScene: this.updateScene, updateLibrary: this.library.updateLibrary, addFiles: this.addFiles, resetScene: this.resetScene, getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted, history: { clear: this.resetHistory }, scrollToContent: this.scrollToContent, getSceneElements: this.getSceneElements, getAppState: () => this.state, getFiles: () => this.files, getName: this.getName, registerAction: (u) => {
        this.actionManager.registerAction(u);
      }, refresh: this.refresh, setToast: this.setToast, id: this.id, setActiveTool: this.setActiveTool, setCursor: this.setCursor, resetCursor: this.resetCursor, updateFrameRendering: this.updateFrameRendering, toggleSidebar: this.toggleSidebar, onChange: (u) => this.onChangeEmitter.on(u), onPointerDown: (u) => this.onPointerDownEmitter.on(u), onPointerUp: (u) => this.onPointerUpEmitter.on(u), onScrollChange: (u) => this.onScrollChangeEmitter.on(u), onUserFollow: (u) => this.onUserFollowEmitter.on(u) };
      typeof a == "function" ? a(o) : console.error("excalidrawAPI should be a function!");
    }
    this.excalidrawContainerValue = { container: this.excalidrawContainerRef.current, id: this.id }, this.fonts = new wi(this.scene), this.history = new K6(), this.actionManager.registerAll(I1), this.actionManager.registerAction(GW(this.history, this.store)), this.actionManager.registerAction(YW(this.history, this.store));
  }
  onWindowMessage(t) {
    if (t.origin !== "https://player.vimeo.com" && t.origin !== "https://www.youtube.com") return;
    let n = null;
    try {
      n = JSON.parse(t.data);
    } catch {
    }
    if (n) switch (t.origin) {
      case "https://player.vimeo.com":
        if (n.method === "paused") {
          let a = null, i = document.body.querySelectorAll("iframe.excalidraw__embeddable");
          if (!i) break;
          for (let r of i) r.contentWindow === t.source && (a = r.contentWindow);
          a == null || a.postMessage(JSON.stringify({ method: n.value ? "play" : "pause", value: !0 }), "*");
        }
        break;
      case "https://www.youtube.com":
        if (n.event === "infoDelivery" && n.info && n.id && typeof n.info.playerState == "number") {
          let a = n.id, i = n.info.playerState;
          Object.values(Oc).includes(i) && Zf.set(a, i);
        }
        break;
    }
  }
  cacheEmbeddableRef(t, n) {
    n && this.iFrameRefs.set(t.id, n);
  }
  getHTMLIFrameElement(t) {
    return this.iFrameRefs.get(t.id);
  }
  handleEmbeddableCenterClick(t) {
    var a, i, r, l;
    if (((a = this.state.activeEmbeddable) == null ? void 0 : a.element) === t && ((i = this.state.activeEmbeddable) == null ? void 0 : i.state) === "active" || (setTimeout(() => {
      this.setState({ activeEmbeddable: { element: t, state: "active" }, selectedElementIds: { [t.id]: !0 }, newElement: null, selectionElement: null });
    }, 100), qi(t))) return;
    let n = this.getHTMLIFrameElement(t);
    if (n != null && n.contentWindow) {
      if (n.src.includes("youtube")) {
        let s = Zf.get(t.id);
        switch (s || (Zf.set(t.id, Oc.UNSTARTED), n.contentWindow.postMessage(JSON.stringify({ event: "listening", id: t.id }), "*")), s) {
          case Oc.PLAYING:
          case Oc.BUFFERING:
            (r = n.contentWindow) == null || r.postMessage(JSON.stringify({ event: "command", func: "pauseVideo", args: "" }), "*");
            break;
          default:
            (l = n.contentWindow) == null || l.postMessage(JSON.stringify({ event: "command", func: "playVideo", args: "" }), "*");
        }
      }
      n.src.includes("player.vimeo.com") && n.contentWindow.postMessage(JSON.stringify({ method: "paused" }), "*");
    }
  }
  isIframeLikeElementCenter(t, n, a, i) {
    var r, l;
    return t && !n.altKey && !n.shiftKey && !n.metaKey && !n.ctrlKey && (((r = this.state.activeEmbeddable) == null ? void 0 : r.element) !== t || ((l = this.state.activeEmbeddable) == null ? void 0 : l.state) === "hover" || !this.state.activeEmbeddable) && a >= t.x + t.width / 3 && a <= t.x + 2 * t.width / 3 && i >= t.y + t.height / 3 && i <= t.y + 2 * t.height / 3;
  }
  renderEmbeddables() {
    let t = this.state.zoom.value, n = this.state.width, a = this.state.height, i = this.scene.getNonDeletedElements().filter((r) => vn(r) && this.embedsValidationStatus.get(r.id) === !0 || qi(r));
    return h.jsx(h.Fragment, { children: i.map((r) => {
      var p, U, m, g, b, v, x, y, E;
      let { x: l, y: s } = ca({ sceneX: r.x, sceneY: r.y }, this.state), c = bu(r, n, a, this.state, this.scene.getNonDeletedElementsMap()), d = this.initializedEmbeds.has(r.id);
      if (c && !d && this.initializedEmbeds.add(r.id), !(c || d)) return null;
      let o;
      if (qi(r)) {
        o = null;
        let S = (((p = r.customData) == null ? void 0 : p.generationData) ?? this.magicGenerations.get(r.id)) || { status: "error", message: "No generation data", code: "ERR_NO_GENERATION_DATA" };
        if (S.status === "done") {
          let w = S.html;
          o = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => w };
        } else if (S.status === "pending") o = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => xo(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme === Me.DARK ? "white" : "black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `) };
        else {
          let w;
          S.code === "ERR_GENERATION_INTERRUPTED" ? w = "Generation was interrupted..." : w = S.message || "Generation failed", o = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => xo(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Ee.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${w}</h3>
                  `) };
        }
      } else o = Hl(S7(r.link || ""));
      let u = ((U = this.state.activeEmbeddable) == null ? void 0 : U.element) === r && ((m = this.state.activeEmbeddable) == null ? void 0 : m.state) === "active", f = ((g = this.state.activeEmbeddable) == null ? void 0 : g.element) === r && ((b = this.state.activeEmbeddable) == null ? void 0 : b.state) === "hover";
      return h.jsx("div", { className: ne("excalidraw__embeddable-container", { "is-hovered": f }), style: { transform: c ? `translate(${l - this.state.offsetLeft}px, ${s - this.state.offsetTop}px) scale(${t})` : "none", display: c ? "block" : "none", opacity: Z8(r, kn(r, this.scene.getNonDeletedElementsMap()), this.elementsPendingErasure, null, ((v = this.state.openDialog) == null ? void 0 : v.name) === "elementLinkSelector" ? Xb : 1), "--embeddable-radius": `${ma(Math.min(r.width, r.height), r)}px` }, children: h.jsxs("div", { className: "excalidraw__embeddable-container__inner", style: { width: c ? `${r.width}px` : 0, height: c ? `${r.height}px` : 0, transform: c ? `rotate(${r.angle}rad)` : "none", pointerEvents: u ? Sl.enabled : Sl.disabled }, children: [f && h.jsx("div", { className: "excalidraw__embeddable-hint", children: C("buttons.embeddableInteractionButton") }), h.jsx("div", { className: "excalidraw__embeddable__outer", style: { padding: `${r.strokeWidth}px` }, children: (vn(r) ? (y = (x = this.props).renderEmbeddable) == null ? void 0 : y.call(x, r, this.state) : null) ?? h.jsx("iframe", { ref: (S) => this.cacheEmbeddableRef(r, S), className: "excalidraw__embeddable", srcDoc: (o == null ? void 0 : o.type) === "document" ? o.srcdoc(this.state.theme) : void 0, src: (o == null ? void 0 : o.type) !== "document" ? (o == null ? void 0 : o.link) ?? "" : void 0, scrolling: "no", referrerPolicy: "no-referrer-when-downgrade", title: "Excalidraw Embedded Content", allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture", allowFullScreen: !0, sandbox: `${(E = o == null ? void 0 : o.sandbox) != null && E.allowSameOrigin ? "allow-same-origin" : ""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads` }) })] }) }, r.id);
    }) });
  }
  toggleOverscrollBehavior(t) {
    document.documentElement.style.overscrollBehaviorX = t.type === "pointerenter" ? "none" : "auto";
  }
  render() {
    var o, u, f, p, U, m, g, b;
    let t = this.scene.getSelectedElements(this.state), { renderTopRightUI: n, renderCustomStats: a } = this.props, i = this.scene.getSceneNonce(), { elementsMap: r, visibleElements: l } = this.renderer.getRenderableElements({ sceneNonce: i, zoom: this.state.zoom, offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, height: this.state.height, width: this.state.width, editingTextElement: this.state.editingTextElement, newElementId: (o = this.state.newElement) == null ? void 0 : o.id, pendingImageElementId: this.state.pendingImageElementId });
    this.visibleElements = l;
    let s = this.scene.getNonDeletedElementsMap(), c = "setPointerCapture" in HTMLElement.prototype ? !1 : this.state.selectionElement || this.state.newElement || this.state.selectedElementsAreBeingDragged || this.state.resizingElement || this.state.activeTool.type === "laser" && this.state.cursorButton === "down", d = t[0];
    return h.jsx("div", { className: ne("excalidraw excalidraw-container", { "excalidraw--view-mode": this.state.viewModeEnabled || ((u = this.state.openDialog) == null ? void 0 : u.name) === "elementLinkSelector", "excalidraw--mobile": this.device.editor.isMobile }), style: { "--ui-pointerEvents": c ? Sl.disabled : Sl.enabled, "--right-sidebar-width": "302px" }, ref: this.excalidrawContainerRef, onDrop: this.handleAppOnDrop, tabIndex: 0, onKeyDown: this.props.handleKeyboardGlobally ? void 0 : this.onKeyDown, onPointerEnter: this.toggleOverscrollBehavior, onPointerLeave: this.toggleOverscrollBehavior, children: h.jsx(rx.Provider, { value: this, children: h.jsx(lx.Provider, { value: this.props, children: h.jsx(CU.Provider, { value: this.excalidrawContainerValue, children: h.jsx(MU.Provider, { value: this.device, children: h.jsx(_U.Provider, { value: this.setAppState, children: h.jsx(TU.Provider, { value: this.state, children: h.jsxs(IU.Provider, { value: this.scene.getNonDeletedElements(), children: [h.jsxs(AU.Provider, { value: this.actionManager, children: [h.jsx(ZG, { canvas: this.canvas, appState: this.state, files: this.files, setAppState: this.setAppState, actionManager: this.actionManager, elements: this.scene.getNonDeletedElements(), onLockToggle: this.toggleLock, onPenModeToggle: this.togglePenMode, onHandToolToggle: this.onHandToolToggle, langCode: nc().code, renderTopRightUI: n, renderCustomStats: a, showExitZenModeBtn: typeof ((f = this.props) == null ? void 0 : f.zenModeEnabled) > "u" && this.state.zenModeEnabled, UIOptions: this.props.UIOptions, onExportImage: this.onExportImage, renderWelcomeScreen: !this.state.isLoading && this.state.showWelcomeScreen && this.state.activeTool.type === "selection" && !this.state.zenModeEnabled && !this.scene.getElementsIncludingDeleted().length, app: this, isCollaborating: this.props.isCollaborating, generateLinkForSelection: this.props.generateLinkForSelection, children: this.props.children }), h.jsx("div", { className: "excalidraw-textEditorContainer" }), h.jsx("div", { className: "excalidraw-contextMenuContainer" }), h.jsx("div", { className: "excalidraw-eye-dropper-container" }), h.jsx(TY, { trails: [this.laserTrails, this.eraserTrail] }), t.length === 1 && ((p = this.state.openDialog) == null ? void 0 : p.name) !== "elementLinkSelector" && this.state.showHyperlinkPopup && h.jsx(EX, { element: d, elementsMap: s, setAppState: this.setAppState, onLinkOpen: this.props.onLinkOpen, setToast: this.setToast, updateEmbedValidationStatus: this.updateEmbedValidationStatus }, d.id), this.props.aiEnabled !== !1 && t.length === 1 && bd(d) && h.jsx(I5, { element: d, elementsMap: r, children: h.jsx(Wf, { title: C("labels.convertToCode"), icon: S8, checked: !1, onChange: () => this.onMagicFrameGenerate(d, "button") }) }), t.length === 1 && qi(d) && ((m = (U = d.customData) == null ? void 0 : U.generationData) == null ? void 0 : m.status) === "done" && h.jsxs(I5, { element: d, elementsMap: r, children: [h.jsx(Wf, { title: C("labels.copySource"), icon: Z0, checked: !1, onChange: () => this.onIframeSrcCopy(d) }), h.jsx(Wf, { title: "Enter fullscreen", icon: bI, checked: !1, onChange: () => {
      let v = this.getHTMLIFrameElement(d);
      if (v) try {
        v.requestFullscreen(), this.setState({ activeEmbeddable: { element: d, state: "active" }, selectedElementIds: { [d.id]: !0 }, newElement: null, selectionElement: null });
      } catch (x) {
        console.warn(x), this.setState({ errorMessage: "Couldn't enter fullscreen" });
      }
    } })] }), this.state.toast !== null && h.jsx(qG, { message: this.state.toast.message, onClose: () => this.setToast(null), duration: this.state.toast.duration, closable: this.state.toast.closable }), this.state.contextMenu && h.jsx(qW, { items: this.state.contextMenu.items, top: this.state.contextMenu.top, left: this.state.contextMenu.left, actionManager: this.actionManager, onClose: (v) => {
      this.setState({ contextMenu: null }, () => {
        this.focusContainer(), v == null || v();
      });
    } }), h.jsx(IY, { canvas: this.canvas, rc: this.rc, elementsMap: r, allElementsMap: s, visibleElements: l, sceneNonce: i, selectionNonce: (g = this.state.selectionElement) == null ? void 0 : g.versionNonce, scale: window.devicePixelRatio, appState: this.state, renderConfig: { imageCache: this.imageCache, isExporting: !1, renderGrid: Zo(this), canvasBackgroundColor: this.state.viewBackgroundColor, embedsValidationStatus: this.embedsValidationStatus, elementsPendingErasure: this.elementsPendingErasure, pendingFlowchartNodes: this.flowChartCreator.pendingNodes } }), this.state.newElement && h.jsx(XY, { appState: this.state, scale: window.devicePixelRatio, rc: this.rc, elementsMap: r, allElementsMap: s, renderConfig: { imageCache: this.imageCache, isExporting: !1, renderGrid: !1, canvasBackgroundColor: this.state.viewBackgroundColor, embedsValidationStatus: this.embedsValidationStatus, elementsPendingErasure: this.elementsPendingErasure, pendingFlowchartNodes: null } }), h.jsx(kY, { containerRef: this.excalidrawContainerRef, canvas: this.interactiveCanvas, elementsMap: r, visibleElements: l, allElementsMap: s, selectedElements: t, sceneNonce: i, selectionNonce: (b = this.state.selectionElement) == null ? void 0 : b.versionNonce, scale: window.devicePixelRatio, appState: this.state, device: this.device, renderInteractiveSceneCallback: this.renderInteractiveSceneCallback, handleCanvasRef: this.handleInteractiveCanvasRef, onContextMenu: this.handleCanvasContextMenu, onPointerMove: this.handleCanvasPointerMove, onPointerUp: this.handleCanvasPointerUp, onPointerCancel: this.removePointer, onTouchMove: this.handleTouchMove, onPointerDown: this.handleCanvasPointerDown, onDoubleClick: this.handleCanvasDoubleClick }), this.state.userToFollow && h.jsx(LY, { width: this.state.width, height: this.state.height, userToFollow: this.state.userToFollow, onDisconnect: this.maybeUnfollowRemoteUser }), this.renderFrameNames()] }), this.renderEmbeddables()] }) }) }) }) }) }) }) });
  }
  setPlugins(t) {
    Object.assign(this.plugins, t);
  }
  async onMagicFrameGenerate(t, n) {
    var l;
    let a = (l = this.plugins.diagramToCode) == null ? void 0 : l.generate;
    if (!a) {
      this.setState({ errorMessage: "No diagram to code plugin found" });
      return;
    }
    let i = Lp(this.scene.getNonDeletedElements(), t).filter((s) => !bd(s));
    if (!i.length) {
      n === "button" ? (this.setState({ errorMessage: "Cannot generate from an empty frame" }), tt("ai", "generate (no-children)", "d2c")) : this.setActiveTool({ type: "magicframe" });
      return;
    }
    let r = this.insertIframeElement({ sceneX: t.x + t.width + 30, sceneY: t.y, width: t.width, height: t.height });
    if (r) {
      this.updateMagicGeneration({ frameElement: r, data: { status: "pending" } }), this.setState({ selectedElementIds: { [r.id]: !0 } }), tt("ai", "generate (start)", "d2c");
      try {
        let { html: s } = await a({ frame: t, children: i });
        if (tt("ai", "generate (success)", "d2c"), !s.trim()) {
          this.updateMagicGeneration({ frameElement: r, data: { status: "error", code: "ERR_OAI", message: "Nothing genereated :(" } });
          return;
        }
        let c = s.includes("<!DOCTYPE html>") && s.includes("</html>") ? s.slice(s.indexOf("<!DOCTYPE html>"), s.indexOf("</html>") + 7) : s;
        this.updateMagicGeneration({ frameElement: r, data: { status: "done", html: c } });
      } catch (s) {
        tt("ai", "generate (failed)", "d2c"), this.updateMagicGeneration({ frameElement: r, data: { status: "error", code: "ERR_OAI", message: s.message || "Unknown error during generation" } });
      }
    }
  }
  onIframeSrcCopy(t) {
    var n, a;
    ((a = (n = t.customData) == null ? void 0 : n.generationData) == null ? void 0 : a.status) === "done" && (vc(t.customData.generationData.html), this.setToast({ message: "copied to clipboard", closable: !1, duration: 1500 }));
  }
  clearImageShapeCache(t) {
    let n = t ?? this.files;
    this.scene.getNonDeletedElements().forEach((a) => {
      Bn(a) && n[a.fileId] && (this.imageCache.delete(a.fileId), pt.delete(a));
    });
  }
  async componentDidMount() {
    var t;
    this.unmounted = !1, this.excalidrawContainerValue.container = this.excalidrawContainerRef.current, (ve.MODE === En.TEST || ve.DEV) && (this.setState.bind(this), Object.defineProperties(window.h, { state: { configurable: !0, get: () => this.state }, setState: { configurable: !0, value: (...n) => this.setState(...n) }, app: { configurable: !0, value: this }, history: { configurable: !0, value: this.history }, store: { configurable: !0, value: this.store }, fonts: { configurable: !0, value: this.fonts } })), this.store.onStoreIncrementEmitter.on((n) => {
      this.history.record(n.elementsChange, n.appStateChange);
    }), this.scene.onUpdate(this.triggerRender), this.addEventListeners(), this.props.autoFocus && this.excalidrawContainerRef.current && this.focusContainer(), ki() || (this.refreshViewportBreakpoints(), this.refreshEditorBreakpoints()), d1 && this.excalidrawContainerRef.current && (this.resizeObserver = new ResizeObserver(() => {
      this.refreshEditorBreakpoints(), this.updateDOMRect();
    }), (t = this.resizeObserver) == null || t.observe(this.excalidrawContainerRef.current)), new URLSearchParams(window.location.search.slice(1)).has("web-share-target") ? this.restoreFileFromShare() : this.updateDOMRect(this.initializeScene), Ik() && !OM() && this.setState({ errorMessage: h.jsx(nY, {}) });
  }
  componentWillUnmount() {
    var t, n;
    (t = window.launchQueue) == null || t.setConsumer(() => {
    }), this.renderer.destroy(), this.scene.destroy(), this.scene = new Ai(), this.fonts = new wi(this.scene), this.renderer = new C5(this.scene), this.files = {}, this.imageCache.clear(), (n = this.resizeObserver) == null || n.disconnect(), this.unmounted = !0, this.removeEventListeners(), this.library.destroy(), this.laserTrails.stop(), this.eraserTrail.stop(), this.onChangeEmitter.clear(), this.store.onStoreIncrementEmitter.clear(), pt.destroy(), hi.destroy(), clearTimeout(Wi), Dt.clearCache(), dn.clearCache(), Wi = 0, document.documentElement.style.overscrollBehaviorX = "";
  }
  removeEventListeners() {
    this.onRemoveEventListenersEmitter.trigger();
  }
  addEventListeners() {
    this.removeEventListeners(), this.props.handleKeyboardGlobally && this.onRemoveEventListenersEmitter.once(ct(document, "keydown", this.onKeyDown, !1)), this.onRemoveEventListenersEmitter.once(ct(this.excalidrawContainerRef.current, "wheel", this.handleWheel, { passive: !1 }), ct(window, "message", this.onWindowMessage, !1), ct(document, "pointerup", this.removePointer, { passive: !1 }), ct(document, "copy", this.onCopy, { passive: !1 }), ct(document, "keyup", this.onKeyUp, { passive: !0 }), ct(document, "pointermove", this.updateCurrentCursorPosition, { passive: !1 }), ct(document.fonts, "loadingdone", (t) => {
      let n = t.fontfaces;
      this.fonts.onLoaded(n);
    }, { passive: !1 }), ct(document, "gesturestart", this.onGestureStart, !1), ct(document, "gesturechange", this.onGestureChange, !1), ct(document, "gestureend", this.onGestureEnd, !1), ct(window, "focus", () => {
      this.maybeCleanupAfterMissingPointerUp(null), this.triggerRender(!0);
    }, { passive: !1 })), !this.state.viewModeEnabled && (this.onRemoveEventListenersEmitter.once(ct(document, "fullscreenchange", this.onFullscreenChange, { passive: !1 }), ct(document, "paste", this.pasteFromClipboard, { passive: !1 }), ct(document, "cut", this.onCut, { passive: !1 }), ct(window, "resize", this.onResize, !1), ct(window, "unload", this.onUnload, !1), ct(window, "blur", this.onBlur, !1), ct(this.excalidrawContainerRef.current, "wheel", this.handleWheel, { passive: !1 }), ct(this.excalidrawContainerRef.current, "dragover", this.disableEvent, !1), ct(this.excalidrawContainerRef.current, "drop", this.disableEvent, !1)), this.props.detectScroll && this.onRemoveEventListenersEmitter.once(ct(SM(this.excalidrawContainerRef.current), "scroll", this.onScroll, { passive: !1 })));
  }
  componentDidUpdate(t, n) {
    var s, c, d, o, u, f, p, U, m, g;
    this.updateEmbeddables();
    let a = this.scene.getElementsIncludingDeleted(), i = this.scene.getElementsMapIncludingDeleted(), r = this.scene.getNonDeletedElementsMap();
    !this.state.showWelcomeScreen && !a.length && this.setState({ showWelcomeScreen: !0 }), t.UIOptions.dockedSidebarBreakpoint !== this.props.UIOptions.dockedSidebarBreakpoint && this.refreshEditorBreakpoints(), n.userToFollow && !this.state.collaborators.has(n.userToFollow.socketId) && this.maybeUnfollowRemoteUser(), (n.zoom.value !== this.state.zoom.value || n.scrollX !== this.state.scrollX || n.scrollY !== this.state.scrollY) && ((c = (s = this.props) == null ? void 0 : s.onScrollChange) == null || c.call(s, this.state.scrollX, this.state.scrollY, this.state.zoom), this.onScrollChangeEmitter.trigger(this.state.scrollX, this.state.scrollY, this.state.zoom)), n.userToFollow !== this.state.userToFollow && (n.userToFollow && this.onUserFollowEmitter.trigger({ userToFollow: n.userToFollow, action: "UNFOLLOW" }), this.state.userToFollow && this.onUserFollowEmitter.trigger({ userToFollow: this.state.userToFollow, action: "FOLLOW" })), Object.keys(this.state.selectedElementIds).length && Na(this.state) && this.setState({ activeTool: Ct(this.state, { type: "selection" }) }), this.state.activeTool.type === "eraser" && n.theme !== this.state.theme && C7(this.interactiveCanvas, this.state.theme), n.activeTool.type === "selection" && this.state.activeTool.type !== "selection" && this.state.showHyperlinkPopup && this.setState({ showHyperlinkPopup: !1 }), t.langCode !== this.props.langCode && this.updateLanguage(), Na(n) && !Na(this.state) && this.eraserTrail.endPath(), t.viewModeEnabled !== this.props.viewModeEnabled && this.setState({ viewModeEnabled: !!this.props.viewModeEnabled }), n.viewModeEnabled !== this.state.viewModeEnabled && (this.addEventListeners(), this.deselectElements()), (((d = n.openDialog) == null ? void 0 : d.name) === "elementLinkSelector" || ((o = this.state.openDialog) == null ? void 0 : o.name) === "elementLinkSelector") && ((u = n.openDialog) == null ? void 0 : u.name) !== ((f = this.state.openDialog) == null ? void 0 : f.name) && (this.deselectElements(), this.setState({ hoveredElementIds: {} })), t.zenModeEnabled !== this.props.zenModeEnabled && this.setState({ zenModeEnabled: !!this.props.zenModeEnabled }), t.theme !== this.props.theme && this.props.theme && this.setState({ theme: this.props.theme }), (p = this.excalidrawContainerRef.current) == null || p.classList.toggle("theme--dark", this.state.theme === Me.DARK), this.state.editingLinearElement && !this.state.selectedElementIds[this.state.editingLinearElement.elementId] && setTimeout(() => {
      this.state.editingLinearElement && this.actionManager.executeAction(aa);
    }), (U = this.state.editingTextElement) != null && U.isDeleted && this.setState({ editingTextElement: null }), this.state.selectedLinearElement && !this.state.selectedElementIds[this.state.selectedLinearElement.elementId] && this.setState({ selectedLinearElement: null });
    let { multiElement: l } = n;
    n.activeTool !== this.state.activeTool && l != null && Br(this.state) && Ha(l, !1) && M1(l, this.state, da(J.getPointAtIndexGlobalCoordinates(l, -1, r)), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()), this.store.commit(i, this.state), this.state.isLoading || ((g = (m = this.props).onChange) == null || g.call(m, a, this.state, this.files), this.onChangeEmitter.trigger(a, this.state, this.files));
  }
  static resetTapTwice() {
    Zs = !1;
  }
  async addElementsFromMixedContentPaste(t, { isPlainPaste: n, sceneX: a, sceneY: i }) {
    if (!n && t.some((r) => r.type === "imageUrl") && this.isToolSupported("image")) {
      let r = t.filter((u) => u.type === "imageUrl").map((u) => u.value), l = await Promise.all(r.map(async (u) => {
        try {
          return { file: await kN(u) };
        } catch (f) {
          let p = f.message;
          return f.cause === "FETCH_ERROR" ? p = C("errors.failedToFetchImage") : f.cause === "UNSUPPORTED" && (p = C("errors.unsupportedFileType")), { errorMessage: p };
        }
      })), s = i, c = !1, d = {};
      for (let u of l) if (u.file) {
        let f = this.createImageElement({ sceneX: a, sceneY: s }), p = await this.insertImageElement(f, u.file);
        p && (c || (c = !0, s -= p.height / 2), W(p, { y: s }, !1), s = f.y + f.height + 25, d[f.id] = !0);
      }
      this.setState({ selectedElementIds: Le(d, this.state) });
      let o = l.find((u) => !!u.errorMessage);
      o && o.errorMessage && this.setState({ errorMessage: o.errorMessage });
    } else {
      let r = t.filter((l) => l.type === "text");
      r.length && this.addTextFromPaste(r.map((l) => l.value).join(`

`), n);
    }
  }
  addTextFromPaste(t, n = !1) {
    let { x: a, y: i } = et({ clientX: this.lastViewportPosition.x, clientY: this.lastViewportPosition.y }, this.state), r = { x: a, y: i, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roundness: null, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, text: t, fontSize: this.state.currentItemFontSize, fontFamily: this.state.currentItemFontFamily, textAlign: uc, verticalAlign: Wd, locked: !1 }, l = Ye({ fontSize: r.fontSize, fontFamily: r.fontFamily }), s = ol(r.fontFamily), [c, , d] = mL(this.state), o = Math.max(Math.min((d - c) * 0.5, 800), 200), u = 10, f = i, p = n ? [t] : t.split(`
`), U = p.reduce((m, g, b) => {
      var x;
      let v = ls(g).trim();
      if (v.length) {
        let y = this.getTopLayerFrameAtSceneCoords({ x: a, y: f }), E = ln(v, l, s), S = E.width > o, w = S ? gl(v, l, o) : v;
        E = S ? ln(w, l, s) : E;
        let M = a - E.width / 2, I = f - E.height / 2, T = Rn({ ...r, x: M, y: I, text: w, originalText: v, lineHeight: s, autoResize: !S, frameId: y ? y.id : null });
        m.push(T), f += T.height + u;
      } else (x = p[b - 1]) != null && x.trim() && (f += Uc(r.fontSize, s) + u);
      return m;
    }, []);
    U.length !== 0 && (this.scene.insertElements(U), this.setState({ selectedElementIds: Le(Object.fromEntries(U.map((m) => [m.id, !0])), this.state) }), !n && U.length > 1 && _5 === !1 && !this.device.editor.isMobile && (this.setToast({ message: C("toast.pasteAsSingleElement", { shortcut: X("CtrlOrCmd+Shift+V") }), duration: 5e3 }), _5 = !0), this.store.shouldCaptureIncrement());
  }
  handleTextWysiwyg(t, { isExistingElement: n = !1 }) {
    let a = this.scene.getElementsMapIncludingDeleted(), i = (r, l) => {
      this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map((s) => s.id === t.id && q(s) ? ge(s, { originalText: r, isDeleted: l ?? s.isDeleted, ...T7(s, Vt(s, a), a, r) }) : s)]);
    };
    OY({ id: t.id, canvas: this.canvas, getViewportCoords: (r, l) => {
      let { x: s, y: c } = ca({ sceneX: r, sceneY: l }, this.state);
      return [s - this.state.offsetLeft, c - this.state.offsetTop];
    }, onChange: Ut((r) => {
      i(r, !1), O1(t) && Sn(t, this.scene.getNonDeletedElementsMap());
    }), onSubmit: Ut(({ viaKeyboard: r, nextOriginalText: l }) => {
      let s = !l.trim();
      if (i(l, s), !s && r) {
        let c = t.containerId ? t.containerId : t.id;
        Pa(() => {
          this.setState((d) => ({ selectedElementIds: Le({ ...d.selectedElementIds, [c]: !0 }, d) }));
        });
      }
      s && h7(this.scene.getNonDeletedElements(), [t]), (!s || n) && this.store.shouldCaptureIncrement(), Pa(() => {
        this.setState({ newElement: null, editingTextElement: null });
      }), this.state.activeTool.locked && La(this.interactiveCanvas, this.state), this.focusContainer();
    }), element: t, excalidrawContainer: this.excalidrawContainerRef.current, app: this, autoSelect: !this.device.isTouchScreen }), this.deselectElements(), i(t.originalText, !1);
  }
  deselectElements() {
    this.setState({ selectedElementIds: Le({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null });
  }
  getTextElementAtPosition(t, n) {
    let a = this.getElementAtPosition(t, n, { includeBoundTextElement: !0 });
    return a && q(a) && !a.isDeleted ? a : null;
  }
  getElementAtPosition(t, n, a) {
    let i = this.getElementsAtPosition(t, n, a == null ? void 0 : a.includeBoundTextElement, a == null ? void 0 : a.includeLockedElements);
    if (i.length > 1) {
      if (a != null && a.preferSelected) {
        for (let l = i.length - 1; l > -1; l--) if (this.state.selectedElementIds[i[l].id]) return i[l];
      }
      let r = i[i.length - 1];
      return Rl({ x: t, y: n, element: r, shape: Ui(r, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() / 2, frameNameBound: de(r) ? this.frameNameBoundsCache.get(r) : null }) ? r : i[i.length - 2];
    }
    return i.length === 1 ? i[0] : null;
  }
  getElementsAtPosition(t, n, a = !1, i = !1) {
    let r = [], l = this.scene.getNonDeletedElementsMap();
    return (a && i ? this.scene.getNonDeletedElements() : this.scene.getNonDeletedElements().filter((s) => (i || !s.locked) && (a || !(q(s) && s.containerId)))).filter((s) => this.hitElement(t, n, s)).filter((s) => {
      let c = kn(s, l);
      return c && this.state.frameRendering.enabled && this.state.frameRendering.clip ? pg({ x: t, y: n }, c, l) : !0;
    }).filter((s) => qi(s) ? (r.push(s), !1) : !0).concat(r);
  }
  getElementHitThreshold() {
    return Rk / this.state.zoom.value;
  }
  hitElement(t, n, a, i = !0) {
    if (i && this.state.selectedElementIds[a.id] && g3([a], this.state)) {
      let r = xD(a, this.scene.getNonDeletedElementsMap(), Re(a) ? 0 : this.getElementHitThreshold());
      if (ru(k(t, n), r)) return !0;
    }
    return F8(t, n, B8(a, this.scene.getNonDeletedElementsMap())) ? !0 : Rl({ x: t, y: n, element: a, shape: Ui(a, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold(), frameNameBound: de(a) ? this.frameNameBoundsCache.get(a) : null });
  }
  getTextBindableContainerAtPosition(t, n) {
    let a = this.scene.getNonDeletedElements(), i = this.scene.getSelectedElements(this.state);
    if (i.length === 1) return Gr(i[0], !1) ? i[0] : null;
    let r = null;
    for (let l = a.length - 1; l >= 0; --l) {
      if (a[l].isDeleted) continue;
      let [s, c, d, o] = Ue(a[l], this.scene.getNonDeletedElementsMap());
      if (ye(a[l]) && Rl({ x: t, y: n, element: a[l], shape: Ui(a[l], this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() })) {
        r = a[l];
        break;
      } else if (s < t && t < d && c < n && n < o) {
        r = a[l];
        break;
      }
    }
    return Gr(r, !1) ? r : null;
  }
  handleHoverSelectedLinearElement(t, n, a) {
    let i = this.scene.getNonDeletedElementsMap(), r = J.getElement(t.elementId, i);
    if (r) if (this.state.selectedLinearElement) {
      let l = -1, s = null;
      Rl({ x: n, y: a, element: r, shape: Ui(r, this.scene.getNonDeletedElementsMap()) }) ? (l = J.getPointIndexUnderCursor(r, i, this.state.zoom, n, a), s = J.getSegmentMidpointHitCoords(t, { x: n, y: a }, this.state, this.scene.getNonDeletedElementsMap()), (ee(r) ? l === 0 || l === r.points.length - 1 : l >= 0) || s ? Ge(this.interactiveCanvas, We.POINTER) : this.hitElement(n, a, r) && Ge(this.interactiveCanvas, We.MOVE)) : this.hitElement(n, a, r) && (!ee(r) || !(r.startBinding || r.endBinding)) && Ge(this.interactiveCanvas, We.MOVE), this.state.selectedLinearElement.hoverPointIndex !== l && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, hoverPointIndex: l } }), J.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords, s) || this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: s } });
    } else Ge(this.interactiveCanvas, We.AUTO);
  }
  updateGestureOnPointerDown(t) {
    De.pointers.set(t.pointerId, { x: t.clientX, y: t.clientY }), De.pointers.size === 2 && (De.lastCenter = q6(De.pointers), De.initialScale = this.state.zoom.value, De.initialDistance = J6(Array.from(De.pointers.values())));
  }
  initialPointerDownState(t) {
    let n = et(t, this.state), a = this.scene.getSelectedElements(this.state), [i, r, l, s] = ze(a), c = a.findIndex(ee) === 0;
    return { origin: n, withCmdOrCtrl: t[L.CTRL_OR_CMD], originInGrid: da(_t(n.x, n.y, t[L.CTRL_OR_CMD] || c ? null : this.getEffectiveGridSize())), scrollbars: n5(Yf, t.clientX - this.state.offsetLeft, t.clientY - this.state.offsetTop), lastCoords: { ...n }, originalElements: this.scene.getNonDeletedElements().reduce((d, o) => (d.set(o.id, bl(o)), d), /* @__PURE__ */ new Map()), resize: { handleType: !1, isResizing: !1, offset: { x: 0, y: 0 }, arrowDirection: "origin", center: { x: (l + i) / 2, y: (s + r) / 2 } }, hit: { element: null, allHitElements: [], wasAddedToSelection: !1, hasBeenDuplicated: !1, hasHitCommonBoundingBoxOfSelectedElements: this.isHittingCommonBoundingBoxOfSelectedElements(n, a) }, drag: { hasOccurred: !1, offset: null }, eventListeners: { onMove: null, onUp: null, onKeyUp: null, onKeyDown: null }, boxSelection: { hasOccurred: !1 } };
  }
  handleDraggingScrollBar(t, n) {
    if (!(n.scrollbars.isOverEither && !this.state.multiElement)) return !1;
    Gf = !0, n.lastCoords.x = t.clientX, n.lastCoords.y = t.clientY;
    let a = Bf((r) => {
      r.target instanceof HTMLElement && this.handlePointerMoveOverScrollbars(r, n);
    }), i = Ut(() => {
      Tr = null, Gf = !1, La(this.interactiveCanvas, this.state), this.setState({ cursorButton: "up" }), this.savePointer(t.clientX, t.clientY, "up"), window.removeEventListener("pointermove", a), window.removeEventListener("pointerup", i), a.flush();
    });
    return Tr = i, window.addEventListener("pointermove", a), window.addEventListener("pointerup", i), !0;
  }
  isASelectedElement(t) {
    return t != null && this.state.selectedElementIds[t.id];
  }
  isHittingCommonBoundingBoxOfSelectedElements(t, n) {
    if (n.length < 2) return !1;
    let a = this.getElementHitThreshold(), [i, r, l, s] = ze(n);
    return t.x > i - a && t.x < l + a && t.y > r - a && t.y < s + a;
  }
  getCurrentItemRoundness(t) {
    return this.state.currentItemRoundness === "round" ? { type: ks(t) ? jt.ADAPTIVE_RADIUS : jt.PROPORTIONAL_RADIUS } : null;
  }
  maybeCacheReferenceSnapPoints(t, n, a = !1) {
    fr({ event: t, app: this, selectedElements: n }) && (a || !hi.getReferenceSnapPoints()) && hi.setReferenceSnapPoints(tR(this.scene.getNonDeletedElements(), n, this.state, this.scene.getNonDeletedElementsMap()));
  }
  maybeCacheVisibleGaps(t, n, a = !1) {
    fr({ event: t, app: this, selectedElements: n }) && (a || !hi.getVisibleGaps()) && hi.setVisibleGaps(eR(this.scene.getNonDeletedElements(), n, this.state, this.scene.getNonDeletedElementsMap()));
  }
  onKeyDownFromPointerDownHandler(t) {
    return Ut((n) => {
      this.maybeHandleResize(t, n) || this.maybeDragNewGenericElement(t, n);
    });
  }
  onKeyUpFromPointerDownHandler(t) {
    return Ut((n) => {
      n.key === L.ALT && n.preventDefault(), !this.maybeHandleResize(t, n) && this.maybeDragNewGenericElement(t, n);
    });
  }
  onPointerMoveFromPointerDownHandler(t) {
    return Bf((n) => {
      var o, u, f, p, U, m;
      if (((o = this.state.openDialog) == null ? void 0 : o.name) === "elementLinkSelector") return;
      let a = et(n, this.state);
      if (this.state.selectedLinearElement && this.state.selectedLinearElement.elbowed && this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index) {
        let [g, b] = _t(a.x, a.y, n[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;
        if (v < 0) {
          let y = J.getSegmentMidpointHitCoords({ ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: null }, { x: g, y: b }, this.state, this.scene.getNonDeletedElementsMap());
          v = y ? J.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, y, this.scene.getNonDeletedElementsMap()) : -1;
        }
        let x = J.moveFixedSegment(this.state.selectedLinearElement, v, g, b, this.scene.getNonDeletedElementsMap());
        Pa(() => {
          this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: x.segmentMidPointHoveredCoords, pointerDownState: x.pointerDownState } });
        });
        return;
      }
      let i = this.lastPointerMoveCoords ?? t.origin;
      if (this.lastPointerMoveCoords = a, t.drag.offset === null && (t.drag.offset = da(UN(this.scene.getSelectedElements(this.state), t.origin.x, t.origin.y))), !(n.target instanceof HTMLElement) || this.handlePointerMoveOverScrollbars(n, t)) return;
      if (Na(this.state)) {
        this.handleEraser(n, t, a);
        return;
      }
      this.state.activeTool.type === "laser" && this.laserTrails.addPointToPath(a.x, a.y);
      let [r, l] = _t(a.x, a.y, n[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize());
      if (!t.drag.hasOccurred && (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") && Pe(k(a.x, a.y), k(t.origin.x, t.origin.y)) < Dr) return;
      if (t.resize.isResizing && (t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeHandleCrop(t, n) || this.maybeHandleResize(t, n))) return !0;
      let s = this.scene.getNonDeletedElementsMap();
      if (this.state.selectedLinearElement) {
        let g = this.state.editingLinearElement || this.state.selectedLinearElement;
        if (J.shouldAddMidpoint(this.state.selectedLinearElement, a, this.state, s)) {
          let b = J.addMidpoint(this.state.selectedLinearElement, a, this, !n[L.CTRL_OR_CMD], s);
          if (!b) return;
          Pa(() => {
            this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, pointerDownState: b.pointerDownState, selectedPointsIndices: b.selectedPointsIndices } }), this.state.editingLinearElement && this.setState({ editingLinearElement: { ...this.state.editingLinearElement, pointerDownState: b.pointerDownState, selectedPointsIndices: b.selectedPointsIndices } });
          });
          return;
        } else if (g.pointerDownState.segmentMidpoint.value !== null && !g.pointerDownState.segmentMidpoint.added) return;
        if (J.handlePointDragging(n, this, a.x, a.y, (b, v) => {
          this.maybeSuggestBindingsForLinearElementAtCoords(b, v);
        }, g, this.scene)) {
          t.lastCoords.x = a.x, t.lastCoords.y = a.y, t.drag.hasOccurred = !0, this.state.editingLinearElement && !this.state.editingLinearElement.isDragging && this.setState({ editingLinearElement: { ...this.state.editingLinearElement, isDragging: !0 } }), this.state.selectedLinearElement.isDragging || this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, isDragging: !0 } });
          return;
        }
      }
      let c = t.hit.allHitElements.some((g) => this.isASelectedElement(g)), d = this.state.editingLinearElement && n.shiftKey && this.state.editingLinearElement.elementId === ((u = t.hit.element) == null ? void 0 : u.id);
      if ((c || t.hit.hasHitCommonBoundingBoxOfSelectedElements) && !d) {
        let g = this.scene.getSelectedElements(this.state);
        if (g.every((y) => y.locked)) return;
        let b = g.find((y) => de(y)), v = this.getTopLayerFrameAtSceneCoords(a), x = v && !b ? v : null;
        if (this.state.frameToHighlight !== x && Pa(() => {
          this.setState({ frameToHighlight: x });
        }), t.drag.hasOccurred = !0, g.length > 0 && !t.withCmdOrCtrl && !this.state.editingTextElement && ((f = this.state.activeEmbeddable) == null ? void 0 : f.state) !== "active") {
          let y = { x: a.x - t.origin.x, y: a.y - t.origin.y }, E = [...t.originalElements.values()], S = n.shiftKey;
          if (S) {
            let I = Math.abs(y.x), T = Math.abs(y.y), _ = S && I < T, A = S && I > T;
            _ && (y.x = 0), A && (y.y = 0);
          }
          if (this.state.croppingElementId) {
            let I = this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);
            if (I && Re(I) && I.crop !== null && t.hit.element === I) {
              let T = I.crop, _ = Bn(I) && ((p = this.imageCache.get(I.fileId)) == null ? void 0 : p.image);
              if (_ && !(_ instanceof Promise)) {
                let A = bt(Zt(a.x - i.x, a.y - i.y), Math.max(this.state.zoom.value, 2)), [D, P, N, $, R, V] = Ue(I, s), O = le(B(k(D, P), k(R, V), I.angle)), G = le(B(k(N, P), k(R, V), I.angle)), ae = le(B(k(D, $), k(R, V), I.angle)), he = nn(qd(G, O)), ce = nn(qd(ae, O)), Be = Zt(W2(A, he), W2(A, ce)), He = { ...T, x: Se(T.x - Be[0] * Math.sign(I.scale[0]), 0, _.naturalWidth - T.width), y: Se(T.y - Be[1] * Math.sign(I.scale[1]), 0, _.naturalHeight - T.height) };
                W(I, { crop: He });
                return;
              }
            }
          }
          this.maybeCacheVisibleGaps(n, g), this.maybeCacheReferenceSnapPoints(n, g);
          let { snapOffset: w, snapLines: M } = nR(E, y, this, n, this.scene.getNonDeletedElementsMap());
          if (this.setState({ snapLines: M }), this.state.editingFrame || fN(t, g, y, this.scene, w, n[L.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), this.setState({ selectedElementsAreBeingDragged: !0, selectionElement: null }), (g.length !== 1 || !ee(g[0])) && this.setState({ suggestedBindings: of(g, this.scene.getNonDeletedElementsMap(), this.state.zoom) }), n.altKey && !t.hit.hasBeenDuplicated) {
            t.hit.hasBeenDuplicated = !0;
            let I = [], T = [], _ = /* @__PURE__ */ new Map(), A = /* @__PURE__ */ new Map(), D = t.hit.element, P = new Set(this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }).map((R) => R.id)), N = this.scene.getElementsIncludingDeleted();
            for (let R of N) {
              let V = P.has(R.id) || R.id === (D == null ? void 0 : D.id) && t.hit.wasAddedToSelection;
              if (Math.abs(R.x) > 1e7 || Math.abs(R.x) > 1e7 || Math.abs(R.width) > 1e7 || Math.abs(R.height) > 1e7) {
                console.error("Alt+dragging element in scene with invalid dimensions", R.x, R.y, R.width, R.height, V);
                return;
              }
              if (V) {
                let O = j7(this.state.editingGroupId, _, R);
                if (Math.abs(O.x) > 1e7 || Math.abs(O.x) > 1e7 || Math.abs(O.width) > 1e7 || Math.abs(O.height) > 1e7) {
                  console.error("Alt+dragging duplicated element with invalid dimensions", O.x, O.y, O.width, O.height);
                  return;
                }
                let G = t.originalElements.get(R.id);
                if (Math.abs(G.x) > 1e7 || Math.abs(G.x) > 1e7 || Math.abs(G.width) > 1e7 || Math.abs(G.height) > 1e7) {
                  console.error("Alt+dragging duplicated element with invalid dimensions", G.x, G.y, G.width, G.height);
                  return;
                }
                W(O, { x: G.x, y: G.y }), t.originalElements.set(O.id, O), I.push(O), T.push(R), A.set(R.id, O.id);
              } else I.push(R);
            }
            let $ = [...I, ...T];
            $ = ((m = (U = this.props).onDuplicate) == null ? void 0 : m.call(U, $, N)) || $, ei($, ue(T)), w7(I, T, A), u7($, T, A, "duplicatesServeAsOld"), l3($, T, A), this.scene.replaceAllElements($), this.maybeCacheVisibleGaps(n, g, !0), this.maybeCacheReferenceSnapPoints(n, g, !0);
          }
          return;
        }
      }
      if (this.state.selectionElement) t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeDragNewGenericElement(t, n);
      else {
        let g = this.state.newElement;
        if (!g) return;
        if (g.type === "freedraw") {
          let b = g.points, v = a.x - g.x, x = a.y - g.y, y = b.length > 0 && b[b.length - 1];
          if (!(y && y[0] === v && y[1] === x)) {
            let E = g.simulatePressure ? g.pressures : [...g.pressures, n.pressure];
            W(g, { points: [...b, k(v, x)], pressures: E }, !1), this.setState({ newElement: g });
          }
        } else if (pe(g)) {
          t.drag.hasOccurred = !0;
          let b = g.points, v = r - g.x, x = l - g.y;
          vo(n) && b.length === 2 && ({ width: v, height: x } = P1(g.x, g.y, a.x, a.y)), b.length === 1 ? W(g, { points: [...b, k(v, x)] }, !1) : (b.length === 2 || b.length > 1 && ee(g)) && W(g, { points: [...b.slice(0, -1), k(v, x)] }, !1, { isDragging: !0 }), this.setState({ newElement: g }), Ha(g, !1) && this.maybeSuggestBindingsForLinearElementAtCoords(g, [a], this.state.startBoundElement);
        } else t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeDragNewGenericElement(t, n, !1);
      }
      if (this.state.activeTool.type === "selection") {
        t.boxSelection.hasOccurred = !0;
        let g = this.scene.getNonDeletedElements();
        if (this.state.editingLinearElement) J.handleBoxSelection(n, this.state, this.setState.bind(this), this.scene.getNonDeletedElementsMap());
        else {
          let b = !0;
          !n.shiftKey && Dt(g, this.state) && (t.withCmdOrCtrl && t.hit.element ? this.setState((x) => dn({ ...x, selectedElementIds: { [t.hit.element.id]: !0 } }, this.scene.getNonDeletedElements(), x, this)) : b = !1);
          let v = this.state.selectionElement ? Pp(g, this.state.selectionElement, this.scene.getNonDeletedElementsMap(), !1) : [];
          this.setState((x) => {
            let y = { ...b && x.selectedElementIds, ...v.reduce((E, S) => (E[S.id] = !0, E), {}) };
            return t.hit.element && (v.length ? delete y[t.hit.element.id] : y[t.hit.element.id] = !0), x = b ? x : { ...x, selectedGroupIds: {}, editingGroupId: null }, { ...dn({ editingGroupId: x.editingGroupId, selectedElementIds: y }, this.scene.getNonDeletedElements(), x, this), selectedLinearElement: v.length === 1 && pe(v[0]) ? new J(v[0]) : null, showHyperlinkPopup: v.length === 1 && (v[0].link || vn(v[0])) ? "info" : !1 };
          });
        }
      }
    });
  }
  handlePointerMoveOverScrollbars(t, n) {
    if (n.scrollbars.isOverHorizontal) {
      let a = t.clientX, i = a - n.lastCoords.x;
      return this.translateCanvas({ scrollX: this.state.scrollX - i / this.state.zoom.value }), n.lastCoords.x = a, !0;
    }
    if (n.scrollbars.isOverVertical) {
      let a = t.clientY, i = a - n.lastCoords.y;
      return this.translateCanvas({ scrollY: this.state.scrollY - i / this.state.zoom.value }), n.lastCoords.y = a, !0;
    }
    return !1;
  }
  onPointerUpFromPointerDownHandler(t) {
    return Ut((n) => {
      var m, g, b, v, x, y, E, S, w, M, I, T;
      this.removePointer(n), t.eventListeners.onMove && t.eventListeners.onMove.flush();
      let { newElement: a, resizingElement: i, croppingElementId: r, multiElement: l, activeTool: s, isResizing: c, isRotating: d, isCropping: o } = this.state;
      this.setState((_) => ({ isResizing: !1, isRotating: !1, isCropping: !1, resizingElement: null, selectionElement: null, frameToHighlight: null, elementsToHighlight: null, cursorButton: "up", snapLines: zs(_.snapLines, []), originSnapOffset: null })), this.lastPointerMoveCoords = null, hi.setReferenceSnapPoints(null), hi.setVisibleGaps(null), this.savePointer(n.clientX, n.clientY, "up"), this.setState({ selectedElementsAreBeingDragged: !1 });
      let u = this.scene.getNonDeletedElementsMap();
      if (t.drag.hasOccurred && ((g = (m = t.hit) == null ? void 0 : m.element) != null && g.id)) {
        let _ = u.get(t.hit.element.id);
        xa(_) && ((b = _.boundElements) == null || b.filter((A) => A.type === "arrow").map((A) => u.get(A.id)).filter((A) => ee(A)).forEach((A) => {
          A && W(A, {}, !0);
        }));
      }
      if (this.state.editingLinearElement) if (!t.boxSelection.hasOccurred && ((x = (v = t.hit) == null ? void 0 : v.element) == null ? void 0 : x.id) !== this.state.editingLinearElement.elementId) this.actionManager.executeAction(aa);
      else {
        let _ = J.handlePointerUp(n, this.state.editingLinearElement, this.state, this.scene);
        _ !== this.state.editingLinearElement && this.setState({ editingLinearElement: _, suggestedBindings: [] });
      }
      else if (this.state.selectedLinearElement) {
        if (this.state.selectedLinearElement.elbowed) {
          let _ = J.getElement(this.state.selectedLinearElement.elementId, this.scene.getNonDeletedElementsMap());
          _ && W(_, {}, !0);
        }
        if (((E = (y = t.hit) == null ? void 0 : y.element) == null ? void 0 : E.id) !== this.state.selectedLinearElement.elementId) this.scene.getSelectedElements(this.state).length > 1 && this.setState({ selectedLinearElement: null });
        else {
          let _ = J.handlePointerUp(n, this.state.selectedLinearElement, this.state, this.scene), { startBindingElement: A, endBindingElement: D } = _, P = this.scene.getElement(_.elementId);
          Ha(P) && Qu(P, A, D, u, this.scene), _ !== this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ..._, selectedPointsIndices: null }, suggestedBindings: [] });
        }
      }
      if (this.missingPointerEventCleanupEmitter.clear(), window.removeEventListener("pointermove", t.eventListeners.onMove), window.removeEventListener("pointerup", t.eventListeners.onUp), window.removeEventListener("keydown", t.eventListeners.onKeyDown), window.removeEventListener("keyup", t.eventListeners.onKeyUp), this.state.pendingImageElementId && this.setState({ pendingImageElementId: null }), (w = (S = this.props) == null ? void 0 : S.onPointerUp) == null || w.call(S, s, t), this.onPointerUpEmitter.trigger(this.state.activeTool, t, n), (a == null ? void 0 : a.type) === "freedraw") {
        let _ = et(n, this.state), A = a.points, D = _.x - a.x, P = _.y - a.y;
        D === A[0][0] && P === A[0][1] && (P += 1e-4, D += 1e-4);
        let N = a.simulatePressure ? [] : [...a.pressures, n.pressure];
        W(a, { points: [...A, k(D, P)], pressures: N, lastCommittedPoint: k(D, P) }), this.actionManager.executeAction(aa);
        return;
      }
      if (Re(a)) {
        let _ = a;
        try {
          this.initializeImageDimensions(_), this.setState({ selectedElementIds: Le({ [_.id]: !0 }, this.state) }, () => {
            this.actionManager.executeAction(aa);
          });
        } catch (A) {
          console.error(A), this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter((D) => D.id !== _.id)), this.actionManager.executeAction(aa);
        }
        return;
      }
      if (pe(a)) {
        a.points.length > 1 && this.store.shouldCaptureIncrement();
        let _ = et(n, this.state);
        !t.drag.hasOccurred && a && !l ? (W(a, { points: [...a.points, k(_.x - a.x, _.y - a.y)] }), this.setState({ multiElement: a, newElement: a })) : t.drag.hasOccurred && !l && (Br(this.state) && Ha(a, !1) && M1(a, this.state, _, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()), this.setState({ suggestedBindings: [], startBoundElement: null }), s.locked ? this.setState((A) => ({ newElement: null })) : (ra(this.interactiveCanvas), this.setState((A) => ({ newElement: null, activeTool: Ct(this.state, { type: "selection" }), selectedElementIds: Le({ ...A.selectedElementIds, [a.id]: !0 }, A), selectedLinearElement: new J(a) }))), this.scene.triggerUpdate());
        return;
      }
      if (q(a)) {
        let _ = z0(Ye({ fontSize: a.fontSize, fontFamily: a.fontFamily }), a.lineHeight);
        a.width < _ && W(a, { autoResize: !0 }), this.resetCursor(), this.handleTextWysiwyg(a, { isExistingElement: !0 });
      }
      if (s.type !== "selection" && a && Us(a)) {
        this.updateScene({ elements: this.scene.getElementsIncludingDeleted().filter((_) => _.id !== a.id), appState: { newElement: null }, captureUpdate: H.NEVER });
        return;
      }
      if (de(a)) {
        let _ = GP(this.scene.getElementsIncludingDeleted(), a, this.scene.getNonDeletedElementsMap());
        this.scene.replaceAllElements(wo(this.scene.getElementsMapIncludingDeleted(), _, a, this.state));
      }
      if (a && (W(a, p3(a)), this.scene.triggerUpdate()), t.drag.hasOccurred) {
        let _ = et(n, this.state);
        if (this.state.selectedLinearElement && this.state.selectedLinearElement.isDragging) {
          let A = this.scene.getElement(this.state.selectedLinearElement.elementId);
          if (A != null && A.frameId) {
            let D = kn(A, u);
            D && A && (Ur(A, D, this.scene.getNonDeletedElementsMap()) || (W(A, { groupIds: [] }), ch([A], this.scene.getNonDeletedElementsMap()), this.scene.triggerUpdate()));
          }
        } else {
          let A = this.getTopLayerFrameAtSceneCoords(_), D = this.scene.getSelectedElements(this.state), P = this.scene.getElementsMapIncludingDeleted(), N = ($) => {
            if ($.length > 0) {
              for (let R of $) {
                let V = R.groupIds.indexOf(this.state.editingGroupId);
                W(R, { groupIds: R.groupIds.slice(0, V) }, !1);
              }
              P.forEach((R) => {
                R.groupIds.length && it(P, R.groupIds[R.groupIds.length - 1]).length < 2 && W(R, { groupIds: [] }, !1);
              }), this.setState({ editingGroupId: null });
            }
          };
          if (A && !this.state.selectedElementIds[A.id]) {
            let $ = D.filter((R) => R.frameId !== A.id && gu(R, P, this.state));
            this.state.editingGroupId && N($), P = wo(P, $, A, this.state);
          } else if (!A && this.state.editingGroupId) {
            let $ = D.filter((R) => R.frameId && !gu(R, P, this.state));
            N($);
          }
          P = ps(P, this.state, this), this.scene.replaceAllElements(P);
        }
      }
      if (i && this.store.shouldCaptureIncrement(), i && Us(i) && this.updateScene({ elements: this.scene.getElementsIncludingDeleted().filter((_) => _.id !== i.id), captureUpdate: H.NEVER }), t.resize.isResizing) {
        let _ = ps(this.scene.getElementsIncludingDeleted(), this.state, this), A = this.scene.getSelectedElements(this.state).filter((D) => de(D));
        for (let D of A) _ = c3(_, Md(this.scene.getElementsIncludingDeleted(), D, this.state, u), D, this);
        this.scene.replaceAllElements(_);
      }
      let f = t.hit.element;
      ((M = this.state.selectedLinearElement) == null ? void 0 : M.elementId) !== (f == null ? void 0 : f.id) && pe(f) && this.scene.getSelectedElements(this.state).length === 1 && this.setState({ selectedLinearElement: new J(f) }), (!r || r && (!f && !o || f && f.id !== r)) && this.finishImageCropping();
      let p = this.lastPointerDownEvent, U = this.lastPointerUpEvent || this.lastPointerMoveEvent;
      if (Na(this.state) && p && U) {
        if (this.eraserTrail.endPath(), Pe(k(p.clientX, p.clientY), k(U.clientX, U.clientY)) === 0) {
          let _ = et({ clientX: U.clientX, clientY: U.clientY }, this.state);
          this.getElementsAtPosition(_.x, _.y).forEach((A) => this.elementsPendingErasure.add(A.id));
        }
        this.eraseElements();
        return;
      } else this.elementsPendingErasure.size && this.restoreReadyToEraseElements();
      if (f && !t.drag.hasOccurred && !t.hit.wasAddedToSelection && (!this.state.editingLinearElement || !t.boxSelection.hasOccurred) && (n.shiftKey && !this.state.editingLinearElement ? this.state.selectedElementIds[f.id] ? m7(this.state, f) ? this.setState((_) => {
        let A = { ..._.selectedElementIds };
        for (let D of f.groupIds.flatMap((P) => it(this.scene.getNonDeletedElements(), P))) delete A[D.id];
        return { selectedGroupIds: { ..._.selectedElementIds, ...f.groupIds.map((D) => ({ [D]: !1 })).reduce((D, P) => ({ ...D, ...P }), {}) }, selectedElementIds: Le(A, _) };
      }) : (I = this.state.selectedLinearElement) != null && I.isDragging || this.setState((_) => {
        let A = { ..._.selectedElementIds };
        delete A[f.id];
        let D = xe(this.scene.getNonDeletedElements(), { selectedElementIds: A });
        return { ...dn({ editingGroupId: _.editingGroupId, selectedElementIds: A }, this.scene.getNonDeletedElements(), _, this), selectedLinearElement: D.length === 1 && pe(D[0]) ? new J(D[0]) : _.selectedLinearElement };
      }) : f.frameId && this.state.selectedElementIds[f.frameId] ? this.setState((_) => {
        var D;
        let A = { ..._.selectedElementIds, [f.id]: !0 };
        return delete A[f.frameId], (((D = this.scene.getElement(f.frameId)) == null ? void 0 : D.groupIds) ?? []).flatMap((P) => it(this.scene.getNonDeletedElements(), P)).forEach((P) => {
          delete A[P.id];
        }), { ...dn({ editingGroupId: _.editingGroupId, selectedElementIds: A }, this.scene.getNonDeletedElements(), _, this), showHyperlinkPopup: f.link || vn(f) ? "info" : !1 };
      }) : this.setState((_) => ({ selectedElementIds: Le({ ..._.selectedElementIds, [f.id]: !0 }, _) })) : this.setState((_) => {
        var A;
        return { ...dn({ editingGroupId: _.editingGroupId, selectedElementIds: { [f.id]: !0 } }, this.scene.getNonDeletedElements(), _, this), selectedLinearElement: pe(f) && ((A = _.selectedLinearElement) == null ? void 0 : A.elementId) !== f.id ? new J(f) : _.selectedLinearElement };
      })), !(f && ee(f)) && !t.drag.hasOccurred && !this.state.isResizing && (f && LD({ x: t.origin.x, y: t.origin.y, element: f, shape: Ui(f, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold(), frameNameBound: de(f) ? this.frameNameBoundsCache.get(f) : null }, u) || !f && t.hit.hasHitCommonBoundingBoxOfSelectedElements)) {
        this.state.editingLinearElement ? this.setState({ editingLinearElement: null }) : this.setState({ selectedElementIds: Le({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null }), Ge(this.interactiveCanvas, We.AUTO);
        return;
      }
      if (!s.locked && s.type !== "freedraw" && a && this.setState((_) => ({ selectedElementIds: Le({ ..._.selectedElementIds, [a.id]: !0 }, _), showHyperlinkPopup: vn(a) && !a.link ? "editor" : _.showHyperlinkPopup })), (s.type !== "selection" || Dt(this.scene.getNonDeletedElements(), this.state) || !qt(this.state.previousSelectedElementIds, this.state.selectedElementIds)) && this.store.shouldCaptureIncrement(), t.drag.hasOccurred || c || d || o) {
        let _ = this.scene.getSelectedElements(this.state).filter(pe);
        ou(_, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, Br(this.state), ((T = this.state.selectedLinearElement) == null ? void 0 : T.selectedPointsIndices) ?? [], this.state.zoom);
      }
      if (s.type === "laser") {
        this.laserTrails.endPath();
        return;
      }
      !s.locked && s.type !== "freedraw" ? (ra(this.interactiveCanvas), this.setState({ newElement: null, suggestedBindings: [], activeTool: Ct(this.state, { type: "selection" }) })) : this.setState({ newElement: null, suggestedBindings: [] }), f && this.lastPointerUpEvent && this.lastPointerDownEvent && this.lastPointerUpEvent.timeStamp - this.lastPointerDownEvent.timeStamp < 300 && De.pointers.size <= 1 && Hn(f) && this.isIframeLikeElementCenter(f, this.lastPointerUpEvent, t.origin.x, t.origin.y) && this.handleEmbeddableCenterClick(f);
    });
  }
  clearSelection(t) {
    this.setState((n) => ({ selectedElementIds: Le({}, n), activeEmbeddable: null, selectedGroupIds: {}, editingGroupId: n.editingGroupId && t != null && Yo(t, n.editingGroupId) ? n.editingGroupId : null })), this.setState({ selectedElementIds: Le({}, this.state), activeEmbeddable: null, previousSelectedElementIds: this.state.selectedElementIds });
  }
  getTextWysiwygSnappedToCenterPosition(t, n, a, i) {
    if (i) {
      let r = i.x + i.width / 2, l = i.y + i.height / 2, s = cf(i, a, this.scene.getNonDeletedElementsMap());
      if (s && (r = s.x, l = s.y), Math.hypot(t - r, n - l) < jk) {
        let { x: c, y: d } = ca({ sceneX: r, sceneY: l }, a);
        return { viewportX: c, viewportY: d, elementCenterX: r, elementCenterY: l };
      }
    }
  }
  getCanvasOffsets() {
    var t;
    if ((t = this.excalidrawContainerRef) != null && t.current) {
      let n = this.excalidrawContainerRef.current, { left: a, top: i } = n.getBoundingClientRect();
      return { offsetLeft: a, offsetTop: i };
    }
    return { offsetLeft: 0, offsetTop: 0 };
  }
  async updateLanguage() {
    let t = oU.find((n) => n.code === this.props.langCode) || _s;
    await s9(t), this.setAppState({});
  }
}, VY = () => {
  (ve.MODE === En.TEST || ve.DEV) && (window.h = window.h || {}, Object.defineProperties(window.h, { elements: { configurable: !0, get() {
    var e;
    return (e = this.app) == null ? void 0 : e.scene.getElementsIncludingDeleted();
  }, set(e) {
    var t;
    return (t = this.app) == null ? void 0 : t.scene.replaceAllElements(_i(e));
  } }, scene: { configurable: !0, get() {
    var e;
    return (e = this.app) == null ? void 0 : e.scene;
  } } }));
};
VY();
var GY = WY, YY = () => {
  Array.prototype.at || Object.defineProperty(Array.prototype, "at", { value: function(e) {
    if (e = Math.trunc(e) || 0, e < 0 && (e += this.length), !(e < 0 || e >= this.length)) return this[e];
  }, writable: !0, enumerable: !1, configurable: !0 }), Element.prototype.replaceChildren || (Element.prototype.replaceChildren = function(...e) {
    this.innerHTML = "", this.append(...e);
  });
}, ZY = YY, KY = () => h.jsx("svg", { viewBox: "0 0 40 40", fill: "none", xmlns: "http://www.w3.org/2000/svg", className: "ExcalidrawLogo-icon", children: h.jsx("path", { d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z", fill: "currentColor" }) }), qY = () => h.jsxs("svg", { viewBox: "0 0 450 55", xmlns: "http://www.w3.org/2000/svg", fill: "none", className: "ExcalidrawLogo-text", children: [h.jsx("path", { d: "M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z", transform: "translate(-144.023 -51.76)" }), h.jsx("path", { d: "M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z", transform: "translate(-144.023 -51.76)" }), h.jsx("path", { d: "M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z", transform: "translate(-144.023 -51.76)" }), h.jsx("path", { d: "m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z", fill: "currentColor", transform: "translate(-144.023 -51.76)" })] }), JY = ({ style: e, size: t = "small", withText: n }) => h.jsxs("div", { className: `ExcalidrawLogo is-${t}`, style: e, children: [h.jsx(KY, {}), n && h.jsx(qY, {})] }), jU = ({ icon: e, shortcut: t, children: n }) => {
  let a = $t();
  return h.jsxs(h.Fragment, { children: [h.jsx("div", { className: "welcome-screen-menu-item__icon", children: e }), h.jsx("div", { className: "welcome-screen-menu-item__text", children: n }), t && !a.editor.isMobile && h.jsx("div", { className: "welcome-screen-menu-item__shortcut", children: t })] });
};
jU.displayName = "WelcomeScreenMenuItemContent";
var Cc = ({ onSelect: e, children: t, icon: n, shortcut: a, className: i = "", ...r }) => h.jsx("button", { ...r, type: "button", className: `welcome-screen-menu-item ${i}`, onClick: e, children: h.jsx(jU, { icon: n, shortcut: a, children: t }) });
Cc.displayName = "WelcomeScreenMenuItem";
var cx = ({ children: e, href: t, icon: n, shortcut: a, className: i = "", ...r }) => h.jsx("a", { ...r, className: `welcome-screen-menu-item ${i}`, href: t, target: "_blank", rel: "noreferrer", children: h.jsx(jU, { icon: n, shortcut: a, children: e }) });
cx.displayName = "WelcomeScreenMenuItemLink";
var zi = ({ children: e }) => {
  let { WelcomeScreenCenterTunnel: t } = Nn();
  return h.jsx(t.In, { children: h.jsx("div", { className: "welcome-screen-center", children: e || h.jsxs(h.Fragment, { children: [h.jsx(DU, {}), h.jsx(LU, { children: C("welcomeScreen.defaults.center_heading") }), h.jsxs(RU, { children: [h.jsx(NU, {}), h.jsx(PU, {})] })] }) }) });
};
zi.displayName = "Center";
var DU = ({ children: e }) => h.jsx("div", { className: "welcome-screen-center__logo excalifont welcome-screen-decor", children: e || h.jsx(JY, { withText: !0 }) });
DU.displayName = "Logo";
var LU = ({ children: e }) => h.jsx("div", { className: "welcome-screen-center__heading welcome-screen-decor excalifont", children: e });
LU.displayName = "Heading";
var RU = ({ children: e }) => h.jsx("div", { className: "welcome-screen-menu", children: e });
RU.displayName = "Menu";
var PU = () => {
  let e = In();
  return h.jsx(Cc, { onSelect: () => e.executeAction(mU), shortcut: "?", icon: G0, children: C("helpDialog.title") });
};
PU.displayName = "MenuItemHelp";
var NU = () => {
  let e = pn(), t = In();
  return e.viewModeEnabled ? null : h.jsx(Cc, { onSelect: () => t.executeAction(s0), shortcut: an("loadScene"), icon: Y0, children: C("buttons.load") });
};
NU.displayName = "MenuItemLoadScene";
var dx = ({ onSelect: e }) => {
  let { t } = on();
  return h.jsx(Cc, { shortcut: null, onSelect: e, icon: g8, children: t("labels.liveCollaboration") });
};
dx.displayName = "MenuItemLiveCollaborationTrigger";
zi.Logo = DU;
zi.Heading = LU;
zi.Menu = RU;
zi.MenuItem = Cc;
zi.MenuItemLink = cx;
zi.MenuItemHelp = PU;
zi.MenuItemLoadScene = NU;
zi.MenuItemLiveCollaborationTrigger = dx;
var QY = ({ children: e }) => {
  let { WelcomeScreenMenuHintTunnel: t } = Nn();
  return h.jsx(t.In, { children: h.jsxs("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu", children: [aC, h.jsx("div", { className: "welcome-screen-decor-hint__label", children: e || C("welcomeScreen.defaults.menuHint") })] }) });
};
QY.displayName = "MenuHint";
var eZ = ({ children: e }) => {
  let { WelcomeScreenToolbarHintTunnel: t } = Nn();
  return h.jsx(t.In, { children: h.jsxs("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar", children: [h.jsx("div", { className: "welcome-screen-decor-hint__label", children: e || C("welcomeScreen.defaults.toolbarHint") }), rC] }) });
};
eZ.displayName = "ToolbarHint";
var tZ = ({ children: e }) => {
  let { WelcomeScreenHelpHintTunnel: t } = Nn();
  return h.jsx(t.In, { children: h.jsxs("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help", children: [h.jsx("div", { children: e || C("welcomeScreen.defaults.helpHint") }), iC] }) });
};
tZ.displayName = "HelpHint";
cc((e, t, n) => {
  if (ve.DEV || ve.MODE === En.TEST || window != null && window.DEBUG_FRACTIONAL_INDICES) {
    let a = _i(e.map((i) => ({ ...i })));
    cp(a, { shouldThrow: ve.DEV || ve.MODE === En.TEST, includeBoundTextValidation: !0, reconciliationContext: { localElements: t, remoteElements: n } });
  }
}, 1e3 * 60, { leading: !0, trailing: !1 });
ZY();
var nZ = (e) => {
  var V, O, G, ae;
  let { onChange: t, initialData: n, excalidrawAPI: a, isCollaborating: i = !1, onPointerUpdate: r, renderTopRightUI: l, langCode: s = _s.code, viewModeEnabled: c, zenModeEnabled: d, gridModeEnabled: o, libraryReturnUrl: u, theme: f, name: p, renderCustomStats: U, onPaste: m, detectScroll: g = !0, handleKeyboardGlobally: b = !1, onLibraryChange: v, autoFocus: x = !1, generateIdForFile: y, onLinkOpen: E, generateLinkForSelection: S, onPointerDown: w, onPointerUp: M, onScrollChange: I, onDuplicate: T, children: _, validateEmbeddable: A, renderEmbeddable: D, aiEnabled: P, showDeprecatedFonts: N } = e, $ = (V = e.UIOptions) == null ? void 0 : V.canvasActions, R = { ...e.UIOptions, canvasActions: { ...B2.canvasActions, ...$ }, tools: { image: ((G = (O = e.UIOptions) == null ? void 0 : O.tools) == null ? void 0 : G.image) ?? !0 } };
  return $ != null && $.export && (R.canvasActions.export.saveFileToDisk = ((ae = $.export) == null ? void 0 : ae.saveFileToDisk) ?? B2.canvasActions.export.saveFileToDisk), R.canvasActions.toggleTheme === null && typeof f > "u" && (R.canvasActions.toggleTheme = !0), Q(() => {
    (async () => await import("./roundRect-DxA6ocdw.js"))();
    let he = (ce) => {
      typeof ce.scale == "number" && ce.scale !== 1 && ce.preventDefault();
    };
    return document.addEventListener("touchmove", he, { passive: !1 }), () => {
      document.removeEventListener("touchmove", he);
    };
  }, []), h.jsx(XB, { store: fa, children: h.jsx(YB, { langCode: s, theme: f, children: h.jsx(GY, { onChange: t, initialData: n, excalidrawAPI: a, isCollaborating: i, onPointerUpdate: r, renderTopRightUI: l, langCode: s, viewModeEnabled: c, zenModeEnabled: d, gridModeEnabled: o, libraryReturnUrl: u, theme: f, name: p, renderCustomStats: U, UIOptions: R, onPaste: m, detectScroll: g, handleKeyboardGlobally: b, onLibraryChange: v, autoFocus: x, generateIdForFile: y, onLinkOpen: E, generateLinkForSelection: S, onPointerDown: w, onPointerUp: M, onScrollChange: I, onDuplicate: T, validateEmbeddable: A, renderEmbeddable: D, aiEnabled: P !== !1, showDeprecatedFonts: N, children: _ }) }) });
}, aZ = (e, t) => {
  if (e.children !== t.children) return !1;
  let { initialData: n, UIOptions: a = {}, ...i } = e, { initialData: r, UIOptions: l = {}, ...s } = t, c = Object.keys(a), d = Object.keys(l);
  return c.length !== d.length ? !1 : c.every((o) => o === "canvasActions" ? Object.keys(a.canvasActions).every((u) => {
    var f, p, U, m;
    return u === "export" && ((f = a == null ? void 0 : a.canvasActions) != null && f.export) && ((p = l == null ? void 0 : l.canvasActions) != null && p.export) ? a.canvasActions.export.saveFileToDisk === l.canvasActions.export.saveFileToDisk : ((U = a == null ? void 0 : a.canvasActions) == null ? void 0 : U[u]) === ((m = l == null ? void 0 : l.canvasActions) == null ? void 0 : m[u]);
  }) : a[o] === l[o]) && qt(i, s);
}, ux = Y.memo(nZ, aZ);
ux.displayName = "Excalidraw";
const iZ = (e) => {
  var a;
  const t = (a = e == null ? void 0 : e.firstElementChild) == null ? void 0 : a.firstElementChild, n = e.getAttribute("viewBox");
  if (n != null) {
    const i = n.split(" ");
    e.setAttribute("width", i[2]), e.setAttribute("height", i[3]);
  }
  t && t.tagName === "style" && t.remove();
};
function rZ({
  elements: e,
  files: t,
  imageContainerRef: n,
  appState: a,
  rootClassName: i = null
}) {
  const [r, l] = re(null);
  return Q(() => {
    (async () => {
      const c = await Tp({
        appState: a,
        elements: e,
        files: t
      });
      iZ(c), c.setAttribute("width", "100%"), c.setAttribute("height", "100%"), c.setAttribute("display", "block"), l(c);
    })();
  }, [e, t, a]), /* @__PURE__ */ h.jsx(
    "div",
    {
      ref: n,
      className: i ?? "",
      dangerouslySetInnerHTML: { __html: (r == null ? void 0 : r.outerHTML) ?? "" }
    }
  );
}
const lZ = () => {
  const [e, t] = z.useState(null), n = z.useCallback(
    (a) => t(a),
    []
  );
  return [e, n];
};
function sZ({
  closeOnClickOutside: e = !1,
  onSave: t,
  initialElements: n,
  initialAppState: a,
  initialFiles: i,
  isShown: r = !1,
  onDelete: l,
  onClose: s
}) {
  const c = ie(null), [d, o] = lZ(), [u, f] = re(!1), [p, U] = re(n), [m, g] = re(i);
  Q(() => {
    c.current !== null && c.current.focus();
  }, []), Q(() => {
    var w;
    let E = null;
    const S = (M) => {
      const I = M.target;
      c.current !== null && !c.current.contains(I) && e && l();
    };
    return c.current !== null && (E = (w = c.current) == null ? void 0 : w.parentElement, E !== null && (E == null || E.addEventListener("click", S))), () => {
      E !== null && (E == null || E.removeEventListener("click", S));
    };
  }, [e, l]), Mn(() => {
    const E = c.current, S = (w) => {
      w.key === "Escape" && l();
    };
    return E !== null && E.addEventListener("keydown", S), () => {
      E !== null && E.removeEventListener("keydown", S);
    };
  }, [p, m, l]);
  const b = () => {
    if (p.filter((E) => !E.isDeleted).length > 0) {
      const E = d == null ? void 0 : d.getAppState(), S = {
        exportBackground: E == null ? void 0 : E.exportBackground,
        exportScale: E == null ? void 0 : E.exportScale,
        exportWithDarkMode: (E == null ? void 0 : E.theme) === "dark",
        isBindingEnabled: E == null ? void 0 : E.isBindingEnabled,
        isLoading: E == null ? void 0 : E.isLoading,
        name: E == null ? void 0 : E.name,
        theme: E == null ? void 0 : E.theme,
        viewBackgroundColor: E == null ? void 0 : E.viewBackgroundColor,
        viewModeEnabled: E == null ? void 0 : E.viewModeEnabled,
        zenModeEnabled: E == null ? void 0 : E.zenModeEnabled,
        zoom: E == null ? void 0 : E.zoom
      };
      t(p, S, m);
    } else
      l();
  }, v = () => {
    p.filter((E) => !E.isDeleted).length === 0 ? l() : f(!0);
  };
  function x() {
    return /* @__PURE__ */ h.jsxs(
      fx,
      {
        title: "Discard",
        onClose: () => {
          f(!1);
        },
        closeOnClickOutside: !1,
        children: [
          "Are you sure you want to discard the changes?",
          /* @__PURE__ */ h.jsxs("div", { className: "ExcalidrawModal__discardModal", children: [
            /* @__PURE__ */ h.jsx(
              OU,
              {
                onClick: () => {
                  f(!1), s();
                },
                children: "Discard"
              }
            ),
            " ",
            /* @__PURE__ */ h.jsx(
              OU,
              {
                onClick: () => {
                  f(!1);
                },
                children: "Cancel"
              }
            )
          ] })
        ]
      }
    );
  }
  if (r === !1)
    return null;
  const y = (E, S, w) => {
    U(E), g(w);
  };
  return w0(
    /* @__PURE__ */ h.jsx("div", { className: "ExcalidrawModal__overlay", role: "dialog", children: /* @__PURE__ */ h.jsx(
      "div",
      {
        className: "ExcalidrawModal__modal",
        ref: c,
        tabIndex: -1,
        children: /* @__PURE__ */ h.jsxs("div", { className: "ExcalidrawModal__row", children: [
          u && /* @__PURE__ */ h.jsx(x, {}),
          /* @__PURE__ */ h.jsx(
            ux,
            {
              onChange: y,
              excalidrawAPI: o,
              initialData: {
                appState: a || { isLoading: !1 },
                elements: n,
                files: i
              }
            }
          ),
          /* @__PURE__ */ h.jsxs("div", { className: "ExcalidrawModal__actions", children: [
            /* @__PURE__ */ h.jsx("button", { className: "action-button", onClick: v, children: "Discard" }),
            /* @__PURE__ */ h.jsx("button", { className: "action-button", onClick: b, children: "Save" })
          ] })
        ] })
      }
    ) }),
    document.body
  );
}
function oZ({
  nodeKey: e,
  data: t
}) {
  const [n] = px(), [a, i] = re(
    t === "[]" && n.isEditable()
  ), r = ie(null), l = ie(null), s = ie(null), [c, d, o] = Ux(e), [u, f] = re(!1), p = nt(() => n.isEditable(), []), U = Te(
    (w) => (c && mx(gx()) && (w.preventDefault(), n.update(() => {
      const M = Tc(e);
      if (_c(M))
        return M.remove(), !0;
    })), !1),
    [n, c, e]
  );
  Q(() => {
    p && (a ? n.setEditable(!1) : n.setEditable(!0));
  }, [a, n, p]), Q(() => bx(
    n.registerCommand(
      yx,
      (w) => {
        const M = l.current, I = w.target;
        return u ? !0 : M !== null && M.contains(I) ? (w.shiftKey || o(), d(!c), w.detail > 1 && i(!0), !0) : !1;
      },
      _h
    ),
    n.registerCommand(
      xx,
      U,
      _h
    ),
    n.registerCommand(
      vx,
      U,
      _h
    )
  ), [o, n, c, u, U, d]);
  const m = Te(() => (i(!1), n.update(() => {
    const w = Tc(e);
    _c(w) && w.remove();
  })), [n, e]), g = (w, M, I) => {
    if (n.isEditable())
      return n.update(() => {
        const T = Tc(e);
        _c(T) && (w.length > 0 || Object.keys(I).length > 0 ? T.setData(
          JSON.stringify({
            appState: M,
            elements: w,
            files: I
          })
        ) : T.remove());
      });
  }, b = () => {
    f(!0);
  }, v = (w, M) => {
    setTimeout(() => {
      f(!1);
    }, 200), n.update(() => {
      const I = Tc(e);
      _c(I) && (I.setWidth(w), I.setHeight(M));
    });
  }, x = Te(() => {
    i(!0);
  }, []), {
    elements: y = [],
    files: E = {},
    appState: S = {}
  } = nt(() => JSON.parse(t), [t]);
  return /* @__PURE__ */ h.jsxs(h.Fragment, { children: [
    /* @__PURE__ */ h.jsx(
      sZ,
      {
        initialElements: y,
        initialFiles: E,
        initialAppState: S,
        isShown: a,
        onDelete: m,
        onClose: () => i(!1),
        onSave: (w, M, I) => {
          n.setEditable(!0), g(w, M, I), i(!1);
        },
        closeOnClickOutside: !1
      }
    ),
    y.length > 0 && /* @__PURE__ */ h.jsxs(
      "button",
      {
        ref: l,
        className: `excalidraw-button ${c ? "selected" : ""}`,
        children: [
          /* @__PURE__ */ h.jsx(
            rZ,
            {
              imageContainerRef: r,
              className: "image",
              elements: y,
              files: E,
              appState: S
            }
          ),
          c && /* @__PURE__ */ h.jsx(
            "div",
            {
              className: "image-edit-button",
              role: "button",
              tabIndex: 0,
              onMouseDown: (w) => w.preventDefault(),
              onClick: x
            }
          ),
          (c || u) && /* @__PURE__ */ h.jsx(
            kx,
            {
              buttonRef: s,
              showCaption: !0,
              setShowCaption: () => null,
              imageRef: r,
              editor: n,
              onResizeStart: b,
              onResizeEnd: v,
              captionsEnabled: !0
            }
          )
        ]
      }
    )
  ] });
}
const SZ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: oZ
}, Symbol.toStringTag, { value: "Module" }));
export {
  aO as A,
  D3 as B,
  KN as C,
  rO as D,
  JN as E,
  tO as F,
  gZ as G,
  fZ as H,
  lO as I,
  Tb as J,
  SZ as K,
  eO as L,
  sO as N,
  nO as P,
  cO as R,
  ZN as S,
  QN as T,
  IN as X,
  iO as _,
  AN as a,
  BN as b,
  NN as c,
  PN as d,
  hO as e,
  YN as f,
  HN as g,
  zN as h,
  jN as i,
  dO as j,
  VN as k,
  LN as l,
  $N as m,
  DN as n,
  uO as o,
  ON as p,
  bZ as q,
  _N as r,
  RN as s,
  TN as t,
  FN as u,
  GN as v,
  WN as w,
  qN as x,
  XN as y,
  oO as z
};
