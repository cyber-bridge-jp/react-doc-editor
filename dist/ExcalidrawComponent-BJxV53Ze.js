import { jsx as p, jsxs as _, Fragment as le } from "react/jsx-runtime";
import { aa as ml, af as wi, aL as vy, B as HU, u as yy, b as wy, T as Ey, M as xy, S as _c, aM as Ac, L as Sy, k as ky, I as Rf, w as My, r as Cy } from "./index-C14StzBP.js";
import * as H from "react";
import Z, { useCallback as _e, useReducer as P5, useEffect as Q, useDebugValue as Iy, useContext as un, createContext as Ja, useRef as re, useLayoutEffect as _n, useState as oe, useMemo as $e, createElement as Ke, forwardRef as It, Children as tn, isValidElement as qn, cloneElement as gl, Fragment as Ru, version as Ty, useImperativeHandle as N5, memo as So, useDeferredValue as _y } from "react";
import { I as Ay } from "./ImageResizer-C8Cf15hU.js";
import * as O5 from "react-dom";
import Dy, { flushSync as za, unstable_batchedUpdates as k0, createPortal as M0 } from "react-dom";
var we = { VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/", VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/", VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com", VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries", VITE_APP_PLUS_LP: "https://plus.excalidraw.com", VITE_APP_PLUS_APP: "https://app.excalidraw.com", VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com", VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com", VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}', VITE_APP_ENABLE_TRACKING: "false", VITE_APP_PLUS_EXPORT_PUBLIC_KEY: `MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`, VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX: "false", VITE_APP_COLLAPSE_OVERLAY: "false", VITE_APP_ENABLE_ESLINT: "false", PKG_NAME: "@excalidraw/excalidraw", PKG_VERSION: "0.18.0", PROD: !0 }, $5 = Object.defineProperty, Ly = (e, t, n) => t in e ? $5(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, RZ = ((e) => typeof require < "u" ? require : typeof Proxy < "u" ? new Proxy(e, { get: (t, n) => (typeof require < "u" ? require : t)[n] }) : e)(function(e) {
  if (typeof require < "u") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + e + '" is not supported');
}), Ry = (e) => (t) => {
  var n = e[t];
  if (n) return n();
  throw new Error("Module not found in bundle: " + t);
}, z5 = (e, t) => {
  for (var n in t) $5(e, n, { get: t[n], enumerable: !0 });
}, L = (e, t, n) => (Ly(e, typeof t != "symbol" ? t + "" : t, n), n), C0 = {};
(function(e) {
  (function(t) {
    t(typeof DO_NOT_EXPORT_CRC > "u" ? e : {});
  })(function(t) {
    t.version = "0.3.0";
    function n() {
      for (var d = 0, s = new Array(256), u = 0; u != 256; ++u)
        d = u, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, d = d & 1 ? -306674912 ^ d >>> 1 : d >>> 1, s[u] = d;
      return typeof Int32Array < "u" ? new Int32Array(s) : s;
    }
    var a = n(), i = typeof Buffer < "u";
    function r(d) {
      if (d.length > 32768 && i) return o(new Buffer(d));
      for (var s = -1, u = d.length - 1, f = 0; f < u; )
        s = a[(s ^ d.charCodeAt(f++)) & 255] ^ s >>> 8, s = a[(s ^ d.charCodeAt(f++)) & 255] ^ s >>> 8;
      return f === u && (s = s >>> 8 ^ a[(s ^ d.charCodeAt(f)) & 255]), s ^ -1;
    }
    function l(d) {
      if (d.length > 1e4) return o(d);
      for (var s = -1, u = 0, f = d.length - 3; u < f; )
        s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255];
      for (; u < f + 3; ) s = s >>> 8 ^ a[(s ^ d[u++]) & 255];
      return s ^ -1;
    }
    function o(d) {
      for (var s = -1, u = 0, f = d.length - 7; u < f; )
        s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255], s = s >>> 8 ^ a[(s ^ d[u++]) & 255];
      for (; u < f + 7; ) s = s >>> 8 ^ a[(s ^ d[u++]) & 255];
      return s ^ -1;
    }
    function c(d) {
      for (var s = -1, u = 0, f = d.length, h, U; u < f; )
        h = d.charCodeAt(u++), h < 128 ? s = s >>> 8 ^ a[(s ^ h) & 255] : h < 2048 ? (s = s >>> 8 ^ a[(s ^ (192 | h >> 6 & 31)) & 255], s = s >>> 8 ^ a[(s ^ (128 | h & 63)) & 255]) : h >= 55296 && h < 57344 ? (h = (h & 1023) + 64, U = d.charCodeAt(u++) & 1023, s = s >>> 8 ^ a[(s ^ (240 | h >> 8 & 7)) & 255], s = s >>> 8 ^ a[(s ^ (128 | h >> 2 & 63)) & 255], s = s >>> 8 ^ a[(s ^ (128 | U >> 6 & 15 | h & 3)) & 255], s = s >>> 8 ^ a[(s ^ (128 | U & 63)) & 255]) : (s = s >>> 8 ^ a[(s ^ (224 | h >> 12 & 15)) & 255], s = s >>> 8 ^ a[(s ^ (128 | h >> 6 & 63)) & 255], s = s >>> 8 ^ a[(s ^ (128 | h & 63)) & 255]);
      return s ^ -1;
    }
    t.table = a, t.bstr = r, t.buf = l, t.str = c;
  });
})(C0);
var Py = C0, Ny = zy, Pa = new Uint8Array(4), Oy = new Int32Array(Pa.buffer), $y = new Uint32Array(Pa.buffer);
function zy(e) {
  if (e[0] !== 137) throw new Error("Invalid .png file header");
  if (e[1] !== 80) throw new Error("Invalid .png file header");
  if (e[2] !== 78) throw new Error("Invalid .png file header");
  if (e[3] !== 71) throw new Error("Invalid .png file header");
  if (e[4] !== 13) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  if (e[5] !== 10) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  if (e[6] !== 26) throw new Error("Invalid .png file header");
  if (e[7] !== 10) throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
  for (var t = !1, n = [], a = 8; a < e.length; ) {
    Pa[3] = e[a++], Pa[2] = e[a++], Pa[1] = e[a++], Pa[0] = e[a++];
    var i = $y[0] + 4, r = new Uint8Array(i);
    r[0] = e[a++], r[1] = e[a++], r[2] = e[a++], r[3] = e[a++];
    var l = String.fromCharCode(r[0]) + String.fromCharCode(r[1]) + String.fromCharCode(r[2]) + String.fromCharCode(r[3]);
    if (!n.length && l !== "IHDR")
      throw new Error("IHDR header missing");
    if (l === "IEND") {
      t = !0, n.push({
        name: l,
        data: new Uint8Array(0)
      });
      break;
    }
    for (var o = 4; o < i; o++)
      r[o] = e[a++];
    Pa[3] = e[a++], Pa[2] = e[a++], Pa[1] = e[a++], Pa[0] = e[a++];
    var c = Oy[0], d = Py.buf(r);
    if (d !== c)
      throw new Error(
        "CRC values for " + l + " header do not match, PNG file is likely corrupted"
      );
    var s = new Uint8Array(r.buffer.slice(4));
    n.push({
      name: l,
      data: s
    });
  }
  if (!t)
    throw new Error(".png file ended prematurely: no IEND header was found");
  return n;
}
const F5 = /* @__PURE__ */ ml(Ny);
var Pu = {}, Fy = By;
function By(e, t) {
  if (e = String(e), t = String(t), !/^[\x00-\xFF]+$/.test(e) || !/^[\x00-\xFF]+$/.test(t))
    throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");
  if (e.length >= 80)
    throw new Error('Keyword "' + e + '" is longer than the 79-character limit imposed by the PNG specification');
  for (var n = e.length + t.length + 1, a = new Uint8Array(n), i = 0, r, l = 0; l < e.length; l++) {
    if (!(r = e.charCodeAt(l)))
      throw new Error("0x00 character is not permitted in tEXt keywords");
    a[i++] = r;
  }
  a[i++] = 0;
  for (var o = 0; o < t.length; o++) {
    if (!(r = t.charCodeAt(o)))
      throw new Error("0x00 character is not permitted in tEXt content");
    a[i++] = r;
  }
  return {
    name: "tEXt",
    data: a
  };
}
var Hy = Xy;
function Xy(e) {
  e.data && e.name && (e = e.data);
  for (var t = !0, n = "", a = "", i = 0; i < e.length; i++) {
    var r = e[i];
    if (t)
      r ? a += String.fromCharCode(r) : t = !1;
    else if (r)
      n += String.fromCharCode(r);
    else
      throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");
  }
  return {
    keyword: a,
    text: n
  };
}
Pu.encode = Fy;
Pu.decode = Hy;
var Wy = function(e, t, n) {
  var a = [], i = e.length;
  if (i === 0) return a;
  var r = t < 0 ? Math.max(0, t + i) : t || 0;
  for (n !== void 0 && (i = n < 0 ? n + i : n); i-- > r; )
    a[i - r] = e[i];
  return a;
}, Vy = Wy, Gy = C0, jy = Ky, Na = new Uint8Array(4), Yy = new Int32Array(Na.buffer), Zy = new Uint32Array(Na.buffer);
function Ky(e) {
  var t = 8, n = t, a;
  for (a = 0; a < e.length; a++)
    t += e[a].data.length, t += 12;
  var i = new Uint8Array(t);
  for (i[0] = 137, i[1] = 80, i[2] = 78, i[3] = 71, i[4] = 13, i[5] = 10, i[6] = 26, i[7] = 10, a = 0; a < e.length; a++) {
    var r = e[a], l = r.name, o = r.data, c = o.length, d = [
      l.charCodeAt(0),
      l.charCodeAt(1),
      l.charCodeAt(2),
      l.charCodeAt(3)
    ];
    Zy[0] = c, i[n++] = Na[3], i[n++] = Na[2], i[n++] = Na[1], i[n++] = Na[0], i[n++] = d[0], i[n++] = d[1], i[n++] = d[2], i[n++] = d[3];
    for (var s = 0; s < c; )
      i[n++] = o[s++];
    var u = d.concat(Vy(o)), f = Gy.buf(u);
    Yy[0] = f, i[n++] = Na[3], i[n++] = Na[2], i[n++] = Na[1], i[n++] = Na[0];
  }
  return i;
}
const qy = /* @__PURE__ */ ml(jy);
/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */
const Jy = 4, XU = 0, WU = 1, Qy = 2;
function ko(e) {
  let t = e.length;
  for (; --t >= 0; )
    e[t] = 0;
}
const ew = 0, B5 = 1, tw = 2, nw = 3, aw = 258, I0 = 29, sc = 256, As = sc + 1 + I0, Zl = 30, T0 = 19, H5 = 2 * As + 1, Br = 15, Pf = 16, iw = 7, _0 = 256, X5 = 16, W5 = 17, V5 = 18, e1 = (
  /* extra bits for each length code */
  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0])
), sd = (
  /* extra bits for each distance code */
  new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13])
), rw = (
  /* extra bits for each bit length code */
  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7])
), G5 = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), lw = 512, gi = new Array((As + 2) * 2);
ko(gi);
const ps = new Array(Zl * 2);
ko(ps);
const Ds = new Array(lw);
ko(Ds);
const Ls = new Array(aw - nw + 1);
ko(Ls);
const A0 = new Array(I0);
ko(A0);
const zd = new Array(Zl);
ko(zd);
function Nf(e, t, n, a, i) {
  this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = a, this.max_length = i, this.has_stree = e && e.length;
}
let j5, Y5, Z5;
function Of(e, t) {
  this.dyn_tree = e, this.max_code = 0, this.stat_desc = t;
}
const K5 = (e) => e < 256 ? Ds[e] : Ds[256 + (e >>> 7)], Rs = (e, t) => {
  e.pending_buf[e.pending++] = t & 255, e.pending_buf[e.pending++] = t >>> 8 & 255;
}, Mn = (e, t, n) => {
  e.bi_valid > Pf - n ? (e.bi_buf |= t << e.bi_valid & 65535, Rs(e, e.bi_buf), e.bi_buf = t >> Pf - e.bi_valid, e.bi_valid += n - Pf) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n);
}, Wa = (e, t, n) => {
  Mn(
    e,
    n[t * 2],
    n[t * 2 + 1]
    /*.Len*/
  );
}, q5 = (e, t) => {
  let n = 0;
  do
    n |= e & 1, e >>>= 1, n <<= 1;
  while (--t > 0);
  return n >>> 1;
}, ow = (e) => {
  e.bi_valid === 16 ? (Rs(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = e.bi_buf & 255, e.bi_buf >>= 8, e.bi_valid -= 8);
}, sw = (e, t) => {
  const n = t.dyn_tree, a = t.max_code, i = t.stat_desc.static_tree, r = t.stat_desc.has_stree, l = t.stat_desc.extra_bits, o = t.stat_desc.extra_base, c = t.stat_desc.max_length;
  let d, s, u, f, h, U, m = 0;
  for (f = 0; f <= Br; f++)
    e.bl_count[f] = 0;
  for (n[e.heap[e.heap_max] * 2 + 1] = 0, d = e.heap_max + 1; d < H5; d++)
    s = e.heap[d], f = n[n[s * 2 + 1] * 2 + 1] + 1, f > c && (f = c, m++), n[s * 2 + 1] = f, !(s > a) && (e.bl_count[f]++, h = 0, s >= o && (h = l[s - o]), U = n[s * 2], e.opt_len += U * (f + h), r && (e.static_len += U * (i[s * 2 + 1] + h)));
  if (m !== 0) {
    do {
      for (f = c - 1; e.bl_count[f] === 0; )
        f--;
      e.bl_count[f]--, e.bl_count[f + 1] += 2, e.bl_count[c]--, m -= 2;
    } while (m > 0);
    for (f = c; f !== 0; f--)
      for (s = e.bl_count[f]; s !== 0; )
        u = e.heap[--d], !(u > a) && (n[u * 2 + 1] !== f && (e.opt_len += (f - n[u * 2 + 1]) * n[u * 2], n[u * 2 + 1] = f), s--);
  }
}, J5 = (e, t, n) => {
  const a = new Array(Br + 1);
  let i = 0, r, l;
  for (r = 1; r <= Br; r++)
    a[r] = i = i + n[r - 1] << 1;
  for (l = 0; l <= t; l++) {
    let o = e[l * 2 + 1];
    o !== 0 && (e[l * 2] = q5(a[o]++, o));
  }
}, cw = () => {
  let e, t, n, a, i;
  const r = new Array(Br + 1);
  for (n = 0, a = 0; a < I0 - 1; a++)
    for (A0[a] = n, e = 0; e < 1 << e1[a]; e++)
      Ls[n++] = a;
  for (Ls[n - 1] = a, i = 0, a = 0; a < 16; a++)
    for (zd[a] = i, e = 0; e < 1 << sd[a]; e++)
      Ds[i++] = a;
  for (i >>= 7; a < Zl; a++)
    for (zd[a] = i << 7, e = 0; e < 1 << sd[a] - 7; e++)
      Ds[256 + i++] = a;
  for (t = 0; t <= Br; t++)
    r[t] = 0;
  for (e = 0; e <= 143; )
    gi[e * 2 + 1] = 8, e++, r[8]++;
  for (; e <= 255; )
    gi[e * 2 + 1] = 9, e++, r[9]++;
  for (; e <= 279; )
    gi[e * 2 + 1] = 7, e++, r[7]++;
  for (; e <= 287; )
    gi[e * 2 + 1] = 8, e++, r[8]++;
  for (J5(gi, As + 1, r), e = 0; e < Zl; e++)
    ps[e * 2 + 1] = 5, ps[e * 2] = q5(e, 5);
  j5 = new Nf(gi, e1, sc + 1, As, Br), Y5 = new Nf(ps, sd, 0, Zl, Br), Z5 = new Nf(new Array(0), rw, 0, T0, iw);
}, Q5 = (e) => {
  let t;
  for (t = 0; t < As; t++)
    e.dyn_ltree[t * 2] = 0;
  for (t = 0; t < Zl; t++)
    e.dyn_dtree[t * 2] = 0;
  for (t = 0; t < T0; t++)
    e.bl_tree[t * 2] = 0;
  e.dyn_ltree[_0 * 2] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0;
}, eb = (e) => {
  e.bi_valid > 8 ? Rs(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0;
}, dw = (e, t, n, a) => {
  eb(e), Rs(e, n), Rs(e, ~n), e.pending_buf.set(e.window.subarray(t, t + n), e.pending), e.pending += n;
}, VU = (e, t, n, a) => {
  const i = t * 2, r = n * 2;
  return e[i] < e[r] || e[i] === e[r] && a[t] <= a[n];
}, $f = (e, t, n) => {
  const a = e.heap[n];
  let i = n << 1;
  for (; i <= e.heap_len && (i < e.heap_len && VU(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !VU(t, a, e.heap[i], e.depth)); )
    e.heap[n] = e.heap[i], n = i, i <<= 1;
  e.heap[n] = a;
}, GU = (e, t, n) => {
  let a, i, r = 0, l, o;
  if (e.last_lit !== 0)
    do
      a = e.pending_buf[e.d_buf + r * 2] << 8 | e.pending_buf[e.d_buf + r * 2 + 1], i = e.pending_buf[e.l_buf + r], r++, a === 0 ? Wa(e, i, t) : (l = Ls[i], Wa(e, l + sc + 1, t), o = e1[l], o !== 0 && (i -= A0[l], Mn(e, i, o)), a--, l = K5(a), Wa(e, l, n), o = sd[l], o !== 0 && (a -= zd[l], Mn(e, a, o)));
    while (r < e.last_lit);
  Wa(e, _0, t);
}, t1 = (e, t) => {
  const n = t.dyn_tree, a = t.stat_desc.static_tree, i = t.stat_desc.has_stree, r = t.stat_desc.elems;
  let l, o, c = -1, d;
  for (e.heap_len = 0, e.heap_max = H5, l = 0; l < r; l++)
    n[l * 2] !== 0 ? (e.heap[++e.heap_len] = c = l, e.depth[l] = 0) : n[l * 2 + 1] = 0;
  for (; e.heap_len < 2; )
    d = e.heap[++e.heap_len] = c < 2 ? ++c : 0, n[d * 2] = 1, e.depth[d] = 0, e.opt_len--, i && (e.static_len -= a[d * 2 + 1]);
  for (t.max_code = c, l = e.heap_len >> 1; l >= 1; l--)
    $f(e, n, l);
  d = r;
  do
    l = e.heap[
      1
      /*SMALLEST*/
    ], e.heap[
      1
      /*SMALLEST*/
    ] = e.heap[e.heap_len--], $f(
      e,
      n,
      1
      /*SMALLEST*/
    ), o = e.heap[
      1
      /*SMALLEST*/
    ], e.heap[--e.heap_max] = l, e.heap[--e.heap_max] = o, n[d * 2] = n[l * 2] + n[o * 2], e.depth[d] = (e.depth[l] >= e.depth[o] ? e.depth[l] : e.depth[o]) + 1, n[l * 2 + 1] = n[o * 2 + 1] = d, e.heap[
      1
      /*SMALLEST*/
    ] = d++, $f(
      e,
      n,
      1
      /*SMALLEST*/
    );
  while (e.heap_len >= 2);
  e.heap[--e.heap_max] = e.heap[
    1
    /*SMALLEST*/
  ], sw(e, t), J5(n, c, e.bl_count);
}, jU = (e, t, n) => {
  let a, i = -1, r, l = t[0 * 2 + 1], o = 0, c = 7, d = 4;
  for (l === 0 && (c = 138, d = 3), t[(n + 1) * 2 + 1] = 65535, a = 0; a <= n; a++)
    r = l, l = t[(a + 1) * 2 + 1], !(++o < c && r === l) && (o < d ? e.bl_tree[r * 2] += o : r !== 0 ? (r !== i && e.bl_tree[r * 2]++, e.bl_tree[X5 * 2]++) : o <= 10 ? e.bl_tree[W5 * 2]++ : e.bl_tree[V5 * 2]++, o = 0, i = r, l === 0 ? (c = 138, d = 3) : r === l ? (c = 6, d = 3) : (c = 7, d = 4));
}, YU = (e, t, n) => {
  let a, i = -1, r, l = t[0 * 2 + 1], o = 0, c = 7, d = 4;
  for (l === 0 && (c = 138, d = 3), a = 0; a <= n; a++)
    if (r = l, l = t[(a + 1) * 2 + 1], !(++o < c && r === l)) {
      if (o < d)
        do
          Wa(e, r, e.bl_tree);
        while (--o !== 0);
      else r !== 0 ? (r !== i && (Wa(e, r, e.bl_tree), o--), Wa(e, X5, e.bl_tree), Mn(e, o - 3, 2)) : o <= 10 ? (Wa(e, W5, e.bl_tree), Mn(e, o - 3, 3)) : (Wa(e, V5, e.bl_tree), Mn(e, o - 11, 7));
      o = 0, i = r, l === 0 ? (c = 138, d = 3) : r === l ? (c = 6, d = 3) : (c = 7, d = 4);
    }
}, uw = (e) => {
  let t;
  for (jU(e, e.dyn_ltree, e.l_desc.max_code), jU(e, e.dyn_dtree, e.d_desc.max_code), t1(e, e.bl_desc), t = T0 - 1; t >= 3 && e.bl_tree[G5[t] * 2 + 1] === 0; t--)
    ;
  return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t;
}, fw = (e, t, n, a) => {
  let i;
  for (Mn(e, t - 257, 5), Mn(e, n - 1, 5), Mn(e, a - 4, 4), i = 0; i < a; i++)
    Mn(e, e.bl_tree[G5[i] * 2 + 1], 3);
  YU(e, e.dyn_ltree, t - 1), YU(e, e.dyn_dtree, n - 1);
}, hw = (e) => {
  let t = 4093624447, n;
  for (n = 0; n <= 31; n++, t >>>= 1)
    if (t & 1 && e.dyn_ltree[n * 2] !== 0)
      return XU;
  if (e.dyn_ltree[9 * 2] !== 0 || e.dyn_ltree[10 * 2] !== 0 || e.dyn_ltree[13 * 2] !== 0)
    return WU;
  for (n = 32; n < sc; n++)
    if (e.dyn_ltree[n * 2] !== 0)
      return WU;
  return XU;
};
let ZU = !1;
const pw = (e) => {
  ZU || (cw(), ZU = !0), e.l_desc = new Of(e.dyn_ltree, j5), e.d_desc = new Of(e.dyn_dtree, Y5), e.bl_desc = new Of(e.bl_tree, Z5), e.bi_buf = 0, e.bi_valid = 0, Q5(e);
}, tb = (e, t, n, a) => {
  Mn(e, (ew << 1) + (a ? 1 : 0), 3), dw(e, t, n);
}, Uw = (e) => {
  Mn(e, B5 << 1, 3), Wa(e, _0, gi), ow(e);
}, mw = (e, t, n, a) => {
  let i, r, l = 0;
  e.level > 0 ? (e.strm.data_type === Qy && (e.strm.data_type = hw(e)), t1(e, e.l_desc), t1(e, e.d_desc), l = uw(e), i = e.opt_len + 3 + 7 >>> 3, r = e.static_len + 3 + 7 >>> 3, r <= i && (i = r)) : i = r = n + 5, n + 4 <= i && t !== -1 ? tb(e, t, n, a) : e.strategy === Jy || r === i ? (Mn(e, (B5 << 1) + (a ? 1 : 0), 3), GU(e, gi, ps)) : (Mn(e, (tw << 1) + (a ? 1 : 0), 3), fw(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, l + 1), GU(e, e.dyn_ltree, e.dyn_dtree)), Q5(e), a && eb(e);
}, gw = (e, t, n) => (e.pending_buf[e.d_buf + e.last_lit * 2] = t >>> 8 & 255, e.pending_buf[e.d_buf + e.last_lit * 2 + 1] = t & 255, e.pending_buf[e.l_buf + e.last_lit] = n & 255, e.last_lit++, t === 0 ? e.dyn_ltree[n * 2]++ : (e.matches++, t--, e.dyn_ltree[(Ls[n] + sc + 1) * 2]++, e.dyn_dtree[K5(t) * 2]++), e.last_lit === e.lit_bufsize - 1);
var bw = pw, vw = tb, yw = mw, ww = gw, Ew = Uw, xw = {
  _tr_init: bw,
  _tr_stored_block: vw,
  _tr_flush_block: yw,
  _tr_tally: ww,
  _tr_align: Ew
};
const Sw = (e, t, n, a) => {
  let i = e & 65535 | 0, r = e >>> 16 & 65535 | 0, l = 0;
  for (; n !== 0; ) {
    l = n > 2e3 ? 2e3 : n, n -= l;
    do
      i = i + t[a++] | 0, r = r + i | 0;
    while (--l);
    i %= 65521, r %= 65521;
  }
  return i | r << 16 | 0;
};
var Ps = Sw;
const kw = () => {
  let e, t = [];
  for (var n = 0; n < 256; n++) {
    e = n;
    for (var a = 0; a < 8; a++)
      e = e & 1 ? 3988292384 ^ e >>> 1 : e >>> 1;
    t[n] = e;
  }
  return t;
}, Mw = new Uint32Array(kw()), Cw = (e, t, n, a) => {
  const i = Mw, r = a + n;
  e ^= -1;
  for (let l = a; l < r; l++)
    e = e >>> 8 ^ i[(e ^ t[l]) & 255];
  return e ^ -1;
};
var Vt = Cw, el = {
  2: "need dictionary",
  /* Z_NEED_DICT       2  */
  1: "stream end",
  /* Z_STREAM_END      1  */
  0: "",
  /* Z_OK              0  */
  "-1": "file error",
  /* Z_ERRNO         (-1) */
  "-2": "stream error",
  /* Z_STREAM_ERROR  (-2) */
  "-3": "data error",
  /* Z_DATA_ERROR    (-3) */
  "-4": "insufficient memory",
  /* Z_MEM_ERROR     (-4) */
  "-5": "buffer error",
  /* Z_BUF_ERROR     (-5) */
  "-6": "incompatible version"
  /* Z_VERSION_ERROR (-6) */
}, Nu = {
  /* Allowed flush values; see deflate() and inflate() below for details */
  Z_NO_FLUSH: 0,
  Z_PARTIAL_FLUSH: 1,
  Z_SYNC_FLUSH: 2,
  Z_FULL_FLUSH: 3,
  Z_FINISH: 4,
  Z_BLOCK: 5,
  Z_TREES: 6,
  /* Return codes for the compression/decompression functions. Negative values
  * are errors, positive values are used for special but normal events.
  */
  Z_OK: 0,
  Z_STREAM_END: 1,
  Z_NEED_DICT: 2,
  Z_STREAM_ERROR: -2,
  Z_DATA_ERROR: -3,
  Z_MEM_ERROR: -4,
  Z_BUF_ERROR: -5,
  Z_DEFAULT_COMPRESSION: -1,
  Z_FILTERED: 1,
  Z_HUFFMAN_ONLY: 2,
  Z_RLE: 3,
  Z_FIXED: 4,
  Z_DEFAULT_STRATEGY: 0,
  //Z_ASCII:                1, // = Z_TEXT (deprecated)
  Z_UNKNOWN: 2,
  /* The deflate compression method */
  Z_DEFLATED: 8
  //Z_NULL:                 null // Use -1 or null inline, depending on var type
};
const { _tr_init: Iw, _tr_stored_block: Tw, _tr_flush_block: _w, _tr_tally: sr, _tr_align: Aw } = xw, {
  Z_NO_FLUSH: bl,
  Z_PARTIAL_FLUSH: Dw,
  Z_FULL_FLUSH: Lw,
  Z_FINISH: cr,
  Z_BLOCK: KU,
  Z_OK: Va,
  Z_STREAM_END: qU,
  Z_STREAM_ERROR: Yn,
  Z_DATA_ERROR: Rw,
  Z_BUF_ERROR: zf,
  Z_DEFAULT_COMPRESSION: Pw,
  Z_FILTERED: Nw,
  Z_HUFFMAN_ONLY: Dc,
  Z_RLE: Ow,
  Z_FIXED: $w,
  Z_DEFAULT_STRATEGY: zw,
  Z_UNKNOWN: Fw,
  Z_DEFLATED: Ou
} = Nu, Bw = 9, Hw = 15, Xw = 8, Ww = 29, Vw = 256, n1 = Vw + 1 + Ww, Gw = 30, jw = 19, Yw = 2 * n1 + 1, Zw = 15, Ae = 3, ar = 258, ga = ar + Ae + 1, Kw = 32, $u = 42, a1 = 69, cd = 73, dd = 91, ud = 103, Hr = 113, ts = 666, Ft = 1, cc = 2, tl = 3, Mo = 4, qw = 3, ir = (e, t) => (e.msg = el[t], t), JU = (e) => (e << 1) - (e > 4 ? 9 : 0), nr = (e) => {
  let t = e.length;
  for (; --t >= 0; )
    e[t] = 0;
};
let Jw = (e, t, n) => (t << e.hash_shift ^ n) & e.hash_mask, dr = Jw;
const Zi = (e) => {
  const t = e.state;
  let n = t.pending;
  n > e.avail_out && (n = e.avail_out), n !== 0 && (e.output.set(t.pending_buf.subarray(t.pending_out, t.pending_out + n), e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, t.pending === 0 && (t.pending_out = 0));
}, Qt = (e, t) => {
  _w(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, Zi(e.strm);
}, He = (e, t) => {
  e.pending_buf[e.pending++] = t;
}, Oo = (e, t) => {
  e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = t & 255;
}, Qw = (e, t, n, a) => {
  let i = e.avail_in;
  return i > a && (i = a), i === 0 ? 0 : (e.avail_in -= i, t.set(e.input.subarray(e.next_in, e.next_in + i), n), e.state.wrap === 1 ? e.adler = Ps(e.adler, t, i, n) : e.state.wrap === 2 && (e.adler = Vt(e.adler, t, i, n)), e.next_in += i, e.total_in += i, i);
}, nb = (e, t) => {
  let n = e.max_chain_length, a = e.strstart, i, r, l = e.prev_length, o = e.nice_match;
  const c = e.strstart > e.w_size - ga ? e.strstart - (e.w_size - ga) : 0, d = e.window, s = e.w_mask, u = e.prev, f = e.strstart + ar;
  let h = d[a + l - 1], U = d[a + l];
  e.prev_length >= e.good_match && (n >>= 2), o > e.lookahead && (o = e.lookahead);
  do
    if (i = t, !(d[i + l] !== U || d[i + l - 1] !== h || d[i] !== d[a] || d[++i] !== d[a + 1])) {
      a += 2, i++;
      do
        ;
      while (d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && d[++a] === d[++i] && a < f);
      if (r = ar - (f - a), a = f - ar, r > l) {
        if (e.match_start = t, l = r, r >= o)
          break;
        h = d[a + l - 1], U = d[a + l];
      }
    }
  while ((t = u[t & s]) > c && --n !== 0);
  return l <= e.lookahead ? l : e.lookahead;
}, nl = (e) => {
  const t = e.w_size;
  let n, a, i, r, l;
  do {
    if (r = e.window_size - e.lookahead - e.strstart, e.strstart >= t + (t - ga)) {
      e.window.set(e.window.subarray(t, t + t), 0), e.match_start -= t, e.strstart -= t, e.block_start -= t, a = e.hash_size, n = a;
      do
        i = e.head[--n], e.head[n] = i >= t ? i - t : 0;
      while (--a);
      a = t, n = a;
      do
        i = e.prev[--n], e.prev[n] = i >= t ? i - t : 0;
      while (--a);
      r += t;
    }
    if (e.strm.avail_in === 0)
      break;
    if (a = Qw(e.strm, e.window, e.strstart + e.lookahead, r), e.lookahead += a, e.lookahead + e.insert >= Ae)
      for (l = e.strstart - e.insert, e.ins_h = e.window[l], e.ins_h = dr(e, e.ins_h, e.window[l + 1]); e.insert && (e.ins_h = dr(e, e.ins_h, e.window[l + Ae - 1]), e.prev[l & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = l, l++, e.insert--, !(e.lookahead + e.insert < Ae)); )
        ;
  } while (e.lookahead < ga && e.strm.avail_in !== 0);
}, eE = (e, t) => {
  let n = 65535;
  for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ; ) {
    if (e.lookahead <= 1) {
      if (nl(e), e.lookahead === 0 && t === bl)
        return Ft;
      if (e.lookahead === 0)
        break;
    }
    e.strstart += e.lookahead, e.lookahead = 0;
    const a = e.block_start + n;
    if ((e.strstart === 0 || e.strstart >= a) && (e.lookahead = e.strstart - a, e.strstart = a, Qt(e, !1), e.strm.avail_out === 0) || e.strstart - e.block_start >= e.w_size - ga && (Qt(e, !1), e.strm.avail_out === 0))
      return Ft;
  }
  return e.insert = 0, t === cr ? (Qt(e, !0), e.strm.avail_out === 0 ? tl : Mo) : (e.strstart > e.block_start && (Qt(e, !1), e.strm.avail_out === 0), Ft);
}, Ff = (e, t) => {
  let n, a;
  for (; ; ) {
    if (e.lookahead < ga) {
      if (nl(e), e.lookahead < ga && t === bl)
        return Ft;
      if (e.lookahead === 0)
        break;
    }
    if (n = 0, e.lookahead >= Ae && (e.ins_h = dr(e, e.ins_h, e.window[e.strstart + Ae - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), n !== 0 && e.strstart - n <= e.w_size - ga && (e.match_length = nb(e, n)), e.match_length >= Ae)
      if (a = sr(e, e.strstart - e.match_start, e.match_length - Ae), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= Ae) {
        e.match_length--;
        do
          e.strstart++, e.ins_h = dr(e, e.ins_h, e.window[e.strstart + Ae - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart;
        while (--e.match_length !== 0);
        e.strstart++;
      } else
        e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = dr(e, e.ins_h, e.window[e.strstart + 1]);
    else
      a = sr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++;
    if (a && (Qt(e, !1), e.strm.avail_out === 0))
      return Ft;
  }
  return e.insert = e.strstart < Ae - 1 ? e.strstart : Ae - 1, t === cr ? (Qt(e, !0), e.strm.avail_out === 0 ? tl : Mo) : e.last_lit && (Qt(e, !1), e.strm.avail_out === 0) ? Ft : cc;
}, xl = (e, t) => {
  let n, a, i;
  for (; ; ) {
    if (e.lookahead < ga) {
      if (nl(e), e.lookahead < ga && t === bl)
        return Ft;
      if (e.lookahead === 0)
        break;
    }
    if (n = 0, e.lookahead >= Ae && (e.ins_h = dr(e, e.ins_h, e.window[e.strstart + Ae - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = Ae - 1, n !== 0 && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - ga && (e.match_length = nb(e, n), e.match_length <= 5 && (e.strategy === Nw || e.match_length === Ae && e.strstart - e.match_start > 4096) && (e.match_length = Ae - 1)), e.prev_length >= Ae && e.match_length <= e.prev_length) {
      i = e.strstart + e.lookahead - Ae, a = sr(e, e.strstart - 1 - e.prev_match, e.prev_length - Ae), e.lookahead -= e.prev_length - 1, e.prev_length -= 2;
      do
        ++e.strstart <= i && (e.ins_h = dr(e, e.ins_h, e.window[e.strstart + Ae - 1]), n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart);
      while (--e.prev_length !== 0);
      if (e.match_available = 0, e.match_length = Ae - 1, e.strstart++, a && (Qt(e, !1), e.strm.avail_out === 0))
        return Ft;
    } else if (e.match_available) {
      if (a = sr(e, 0, e.window[e.strstart - 1]), a && Qt(e, !1), e.strstart++, e.lookahead--, e.strm.avail_out === 0)
        return Ft;
    } else
      e.match_available = 1, e.strstart++, e.lookahead--;
  }
  return e.match_available && (a = sr(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < Ae - 1 ? e.strstart : Ae - 1, t === cr ? (Qt(e, !0), e.strm.avail_out === 0 ? tl : Mo) : e.last_lit && (Qt(e, !1), e.strm.avail_out === 0) ? Ft : cc;
}, tE = (e, t) => {
  let n, a, i, r;
  const l = e.window;
  for (; ; ) {
    if (e.lookahead <= ar) {
      if (nl(e), e.lookahead <= ar && t === bl)
        return Ft;
      if (e.lookahead === 0)
        break;
    }
    if (e.match_length = 0, e.lookahead >= Ae && e.strstart > 0 && (i = e.strstart - 1, a = l[i], a === l[++i] && a === l[++i] && a === l[++i])) {
      r = e.strstart + ar;
      do
        ;
      while (a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && a === l[++i] && i < r);
      e.match_length = ar - (r - i), e.match_length > e.lookahead && (e.match_length = e.lookahead);
    }
    if (e.match_length >= Ae ? (n = sr(e, 1, e.match_length - Ae), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = sr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (Qt(e, !1), e.strm.avail_out === 0))
      return Ft;
  }
  return e.insert = 0, t === cr ? (Qt(e, !0), e.strm.avail_out === 0 ? tl : Mo) : e.last_lit && (Qt(e, !1), e.strm.avail_out === 0) ? Ft : cc;
}, nE = (e, t) => {
  let n;
  for (; ; ) {
    if (e.lookahead === 0 && (nl(e), e.lookahead === 0)) {
      if (t === bl)
        return Ft;
      break;
    }
    if (e.match_length = 0, n = sr(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (Qt(e, !1), e.strm.avail_out === 0))
      return Ft;
  }
  return e.insert = 0, t === cr ? (Qt(e, !0), e.strm.avail_out === 0 ? tl : Mo) : e.last_lit && (Qt(e, !1), e.strm.avail_out === 0) ? Ft : cc;
};
function _a(e, t, n, a, i) {
  this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = a, this.func = i;
}
const ns = [
  /*      good lazy nice chain */
  new _a(0, 0, 0, 0, eE),
  /* 0 store only */
  new _a(4, 4, 8, 4, Ff),
  /* 1 max speed, no lazy matches */
  new _a(4, 5, 16, 8, Ff),
  /* 2 */
  new _a(4, 6, 32, 32, Ff),
  /* 3 */
  new _a(4, 4, 16, 16, xl),
  /* 4 lazy matches */
  new _a(8, 16, 32, 32, xl),
  /* 5 */
  new _a(8, 16, 128, 128, xl),
  /* 6 */
  new _a(8, 32, 128, 256, xl),
  /* 7 */
  new _a(32, 128, 258, 1024, xl),
  /* 8 */
  new _a(32, 258, 258, 4096, xl)
  /* 9 max compression */
], aE = (e) => {
  e.window_size = 2 * e.w_size, nr(e.head), e.max_lazy_match = ns[e.level].max_lazy, e.good_match = ns[e.level].good_length, e.nice_match = ns[e.level].nice_length, e.max_chain_length = ns[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = Ae - 1, e.match_available = 0, e.ins_h = 0;
};
function iE() {
  this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = Ou, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(Yw * 2), this.dyn_dtree = new Uint16Array((2 * Gw + 1) * 2), this.bl_tree = new Uint16Array((2 * jw + 1) * 2), nr(this.dyn_ltree), nr(this.dyn_dtree), nr(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(Zw + 1), this.heap = new Uint16Array(2 * n1 + 1), nr(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(2 * n1 + 1), nr(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
}
const ab = (e) => {
  if (!e || !e.state)
    return ir(e, Yn);
  e.total_in = e.total_out = 0, e.data_type = Fw;
  const t = e.state;
  return t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? $u : Hr, e.adler = t.wrap === 2 ? 0 : 1, t.last_flush = bl, Iw(t), Va;
}, ib = (e) => {
  const t = ab(e);
  return t === Va && aE(e.state), t;
}, rE = (e, t) => !e || !e.state || e.state.wrap !== 2 ? Yn : (e.state.gzhead = t, Va), rb = (e, t, n, a, i, r) => {
  if (!e)
    return Yn;
  let l = 1;
  if (t === Pw && (t = 6), a < 0 ? (l = 0, a = -a) : a > 15 && (l = 2, a -= 16), i < 1 || i > Bw || n !== Ou || a < 8 || a > 15 || t < 0 || t > 9 || r < 0 || r > $w)
    return ir(e, Yn);
  a === 8 && (a = 9);
  const o = new iE();
  return e.state = o, o.strm = e, o.wrap = l, o.gzhead = null, o.w_bits = a, o.w_size = 1 << o.w_bits, o.w_mask = o.w_size - 1, o.hash_bits = i + 7, o.hash_size = 1 << o.hash_bits, o.hash_mask = o.hash_size - 1, o.hash_shift = ~~((o.hash_bits + Ae - 1) / Ae), o.window = new Uint8Array(o.w_size * 2), o.head = new Uint16Array(o.hash_size), o.prev = new Uint16Array(o.w_size), o.lit_bufsize = 1 << i + 6, o.pending_buf_size = o.lit_bufsize * 4, o.pending_buf = new Uint8Array(o.pending_buf_size), o.d_buf = 1 * o.lit_bufsize, o.l_buf = 3 * o.lit_bufsize, o.level = t, o.strategy = r, o.method = n, ib(e);
}, lE = (e, t) => rb(e, t, Ou, Hw, Xw, zw), oE = (e, t) => {
  let n, a;
  if (!e || !e.state || t > KU || t < 0)
    return e ? ir(e, Yn) : Yn;
  const i = e.state;
  if (!e.output || !e.input && e.avail_in !== 0 || i.status === ts && t !== cr)
    return ir(e, e.avail_out === 0 ? zf : Yn);
  i.strm = e;
  const r = i.last_flush;
  if (i.last_flush = t, i.status === $u)
    if (i.wrap === 2)
      e.adler = 0, He(i, 31), He(i, 139), He(i, 8), i.gzhead ? (He(
        i,
        (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)
      ), He(i, i.gzhead.time & 255), He(i, i.gzhead.time >> 8 & 255), He(i, i.gzhead.time >> 16 & 255), He(i, i.gzhead.time >> 24 & 255), He(i, i.level === 9 ? 2 : i.strategy >= Dc || i.level < 2 ? 4 : 0), He(i, i.gzhead.os & 255), i.gzhead.extra && i.gzhead.extra.length && (He(i, i.gzhead.extra.length & 255), He(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (e.adler = Vt(e.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = a1) : (He(i, 0), He(i, 0), He(i, 0), He(i, 0), He(i, 0), He(i, i.level === 9 ? 2 : i.strategy >= Dc || i.level < 2 ? 4 : 0), He(i, qw), i.status = Hr);
    else {
      let l = Ou + (i.w_bits - 8 << 4) << 8, o = -1;
      i.strategy >= Dc || i.level < 2 ? o = 0 : i.level < 6 ? o = 1 : i.level === 6 ? o = 2 : o = 3, l |= o << 6, i.strstart !== 0 && (l |= Kw), l += 31 - l % 31, i.status = Hr, Oo(i, l), i.strstart !== 0 && (Oo(i, e.adler >>> 16), Oo(i, e.adler & 65535)), e.adler = 1;
    }
  if (i.status === a1)
    if (i.gzhead.extra) {
      for (n = i.pending; i.gzindex < (i.gzhead.extra.length & 65535) && !(i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), Zi(e), n = i.pending, i.pending === i.pending_buf_size)); )
        He(i, i.gzhead.extra[i.gzindex] & 255), i.gzindex++;
      i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = cd);
    } else
      i.status = cd;
  if (i.status === cd)
    if (i.gzhead.name) {
      n = i.pending;
      do {
        if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), Zi(e), n = i.pending, i.pending === i.pending_buf_size)) {
          a = 1;
          break;
        }
        i.gzindex < i.gzhead.name.length ? a = i.gzhead.name.charCodeAt(i.gzindex++) & 255 : a = 0, He(i, a);
      } while (a !== 0);
      i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), a === 0 && (i.gzindex = 0, i.status = dd);
    } else
      i.status = dd;
  if (i.status === dd)
    if (i.gzhead.comment) {
      n = i.pending;
      do {
        if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), Zi(e), n = i.pending, i.pending === i.pending_buf_size)) {
          a = 1;
          break;
        }
        i.gzindex < i.gzhead.comment.length ? a = i.gzhead.comment.charCodeAt(i.gzindex++) & 255 : a = 0, He(i, a);
      } while (a !== 0);
      i.gzhead.hcrc && i.pending > n && (e.adler = Vt(e.adler, i.pending_buf, i.pending - n, n)), a === 0 && (i.status = ud);
    } else
      i.status = ud;
  if (i.status === ud && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && Zi(e), i.pending + 2 <= i.pending_buf_size && (He(i, e.adler & 255), He(i, e.adler >> 8 & 255), e.adler = 0, i.status = Hr)) : i.status = Hr), i.pending !== 0) {
    if (Zi(e), e.avail_out === 0)
      return i.last_flush = -1, Va;
  } else if (e.avail_in === 0 && JU(t) <= JU(r) && t !== cr)
    return ir(e, zf);
  if (i.status === ts && e.avail_in !== 0)
    return ir(e, zf);
  if (e.avail_in !== 0 || i.lookahead !== 0 || t !== bl && i.status !== ts) {
    let l = i.strategy === Dc ? nE(i, t) : i.strategy === Ow ? tE(i, t) : ns[i.level].func(i, t);
    if ((l === tl || l === Mo) && (i.status = ts), l === Ft || l === tl)
      return e.avail_out === 0 && (i.last_flush = -1), Va;
    if (l === cc && (t === Dw ? Aw(i) : t !== KU && (Tw(i, 0, 0, !1), t === Lw && (nr(i.head), i.lookahead === 0 && (i.strstart = 0, i.block_start = 0, i.insert = 0))), Zi(e), e.avail_out === 0))
      return i.last_flush = -1, Va;
  }
  return t !== cr ? Va : i.wrap <= 0 ? qU : (i.wrap === 2 ? (He(i, e.adler & 255), He(i, e.adler >> 8 & 255), He(i, e.adler >> 16 & 255), He(i, e.adler >> 24 & 255), He(i, e.total_in & 255), He(i, e.total_in >> 8 & 255), He(i, e.total_in >> 16 & 255), He(i, e.total_in >> 24 & 255)) : (Oo(i, e.adler >>> 16), Oo(i, e.adler & 65535)), Zi(e), i.wrap > 0 && (i.wrap = -i.wrap), i.pending !== 0 ? Va : qU);
}, sE = (e) => {
  if (!e || !e.state)
    return Yn;
  const t = e.state.status;
  return t !== $u && t !== a1 && t !== cd && t !== dd && t !== ud && t !== Hr && t !== ts ? ir(e, Yn) : (e.state = null, t === Hr ? ir(e, Rw) : Va);
}, cE = (e, t) => {
  let n = t.length;
  if (!e || !e.state)
    return Yn;
  const a = e.state, i = a.wrap;
  if (i === 2 || i === 1 && a.status !== $u || a.lookahead)
    return Yn;
  if (i === 1 && (e.adler = Ps(e.adler, t, n, 0)), a.wrap = 0, n >= a.w_size) {
    i === 0 && (nr(a.head), a.strstart = 0, a.block_start = 0, a.insert = 0);
    let c = new Uint8Array(a.w_size);
    c.set(t.subarray(n - a.w_size, n), 0), t = c, n = a.w_size;
  }
  const r = e.avail_in, l = e.next_in, o = e.input;
  for (e.avail_in = n, e.next_in = 0, e.input = t, nl(a); a.lookahead >= Ae; ) {
    let c = a.strstart, d = a.lookahead - (Ae - 1);
    do
      a.ins_h = dr(a, a.ins_h, a.window[c + Ae - 1]), a.prev[c & a.w_mask] = a.head[a.ins_h], a.head[a.ins_h] = c, c++;
    while (--d);
    a.strstart = c, a.lookahead = Ae - 1, nl(a);
  }
  return a.strstart += a.lookahead, a.block_start = a.strstart, a.insert = a.lookahead, a.lookahead = 0, a.match_length = a.prev_length = Ae - 1, a.match_available = 0, e.next_in = l, e.input = o, e.avail_in = r, a.wrap = i, Va;
};
var dE = lE, uE = rb, fE = ib, hE = ab, pE = rE, UE = oE, mE = sE, gE = cE, bE = "pako deflate (from Nodeca project)", Us = {
  deflateInit: dE,
  deflateInit2: uE,
  deflateReset: fE,
  deflateResetKeep: hE,
  deflateSetHeader: pE,
  deflate: UE,
  deflateEnd: mE,
  deflateSetDictionary: gE,
  deflateInfo: bE
};
const vE = (e, t) => Object.prototype.hasOwnProperty.call(e, t);
var yE = function(e) {
  const t = Array.prototype.slice.call(arguments, 1);
  for (; t.length; ) {
    const n = t.shift();
    if (n) {
      if (typeof n != "object")
        throw new TypeError(n + "must be non-object");
      for (const a in n)
        vE(n, a) && (e[a] = n[a]);
    }
  }
  return e;
}, wE = (e) => {
  let t = 0;
  for (let a = 0, i = e.length; a < i; a++)
    t += e[a].length;
  const n = new Uint8Array(t);
  for (let a = 0, i = 0, r = e.length; a < r; a++) {
    let l = e[a];
    n.set(l, i), i += l.length;
  }
  return n;
}, zu = {
  assign: yE,
  flattenChunks: wE
};
let lb = !0;
try {
  String.fromCharCode.apply(null, new Uint8Array(1));
} catch {
  lb = !1;
}
const Ns = new Uint8Array(256);
for (let e = 0; e < 256; e++)
  Ns[e] = e >= 252 ? 6 : e >= 248 ? 5 : e >= 240 ? 4 : e >= 224 ? 3 : e >= 192 ? 2 : 1;
Ns[254] = Ns[254] = 1;
var EE = (e) => {
  let t, n, a, i, r, l = e.length, o = 0;
  for (i = 0; i < l; i++)
    n = e.charCodeAt(i), (n & 64512) === 55296 && i + 1 < l && (a = e.charCodeAt(i + 1), (a & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (a - 56320), i++)), o += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
  for (t = new Uint8Array(o), r = 0, i = 0; r < o; i++)
    n = e.charCodeAt(i), (n & 64512) === 55296 && i + 1 < l && (a = e.charCodeAt(i + 1), (a & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (a - 56320), i++)), n < 128 ? t[r++] = n : n < 2048 ? (t[r++] = 192 | n >>> 6, t[r++] = 128 | n & 63) : n < 65536 ? (t[r++] = 224 | n >>> 12, t[r++] = 128 | n >>> 6 & 63, t[r++] = 128 | n & 63) : (t[r++] = 240 | n >>> 18, t[r++] = 128 | n >>> 12 & 63, t[r++] = 128 | n >>> 6 & 63, t[r++] = 128 | n & 63);
  return t;
};
const xE = (e, t) => {
  if (t < 65534 && e.subarray && lb)
    return String.fromCharCode.apply(null, e.length === t ? e : e.subarray(0, t));
  let n = "";
  for (let a = 0; a < t; a++)
    n += String.fromCharCode(e[a]);
  return n;
};
var SE = (e, t) => {
  let n, a;
  const i = t || e.length, r = new Array(i * 2);
  for (a = 0, n = 0; n < i; ) {
    let l = e[n++];
    if (l < 128) {
      r[a++] = l;
      continue;
    }
    let o = Ns[l];
    if (o > 4) {
      r[a++] = 65533, n += o - 1;
      continue;
    }
    for (l &= o === 2 ? 31 : o === 3 ? 15 : 7; o > 1 && n < i; )
      l = l << 6 | e[n++] & 63, o--;
    if (o > 1) {
      r[a++] = 65533;
      continue;
    }
    l < 65536 ? r[a++] = l : (l -= 65536, r[a++] = 55296 | l >> 10 & 1023, r[a++] = 56320 | l & 1023);
  }
  return xE(r, a);
}, kE = (e, t) => {
  t = t || e.length, t > e.length && (t = e.length);
  let n = t - 1;
  for (; n >= 0 && (e[n] & 192) === 128; )
    n--;
  return n < 0 || n === 0 ? t : n + Ns[e[n]] > t ? n : t;
}, Os = {
  string2buf: EE,
  buf2string: SE,
  utf8border: kE
};
function ME() {
  this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
}
var ob = ME;
const sb = Object.prototype.toString, {
  Z_NO_FLUSH: CE,
  Z_SYNC_FLUSH: IE,
  Z_FULL_FLUSH: TE,
  Z_FINISH: _E,
  Z_OK: Fd,
  Z_STREAM_END: AE,
  Z_DEFAULT_COMPRESSION: DE,
  Z_DEFAULT_STRATEGY: LE,
  Z_DEFLATED: RE
} = Nu;
function Fu(e) {
  this.options = zu.assign({
    level: DE,
    method: RE,
    chunkSize: 16384,
    windowBits: 15,
    memLevel: 8,
    strategy: LE
  }, e || {});
  let t = this.options;
  t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new ob(), this.strm.avail_out = 0;
  let n = Us.deflateInit2(
    this.strm,
    t.level,
    t.method,
    t.windowBits,
    t.memLevel,
    t.strategy
  );
  if (n !== Fd)
    throw new Error(el[n]);
  if (t.header && Us.deflateSetHeader(this.strm, t.header), t.dictionary) {
    let a;
    if (typeof t.dictionary == "string" ? a = Os.string2buf(t.dictionary) : sb.call(t.dictionary) === "[object ArrayBuffer]" ? a = new Uint8Array(t.dictionary) : a = t.dictionary, n = Us.deflateSetDictionary(this.strm, a), n !== Fd)
      throw new Error(el[n]);
    this._dict_set = !0;
  }
}
Fu.prototype.push = function(e, t) {
  const n = this.strm, a = this.options.chunkSize;
  let i, r;
  if (this.ended)
    return !1;
  for (t === ~~t ? r = t : r = t === !0 ? _E : CE, typeof e == "string" ? n.input = Os.string2buf(e) : sb.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e, n.next_in = 0, n.avail_in = n.input.length; ; ) {
    if (n.avail_out === 0 && (n.output = new Uint8Array(a), n.next_out = 0, n.avail_out = a), (r === IE || r === TE) && n.avail_out <= 6) {
      this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0;
      continue;
    }
    if (i = Us.deflate(n, r), i === AE)
      return n.next_out > 0 && this.onData(n.output.subarray(0, n.next_out)), i = Us.deflateEnd(this.strm), this.onEnd(i), this.ended = !0, i === Fd;
    if (n.avail_out === 0) {
      this.onData(n.output);
      continue;
    }
    if (r > 0 && n.next_out > 0) {
      this.onData(n.output.subarray(0, n.next_out)), n.avail_out = 0;
      continue;
    }
    if (n.avail_in === 0) break;
  }
  return !0;
};
Fu.prototype.onData = function(e) {
  this.chunks.push(e);
};
Fu.prototype.onEnd = function(e) {
  e === Fd && (this.result = zu.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
};
function PE(e, t) {
  const n = new Fu(t);
  if (n.push(e, !0), n.err)
    throw n.msg || el[n.err];
  return n.result;
}
var NE = PE, OE = {
  deflate: NE
};
const Lc = 30, $E = 12;
var zE = function(t, n) {
  let a, i, r, l, o, c, d, s, u, f, h, U, m, g, b, v, y, w, x, S, E, M, I, T;
  const A = t.state;
  a = t.next_in, I = t.input, i = a + (t.avail_in - 5), r = t.next_out, T = t.output, l = r - (n - t.avail_out), o = r + (t.avail_out - 257), c = A.dmax, d = A.wsize, s = A.whave, u = A.wnext, f = A.window, h = A.hold, U = A.bits, m = A.lencode, g = A.distcode, b = (1 << A.lenbits) - 1, v = (1 << A.distbits) - 1;
  e:
    do {
      U < 15 && (h += I[a++] << U, U += 8, h += I[a++] << U, U += 8), y = m[h & b];
      t:
        for (; ; ) {
          if (w = y >>> 24, h >>>= w, U -= w, w = y >>> 16 & 255, w === 0)
            T[r++] = y & 65535;
          else if (w & 16) {
            x = y & 65535, w &= 15, w && (U < w && (h += I[a++] << U, U += 8), x += h & (1 << w) - 1, h >>>= w, U -= w), U < 15 && (h += I[a++] << U, U += 8, h += I[a++] << U, U += 8), y = g[h & v];
            n:
              for (; ; ) {
                if (w = y >>> 24, h >>>= w, U -= w, w = y >>> 16 & 255, w & 16) {
                  if (S = y & 65535, w &= 15, U < w && (h += I[a++] << U, U += 8, U < w && (h += I[a++] << U, U += 8)), S += h & (1 << w) - 1, S > c) {
                    t.msg = "invalid distance too far back", A.mode = Lc;
                    break e;
                  }
                  if (h >>>= w, U -= w, w = r - l, S > w) {
                    if (w = S - w, w > s && A.sane) {
                      t.msg = "invalid distance too far back", A.mode = Lc;
                      break e;
                    }
                    if (E = 0, M = f, u === 0) {
                      if (E += d - w, w < x) {
                        x -= w;
                        do
                          T[r++] = f[E++];
                        while (--w);
                        E = r - S, M = T;
                      }
                    } else if (u < w) {
                      if (E += d + u - w, w -= u, w < x) {
                        x -= w;
                        do
                          T[r++] = f[E++];
                        while (--w);
                        if (E = 0, u < x) {
                          w = u, x -= w;
                          do
                            T[r++] = f[E++];
                          while (--w);
                          E = r - S, M = T;
                        }
                      }
                    } else if (E += u - w, w < x) {
                      x -= w;
                      do
                        T[r++] = f[E++];
                      while (--w);
                      E = r - S, M = T;
                    }
                    for (; x > 2; )
                      T[r++] = M[E++], T[r++] = M[E++], T[r++] = M[E++], x -= 3;
                    x && (T[r++] = M[E++], x > 1 && (T[r++] = M[E++]));
                  } else {
                    E = r - S;
                    do
                      T[r++] = T[E++], T[r++] = T[E++], T[r++] = T[E++], x -= 3;
                    while (x > 2);
                    x && (T[r++] = T[E++], x > 1 && (T[r++] = T[E++]));
                  }
                } else if (w & 64) {
                  t.msg = "invalid distance code", A.mode = Lc;
                  break e;
                } else {
                  y = g[(y & 65535) + (h & (1 << w) - 1)];
                  continue n;
                }
                break;
              }
          } else if (w & 64)
            if (w & 32) {
              A.mode = $E;
              break e;
            } else {
              t.msg = "invalid literal/length code", A.mode = Lc;
              break e;
            }
          else {
            y = m[(y & 65535) + (h & (1 << w) - 1)];
            continue t;
          }
          break;
        }
    } while (a < i && r < o);
  x = U >> 3, a -= x, U -= x << 3, h &= (1 << U) - 1, t.next_in = a, t.next_out = r, t.avail_in = a < i ? 5 + (i - a) : 5 - (a - i), t.avail_out = r < o ? 257 + (o - r) : 257 - (r - o), A.hold = h, A.bits = U;
};
const Sl = 15, QU = 852, e2 = 592, t2 = 0, Bf = 1, n2 = 2, FE = new Uint16Array([
  /* Length codes 257..285 base */
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  13,
  15,
  17,
  19,
  23,
  27,
  31,
  35,
  43,
  51,
  59,
  67,
  83,
  99,
  115,
  131,
  163,
  195,
  227,
  258,
  0,
  0
]), BE = new Uint8Array([
  /* Length codes 257..285 extra */
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  16,
  17,
  17,
  17,
  17,
  18,
  18,
  18,
  18,
  19,
  19,
  19,
  19,
  20,
  20,
  20,
  20,
  21,
  21,
  21,
  21,
  16,
  72,
  78
]), HE = new Uint16Array([
  /* Distance codes 0..29 base */
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577,
  0,
  0
]), XE = new Uint8Array([
  /* Distance codes 0..29 extra */
  16,
  16,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20,
  20,
  21,
  21,
  22,
  22,
  23,
  23,
  24,
  24,
  25,
  25,
  26,
  26,
  27,
  27,
  28,
  28,
  29,
  29,
  64,
  64
]), WE = (e, t, n, a, i, r, l, o) => {
  const c = o.bits;
  let d = 0, s = 0, u = 0, f = 0, h = 0, U = 0, m = 0, g = 0, b = 0, v = 0, y, w, x, S, E, M = null, I = 0, T;
  const A = new Uint16Array(Sl + 1), D = new Uint16Array(Sl + 1);
  let R = null, O = 0, $, F, N;
  for (d = 0; d <= Sl; d++)
    A[d] = 0;
  for (s = 0; s < a; s++)
    A[t[n + s]]++;
  for (h = c, f = Sl; f >= 1 && A[f] === 0; f--)
    ;
  if (h > f && (h = f), f === 0)
    return i[r++] = 1 << 24 | 64 << 16 | 0, i[r++] = 1 << 24 | 64 << 16 | 0, o.bits = 1, 0;
  for (u = 1; u < f && A[u] === 0; u++)
    ;
  for (h < u && (h = u), g = 1, d = 1; d <= Sl; d++)
    if (g <<= 1, g -= A[d], g < 0)
      return -1;
  if (g > 0 && (e === t2 || f !== 1))
    return -1;
  for (D[1] = 0, d = 1; d < Sl; d++)
    D[d + 1] = D[d] + A[d];
  for (s = 0; s < a; s++)
    t[n + s] !== 0 && (l[D[t[n + s]]++] = s);
  if (e === t2 ? (M = R = l, T = 19) : e === Bf ? (M = FE, I -= 257, R = BE, O -= 257, T = 256) : (M = HE, R = XE, T = -1), v = 0, s = 0, d = u, E = r, U = h, m = 0, x = -1, b = 1 << h, S = b - 1, e === Bf && b > QU || e === n2 && b > e2)
    return 1;
  for (; ; ) {
    $ = d - m, l[s] < T ? (F = 0, N = l[s]) : l[s] > T ? (F = R[O + l[s]], N = M[I + l[s]]) : (F = 96, N = 0), y = 1 << d - m, w = 1 << U, u = w;
    do
      w -= y, i[E + (v >> m) + w] = $ << 24 | F << 16 | N | 0;
    while (w !== 0);
    for (y = 1 << d - 1; v & y; )
      y >>= 1;
    if (y !== 0 ? (v &= y - 1, v += y) : v = 0, s++, --A[d] === 0) {
      if (d === f)
        break;
      d = t[n + l[s]];
    }
    if (d > h && (v & S) !== x) {
      for (m === 0 && (m = h), E += u, U = d - m, g = 1 << U; U + m < f && (g -= A[U + m], !(g <= 0)); )
        U++, g <<= 1;
      if (b += 1 << U, e === Bf && b > QU || e === n2 && b > e2)
        return 1;
      x = v & S, i[x] = h << 24 | U << 16 | E - r | 0;
    }
  }
  return v !== 0 && (i[E + v] = d - m << 24 | 64 << 16 | 0), o.bits = h, 0;
};
var ms = WE;
const VE = 0, cb = 1, db = 2, {
  Z_FINISH: a2,
  Z_BLOCK: GE,
  Z_TREES: Rc,
  Z_OK: al,
  Z_STREAM_END: jE,
  Z_NEED_DICT: YE,
  Z_STREAM_ERROR: Jn,
  Z_DATA_ERROR: ub,
  Z_MEM_ERROR: fb,
  Z_BUF_ERROR: ZE,
  Z_DEFLATED: i2
} = Nu, hb = 1, r2 = 2, l2 = 3, o2 = 4, s2 = 5, c2 = 6, d2 = 7, u2 = 8, f2 = 9, h2 = 10, Bd = 11, ui = 12, Hf = 13, p2 = 14, Xf = 15, U2 = 16, m2 = 17, g2 = 18, b2 = 19, Pc = 20, Nc = 21, v2 = 22, y2 = 23, w2 = 24, E2 = 25, x2 = 26, Wf = 27, S2 = 28, k2 = 29, dt = 30, pb = 31, KE = 32, qE = 852, JE = 592, QE = 15, ex = QE, M2 = (e) => (e >>> 24 & 255) + (e >>> 8 & 65280) + ((e & 65280) << 8) + ((e & 255) << 24);
function tx() {
  this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
}
const Ub = (e) => {
  if (!e || !e.state)
    return Jn;
  const t = e.state;
  return e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = t.wrap & 1), t.mode = hb, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new Int32Array(qE), t.distcode = t.distdyn = new Int32Array(JE), t.sane = 1, t.back = -1, al;
}, mb = (e) => {
  if (!e || !e.state)
    return Jn;
  const t = e.state;
  return t.wsize = 0, t.whave = 0, t.wnext = 0, Ub(e);
}, gb = (e, t) => {
  let n;
  if (!e || !e.state)
    return Jn;
  const a = e.state;
  return t < 0 ? (n = 0, t = -t) : (n = (t >> 4) + 1, t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? Jn : (a.window !== null && a.wbits !== t && (a.window = null), a.wrap = n, a.wbits = t, mb(e));
}, bb = (e, t) => {
  if (!e)
    return Jn;
  const n = new tx();
  e.state = n, n.window = null;
  const a = gb(e, t);
  return a !== al && (e.state = null), a;
}, nx = (e) => bb(e, ex);
let C2 = !0, Vf, Gf;
const ax = (e) => {
  if (C2) {
    Vf = new Int32Array(512), Gf = new Int32Array(32);
    let t = 0;
    for (; t < 144; )
      e.lens[t++] = 8;
    for (; t < 256; )
      e.lens[t++] = 9;
    for (; t < 280; )
      e.lens[t++] = 7;
    for (; t < 288; )
      e.lens[t++] = 8;
    for (ms(cb, e.lens, 0, 288, Vf, 0, e.work, { bits: 9 }), t = 0; t < 32; )
      e.lens[t++] = 5;
    ms(db, e.lens, 0, 32, Gf, 0, e.work, { bits: 5 }), C2 = !1;
  }
  e.lencode = Vf, e.lenbits = 9, e.distcode = Gf, e.distbits = 5;
}, vb = (e, t, n, a) => {
  let i;
  const r = e.state;
  return r.window === null && (r.wsize = 1 << r.wbits, r.wnext = 0, r.whave = 0, r.window = new Uint8Array(r.wsize)), a >= r.wsize ? (r.window.set(t.subarray(n - r.wsize, n), 0), r.wnext = 0, r.whave = r.wsize) : (i = r.wsize - r.wnext, i > a && (i = a), r.window.set(t.subarray(n - a, n - a + i), r.wnext), a -= i, a ? (r.window.set(t.subarray(n - a, n), 0), r.wnext = a, r.whave = r.wsize) : (r.wnext += i, r.wnext === r.wsize && (r.wnext = 0), r.whave < r.wsize && (r.whave += i))), 0;
}, ix = (e, t) => {
  let n, a, i, r, l, o, c, d, s, u, f, h, U, m, g = 0, b, v, y, w, x, S, E, M;
  const I = new Uint8Array(4);
  let T, A;
  const D = (
    /* permutation of code lengths */
    new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15])
  );
  if (!e || !e.state || !e.output || !e.input && e.avail_in !== 0)
    return Jn;
  n = e.state, n.mode === ui && (n.mode = Hf), l = e.next_out, i = e.output, c = e.avail_out, r = e.next_in, a = e.input, o = e.avail_in, d = n.hold, s = n.bits, u = o, f = c, M = al;
  e:
    for (; ; )
      switch (n.mode) {
        case hb:
          if (n.wrap === 0) {
            n.mode = Hf;
            break;
          }
          for (; s < 16; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if (n.wrap & 2 && d === 35615) {
            n.check = 0, I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Vt(n.check, I, 2, 0), d = 0, s = 0, n.mode = r2;
            break;
          }
          if (n.flags = 0, n.head && (n.head.done = !1), !(n.wrap & 1) || /* check if zlib header allowed */
          (((d & 255) << 8) + (d >> 8)) % 31) {
            e.msg = "incorrect header check", n.mode = dt;
            break;
          }
          if ((d & 15) !== i2) {
            e.msg = "unknown compression method", n.mode = dt;
            break;
          }
          if (d >>>= 4, s -= 4, E = (d & 15) + 8, n.wbits === 0)
            n.wbits = E;
          else if (E > n.wbits) {
            e.msg = "invalid window size", n.mode = dt;
            break;
          }
          n.dmax = 1 << n.wbits, e.adler = n.check = 1, n.mode = d & 512 ? h2 : ui, d = 0, s = 0;
          break;
        case r2:
          for (; s < 16; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if (n.flags = d, (n.flags & 255) !== i2) {
            e.msg = "unknown compression method", n.mode = dt;
            break;
          }
          if (n.flags & 57344) {
            e.msg = "unknown header flags set", n.mode = dt;
            break;
          }
          n.head && (n.head.text = d >> 8 & 1), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Vt(n.check, I, 2, 0)), d = 0, s = 0, n.mode = l2;
        case l2:
          for (; s < 32; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          n.head && (n.head.time = d), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, I[2] = d >>> 16 & 255, I[3] = d >>> 24 & 255, n.check = Vt(n.check, I, 4, 0)), d = 0, s = 0, n.mode = o2;
        case o2:
          for (; s < 16; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          n.head && (n.head.xflags = d & 255, n.head.os = d >> 8), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Vt(n.check, I, 2, 0)), d = 0, s = 0, n.mode = s2;
        case s2:
          if (n.flags & 1024) {
            for (; s < 16; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            n.length = d, n.head && (n.head.extra_len = d), n.flags & 512 && (I[0] = d & 255, I[1] = d >>> 8 & 255, n.check = Vt(n.check, I, 2, 0)), d = 0, s = 0;
          } else n.head && (n.head.extra = null);
          n.mode = c2;
        case c2:
          if (n.flags & 1024 && (h = n.length, h > o && (h = o), h && (n.head && (E = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Uint8Array(n.head.extra_len)), n.head.extra.set(
            a.subarray(
              r,
              // extra field is limited to 65536 bytes
              // - no need for additional size check
              r + h
            ),
            /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
            E
          )), n.flags & 512 && (n.check = Vt(n.check, a, h, r)), o -= h, r += h, n.length -= h), n.length))
            break e;
          n.length = 0, n.mode = d2;
        case d2:
          if (n.flags & 2048) {
            if (o === 0)
              break e;
            h = 0;
            do
              E = a[r + h++], n.head && E && n.length < 65536 && (n.head.name += String.fromCharCode(E));
            while (E && h < o);
            if (n.flags & 512 && (n.check = Vt(n.check, a, h, r)), o -= h, r += h, E)
              break e;
          } else n.head && (n.head.name = null);
          n.length = 0, n.mode = u2;
        case u2:
          if (n.flags & 4096) {
            if (o === 0)
              break e;
            h = 0;
            do
              E = a[r + h++], n.head && E && n.length < 65536 && (n.head.comment += String.fromCharCode(E));
            while (E && h < o);
            if (n.flags & 512 && (n.check = Vt(n.check, a, h, r)), o -= h, r += h, E)
              break e;
          } else n.head && (n.head.comment = null);
          n.mode = f2;
        case f2:
          if (n.flags & 512) {
            for (; s < 16; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            if (d !== (n.check & 65535)) {
              e.msg = "header crc mismatch", n.mode = dt;
              break;
            }
            d = 0, s = 0;
          }
          n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = ui;
          break;
        case h2:
          for (; s < 32; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          e.adler = n.check = M2(d), d = 0, s = 0, n.mode = Bd;
        case Bd:
          if (n.havedict === 0)
            return e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = o, n.hold = d, n.bits = s, YE;
          e.adler = n.check = 1, n.mode = ui;
        case ui:
          if (t === GE || t === Rc)
            break e;
        case Hf:
          if (n.last) {
            d >>>= s & 7, s -= s & 7, n.mode = Wf;
            break;
          }
          for (; s < 3; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          switch (n.last = d & 1, d >>>= 1, s -= 1, d & 3) {
            case 0:
              n.mode = p2;
              break;
            case 1:
              if (ax(n), n.mode = Pc, t === Rc) {
                d >>>= 2, s -= 2;
                break e;
              }
              break;
            case 2:
              n.mode = m2;
              break;
            case 3:
              e.msg = "invalid block type", n.mode = dt;
          }
          d >>>= 2, s -= 2;
          break;
        case p2:
          for (d >>>= s & 7, s -= s & 7; s < 32; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if ((d & 65535) !== (d >>> 16 ^ 65535)) {
            e.msg = "invalid stored block lengths", n.mode = dt;
            break;
          }
          if (n.length = d & 65535, d = 0, s = 0, n.mode = Xf, t === Rc)
            break e;
        case Xf:
          n.mode = U2;
        case U2:
          if (h = n.length, h) {
            if (h > o && (h = o), h > c && (h = c), h === 0)
              break e;
            i.set(a.subarray(r, r + h), l), o -= h, r += h, c -= h, l += h, n.length -= h;
            break;
          }
          n.mode = ui;
          break;
        case m2:
          for (; s < 14; ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if (n.nlen = (d & 31) + 257, d >>>= 5, s -= 5, n.ndist = (d & 31) + 1, d >>>= 5, s -= 5, n.ncode = (d & 15) + 4, d >>>= 4, s -= 4, n.nlen > 286 || n.ndist > 30) {
            e.msg = "too many length or distance symbols", n.mode = dt;
            break;
          }
          n.have = 0, n.mode = g2;
        case g2:
          for (; n.have < n.ncode; ) {
            for (; s < 3; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            n.lens[D[n.have++]] = d & 7, d >>>= 3, s -= 3;
          }
          for (; n.have < 19; )
            n.lens[D[n.have++]] = 0;
          if (n.lencode = n.lendyn, n.lenbits = 7, T = { bits: n.lenbits }, M = ms(VE, n.lens, 0, 19, n.lencode, 0, n.work, T), n.lenbits = T.bits, M) {
            e.msg = "invalid code lengths set", n.mode = dt;
            break;
          }
          n.have = 0, n.mode = b2;
        case b2:
          for (; n.have < n.nlen + n.ndist; ) {
            for (; g = n.lencode[d & (1 << n.lenbits) - 1], b = g >>> 24, v = g >>> 16 & 255, y = g & 65535, !(b <= s); ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            if (y < 16)
              d >>>= b, s -= b, n.lens[n.have++] = y;
            else {
              if (y === 16) {
                for (A = b + 2; s < A; ) {
                  if (o === 0)
                    break e;
                  o--, d += a[r++] << s, s += 8;
                }
                if (d >>>= b, s -= b, n.have === 0) {
                  e.msg = "invalid bit length repeat", n.mode = dt;
                  break;
                }
                E = n.lens[n.have - 1], h = 3 + (d & 3), d >>>= 2, s -= 2;
              } else if (y === 17) {
                for (A = b + 3; s < A; ) {
                  if (o === 0)
                    break e;
                  o--, d += a[r++] << s, s += 8;
                }
                d >>>= b, s -= b, E = 0, h = 3 + (d & 7), d >>>= 3, s -= 3;
              } else {
                for (A = b + 7; s < A; ) {
                  if (o === 0)
                    break e;
                  o--, d += a[r++] << s, s += 8;
                }
                d >>>= b, s -= b, E = 0, h = 11 + (d & 127), d >>>= 7, s -= 7;
              }
              if (n.have + h > n.nlen + n.ndist) {
                e.msg = "invalid bit length repeat", n.mode = dt;
                break;
              }
              for (; h--; )
                n.lens[n.have++] = E;
            }
          }
          if (n.mode === dt)
            break;
          if (n.lens[256] === 0) {
            e.msg = "invalid code -- missing end-of-block", n.mode = dt;
            break;
          }
          if (n.lenbits = 9, T = { bits: n.lenbits }, M = ms(cb, n.lens, 0, n.nlen, n.lencode, 0, n.work, T), n.lenbits = T.bits, M) {
            e.msg = "invalid literal/lengths set", n.mode = dt;
            break;
          }
          if (n.distbits = 6, n.distcode = n.distdyn, T = { bits: n.distbits }, M = ms(db, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, T), n.distbits = T.bits, M) {
            e.msg = "invalid distances set", n.mode = dt;
            break;
          }
          if (n.mode = Pc, t === Rc)
            break e;
        case Pc:
          n.mode = Nc;
        case Nc:
          if (o >= 6 && c >= 258) {
            e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = o, n.hold = d, n.bits = s, zE(e, f), l = e.next_out, i = e.output, c = e.avail_out, r = e.next_in, a = e.input, o = e.avail_in, d = n.hold, s = n.bits, n.mode === ui && (n.back = -1);
            break;
          }
          for (n.back = 0; g = n.lencode[d & (1 << n.lenbits) - 1], b = g >>> 24, v = g >>> 16 & 255, y = g & 65535, !(b <= s); ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if (v && !(v & 240)) {
            for (w = b, x = v, S = y; g = n.lencode[S + ((d & (1 << w + x) - 1) >> w)], b = g >>> 24, v = g >>> 16 & 255, y = g & 65535, !(w + b <= s); ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            d >>>= w, s -= w, n.back += w;
          }
          if (d >>>= b, s -= b, n.back += b, n.length = y, v === 0) {
            n.mode = x2;
            break;
          }
          if (v & 32) {
            n.back = -1, n.mode = ui;
            break;
          }
          if (v & 64) {
            e.msg = "invalid literal/length code", n.mode = dt;
            break;
          }
          n.extra = v & 15, n.mode = v2;
        case v2:
          if (n.extra) {
            for (A = n.extra; s < A; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            n.length += d & (1 << n.extra) - 1, d >>>= n.extra, s -= n.extra, n.back += n.extra;
          }
          n.was = n.length, n.mode = y2;
        case y2:
          for (; g = n.distcode[d & (1 << n.distbits) - 1], b = g >>> 24, v = g >>> 16 & 255, y = g & 65535, !(b <= s); ) {
            if (o === 0)
              break e;
            o--, d += a[r++] << s, s += 8;
          }
          if (!(v & 240)) {
            for (w = b, x = v, S = y; g = n.distcode[S + ((d & (1 << w + x) - 1) >> w)], b = g >>> 24, v = g >>> 16 & 255, y = g & 65535, !(w + b <= s); ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            d >>>= w, s -= w, n.back += w;
          }
          if (d >>>= b, s -= b, n.back += b, v & 64) {
            e.msg = "invalid distance code", n.mode = dt;
            break;
          }
          n.offset = y, n.extra = v & 15, n.mode = w2;
        case w2:
          if (n.extra) {
            for (A = n.extra; s < A; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            n.offset += d & (1 << n.extra) - 1, d >>>= n.extra, s -= n.extra, n.back += n.extra;
          }
          if (n.offset > n.dmax) {
            e.msg = "invalid distance too far back", n.mode = dt;
            break;
          }
          n.mode = E2;
        case E2:
          if (c === 0)
            break e;
          if (h = f - c, n.offset > h) {
            if (h = n.offset - h, h > n.whave && n.sane) {
              e.msg = "invalid distance too far back", n.mode = dt;
              break;
            }
            h > n.wnext ? (h -= n.wnext, U = n.wsize - h) : U = n.wnext - h, h > n.length && (h = n.length), m = n.window;
          } else
            m = i, U = l - n.offset, h = n.length;
          h > c && (h = c), c -= h, n.length -= h;
          do
            i[l++] = m[U++];
          while (--h);
          n.length === 0 && (n.mode = Nc);
          break;
        case x2:
          if (c === 0)
            break e;
          i[l++] = n.length, c--, n.mode = Nc;
          break;
        case Wf:
          if (n.wrap) {
            for (; s < 32; ) {
              if (o === 0)
                break e;
              o--, d |= a[r++] << s, s += 8;
            }
            if (f -= c, e.total_out += f, n.total += f, f && (e.adler = n.check = /*UPDATE(state.check, put - _out, _out);*/
            n.flags ? Vt(n.check, i, f, l - f) : Ps(n.check, i, f, l - f)), f = c, (n.flags ? d : M2(d)) !== n.check) {
              e.msg = "incorrect data check", n.mode = dt;
              break;
            }
            d = 0, s = 0;
          }
          n.mode = S2;
        case S2:
          if (n.wrap && n.flags) {
            for (; s < 32; ) {
              if (o === 0)
                break e;
              o--, d += a[r++] << s, s += 8;
            }
            if (d !== (n.total & 4294967295)) {
              e.msg = "incorrect length check", n.mode = dt;
              break;
            }
            d = 0, s = 0;
          }
          n.mode = k2;
        case k2:
          M = jE;
          break e;
        case dt:
          M = ub;
          break e;
        case pb:
          return fb;
        case KE:
        default:
          return Jn;
      }
  return e.next_out = l, e.avail_out = c, e.next_in = r, e.avail_in = o, n.hold = d, n.bits = s, (n.wsize || f !== e.avail_out && n.mode < dt && (n.mode < Wf || t !== a2)) && vb(e, e.output, e.next_out, f - e.avail_out), u -= e.avail_in, f -= e.avail_out, e.total_in += u, e.total_out += f, n.total += f, n.wrap && f && (e.adler = n.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/
  n.flags ? Vt(n.check, i, f, e.next_out - f) : Ps(n.check, i, f, e.next_out - f)), e.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === ui ? 128 : 0) + (n.mode === Pc || n.mode === Xf ? 256 : 0), (u === 0 && f === 0 || t === a2) && M === al && (M = ZE), M;
}, rx = (e) => {
  if (!e || !e.state)
    return Jn;
  let t = e.state;
  return t.window && (t.window = null), e.state = null, al;
}, lx = (e, t) => {
  if (!e || !e.state)
    return Jn;
  const n = e.state;
  return n.wrap & 2 ? (n.head = t, t.done = !1, al) : Jn;
}, ox = (e, t) => {
  const n = t.length;
  let a, i, r;
  return !e || !e.state || (a = e.state, a.wrap !== 0 && a.mode !== Bd) ? Jn : a.mode === Bd && (i = 1, i = Ps(i, t, n, 0), i !== a.check) ? ub : (r = vb(e, t, n, n), r ? (a.mode = pb, fb) : (a.havedict = 1, al));
};
var sx = mb, cx = gb, dx = Ub, ux = nx, fx = bb, hx = ix, px = rx, Ux = lx, mx = ox, gx = "pako inflate (from Nodeca project)", bi = {
  inflateReset: sx,
  inflateReset2: cx,
  inflateResetKeep: dx,
  inflateInit: ux,
  inflateInit2: fx,
  inflate: hx,
  inflateEnd: px,
  inflateGetHeader: Ux,
  inflateSetDictionary: mx,
  inflateInfo: gx
};
function bx() {
  this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;
}
var vx = bx;
const yb = Object.prototype.toString, {
  Z_NO_FLUSH: yx,
  Z_FINISH: wx,
  Z_OK: $s,
  Z_STREAM_END: jf,
  Z_NEED_DICT: Yf,
  Z_STREAM_ERROR: Ex,
  Z_DATA_ERROR: I2,
  Z_MEM_ERROR: xx
} = Nu;
function Bu(e) {
  this.options = zu.assign({
    chunkSize: 1024 * 64,
    windowBits: 15,
    to: ""
  }, e || {});
  const t = this.options;
  t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, t.windowBits === 0 && (t.windowBits = -15)), t.windowBits >= 0 && t.windowBits < 16 && !(e && e.windowBits) && (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && (t.windowBits & 15 || (t.windowBits |= 15)), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new ob(), this.strm.avail_out = 0;
  let n = bi.inflateInit2(
    this.strm,
    t.windowBits
  );
  if (n !== $s)
    throw new Error(el[n]);
  if (this.header = new vx(), bi.inflateGetHeader(this.strm, this.header), t.dictionary && (typeof t.dictionary == "string" ? t.dictionary = Os.string2buf(t.dictionary) : yb.call(t.dictionary) === "[object ArrayBuffer]" && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (n = bi.inflateSetDictionary(this.strm, t.dictionary), n !== $s)))
    throw new Error(el[n]);
}
Bu.prototype.push = function(e, t) {
  const n = this.strm, a = this.options.chunkSize, i = this.options.dictionary;
  let r, l, o;
  if (this.ended) return !1;
  for (t === ~~t ? l = t : l = t === !0 ? wx : yx, yb.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e, n.next_in = 0, n.avail_in = n.input.length; ; ) {
    for (n.avail_out === 0 && (n.output = new Uint8Array(a), n.next_out = 0, n.avail_out = a), r = bi.inflate(n, l), r === Yf && i && (r = bi.inflateSetDictionary(n, i), r === $s ? r = bi.inflate(n, l) : r === I2 && (r = Yf)); n.avail_in > 0 && r === jf && n.state.wrap > 0 && e[n.next_in] !== 0; )
      bi.inflateReset(n), r = bi.inflate(n, l);
    switch (r) {
      case Ex:
      case I2:
      case Yf:
      case xx:
        return this.onEnd(r), this.ended = !0, !1;
    }
    if (o = n.avail_out, n.next_out && (n.avail_out === 0 || r === jf))
      if (this.options.to === "string") {
        let c = Os.utf8border(n.output, n.next_out), d = n.next_out - c, s = Os.buf2string(n.output, c);
        n.next_out = d, n.avail_out = a - d, d && n.output.set(n.output.subarray(c, c + d), 0), this.onData(s);
      } else
        this.onData(n.output.length === n.next_out ? n.output : n.output.subarray(0, n.next_out));
    if (!(r === $s && o === 0)) {
      if (r === jf)
        return r = bi.inflateEnd(this.strm), this.onEnd(r), this.ended = !0, !0;
      if (n.avail_in === 0) break;
    }
  }
  return !0;
};
Bu.prototype.onData = function(e) {
  this.chunks.push(e);
};
Bu.prototype.onEnd = function(e) {
  e === $s && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = zu.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg;
};
function Sx(e, t) {
  const n = new Bu(t);
  if (n.push(e), n.err) throw n.msg || el[n.err];
  return n.result;
}
var kx = Sx, Mx = {
  inflate: kx
};
const { deflate: Cx } = OE, { inflate: Ix } = Mx;
var Tx = Cx, _x = Ix;
const Ax = "#ffffff", Dx = "#000000", Lx = [
  "#f8f9fa",
  "#f1f3f5",
  "#e9ecef",
  "#dee2e6",
  "#ced4da",
  "#adb5bd",
  "#868e96",
  "#495057",
  "#343a40",
  "#212529"
], Rx = [
  "#fff5f5",
  "#ffe3e3",
  "#ffc9c9",
  "#ffa8a8",
  "#ff8787",
  "#ff6b6b",
  "#fa5252",
  "#f03e3e",
  "#e03131",
  "#c92a2a"
], Px = [
  "#fff0f6",
  "#ffdeeb",
  "#fcc2d7",
  "#faa2c1",
  "#f783ac",
  "#f06595",
  "#e64980",
  "#d6336c",
  "#c2255c",
  "#a61e4d"
], Nx = [
  "#f8f0fc",
  "#f3d9fa",
  "#eebefa",
  "#e599f7",
  "#da77f2",
  "#cc5de8",
  "#be4bdb",
  "#ae3ec9",
  "#9c36b5",
  "#862e9c"
], Ox = [
  "#f3f0ff",
  "#e5dbff",
  "#d0bfff",
  "#b197fc",
  "#9775fa",
  "#845ef7",
  "#7950f2",
  "#7048e8",
  "#6741d9",
  "#5f3dc4"
], $x = [
  "#edf2ff",
  "#dbe4ff",
  "#bac8ff",
  "#91a7ff",
  "#748ffc",
  "#5c7cfa",
  "#4c6ef5",
  "#4263eb",
  "#3b5bdb",
  "#364fc7"
], zx = [
  "#e7f5ff",
  "#d0ebff",
  "#a5d8ff",
  "#74c0fc",
  "#4dabf7",
  "#339af0",
  "#228be6",
  "#1c7ed6",
  "#1971c2",
  "#1864ab"
], Fx = [
  "#e3fafc",
  "#c5f6fa",
  "#99e9f2",
  "#66d9e8",
  "#3bc9db",
  "#22b8cf",
  "#15aabf",
  "#1098ad",
  "#0c8599",
  "#0b7285"
], Bx = [
  "#e6fcf5",
  "#c3fae8",
  "#96f2d7",
  "#63e6be",
  "#38d9a9",
  "#20c997",
  "#12b886",
  "#0ca678",
  "#099268",
  "#087f5b"
], Hx = [
  "#ebfbee",
  "#d3f9d8",
  "#b2f2bb",
  "#8ce99a",
  "#69db7c",
  "#51cf66",
  "#40c057",
  "#37b24d",
  "#2f9e44",
  "#2b8a3e"
], Xx = [
  "#f4fce3",
  "#e9fac8",
  "#d8f5a2",
  "#c0eb75",
  "#a9e34b",
  "#94d82d",
  "#82c91e",
  "#74b816",
  "#66a80f",
  "#5c940d"
], Wx = [
  "#fff9db",
  "#fff3bf",
  "#ffec99",
  "#ffe066",
  "#ffd43b",
  "#fcc419",
  "#fab005",
  "#f59f00",
  "#f08c00",
  "#e67700"
], Vx = [
  "#fff4e6",
  "#ffe8cc",
  "#ffd8a8",
  "#ffc078",
  "#ffa94d",
  "#ff922b",
  "#fd7e14",
  "#f76707",
  "#e8590c",
  "#d9480f"
], Yt = {
  white: Ax,
  black: Dx,
  gray: Lx,
  red: Rx,
  pink: Px,
  grape: Nx,
  violet: Ox,
  indigo: $x,
  blue: zx,
  cyan: Fx,
  teal: Bx,
  green: Hx,
  lime: Xx,
  yellow: Wx,
  orange: Vx
};
let D0 = (e = 21) => crypto.getRandomValues(new Uint8Array(e)).reduce((t, n) => (n &= 63, n < 36 ? t += n.toString(36) : n < 62 ? t += (n - 26).toString(36).toUpperCase() : n > 62 ? t += "-" : t += "_", t), "");
var wb = "Expected a function", T2 = NaN, Gx = "[object Symbol]", jx = /^\s+|\s+$/g, Yx = /^[-+]0x[0-9a-f]+$/i, Zx = /^0b[01]+$/i, Kx = /^0o[0-7]+$/i, qx = parseInt, Jx = typeof wi == "object" && wi && wi.Object === Object && wi, Qx = typeof self == "object" && self && self.Object === Object && self, eS = Jx || Qx || Function("return this")(), tS = Object.prototype, nS = tS.toString, aS = Math.max, iS = Math.min, Zf = function() {
  return eS.Date.now();
};
function rS(e, t, n) {
  var a, i, r, l, o, c, d = 0, s = !1, u = !1, f = !0;
  if (typeof e != "function")
    throw new TypeError(wb);
  t = _2(t) || 0, Hd(n) && (s = !!n.leading, u = "maxWait" in n, r = u ? aS(_2(n.maxWait) || 0, t) : r, f = "trailing" in n ? !!n.trailing : f);
  function h(S) {
    var E = a, M = i;
    return a = i = void 0, d = S, l = e.apply(M, E), l;
  }
  function U(S) {
    return d = S, o = setTimeout(b, t), s ? h(S) : l;
  }
  function m(S) {
    var E = S - c, M = S - d, I = t - E;
    return u ? iS(I, r - M) : I;
  }
  function g(S) {
    var E = S - c, M = S - d;
    return c === void 0 || E >= t || E < 0 || u && M >= r;
  }
  function b() {
    var S = Zf();
    if (g(S))
      return v(S);
    o = setTimeout(b, m(S));
  }
  function v(S) {
    return o = void 0, f && a ? h(S) : (a = i = void 0, l);
  }
  function y() {
    o !== void 0 && clearTimeout(o), d = 0, a = c = i = o = void 0;
  }
  function w() {
    return o === void 0 ? l : v(Zf());
  }
  function x() {
    var S = Zf(), E = g(S);
    if (a = arguments, i = this, c = S, E) {
      if (o === void 0)
        return U(c);
      if (u)
        return o = setTimeout(b, t), h(c);
    }
    return o === void 0 && (o = setTimeout(b, t)), l;
  }
  return x.cancel = y, x.flush = w, x;
}
function lS(e, t, n) {
  var a = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(wb);
  return Hd(n) && (a = "leading" in n ? !!n.leading : a, i = "trailing" in n ? !!n.trailing : i), rS(e, t, {
    leading: a,
    maxWait: t,
    trailing: i
  });
}
function Hd(e) {
  var t = typeof e;
  return !!e && (t == "object" || t == "function");
}
function oS(e) {
  return !!e && typeof e == "object";
}
function sS(e) {
  return typeof e == "symbol" || oS(e) && nS.call(e) == Gx;
}
function _2(e) {
  if (typeof e == "number")
    return e;
  if (sS(e))
    return T2;
  if (Hd(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = Hd(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = e.replace(jx, "");
  var n = Zx.test(e);
  return n || Kx.test(e) ? qx(e.slice(2), n ? 2 : 8) : Yx.test(e) ? T2 : +e;
}
var cS = lS;
const dc = /* @__PURE__ */ ml(cS);
var Eb = { exports: {} };
(function(e, t) {
  (function(n, a) {
    e.exports = a();
  })(wi, function() {
    var n = function() {
      this._listeners = {};
    };
    n.prototype.addEventListener = function(d, s) {
      this._listeners[d] = this._listeners[d] || [], this._listeners[d].indexOf(s) < 0 && this._listeners[d].push(s);
    }, n.prototype.removeEventListener = function(d, s) {
      if (this._listeners[d]) {
        var u = this._listeners[d].indexOf(s);
        u >= 0 && this._listeners[d].splice(u, 1);
      }
    }, n.prototype.dispatchEvent = function(d) {
      if (this._listeners[d.type] && this._listeners[d.type].length)
        for (var s = this._listeners[d.type].slice(), u = 0, f = s.length; u < f; ++u)
          s[u].call(this, d);
    };
    var a = function(d) {
      return typeof d.constructor == "function" && d.constructor.name === "GeneratorFunction";
    }, i = function(d) {
      return {
        next: function() {
          var s = d();
          return s ? { value: s } : { done: !0 };
        }
      };
    }, r = function(d) {
      var s = !1;
      return {
        next: function() {
          return s ? { done: !0 } : (s = !0, { value: d });
        }
      };
    }, l = function(d, s) {
      var u = typeof d;
      if (u === "object") {
        if (typeof d.next == "function")
          return d;
        if (typeof d.then == "function")
          return r(d);
      }
      return u === "function" ? a(d) ? d() : i(d) : r(s.resolve(d));
    }, o = function(d, s, u) {
      this.target = d, this.type = s, this.data = u;
    }, c = function(d, s, u) {
      if (n.call(this), typeof s != "number" || Math.floor(s) !== s || s < 1)
        throw new Error("Invalid concurrency");
      this._concurrency = s, this._options = u || {}, this._options.promise = this._options.promise || Promise, this._iterator = l(d, this._options.promise), this._done = !1, this._size = 0, this._promise = null, this._callbacks = null;
    };
    return c.prototype = new n(), c.prototype.constructor = c, c.prototype.concurrency = function(d) {
      return typeof d < "u" && (this._concurrency = d, this.active() && this._proceed()), this._concurrency;
    }, c.prototype.size = function() {
      return this._size;
    }, c.prototype.active = function() {
      return !!this._promise;
    }, c.prototype.promise = function() {
      return this._promise;
    }, c.prototype.start = function() {
      var d = this, s = this._options.promise;
      return this._promise = new s(function(u, f) {
        d._callbacks = {
          reject: f,
          resolve: u
        }, d._proceed();
      }), this._promise;
    }, c.prototype._fireEvent = function(d, s) {
      this.dispatchEvent(new o(this, d, s));
    }, c.prototype._settle = function(d) {
      d ? this._callbacks.reject(d) : this._callbacks.resolve(), this._promise = null, this._callbacks = null;
    }, c.prototype._onPooledPromiseFulfilled = function(d, s) {
      this._size--, this.active() && (this._fireEvent("fulfilled", {
        promise: d,
        result: s
      }), this._proceed());
    }, c.prototype._onPooledPromiseRejected = function(d, s) {
      this._size--, this.active() && (this._fireEvent("rejected", {
        promise: d,
        error: s
      }), this._settle(s || new Error("Unknown error")));
    }, c.prototype._trackPromise = function(d) {
      var s = this;
      d.then(function(u) {
        s._onPooledPromiseFulfilled(d, u);
      }, function(u) {
        s._onPooledPromiseRejected(d, u);
      }).catch(function(u) {
        s._settle(new Error("Promise processing failed: " + u));
      });
    }, c.prototype._proceed = function() {
      if (!this._done) {
        for (var d = { done: !1 }; this._size < this._concurrency && !(d = this._iterator.next()).done; )
          this._size++, this._trackPromise(d.value);
        this._done = d === null || !!d.done;
      }
      this._done && this._size === 0 && this._settle();
    }, c.PromisePoolEvent = o, c.PromisePool = c, c;
  });
})(Eb);
var dS = Eb.exports;
const uS = /* @__PURE__ */ ml(dS);
function i1(e, t, n) {
  if (e && e.length) {
    const [a, i] = t, r = Math.PI / 180 * n, l = Math.cos(r), o = Math.sin(r);
    for (const c of e) {
      const [d, s] = c;
      c[0] = (d - a) * l - (s - i) * o + a, c[1] = (d - a) * o + (s - i) * l + i;
    }
  }
}
function fS(e, t, n) {
  const a = [];
  e.forEach((i) => a.push(...i)), i1(a, t, n);
}
function hS(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}
function pS(e, t, n, a = 1) {
  const i = n, r = Math.max(t, 0.1), l = e[0] && e[0][0] && typeof e[0][0] == "number" ? [e] : e, o = [0, 0];
  if (i)
    for (const d of l)
      i1(d, o, i);
  const c = US(l, r, a);
  if (i) {
    for (const d of l)
      i1(d, o, -i);
    fS(c, o, -i);
  }
  return c;
}
function US(e, t, n) {
  const a = [];
  for (const d of e) {
    const s = [...d];
    hS(s[0], s[s.length - 1]) || s.push([s[0][0], s[0][1]]), s.length > 2 && a.push(s);
  }
  const i = [];
  t = Math.max(t, 0.1);
  const r = [];
  for (const d of a)
    for (let s = 0; s < d.length - 1; s++) {
      const u = d[s], f = d[s + 1];
      if (u[1] !== f[1]) {
        const h = Math.min(u[1], f[1]);
        r.push({
          ymin: h,
          ymax: Math.max(u[1], f[1]),
          x: h === u[1] ? u[0] : f[0],
          islope: (f[0] - u[0]) / (f[1] - u[1])
        });
      }
    }
  if (r.sort((d, s) => d.ymin < s.ymin ? -1 : d.ymin > s.ymin ? 1 : d.x < s.x ? -1 : d.x > s.x ? 1 : d.ymax === s.ymax ? 0 : (d.ymax - s.ymax) / Math.abs(d.ymax - s.ymax)), !r.length)
    return i;
  let l = [], o = r[0].ymin, c = 0;
  for (; l.length || r.length; ) {
    if (r.length) {
      let d = -1;
      for (let u = 0; u < r.length && !(r[u].ymin > o); u++)
        d = u;
      r.splice(0, d + 1).forEach((u) => {
        l.push({ s: o, edge: u });
      });
    }
    if (l = l.filter((d) => !(d.edge.ymax <= o)), l.sort((d, s) => d.edge.x === s.edge.x ? 0 : (d.edge.x - s.edge.x) / Math.abs(d.edge.x - s.edge.x)), (n !== 1 || c % t === 0) && l.length > 1)
      for (let d = 0; d < l.length; d = d + 2) {
        const s = d + 1;
        if (s >= l.length)
          break;
        const u = l[d].edge, f = l[s].edge;
        i.push([
          [Math.round(u.x), o],
          [Math.round(f.x), o]
        ]);
      }
    o += n, l.forEach((d) => {
      d.edge.x = d.edge.x + n * d.edge.islope;
    }), c++;
  }
  return i;
}
function uc(e, t) {
  var n;
  const a = t.hachureAngle + 90;
  let i = t.hachureGap;
  i < 0 && (i = t.strokeWidth * 4), i = Math.max(i, 0.1);
  let r = 1;
  return t.roughness >= 1 && (((n = t.randomizer) === null || n === void 0 ? void 0 : n.next()) || Math.random()) > 0.7 && (r = i), pS(e, i, a, r || 1);
}
class L0 {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    return this._fillPolygons(t, n);
  }
  _fillPolygons(t, n) {
    const a = uc(t, n);
    return { type: "fillSketch", ops: this.renderLines(a, n) };
  }
  renderLines(t, n) {
    const a = [];
    for (const i of t)
      a.push(...this.helper.doubleLineOps(i[0][0], i[0][1], i[1][0], i[1][1], n));
    return a;
  }
}
function Hu(e) {
  const t = e[0], n = e[1];
  return Math.sqrt(Math.pow(t[0] - n[0], 2) + Math.pow(t[1] - n[1], 2));
}
class mS extends L0 {
  fillPolygons(t, n) {
    let a = n.hachureGap;
    a < 0 && (a = n.strokeWidth * 4), a = Math.max(a, 0.1);
    const i = Object.assign({}, n, { hachureGap: a }), r = uc(t, i), l = Math.PI / 180 * n.hachureAngle, o = [], c = a * 0.5 * Math.cos(l), d = a * 0.5 * Math.sin(l);
    for (const [u, f] of r)
      Hu([u, f]) && o.push([
        [u[0] - c, u[1] + d],
        [...f]
      ], [
        [u[0] + c, u[1] - d],
        [...f]
      ]);
    return { type: "fillSketch", ops: this.renderLines(o, n) };
  }
}
class gS extends L0 {
  fillPolygons(t, n) {
    const a = this._fillPolygons(t, n), i = Object.assign({}, n, { hachureAngle: n.hachureAngle + 90 }), r = this._fillPolygons(t, i);
    return a.ops = a.ops.concat(r.ops), a;
  }
}
class bS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    n = Object.assign({}, n, { hachureAngle: 0 });
    const a = uc(t, n);
    return this.dotsOnLines(a, n);
  }
  dotsOnLines(t, n) {
    const a = [];
    let i = n.hachureGap;
    i < 0 && (i = n.strokeWidth * 4), i = Math.max(i, 0.1);
    let r = n.fillWeight;
    r < 0 && (r = n.strokeWidth / 2);
    const l = i / 4;
    for (const o of t) {
      const c = Hu(o), d = c / i, s = Math.ceil(d) - 1, u = c - s * i, f = (o[0][0] + o[1][0]) / 2 - i / 4, h = Math.min(o[0][1], o[1][1]);
      for (let U = 0; U < s; U++) {
        const m = h + u + U * i, g = f - l + Math.random() * 2 * l, b = m - l + Math.random() * 2 * l, v = this.helper.ellipse(g, b, r, r, n);
        a.push(...v.ops);
      }
    }
    return { type: "fillSketch", ops: a };
  }
}
class vS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    const a = uc(t, n);
    return { type: "fillSketch", ops: this.dashedLine(a, n) };
  }
  dashedLine(t, n) {
    const a = n.dashOffset < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashOffset, i = n.dashGap < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashGap, r = [];
    return t.forEach((l) => {
      const o = Hu(l), c = Math.floor(o / (a + i)), d = (o + i - c * (a + i)) / 2;
      let s = l[0], u = l[1];
      s[0] > u[0] && (s = l[1], u = l[0]);
      const f = Math.atan((u[1] - s[1]) / (u[0] - s[0]));
      for (let h = 0; h < c; h++) {
        const U = h * (a + i), m = U + a, g = [s[0] + U * Math.cos(f) + d * Math.cos(f), s[1] + U * Math.sin(f) + d * Math.sin(f)], b = [s[0] + m * Math.cos(f) + d * Math.cos(f), s[1] + m * Math.sin(f) + d * Math.sin(f)];
        r.push(...this.helper.doubleLineOps(g[0], g[1], b[0], b[1], n));
      }
    }), r;
  }
}
class yS {
  constructor(t) {
    this.helper = t;
  }
  fillPolygons(t, n) {
    const a = n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap, i = n.zigzagOffset < 0 ? a : n.zigzagOffset;
    n = Object.assign({}, n, { hachureGap: a + i });
    const r = uc(t, n);
    return { type: "fillSketch", ops: this.zigzagLines(r, i, n) };
  }
  zigzagLines(t, n, a) {
    const i = [];
    return t.forEach((r) => {
      const l = Hu(r), o = Math.round(l / (2 * n));
      let c = r[0], d = r[1];
      c[0] > d[0] && (c = r[1], d = r[0]);
      const s = Math.atan((d[1] - c[1]) / (d[0] - c[0]));
      for (let u = 0; u < o; u++) {
        const f = u * 2 * n, h = (u + 1) * 2 * n, U = Math.sqrt(2 * Math.pow(n, 2)), m = [c[0] + f * Math.cos(s), c[1] + f * Math.sin(s)], g = [c[0] + h * Math.cos(s), c[1] + h * Math.sin(s)], b = [m[0] + U * Math.cos(s + Math.PI / 4), m[1] + U * Math.sin(s + Math.PI / 4)];
        i.push(...this.helper.doubleLineOps(m[0], m[1], b[0], b[1], a), ...this.helper.doubleLineOps(b[0], b[1], g[0], g[1], a));
      }
    }), i;
  }
}
const vn = {};
function wS(e, t) {
  let n = e.fillStyle || "hachure";
  if (!vn[n])
    switch (n) {
      case "zigzag":
        vn[n] || (vn[n] = new mS(t));
        break;
      case "cross-hatch":
        vn[n] || (vn[n] = new gS(t));
        break;
      case "dots":
        vn[n] || (vn[n] = new bS(t));
        break;
      case "dashed":
        vn[n] || (vn[n] = new vS(t));
        break;
      case "zigzag-line":
        vn[n] || (vn[n] = new yS(t));
        break;
      case "hachure":
      default:
        n = "hachure", vn[n] || (vn[n] = new L0(t));
        break;
    }
  return vn[n];
}
function ES() {
  return Math.floor(Math.random() * 2 ** 31);
}
class xb {
  constructor(t) {
    this.seed = t;
  }
  next() {
    return this.seed ? (2 ** 31 - 1 & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31 : Math.random();
  }
}
const xS = 0, r1 = 1, Sb = 2, Oc = { A: 7, a: 7, C: 6, c: 6, H: 1, h: 1, L: 2, l: 2, M: 2, m: 2, Q: 4, q: 4, S: 4, s: 4, T: 2, t: 2, V: 1, v: 1, Z: 0, z: 0 };
function SS(e) {
  const t = new Array();
  for (; e !== ""; )
    if (e.match(/^([ \t\r\n,]+)/))
      e = e.substr(RegExp.$1.length);
    else if (e.match(/^([aAcChHlLmMqQsStTvVzZ])/))
      t[t.length] = { type: xS, text: RegExp.$1 }, e = e.substr(RegExp.$1.length);
    else if (e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))
      t[t.length] = { type: r1, text: `${parseFloat(RegExp.$1)}` }, e = e.substr(RegExp.$1.length);
    else
      return [];
  return t[t.length] = { type: Sb, text: "" }, t;
}
function Kf(e, t) {
  return e.type === t;
}
function R0(e) {
  const t = [], n = SS(e);
  let a = "BOD", i = 0, r = n[i];
  for (; !Kf(r, Sb); ) {
    let l = 0;
    const o = [];
    if (a === "BOD")
      if (r.text === "M" || r.text === "m")
        i++, l = Oc[r.text], a = r.text;
      else
        return R0("M0,0" + e);
    else Kf(r, r1) ? l = Oc[a] : (i++, l = Oc[r.text], a = r.text);
    if (i + l < n.length) {
      for (let c = i; c < i + l; c++) {
        const d = n[c];
        if (Kf(d, r1))
          o[o.length] = +d.text;
        else
          throw new Error("Param not a number: " + a + "," + d.text);
      }
      if (typeof Oc[a] == "number") {
        const c = { key: a, data: o };
        t.push(c), i += l, r = n[i], a === "M" && (a = "L"), a === "m" && (a = "l");
      } else
        throw new Error("Bad segment: " + a);
    } else
      throw new Error("Path data ended short");
  }
  return t;
}
function kb(e) {
  let t = 0, n = 0, a = 0, i = 0;
  const r = [];
  for (const { key: l, data: o } of e)
    switch (l) {
      case "M":
        r.push({ key: "M", data: [...o] }), [t, n] = o, [a, i] = o;
        break;
      case "m":
        t += o[0], n += o[1], r.push({ key: "M", data: [t, n] }), a = t, i = n;
        break;
      case "L":
        r.push({ key: "L", data: [...o] }), [t, n] = o;
        break;
      case "l":
        t += o[0], n += o[1], r.push({ key: "L", data: [t, n] });
        break;
      case "C":
        r.push({ key: "C", data: [...o] }), t = o[4], n = o[5];
        break;
      case "c": {
        const c = o.map((d, s) => s % 2 ? d + n : d + t);
        r.push({ key: "C", data: c }), t = c[4], n = c[5];
        break;
      }
      case "Q":
        r.push({ key: "Q", data: [...o] }), t = o[2], n = o[3];
        break;
      case "q": {
        const c = o.map((d, s) => s % 2 ? d + n : d + t);
        r.push({ key: "Q", data: c }), t = c[2], n = c[3];
        break;
      }
      case "A":
        r.push({ key: "A", data: [...o] }), t = o[5], n = o[6];
        break;
      case "a":
        t += o[5], n += o[6], r.push({ key: "A", data: [o[0], o[1], o[2], o[3], o[4], t, n] });
        break;
      case "H":
        r.push({ key: "H", data: [...o] }), t = o[0];
        break;
      case "h":
        t += o[0], r.push({ key: "H", data: [t] });
        break;
      case "V":
        r.push({ key: "V", data: [...o] }), n = o[0];
        break;
      case "v":
        n += o[0], r.push({ key: "V", data: [n] });
        break;
      case "S":
        r.push({ key: "S", data: [...o] }), t = o[2], n = o[3];
        break;
      case "s": {
        const c = o.map((d, s) => s % 2 ? d + n : d + t);
        r.push({ key: "S", data: c }), t = c[2], n = c[3];
        break;
      }
      case "T":
        r.push({ key: "T", data: [...o] }), t = o[0], n = o[1];
        break;
      case "t":
        t += o[0], n += o[1], r.push({ key: "T", data: [t, n] });
        break;
      case "Z":
      case "z":
        r.push({ key: "Z", data: [] }), t = a, n = i;
        break;
    }
  return r;
}
function Mb(e) {
  const t = [];
  let n = "", a = 0, i = 0, r = 0, l = 0, o = 0, c = 0;
  for (const { key: d, data: s } of e) {
    switch (d) {
      case "M":
        t.push({ key: "M", data: [...s] }), [a, i] = s, [r, l] = s;
        break;
      case "C":
        t.push({ key: "C", data: [...s] }), a = s[4], i = s[5], o = s[2], c = s[3];
        break;
      case "L":
        t.push({ key: "L", data: [...s] }), [a, i] = s;
        break;
      case "H":
        a = s[0], t.push({ key: "L", data: [a, i] });
        break;
      case "V":
        i = s[0], t.push({ key: "L", data: [a, i] });
        break;
      case "S": {
        let u = 0, f = 0;
        n === "C" || n === "S" ? (u = a + (a - o), f = i + (i - c)) : (u = a, f = i), t.push({ key: "C", data: [u, f, ...s] }), o = s[0], c = s[1], a = s[2], i = s[3];
        break;
      }
      case "T": {
        const [u, f] = s;
        let h = 0, U = 0;
        n === "Q" || n === "T" ? (h = a + (a - o), U = i + (i - c)) : (h = a, U = i);
        const m = a + 2 * (h - a) / 3, g = i + 2 * (U - i) / 3, b = u + 2 * (h - u) / 3, v = f + 2 * (U - f) / 3;
        t.push({ key: "C", data: [m, g, b, v, u, f] }), o = h, c = U, a = u, i = f;
        break;
      }
      case "Q": {
        const [u, f, h, U] = s, m = a + 2 * (u - a) / 3, g = i + 2 * (f - i) / 3, b = h + 2 * (u - h) / 3, v = U + 2 * (f - U) / 3;
        t.push({ key: "C", data: [m, g, b, v, h, U] }), o = u, c = f, a = h, i = U;
        break;
      }
      case "A": {
        const u = Math.abs(s[0]), f = Math.abs(s[1]), h = s[2], U = s[3], m = s[4], g = s[5], b = s[6];
        u === 0 || f === 0 ? (t.push({ key: "C", data: [a, i, g, b, g, b] }), a = g, i = b) : (a !== g || i !== b) && (Cb(a, i, g, b, u, f, h, U, m).forEach(function(y) {
          t.push({ key: "C", data: y });
        }), a = g, i = b);
        break;
      }
      case "Z":
        t.push({ key: "Z", data: [] }), a = r, i = l;
        break;
    }
    n = d;
  }
  return t;
}
function kS(e) {
  return Math.PI * e / 180;
}
function $o(e, t, n) {
  const a = e * Math.cos(n) - t * Math.sin(n), i = e * Math.sin(n) + t * Math.cos(n);
  return [a, i];
}
function Cb(e, t, n, a, i, r, l, o, c, d) {
  const s = kS(l);
  let u = [], f = 0, h = 0, U = 0, m = 0;
  if (d)
    [f, h, U, m] = d;
  else {
    [e, t] = $o(e, t, -s), [n, a] = $o(n, a, -s);
    const D = (e - n) / 2, R = (t - a) / 2;
    let O = D * D / (i * i) + R * R / (r * r);
    O > 1 && (O = Math.sqrt(O), i = O * i, r = O * r);
    const $ = o === c ? -1 : 1, F = i * i, N = r * r, j = F * N - F * R * R - N * D * D, z = F * R * R + N * D * D, Y = $ * Math.sqrt(Math.abs(j / z));
    U = Y * i * R / r + (e + n) / 2, m = Y * -r * D / i + (t + a) / 2, f = Math.asin(parseFloat(((t - m) / r).toFixed(9))), h = Math.asin(parseFloat(((a - m) / r).toFixed(9))), e < U && (f = Math.PI - f), n < U && (h = Math.PI - h), f < 0 && (f = Math.PI * 2 + f), h < 0 && (h = Math.PI * 2 + h), c && f > h && (f = f - Math.PI * 2), !c && h > f && (h = h - Math.PI * 2);
  }
  let g = h - f;
  if (Math.abs(g) > Math.PI * 120 / 180) {
    const D = h, R = n, O = a;
    c && h > f ? h = f + Math.PI * 120 / 180 * 1 : h = f + Math.PI * 120 / 180 * -1, n = U + i * Math.cos(h), a = m + r * Math.sin(h), u = Cb(n, a, R, O, i, r, l, 0, c, [h, D, U, m]);
  }
  g = h - f;
  const b = Math.cos(f), v = Math.sin(f), y = Math.cos(h), w = Math.sin(h), x = Math.tan(g / 4), S = 4 / 3 * i * x, E = 4 / 3 * r * x, M = [e, t], I = [e + S * v, t - E * b], T = [n + S * w, a - E * y], A = [n, a];
  if (I[0] = 2 * M[0] - I[0], I[1] = 2 * M[1] - I[1], d)
    return [I, T, A].concat(u);
  {
    u = [I, T, A].concat(u);
    const D = [];
    for (let R = 0; R < u.length; R += 3) {
      const O = $o(u[R][0], u[R][1], s), $ = $o(u[R + 1][0], u[R + 1][1], s), F = $o(u[R + 2][0], u[R + 2][1], s);
      D.push([O[0], O[1], $[0], $[1], F[0], F[1]]);
    }
    return D;
  }
}
const MS = {
  randOffset: AS,
  randOffsetWithRange: DS,
  ellipse: TS,
  doubleLineOps: LS
};
function Ib(e, t, n, a, i) {
  return { type: "path", ops: Ci(e, t, n, a, i) };
}
function fd(e, t, n) {
  const a = (e || []).length;
  if (a > 2) {
    const i = [];
    for (let r = 0; r < a - 1; r++)
      i.push(...Ci(e[r][0], e[r][1], e[r + 1][0], e[r + 1][1], n));
    return t && i.push(...Ci(e[a - 1][0], e[a - 1][1], e[0][0], e[0][1], n)), { type: "path", ops: i };
  } else if (a === 2)
    return Ib(e[0][0], e[0][1], e[1][0], e[1][1], n);
  return { type: "path", ops: [] };
}
function CS(e, t) {
  return fd(e, !0, t);
}
function IS(e, t, n, a, i) {
  const r = [
    [e, t],
    [e + n, t],
    [e + n, t + a],
    [e, t + a]
  ];
  return CS(r, i);
}
function A2(e, t) {
  let n = P2(e, 1 * (1 + t.roughness * 0.2), t);
  if (!t.disableMultiStroke) {
    const a = P2(e, 1.5 * (1 + t.roughness * 0.22), RS(t));
    n = n.concat(a);
  }
  return { type: "path", ops: n };
}
function TS(e, t, n, a, i) {
  const r = Tb(n, a, i);
  return l1(e, t, i, r).opset;
}
function Tb(e, t, n) {
  const a = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(e / 2, 2) + Math.pow(t / 2, 2)) / 2)), i = Math.ceil(Math.max(n.curveStepCount, n.curveStepCount / Math.sqrt(200) * a)), r = Math.PI * 2 / i;
  let l = Math.abs(e / 2), o = Math.abs(t / 2);
  const c = 1 - n.curveFitting;
  return l += Ue(l * c, n), o += Ue(o * c, n), { increment: r, rx: l, ry: o };
}
function l1(e, t, n, a) {
  const [i, r] = N2(a.increment, e, t, a.rx, a.ry, 1, a.increment * Xd(0.1, Xd(0.4, 1, n), n), n);
  let l = Wd(i, null, n);
  if (!n.disableMultiStroke && n.roughness !== 0) {
    const [o] = N2(a.increment, e, t, a.rx, a.ry, 1.5, 0, n), c = Wd(o, null, n);
    l = l.concat(c);
  }
  return {
    estimatedPoints: r,
    opset: { type: "path", ops: l }
  };
}
function D2(e, t, n, a, i, r, l, o, c) {
  const d = e, s = t;
  let u = Math.abs(n / 2), f = Math.abs(a / 2);
  u += Ue(u * 0.01, c), f += Ue(f * 0.01, c);
  let h = i, U = r;
  for (; h < 0; )
    h += Math.PI * 2, U += Math.PI * 2;
  U - h > Math.PI * 2 && (h = 0, U = Math.PI * 2);
  const m = Math.PI * 2 / c.curveStepCount, g = Math.min(m / 2, (U - h) / 2), b = O2(g, d, s, u, f, h, U, 1, c);
  if (!c.disableMultiStroke) {
    const v = O2(g, d, s, u, f, h, U, 1.5, c);
    b.push(...v);
  }
  return l && (o ? b.push(...Ci(d, s, d + u * Math.cos(h), s + f * Math.sin(h), c), ...Ci(d, s, d + u * Math.cos(U), s + f * Math.sin(U), c)) : b.push({ op: "lineTo", data: [d, s] }, { op: "lineTo", data: [d + u * Math.cos(h), s + f * Math.sin(h)] })), { type: "path", ops: b };
}
function L2(e, t) {
  const n = Mb(kb(R0(e))), a = [];
  let i = [0, 0], r = [0, 0];
  for (const { key: l, data: o } of n)
    switch (l) {
      case "M": {
        r = [o[0], o[1]], i = [o[0], o[1]];
        break;
      }
      case "L":
        a.push(...Ci(r[0], r[1], o[0], o[1], t)), r = [o[0], o[1]];
        break;
      case "C": {
        const [c, d, s, u, f, h] = o;
        a.push(...PS(c, d, s, u, f, h, r, t)), r = [f, h];
        break;
      }
      case "Z":
        a.push(...Ci(r[0], r[1], i[0], i[1], t)), r = [i[0], i[1]];
        break;
    }
  return { type: "path", ops: a };
}
function qf(e, t) {
  const n = [];
  for (const a of e)
    if (a.length) {
      const i = t.maxRandomnessOffset || 0, r = a.length;
      if (r > 2) {
        n.push({ op: "move", data: [a[0][0] + Ue(i, t), a[0][1] + Ue(i, t)] });
        for (let l = 1; l < r; l++)
          n.push({ op: "lineTo", data: [a[l][0] + Ue(i, t), a[l][1] + Ue(i, t)] });
      }
    }
  return { type: "fillPath", ops: n };
}
function Nl(e, t) {
  return wS(t, MS).fillPolygons(e, t);
}
function _S(e, t, n, a, i, r, l) {
  const o = e, c = t;
  let d = Math.abs(n / 2), s = Math.abs(a / 2);
  d += Ue(d * 0.01, l), s += Ue(s * 0.01, l);
  let u = i, f = r;
  for (; u < 0; )
    u += Math.PI * 2, f += Math.PI * 2;
  f - u > Math.PI * 2 && (u = 0, f = Math.PI * 2);
  const h = (f - u) / l.curveStepCount, U = [];
  for (let m = u; m <= f; m = m + h)
    U.push([o + d * Math.cos(m), c + s * Math.sin(m)]);
  return U.push([o + d * Math.cos(f), c + s * Math.sin(f)]), U.push([o, c]), Nl([U], l);
}
function AS(e, t) {
  return Ue(e, t);
}
function DS(e, t, n) {
  return Xd(e, t, n);
}
function LS(e, t, n, a, i) {
  return Ci(e, t, n, a, i, !0);
}
function RS(e) {
  const t = Object.assign({}, e);
  return t.randomizer = void 0, e.seed && (t.seed = e.seed + 1), t;
}
function _b(e) {
  return e.randomizer || (e.randomizer = new xb(e.seed || 0)), e.randomizer.next();
}
function Xd(e, t, n, a = 1) {
  return n.roughness * a * (_b(n) * (t - e) + e);
}
function Ue(e, t, n = 1) {
  return Xd(-e, e, t, n);
}
function Ci(e, t, n, a, i, r = !1) {
  const l = r ? i.disableMultiStrokeFill : i.disableMultiStroke, o = R2(e, t, n, a, i, !0, !1);
  if (l)
    return o;
  const c = R2(e, t, n, a, i, !0, !0);
  return o.concat(c);
}
function R2(e, t, n, a, i, r, l) {
  const o = Math.pow(e - n, 2) + Math.pow(t - a, 2), c = Math.sqrt(o);
  let d = 1;
  c < 200 ? d = 1 : c > 500 ? d = 0.4 : d = -16668e-7 * c + 1.233334;
  let s = i.maxRandomnessOffset || 0;
  s * s * 100 > o && (s = c / 10);
  const u = s / 2, f = 0.2 + _b(i) * 0.2;
  let h = i.bowing * i.maxRandomnessOffset * (a - t) / 200, U = i.bowing * i.maxRandomnessOffset * (e - n) / 200;
  h = Ue(h, i, d), U = Ue(U, i, d);
  const m = [], g = () => Ue(u, i, d), b = () => Ue(s, i, d), v = i.preserveVertices;
  return l ? m.push({
    op: "move",
    data: [
      e + (v ? 0 : g()),
      t + (v ? 0 : g())
    ]
  }) : m.push({
    op: "move",
    data: [
      e + (v ? 0 : Ue(s, i, d)),
      t + (v ? 0 : Ue(s, i, d))
    ]
  }), l ? m.push({
    op: "bcurveTo",
    data: [
      h + e + (n - e) * f + g(),
      U + t + (a - t) * f + g(),
      h + e + 2 * (n - e) * f + g(),
      U + t + 2 * (a - t) * f + g(),
      n + (v ? 0 : g()),
      a + (v ? 0 : g())
    ]
  }) : m.push({
    op: "bcurveTo",
    data: [
      h + e + (n - e) * f + b(),
      U + t + (a - t) * f + b(),
      h + e + 2 * (n - e) * f + b(),
      U + t + 2 * (a - t) * f + b(),
      n + (v ? 0 : b()),
      a + (v ? 0 : b())
    ]
  }), m;
}
function P2(e, t, n) {
  const a = [];
  a.push([
    e[0][0] + Ue(t, n),
    e[0][1] + Ue(t, n)
  ]), a.push([
    e[0][0] + Ue(t, n),
    e[0][1] + Ue(t, n)
  ]);
  for (let i = 1; i < e.length; i++)
    a.push([
      e[i][0] + Ue(t, n),
      e[i][1] + Ue(t, n)
    ]), i === e.length - 1 && a.push([
      e[i][0] + Ue(t, n),
      e[i][1] + Ue(t, n)
    ]);
  return Wd(a, null, n);
}
function Wd(e, t, n) {
  const a = e.length, i = [];
  if (a > 3) {
    const r = [], l = 1 - n.curveTightness;
    i.push({ op: "move", data: [e[1][0], e[1][1]] });
    for (let o = 1; o + 2 < a; o++) {
      const c = e[o];
      r[0] = [c[0], c[1]], r[1] = [c[0] + (l * e[o + 1][0] - l * e[o - 1][0]) / 6, c[1] + (l * e[o + 1][1] - l * e[o - 1][1]) / 6], r[2] = [e[o + 1][0] + (l * e[o][0] - l * e[o + 2][0]) / 6, e[o + 1][1] + (l * e[o][1] - l * e[o + 2][1]) / 6], r[3] = [e[o + 1][0], e[o + 1][1]], i.push({ op: "bcurveTo", data: [r[1][0], r[1][1], r[2][0], r[2][1], r[3][0], r[3][1]] });
    }
  } else a === 3 ? (i.push({ op: "move", data: [e[1][0], e[1][1]] }), i.push({
    op: "bcurveTo",
    data: [
      e[1][0],
      e[1][1],
      e[2][0],
      e[2][1],
      e[2][0],
      e[2][1]
    ]
  })) : a === 2 && i.push(...Ci(e[0][0], e[0][1], e[1][0], e[1][1], n));
  return i;
}
function N2(e, t, n, a, i, r, l, o) {
  const c = o.roughness === 0, d = [], s = [];
  if (c) {
    e = e / 4, s.push([
      t + a * Math.cos(-e),
      n + i * Math.sin(-e)
    ]);
    for (let u = 0; u <= Math.PI * 2; u = u + e) {
      const f = [
        t + a * Math.cos(u),
        n + i * Math.sin(u)
      ];
      d.push(f), s.push(f);
    }
    s.push([
      t + a * Math.cos(0),
      n + i * Math.sin(0)
    ]), s.push([
      t + a * Math.cos(e),
      n + i * Math.sin(e)
    ]);
  } else {
    const u = Ue(0.5, o) - Math.PI / 2;
    s.push([
      Ue(r, o) + t + 0.9 * a * Math.cos(u - e),
      Ue(r, o) + n + 0.9 * i * Math.sin(u - e)
    ]);
    const f = Math.PI * 2 + u - 0.01;
    for (let h = u; h < f; h = h + e) {
      const U = [
        Ue(r, o) + t + a * Math.cos(h),
        Ue(r, o) + n + i * Math.sin(h)
      ];
      d.push(U), s.push(U);
    }
    s.push([
      Ue(r, o) + t + a * Math.cos(u + Math.PI * 2 + l * 0.5),
      Ue(r, o) + n + i * Math.sin(u + Math.PI * 2 + l * 0.5)
    ]), s.push([
      Ue(r, o) + t + 0.98 * a * Math.cos(u + l),
      Ue(r, o) + n + 0.98 * i * Math.sin(u + l)
    ]), s.push([
      Ue(r, o) + t + 0.9 * a * Math.cos(u + l * 0.5),
      Ue(r, o) + n + 0.9 * i * Math.sin(u + l * 0.5)
    ]);
  }
  return [s, d];
}
function O2(e, t, n, a, i, r, l, o, c) {
  const d = r + Ue(0.1, c), s = [];
  s.push([
    Ue(o, c) + t + 0.9 * a * Math.cos(d - e),
    Ue(o, c) + n + 0.9 * i * Math.sin(d - e)
  ]);
  for (let u = d; u <= l; u = u + e)
    s.push([
      Ue(o, c) + t + a * Math.cos(u),
      Ue(o, c) + n + i * Math.sin(u)
    ]);
  return s.push([
    t + a * Math.cos(l),
    n + i * Math.sin(l)
  ]), s.push([
    t + a * Math.cos(l),
    n + i * Math.sin(l)
  ]), Wd(s, null, c);
}
function PS(e, t, n, a, i, r, l, o) {
  const c = [], d = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.3];
  let s = [0, 0];
  const u = o.disableMultiStroke ? 1 : 2, f = o.preserveVertices;
  for (let h = 0; h < u; h++)
    h === 0 ? c.push({ op: "move", data: [l[0], l[1]] }) : c.push({ op: "move", data: [l[0] + (f ? 0 : Ue(d[0], o)), l[1] + (f ? 0 : Ue(d[0], o))] }), s = f ? [i, r] : [i + Ue(d[h], o), r + Ue(d[h], o)], c.push({
      op: "bcurveTo",
      data: [
        e + Ue(d[h], o),
        t + Ue(d[h], o),
        n + Ue(d[h], o),
        a + Ue(d[h], o),
        s[0],
        s[1]
      ]
    });
  return c;
}
function zo(e) {
  return [...e];
}
function NS(e, t = 0) {
  const n = e.length;
  if (n < 3)
    throw new Error("A curve must have at least three points.");
  const a = [];
  if (n === 3)
    a.push(zo(e[0]), zo(e[1]), zo(e[2]), zo(e[2]));
  else {
    const i = [];
    i.push(e[0], e[0]);
    for (let o = 1; o < e.length; o++)
      i.push(e[o]), o === e.length - 1 && i.push(e[o]);
    const r = [], l = 1 - t;
    a.push(zo(i[0]));
    for (let o = 1; o + 2 < i.length; o++) {
      const c = i[o];
      r[0] = [c[0], c[1]], r[1] = [c[0] + (l * i[o + 1][0] - l * i[o - 1][0]) / 6, c[1] + (l * i[o + 1][1] - l * i[o - 1][1]) / 6], r[2] = [i[o + 1][0] + (l * i[o][0] - l * i[o + 2][0]) / 6, i[o + 1][1] + (l * i[o][1] - l * i[o + 2][1]) / 6], r[3] = [i[o + 1][0], i[o + 1][1]], a.push(r[1], r[2], r[3]);
    }
  }
  return a;
}
function OS(e, t) {
  return Math.sqrt(hd(e, t));
}
function hd(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function $S(e, t, n) {
  const a = hd(t, n);
  if (a === 0)
    return hd(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), hd(e, Dr(t, n, i));
}
function Dr(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function zS(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let o = 3 * a[1] - 2 * n[1] - r[1];
  o *= o;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), o < d && (o = d), l + o;
}
function o1(e, t, n, a) {
  const i = a || [];
  if (zS(e, t) < n) {
    const r = e[t + 0];
    i.length ? OS(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], o = e[t + 1], c = e[t + 2], d = e[t + 3], s = Dr(l, o, 0.5), u = Dr(o, c, 0.5), f = Dr(c, d, 0.5), h = Dr(s, u, 0.5), U = Dr(u, f, 0.5), m = Dr(h, U, 0.5);
    o1([l, s, h, m], 0, n, i), o1([m, U, f, d], 0, n, i);
  }
  return i;
}
function s1(e, t, n, a, i) {
  const r = i || [], l = e[t], o = e[n - 1];
  let c = 0, d = 1;
  for (let s = t + 1; s < n - 1; ++s) {
    const u = $S(e[s], l, o);
    u > c && (c = u, d = s);
  }
  return Math.sqrt(c) > a ? (s1(e, t, d + 1, a, r), s1(e, d, n, a, r)) : (r.length || r.push(l), r.push(o)), r;
}
function FS(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    o1(e, l, t, a);
  }
  return n && n > 0 ? s1(a, 0, a.length, n) : a;
}
function BS(e, t) {
  return Math.sqrt(pd(e, t));
}
function pd(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function HS(e, t, n) {
  const a = pd(t, n);
  if (a === 0)
    return pd(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), pd(e, Lr(t, n, i));
}
function Lr(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function XS(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let o = 3 * a[1] - 2 * n[1] - r[1];
  o *= o;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), o < d && (o = d), l + o;
}
function c1(e, t, n, a) {
  const i = a || [];
  if (XS(e, t) < n) {
    const r = e[t + 0];
    i.length ? BS(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], o = e[t + 1], c = e[t + 2], d = e[t + 3], s = Lr(l, o, 0.5), u = Lr(o, c, 0.5), f = Lr(c, d, 0.5), h = Lr(s, u, 0.5), U = Lr(u, f, 0.5), m = Lr(h, U, 0.5);
    c1([l, s, h, m], 0, n, i), c1([m, U, f, d], 0, n, i);
  }
  return i;
}
function WS(e, t) {
  return d1(e, 0, e.length, t);
}
function d1(e, t, n, a, i) {
  const r = i || [], l = e[t], o = e[n - 1];
  let c = 0, d = 1;
  for (let s = t + 1; s < n - 1; ++s) {
    const u = HS(e[s], l, o);
    u > c && (c = u, d = s);
  }
  return Math.sqrt(c) > a ? (d1(e, t, d + 1, a, r), d1(e, d, n, a, r)) : (r.length || r.push(l), r.push(o)), r;
}
function VS(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    c1(e, l, t, a);
  }
  return a;
}
function GS(e, t, n) {
  const a = R0(e), i = Mb(kb(a)), r = [];
  let l = [], o = [0, 0], c = [];
  const d = () => {
    c.length >= 4 && l.push(...VS(c, t)), c = [];
  }, s = () => {
    d(), l.length && (r.push(l), l = []);
  };
  for (const { key: f, data: h } of i)
    switch (f) {
      case "M":
        s(), o = [h[0], h[1]], l.push(o);
        break;
      case "L":
        d(), l.push([h[0], h[1]]);
        break;
      case "C":
        if (!c.length) {
          const U = l.length ? l[l.length - 1] : o;
          c.push([U[0], U[1]]);
        }
        c.push([h[0], h[1]]), c.push([h[2], h[3]]), c.push([h[4], h[5]]);
        break;
      case "Z":
        d(), l.push([o[0], o[1]]);
        break;
    }
  if (s(), !n)
    return r;
  const u = [];
  for (const f of r) {
    const h = WS(f, n);
    h.length && u.push(h);
  }
  return u;
}
const Dn = "none";
class zs {
  constructor(t) {
    this.defaultOptions = {
      maxRandomnessOffset: 2,
      roughness: 1,
      bowing: 1,
      stroke: "#000",
      strokeWidth: 1,
      curveTightness: 0,
      curveFitting: 0.95,
      curveStepCount: 9,
      fillStyle: "hachure",
      fillWeight: -1,
      hachureAngle: -41,
      hachureGap: -1,
      dashOffset: -1,
      dashGap: -1,
      zigzagOffset: -1,
      seed: 0,
      disableMultiStroke: !1,
      disableMultiStrokeFill: !1,
      preserveVertices: !1,
      fillShapeRoughnessGain: 0.8
    }, this.config = t || {}, this.config.options && (this.defaultOptions = this._o(this.config.options));
  }
  static newSeed() {
    return ES();
  }
  _o(t) {
    return t ? Object.assign({}, this.defaultOptions, t) : this.defaultOptions;
  }
  _d(t, n, a) {
    return { shape: t, sets: n || [], options: a || this.defaultOptions };
  }
  line(t, n, a, i, r) {
    const l = this._o(r);
    return this._d("line", [Ib(t, n, a, i, l)], l);
  }
  rectangle(t, n, a, i, r) {
    const l = this._o(r), o = [], c = IS(t, n, a, i, l);
    if (l.fill) {
      const d = [[t, n], [t + a, n], [t + a, n + i], [t, n + i]];
      l.fillStyle === "solid" ? o.push(qf([d], l)) : o.push(Nl([d], l));
    }
    return l.stroke !== Dn && o.push(c), this._d("rectangle", o, l);
  }
  ellipse(t, n, a, i, r) {
    const l = this._o(r), o = [], c = Tb(a, i, l), d = l1(t, n, l, c);
    if (l.fill)
      if (l.fillStyle === "solid") {
        const s = l1(t, n, l, c).opset;
        s.type = "fillPath", o.push(s);
      } else
        o.push(Nl([d.estimatedPoints], l));
    return l.stroke !== Dn && o.push(d.opset), this._d("ellipse", o, l);
  }
  circle(t, n, a, i) {
    const r = this.ellipse(t, n, a, a, i);
    return r.shape = "circle", r;
  }
  linearPath(t, n) {
    const a = this._o(n);
    return this._d("linearPath", [fd(t, !1, a)], a);
  }
  arc(t, n, a, i, r, l, o = !1, c) {
    const d = this._o(c), s = [], u = D2(t, n, a, i, r, l, o, !0, d);
    if (o && d.fill)
      if (d.fillStyle === "solid") {
        const f = Object.assign({}, d);
        f.disableMultiStroke = !0;
        const h = D2(t, n, a, i, r, l, !0, !1, f);
        h.type = "fillPath", s.push(h);
      } else
        s.push(_S(t, n, a, i, r, l, d));
    return d.stroke !== Dn && s.push(u), this._d("arc", s, d);
  }
  curve(t, n) {
    const a = this._o(n), i = [], r = A2(t, a);
    if (a.fill && a.fill !== Dn && t.length >= 3)
      if (a.fillStyle === "solid") {
        const l = A2(t, Object.assign(Object.assign({}, a), { disableMultiStroke: !0, roughness: a.roughness ? a.roughness + a.fillShapeRoughnessGain : 0 }));
        i.push({
          type: "fillPath",
          ops: this._mergedShape(l.ops)
        });
      } else {
        const l = NS(t), o = FS(l, 10, (1 + a.roughness) / 2);
        i.push(Nl([o], a));
      }
    return a.stroke !== Dn && i.push(r), this._d("curve", i, a);
  }
  polygon(t, n) {
    const a = this._o(n), i = [], r = fd(t, !0, a);
    return a.fill && (a.fillStyle === "solid" ? i.push(qf([t], a)) : i.push(Nl([t], a))), a.stroke !== Dn && i.push(r), this._d("polygon", i, a);
  }
  path(t, n) {
    const a = this._o(n), i = [];
    if (!t)
      return this._d("path", i, a);
    t = (t || "").replace(/\n/g, " ").replace(/(-\s)/g, "-").replace("/(ss)/g", " ");
    const r = a.fill && a.fill !== "transparent" && a.fill !== Dn, l = a.stroke !== Dn, o = !!(a.simplification && a.simplification < 1), c = o ? 4 - 4 * (a.simplification || 1) : (1 + a.roughness) / 2, d = GS(t, 1, c), s = L2(t, a);
    if (r)
      if (a.fillStyle === "solid")
        if (d.length === 1) {
          const u = L2(t, Object.assign(Object.assign({}, a), { disableMultiStroke: !0, roughness: a.roughness ? a.roughness + a.fillShapeRoughnessGain : 0 }));
          i.push({
            type: "fillPath",
            ops: this._mergedShape(u.ops)
          });
        } else
          i.push(qf(d, a));
      else
        i.push(Nl(d, a));
    return l && (o ? d.forEach((u) => {
      i.push(fd(u, !1, a));
    }) : i.push(s)), this._d("path", i, a);
  }
  opsToPath(t, n) {
    let a = "";
    for (const i of t.ops) {
      const r = typeof n == "number" && n >= 0 ? i.data.map((l) => +l.toFixed(n)) : i.data;
      switch (i.op) {
        case "move":
          a += `M${r[0]} ${r[1]} `;
          break;
        case "bcurveTo":
          a += `C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;
          break;
        case "lineTo":
          a += `L${r[0]} ${r[1]} `;
          break;
      }
    }
    return a.trim();
  }
  toPaths(t) {
    const n = t.sets || [], a = t.options || this.defaultOptions, i = [];
    for (const r of n) {
      let l = null;
      switch (r.type) {
        case "path":
          l = {
            d: this.opsToPath(r),
            stroke: a.stroke,
            strokeWidth: a.strokeWidth,
            fill: Dn
          };
          break;
        case "fillPath":
          l = {
            d: this.opsToPath(r),
            stroke: Dn,
            strokeWidth: 0,
            fill: a.fill || Dn
          };
          break;
        case "fillSketch":
          l = this.fillSketch(r, a);
          break;
      }
      l && i.push(l);
    }
    return i;
  }
  fillSketch(t, n) {
    let a = n.fillWeight;
    return a < 0 && (a = n.strokeWidth / 2), {
      d: this.opsToPath(t),
      stroke: n.fill || Dn,
      strokeWidth: a,
      fill: Dn
    };
  }
  _mergedShape(t) {
    return t.filter((n, a) => a === 0 ? !0 : n.op !== "move");
  }
}
class jS {
  constructor(t, n) {
    this.canvas = t, this.ctx = this.canvas.getContext("2d"), this.gen = new zs(n);
  }
  draw(t) {
    const n = t.sets || [], a = t.options || this.getDefaultOptions(), i = this.ctx, r = t.options.fixedDecimalPlaceDigits;
    for (const l of n)
      switch (l.type) {
        case "path":
          i.save(), i.strokeStyle = a.stroke === "none" ? "transparent" : a.stroke, i.lineWidth = a.strokeWidth, a.strokeLineDash && i.setLineDash(a.strokeLineDash), a.strokeLineDashOffset && (i.lineDashOffset = a.strokeLineDashOffset), this._drawToContext(i, l, r), i.restore();
          break;
        case "fillPath": {
          i.save(), i.fillStyle = a.fill || "";
          const o = t.shape === "curve" || t.shape === "polygon" || t.shape === "path" ? "evenodd" : "nonzero";
          this._drawToContext(i, l, r, o), i.restore();
          break;
        }
        case "fillSketch":
          this.fillSketch(i, l, a);
          break;
      }
  }
  fillSketch(t, n, a) {
    let i = a.fillWeight;
    i < 0 && (i = a.strokeWidth / 2), t.save(), a.fillLineDash && t.setLineDash(a.fillLineDash), a.fillLineDashOffset && (t.lineDashOffset = a.fillLineDashOffset), t.strokeStyle = a.fill || "", t.lineWidth = i, this._drawToContext(t, n, a.fixedDecimalPlaceDigits), t.restore();
  }
  _drawToContext(t, n, a, i = "nonzero") {
    t.beginPath();
    for (const r of n.ops) {
      const l = typeof a == "number" && a >= 0 ? r.data.map((o) => +o.toFixed(a)) : r.data;
      switch (r.op) {
        case "move":
          t.moveTo(l[0], l[1]);
          break;
        case "bcurveTo":
          t.bezierCurveTo(l[0], l[1], l[2], l[3], l[4], l[5]);
          break;
        case "lineTo":
          t.lineTo(l[0], l[1]);
          break;
      }
    }
    n.type === "fillPath" ? t.fill(i) : t.stroke();
  }
  get generator() {
    return this.gen;
  }
  getDefaultOptions() {
    return this.gen.defaultOptions;
  }
  line(t, n, a, i, r) {
    const l = this.gen.line(t, n, a, i, r);
    return this.draw(l), l;
  }
  rectangle(t, n, a, i, r) {
    const l = this.gen.rectangle(t, n, a, i, r);
    return this.draw(l), l;
  }
  ellipse(t, n, a, i, r) {
    const l = this.gen.ellipse(t, n, a, i, r);
    return this.draw(l), l;
  }
  circle(t, n, a, i) {
    const r = this.gen.circle(t, n, a, i);
    return this.draw(r), r;
  }
  linearPath(t, n) {
    const a = this.gen.linearPath(t, n);
    return this.draw(a), a;
  }
  polygon(t, n) {
    const a = this.gen.polygon(t, n);
    return this.draw(a), a;
  }
  arc(t, n, a, i, r, l, o = !1, c) {
    const d = this.gen.arc(t, n, a, i, r, l, o, c);
    return this.draw(d), d;
  }
  curve(t, n) {
    const a = this.gen.curve(t, n);
    return this.draw(a), a;
  }
  path(t, n) {
    const a = this.gen.path(t, n);
    return this.draw(a), a;
  }
}
const $c = "http://www.w3.org/2000/svg";
class YS {
  constructor(t, n) {
    this.svg = t, this.gen = new zs(n);
  }
  draw(t) {
    const n = t.sets || [], a = t.options || this.getDefaultOptions(), i = this.svg.ownerDocument || window.document, r = i.createElementNS($c, "g"), l = t.options.fixedDecimalPlaceDigits;
    for (const o of n) {
      let c = null;
      switch (o.type) {
        case "path": {
          c = i.createElementNS($c, "path"), c.setAttribute("d", this.opsToPath(o, l)), c.setAttribute("stroke", a.stroke), c.setAttribute("stroke-width", a.strokeWidth + ""), c.setAttribute("fill", "none"), a.strokeLineDash && c.setAttribute("stroke-dasharray", a.strokeLineDash.join(" ").trim()), a.strokeLineDashOffset && c.setAttribute("stroke-dashoffset", `${a.strokeLineDashOffset}`);
          break;
        }
        case "fillPath": {
          c = i.createElementNS($c, "path"), c.setAttribute("d", this.opsToPath(o, l)), c.setAttribute("stroke", "none"), c.setAttribute("stroke-width", "0"), c.setAttribute("fill", a.fill || ""), (t.shape === "curve" || t.shape === "polygon") && c.setAttribute("fill-rule", "evenodd");
          break;
        }
        case "fillSketch": {
          c = this.fillSketch(i, o, a);
          break;
        }
      }
      c && r.appendChild(c);
    }
    return r;
  }
  fillSketch(t, n, a) {
    let i = a.fillWeight;
    i < 0 && (i = a.strokeWidth / 2);
    const r = t.createElementNS($c, "path");
    return r.setAttribute("d", this.opsToPath(n, a.fixedDecimalPlaceDigits)), r.setAttribute("stroke", a.fill || ""), r.setAttribute("stroke-width", i + ""), r.setAttribute("fill", "none"), a.fillLineDash && r.setAttribute("stroke-dasharray", a.fillLineDash.join(" ").trim()), a.fillLineDashOffset && r.setAttribute("stroke-dashoffset", `${a.fillLineDashOffset}`), r;
  }
  get generator() {
    return this.gen;
  }
  getDefaultOptions() {
    return this.gen.defaultOptions;
  }
  opsToPath(t, n) {
    return this.gen.opsToPath(t, n);
  }
  line(t, n, a, i, r) {
    const l = this.gen.line(t, n, a, i, r);
    return this.draw(l);
  }
  rectangle(t, n, a, i, r) {
    const l = this.gen.rectangle(t, n, a, i, r);
    return this.draw(l);
  }
  ellipse(t, n, a, i, r) {
    const l = this.gen.ellipse(t, n, a, i, r);
    return this.draw(l);
  }
  circle(t, n, a, i) {
    const r = this.gen.circle(t, n, a, i);
    return this.draw(r);
  }
  linearPath(t, n) {
    const a = this.gen.linearPath(t, n);
    return this.draw(a);
  }
  polygon(t, n) {
    const a = this.gen.polygon(t, n);
    return this.draw(a);
  }
  arc(t, n, a, i, r, l, o = !1, c) {
    const d = this.gen.arc(t, n, a, i, r, l, o, c);
    return this.draw(d);
  }
  curve(t, n) {
    const a = this.gen.curve(t, n);
    return this.draw(a);
  }
  path(t, n) {
    const a = this.gen.path(t, n);
    return this.draw(a);
  }
}
const wr = {
  canvas(e, t) {
    return new jS(e, t);
  },
  svg(e, t) {
    return new YS(e, t);
  },
  generator(e) {
    return new zs(e);
  },
  newSeed() {
    return zs.newSeed();
  }
};
function $2(e, t, n, a = (i) => i) {
  return e * a(0.5 - t * (0.5 - n));
}
function ZS(e) {
  return [-e[0], -e[1]];
}
function ca(e, t) {
  return [e[0] + t[0], e[1] + t[1]];
}
function Xn(e, t) {
  return [e[0] - t[0], e[1] - t[1]];
}
function oa(e, t) {
  return [e[0] * t, e[1] * t];
}
function KS(e, t) {
  return [e[0] / t, e[1] / t];
}
function Fo(e) {
  return [e[1], -e[0]];
}
function z2(e, t) {
  return e[0] * t[0] + e[1] * t[1];
}
function qS(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}
function JS(e) {
  return Math.hypot(e[0], e[1]);
}
function QS(e) {
  return e[0] * e[0] + e[1] * e[1];
}
function F2(e, t) {
  return QS(Xn(e, t));
}
function Ab(e) {
  return KS(e, JS(e));
}
function ek(e, t) {
  return Math.hypot(e[1] - t[1], e[0] - t[0]);
}
function Bo(e, t, n) {
  let a = Math.sin(n), i = Math.cos(n), r = e[0] - t[0], l = e[1] - t[1], o = r * i - l * a, c = r * a + l * i;
  return [o + t[0], c + t[1]];
}
function u1(e, t, n) {
  return ca(e, oa(Xn(t, e), n));
}
function B2(e, t, n) {
  return ca(e, oa(t, n));
}
var { min: kl, PI: tk } = Math, H2 = 0.275, Ho = tk + 1e-4;
function nk(e, t = {}) {
  let { size: n = 16, smoothing: a = 0.5, thinning: i = 0.5, simulatePressure: r = !0, easing: l = (N) => N, start: o = {}, end: c = {}, last: d = !1 } = t, { cap: s = !0, easing: u = (N) => N * (2 - N) } = o, { cap: f = !0, easing: h = (N) => --N * N * N + 1 } = c;
  if (e.length === 0 || n <= 0) return [];
  let U = e[e.length - 1].runningLength, m = o.taper === !1 ? 0 : o.taper === !0 ? Math.max(n, U) : o.taper, g = c.taper === !1 ? 0 : c.taper === !0 ? Math.max(n, U) : c.taper, b = Math.pow(n * a, 2), v = [], y = [], w = e.slice(0, 10).reduce((N, j) => {
    let z = j.pressure;
    if (r) {
      let Y = kl(1, j.distance / n), ie = kl(1, 1 - Y);
      z = kl(1, N + (ie - N) * (Y * H2));
    }
    return (N + z) / 2;
  }, e[0].pressure), x = $2(n, i, e[e.length - 1].pressure, l), S, E = e[0].vector, M = e[0].point, I = M, T = M, A = I, D = !1;
  for (let N = 0; N < e.length; N++) {
    let { pressure: j } = e[N], { point: z, vector: Y, distance: ie, runningLength: pe } = e[N];
    if (N < e.length - 1 && U - pe < 3) continue;
    if (i) {
      if (r) {
        let Le = kl(1, ie / n), Be = kl(1, 1 - Le);
        j = kl(1, w + (Be - w) * (Le * H2));
      }
      x = $2(n, i, j, l);
    } else x = n / 2;
    S === void 0 && (S = x);
    let ue = pe < m ? u(pe / m) : 1, Ve = U - pe < g ? h((U - pe) / g) : 1;
    x = Math.max(0.01, x * Math.min(ue, Ve));
    let Ge = (N < e.length - 1 ? e[N + 1] : e[N]).vector, je = N < e.length - 1 ? z2(Y, Ge) : 1, Fe = z2(Y, E) < 0 && !D, At = je !== null && je < 0;
    if (Fe || At) {
      let Le = oa(Fo(E), x);
      for (let Be = 1 / 13, xt = 0; xt <= 1; xt += Be) T = Bo(Xn(z, Le), z, Ho * xt), v.push(T), A = Bo(ca(z, Le), z, Ho * -xt), y.push(A);
      M = T, I = A, At && (D = !0);
      continue;
    }
    if (D = !1, N === e.length - 1) {
      let Le = oa(Fo(Y), x);
      v.push(Xn(z, Le)), y.push(ca(z, Le));
      continue;
    }
    let qt = oa(Fo(u1(Ge, Y, je)), x);
    T = Xn(z, qt), (N <= 1 || F2(M, T) > b) && (v.push(T), M = T), A = ca(z, qt), (N <= 1 || F2(I, A) > b) && (y.push(A), I = A), w = j, E = Y;
  }
  let R = e[0].point.slice(0, 2), O = e.length > 1 ? e[e.length - 1].point.slice(0, 2) : ca(e[0].point, [1, 1]), $ = [], F = [];
  if (e.length === 1) {
    if (!(m || g) || d) {
      let N = B2(R, Ab(Fo(Xn(R, O))), -(S || x)), j = [];
      for (let z = 1 / 13, Y = z; Y <= 1; Y += z) j.push(Bo(N, R, Ho * 2 * Y));
      return j;
    }
  } else {
    if (!(m || g && e.length === 1)) if (s) for (let j = 1 / 13, z = j; z <= 1; z += j) {
      let Y = Bo(y[0], R, Ho * z);
      $.push(Y);
    }
    else {
      let j = Xn(v[0], y[0]), z = oa(j, 0.5), Y = oa(j, 0.51);
      $.push(Xn(R, z), Xn(R, Y), ca(R, Y), ca(R, z));
    }
    let N = Fo(ZS(e[e.length - 1].vector));
    if (g || m && e.length === 1) F.push(O);
    else if (f) {
      let j = B2(O, N, x);
      for (let z = 1 / 29, Y = z; Y < 1; Y += z) F.push(Bo(j, O, Ho * 3 * Y));
    } else F.push(ca(O, oa(N, x)), ca(O, oa(N, x * 0.99)), Xn(O, oa(N, x * 0.99)), Xn(O, oa(N, x)));
  }
  return v.concat(F, y.reverse(), $);
}
function ak(e, t = {}) {
  var n;
  let { streamline: a = 0.5, size: i = 16, last: r = !1 } = t;
  if (e.length === 0) return [];
  let l = 0.15 + (1 - a) * 0.85, o = Array.isArray(e[0]) ? e : e.map(({ x: h, y: U, pressure: m = 0.5 }) => [h, U, m]);
  if (o.length === 2) {
    let h = o[1];
    o = o.slice(0, -1);
    for (let U = 1; U < 5; U++) o.push(u1(o[0], h, U / 4));
  }
  o.length === 1 && (o = [...o, [...ca(o[0], [1, 1]), ...o[0].slice(2)]]);
  let c = [{ point: [o[0][0], o[0][1]], pressure: o[0][2] >= 0 ? o[0][2] : 0.25, vector: [1, 1], distance: 0, runningLength: 0 }], d = !1, s = 0, u = c[0], f = o.length - 1;
  for (let h = 1; h < o.length; h++) {
    let U = r && h === f ? o[h].slice(0, 2) : u1(u.point, o[h], l);
    if (qS(u.point, U)) continue;
    let m = ek(U, u.point);
    if (s += m, h < f && !d) {
      if (s < i) continue;
      d = !0;
    }
    u = { point: U, pressure: o[h][2] >= 0 ? o[h][2] : 0.5, vector: Ab(Xn(u.point, U)), distance: m, runningLength: s }, c.push(u);
  }
  return c[0].vector = ((n = c[1]) == null ? void 0 : n.vector) || [0, 0], c;
}
function ik(e, t = {}) {
  return nk(ak(e, t), t);
}
function Db(e) {
  var t, n, a = "";
  if (typeof e == "string" || typeof e == "number")
    a += e;
  else if (typeof e == "object")
    if (Array.isArray(e))
      for (t = 0; t < e.length; t++)
        e[t] && (n = Db(e[t])) && (a && (a += " "), a += n);
    else
      for (t in e)
        e[t] && (a && (a += " "), a += t);
  return a;
}
function ae() {
  for (var e = 0, t, n, a = ""; e < arguments.length; )
    (t = arguments[e++]) && (n = Db(t)) && (a && (a += " "), a += n);
  return a;
}
function rk(e, t) {
  return Math.sqrt(Ud(e, t));
}
function Ud(e, t) {
  return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2);
}
function lk(e, t, n) {
  const a = Ud(t, n);
  if (a === 0)
    return Ud(e, t);
  let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a;
  return i = Math.max(0, Math.min(1, i)), Ud(e, Rr(t, n, i));
}
function Rr(e, t, n) {
  return [
    e[0] + (t[0] - e[0]) * n,
    e[1] + (t[1] - e[1]) * n
  ];
}
function ok(e, t) {
  const n = e[t + 0], a = e[t + 1], i = e[t + 2], r = e[t + 3];
  let l = 3 * a[0] - 2 * n[0] - r[0];
  l *= l;
  let o = 3 * a[1] - 2 * n[1] - r[1];
  o *= o;
  let c = 3 * i[0] - 2 * r[0] - n[0];
  c *= c;
  let d = 3 * i[1] - 2 * r[1] - n[1];
  return d *= d, l < c && (l = c), o < d && (o = d), l + o;
}
function f1(e, t, n, a) {
  const i = a || [];
  if (ok(e, t) < n) {
    const r = e[t + 0];
    i.length ? rk(i[i.length - 1], r) > 1 && i.push(r) : i.push(r), i.push(e[t + 3]);
  } else {
    const l = e[t + 0], o = e[t + 1], c = e[t + 2], d = e[t + 3], s = Rr(l, o, 0.5), u = Rr(o, c, 0.5), f = Rr(c, d, 0.5), h = Rr(s, u, 0.5), U = Rr(u, f, 0.5), m = Rr(h, U, 0.5);
    f1([l, s, h, m], 0, n, i), f1([m, U, f, d], 0, n, i);
  }
  return i;
}
function sk(e, t) {
  return Vd(e, 0, e.length, t);
}
function Vd(e, t, n, a, i) {
  const r = i || [], l = e[t], o = e[n - 1];
  let c = 0, d = 1;
  for (let s = t + 1; s < n - 1; ++s) {
    const u = lk(e[s], l, o);
    u > c && (c = u, d = s);
  }
  return Math.sqrt(c) > a ? (Vd(e, t, d + 1, a, r), Vd(e, d, n, a, r)) : (r.length || r.push(l), r.push(o)), r;
}
function ck(e, t = 0.15, n) {
  const a = [], i = (e.length - 1) / 3;
  for (let r = 0; r < i; r++) {
    const l = r * 3;
    f1(e, l, t, a);
  }
  return Vd(a, 0, a.length, n);
}
var P0 = {};
Object.defineProperty(P0, "__esModule", { value: !0 });
var Lb = P0.sanitizeUrl = void 0, dk = /^([^\w]*)(javascript|data|vbscript)/im, uk = /&#(\w+)(^\w|;)?/g, fk = /&(newline|tab);/gi, hk = /[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim, pk = /^.+(:|&colon;)/gim, Uk = [".", "/"];
function mk(e) {
  return Uk.indexOf(e[0]) > -1;
}
function gk(e) {
  return e.replace(uk, function(t, n) {
    return String.fromCharCode(n);
  });
}
function bk(e) {
  var t = gk(e || "").replace(fk, "").replace(hk, "").trim();
  if (!t)
    return "about:blank";
  if (mk(t))
    return t;
  var n = t.match(pk);
  if (!n)
    return t;
  var a = n[0];
  return dk.test(a) ? "about:blank" : t;
}
Lb = P0.sanitizeUrl = bk;
const Rb = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
function zl(e, t, n) {
  const a = n[0];
  if (t != null && e >= t)
    throw new Error(e + " >= " + t);
  if (e.slice(-1) === a || t && t.slice(-1) === a)
    throw new Error("trailing zero");
  if (t) {
    let l = 0;
    for (; (e[l] || a) === t[l]; )
      l++;
    if (l > 0)
      return t.slice(0, l) + zl(e.slice(l), t.slice(l), n);
  }
  const i = e ? n.indexOf(e[0]) : 0, r = t != null ? n.indexOf(t[0]) : n.length;
  if (r - i > 1) {
    const l = Math.round(0.5 * (i + r));
    return n[l];
  } else
    return t && t.length > 1 ? t.slice(0, 1) : n[i] + zl(e.slice(1), null, n);
}
function Pb(e) {
  if (e.length !== Nb(e[0]))
    throw new Error("invalid integer part of order key: " + e);
}
function Nb(e) {
  if (e >= "a" && e <= "z")
    return e.charCodeAt(0) - 97 + 2;
  if (e >= "A" && e <= "Z")
    return 90 - e.charCodeAt(0) + 2;
  throw new Error("invalid order key head: " + e);
}
function as(e) {
  const t = Nb(e[0]);
  if (t > e.length)
    throw new Error("invalid order key: " + e);
  return e.slice(0, t);
}
function X2(e, t) {
  if (e === "A" + t[0].repeat(26))
    throw new Error("invalid order key: " + e);
  const n = as(e);
  if (e.slice(n.length).slice(-1) === t[0])
    throw new Error("invalid order key: " + e);
}
function W2(e, t) {
  Pb(e);
  const [n, ...a] = e.split("");
  let i = !0;
  for (let r = a.length - 1; i && r >= 0; r--) {
    const l = t.indexOf(a[r]) + 1;
    l === t.length ? a[r] = t[0] : (a[r] = t[l], i = !1);
  }
  if (i) {
    if (n === "Z")
      return "a" + t[0];
    if (n === "z")
      return null;
    const r = String.fromCharCode(n.charCodeAt(0) + 1);
    return r > "a" ? a.push(t[0]) : a.pop(), r + a.join("");
  } else
    return n + a.join("");
}
function vk(e, t) {
  Pb(e);
  const [n, ...a] = e.split("");
  let i = !0;
  for (let r = a.length - 1; i && r >= 0; r--) {
    const l = t.indexOf(a[r]) - 1;
    l === -1 ? a[r] = t.slice(-1) : (a[r] = t[l], i = !1);
  }
  if (i) {
    if (n === "a")
      return "Z" + t.slice(-1);
    if (n === "A")
      return null;
    const r = String.fromCharCode(n.charCodeAt(0) - 1);
    return r < "Z" ? a.push(t.slice(-1)) : a.pop(), r + a.join("");
  } else
    return n + a.join("");
}
function Ml(e, t, n = Rb) {
  if (e != null && X2(e, n), t != null && X2(t, n), e != null && t != null && e >= t)
    throw new Error(e + " >= " + t);
  if (e == null) {
    if (t == null)
      return "a" + n[0];
    const c = as(t), d = t.slice(c.length);
    if (c === "A" + n[0].repeat(26))
      return c + zl("", d, n);
    if (c < t)
      return c;
    const s = vk(c, n);
    if (s == null)
      throw new Error("cannot decrement any more");
    return s;
  }
  if (t == null) {
    const c = as(e), d = e.slice(c.length), s = W2(c, n);
    return s ?? c + zl(d, null, n);
  }
  const a = as(e), i = e.slice(a.length), r = as(t), l = t.slice(r.length);
  if (a === r)
    return a + zl(i, l, n);
  const o = W2(a, n);
  if (o == null)
    throw new Error("cannot increment any more");
  return o < t ? o : a + zl(i, null, n);
}
function h1(e, t, n, a = Rb) {
  if (n === 0)
    return [];
  if (n === 1)
    return [Ml(e, t, a)];
  if (t == null) {
    let l = Ml(e, t, a);
    const o = [l];
    for (let c = 0; c < n - 1; c++)
      l = Ml(l, t, a), o.push(l);
    return o;
  }
  if (e == null) {
    let l = Ml(e, t, a);
    const o = [l];
    for (let c = 0; c < n - 1; c++)
      l = Ml(e, l, a), o.push(l);
    return o.reverse(), o;
  }
  const i = Math.floor(n / 2), r = Ml(e, t, a);
  return [
    ...h1(e, r, i, a),
    r,
    ...h1(r, t, n - i - 1, a)
  ];
}
const vl = (() => {
  if (typeof self > "u") return !1;
  if ("top" in self && self !== top) try {
  } catch {
    return !1;
  }
  else if ("showOpenFilePicker" in self) return "showOpenFilePicker";
  return !1;
})(), yk = vl ? import("./file-open-002ab408-DN9HoVxI.js") : import("./file-open-7c801643-7JqFgE4-.js");
async function wk(...e) {
  return (await yk).default(...e);
}
vl ? import("./directory-open-4ed118d0-O_QfH9Tw.js") : import("./directory-open-01563666-Dy1naDTQ.js");
const Ek = vl ? import("./file-save-745eba88-lCpg7dOn.js") : import("./file-save-3189631c-CPqqkX8Z.js");
async function xk(...e) {
  return (await Ek).default(...e);
}
var Sk = (e, t) => t.reduce((n, a) => (a in e && (n[a] = e[a]), n), {}), kk = 5, Ol = 5, Mk = 4, is = 4, rs = 1, ia = [0, 2, 4, 6, 8], ra = (e, t) => t.map((n) => Yt[e][n]), ke = { transparent: "transparent", black: "#1e1e1e", white: "#ffffff", gray: ra("gray", ia), red: ra("red", ia), pink: ra("pink", ia), grape: ra("grape", ia), violet: ra("violet", ia), blue: ra("blue", ia), cyan: ra("cyan", ia), teal: ra("teal", ia), green: ra("green", ia), yellow: ra("yellow", ia), orange: ra("orange", ia), bronze: ["#f8f1ee", "#eaddd7", "#d2bab0", "#a18072", "#846358"] }, Ob = Sk(ke, ["cyan", "blue", "violet", "grape", "pink", "green", "teal", "yellow", "orange", "red"]), $b = [ke.black, ke.red[is], ke.green[is], ke.blue[is], ke.yellow[is]], zb = [ke.transparent, ke.red[rs], ke.green[rs], ke.blue[rs], ke.yellow[rs]], Fb = [ke.white, "#f8f9fa", "#f5faff", "#fffce8", "#fdf8f6"], Ck = { transparent: ke.transparent, white: ke.white, gray: ke.gray, black: ke.black, bronze: ke.bronze, ...Ob }, Ik = { transparent: ke.transparent, white: ke.white, gray: ke.gray, black: ke.black, bronze: ke.bronze, ...Ob }, Tk = (e) => [ke.cyan[e], ke.blue[e], ke.violet[e], ke.grape[e], ke.pink[e], ke.green[e], ke.teal[e], ke.yellow[e], ke.orange[e], ke.red[e]], _k = (e, t, n) => `#${((1 << 24) + (e << 16) + (t << 8) + n).toString(16).slice(1)}`, Qa = /Mac|iPod|iPhone|iPad/.test(navigator.platform), Bb = /^Win/.test(navigator.platform), Ak = /\b(android)\b/i.test(navigator.userAgent), Fs = "netscape" in window && navigator.userAgent.indexOf("rv:") > 1 && navigator.userAgent.indexOf("Gecko") > 1, Dk = navigator.userAgent.indexOf("Chrome") !== -1, Lk = !Dk && navigator.userAgent.indexOf("Safari") !== -1, Hb = /iPad|iPhone/.test(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend" in document, Rk = () => {
  var e, t;
  return ((t = (e = navigator.brave) == null ? void 0 : e.isBrave) == null ? void 0 : t.name) === "isBrave";
}, p1 = typeof window < "u" && "ResizeObserver" in window, Pk = "Excalidraw", Nk = 36, Pr = 10, md = 8, Ok = 5, V2 = 1, $k = 30, pr = Math.PI / 12, zk = "red", Ye = { TEXT: "text", CROSSHAIR: "crosshair", GRABBING: "grabbing", GRAB: "grab", POINTER: "pointer", MOVE: "move", AUTO: "" }, Ki = { MAIN: 0, WHEEL: 1, SECONDARY: 2, TOUCH: -1, ERASER: 5 }, Cl = { enabled: "all", disabled: "none" }, zc = { UNSTARTED: -1, ENDED: 0, PLAYING: 1, PAUSED: 2, BUFFERING: 3, CUED: 5 }, Cn = { TEST: "test" }, ao = { SHAPE_ACTIONS_MENU: "App-menu__left", ZOOM_ACTIONS: "zoom-actions", SEARCH_MENU_INPUT_WRAPPER: "layer-ui__search-inputWrapper" }, Fl = "Xiaolai", Bs = "Segoe UI Emoji", ht = { Virgil: 1, Helvetica: 2, Cascadia: 3, Excalifont: 5, Nunito: 6, "Lilita One": 7, "Comic Shanns": 8, "Liberation Sans": 9 }, Bl = { [Fl]: 100, [Bs]: 1e3 }, Xb = (e) => {
  switch (e) {
    case ht.Excalifont:
      return [Fl, Bs];
    default:
      return [Bs];
  }
}, Ie = { LIGHT: "light", DARK: "dark" }, pt = { strokeColor: "#bbb", strokeWidth: 2, strokeStyle: "solid", fillStyle: "solid", roughness: 0, roundness: null, backgroundColor: "transparent", radius: 8, nameOffsetY: 3, nameColorLightTheme: "#999999", nameColorDarkTheme: "#7a7a7a", nameFontSize: 14, nameLineHeight: 1.25 }, N0 = 1, Fi = 20, Er = ht.Excalifont, fc = "left", Gd = "top", il = 2, jd = 2 * il, Fk = 1e-5, Bk = 2 * jd - Fk, Fc = "#ffffff", Hk = "#1e1e1e", Xk = "#a2f1a6", Yd = 20, Wb = 5, io = { svg: "image/svg+xml", png: "image/png", jpg: "image/jpeg", gif: "image/gif", webp: "image/webp", bmp: "image/bmp", ico: "image/x-icon", avif: "image/avif", jfif: "image/jfif" }, de = { text: "text/plain", html: "text/html", json: "application/json", excalidraw: "application/vnd.excalidraw+json", excalidrawlib: "application/vnd.excalidrawlib+json", "excalidraw.svg": "image/svg+xml", "excalidraw.png": "image/png", binary: "application/octet-stream", ...io }, Wk = [de.text, de.html, ...Object.values(io)], Jf = { png: "png", svg: "svg", clipboard: "clipboard" }, Zn = { excalidraw: "excalidraw", excalidrawClipboard: "excalidraw/clipboard", excalidrawLibrary: "excalidrawlib", excalidrawClipboardWithAPI: "excalidraw-api/clipboard" }, O0 = window.EXCALIDRAW_EXPORT_SOURCE || window.location.origin, Vk = 500, Gk = 300, jk = 500, Yk = 100, Xu = 0.1, $0 = 0.1, z0 = 30, Zk = 300, F0 = "invert(93%) hue-rotate(180deg)", G2 = { canvasActions: { changeViewBackgroundColor: !0, clearCanvas: !0, export: { saveFileToDisk: !0 }, loadScene: !0, saveToActiveFile: !0, toggleTheme: null, saveAsImage: !0 } }, Kk = 730, qk = 1e3, Jk = 500, Qk = 1229, Xo = 2, B0 = [1, 2, 3], Co = 10, eM = 1440, j2 = 4 * 1024 * 1024, Re = "http://www.w3.org/2000/svg", Wu = { excalidraw: 2, excalidrawLibrary: 2 }, Rt = 5, tM = 0.7, nM = 11, Pn = { TOP: "top", MIDDLE: "middle", BOTTOM: "bottom" }, Hs = { LEFT: "left", CENTER: "center", RIGHT: "right" }, aM = 20, Qf = 0.25, iM = 32, Pt = { LEGACY: 1, PROPORTIONAL_RADIUS: 2, ADAPTIVE_RADIUS: 3 }, Vb = { artist: 1, cartoonist: 2 }, eh = { thin: 1, bold: 2, extraBold: 4 }, bt = { strokeColor: ke.black, backgroundColor: ke.transparent, fillStyle: "solid", strokeWidth: 2, strokeStyle: "solid", roughness: Vb.artist, opacity: 100, locked: !1 }, Zd = "library", Kl = "search", ba = { name: "default", defaultTab: Zd }, Gb = /* @__PURE__ */ new Set(["iframe", "embeddable", "image"]), zt = { selection: "selection", rectangle: "rectangle", diamond: "diamond", ellipse: "ellipse", text: "text", image: "image", eraser: "eraser", frame: "frame", magicframe: "magicframe", laser: "laser" }, gs = { MERMAID_TO_EXCALIDRAW: "mermaid-to-excalidraw", PUBLISH_LIBRARY: "publish-library-data" }, jb = "Untitled", Hl = { generalStats: 1, elementProperties: 2 }, Wn = 1, Gt = { sharp: "sharp", round: "round", elbow: "elbow" }, Yb = 0.3, Kd = "element", rM = Symbol.for("__test__originalId__"), lM = ((e) => (e.ACTIVE = "active", e.AWAY = "away", e.IDLE = "idle", e))(lM || {}), oM = B0.includes(devicePixelRatio) ? devicePixelRatio : 1, ei = () => ({ showWelcomeScreen: !1, theme: Ie.LIGHT, collaborators: /* @__PURE__ */ new Map(), currentChartType: "bar", currentItemBackgroundColor: bt.backgroundColor, currentItemEndArrowhead: "arrow", currentItemFillStyle: bt.fillStyle, currentItemFontFamily: Er, currentItemFontSize: Fi, currentItemOpacity: bt.opacity, currentItemRoughness: bt.roughness, currentItemStartArrowhead: null, currentItemStrokeColor: bt.strokeColor, currentItemRoundness: "round", currentItemArrowType: Gt.round, currentItemStrokeStyle: bt.strokeStyle, currentItemStrokeWidth: bt.strokeWidth, currentItemTextAlign: fc, currentHoveredFontFamily: null, cursorButton: "up", activeEmbeddable: null, newElement: null, editingTextElement: null, editingGroupId: null, editingLinearElement: null, activeTool: { type: "selection", customType: null, locked: bt.locked, lastActiveTool: null }, penMode: !1, penDetected: !1, errorMessage: null, exportBackground: !0, exportScale: oM, exportEmbedScene: !1, exportWithDarkMode: !1, fileHandle: null, gridSize: Yd, gridStep: Wb, gridModeEnabled: !1, isBindingEnabled: !0, defaultSidebarDockedPreference: !1, isLoading: !1, isResizing: !1, isRotating: !1, lastPointerDownWith: "mouse", multiElement: null, name: null, contextMenu: null, openMenu: null, openPopup: null, openSidebar: null, openDialog: null, pasteDialog: { shown: !1, data: null }, previousSelectedElementIds: {}, resizingElement: null, scrolledOutside: !1, scrollX: 0, scrollY: 0, selectedElementIds: {}, hoveredElementIds: {}, selectedGroupIds: {}, selectedElementsAreBeingDragged: !1, selectionElement: null, shouldCacheIgnoreZoom: !1, stats: { open: !1, panels: Hl.generalStats | Hl.elementProperties }, startBoundElement: null, suggestedBindings: [], frameRendering: { enabled: !0, clip: !0, name: !0, outline: !0 }, frameToHighlight: null, editingFrame: null, elementsToHighlight: null, toast: null, viewBackgroundColor: ke.white, zenModeEnabled: !1, zoom: { value: 1 }, viewModeEnabled: !1, pendingImageElementId: null, showHyperlinkPopup: !1, selectedLinearElement: null, snapLines: [], originSnapOffset: { x: 0, y: 0 }, objectsSnapModeEnabled: !1, userToFollow: null, followedBy: /* @__PURE__ */ new Set(), isCropping: !1, croppingElementId: null, searchMatches: [] }), sM = /* @__PURE__ */ ((e) => e)({ showWelcomeScreen: { browser: !0, export: !1, server: !1 }, theme: { browser: !0, export: !1, server: !1 }, collaborators: { browser: !1, export: !1, server: !1 }, currentChartType: { browser: !0, export: !1, server: !1 }, currentItemBackgroundColor: { browser: !0, export: !1, server: !1 }, currentItemEndArrowhead: { browser: !0, export: !1, server: !1 }, currentItemFillStyle: { browser: !0, export: !1, server: !1 }, currentItemFontFamily: { browser: !0, export: !1, server: !1 }, currentItemFontSize: { browser: !0, export: !1, server: !1 }, currentItemRoundness: { browser: !0, export: !1, server: !1 }, currentItemArrowType: { browser: !0, export: !1, server: !1 }, currentItemOpacity: { browser: !0, export: !1, server: !1 }, currentItemRoughness: { browser: !0, export: !1, server: !1 }, currentItemStartArrowhead: { browser: !0, export: !1, server: !1 }, currentItemStrokeColor: { browser: !0, export: !1, server: !1 }, currentItemStrokeStyle: { browser: !0, export: !1, server: !1 }, currentItemStrokeWidth: { browser: !0, export: !1, server: !1 }, currentItemTextAlign: { browser: !0, export: !1, server: !1 }, currentHoveredFontFamily: { browser: !1, export: !1, server: !1 }, cursorButton: { browser: !0, export: !1, server: !1 }, activeEmbeddable: { browser: !1, export: !1, server: !1 }, newElement: { browser: !1, export: !1, server: !1 }, editingTextElement: { browser: !1, export: !1, server: !1 }, editingGroupId: { browser: !0, export: !1, server: !1 }, editingLinearElement: { browser: !1, export: !1, server: !1 }, activeTool: { browser: !0, export: !1, server: !1 }, penMode: { browser: !0, export: !1, server: !1 }, penDetected: { browser: !0, export: !1, server: !1 }, errorMessage: { browser: !1, export: !1, server: !1 }, exportBackground: { browser: !0, export: !1, server: !1 }, exportEmbedScene: { browser: !0, export: !1, server: !1 }, exportScale: { browser: !0, export: !1, server: !1 }, exportWithDarkMode: { browser: !0, export: !1, server: !1 }, fileHandle: { browser: !1, export: !1, server: !1 }, gridSize: { browser: !0, export: !0, server: !0 }, gridStep: { browser: !0, export: !0, server: !0 }, gridModeEnabled: { browser: !0, export: !0, server: !0 }, height: { browser: !1, export: !1, server: !1 }, isBindingEnabled: { browser: !1, export: !1, server: !1 }, defaultSidebarDockedPreference: { browser: !0, export: !1, server: !1 }, isLoading: { browser: !1, export: !1, server: !1 }, isResizing: { browser: !1, export: !1, server: !1 }, isRotating: { browser: !1, export: !1, server: !1 }, lastPointerDownWith: { browser: !0, export: !1, server: !1 }, multiElement: { browser: !1, export: !1, server: !1 }, name: { browser: !0, export: !1, server: !1 }, offsetLeft: { browser: !1, export: !1, server: !1 }, offsetTop: { browser: !1, export: !1, server: !1 }, contextMenu: { browser: !1, export: !1, server: !1 }, openMenu: { browser: !0, export: !1, server: !1 }, openPopup: { browser: !1, export: !1, server: !1 }, openSidebar: { browser: !0, export: !1, server: !1 }, openDialog: { browser: !1, export: !1, server: !1 }, pasteDialog: { browser: !1, export: !1, server: !1 }, previousSelectedElementIds: { browser: !0, export: !1, server: !1 }, resizingElement: { browser: !1, export: !1, server: !1 }, scrolledOutside: { browser: !0, export: !1, server: !1 }, scrollX: { browser: !0, export: !1, server: !1 }, scrollY: { browser: !0, export: !1, server: !1 }, selectedElementIds: { browser: !0, export: !1, server: !1 }, hoveredElementIds: { browser: !1, export: !1, server: !1 }, selectedGroupIds: { browser: !0, export: !1, server: !1 }, selectedElementsAreBeingDragged: { browser: !1, export: !1, server: !1 }, selectionElement: { browser: !1, export: !1, server: !1 }, shouldCacheIgnoreZoom: { browser: !0, export: !1, server: !1 }, stats: { browser: !0, export: !1, server: !1 }, startBoundElement: { browser: !1, export: !1, server: !1 }, suggestedBindings: { browser: !1, export: !1, server: !1 }, frameRendering: { browser: !1, export: !1, server: !1 }, frameToHighlight: { browser: !1, export: !1, server: !1 }, editingFrame: { browser: !1, export: !1, server: !1 }, elementsToHighlight: { browser: !1, export: !1, server: !1 }, toast: { browser: !1, export: !1, server: !1 }, viewBackgroundColor: { browser: !0, export: !0, server: !0 }, width: { browser: !1, export: !1, server: !1 }, zenModeEnabled: { browser: !0, export: !1, server: !1 }, zoom: { browser: !0, export: !1, server: !1 }, viewModeEnabled: { browser: !1, export: !1, server: !1 }, pendingImageElementId: { browser: !1, export: !1, server: !1 }, showHyperlinkPopup: { browser: !1, export: !1, server: !1 }, selectedLinearElement: { browser: !0, export: !1, server: !1 }, snapLines: { browser: !1, export: !1, server: !1 }, originSnapOffset: { browser: !1, export: !1, server: !1 }, objectsSnapModeEnabled: { browser: !0, export: !1, server: !1 }, userToFollow: { browser: !1, export: !1, server: !1 }, followedBy: { browser: !1, export: !1, server: !1 }, isCropping: { browser: !1, export: !1, server: !1 }, croppingElementId: { browser: !1, export: !1, server: !1 }, searchMatches: { browser: !1, export: !1, server: !1 } }), cM = (e, t) => {
  var a;
  let n = {};
  for (let i of Object.keys(e)) if ((a = sM[i]) != null && a[t]) {
    let r = e[i];
    n[i] = r;
  }
  return n;
}, Zb = (e) => cM(e, "export"), Fa = ({ activeTool: e }) => e.type === "eraser", ro = ({ activeTool: e }) => e.type === "hand", Me = (e, t, n) => Math.min(Math.max(e, t), n), Ka = (e, t, n = "round") => {
  let a = Math.pow(10, t);
  return Math[n]((e + Number.EPSILON) * a) / a;
}, dM = (e, t, n = "round") => {
  let a = 1 / t;
  return Math[n](e * a) / a;
}, Bc = (e, t) => (e + t) / 2, bs = (e) => typeof e == "number" && Number.isFinite(e), Y2 = (e, t, n = 1e-4) => Math.abs(e - t) < n, qd = (e) => e < 0 ? e + 2 * Math.PI : e >= 2 * Math.PI ? e - 2 * Math.PI : e;
function jr(e) {
  return e * Math.PI / 180;
}
function hc(e) {
  return e * 180 / Math.PI;
}
function uM(e) {
  return Math.abs(Math.sin(2 * e)) < 1e-4;
}
function Jt(e, t, n = 0, a = 0) {
  return [e - n, t - a];
}
function se(e, t = [0, 0]) {
  return Jt(e[0] - t[0], e[1] - t[1]);
}
function $t(e, t) {
  return e[0] * t[1] - t[0] * e[1];
}
function Z2(e, t) {
  return e[0] * t[0] + e[1] * t[1];
}
function rr(e, t) {
  return [e[0] + t[0], e[1] + t[1]];
}
function Jd(e, t) {
  return [e[0] - t[0], e[1] - t[1]];
}
function yt(e, t) {
  return Jt(e[0] * t, e[1] * t);
}
function fM(e) {
  return e[0] * e[0] + e[1] * e[1];
}
function hM(e) {
  return Math.sqrt(fM(e));
}
var on = (e) => {
  let t = hM(e);
  return t === 0 ? Jt(0, 0) : Jt(e[0] / t, e[1] / t);
};
function k(e, t) {
  return [e, t];
}
function H0(e) {
  return e.length === 2 ? k(e[0], e[1]) : void 0;
}
function Ce(e, t = k(0, 0)) {
  return k(t[0] + e[0], t[1] + e[1]);
}
function pM(e) {
  return Array.isArray(e) && e.length === 2 && typeof e[0] == "number" && !isNaN(e[0]) && typeof e[1] == "number" && !isNaN(e[1]);
}
function Ea(e, t) {
  let n = Math.abs;
  return n(e[0] - t[0]) < 1e-4 && n(e[1] - t[1]) < 1e-4;
}
function X([e, t], [n, a], i) {
  return k((e - n) * Math.cos(i) - (t - a) * Math.sin(i) + n, (e - n) * Math.sin(i) + (t - a) * Math.cos(i) + a);
}
function Qd(e, t = [0, 0]) {
  return k(e[0] + t[0], e[1] + t[1]);
}
function pc(e, t) {
  return k((e[0] + t[0]) / 2, (e[1] + t[1]) / 2);
}
function ze(e, t) {
  return Math.hypot(t[0] - e[0], t[1] - e[1]);
}
function Xs(e, t) {
  let n = t[0] - e[0], a = t[1] - e[1];
  return n * n + a * a;
}
var pi = (e, t, n) => Qd(t, yt(se(e, t), n)), Kb = (e, t, n) => t[0] <= Math.max(e[0], n[0]) && t[0] >= Math.min(e[0], n[0]) && t[1] <= Math.max(e[1], n[1]) && t[1] >= Math.min(e[1], n[1]);
function U1(e, t) {
  return [e, t];
}
function UM(e, t) {
  let n = e[1][1] - e[0][1], a = e[0][0] - e[1][0], i = t[1][1] - t[0][1], r = t[0][0] - t[1][0], l = n * r - i * a;
  if (l !== 0) {
    let o = n * e[0][0] + a * e[0][1], c = i * t[0][0] + r * t[0][1];
    return k((o * r - c * a) / l, (n * c - i * o) / l);
  }
  return null;
}
function ce(e, t) {
  return [e, t];
}
var rl = (e, t, n = 1e-4) => {
  let a = X0(e, t);
  return a === 0 ? !0 : a < n;
}, X0 = (e, t) => {
  let [n, a] = e, [[i, r], [l, o]] = t, c = n - i, d = a - r, s = l - i, u = o - r, f = c * s + d * u, h = s * s + u * u, U = -1;
  h !== 0 && (U = f / h);
  let m, g;
  U < 0 ? (m = i, g = r) : U > 1 ? (m = l, g = o) : (m = i + U * s, g = r + U * u);
  let b = n - m, v = a - g;
  return Math.sqrt(b * b + v * v);
};
function Ws(e, t) {
  let n = UM(U1(e[0], e[1]), U1(t[0], t[1]));
  return !n || !rl(n, t) || !rl(n, e) ? null : n;
}
function m1(e, t) {
  return [e, t];
}
function mM(e, t) {
  return [ce(e[0], k(e[1][0], e[0][1])), ce(k(e[1][0], e[0][1]), e[1]), ce(e[1], k(e[0][0], e[1][1])), ce(k(e[0][0], e[1][1]), e[0])].map((n) => Ws(t, n)).filter((n) => !!n);
}
function Ei(e, t, n, a) {
  return [e, t, n, a];
}
function K2(e, t, n, a = 1e-6) {
  return [(e(t + a, n) - e(t - a, n)) / (2 * a), (e(t, n + a) - e(t, n - a)) / (2 * a)];
}
function gM(e, t, n, a = 1e-3, i = 10) {
  let r = 1 / 0, l = 0;
  for (; r >= a; ) {
    if (l >= i) return null;
    let o = e(t, n), c = [K2((m, g) => e(m, g)[0], t, n), K2((m, g) => e(m, g)[1], t, n)], d = [[-o[0]], [-o[1]]], s = c[0][0] * c[1][1] - c[0][1] * c[1][0];
    if (s === 0) return null;
    let u = [[c[1][1] / s, -c[0][1] / s], [-c[1][0] / s, c[0][0] / s]], f = [[u[0][0] * d[0][0] + u[0][1] * d[1][0]], [u[1][0] * d[0][0] + u[1][1] * d[1][0]]];
    t = t + f[0][0], n = n + f[1][0];
    let [h, U] = e(t, n);
    r = Math.max(Math.abs(h), Math.abs(U)), l += 1;
  }
  return [t, n];
}
var vs = (e, t) => k((1 - t) ** 3 * e[0][0] + 3 * (1 - t) ** 2 * t * e[1][0] + 3 * (1 - t) * t ** 2 * e[2][0] + t ** 3 * e[3][0], (1 - t) ** 3 * e[0][1] + 3 * (1 - t) ** 2 * t * e[1][1] + 3 * (1 - t) * t ** 2 * e[2][1] + t ** 3 * e[3][1]);
function qb(e, t) {
  let n = vM(e);
  if (mM(m1(k(n[0], n[1]), k(n[2], n[3])), t).length === 0) return [];
  let a = (o) => k(t[0][0] + o * (t[1][0] - t[0][0]), t[0][1] + o * (t[1][1] - t[0][1])), i = [[0.5, 0], [0.2, 0], [0.8, 0]], r = ([o, c]) => {
    let d = gM((f, h) => {
      let U = vs(e, f), m = a(h);
      return [U[0] - m[0], U[1] - m[1]];
    }, o, c);
    if (!d) return null;
    let [s, u] = d;
    return s < 0 || s > 1 || u < 0 || u > 1 ? null : vs(e, s);
  }, l = r(i[0]);
  return l ? [l] : (l = r(i[1]), l ? [l] : (l = r(i[2]), l ? [l] : []));
}
function bM(e, t, n = 1e-3) {
  let a = (c, d, s, u = n) => {
    let f = c, h = d, U;
    for (; h - f > u; ) U = (h + f) / 2, s(U - u) < s(U + u) ? h = U : f = U;
    return U;
  }, i = 0;
  for (let c = 1 / 0, d = 0; d < 30; d++) {
    let s = ze(t, vs(e, d / 30));
    s < c && (c = s, i = d);
  }
  let r = Math.max((i - 1) / 30, 0), l = Math.min((i + 1) / 30, 1), o = a(r, l, (c) => ze(t, vs(e, c)));
  return o ? vs(e, o) : null;
}
function Jb(e, t) {
  let n = bM(e, t);
  return n ? ze(t, n) : 0;
}
function vM(e) {
  let [t, n, a, i] = e, r = [t[0], n[0], a[0], i[0]], l = [t[1], n[1], a[1], i[1]];
  return [Math.min(...r), Math.min(...l), Math.max(...r), Math.max(...l)];
}
function q2(...e) {
  return Qb(e);
}
function eu(e) {
  return Qb(e);
}
var J2 = (e, t) => {
  let n = e[0], a = e[1], i = !1;
  for (let r = 0, l = t.length - 1; r < t.length; l = r++) {
    let o = t[r][0], c = t[r][1], d = t[l][0], s = t[l][1];
    (c > a && s <= a || c <= a && s > a) && n < (d - o) * (a - c) / (s - c) + o && (i = !i);
  }
  return i;
}, yM = (e, t, n = 1e-4) => {
  let a = !1;
  for (let i = 0, r = t.length - 1; i < r; i++) if (rl(e, ce(t[i], t[i + 1]), n)) {
    a = !0;
    break;
  }
  return a;
};
function Qb(e) {
  return wM(e) ? e : [...e, e[0]];
}
function wM(e) {
  return Ea(e[0], e[e.length - 1]);
}
function an(e, t) {
  return Qn([e, t]);
}
var tu = ([e, t], [n, a]) => e <= n ? t >= n : e >= n ? a >= e : !1, nu = ([e, t], [n, a]) => {
  let i = Math.max(e, n), r = Math.min(t, a);
  return i <= r ? Qn([i, r]) : null;
}, Hc = (e, [t, n]) => e >= t && e <= n;
function Il([e, t, n], a) {
  let i = (s, u, f) => (s[0] - f[0]) * (u[1] - f[1]) - (u[0] - f[0]) * (s[1] - f[1]), r = i(a, e, t), l = i(a, t, n), o = i(a, n, e), c = r < 0 || l < 0 || o < 0, d = r > 0 || l > 0 || o > 0;
  return !(c && d);
}
var Q2 = () => {
  let e = /* @__PURE__ */ new Date(), t = e.getFullYear(), n = `${e.getMonth() + 1}`.padStart(2, "0"), a = `${e.getDate()}`.padStart(2, "0"), i = `${e.getHours()}`.padStart(2, "0"), r = `${e.getMinutes()}`.padStart(2, "0");
  return `${t}-${n}-${a}-${i}${r}`;
}, ys = (e) => e.charAt(0).toUpperCase() + e.slice(1), EM = (e) => e instanceof HTMLElement && e.className.includes("ToolIcon"), g1 = (e) => e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLInputElement || e instanceof HTMLTextAreaElement || e instanceof HTMLSelectElement, xM = (e) => g1(e) || e instanceof Element && !!e.closest("label, button"), Or = (e) => e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLTextAreaElement || e instanceof HTMLInputElement && (e.type === "text" || e.type === "number" || e.type === "password"), lo = ({ fontFamily: e }) => {
  for (let [t, n] of Object.entries(ht)) if (n === e) return `${t}${Xb(n).map((a) => `, ${a}`).join("")}`;
  return Bs;
}, Je = ({ fontSize: e, fontFamily: t }) => `${e}px ${lo({ fontFamily: t })}`, oo = (e, t) => {
  let n = 0, a = null, i = (...r) => {
    a = r, clearTimeout(n), n = window.setTimeout(() => {
      a = null, e(...r);
    }, t);
  };
  return i.flush = () => {
    if (clearTimeout(n), a) {
      let r = a;
      a = null, e(...r);
    }
  }, i.cancel = () => {
    a = null, clearTimeout(n);
  }, i;
}, Vu = (e, t) => {
  let n = null, a = null, i = null, r = (o) => {
    n = window.requestAnimationFrame(() => {
      n = null, e(...o), a = null, i && (a = i, i = null, r(a));
    });
  }, l = (...o) => {
    if (we.MODE === "test") {
      e(...o);
      return;
    }
    a = o, n === null ? r(a) : t != null && t.trailing && (i = o);
  };
  return l.flush = () => {
    n !== null && (cancelAnimationFrame(n), n = null), a && (e(...i || a), a = i = null);
  }, l.cancel = () => {
    a = i = null, n !== null && (cancelAnimationFrame(n), n = null);
  }, l;
}, Yr = (e) => 1 - Math.pow(1 - e, 4), em = (e, t, n) => (t - e) * Yr(n) + e, SM = ({ fromValues: e, toValues: t, onStep: n, duration: a = 250, interpolateValue: i, onStart: r, onEnd: l, onCancel: o }) => {
  let c = !1, d = 0, s;
  function u(f) {
    if (c) return;
    s === void 0 && (s = f, r == null || r());
    let h = Math.min(f - s, a), U = Yr(h / a), m = {};
    if (Object.keys(e).forEach((g) => {
      let b = g, v = (t[b] - e[b]) * U + e[b];
      m[b] = v;
    }), n(m), h < a) {
      let g = h / a, b = {};
      Object.keys(e).forEach((v) => {
        let y = v, w = e[y], x = t[y], S;
        S = i ? i(w, x, g, y) : em(w, x, g), S == null && (S = em(w, x, g)), b[y] = S;
      }), n(b), d = window.requestAnimationFrame(u);
    } else n(t), l == null || l();
  }
  return d = window.requestAnimationFrame(u), () => {
    o == null || o(), c = !0, window.cancelAnimationFrame(d);
  };
}, kM = (e, t) => {
  if (!e.length || t < 1) return [];
  let n = 0, a = 0, i = Array(Math.ceil(e.length / t));
  for (; n < e.length; ) i[a++] = e.slice(n, n += t);
  return i;
}, rn = (e, t) => Math.abs(e - t), _t = (e, t) => t.type === "custom" ? { ...e.activeTool, type: "custom", customType: t.customType, locked: t.locked ?? e.activeTool.locked } : { ...e.activeTool, lastActiveTool: t.lastActiveToolBeforeEraser === void 0 ? e.activeTool.lastActiveTool : t.lastActiveToolBeforeEraser, type: t.type, customType: null, locked: t.locked ?? e.activeTool.locked }, V = (e) => (e = e.replace(/\bAlt\b/i, "Alt").replace(/\bShift\b/i, "Shift").replace(/\b(Enter|Return)\b/i, "Enter"), Qa ? e.replace(/\bCtrlOrCmd\b/gi, "Cmd").replace(/\bAlt\b/i, "Option") : e.replace(/\bCtrlOrCmd\b/gi, "Ctrl")), it = ({ clientX: e, clientY: t }, { zoom: n, offsetLeft: a, offsetTop: i, scrollX: r, scrollY: l }) => {
  let o = (e - a) / n.value - r, c = (t - i) / n.value - l;
  return { x: o, y: c };
}, fa = ({ sceneX: e, sceneY: t }, { zoom: n, offsetLeft: a, offsetTop: i, scrollX: r, scrollY: l }) => {
  let o = (e + r) * n.value + a, c = (t + l) * n.value + i;
  return { x: o, y: c };
}, Xc = (e) => getComputedStyle(document.documentElement).getPropertyValue(`--${e}`), MM = "A-Za-z--------", CM = "---", IM = new RegExp(`^[^${MM}]*[${CM}]`), e8 = (e) => IM.test(e), ha = (e) => {
  let [t, n] = e;
  return { x: t, y: n };
}, t8 = (e) => {
  if ((e == null ? void 0 : e.name) === "AbortError") {
    console.warn(e);
    return;
  }
  throw e;
}, n8 = (e, t, n = 0) => {
  n < 0 && (n = e.length + n), n = Math.min(e.length, Math.max(n, 0));
  let a = n - 1;
  for (; ++a < e.length; ) if (t(e[a], a, e)) return a;
  return -1;
}, $r = (e, t, n = e.length - 1) => {
  n < 0 && (n = e.length + n), n = Math.min(e.length - 1, Math.max(n, 0));
  let a = n + 1;
  for (; --a > -1; ) if (t(e[a], a, e)) return a;
  return -1;
}, pa = (e) => {
  let t = e.length === 5 && e.substr(4, 1) === "0", n = e.length === 9 && e.substr(7, 2) === "00";
  return t || n || e === ke.transparent;
}, th = (e) => e.fillStyle !== "solid" || pa(e.backgroundColor), TM = () => {
  let e, t, n = new Promise((a, i) => {
    e = a, t = i;
  });
  return n.resolve = e, n.reject = t, n;
}, _M = (e) => {
  let t = e.parentElement;
  for (; t; ) {
    if (t === document.body) return document;
    let { overflowY: n } = window.getComputedStyle(t);
    if (t.scrollHeight > t.clientHeight && (n === "auto" || n === "scroll" || n === "overlay")) return t;
    t = t.parentElement;
  }
  return document;
}, AM = (e) => {
  let t = e.parentElement;
  for (; t; ) {
    if (t.tabIndex > -1) {
      t.focus();
      return;
    }
    t = t.parentElement;
  }
}, DM = (e) => Array.from(e).map((t) => `0${t.toString(16)}`.slice(-2)).join(""), Io = () => Ii() ? 1 : Date.now(), he = (e) => e instanceof Map ? e : e.reduce((t, n) => (t.set(typeof n == "string" ? n : n.id, n), t), /* @__PURE__ */ new Map()), LM = (e) => e.reduce((t, n, a) => (t.set(n.id, [n, a]), t), /* @__PURE__ */ new Map()), fi = (e, t) => e.reduce((n, a) => (n[t ? t(a) : String(a)] = a, n), {}), RM = (e) => e.reduce((t, n, a) => {
  let i = { ...n, prev: null, next: null };
  if (a !== 0) {
    let r = t[a - 1];
    if (i.prev = r, r.next = i, a === e.length - 1) {
      let l = t[0];
      i.next = l, l.prev = i;
    }
  }
  return t.push(i), t;
}, []), Ii = () => we.MODE === "test", a8 = () => we.MODE === "development", PM = () => typeof process < "u" && !0, i8 = (e, t) => new CustomEvent(e, { detail: { nativeEvent: t }, cancelable: !0 }), gd = (e, t) => {
  let n = !1;
  for (let a in t) {
    let i = t[a];
    if (typeof i < "u") {
      if (e[a] === i && (typeof i != "object" || i === null)) continue;
      n = !0;
    }
  }
  return n ? { ...e, ...t } : e;
}, NM = () => {
  try {
    return window.self === window.top ? "top" : "iframe";
  } catch {
    return "iframe";
  }
}, Uc = (e) => !!e && typeof e == "object" && "then" in e && "catch" in e && "finally" in e, b1 = (e) => {
  let t = e == null ? void 0 : e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");
  return t ? Array.from(t).filter((n) => n.tabIndex > -1 && !n.disabled) : [];
}, tm = (e, t) => Array.isArray(e) && Array.isArray(t) && e.length === 0 && t.length === 0 ? !0 : e === t, en = (e, t, n, a = !1) => {
  let i = Object.keys(e), r = Object.keys(t);
  if (i.length !== r.length) return a && console.warn("%cisShallowEqual: objects don't have same properties ->", "color: #8B4000", e, t), !1;
  if (n && Array.isArray(n)) {
    for (let l of n) if (!(e[l] === t[l] || tm(e[l], t[l]))) return a && console.warn(`%cisShallowEqual: ${l} not equal ->`, "color: #8B4000", e[l], t[l]), !1;
    return !0;
  }
  return i.every((l) => {
    let o = n == null ? void 0 : n[l], c = o ? o(e[l], t[l]) : e[l] === t[l] || tm(e[l], t[l]);
    return !c && a && console.warn(`%cisShallowEqual: ${l} not equal ->`, "color: #8B4000", e[l], t[l]), c;
  });
}, Gu = (e, t, { checkForDefaultPrevented: n = !0 } = {}) => function(a) {
  if (e == null || e(a), !n || !(a != null && a.defaultPrevented)) return t == null ? void 0 : t(a);
}, ll = (e, t, n) => {
  if (!t) return e;
  if (n) return console.error(t), e;
  throw new Error(t);
};
function cn(e, t) {
  if (!e) throw new Error(t);
}
var OM = (e) => {
  let t, n, a = function(i) {
    let r = Object.entries(i);
    if (t) {
      let o = !0;
      for (let [c, d] of r) if (t.get(c) !== d) {
        o = !1;
        break;
      }
      if (o) return n;
    }
    let l = e(i);
    return t = new Map(r), n = l, l;
  };
  return a.clear = () => {
    t = void 0, n = void 0;
  }, a;
}, r8 = (e, t) => e instanceof Set || e instanceof Map ? e.has(t) : "includes" in e ? e.includes(t) : e.hasOwnProperty(t), ki = (e) => JSON.parse(JSON.stringify(e)), Wo = (e, t) => en(e, t) ? e : t;
function ut(e, t, n, a) {
  var i;
  return e ? ((i = e == null ? void 0 : e.addEventListener) == null || i.call(e, t, n, a), () => {
    var r;
    (r = e == null ? void 0 : e.removeEventListener) == null || r.call(e, t, n, a);
  }) : () => {
  };
}
function $M(e, t = !0) {
  let n = e.length;
  if (n < 4) return "";
  let a = e[0], i = e[1], r = e[2], l = `M${a[0].toFixed(2)},${a[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${Bc(i[0], r[0]).toFixed(2)},${Bc(i[1], r[1]).toFixed(2)} T`;
  for (let o = 2, c = n - 1; o < c; o++) a = e[o], i = e[o + 1], l += `${Bc(a[0], i[0]).toFixed(2)},${Bc(a[1], i[1]).toFixed(2)} `;
  return t && (l += "Z"), l;
}
var l8 = (e) => e.replace(/\r?\n|\r/g, `
`), Qn = (e) => e, so = async (e, ...t) => new Promise((n) => {
  n(e(...t));
}), zM = (...e) => Math.max(...e.map((t) => t ? 1 : 0)) > 0, nm = class {
  constructor(e, t) {
    L(this, "pool"), L(this, "entries", {}), this.pool = new uS(e, t);
  }
  all() {
    let e = (t) => {
      if (t.data.result) {
        let [n, a] = t.data.result;
        this.entries[n] = a;
      }
    };
    return this.pool.addEventListener("fulfilled", e), this.pool.start().then(() => (setTimeout(() => {
      this.pool.removeEventListener("fulfilled", e);
    }), Object.values(this.entries)));
  }
}, bd = (e) => e.replace(/"/g, "&quot;"), am = (e) => Array.isArray(e) ? e : [e], Vn = (e) => !!e && e.type === "image" && !!e.fileId, Oe = (e) => !!e && e.type === "image", xn = (e) => !!e && e.type === "embeddable", er = (e) => !!e && e.type === "iframe", Gn = (e) => !!e && (e.type === "iframe" || e.type === "embeddable"), J = (e) => e != null && e.type === "text", o8 = (e) => e != null && e.type === "frame", vd = (e) => e != null && e.type === "magicframe", fe = (e) => e != null && (e.type === "frame" || e.type === "magicframe"), ea = (e) => e != null && FM(e.type), FM = (e) => e === "freedraw", me = (e) => e != null && W0(e.type), xe = (e) => e != null && e.type === "arrow", te = (e) => xe(e) && e.elbowed, W0 = (e) => e === "arrow" || e === "line", Ga = (e, t = !0) => e != null && (!e.locked || t === !0) && s8(e.type), s8 = (e) => e === "arrow", xa = (e, t = !0) => e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId), BM = (e) => e != null && (e.type === "rectangle" || e.type === "diamond" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId), Zr = (e, t = !0) => e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || xe(e)), c8 = (e) => {
  let t = e == null ? void 0 : e.type;
  if (!t) return !1;
  switch (t) {
    case "text":
    case "diamond":
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "ellipse":
    case "arrow":
    case "freedraw":
    case "line":
    case "frame":
    case "magicframe":
    case "image":
    case "selection":
      return !0;
    default:
      return ll(t, null), !1;
  }
}, ju = (e) => e.type === "rectangle" || e.type === "ellipse" || e.type === "diamond", ta = (e) => {
  var t;
  return Zr(e) && !!((t = e.boundElements) != null && t.some(({ type: n }) => n === "text"));
}, st = (e) => e !== null && "containerId" in e && e.containerId !== null && J(e), To = (e) => e === "rectangle" || e === "embeddable" || e === "iframe" || e === "image", d8 = (e) => e === "line" || e === "arrow" || e === "diamond", HM = (e, t) => !!((e === Pt.ADAPTIVE_RADIUS || e === Pt.LEGACY) && To(t.type) || e === Pt.PROPORTIONAL_RADIUS && d8(t.type)), XM = (e) => d8(e.type) ? { type: Pt.PROPORTIONAL_RADIUS } : To(e.type) ? { type: Pt.ADAPTIVE_RADIUS } : null, au = (e) => Object.hasOwn(e, "fixedPoint") && e.fixedPoint != null, dn = (e, t, n) => {
  let a = e.split(`
`).map((l) => l || " ").join(`
`), i = parseFloat(t), r = jM(a, i, n);
  return { width: j0(a, t), height: r };
}, u8 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(), f8 = (e, t) => {
  let n = YM(e);
  return n === 0 ? dn(u8.split("").join(`
`), e, t).width + Rt * 2 : n + Rt * 2;
}, V0 = (e, t) => dn("", e, t).width + Rt * 2, WM = () => j0(u8, Je({ fontSize: Fi, fontFamily: Er })) > 0, co = (e) => l8(e).replace(/\t/g, "        "), G0 = (e) => co(e).split(`
`), VM = (e) => {
  let t = G0(e.text).length;
  return e.height / t / e.fontSize;
}, mc = (e, t) => e * t, h8 = (e, t) => mc(e, t) + Rt * 2, nh, GM = class {
  constructor() {
    L(this, "canvas"), this.canvas = document.createElement("canvas");
  }
  getLineWidth(e, t) {
    let n = this.canvas.getContext("2d");
    n.font = t;
    let a = n.measureText(e).width;
    return Ii() ? a * 10 : a;
  }
}, ol = (e, t) => (nh || (nh = new GM()), nh.getLineWidth(e, t)), j0 = (e, t) => {
  let n = G0(e), a = 0;
  return n.forEach((i) => {
    a = Math.max(a, ol(i, t));
  }), a;
}, jM = (e, t, n) => {
  let a = G0(e).length;
  return mc(t, n) * a;
}, gc = /* @__PURE__ */ (() => {
  let e = {};
  return { calculate: (t, n) => {
    let a = t.charCodeAt(0);
    if (e[n] || (e[n] = []), !e[n][a]) {
      let i = ol(t, n);
      e[n][a] = i;
    }
    return e[n][a];
  }, getCache: (t) => e[t], clearCache: (t) => {
    e[t] = [];
  } };
})(), YM = (e) => {
  let t = gc.getCache(e);
  if (!t) return 0;
  let n = t.filter((a) => a !== void 0);
  return Math.max(...n);
}, ah, Wc, ih, ZM = (e) => (ah || (ah = Xe.class(...Object.values(Ui))), ah.test(e)), KM = () => {
  if (!Wc) try {
    Wc = JM();
  } catch {
    Wc = qM();
  }
  return Wc;
}, Y0 = () => (ih || (ih = QM()), ih), Bn = { WHITESPACE: /\s/u, HYPHEN: /-/u, OPENING: /<\(\[\{/u, CLOSING: />\)\]\}.,:;!\?\//u }, Ui = { CHAR: new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}", "u"), OPENING: //u, CLOSING: //u, CURRENCY: //u }, Ir = { FLAG: new RegExp("\\p{RI}\\p{RI}", "u"), JOINER: new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?", "u"), ZWJ: /\u200D/u, ANY: /[\p{Emoji}]/u, MOST: /[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u }, qM = () => Xe.or(Y0(), Ct.On(Bn.HYPHEN, Bn.WHITESPACE, Ui.CHAR)), JM = () => Xe.or(Y0(), Ct.Before(Bn.WHITESPACE).Build(), Ct.After(Bn.WHITESPACE, Bn.HYPHEN).Build(), Ct.Before(Ui.CHAR, Ui.CURRENCY).NotPrecededBy(Bn.OPENING, Ui.OPENING).Build(), Ct.After(Ui.CHAR).NotFollowedBy(Bn.HYPHEN, Bn.CLOSING, Ui.CLOSING).Build(), Ct.BeforeMany(Ui.OPENING).NotPrecededBy(Bn.OPENING).Build(), Ct.AfterMany(Ui.CLOSING).NotFollowedBy(Bn.CLOSING).Build(), Ct.AfterMany(Bn.CLOSING).FollowedBy(Bn.OPENING).Build()), QM = () => Xe.group(Xe.or(Ir.FLAG, Xe.and(Ir.MOST, Ir.JOINER, Xe.build(`(?:${Ir.ZWJ.source}(?:${Ir.FLAG.source}|${Ir.ANY.source}${Ir.JOINER.source}))*`)))), Xe = { build: (e) => new RegExp(e, "u"), join: (...e) => e.map((t) => t.source).join(""), and: (...e) => Xe.build(Xe.join(...e)), or: (...e) => Xe.build(e.map((t) => t.source).join("|")), group: (...e) => Xe.build(`(${Xe.join(...e)})`), class: (...e) => Xe.build(`[${Xe.join(...e)}]`) }, Ct = { On: (...e) => {
  let t = Xe.join(...e);
  return Xe.build(`([${t}])`);
}, Before: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?=[${t}])`);
  return Ct.Chain(n);
}, After: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?<=[${t}])`);
  return Ct.Chain(n);
}, BeforeMany: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?<![${t}])(?=[${t}])`);
  return Ct.Chain(n);
}, AfterMany: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?<=[${t}])(?![${t}])`);
  return Ct.Chain(n);
}, NotBefore: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?![${t}])`);
  return Ct.Chain(n);
}, NotAfter: (...e) => {
  let t = Xe.join(...e), n = () => Xe.build(`(?<![${t}])`);
  return Ct.Chain(n);
}, Chain: (e) => ({ Build: e, PreceededBy: (...t) => {
  let n = e(), a = Ct.After(...t).Build(), i = () => Xe.and(a, n);
  return Ct.Chain(i);
}, FollowedBy: (...t) => {
  let n = e(), a = Ct.Before(...t).Build(), i = () => Xe.and(n, a);
  return Ct.Chain(i);
}, NotPrecededBy: (...t) => {
  let n = e(), a = Ct.NotAfter(...t).Build(), i = () => Xe.and(a, n);
  return Ct.Chain(i);
}, NotFollowedBy: (...t) => {
  let n = e(), a = Ct.NotBefore(...t).Build(), i = () => Xe.and(n, a);
  return Ct.Chain(i);
} }) }, eC = (e) => {
  let t = KM();
  return e.normalize("NFC").split(t).filter(Boolean);
}, yl = (e, t, n) => {
  if (!Number.isFinite(n) || n < 0) return e;
  let a = [], i = e.split(`
`);
  for (let r of i) {
    if (ol(r, t) <= n) {
      a.push(r);
      continue;
    }
    let l = tC(r, t, n);
    a.push(...l);
  }
  return a.join(`
`);
}, tC = (e, t, n) => {
  let a = [], i = eC(e)[Symbol.iterator](), r = "", l = 0, o = i.next();
  for (; !o.done; ) {
    let c = o.value, d = r + c, s = iC(c) ? l + gc.calculate(c, t) : ol(d, t);
    if (/\s/.test(c) || s <= n) {
      r = d, l = s, o = i.next();
      continue;
    }
    if (r) a.push(r.trimEnd()), r = "", l = 0;
    else {
      let u = nC(c, t, n), f = u[u.length - 1] ?? "", h = u.slice(0, -1);
      a.push(...h), r = f, l = ol(f, t), o = i.next();
    }
  }
  if (r) {
    let c = aC(r, t, n);
    a.push(c);
  }
  return a;
}, nC = (e, t, n) => {
  if (Y0().test(e)) return [e];
  rC(e);
  let a = [], i = Array.from(e), r = "", l = 0;
  for (let o of i) {
    let c = gc.calculate(o, t), d = l + c;
    if (d <= n) {
      r = r + o, l = d;
      continue;
    }
    r && a.push(r), r = o, l = c;
  }
  return r && a.push(r), a;
}, aC = (e, t, n) => {
  if (!(ol(e, t) > n)) return e;
  let [, a, i] = e.match(/^(.+?)(\s+)$/) ?? [e, e.trimEnd(), ""], r = ol(a, t);
  for (let l of Array.from(i)) {
    let o = gc.calculate(l, t), c = r + o;
    if (c > n) break;
    a = a + l, r = c;
  }
  return a;
}, iC = (e) => e.codePointAt(0) !== void 0 && e.codePointAt(1) === void 0, rC = (e) => {
  if ((we.MODE === Cn.TEST || we.DEV) && /\s/.test(e)) throw new Error("Word should not contain any whitespaces!");
}, hn = class {
};
L(hn, "rg", new zs()), L(hn, "cache", /* @__PURE__ */ new WeakMap()), L(hn, "get", (e) => hn.cache.get(e)), L(hn, "set", (e, t) => hn.cache.set(e, t)), L(hn, "delete", (e) => hn.cache.delete(e)), L(hn, "destroy", () => {
  hn.cache = /* @__PURE__ */ new WeakMap();
}), L(hn, "generateElementShape", (e, t) => {
  let n = t != null && t.isExporting ? void 0 : hn.get(e);
  if (n !== void 0) return n;
  C1.delete(e);
  let a = fR(e, hn.rg, t || { isExporting: !1, canvasBackgroundColor: ke.white, embedsValidationStatus: null });
  return hn.cache.set(e, a), a;
});
var mt = hn, ua = (e) => "var(--icon-fill-color)", p8 = (e) => e === Ie.LIGHT ? Yt.white : "#1e1e1e", B = (e, t = 512) => {
  let { width: n = 512, height: a = n, mirror: i, style: r, ...l } = typeof t == "number" ? { width: t } : t;
  return p("svg", { "aria-hidden": "true", focusable: "false", role: "img", viewBox: `0 0 ${n} ${a}`, className: ae({ "rtl-mirror": i }), style: r, ...l, children: typeof e == "string" ? p("path", { fill: "currentColor", d: e }) : e });
}, q = { width: 24, height: 24, fill: "none", strokeWidth: 2, stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" }, be = { width: 20, height: 20, fill: "none", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round" };
B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("rect", { x: 3, y: 8, width: 18, height: 4, rx: 1 }), p("line", { x1: 12, y1: 8, x2: 12, y2: 21 }), p("path", { d: "M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7" }), p("path", { d: "M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5" })] }), q);
var Z0 = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" }), p("path", { d: "M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" }), p("line", { x1: "3", y1: "6", x2: "3", y2: "19" }), p("line", { x1: "12", y1: "6", x2: "12", y2: "19" }), p("line", { x1: "21", y1: "6", x2: "21", y2: "19" })] }), q), lC = B(_("svg", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), p("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), q), oC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("circle", { cx: "12", cy: "12", r: "1" }), p("circle", { cx: "12", cy: "19", r: "1" }), p("circle", { cx: "12", cy: "5", r: "1" })] }), q), sC = B(_("svg", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M9 4v6l-2 4v2h10v-2l-2 -4v-6" }), p("line", { x1: "12", y1: "16", x2: "12", y2: "21" }), p("line", { x1: "8", y1: "4", x2: "16", y2: "4" })] }), q), Yu = B(_("g", { children: [p("path", { d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z", stroke: "currentColor", strokeWidth: "1.25" }), p("path", { d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z", stroke: "currentColor", strokeWidth: "1.25" }), p("mask", { id: "UnlockedIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: 6, y: 1, width: 9, height: 9, children: p("path", { stroke: "none", d: "M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481", fill: "#fff" }) }), p("g", { mask: "url(#UnlockedIcon)", children: p("path", { stroke: "none", d: "M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z", fill: "currentColor" }) })] }), be), K0 = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z" }), p("path", { d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z" }), p("path", { d: "M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916" })] }), be), cC = B(_(le, { children: [p("path", { d: "M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), p("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z", fill: "currentColor" }), p("path", { d: "M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 41, height: 94, fill: "none" }), dC = B(_(le, { children: [p("path", { d: "M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), p("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z", fill: "currentColor" }), p("path", { d: "M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 85, height: 71, fill: "none" }), uC = B(_(le, { children: [p("path", { d: "M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" }), p("path", { fillRule: "evenodd", clipRule: "evenodd", d: "m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z", fill: "currentColor" }), p("path", { d: "M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round" })] }), { width: 38, height: 78, fill: "none" });
B(p("g", { fill: "currentColor", children: p("path", { d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z", fill: "currentColor" }) }), { width: 40, height: 40, fill: "none" });
var fC = B(_("g", { stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z" }), p("path", { d: "M13.5 13.5l4.5 4.5" })] }), { fill: "none", width: 22, height: 22, strokeWidth: 1.25 }), hC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("rect", { x: "4", y: "4", width: "16", height: "16", rx: "2" })] }), q), pC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z" })] }), q), UC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("circle", { cx: "12", cy: "12", r: "9" })] }), q), mC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "5", y1: "12", x2: "19", y2: "12" }), p("line", { x1: "15", y1: "16", x2: "19", y2: "12" }), p("line", { x1: "15", y1: "8", x2: "19", y2: "12" })] }), q), gC = B(p("path", { d: "M4.167 10h11.666", strokeWidth: "1.5" }), be), bC = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z" }), p("path", { d: "M16 7h4" }), p("path", { d: "M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3" })] }), q), Vs = B(_("g", { strokeWidth: "1.25", children: [p("path", { clipRule: "evenodd", d: "m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z" }), p("path", { d: "m11.25 5.417 3.333 3.333" })] }), be), U8 = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "20", x2: "7", y2: "20" }), p("line", { x1: "14", y1: "20", x2: "21", y2: "20" }), p("line", { x1: "6.9", y1: "15", x2: "13.8", y2: "15" }), p("line", { x1: "10.2", y1: "6.3", x2: "16", y2: "20" }), p("polyline", { points: "5 20 11 4 13 4 20 20" })] }), q), vC = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M12.5 6.667h.01" }), p("path", { d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z" }), p("path", { d: "m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166" }), p("path", { d: "m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667" })] }), be), yC = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3" }), p("path", { d: "M18 13.3l-6.3 -6.3" })] }), q), im = B(p("path", { strokeWidth: "1.25", d: "M10 4.167v11.666M4.167 10h11.666" }), be), rm = B(p("path", { d: "M5 10h10", strokeWidth: "1.25" }), be), wC = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M21 21l-6 -6" }), p("path", { d: "M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403" }), p("path", { d: "M3 4v4h4" })] }), q), sl = B(p("path", { strokeWidth: "1.25", d: "M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5" }), be), EC = B(_("g", { strokeWidth: "1.25", children: [p("polyline", { points: "12 16 18 10 12 4" }), p("polyline", { points: "8 4 2 10 8 16" })] }), be), v1 = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z" }), p("path", { clipRule: "evenodd", d: "M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z" })] }), be), y1 = B(p("path", { clipRule: "evenodd", d: "M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z", stroke: "currentColor" }), be), w1 = B(p("g", { stroke: "currentColor", strokeLinejoin: "round", children: p("path", { d: "M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667" }) }), { ...be, strokeWidth: 1.5 }), m8 = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "6", x2: "20", y2: "6" }), p("line", { x1: "4", y1: "12", x2: "20", y2: "12" }), p("line", { x1: "4", y1: "18", x2: "20", y2: "18" })] }), q), Zu = B(p("path", { strokeWidth: "1.25", d: "M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10" }), be), q0 = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("circle", { cx: "12", cy: "12", r: "9" }), p("line", { x1: "12", y1: "17", x2: "12", y2: "17.01" }), p("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), q), xC = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("circle", { cx: "12", cy: "12", r: "9" }), p("line", { x1: "12", y1: "17", x2: "12", y2: "17.01" }), p("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), q), lm = B(p("path", { strokeWidth: "1.25", d: "M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5" }), be), g8 = B(p("path", { d: "M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5", strokeWidth: "1.25" }), be), SC = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0" }), p("path", { d: "M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084" })] }), be), kC = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 4l11.733 16h4.267l-11.733 -16z" }), p("path", { d: "M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" })] }), q), MC = B(p("polyline", { fill: "none", stroke: "currentColor", points: "20 6 9 17 4 12" }), { width: 24, height: 24 }), E1 = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416" }), p("path", { d: "M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416" })] }), be), CC = B("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z", { width: 448, height: 512 }), IC = B("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z", { width: 448, height: 512 }), J0 = B(p("path", { d: "m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z", strokeWidth: "1.25" }), be);
B("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z", { width: 384, height: 512 });
var TC = B("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"), rh = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z" }), p("path", { d: "M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z" }), p("path", { d: "M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208" })] }), q), b8 = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M15 8h.01" }), p("path", { d: "M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5" }), p("path", { d: "M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4" }), p("path", { d: "M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598" }), p("path", { d: "M19 16v6" }), p("path", { d: "M22 19l-3 3l-3 -3" })] }), q), _C = B("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z", { width: 512, height: 512 });
B("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", { width: 448, height: 512 });
B("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", { width: 448, height: 512 });
var AC = B("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");
B("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");
var om = B(p("path", { d: "M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5", strokeWidth: "1.25" }), be), sm = B(p("path", { d: "M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5", strokeWidth: "1.25" }), be), DC = B("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z", { mirror: !0 });
B(p("path", { d: "M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834", strokeWidth: "1.5" }), be);
B("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");
B("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z", { width: 24, height: 24 });
B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1" }), p("path", { d: "M12 14v-11" }), p("path", { d: "M9 6l3 -3l3 3" })] }), q);
B(_(le, { children: [p("path", { fill: "currentColor", d: "M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z" }), p("path", { stroke: "currentColor", fill: "currentColor", d: "M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z" })] }), { width: 64, height: 64 });
B(p("path", { stroke: "currentColor", strokeWidth: "40", fill: "currentColor", d: "M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z" }), { width: 1024 });
var v8 = _("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M12 10l0 10" }), p("path", { d: "M12 10l4 4" }), p("path", { d: "M12 10l-4 4" }), p("path", { d: "M4 4l16 0" })] }), y8 = _("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M12 5l0 14" }), p("path", { d: "M16 9l-4 -4" }), p("path", { d: "M8 9l4 -4" })] }), cm = B(y8, q), dm = B(y8, { ...q, style: { transform: "rotate(180deg)" } }), um = B(v8, q), fm = B(v8, { ...q, style: { transform: "rotate(180deg)" } }), hm = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M3.333 3.333h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), pm = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M3.333 16.667h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), Um = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M3.333 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), mm = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M16.667 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), LC = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M16.667 3.333v13.334M3.333 3.333v13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), RC = B(_(le, { children: [_("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M3.333 3.333h13.334M3.333 16.667h13.334", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z" })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), gm = B(_("g", { stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M1.667 10h2.916", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M8.333 10h3.334", strokeLinejoin: "round" }), p("path", { d: "M15.417 10h2.916", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z" })] }), be), bm = B(_("g", { stroke: "currentColor", strokeWidth: "1.25", children: [p("path", { d: "M10 18.333v-2.916", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M10 11.667V8.333", strokeLinejoin: "round" }), p("path", { d: "M10 4.583V1.667", strokeLinecap: "round", strokeLinejoin: "round" }), p("path", { d: "M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z" })] }), be), w8 = B(_("g", { strokeWidth: "1.5", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("circle", { cx: "9", cy: "7", r: "4" }), p("path", { d: "M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" }), p("path", { d: "M16 3.13a4 4 0 0 1 0 7.75" }), p("path", { d: "M21 21v-2a4 4 0 0 0 -3 -3.85" })] }), q);
B("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");
B("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");
var _o = B(_(le, { children: [p("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: p("path", { d: "M15 5 5 15M5 5l10 10" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be);
B("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z", { mirror: !0 });
B("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z", { width: 24 });
B("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z", { width: 384, height: 512 });
var vm = Z.memo(({ theme: e }) => B(_(le, { children: [p("path", { d: "M25 26H111V111H25", fill: ua() }), p("path", { d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z", stroke: ua(), strokeWidth: "2" }), p("path", { d: "M100 100H160V160H100", fill: ua() }), p("path", { d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z", stroke: ua(), strokeWidth: "2" }), _("g", { fill: p8(e), stroke: ua(), strokeWidth: "6", children: [p("rect", { x: "2.5", y: "2.5", width: "30", height: "30" }), p("rect", { x: "2.5", y: "149.5", width: "30", height: "30" }), p("rect", { x: "147.5", y: "149.5", width: "30", height: "30" }), p("rect", { x: "147.5", y: "2.5", width: "30", height: "30" })] })] }), { width: 182, height: 182, mirror: !0 })), ym = Z.memo(({ theme: e }) => B(_(le, { children: [p("path", { d: "M25 26H111V111H25", fill: ua() }), p("path", { d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z", stroke: ua(), strokeWidth: "2" }), p("path", { d: "M100 100H160V160H100", fill: ua() }), p("path", { d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z", stroke: ua(), strokeWidth: "2" }), _("g", { fill: p8(e), stroke: ua(), strokeWidth: "6", children: [p("rect", { x: "2.5", y: "2.5", width: "30", height: "30" }), p("rect", { x: "78.5", y: "149.5", width: "30", height: "30" }), p("rect", { x: "147.5", y: "149.5", width: "30", height: "30" }), p("rect", { x: "147.5", y: "78.5", width: "30", height: "30" }), p("rect", { x: "105.5", y: "2.5", width: "30", height: "30" }), p("rect", { x: "2.5", y: "102.5", width: "30", height: "30" })] })] }), { width: 182, height: 182, mirror: !0 })), PC = B(p("g", { strokeWidth: 1.25, children: p("path", { d: "M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793" }) }), be), NC = B(_(le, { children: [p("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", stroke: "currentColor", strokeWidth: "1.25" }), p("mask", { id: "FillHachureIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: 2, y: 2, width: 16, height: 16, children: p("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", fill: "currentColor", stroke: "currentColor", strokeWidth: "1.25" }) }), p("g", { mask: "url(#FillHachureIcon)", children: p("path", { d: "M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) })] }), be), OC = B(_(le, { children: [_("g", { clipPath: "url(#a)", children: [p("path", { d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z", stroke: "currentColor", strokeWidth: "1.25" }), p("mask", { id: "FillCrossHatchIcon", style: { maskType: "alpha" }, maskUnits: "userSpaceOnUse", x: -1, y: -1, width: 22, height: 22, children: p("path", { d: "M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), p("g", { mask: "url(#FillCrossHatchIcon)", children: p("path", { d: "M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z", fill: "currentColor" }) })] }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), $C = B(_(le, { children: [p("g", { clipPath: "url(#a)", children: p("path", { d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z", stroke: "currentColor", strokeWidth: "1.25" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), { ...be, fill: "currentColor" }), E8 = B(p(le, { children: p("path", { d: "M4.167 10h11.666", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), be), zC = B(p("path", { d: "M5 10h10", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round" }), be), FC = B(p("path", { d: "M5 10h10", stroke: "currentColor", strokeWidth: "3.75", strokeLinecap: "round", strokeLinejoin: "round" }), be);
Z.memo(({ theme: e }) => B(p("path", { d: "M6 10H34", stroke: ua(), strokeWidth: 2, fill: "none", strokeLinecap: "round" }), { width: 40, height: 20 }));
var BC = B(_("g", { strokeWidth: "2", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 12h2" }), p("path", { d: "M17 12h2" }), p("path", { d: "M11 12h2" })] }), q), HC = B(_("g", { strokeWidth: "2", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 12v.01" }), p("path", { d: "M8 12v.01" }), p("path", { d: "M12 12v.01" }), p("path", { d: "M16 12v.01" }), p("path", { d: "M20 12v.01" })] }), q), XC = B(p("path", { d: "M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814", strokeWidth: "1.25" }), be), WC = B(p("path", { d: "M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43", strokeWidth: "1.25" }), be), VC = B(p("path", { d: "M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42", strokeWidth: "1.25" }), be), GC = B(_("svg", { strokeWidth: "1.5", children: [p("path", { d: "M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10" }), p("path", { d: "M13.3333 3.33331V3.34331" }), p("path", { d: "M16.6667 3.33331V3.34331" }), p("path", { d: "M16.6667 6.66669V6.67669" }), p("path", { d: "M16.6667 10V10.01" }), p("path", { d: "M3.33334 13.3333V13.3433" }), p("path", { d: "M16.6667 13.3333V13.3433" }), p("path", { d: "M3.33334 16.6667V16.6767" }), p("path", { d: "M6.66666 16.6667V16.6767" }), p("path", { d: "M10 16.6667V16.6767" }), p("path", { d: "M13.3333 16.6667V16.6767" }), p("path", { d: "M16.6667 16.6667V16.6767" })] }), be), jC = B(_("g", { strokeWidth: "1.5", stroke: "currentColor", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 12v-4a4 4 0 0 1 4 -4h4" }), p("line", { x1: "16", y1: "4", x2: "16", y2: "4.01" }), p("line", { x1: "20", y1: "4", x2: "20", y2: "4.01" }), p("line", { x1: "20", y1: "8", x2: "20", y2: "8.01" }), p("line", { x1: "20", y1: "12", x2: "20", y2: "12.01" }), p("line", { x1: "4", y1: "16", x2: "4", y2: "16.01" }), p("line", { x1: "20", y1: "16", x2: "20", y2: "16.01" }), p("line", { x1: "4", y1: "20", x2: "4", y2: "20.01" }), p("line", { x1: "8", y1: "20", x2: "8", y2: "20.01" }), p("line", { x1: "12", y1: "20", x2: "12", y2: "20.01" }), p("line", { x1: "16", y1: "20", x2: "16", y2: "20.01" }), p("line", { x1: "20", y1: "20", x2: "20", y2: "20.01" })] }), q), YC = B(_("g", { stroke: "currentColor", opacity: 0.3, strokeWidth: 2, children: [p("path", { d: "M12 12l9 0" }), p("path", { d: "M3 9l6 6" }), p("path", { d: "M3 15l6 -6" })] }), q), ZC = Z.memo(({ flip: e = !1 }) => B(_("g", { transform: e ? "translate(40, 0) scale(-1, 1)" : "", stroke: "currentColor", strokeWidth: 2, fill: "none", children: [p("path", { d: "M34 10H6M34 10L27 5M34 10L27 15" }), p("path", { d: "M27.5 5L34.5 10L27.5 15" })] }), { width: 40, height: 20 })), KC = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: [p("path", { d: "M32 10L6 10", strokeWidth: 2 }), p("circle", { r: "4", transform: "matrix(-1 0 0 1 30 10)" })] }), { width: 40, height: 20 })), qC = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeWidth: 2, children: [p("path", { d: "M26 10L6 10" }), p("circle", { r: "4", transform: "matrix(-1 0 0 1 30 10)" })] }), { width: 40, height: 20 })), JC = Z.memo(({ flip: e = !1 }) => B(p("g", { transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: p("path", { d: "M34 10H5.99996M34 10L34 5M34 10L34 15", stroke: "currentColor", strokeWidth: 2, fill: "none" }) }), { width: 40, height: 20 })), QC = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", children: [p("path", { d: "M32 10L6 10", strokeWidth: 2 }), p("path", { d: "M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5" })] }), { width: 40, height: 20 })), eI = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeWidth: 2, strokeLinejoin: "round", children: [p("path", { d: "M6,9.5H27" }), p("path", { d: "M27,5L34,10L27,14Z", fill: "none" })] }), { width: 40, height: 20 })), tI = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "currentColor", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeLinejoin: "round", strokeWidth: 2, children: [p("path", { d: "M6,9.5H20" }), p("path", { d: "M27,5L34,10L27,14L20,9.5Z" })] }), { width: 40, height: 20 })), nI = Z.memo(({ flip: e = !1 }) => B(_("g", { stroke: "currentColor", fill: "none", transform: e ? "translate(40, 0) scale(-1, 1)" : "", strokeLinejoin: "round", strokeWidth: 2, children: [p("path", { d: "M6,9.5H20" }), p("path", { d: "M27,5L34,10L27,14L20,9.5Z" })] }), { width: 40, height: 20 })), aI = Z.memo(({ flip: e = !1 }) => B(p("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: p("path", { d: "M34,10 H6 M15,10 L7,5 M15,10 L7,15" }) }), { width: 40, height: 20 })), iI = Z.memo(({ flip: e = !1 }) => B(p("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: p("path", { d: "M34,10 H6 M15,10 L15,15 L15,5" }) }), { width: 40, height: 20 })), rI = Z.memo(({ flip: e = !1 }) => B(p("g", { stroke: "currentColor", fill: "none", transform: e ? "" : "translate(40, 0) scale(-1, 1)", strokeLinejoin: "round", strokeWidth: 2, children: p("path", { d: "M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15" }) }), { width: 40, height: 20 })), lI = B(_(le, { children: [p("g", { clipPath: "url(#a)", children: p("path", { d: "M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), oI = B(_(le, { children: [p("g", { clipPath: "url(#a)", children: p("path", { d: "M5 16.667V3.333L10 15l5-11.667v13.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), sI = B(_(le, { children: [p("g", { clipPath: "url(#a)", children: p("path", { d: "M5.833 3.333v13.334h8.334", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), cI = B(p(le, { children: p("path", { d: "m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round" }) }), be), Ku = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 7v-2h13v2" }), p("path", { d: "M10 5v14" }), p("path", { d: "M12 19h-4" }), p("path", { d: "M15 13v-1h6v1" }), p("path", { d: "M18 12v7" }), p("path", { d: "M17 19h2" })] }), q), dI = B(p(le, { children: _("g", { stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M7 12h10" }), p("path", { d: "M7 5v14" }), p("path", { d: "M17 5v14" }), p("path", { d: "M15 19h4" }), p("path", { d: "M15 5h4" }), p("path", { d: "M5 19h4" }), p("path", { d: "M5 5h4" })] }) }), q), iu = B(p(le, { children: p("g", { stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: p("path", { d: "M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334" }) }) }), be), x1 = B(_(le, { children: [p("g", { clipPath: "url(#a)", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", children: p("path", { d: "M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667" }) }), p("defs", { children: p("clipPath", { id: "a", children: p("path", { fill: "#fff", d: "M0 0h20v20H0z" }) }) })] }), be), uI = B(_("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), p("line", { x1: "4", y1: "12", x2: "12", y2: "12" }), p("line", { x1: "4", y1: "16", x2: "16", y2: "16" })] }), q), fI = B(_("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), p("line", { x1: "8", y1: "12", x2: "16", y2: "12" }), p("line", { x1: "6", y1: "16", x2: "18", y2: "16" })] }), q), hI = B(_("g", { stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "8", x2: "20", y2: "8" }), p("line", { x1: "10", y1: "12", x2: "20", y2: "12" }), p("line", { x1: "8", y1: "16", x2: "20", y2: "16" })] }), q), pI = Z.memo(({ theme: e }) => B(_("g", { strokeWidth: "1.5", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "4", x2: "20", y2: "4" }), p("rect", { x: "9", y: "8", width: "6", height: "12", rx: "2" })] }), q)), UI = Z.memo(({ theme: e }) => B(_("g", { strokeWidth: "2", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "20", x2: "20", y2: "20" }), p("rect", { x: "9", y: "4", width: "6", height: "12", rx: "2" })] }), q)), mI = Z.memo(({ theme: e }) => B(_("g", { strokeWidth: "1.5", stroke: "currentColor", fill: "none", strokeLinecap: "round", strokeLinejoin: "round", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("line", { x1: "4", y1: "12", x2: "9", y2: "12" }), p("line", { x1: "15", y1: "12", x2: "20", y2: "12" }), p("rect", { x: "9", y: "6", width: "6", height: "12", rx: "2" })] }), q)), x8 = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M21 19h-18l9 -15" }), p("path", { d: "M20.615 15.171h.015" }), p("path", { d: "M19.515 11.771h.015" }), p("path", { d: "M17.715 8.671h.015" }), p("path", { d: "M15.415 5.971h.015" })] }), q), gI = B(p("path", { d: "M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z", fill: "currentColor" }), { width: 640, height: 512 });
B(p("path", { d: "M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z" }));
var S8 = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5" }), p("path", { d: "M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5" }), p("path", { d: "M14 5.5a1.5 1.5 0 0 1 3 0v6.5" }), p("path", { d: "M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47" })] }), q), wm = B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" }), p("path", { d: "M7 11l5 5l5 -5" }), p("path", { d: "M12 4l0 12" })] }), q), Q0 = B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" }), p("path", { d: "M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2" })] }), q), bI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), p("path", { d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), p("path", { d: "M9.15 14.85l8.85 -10.85" }), p("path", { d: "M6 4l8.85 10.85" })] }), q), vI = B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" }), p("path", { d: "M12 17l0 .01" }), p("path", { d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" })] }), q);
B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M7 4v16l13 -8z" })] }), q);
B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z", strokeWidth: "0", fill: "currentColor" })] }), q);
var yI = B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 12l5 5l10 -10" })] }), q), wI = B(_(le, { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z" }), p("path", { d: "M12 9v4" }), p("path", { d: "M12 17h.01" })] }), q), EI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M11 7l6 6" }), p("path", { d: "M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z" })] }), q), xI = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M12 3l-4 7h8z" }), p("path", { d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" }), p("path", { d: "M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" })] }), q), k8 = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 7l16 0" }), p("path", { d: "M4 17l16 0" }), p("path", { d: "M7 4l0 16" }), p("path", { d: "M17 4l0 16" })] }), q), M8 = B(p("path", { fill: "currentColor", d: "M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z" })), yd = B(_("g", { strokeWidth: "1.25", children: [p("path", { d: "M4.16602 10H15.8327" }), p("path", { d: "M12.5 13.3333L15.8333 10" }), p("path", { d: "M12.5 6.66666L15.8333 9.99999" })] }), be), C8 = B(_("g", { fill: "none", stroke: "currentColor", strokeWidth: "1.25", strokeLinecap: "round", strokeLinejoin: "round", transform: "rotate(90 10 10)", children: [p("path", { clipRule: "evenodd", d: "m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z" }), p("path", { d: "m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13" })] }), 20), I8 = B(_("g", { stroke: "currentColor", fill: "none", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z" }), p("path", { d: "M6 21l15 -15l-3 -3l-15 15l3 3" }), p("path", { d: "M15 6l3 3" }), p("path", { d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" }), p("path", { d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" })] }), q);
B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z" }), p("path", { d: "M6 21l15 -15l-3 -3l-15 15l3 3" }), p("path", { d: "M15 6l3 3" }), p("path", { d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" }), p("path", { d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" })] }), q);
B(_("g", { stroke: "currentColor", fill: "none", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35" }), p("path", { d: "M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946" }), p("path", { d: "M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348" }), p("path", { d: "M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45" }), p("path", { d: "M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946" }), p("path", { d: "M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42" })] }), q);
var SI = B(_("g", { stroke: "currentColor", fill: "none", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 8v-2a2 2 0 0 1 2 -2h2" }), p("path", { d: "M4 16v2a2 2 0 0 0 2 2h2" }), p("path", { d: "M16 4h2a2 2 0 0 1 2 2v2" }), p("path", { d: "M16 20h2a2 2 0 0 0 2 -2v-2" })] }), q), ep = B(_("g", { stroke: "currentColor", fill: "none", strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" }), p("path", { d: "M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" })] }), q), kI = B(_("g", { stroke: "currentColor", fill: "none", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M10.585 10.587a2 2 0 0 0 2.829 2.828" }), p("path", { d: "M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87" }), p("path", { d: "M3 3l18 18" })] }), q);
B(_("g", { stroke: "currentColor", fill: "none", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8" }), p("path", { d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8" }), p("path", { d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5" }), p("path", { d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0" }), p("path", { d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5" }), p("path", { d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10" })] }), q);
var MI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8" }), p("path", { d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8" }), p("path", { d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5" }), p("path", { d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0" }), p("path", { d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5" }), p("path", { d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10" })] }), q), cl = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" }), p("path", { d: "M21 21l-6 -6" })] }), q), CI = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M20.984 12.53a9 9 0 1 0 -7.552 8.355" }), p("path", { d: "M12 7v5l3 3" }), p("path", { d: "M19 16l-2 3h4l-2 3" })] }), q), II = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z" }), p("path", { d: "M5 10a7 7 0 0 0 14 0" }), p("path", { d: "M8 21l8 0" }), p("path", { d: "M12 17l0 4" })] }), q), TI = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 3l18 18" }), p("path", { d: "M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1" }), p("path", { d: "M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85" }), p("path", { d: "M8 21l8 0" }), p("path", { d: "M12 17l0 4" })] }), q), T8 = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11" })] }), q), _I = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z" }), p("path", { d: "M12 20v.01" }), p("path", { d: "M16 20v.01" }), p("path", { d: "M8 20v.01" }), p("path", { d: "M4 20v.01" }), p("path", { d: "M4 16v.01" }), p("path", { d: "M4 12v.01" }), p("path", { d: "M4 8v.01" }), p("path", { d: "M4 4v.01" }), p("path", { d: "M8 4v.01" }), p("path", { d: "M12 4v.01" }), p("path", { d: "M16 4v.01" }), p("path", { d: "M20 4v.01" }), p("path", { d: "M20 8v.01" }), p("path", { d: "M20 12v.01" }), p("path", { d: "M20 16v.01" }), p("path", { d: "M20 20v.01" })] }), q), AI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 3v18" }), p("path", { d: "M19 21v-18" }), p("path", { d: "M5 7h14" }), p("path", { d: "M5 15h14" }), p("path", { d: "M8 13v4" }), p("path", { d: "M11 13v4" }), p("path", { d: "M16 13v4" }), p("path", { d: "M14 5v4" }), p("path", { d: "M11 5v4" }), p("path", { d: "M8 5v4" }), p("path", { d: "M3 21h18" })] }), q), DI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 12l18 0" }), p("path", { d: "M7 16l10 0l-10 5l0 -5" }), p("path", { d: "M7 8l10 0l-10 -5l0 5" })] }), q), LI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M12 3l0 18" }), p("path", { d: "M16 7l0 10l5 0l-5 -10" }), p("path", { d: "M8 7l0 10l-5 0l5 -10" })] }), q), _8 = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" }), p("path", { d: "M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" }), p("path", { d: "M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" })] }), q), tp = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" }), p("path", { d: "M22 22l-3 -3" }), p("path", { d: "M6 18h-1a2 2 0 0 1 -2 -2v-1" }), p("path", { d: "M3 11v-1" }), p("path", { d: "M3 6v-1a2 2 0 0 1 2 -2h1" }), p("path", { d: "M10 3h1" }), p("path", { d: "M15 3h1a2 2 0 0 1 2 2v1" })] }), q), RI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M14 3v4a1 1 0 0 0 1 1h4" }), p("path", { d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" }), p("path", { d: "M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75" }), p("path", { d: "M10 15l2 6l2 -6" }), p("path", { d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" })] }), q), PI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M14 3v4a1 1 0 0 0 1 1h4" }), p("path", { d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" }), p("path", { d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" }), p("path", { d: "M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6" }), p("path", { d: "M11 21v-6l3 6v-6" })] }), q), NI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0" }), p("path", { d: "M4 8l5 0" }), p("path", { d: "M15 8l4 0" })] }), q), OI = B(_("g", { strokeWidth: 1.25, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1" }), p("path", { d: "M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2" }), p("path", { d: "M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2" }), p("path", { d: "M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z" }), p("path", { d: "M16.746 16.726a3 3 0 1 0 .252 -5.555" })] }), q), $I = B(_("g", { stroke: "currentColor", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4" })] }), { ...q, strokeWidth: 1.5 });
B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" }), p("path", { d: "M21 12h-13l3 -3" }), p("path", { d: "M11 15l-3 -3" })] }), q);
var zI = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z" }), p("path", { d: "M10 9l5 3l-5 3z" })] }), q), FI = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M3 6h18" }), p("path", { d: "M3 12h18" }), p("path", { d: "M3 18h18" }), p("path", { d: "M6 3v18" }), p("path", { d: "M12 3v18" }), p("path", { d: "M18 3v18" })] }), q), BI = B(_("g", { strokeWidth: 1.5, children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" }), p("path", { d: "M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" }), p("path", { d: "M17 5c-6.627 0 -12 5.373 -12 12" })] }), q), HI = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M6 18l12 -12" }), p("path", { d: "M18 10v-4h-4" })] }), q), XI = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7" }), p("path", { d: "M18 4l3 3l-3 3" })] }), q), WI = B(_("g", { children: [p("path", { d: "M16,12L20,9L16,6" }), p("path", { d: "M6 20c0 -6.075 4.925 -11 11 -11h3" })] }), q), A8 = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M6 9l6 6l6 -6" })] }), q), VI = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M6 15l6 -6l6 6" })] }), q), GI = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M6 15l6 -6l6 6" })] }), q), Em = B(_("g", { strokeWidth: "1.25", children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M8 5v10a1 1 0 0 0 1 1h10" }), p("path", { d: "M5 8h10a1 1 0 0 1 1 1v10" })] }), q), D8 = B(_("g", { children: [p("path", { stroke: "none", d: "M0 0h24v24H0z", fill: "none" }), p("path", { d: "M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), p("path", { d: "M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), p("path", { d: "M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), p("path", { d: "M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" }), p("path", { d: "M5 7l0 10" }), p("path", { d: "M7 5l10 0" }), p("path", { d: "M7 19l10 0" }), p("path", { d: "M19 7l0 10" })] }), q), ru = { [ht.Excalifont]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, icon: Vs }, [ht.Nunito]: { metrics: { unitsPerEm: 1e3, ascender: 1011, descender: -353, lineHeight: 1.35 }, icon: iu }, [ht["Lilita One"]]: { metrics: { unitsPerEm: 1e3, ascender: 923, descender: -220, lineHeight: 1.15 }, icon: dI }, [ht["Comic Shanns"]]: { metrics: { unitsPerEm: 1e3, ascender: 750, descender: -250, lineHeight: 1.25 }, icon: x1 }, [ht.Virgil]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, icon: Vs, deprecated: !0 }, [ht.Helvetica]: { metrics: { unitsPerEm: 2048, ascender: 1577, descender: -471, lineHeight: 1.15 }, icon: iu, deprecated: !0, local: !0 }, [ht.Cascadia]: { metrics: { unitsPerEm: 2048, ascender: 1900, descender: -480, lineHeight: 1.2 }, icon: x1, deprecated: !0 }, [ht["Liberation Sans"]]: { metrics: { unitsPerEm: 2048, ascender: 1854, descender: -434, lineHeight: 1.15 }, serverSide: !0 }, [Bl.Xiaolai]: { metrics: { unitsPerEm: 1e3, ascender: 880, descender: -144, lineHeight: 1.15 }, fallback: !0 }, [Bl["Segoe UI Emoji"]]: { metrics: { unitsPerEm: 1e3, ascender: 886, descender: -374, lineHeight: 1.25 }, local: !0, fallback: !0 } }, zr = { LATIN: "U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD", LATIN_EXT: "U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF", CYRILIC_EXT: "U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F", CYRILIC: "U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116", VIETNAMESE: "U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB" }, np = "local:", jI = class extends Error {
  constructor(e = "Couldn't export canvas.", t = "CANVAS_ERROR") {
    super(), this.name = t, this.message = e;
  }
}, qu = class extends DOMException {
  constructor(e = "Request Aborted") {
    super(e, "AbortError");
  }
}, Xr = class extends Error {
  constructor(e = "Image Scene Data Error", t = "IMAGE_SCENE_DATA_ERROR") {
    super(e), L(this, "code"), this.name = "EncodingError", this.code = t;
  }
}, YI = class extends Error {
  constructor() {
    super(...arguments), L(this, "code", "ELEMENT_HAS_INVALID_INDEX");
  }
}, L8 = class extends Error {
  constructor(e = "Worker URL is not defined!", t = "WORKER_URL_NOT_DEFINED") {
    super(e), L(this, "code"), this.name = "WorkerUrlNotDefinedError", this.code = t;
  }
}, R8 = class extends Error {
  constructor(e = "Worker has to be in a separate chunk!", t = "WORKER_IN_THE_MAIN_CHUNK") {
    super(e), L(this, "code"), this.name = "WorkerInTheMainChunkError", this.code = t;
  }
}, xm = class extends Error {
  constructor(e) {
    super(e), this.name = "ExcalidrawError";
  }
}, ZI = class {
  constructor(e) {
    L(this, "instance"), L(this, "debounceTerminate"), this.instance = new Worker(e, { type: "module" });
  }
}, KI = class P8 {
  constructor(t, n) {
    L(this, "idleWorkers", /* @__PURE__ */ new Set()), L(this, "workerUrl"), L(this, "workerTTL"), this.workerUrl = t, this.workerTTL = n.ttl || 1e3;
  }
  static create(t, n = {}) {
    if (!t) throw new L8();
    if (!import.meta.url || t.toString() === import.meta.url) throw new R8();
    return new P8(t, n);
  }
  async postMessage(t, n) {
    let a, i = Array.from(this.idleWorkers).shift();
    return i ? (this.idleWorkers.delete(i), a = i) : a = await this.createWorker(), new Promise((r, l) => {
      a.instance.onmessage = this.onMessageHandler(a, r), a.instance.onerror = this.onErrorHandler(a, l), a.instance.postMessage(t, n), a.debounceTerminate(() => l(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)));
    });
  }
  async clear() {
    for (let t of this.idleWorkers) t.debounceTerminate.cancel(), t.instance.terminate();
    this.idleWorkers.clear();
  }
  async createWorker() {
    let t = new ZI(this.workerUrl);
    return t.debounceTerminate = oo((n) => {
      t.instance.terminate(), this.idleWorkers.has(t) ? (this.idleWorkers.delete(t), console.debug("Job finished! Idle worker has been released from the pool.")) : n ? n() : console.error("Worker has been terminated!");
    }, this.workerTTL), t;
  }
  onMessageHandler(t, n) {
    return (a) => {
      t.debounceTerminate(), this.idleWorkers.add(t), n(a.data);
    };
  }
  onErrorHandler(t, n) {
    return (a) => {
      t.debounceTerminate(() => n(a)), t.debounceTerminate.flush(), this.clear();
    };
  }
}, Sm = typeof Worker < "u", qI = async (e, t) => {
  let { Commands: n, subsetToBase64: a, toBase64: i } = await QI();
  return Sm ? so(async () => {
    try {
      let r = await eT(), l = e.slice(0), o = await r.postMessage({ command: n.Subset, arrayBuffer: l, codePoints: t }, { transfer: [l] });
      return i(o);
    } catch (r) {
      return Sm = !1, PM() && (r instanceof L8 || r instanceof R8) || console.error("Failed to use workers for subsetting, falling back to the main thread.", r), a(e, t);
    }
  }) : a(e, t);
}, lh = null, oh = null, JI = async () => (lh || (lh = import("./subset-worker.chunk-DHPfMNBX.js")), lh), QI = async () => (oh || (oh = import("./subset-shared.chunk-BRnOghj3.js")), oh), sh = null, eT = () => (sh || (sh = so(async () => {
  let { WorkerUrl: e } = await JI();
  return KI.create(e);
})), sh), N8 = class wd {
  constructor(t, n, a) {
    L(this, "urls"), L(this, "fontFace"), this.urls = wd.createUrls(n);
    let i = this.urls.map((r) => `url(${r}) ${wd.getFormat(r)}`).join(", ");
    this.fontFace = new FontFace(t, i, { display: "swap", style: "normal", weight: "400", ...a });
  }
  toCSS(t) {
    if (!this.getUnicodeRangeRegex().test(t)) return;
    let n = Array.from(t).map((a) => a.codePointAt(0));
    return this.getContent(n).then((a) => `@font-face { font-family: ${this.fontFace.family}; src: url(${a}); }`);
  }
  async getContent(t) {
    let n = 0, a = [];
    for (; n < this.urls.length; ) {
      let i = this.urls[n];
      try {
        let r = await this.fetchFont(i);
        return await qI(r, t);
      } catch (r) {
        a.push(`"${i.toString()}" returned error "${r}"`);
      }
      n++;
    }
    return console.error(`Failed to fetch font family "${this.fontFace.family}"`, JSON.stringify(a, void 0, 2)), this.urls.length ? this.urls[this.urls.length - 1].toString() : "";
  }
  fetchFont(t) {
    return so(async () => {
      let n = await fetch(t, { cache: "force-cache", headers: { Accept: "font/woff2" } });
      if (!n.ok) {
        let a = t instanceof URL ? t.toString() : "dataurl";
        throw new Error(`Failed to fetch "${a}": ${n.statusText}`);
      }
      return await n.arrayBuffer();
    });
  }
  getUnicodeRangeRegex() {
    let t = this.fontFace.unicodeRange.split(/,\s*/).map((n) => {
      let [a, i] = n.replace("U+", "").split("-");
      return i ? `\\u{${a}}-\\u{${i}}` : `\\u{${a}}`;
    }).join("");
    return new RegExp(`[${t}]`, "u");
  }
  static createUrls(t) {
    if (t.startsWith("data")) return [t];
    if (t.startsWith(np)) return [];
    if (t.startsWith("http")) return [new URL(t)];
    let n = t.replace(/^\/+/, ""), a = [];
    if (typeof window.EXCALIDRAW_ASSET_PATH == "string") {
      let i = this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);
      a.push(new URL(n, i));
    } else Array.isArray(window.EXCALIDRAW_ASSET_PATH) && window.EXCALIDRAW_ASSET_PATH.forEach((i) => {
      let r = this.normalizeBaseUrl(i);
      a.push(new URL(n, r));
    });
    return a.push(new URL(n, wd.ASSETS_FALLBACK_URL)), a;
  }
  static getFormat(t) {
    if (!(t instanceof URL)) return "";
    try {
      let n = new URL(t).pathname.split(".");
      return n.length === 1 ? "" : `format('${n.pop()}')`;
    } catch {
      return "";
    }
  }
  static normalizeBaseUrl(t) {
    var a;
    let n = t;
    return /^\.?\//.test(n) && (n = new URL(n.replace(/^\.?\/+/, ""), (a = window == null ? void 0 : window.location) == null ? void 0 : a.origin).toString()), n = `${n.replace(/\/+$/, "")}/`, n;
  }
};
L(N8, "ASSETS_FALLBACK_URL", `https://esm.sh/${`${we.PKG_NAME}@${we.PKG_VERSION}`}/dist/prod/`);
var tT = N8, nT = "./fonts/Cascadia/CascadiaCode-Regular.woff2", aT = [{ uri: nT }], iT = "./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2", rT = "./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2", lT = "./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2", oT = "./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2", sT = [{ uri: iT, descriptors: { unicodeRange: "U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212" } }, { uri: rT, descriptors: { unicodeRange: "U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b" } }, { uri: lT, descriptors: { unicodeRange: "U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3" } }, { uri: oT, descriptors: { unicodeRange: "U+3bb" } }], cT = [{ uri: np }], dT = "./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2", uT = "./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2", fT = "./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2", hT = "./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2", pT = "./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2", UT = "./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2", mT = "./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2", gT = [{ uri: dT, descriptors: { unicodeRange: "U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212" } }, { uri: uT, descriptors: { unicodeRange: "U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113" } }, { uri: fT, descriptors: { unicodeRange: "U+400-45f,U+490-491,U+2116" } }, { uri: hT, descriptors: { unicodeRange: "U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7" } }, { uri: pT, descriptors: { unicodeRange: "U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02" } }, { uri: UT, descriptors: { unicodeRange: "U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef" } }, { uri: mT, descriptors: { unicodeRange: "U+300-301,U+303" } }], bT = [{ uri: np }], vT = "./fonts/Liberation/LiberationSans-Regular.woff2", yT = [{ uri: vT }], wT = "./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2", ET = "./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2", xT = [{ uri: ET, descriptors: { unicodeRange: zr.LATIN_EXT } }, { uri: wT, descriptors: { unicodeRange: zr.LATIN } }], ST = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2", kT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2", MT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2", CT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2", IT = "./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2", TT = [{ uri: CT, descriptors: { unicodeRange: zr.CYRILIC_EXT, weight: "500" } }, { uri: MT, descriptors: { unicodeRange: zr.CYRILIC, weight: "500" } }, { uri: IT, descriptors: { unicodeRange: zr.VIETNAMESE, weight: "500" } }, { uri: kT, descriptors: { unicodeRange: zr.LATIN_EXT, weight: "500" } }, { uri: ST, descriptors: { unicodeRange: zr.LATIN, weight: "500" } }], _T = "./fonts/Virgil/Virgil-Regular.woff2", AT = [{ uri: _T }], DT = "./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2", LT = "./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2", RT = "./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2", PT = "./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2", NT = "./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2", OT = "./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2", $T = "./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2", zT = "./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2", FT = "./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2", BT = "./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2", HT = "./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2", XT = "./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2", WT = "./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2", VT = "./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2", GT = "./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2", jT = "./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2", YT = "./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2", ZT = "./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2", KT = "./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2", qT = "./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2", JT = "./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2", QT = "./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2", e_ = "./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2", t_ = "./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2", n_ = "./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2", a_ = "./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2", i_ = "./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2", r_ = "./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2", l_ = "./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2", o_ = "./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2", s_ = "./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2", c_ = "./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2", d_ = "./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2", u_ = "./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2", f_ = "./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2", h_ = "./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2", p_ = "./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2", U_ = "./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2", m_ = "./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2", g_ = "./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2", b_ = "./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2", v_ = "./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2", y_ = "./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2", w_ = "./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2", E_ = "./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2", x_ = "./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2", S_ = "./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2", k_ = "./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2", M_ = "./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2", C_ = "./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2", I_ = "./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2", T_ = "./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2", __ = "./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2", A_ = "./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2", D_ = "./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2", L_ = "./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2", R_ = "./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2", P_ = "./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2", N_ = "./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2", O_ = "./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2", $_ = "./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2", z_ = "./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2", F_ = "./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2", B_ = "./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2", H_ = "./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2", X_ = "./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2", W_ = "./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2", V_ = "./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2", G_ = "./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2", j_ = "./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2", Y_ = "./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2", Z_ = "./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2", K_ = "./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2", q_ = "./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2", J_ = "./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2", Q_ = "./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2", eA = "./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2", tA = "./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2", nA = "./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2", aA = "./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2", iA = "./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2", rA = "./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2", lA = "./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2", oA = "./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2", sA = "./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2", cA = "./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2", dA = "./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2", uA = "./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2", fA = "./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2", hA = "./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2", pA = "./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2", UA = "./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2", mA = "./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2", gA = "./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2", bA = "./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2", vA = "./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2", yA = "./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2", wA = "./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2", EA = "./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2", xA = "./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2", SA = "./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2", kA = "./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2", MA = "./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2", CA = "./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2", IA = "./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2", TA = "./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2", _A = "./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2", AA = "./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2", DA = "./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2", LA = "./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2", RA = "./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2", PA = "./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2", NA = "./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2", OA = "./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2", $A = "./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2", zA = "./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2", FA = "./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2", BA = "./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2", HA = "./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2", XA = "./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2", WA = "./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2", VA = "./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2", GA = "./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2", jA = "./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2", YA = "./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2", ZA = "./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2", KA = "./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2", qA = "./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2", JA = "./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2", QA = "./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2", eD = "./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2", tD = "./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2", nD = "./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2", aD = "./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2", iD = "./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2", rD = "./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2", lD = "./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2", oD = "./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2", sD = "./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2", cD = "./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2", dD = "./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2", uD = "./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2", fD = "./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2", hD = "./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2", pD = "./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2", UD = "./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2", mD = "./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2", gD = "./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2", bD = "./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2", vD = "./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2", yD = "./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2", wD = "./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2", ED = "./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2", xD = "./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2", SD = "./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2", kD = "./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2", MD = "./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2", CD = "./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2", ID = "./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2", TD = "./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2", _D = "./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2", AD = "./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2", DD = "./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2", LD = "./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2", RD = "./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2", PD = "./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2", ND = "./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2", OD = "./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2", $D = "./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2", zD = "./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2", FD = "./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2", BD = "./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2", HD = "./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2", XD = "./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2", WD = "./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2", VD = "./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2", GD = "./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2", jD = "./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2", YD = "./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2", ZD = "./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2", KD = "./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2", qD = "./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2", JD = "./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2", QD = "./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2", eL = "./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2", tL = "./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2", nL = "./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2", aL = "./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2", iL = "./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2", rL = "./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2", lL = "./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2", oL = "./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2", sL = "./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2", cL = "./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2", dL = "./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2", uL = "./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2", fL = "./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2", hL = "./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2", pL = "./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2", UL = "./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2", mL = "./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2", gL = "./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2", bL = "./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2", vL = "./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2", yL = "./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2", wL = "./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2", EL = "./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2", xL = "./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2", SL = "./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2", kL = [{ uri: DT, descriptors: { unicodeRange: "U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a" } }, { uri: LT, descriptors: { unicodeRange: "U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee" } }, { uri: RT, descriptors: { unicodeRange: "U+d7eb-d7fb,U+f900-f9b7" } }, { uri: PT, descriptors: { unicodeRange: "U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea" } }, { uri: NT, descriptors: { unicodeRange: "U+d609-d6f1" } }, { uri: OT, descriptors: { unicodeRange: "U+d520-d608" } }, { uri: $T, descriptors: { unicodeRange: "U+d437-d51f" } }, { uri: zT, descriptors: { unicodeRange: "U+d34e-d436" } }, { uri: FT, descriptors: { unicodeRange: "U+d265-d34d" } }, { uri: BT, descriptors: { unicodeRange: "U+d17c-d264" } }, { uri: HT, descriptors: { unicodeRange: "U+d093-d17b" } }, { uri: XT, descriptors: { unicodeRange: "U+cfaa-d092" } }, { uri: WT, descriptors: { unicodeRange: "U+cec1-cfa9" } }, { uri: VT, descriptors: { unicodeRange: "U+cdd8-cec0" } }, { uri: GT, descriptors: { unicodeRange: "U+ccf1-cdd7" } }, { uri: jT, descriptors: { unicodeRange: "U+cc08-ccf0" } }, { uri: YT, descriptors: { unicodeRange: "U+cb43-cc07" } }, { uri: ZT, descriptors: { unicodeRange: "U+ca83-cb42" } }, { uri: KT, descriptors: { unicodeRange: "U+c9a1-ca82" } }, { uri: qT, descriptors: { unicodeRange: "U+c8b8-c9a0" } }, { uri: JT, descriptors: { unicodeRange: "U+c7cf-c8b7" } }, { uri: QT, descriptors: { unicodeRange: "U+c6e6-c7ce" } }, { uri: e_, descriptors: { unicodeRange: "U+c5fd-c6e5" } }, { uri: t_, descriptors: { unicodeRange: "U+c514-c5fc" } }, { uri: n_, descriptors: { unicodeRange: "U+c42b-c513" } }, { uri: a_, descriptors: { unicodeRange: "U+c341-c34e,U+c350-c42a" } }, { uri: i_, descriptors: { unicodeRange: "U+c258-c340" } }, { uri: r_, descriptors: { unicodeRange: "U+c16f-c257" } }, { uri: l_, descriptors: { unicodeRange: "U+c086-c16e" } }, { uri: o_, descriptors: { unicodeRange: "U+bf9d-c085" } }, { uri: s_, descriptors: { unicodeRange: "U+beb4-bf9c" } }, { uri: c_, descriptors: { unicodeRange: "U+bdcb-beb3" } }, { uri: d_, descriptors: { unicodeRange: "U+bce2-bdca" } }, { uri: u_, descriptors: { unicodeRange: "U+bbf9-bce1" } }, { uri: f_, descriptors: { unicodeRange: "U+bb10-bbf8" } }, { uri: h_, descriptors: { unicodeRange: "U+ba27-bb0f" } }, { uri: p_, descriptors: { unicodeRange: "U+b93e-ba26" } }, { uri: U_, descriptors: { unicodeRange: "U+b855-b93d" } }, { uri: m_, descriptors: { unicodeRange: "U+b76c-b854" } }, { uri: g_, descriptors: { unicodeRange: "U+b683-b76b" } }, { uri: b_, descriptors: { unicodeRange: "U+b59a-b682" } }, { uri: v_, descriptors: { unicodeRange: "U+b4b1-b599" } }, { uri: y_, descriptors: { unicodeRange: "U+11fb-11ff,U+b3cd-b4b0" } }, { uri: w_, descriptors: { unicodeRange: "U+11e6-11fa,U+b2f9-b3cc" } }, { uri: E_, descriptors: { unicodeRange: "U+11d1-11e5,U+b225-b2f8" } }, { uri: x_, descriptors: { unicodeRange: "U+11bc-11d0,U+b151-b224" } }, { uri: S_, descriptors: { unicodeRange: "U+11a7-11bb,U+b07d-b150" } }, { uri: k_, descriptors: { unicodeRange: "U+1191-11a6,U+afaa-b07c" } }, { uri: M_, descriptors: { unicodeRange: "U+117c-1190,U+aed6-afa9" } }, { uri: C_, descriptors: { unicodeRange: "U+1167-117b,U+ae02-aed5" } }, { uri: I_, descriptors: { unicodeRange: "U+1152-115e,U+1160-1166,U+ad2d-ae01" } }, { uri: T_, descriptors: { unicodeRange: "U+113d-1151,U+ac59-ad2c" } }, { uri: __, descriptors: { unicodeRange: "U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58" } }, { uri: A_, descriptors: { unicodeRange: "U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d" } }, { uri: D_, descriptors: { unicodeRange: "U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693" } }, { uri: L_, descriptors: { unicodeRange: "U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee" } }, { uri: R_, descriptors: { unicodeRange: "U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b" } }, { uri: P_, descriptors: { unicodeRange: "U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158" } }, { uri: N_, descriptors: { unicodeRange: "U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a" } }, { uri: O_, descriptors: { unicodeRange: "U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46" } }, { uri: $_, descriptors: { unicodeRange: "U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02" } }, { uri: z_, descriptors: { unicodeRange: "U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b" } }, { uri: F_, descriptors: { unicodeRange: "U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63" } }, { uri: B_, descriptors: { unicodeRange: "U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb" } }, { uri: H_, descriptors: { unicodeRange: "U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2" } }, { uri: X_, descriptors: { unicodeRange: "U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6" } }, { uri: W_, descriptors: { unicodeRange: "U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f" } }, { uri: V_, descriptors: { unicodeRange: "U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455" } }, { uri: G_, descriptors: { unicodeRange: "U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0" } }, { uri: j_, descriptors: { unicodeRange: "U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2" } }, { uri: Y_, descriptors: { unicodeRange: "U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057" } }, { uri: Z_, descriptors: { unicodeRange: "U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94" } }, { uri: K_, descriptors: { unicodeRange: "U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13" } }, { uri: q_, descriptors: { unicodeRange: "U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc" } }, { uri: J_, descriptors: { unicodeRange: "U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f" } }, { uri: Q_, descriptors: { unicodeRange: "U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c" } }, { uri: eA, descriptors: { unicodeRange: "U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6" } }, { uri: tA, descriptors: { unicodeRange: "U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad" } }, { uri: nA, descriptors: { unicodeRange: "U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588" } }, { uri: aA, descriptors: { unicodeRange: "U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491" } }, { uri: iA, descriptors: { unicodeRange: "U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177" } }, { uri: rA, descriptors: { unicodeRange: "U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371" } }, { uri: lA, descriptors: { unicodeRange: "U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1" } }, { uri: oA, descriptors: { unicodeRange: "U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4" } }, { uri: sA, descriptors: { unicodeRange: "U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72" } }, { uri: cA, descriptors: { unicodeRange: "U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a" } }, { uri: dA, descriptors: { unicodeRange: "U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965" } }, { uri: uA, descriptors: { unicodeRange: "U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f" } }, { uri: fA, descriptors: { unicodeRange: "U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7" } }, { uri: hA, descriptors: { unicodeRange: "U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc" } }, { uri: pA, descriptors: { unicodeRange: "U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f" } }, { uri: UA, descriptors: { unicodeRange: "U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359" } }, { uri: mA, descriptors: { unicodeRange: "U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e" } }, { uri: gA, descriptors: { unicodeRange: "U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4" } }, { uri: bA, descriptors: { unicodeRange: "U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf" } }, { uri: vA, descriptors: { unicodeRange: "U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3" } }, { uri: yA, descriptors: { unicodeRange: "U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90" } }, { uri: wA, descriptors: { unicodeRange: "U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f" } }, { uri: EA, descriptors: { unicodeRange: "U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936" } }, { uri: xA, descriptors: { unicodeRange: "U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842" } }, { uri: SA, descriptors: { unicodeRange: "U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf" } }, { uri: kA, descriptors: { unicodeRange: "U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a" } }, { uri: MA, descriptors: { unicodeRange: "U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285" } }, { uri: CA, descriptors: { unicodeRange: "U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8" } }, { uri: IA, descriptors: { unicodeRange: "U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100" } }, { uri: TA, descriptors: { unicodeRange: "U+49d5-4a77" } }, { uri: _A, descriptors: { unicodeRange: "U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb" } }, { uri: AA, descriptors: { unicodeRange: "U+4933-49d4" } }, { uri: DA, descriptors: { unicodeRange: "U+487a-4932" } }, { uri: LA, descriptors: { unicodeRange: "U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93" } }, { uri: RA, descriptors: { unicodeRange: "U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a" } }, { uri: PA, descriptors: { unicodeRange: "U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d" } }, { uri: NA, descriptors: { unicodeRange: "U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364" } }, { uri: OA, descriptors: { unicodeRange: "U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87" } }, { uri: $A, descriptors: { unicodeRange: "U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed" } }, { uri: zA, descriptors: { unicodeRange: "U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58" } }, { uri: FA, descriptors: { unicodeRange: "U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49" } }, { uri: BA, descriptors: { unicodeRange: "U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0" } }, { uri: HA, descriptors: { unicodeRange: "U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750" } }, { uri: XA, descriptors: { unicodeRange: "U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1" } }, { uri: WA, descriptors: { unicodeRange: "U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752" } }, { uri: VA, descriptors: { unicodeRange: "U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10" } }, { uri: GA, descriptors: { unicodeRange: "U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b" } }, { uri: jA, descriptors: { unicodeRange: "U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d" } }, { uri: YA, descriptors: { unicodeRange: "U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e" } }, { uri: ZA, descriptors: { unicodeRange: "U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402" } }, { uri: KA, descriptors: { unicodeRange: "U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64" } }, { uri: qA, descriptors: { unicodeRange: "U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8" } }, { uri: JA, descriptors: { unicodeRange: "U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa" } }, { uri: QA, descriptors: { unicodeRange: "U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1" } }, { uri: eD, descriptors: { unicodeRange: "U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e" } }, { uri: tD, descriptors: { unicodeRange: "U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1" } }, { uri: nD, descriptors: { unicodeRange: "U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d" } }, { uri: aD, descriptors: { unicodeRange: "U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f" } }, { uri: iD, descriptors: { unicodeRange: "U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b" } }, { uri: rD, descriptors: { unicodeRange: "U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b" } }, { uri: lD, descriptors: { unicodeRange: "U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3" } }, { uri: oD, descriptors: { unicodeRange: "U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d" } }, { uri: sD, descriptors: { unicodeRange: "U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213" } }, { uri: cD, descriptors: { unicodeRange: "U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251" } }, { uri: dD, descriptors: { unicodeRange: "U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1" } }, { uri: uD, descriptors: { unicodeRange: "U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191" } }, { uri: fD, descriptors: { unicodeRange: "U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0" } }, { uri: hD, descriptors: { unicodeRange: "U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d" } }, { uri: pD, descriptors: { unicodeRange: "U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd" } }, { uri: UD, descriptors: { unicodeRange: "U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80" } }, { uri: mD, descriptors: { unicodeRange: "U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51" } }, { uri: gD, descriptors: { unicodeRange: "U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85" } }, { uri: bD, descriptors: { unicodeRange: "U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b" } }, { uri: vD, descriptors: { unicodeRange: "U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87" } }, { uri: yD, descriptors: { unicodeRange: "U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c" } }, { uri: wD, descriptors: { unicodeRange: "U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89" } }, { uri: ED, descriptors: { unicodeRange: "U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e" } }, { uri: xD, descriptors: { unicodeRange: "U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b" } }, { uri: SD, descriptors: { unicodeRange: "U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10" } }, { uri: kD, descriptors: { unicodeRange: "U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b" } }, { uri: MD, descriptors: { unicodeRange: "U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd" } }, { uri: CD, descriptors: { unicodeRange: "U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef" } }, { uri: ID, descriptors: { unicodeRange: "U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a" } }, { uri: TD, descriptors: { unicodeRange: "U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc" } }, { uri: _D, descriptors: { unicodeRange: "U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4" } }, { uri: AD, descriptors: { unicodeRange: "U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26" } }, { uri: DD, descriptors: { unicodeRange: "U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f" } }, { uri: LD, descriptors: { unicodeRange: "U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a" } }, { uri: RD, descriptors: { unicodeRange: "U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f" } }, { uri: PD, descriptors: { unicodeRange: "U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20" } }, { uri: ND, descriptors: { unicodeRange: "U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23" } }, { uri: OD, descriptors: { unicodeRange: "U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8" } }, { uri: $D, descriptors: { unicodeRange: "U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84" } }, { uri: zD, descriptors: { unicodeRange: "U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50" } }, { uri: FD, descriptors: { unicodeRange: "U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede" } }, { uri: BD, descriptors: { unicodeRange: "U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1" } }, { uri: HD, descriptors: { unicodeRange: "U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec" } }, { uri: XD, descriptors: { unicodeRange: "U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8" } }, { uri: WD, descriptors: { unicodeRange: "U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02" } }, { uri: VD, descriptors: { unicodeRange: "U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73" } }, { uri: GD, descriptors: { unicodeRange: "U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568" } }, { uri: jD, descriptors: { unicodeRange: "U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770" } }, { uri: YD, descriptors: { unicodeRange: "U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba" } }, { uri: ZD, descriptors: { unicodeRange: "U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c" } }, { uri: KD, descriptors: { unicodeRange: "U+92ef-933d,U+933f-9369,U+936b-9388" } }, { uri: qD, descriptors: { unicodeRange: "U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed" } }, { uri: JD, descriptors: { unicodeRange: "U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985" } }, { uri: QD, descriptors: { unicodeRange: "U+4b0b-4ba0" } }, { uri: eL, descriptors: { unicodeRange: "U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d" } }, { uri: tL, descriptors: { unicodeRange: "U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa" } }, { uri: nL, descriptors: { unicodeRange: "U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4" } }, { uri: aL, descriptors: { unicodeRange: "U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a" } }, { uri: iL, descriptors: { unicodeRange: "U+4a78-4b0a" } }, { uri: rL, descriptors: { unicodeRange: "U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf" } }, { uri: lL, descriptors: { unicodeRange: "U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef" } }, { uri: oL, descriptors: { unicodeRange: "U+99c9-9a53" } }, { uri: sL, descriptors: { unicodeRange: "U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603" } }, { uri: cL, descriptors: { unicodeRange: "U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053" } }, { uri: dL, descriptors: { unicodeRange: "U+4ba1-4c2c" } }, { uri: uL, descriptors: { unicodeRange: "U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e" } }, { uri: fL, descriptors: { unicodeRange: "U+9d1a-9da1" } }, { uri: hL, descriptors: { unicodeRange: "U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8" } }, { uri: pL, descriptors: { unicodeRange: "U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0" } }, { uri: UL, descriptors: { unicodeRange: "U+4cad-4d2f" } }, { uri: mL, descriptors: { unicodeRange: "U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19" } }, { uri: gL, descriptors: { unicodeRange: "U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410" } }, { uri: bL, descriptors: { unicodeRange: "U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86" } }, { uri: vL, descriptors: { unicodeRange: "U+9bd0-9c4a" } }, { uri: yL, descriptors: { unicodeRange: "U+4c2d-4cac" } }, { uri: wL, descriptors: { unicodeRange: "U+4d30-4dab" } }, { uri: EL, descriptors: { unicodeRange: "U+9411-943d,U+943f-946a,U+946c-9484" } }, { uri: xL, descriptors: { unicodeRange: "U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94" } }, { uri: SL, descriptors: { unicodeRange: "U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b" } }], qi = class Qe {
  constructor(t) {
    L(this, "scene"), L(this, "getSceneFamilies", () => Qe.getUniqueFamilies(this.scene.getNonDeletedElements())), L(this, "onLoaded", (n) => {
      let a = !0;
      for (let l of n) {
        let o = `${l.family}-${l.style}-${l.weight}-${l.unicodeRange}`;
        Qe.loadedFontsCache.has(o) || (Qe.loadedFontsCache.add(o), a = !1);
      }
      if (a) return;
      let i = !1, r = this.scene.getNonDeletedElementsMap();
      for (let l of this.scene.getNonDeletedElements()) if (J(l)) {
        i = !0, mt.delete(l), gc.clearCache(Je(l));
        let o = Zt(l, r);
        o && mt.delete(o);
      }
      i && this.scene.triggerUpdate();
    }), L(this, "loadSceneFonts", async () => {
      let n = this.getSceneFamilies(), a = Qe.getCharsPerFamily(this.scene.getNonDeletedElements());
      return Qe.loadFontFaces(n, a);
    }), this.scene = t;
  }
  static get registered() {
    return Qe._registered ? Qe._initialized || (Qe._registered = new Map([...Qe.init().entries(), ...Qe._registered.entries()])) : Qe._registered = Qe.init(), Qe._registered;
  }
  get registered() {
    return Qe.registered;
  }
  static async generateFontFaceDeclarations(t) {
    let n = Qe.getUniqueFamilies(t), a = Qe.getCharsPerFamily(t), i = n.find((c) => Xb(c).includes(Fl));
    if (i) {
      let c = Qe.getCharacters(a, i);
      if (ZM(c)) {
        let d = Bl[Fl];
        a[d] = new Set(c), n.unshift(Bl[Fl]);
      }
    }
    let r = Qe.fontFacesStylesGenerator(n, a), l = 3, o = await new nm(r, l).all();
    return Array.from(new Set(o));
  }
  static async loadFontFaces(t, n) {
    for (let { fontFaces: r, metadata: l } of Qe.registered.values()) if (!l.local) for (let { fontFace: o } of r) window.document.fonts.has(o) || window.document.fonts.add(o);
    let a = Qe.fontFacesLoader(t, n), i = 10;
    return (await new nm(a, i).all()).flat().filter(Boolean);
  }
  static *fontFacesLoader(t, n) {
    for (let [a, i] of t.entries()) {
      let r = Je({ fontFamily: i, fontSize: 16 }), l = Qe.getCharacters(n, i);
      window.document.fonts.check(r, l) || (yield so(async () => {
        var o;
        try {
          let c = await window.document.fonts.load(r, l);
          return [a, c];
        } catch (c) {
          console.error(`Failed to load font "${r}" from urls "${(o = Qe.registered.get(i)) == null ? void 0 : o.fontFaces.map((d) => d.urls)}"`, c);
        }
      }));
    }
  }
  static *fontFacesStylesGenerator(t, n) {
    for (let [a, i] of t.entries()) {
      let { fontFaces: r, metadata: l } = Qe.registered.get(i) ?? {};
      if (!Array.isArray(r)) {
        console.error(`Couldn't find registered fonts for font-family "${i}"`, Qe.registered);
        continue;
      }
      if (!(l != null && l.local)) for (let [o, c] of r.entries()) yield so(async () => {
        try {
          let d = Qe.getCharacters(n, i), s = await c.toCSS(d);
          return s ? [a * 1e4 + o, s] : void 0;
        } catch (d) {
          console.error(`Couldn't transform font-face to css for family "${c.fontFace.family}"`, d);
        }
      });
    }
  }
  static register(t, n, ...a) {
    let i = ht[t] ?? Bl[t];
    return this.registered.get(i) || this.registered.set(i, { metadata: n, fontFaces: a.map(({ uri: r, descriptors: l }) => new tT(t, r, l)) }), this.registered;
  }
  static init() {
    let t = { registered: /* @__PURE__ */ new Map() }, n = (a, ...i) => {
      let r = ht[a] ?? Bl[a], l = ru[r] ?? ru[ht.Excalifont];
      Qe.register.call(t, a, l, ...i);
    };
    return n("Cascadia", ...aT), n("Comic Shanns", ...sT), n("Excalifont", ...gT), n("Helvetica", ...bT), n("Liberation Sans", ...yT), n("Lilita One", ...xT), n("Nunito", ...TT), n("Virgil", ...AT), n(Fl, ...kL), n(Bs, ...cT), Qe._initialized = !0, t.registered;
  }
  static getUniqueFamilies(t) {
    return Array.from(t.reduce((n, a) => (J(a) && n.add(a.fontFamily), n), /* @__PURE__ */ new Set()));
  }
  static getCharsPerFamily(t) {
    let n = {};
    for (let a of t) if (J(a)) for (let i of a.originalText) n[a.fontFamily] || (n[a.fontFamily] = /* @__PURE__ */ new Set()), n[a.fontFamily].add(i);
    return n;
  }
  static getCharacters(t, n) {
    return t[n] ? Array.from(t[n]).join("") : "";
  }
  static getAllFamilies() {
    return Array.from(Qe.registered.keys());
  }
};
L(qi, "loadedFontsCache", /* @__PURE__ */ new Set()), L(qi, "_registered"), L(qi, "_initialized", !1), L(qi, "loadElementsFonts", async (e) => {
  let t = qi.getUniqueFamilies(e), n = qi.getCharsPerFamily(e);
  return qi.loadFontFaces(t, n);
});
var Mi = qi, O8 = (e, t, n) => {
  var c;
  let { unitsPerEm: a, ascender: i, descender: r } = ((c = Mi.registered.get(e)) == null ? void 0 : c.metadata.metrics) || ru[ht.Virgil].metrics, l = t / a, o = (n - l * i + l * r) / 2;
  return l * i + o;
}, dl = (e) => {
  var n;
  let { lineHeight: t } = ((n = Mi.registered.get(e)) == null ? void 0 : n.metadata.metrics) || ru[ht.Excalifont].metrics;
  return t;
}, $8 = (e) => {
  let { angle: t, width: n, height: a, x: i, y: r } = e, l = i + n / 2, o = r + a / 2, c = k(l, o), d;
  return e.type === "diamond" ? d = q2(X(k(l, r), c, t), X(k(i + n, o), c, t), X(k(l, r + a), c, t), X(k(i, o), c, t)) : d = q2(X(k(i, r), c, t), X(k(i + n, r), c, t), X(k(i + n, r + a), c, t), X(k(i, r + a), c, t)), { type: "polygon", data: d };
}, ML = (e, t, n = 10) => {
  let [a, i, r, l, o, c] = ge(e, t, !0);
  a -= n, r += n, i -= n, l += n;
  let d = k(o, c), s = X(k(a, i), d, e.angle), u = X(k(r, i), d, e.angle), f = X(k(a, l), d, e.angle), h = X(k(r, l), d, e.angle);
  return { type: "polygon", data: [s, u, h, f] };
}, CL = (e) => {
  let { width: t, height: n, angle: a, x: i, y: r } = e;
  return { type: "ellipse", data: { center: k(i + t / 2, r + n / 2), angle: a, halfWidth: t / 2, halfHeight: n / 2 } };
}, xr = (e) => {
  if (!e) return [];
  for (let t of e.sets) if (t.type === "path") return t.ops;
  return e.sets[0].ops;
}, IL = (e, t = k(0, 0), n, a) => {
  let i = (c) => X(k(c[0] + t[0], c[1] + t[1]), a, n), r = xr(e), l = [], o = k(0, 0);
  for (let c of r) {
    if (c.op === "move") {
      let d = H0(c.data);
      cn(d != null, "Ops data is not a point"), o = i(d);
    }
    if (c.op === "bcurveTo") {
      let d = i(k(c.data[0], c.data[1])), s = i(k(c.data[2], c.data[3])), u = i(k(c.data[4], c.data[5]));
      l.push(Ei(o, d, s, u)), o = u;
    }
  }
  return { type: "polycurve", data: l };
}, TL = (e) => {
  let t = e[0], n = [];
  for (let a = 1; a < e.length; a++) {
    let i = e[a];
    n.push(ce(t, i)), t = i;
  }
  return n;
}, _L = (e, t, n = !1) => {
  let a = (r) => X(Ce(rr(se(r), Jt(e.x, e.y))), t, e.angle), i = TL(e.points.map((r) => a(r)));
  return n ? { type: "polygon", data: eu(i.flat()) } : { type: "polyline", data: i };
}, AL = (e, t, n = k(0, 0), a, i) => {
  let r = (s) => X(k(s[0] + n[0], s[1] + n[1]), i, a);
  if (e.roundness === null) return { type: "polygon", data: eu(e.points.map((s) => r(s))) };
  let l = xr(t), o = [], c = !1;
  for (let s of l) s.op === "move" ? (c = !c, c && o.push(k(s.data[0], s.data[1]))) : s.op === "bcurveTo" ? c && (o.push(k(s.data[0], s.data[1])), o.push(k(s.data[2], s.data[3])), o.push(k(s.data[4], s.data[5]))) : s.op === "lineTo" && c && o.push(k(s.data[0], s.data[1]));
  let d = ck(o, 10, 5).map((s) => r(s));
  return { type: "polygon", data: eu(d) };
}, DL = (e, t) => {
  let { angle: n, halfWidth: a, halfHeight: i, center: r } = t, l = a, o = i, c = rr(se(e), yt(se(r), -1)), [d, s] = X(Ce(c), k(0, 0), -n), u = Math.abs(d), f = Math.abs(s), h = 0.707, U = 0.707;
  for (let b = 0; b < 3; b++) {
    let v = l * h, y = o * U, w = (l * l - o * o) * h ** 3 / l, x = (o * o - l * l) * U ** 3 / o, S = v - w, E = y - x, M = u - w, I = f - x, T = Math.hypot(E, S), A = Math.hypot(I, M);
    h = Math.min(1, Math.max(0, (M * T / A + w) / l)), U = Math.min(1, Math.max(0, (I * T / A + x) / o));
    let D = Math.hypot(U, h);
    h /= D, U /= D;
  }
  let [m, g] = [l * h * Math.sign(d), o * U * Math.sign(s)];
  return ze(k(d, s), k(m, g));
}, LL = (e, t, n = 1e-4) => DL(e, t) <= n, RL = (e, t) => {
  let { center: n, angle: a, halfWidth: i, halfHeight: r } = t, l = rr(se(e), yt(se(n), -1)), [o, c] = X(Ce(l), k(0, 0), -a);
  return o / i * (o / i) + c / r * (c / r) <= 1;
}, S1 = (e, t, n = 0) => {
  switch (t.type) {
    case "polygon":
      return yM(e, t.data, n);
    case "ellipse":
      return LL(e, t.data, n);
    case "line":
      return rl(e, t.data, n);
    case "polyline":
      return F8(e, t.data, n);
    case "curve":
      return z8(e, t.data, n);
    case "polycurve":
      return PL(e, t.data, n);
    default:
      throw Error(`shape ${t} is not implemented`);
  }
}, lu = (e, t) => {
  switch (t.type) {
    case "polygon":
      return J2(e, t.data);
    case "line":
      return !1;
    case "curve":
      return !1;
    case "ellipse":
      return RL(e, t.data);
    case "polyline": {
      let n = eu(t.data.flat());
      return J2(e, n);
    }
    case "polycurve":
      return !1;
    default:
      throw Error(`shape ${t} is not implemented`);
  }
}, PL = (e, t, n) => t.some((a) => z8(e, a, n)), NL = (e) => {
  let [t, n, a, i] = e;
  return (r, l) => Math.pow(1 - r, 3) * i[l] + 3 * r * Math.pow(1 - r, 2) * a[l] + 3 * Math.pow(r, 2) * (1 - r) * n[l] + t[l] * Math.pow(r, 3);
}, OL = (e, t = 10) => {
  let n = NL(e), a = [n(0, 0), n(0, 1)], i = [], r = 0, l = 1 / t;
  for (let o = 0; o < t; o++) if (r += l, r <= 1) {
    let c = k(n(r, 0), n(r, 1));
    i.push(ce(a, c)), a = c;
  }
  return i;
}, z8 = (e, t, n) => F8(e, OL(t), n), F8 = (e, t, n = 1e-4) => t.some((a) => rl(e, a, n));
function B8(e, t, n) {
  return { center: e, halfWidth: t, halfHeight: n };
}
var $L = (e, t) => {
  let { halfWidth: n, halfHeight: a, center: i } = t, r = n, l = a, o = rr(se(e), yt(se(i), -1)), c = Math.abs(o[0]), d = Math.abs(o[1]), s = 0.707, u = 0.707;
  for (let U = 0; U < 3; U++) {
    let m = r * s, g = l * u, b = (r * r - l * l) * s ** 3 / r, v = (l * l - r * r) * u ** 3 / l, y = m - b, w = g - v, x = c - b, S = d - v, E = Math.hypot(w, y), M = Math.hypot(S, x);
    s = Math.min(1, Math.max(0, (x * E / M + b) / r)), u = Math.min(1, Math.max(0, (S * E / M + v) / l));
    let I = Math.hypot(u, s);
    s /= I, u /= I;
  }
  let [f, h] = [r * s * Math.sign(o[0]), l * u * Math.sign(o[1])];
  return ze(Ce(o), k(f, h));
};
function zL({ center: e, halfWidth: t, halfHeight: n }, [a, i]) {
  let [r, l] = e, o = a[0] - r, c = a[1] - l, d = i[0] - r, s = i[1] - l, u = Math.pow(d - o, 2) / Math.pow(t, 2) + Math.pow(s - c, 2) / Math.pow(n, 2), f = 2 * (o * (d - o) / Math.pow(t, 2) + c * (s - c) / Math.pow(n, 2)), h = Math.pow(o, 2) / Math.pow(t, 2) + Math.pow(c, 2) / Math.pow(n, 2) - 1, U = (-f + Math.sqrt(Math.pow(f, 2) - 4 * u * h)) / (2 * u), m = (-f - Math.sqrt(Math.pow(f, 2) - 4 * u * h)) / (2 * u), g = [k(o + U * (d - o) + r, c + U * (s - c) + l), k(o + m * (d - o) + r, c + m * (s - c) + l)].filter((b) => !isNaN(b[0]) && !isNaN(b[1]));
  return g.length === 2 && Ea(g[0], g[1]) ? [g[0]] : g;
}
function H8(e, t = 0) {
  let n = va(Math.min(e.width, e.height), e);
  if (n <= 0) {
    let u = m1(k(e.x - t, e.y - t), k(e.x + e.width + t, e.y + e.height + t)), f = ce(k(u[0][0] + n, u[0][1]), k(u[1][0] - n, u[0][1])), h = ce(k(u[1][0], u[0][1] + n), k(u[1][0], u[1][1] - n)), U = ce(k(u[0][0] + n, u[1][1]), k(u[1][0] - n, u[1][1])), m = ce(k(u[0][0], u[1][1] - n), k(u[0][0], u[0][1] + n));
    return [[f, h, U, m], []];
  }
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = m1(k(e.x, e.y), k(e.x + e.width, e.y + e.height)), r = ce(k(i[0][0] + n, i[0][1]), k(i[1][0] - n, i[0][1])), l = ce(k(i[1][0], i[0][1] + n), k(i[1][0], i[1][1] - n)), o = ce(k(i[0][0] + n, i[1][1]), k(i[1][0] - n, i[1][1])), c = ce(k(i[0][0], i[1][1] - n), k(i[0][0], i[0][1] + n)), d = [yt(on(se(k(i[0][0] - t, i[0][1] - t), a)), t), yt(on(se(k(i[1][0] + t, i[0][1] - t), a)), t), yt(on(se(k(i[1][0] + t, i[1][1] + t), a)), t), yt(on(se(k(i[0][0] - t, i[1][1] + t), a)), t)], s = [Ei(Ce(d[0], c[1]), Ce(d[0], k(c[1][0] + 2 / 3 * (i[0][0] - c[1][0]), c[1][1] + 2 / 3 * (i[0][1] - c[1][1]))), Ce(d[0], k(r[0][0] + 2 / 3 * (i[0][0] - r[0][0]), r[0][1] + 2 / 3 * (i[0][1] - r[0][1]))), Ce(d[0], r[0])), Ei(Ce(d[1], r[1]), Ce(d[1], k(r[1][0] + 2 / 3 * (i[1][0] - r[1][0]), r[1][1] + 2 / 3 * (i[0][1] - r[1][1]))), Ce(d[1], k(l[0][0] + 2 / 3 * (i[1][0] - l[0][0]), l[0][1] + 2 / 3 * (i[0][1] - l[0][1]))), Ce(d[1], l[0])), Ei(Ce(d[2], l[1]), Ce(d[2], k(l[1][0] + 2 / 3 * (i[1][0] - l[1][0]), l[1][1] + 2 / 3 * (i[1][1] - l[1][1]))), Ce(d[2], k(o[1][0] + 2 / 3 * (i[1][0] - o[1][0]), o[1][1] + 2 / 3 * (i[1][1] - o[1][1]))), Ce(d[2], o[1])), Ei(Ce(d[3], o[0]), Ce(d[3], k(o[0][0] + 2 / 3 * (i[0][0] - o[0][0]), o[0][1] + 2 / 3 * (i[1][1] - o[0][1]))), Ce(d[3], k(c[0][0] + 2 / 3 * (i[0][0] - c[0][0]), c[0][1] + 2 / 3 * (i[1][1] - c[0][1]))), Ce(d[3], c[0]))];
  return [[ce(s[0][3], s[1][0]), ce(s[1][3], s[2][0]), ce(s[2][3], s[3][0]), ce(s[3][3], s[0][0])], s];
}
function X8(e, t = 0) {
  var y;
  let [n, a, i, r, l, o, c, d] = c7(e), s = va(Math.abs(n - c), e), u = va(Math.abs(r - a), e);
  if (((y = e.roundness) == null ? void 0 : y.type) == null) {
    let [w, x, S, E] = [k(e.x + n, e.y + a - t), k(e.x + i + t, e.y + r), k(e.x + l, e.y + o + t), k(e.x + c - t, e.y + d)], M = ce(k(w[0] + s, w[1] + u), k(x[0] - s, x[1] - u)), I = ce(k(x[0] - s, x[1] + u), k(S[0] + s, S[1] - u)), T = ce(k(S[0] - s, S[1] - u), k(E[0] + s, E[1] + u)), A = ce(k(E[0] + s, E[1] - u), k(w[0] - s, w[1] + u));
    return [[M, I, T, A], []];
  }
  let f = k(e.x + e.width / 2, e.y + e.height / 2), [h, U, m, g] = [k(e.x + n, e.y + a), k(e.x + i, e.y + r), k(e.x + l, e.y + o), k(e.x + c, e.y + d)], b = [yt(on(se(U, f)), t), yt(on(se(m, f)), t), yt(on(se(g, f)), t), yt(on(se(h, f)), t)], v = [Ei(Ce(b[0], k(U[0] - s, U[1] - u)), Ce(b[0], U), Ce(b[0], U), Ce(b[0], k(U[0] - s, U[1] + u))), Ei(Ce(b[1], k(m[0] + s, m[1] - u)), Ce(b[1], m), Ce(b[1], m), Ce(b[1], k(m[0] - s, m[1] - u))), Ei(Ce(b[2], k(g[0] + s, g[1] + u)), Ce(b[2], g), Ce(b[2], g), Ce(b[2], k(g[0] + s, g[1] - u))), Ei(Ce(b[3], k(h[0] - s, h[1] + u)), Ce(b[3], h), Ce(b[3], h), Ce(b[3], k(h[0] + s, h[1] + u)))];
  return [[ce(v[0][3], v[1][0]), ce(v[1][3], v[2][0]), ce(v[2][3], v[3][0]), ce(v[3][3], v[0][0])], v];
}
var k1 = (e) => {
  if (e.type === "arrow") return !1;
  let t = !pa(e.backgroundColor) || ta(e) || Gn(e) || J(e);
  return e.type === "line" || e.type === "freedraw" ? t && Ti(e.points) : t || Oe(e);
}, $l = ({ x: e, y: t, element: n, shape: a, threshold: i = 10, frameNameBound: r = null }) => {
  let l = k1(n) && lu(k(e, t), a) || S1(k(e, t), a, i);
  return !l && r && (l = lu(k(e, t), { type: "polygon", data: $8(r).data })), l;
}, ap = (e, t, n, a, i = 0) => {
  let [r, l, o, c] = Sa(n, a);
  return r -= i, l -= i, o += i, c += i, Kb(k(r, l), k(e, t), k(o, c));
}, FL = (e, t) => !$l(e) && !W8(e.x, e.y, G8(e.element, t)) && ap(e.x, e.y, e.element, t), W8 = (e, t, n) => !!n && lu(k(e, t), n), V8 = (e, t, n = 0) => {
  switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      return BL(e, t, n);
    case "diamond":
      return HL(e, t, n);
    case "ellipse":
      return XL(e, t, n);
    default:
      throw new Error(`Unimplemented element type '${e.type}'`);
  }
}, BL = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = X(t[0], a, -e.angle), r = X(t[1], a, -e.angle), [l, o] = H8(e, n);
  return [...l.map((c) => Ws(ce(i, r), c)).filter((c) => c != null).map((c) => X(c, a, e.angle)), ...o.flatMap((c) => qb(c, ce(i, r))).filter((c) => c != null).map((c) => X(c, a, e.angle))].filter((c, d, s) => s.findIndex((u) => Ea(c, u)) === d);
}, HL = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = X(t[0], a, -e.angle), r = X(t[1], a, -e.angle), [l, o] = X8(e, n);
  return [...l.map((c) => Ws(ce(i, r), c)).filter((c) => c != null).map((c) => X(c, a, e.angle)), ...o.flatMap((c) => qb(c, ce(i, r))).filter((c) => c != null).map((c) => X(c, a, e.angle))].filter((c, d, s) => s.findIndex((u) => Ea(c, u)) === d);
}, XL = (e, t, n = 0) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2), i = X(t[0], a, -e.angle), r = X(t[1], a, -e.angle);
  return zL(B8(a, e.width / 2 + n, e.height / 2 + n), U1(i, r)).map((l) => X(l, a, e.angle));
}, De = { EQUAL: "Equal", MINUS: "Minus", NUM_ADD: "NumpadAdd", NUM_SUBTRACT: "NumpadSubtract", NUM_ZERO: "Numpad0", BRACKET_RIGHT: "BracketRight", BRACKET_LEFT: "BracketLeft", ONE: "Digit1", TWO: "Digit2", THREE: "Digit3", QUOTE: "Quote", ZERO: "Digit0", SLASH: "Slash", C: "KeyC", D: "KeyD", H: "KeyH", V: "KeyV", Z: "KeyZ", Y: "KeyY", R: "KeyR", S: "KeyS" }, P = { ARROW_DOWN: "ArrowDown", ARROW_LEFT: "ArrowLeft", ARROW_RIGHT: "ArrowRight", ARROW_UP: "ArrowUp", PAGE_UP: "PageUp", PAGE_DOWN: "PageDown", BACKSPACE: "Backspace", ALT: "Alt", CTRL_OR_CMD: Qa ? "metaKey" : "ctrlKey", DELETE: "Delete", ENTER: "Enter", ESCAPE: "Escape", QUESTION_MARK: "?", SPACE: " ", TAB: "Tab", CHEVRON_LEFT: "<", CHEVRON_RIGHT: ">", PERIOD: ".", COMMA: ",", SLASH: "/", A: "a", D: "d", E: "e", F: "f", G: "g", H: "h", I: "i", L: "l", O: "o", P: "p", Q: "q", R: "r", S: "s", T: "t", V: "v", X: "x", Y: "y", Z: "z", K: "k", 0: "0", 1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9" }, WL = /* @__PURE__ */ new Map([[P.Z, De.Z], [P.Y, De.Y]]), VL = (e) => /^[a-z]$/.test(e.toLowerCase()), M1 = (e, t) => {
  if (t === e.key.toLowerCase()) return !0;
  let n = WL.get(t);
  return !!(n && !VL(e.key) && e.code === n);
}, ls = (e) => e === P.ARROW_LEFT || e === P.ARROW_RIGHT || e === P.ARROW_DOWN || e === P.ARROW_UP, ch = (e) => e.altKey, Vo = (e) => e.shiftKey, ws = (e) => e.shiftKey, ip = [{ icon: fC, value: "selection", key: P.V, numericKey: P[1], fillable: !0 }, { icon: hC, value: "rectangle", key: P.R, numericKey: P[2], fillable: !0 }, { icon: pC, value: "diamond", key: P.D, numericKey: P[3], fillable: !0 }, { icon: UC, value: "ellipse", key: P.O, numericKey: P[4], fillable: !0 }, { icon: mC, value: "arrow", key: P.A, numericKey: P[5], fillable: !0 }, { icon: gC, value: "line", key: P.L, numericKey: P[6], fillable: !0 }, { icon: Vs, value: "freedraw", key: [P.P, P.X], numericKey: P[7], fillable: !1 }, { icon: U8, value: "text", key: P.T, numericKey: P[8], fillable: !1 }, { icon: vC, value: "image", key: null, numericKey: P[9], fillable: !1 }, { icon: yC, value: "eraser", key: P.E, numericKey: P[0], fillable: !1 }], GL = (e) => {
  var t;
  return ((t = ip.find((n, a) => n.numericKey != null && e === n.numericKey.toString() || n.key && (typeof n.key == "string" ? n.key === e : n.key.includes(e)))) == null ? void 0 : t.value) || null;
}, vi = (e, t) => {
  var n;
  switch (e.type) {
    case "rectangle":
    case "diamond":
    case "frame":
    case "magicframe":
    case "embeddable":
    case "image":
    case "iframe":
    case "text":
    case "selection":
      return $8(e);
    case "arrow":
    case "line": {
      let a = ((n = mt.get(e)) == null ? void 0 : n[0]) ?? mt.generateElementShape(e, null)[0], [, , , , i, r] = ge(e, t);
      return k1(e) ? AL(e, a, k(e.x, e.y), e.angle, k(i, r)) : IL(a, k(e.x, e.y), e.angle, k(i, r));
    }
    case "ellipse":
      return CL(e);
    case "freedraw": {
      let [, , , , a, i] = ge(e, t);
      return _L(e, k(a, i), k1(e));
    }
  }
}, G8 = (e, t) => {
  let n = ye(e, t);
  return n ? e.type === "arrow" ? vi({ ...n, ...ee.getBoundTextElementPosition(e, n, t) }, t) : vi(n, t) : null;
}, j8 = (e, t) => {
  let n = mt.generateElementShape(e, null);
  if (!n) return null;
  let a = xr(n[0]), i = k(0, 0), r = 0, l = 1 / 0, o = null;
  for (; r < a.length; ) {
    let { op: c, data: d } = a[r];
    if (c === "move" && (cn(pM(d), "The returned ops is not compatible with a point"), i = d), c === "bcurveTo") {
      let s = i, u = k(d[0], d[1]), f = k(d[2], d[3]), h = k(d[4], d[5]), U = ze(h, t);
      U < l && (l = U, o = [s, u, f, h]), i = h;
    }
    r++;
  }
  return o;
}, Y8 = (e, t, n, a, i) => {
  let r = (c, d) => Math.pow(1 - c, 3) * a[d] + 3 * c * Math.pow(1 - c, 2) * n[d] + 3 * Math.pow(c, 2) * (1 - c) * t[d] + e[d] * Math.pow(c, 3), l = r(i, 0), o = r(i, 1);
  return k(l, o);
}, jL = (e, t) => {
  let n = j8(e, t);
  if (!n) return [];
  let a = [], i = 1;
  for (; i > 0; ) {
    let r = Y8(n[0], n[1], n[2], n[3], i);
    a.push(k(r[0], r[1])), i -= 0.05;
  }
  return a.length && Ea(a.at(-1), t) && a.push(k(t[0], t[1])), a;
}, Z8 = (e, t) => {
  let n = [];
  n[0] = 0;
  let a = jL(e, t), i = 0, r = 0;
  for (; i < a.length - 1; ) {
    let l = ze(a[i], a[i + 1]);
    r += l, n.push(r), i++;
  }
  return n;
}, YL = (e, t) => Z8(e, t).at(-1), ZL = (e, t, n) => {
  let a = Z8(e, t), i = a.length - 1, r = a.at(-1), l = n * r, o = 0, c = i, d = 0;
  for (; o < c; ) d = Math.floor(o + (c - o) / 2), a[d] < l ? o = d + 1 : c = d;
  return a[d] > l && d--, a[d] === l ? d / i : 1 - (d + (l - a[d]) / (a[d + 1] - a[d])) / i;
}, Xa = (e, t) => {
  let n = { minX: e.x, minY: e.y, maxX: e.x + e.width, maxY: e.y + e.height, midX: e.x + e.width / 2, midY: e.y + e.height / 2 }, a = k(n.midX, n.midY), [i, r] = X(k(n.minX, n.minY), a, e.angle), [l, o] = X(k(n.maxX, n.minY), a, e.angle), [c, d] = X(k(n.maxX, n.maxY), a, e.angle), [s, u] = X(k(n.minX, n.maxY), a, e.angle), f = [Math.min(i, l, c, s), Math.min(r, o, d, u), Math.max(i, l, c, s), Math.max(r, o, d, u)];
  if (t) {
    let [h, U, m, g] = t;
    return [f[0] - g, f[1] - h, f[2] + U, f[3] + m];
  }
  return f;
}, uo = (e, t) => e[0] > t[0] && e[0] < t[2] && e[1] > t[1] && e[1] < t[3], va = (e, t) => {
  var n, a, i, r;
  if (((n = t.roundness) == null ? void 0 : n.type) === Pt.PROPORTIONAL_RADIUS || ((a = t.roundness) == null ? void 0 : a.type) === Pt.LEGACY) return e * Qf;
  if (((i = t.roundness) == null ? void 0 : i.type) === Pt.ADAPTIVE_RADIUS) {
    let l = ((r = t.roundness) == null ? void 0 : r.value) ?? iM, o = l / Qf;
    return e <= o ? e * Qf : l;
  }
  return 0;
}, Ti = (e, t = 1) => {
  if (e.length >= 3) {
    let [n, a] = [e[0], e[e.length - 1]];
    return ze(n, a) <= md / t;
  }
  return !1;
}, Wt = 10, KL = (e, t, n, a, i, r, l) => {
  var T, A;
  let { width: o, height: c } = _i(e), d = n / o, s = a / c, u = (((T = e.crop) == null ? void 0 : T.x) ?? 0) / d, f = (((A = e.crop) == null ? void 0 : A.y) ?? 0) / s, h = X(k(i, r), k(e.x + e.width / 2, e.y + e.height / 2), -e.angle);
  i = h[0], r = h[1];
  let U = e.width, m = e.height, g = e.crop ?? { x: 0, y: 0, width: n, height: a, naturalWidth: n, naturalHeight: a }, b = g.height, v = g.width, y = e.scale[0] === -1, w = e.scale[1] === -1, x = r - e.y, S = i - e.x;
  t.includes("n") && (m = Me(e.height - x, Wt, w ? c - f : e.height + f)), t.includes("s") && (x = r - e.y - e.height, m = Me(e.height + x, Wt, w ? e.height + f : c - f)), t.includes("e") && (S = i - e.x - e.width, U = Me(e.width + S, Wt, y ? e.width + u : o - u)), t.includes("w") && (U = Me(e.width - S, Wt, y ? o - u : e.width + u));
  let E = (D) => {
    D.height = m * s, D.width = U * d;
  };
  E(g);
  let M = (D, R) => {
    E(R), D.includes("n") && (w || (R.y += b - R.height)), D.includes("s") && w && (R.y += b - R.height), D.includes("e") && y && (R.x += v - R.width), D.includes("w") && (y || (R.x += v - R.width));
  };
  switch (t) {
    case "n": {
      if (l) {
        let D = u + e.width / 2, R = o - u - e.width / 2, O = Math.min(D, R) * 2;
        U = Me(m * l, Wt, O), m = U / l;
      }
      M(t, g), l && (g.x += (v - g.width) / 2);
      break;
    }
    case "s": {
      if (l) {
        let D = u + e.width / 2, R = o - u - e.width / 2, O = Math.min(D, R) * 2;
        U = Me(m * l, Wt, O), m = U / l;
      }
      M(t, g), l && (g.x += (v - g.width) / 2);
      break;
    }
    case "w": {
      if (l) {
        let D = f + e.height / 2, R = c - f - e.height / 2, O = Math.min(D, R) * 2;
        m = Me(U / l, Wt, O), U = m * l;
      }
      M(t, g), l && (g.y += (b - g.height) / 2);
      break;
    }
    case "e": {
      if (l) {
        let D = f + e.height / 2, R = c - f - e.height / 2, O = Math.min(D, R) * 2;
        m = Me(U / l, Wt, O), U = m * l;
      }
      M(t, g), l && (g.y += (b - g.height) / 2);
      break;
    }
    case "ne": {
      if (l) if (S > -x) {
        let D = w ? c - f : f + e.height;
        m = Me(U / l, Wt, D), U = m * l;
      } else {
        let D = y ? u + e.width : o - u;
        U = Me(m * l, Wt, D), m = U / l;
      }
      M(t, g);
      break;
    }
    case "nw": {
      if (l) if (S < x) {
        let D = w ? c - f : f + e.height;
        m = Me(U / l, Wt, D), U = m * l;
      } else {
        let D = y ? o - u : u + e.width;
        U = Me(m * l, Wt, D), m = U / l;
      }
      M(t, g);
      break;
    }
    case "se": {
      if (l) if (S > x) {
        let D = w ? f + e.height : c - f;
        m = Me(U / l, Wt, D), U = m * l;
      } else {
        let D = y ? u + e.width : o - u;
        U = Me(m * l, Wt, D), m = U / l;
      }
      M(t, g);
      break;
    }
    case "sw": {
      if (l) if (-S > x) {
        let D = w ? f + e.height : c - f;
        m = Me(U / l, Wt, D), U = m * l;
      } else {
        let D = y ? o - u : u + e.width;
        U = Me(m * l, Wt, D), m = U / l;
      }
      M(t, g);
      break;
    }
  }
  let I = qL(e, t, U, m, !!l);
  return Y2(g.width, g.naturalWidth) && Y2(g.height, g.naturalHeight) && (g = null), { x: I[0], y: I[1], width: U, height: m, crop: g };
}, qL = (e, t, n, a, i) => {
  let [r, l, o, c] = ur(e, e.width, e.height, !0), d = k(r, l), s = k(o, c), u = pc(d, s), [f, h, U, m] = ur(e, n, a, !0), g = U - f, b = m - h, v = [...d];
  if (["n", "w", "nw"].includes(t) && (v = [s[0] - Math.abs(g), s[1] - Math.abs(b)]), t === "ne") {
    let M = [d[0], s[1]];
    v = [M[0], M[1] - Math.abs(b)];
  }
  if (t === "sw") {
    let M = [s[0], d[1]];
    v = [M[0] - Math.abs(g), M[1]];
  }
  i && (["s", "n"].includes(t) && (v[0] = u[0] - g / 2), ["e", "w"].includes(t) && (v[1] = u[1] - b / 2));
  let y = e.angle, w = X(v, u, y), x = [v[0] + Math.abs(g) / 2, v[1] + Math.abs(b) / 2], S = X(x, u, y);
  v = X(w, S, -y);
  let E = [...v];
  return E[0] += e.x - f, E[1] += e.y - h, E;
}, JL = (e, t) => {
  if (e.crop) {
    let { width: n, height: a } = _i(e), [i, r, l, o, c, d] = ge(e, t), s = se(X(k(i, r), k(c, d), e.angle)), u = se(X(k(l, r), k(c, d), e.angle)), f = on(Jd(u, s)), h = se(X(k(i, o), k(c, d), e.angle)), U = Jd(h, s), m = on(U), { cropX: g, cropY: b } = QL(e.crop, e.scale), v = rr(rr(s, yt(f, -g * n / e.crop.naturalWidth)), yt(m, -b * a / e.crop.naturalHeight)), y = Ce(rr(rr(v, yt(f, n / 2)), yt(m, a / 2))), w = X(Ce(v), y, -e.angle);
    return { ...e, x: w[0], y: w[1], width: n, height: a, crop: null };
  }
  return e;
}, _i = (e) => {
  if (e.crop) {
    let t = e.width / (e.crop.width / e.crop.naturalWidth), n = e.height / (e.crop.height / e.crop.naturalHeight);
    return { width: t, height: n };
  }
  return { width: e.width, height: e.height };
}, QL = (e, t) => {
  let n = e.x, a = e.y, i = t[0] === -1, r = t[1] === -1;
  return i && (n = e.naturalWidth - Math.abs(n) - e.width), r && (a = e.naturalHeight - Math.abs(a) - e.height), { cropX: n, cropY: a };
}, eR = (e, t = !1) => {
  let n = e.crop;
  if (!n) return null;
  let a = e.scale[0] === -1, i = e.scale[1] === -1, r = n.x, l = n.y;
  if (a && (r = n.naturalWidth - n.width - n.x), i && (l = n.naturalHeight - n.height - n.y), t) return { x: r, y: l };
  let { width: o, height: c } = _i(e);
  return { x: r / (n.naturalWidth / o), y: l / (n.naturalHeight / c) };
}, K8 = "invert(100%) hue-rotate(180deg) saturate(1.25)", tR = ei(), q8 = (e, t) => Vn(e) && !t.imageCache.has(e.fileId), J8 = (e, t, n) => {
  var a;
  return n.theme === Ie.DARK && Vn(e) && !q8(e, t) && ((a = t.imageCache.get(e.fileId)) == null ? void 0 : a.mimeType) !== de.svg;
}, Ju = (e) => {
  switch (e.type) {
    case "freedraw":
      return e.strokeWidth * 12;
    case "text":
      return e.fontSize / 2;
    default:
      return 20;
  }
}, Q8 = (e, t, n, a, i = 1) => {
  let r = ((t == null ? void 0 : t.opacity) ?? 100) * e.opacity / 1e4 * i;
  return (n.has(e.id) || a && a.some((l) => l.id === e.id) || t && n.has(t.id)) && (r *= aM / 100), r;
}, nR = (e, t, n) => {
  let a = Ju(e), [i, r, l, o] = ge(e, t), c = me(e) || ea(e) ? rn(i, l) : e.width, d = me(e) || ea(e) ? rn(r, o) : e.height, s = c * window.devicePixelRatio + a * 2, u = d * window.devicePixelRatio + a * 2, f = n.value;
  return (s * f > 32767 || u * f > 32767) && (f = Math.min(32767 / s, 32767 / u)), s * u * f * f > 16777216 && (f = Math.sqrt(16777216 / (s * u))), s = Math.floor(s * f), u = Math.floor(u * f), { width: s, height: u, scale: f };
}, e7 = (e, t, n, a, i) => {
  var b, v;
  let r = document.createElement("canvas"), l = r.getContext("2d"), o = Ju(e), { width: c, height: d, scale: s } = nR(e, t, n);
  if (!c || !d) return null;
  r.width = c, r.height = d;
  let u = -100, f = 0;
  if (me(e) || ea(e)) {
    let [y, w] = ge(e, t);
    u = e.x > y ? rn(e.x, y) * window.devicePixelRatio * s : 0, f = e.y > w ? rn(e.y, w) * window.devicePixelRatio * s : 0, l.translate(u, f);
  }
  l.save(), l.translate(o * s, o * s), l.scale(window.devicePixelRatio * s, window.devicePixelRatio * s);
  let h = wr.canvas(r);
  J8(e, a, i) && (l.filter = K8), Ed(e, h, l, a), l.restore();
  let U = ye(e, t), m = document.createElement("canvas"), g = m.getContext("2d");
  if (xe(e) && U) {
    let [y, w, x, S] = ge(e, t), E = Math.max(rn(y, x), rn(w, S));
    m.width = E * window.devicePixelRatio * s + o * s * 10, m.height = E * window.devicePixelRatio * s + o * s * 10, g.translate(m.width / 2, m.height / 2), g.rotate(e.angle), g.drawImage(r, -r.width / 2, -r.height / 2, r.width, r.height);
    let [, , , , M, I] = ge(U, t);
    g.rotate(-e.angle);
    let T = (m.width - r.width) / 2, A = (m.height - r.height) / 2, D = m.width / 2 - (M - y) * window.devicePixelRatio * s - T - o * s, R = m.height / 2 - (I - w) * window.devicePixelRatio * s - A - o * s;
    g.translate(-D, -R), g.clearRect(-(U.width / 2 + Rt) * window.devicePixelRatio * s, -(U.height / 2 + Rt) * window.devicePixelRatio * s, (U.width + Rt * 2) * window.devicePixelRatio * s, (U.height + Rt * 2) * window.devicePixelRatio * s);
  }
  return { element: e, canvas: r, theme: i.theme, scale: s, zoomValue: n.value, canvasOffsetX: u, canvasOffsetY: f, boundTextElementVersion: ((b = ye(e, t)) == null ? void 0 : b.version) || null, containingFrameOpacity: ((v = Tn(e, t)) == null ? void 0 : v.opacity) || 100, boundTextCanvas: m, angle: e.angle, imageCrop: Oe(e) ? e.crop : null };
}, aR = 14, t7 = document.createElement("img");
t7.src = `data:${de.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;
var n7 = document.createElement("img");
n7.src = `data:${de.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;
var iR = (e, t) => {
  t.fillStyle = "#E7E7E7", t.fillRect(0, 0, e.width, e.height);
  let n = Math.min(e.width, e.height), a = Math.min(n, Math.min(n * 0.4, 100));
  t.drawImage(e.status === "error" ? n7 : t7, e.width / 2 - a / 2, e.height / 2 - a / 2, a, a);
}, Ed = (e, t, n, a, i) => {
  var r;
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse": {
      n.lineJoin = "round", n.lineCap = "round", t.draw(mt.get(e));
      break;
    }
    case "arrow":
    case "line": {
      n.lineJoin = "round", n.lineCap = "round", mt.get(e).forEach((l) => {
        t.draw(l);
      });
      break;
    }
    case "freedraw": {
      n.save(), n.fillStyle = e.strokeColor;
      let l = oR(e), o = mt.get(e);
      o && t.draw(o), n.fillStyle = e.strokeColor, n.fill(l), n.restore();
      break;
    }
    case "image": {
      let l = Vn(e) ? (r = a.imageCache.get(e.fileId)) == null ? void 0 : r.image : void 0;
      if (l != null && !(l instanceof Promise)) {
        e.roundness && n.roundRect && (n.beginPath(), n.roundRect(0, 0, e.width, e.height, va(Math.min(e.width, e.height), e)), n.clip());
        let { x: o, y: c, width: d, height: s } = e.crop ? e.crop : { x: 0, y: 0, width: l.naturalWidth, height: l.naturalHeight };
        n.drawImage(l, o, c, d, s, 0, 0, e.width, e.height);
      } else iR(e, n);
      break;
    }
    default:
      if (J(e)) {
        let l = e8(e.text), o = l && !n.canvas.isConnected;
        o && document.body.appendChild(n.canvas), n.canvas.setAttribute("dir", l ? "rtl" : "ltr"), n.save(), n.font = Je(e), n.fillStyle = e.strokeColor, n.textAlign = e.textAlign;
        let c = e.text.replace(/\r\n?/g, `
`).split(`
`), d = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0, s = mc(e.fontSize, e.lineHeight), u = O8(e.fontFamily, e.fontSize, s);
        for (let f = 0; f < c.length; f++) n.fillText(c[f], d, f * s + u);
        n.restore(), o && n.canvas.remove();
      } else throw new Error(`Unimplemented type ${e.type}`);
  }
}, C1 = /* @__PURE__ */ new WeakMap(), km = (e, t, n, a) => {
  var u;
  let i = n ? a.zoom : tR.zoom, r = C1.get(e), l = r && r.zoomValue !== i.value && !(a != null && a.shouldCacheIgnoreZoom), o = ye(e, t), c = (o == null ? void 0 : o.version) || null, d = Oe(e) ? e.crop : null, s = ((u = Tn(e, t)) == null ? void 0 : u.opacity) || 100;
  if (!r || l || r.theme !== a.theme || r.boundTextElementVersion !== c || r.imageCrop !== d || r.containingFrameOpacity !== s || xe(e) && o && e.angle !== r.angle) {
    let f = e7(e, t, i, n, a);
    return f ? (C1.set(e, f), f) : null;
  }
  return r;
}, dh = (e, t, n, a, i) => {
  let r = e.element, l = Ju(r), o = e.scale, [c, d, s, u] = ge(r, i), f = ((c + s) / 2 + a.scrollX) * window.devicePixelRatio, h = ((d + u) / 2 + a.scrollY) * window.devicePixelRatio;
  t.save(), t.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio);
  let U = ye(r, i);
  if (xe(r) && U) {
    let m = (e.boundTextCanvas.width - e.canvas.width) / 2, g = (e.boundTextCanvas.height - e.canvas.height) / 2;
    t.translate(f, h), t.drawImage(e.boundTextCanvas, -(s - c) / 2 * window.devicePixelRatio - m / o - l, -(u - d) / 2 * window.devicePixelRatio - g / o - l, e.boundTextCanvas.width / o, e.boundTextCanvas.height / o);
  } else t.translate(f, h), t.rotate(r.angle), "scale" in e.element && !q8(r, n) && t.scale(e.element.scale[0], e.element.scale[1]), t.translate(-f, -h), t.drawImage(e.canvas, (c + a.scrollX) * window.devicePixelRatio - l * e.scale / e.scale, (d + a.scrollY) * window.devicePixelRatio - l * e.scale / e.scale, e.canvas.width / e.scale, e.canvas.height / e.scale), we.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;
  t.restore();
}, rR = (e, t, n, a) => {
  t.save(), t.translate(e.x + n.scrollX, e.y + n.scrollY), t.fillStyle = "rgba(0, 0, 200, 0.04)";
  let i = 0.5 / n.zoom.value;
  t.fillRect(i, i, e.width, e.height), t.lineWidth = 1 / n.zoom.value, t.strokeStyle = a, t.strokeRect(i, i, e.width, e.height), t.restore();
}, Nr = (e, t, n, a, i, r, l) => {
  var c;
  let o = ((c = l.openDialog) == null ? void 0 : c.name) === "elementLinkSelector" && !l.selectedElementIds[e.id] && !l.hoveredElementIds[e.id];
  switch (i.globalAlpha = Q8(e, Tn(e, t), r.elementsPendingErasure, r.pendingFlowchartNodes, o ? Yb : 1), e.type) {
    case "magicframe":
    case "frame": {
      l.frameRendering.enabled && l.frameRendering.outline && (i.save(), i.translate(e.x + l.scrollX, e.y + l.scrollY), i.fillStyle = "rgba(0, 0, 200, 0.04)", i.lineWidth = pt.strokeWidth / l.zoom.value, i.strokeStyle = pt.strokeColor, vd(e) && (i.strokeStyle = l.theme === Ie.LIGHT ? "#7affd7" : "#1d8264"), i.roundRect ? (i.beginPath(), i.roundRect(0, 0, e.width, e.height, pt.radius / l.zoom.value), i.stroke(), i.closePath()) : i.strokeRect(0, 0, e.width, e.height), i.restore());
      break;
    }
    case "freedraw": {
      if (mt.generateElementShape(e, null), r.isExporting) {
        let [d, s, u, f] = ge(e, t), h = (d + u) / 2 + l.scrollX, U = (s + f) / 2 + l.scrollY, m = (u - d) / 2 - (e.x - d), g = (f - s) / 2 - (e.y - s);
        i.save(), i.translate(h, U), i.rotate(e.angle), i.translate(-m, -g), Ed(e, a, i, r), i.restore();
      } else {
        let d = km(e, n, r, l);
        if (!d) return;
        dh(d, i, r, l, n);
      }
      break;
    }
    case "rectangle":
    case "diamond":
    case "ellipse":
    case "line":
    case "arrow":
    case "image":
    case "text":
    case "iframe":
    case "embeddable": {
      if (mt.generateElementShape(e, r), r.isExporting) {
        let [d, s, u, f] = ge(e, t), h = (d + u) / 2 + l.scrollX, U = (s + f) / 2 + l.scrollY, m = (u - d) / 2 - (e.x - d), g = (f - s) / 2 - (e.y - s);
        if (J(e)) {
          let v = Zt(e, t);
          if (xe(v)) {
            let y = ee.getBoundTextElementPosition(v, e, t);
            m = (u - d) / 2 - (y.x - d), g = (f - s) / 2 - (y.y - s);
          }
        }
        i.save(), i.translate(h, U), J8(e, r, l) && (i.filter = "none");
        let b = ye(e, t);
        if (xe(e) && b) {
          let v = document.createElement("canvas"), y = v.getContext("2d"), w = Math.max(rn(d, u), rn(s, f)), x = Ju(e);
          v.width = w * l.exportScale + x * 10 * l.exportScale, v.height = w * l.exportScale + x * 10 * l.exportScale, y.translate(v.width / 2, v.height / 2), y.scale(l.exportScale, l.exportScale), m = e.width / 2 - (e.x - d), g = e.height / 2 - (e.y - s), y.rotate(e.angle);
          let S = wr.canvas(v);
          y.translate(-m, -g), Ed(e, S, y, r), y.translate(m, g), y.rotate(-e.angle);
          let [, , , , E, M] = ge(b, t), I = (d + u) / 2 - E, T = (s + f) / 2 - M;
          y.translate(-I, -T), y.clearRect(-b.width / 2, -b.height / 2, b.width, b.height), i.scale(1 / l.exportScale, 1 / l.exportScale), i.drawImage(v, -v.width / 2, -v.height / 2, v.width, v.height);
        } else i.rotate(e.angle), e.type === "image" && i.scale(e.scale[0], e.scale[1]), i.translate(-m, -g), Ed(e, a, i, r);
        i.restore();
      } else {
        let d = km(e, n, r, l);
        if (!d) return;
        let s = i.imageSmoothingEnabled;
        if (!(l != null && l.shouldCacheIgnoreZoom) && (!e.angle || uM(e.angle)) && (i.imageSmoothingEnabled = !1), e.id === l.croppingElementId && Oe(d.element) && d.element.crop !== null) {
          i.save(), i.globalAlpha = 0.1;
          let u = e7(JL(d.element, t), n, l.zoom, r, l);
          u && dh(u, i, r, l, n), i.restore();
        }
        dh(d, i, r, l, n), i.imageSmoothingEnabled = s;
      }
      break;
    }
    default:
      throw new Error(`Unimplemented type ${e.type}`);
  }
  i.globalAlpha = 1;
}, a7 = /* @__PURE__ */ new WeakMap([]);
function lR(e) {
  let t = i7(e), n = new Path2D(t);
  return a7.set(e, n), n;
}
function oR(e) {
  return a7.get(e);
}
function i7(e) {
  let t = e.simulatePressure ? e.points : e.points.length ? e.points.map(([a, i], r) => [a, i, e.pressures[r]]) : [[0, 0, 0.5]], n = { simulatePressure: e.simulatePressure, size: e.strokeWidth * 4.25, thinning: 0.6, smoothing: 0.5, streamline: 0.5, easing: (a) => Math.sin(a * Math.PI / 2), last: !!e.lastCommittedPoint };
  return cR(ik(t, n));
}
function Mm(e, t) {
  return [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2];
}
var sR = /(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;
function cR(e) {
  if (!e.length) return "";
  let t = e.length - 1;
  return e.reduce((n, a, i, r) => (i === t ? n.push(a, Mm(a, r[0]), "L", r[0], "Z") : n.push(a, Mm(a, r[i + 1])), n), ["M", e[0], "Q"]).join(" ").replace(sR, "$1");
}
var fo = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "line" || e === "freedraw", I1 = (e) => e !== "image" && e !== "frame" && e !== "magicframe", Cm = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "freedraw" || e === "arrow" || e === "line", Im = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "arrow" || e === "line", T1 = (e) => e === "rectangle" || e === "iframe" || e === "embeddable" || e === "line" || e === "diamond" || e === "image", Tm = (e) => e === "arrow", ou = (e) => e === "arrow", vt = [1, 0], jt = [0, 1], Sn = [-1, 0], kn = [0, -1], Vc = (e, t) => {
  let n = hc(Math.atan2(t[1] - e[1], t[0] - e[0]));
  return n >= 315 || n < 45 ? kn : n >= 45 && n < 135 ? vt : n >= 135 && n < 225 ? jt : Sn;
}, ul = (e) => {
  let [t, n] = e, a = Math.abs(t), i = Math.abs(n);
  return t > i ? vt : t <= -i ? Sn : n > a ? jt : kn;
}, Gs = (e, t) => ul(se(e, t)), yi = (e, t) => xi(Gs(e, t)), wt = (e, t) => e[0] === t[0] && e[1] === t[1], xi = (e) => wt(e, vt) || wt(e, Sn), r7 = (e, t, n) => {
  let a = op(t);
  if (e.type === "diamond") {
    if (n[0] < e.x) return Sn;
    if (n[1] < e.y) return kn;
    if (n[0] > e.x + e.width) return vt;
    if (n[1] > e.y + e.height) return jt;
    let c = X(pi(k(e.x + e.width / 2, e.y), a, 2), a, e.angle), d = X(pi(k(e.x + e.width, e.y + e.height / 2), a, 2), a, e.angle), s = X(pi(k(e.x + e.width / 2, e.y + e.height), a, 2), a, e.angle), u = X(pi(k(e.x, e.y + e.height / 2), a, 2), a, e.angle);
    return Il([c, d, a], n) ? Vc(c, d) : Il([d, s, a], n) ? Vc(d, s) : Il([s, u, a], n) ? Vc(s, u) : Vc(u, c);
  }
  let i = pi(k(t[0], t[1]), a, 2), r = pi(k(t[2], t[1]), a, 2), l = pi(k(t[0], t[3]), a, 2), o = pi(k(t[2], t[3]), a, 2);
  return Il([i, r, a], n) ? kn : Il([r, o, a], n) ? vt : Il([o, l, a], n) ? jt : Sn;
}, l7 = (e) => [e[0] === 0 ? 0 : e[0] > 0 ? -1 : 1, e[1] === 0 ? 0 : e[1] > 0 ? -1 : 1], dR = (e) => [8, 8 + e], o7 = (e) => [1.5, 6 + e];
function uR(e) {
  let t = e.roughness, n = Math.max(e.width, e.height), a = Math.min(e.width, e.height);
  return a >= 20 && n >= 50 || a >= 15 && e.roundness && T1(e.type) || me(e) && n >= 50 ? t : Math.min(t / (n < 10 ? 3 : 2), 2.5);
}
var Ln = (e, t = !1) => {
  let n = { seed: e.seed, strokeLineDash: e.strokeStyle === "dashed" ? dR(e.strokeWidth) : e.strokeStyle === "dotted" ? o7(e.strokeWidth) : void 0, disableMultiStroke: e.strokeStyle !== "solid", strokeWidth: e.strokeStyle !== "solid" ? e.strokeWidth + 0.5 : e.strokeWidth, fillWeight: e.strokeWidth / 2, hachureGap: e.strokeWidth * 4, roughness: uR(e), stroke: e.strokeColor, preserveVertices: t || e.roughness < Vb.cartoonist };
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse":
      return n.fillStyle = e.fillStyle, n.fill = pa(e.backgroundColor) ? void 0 : e.backgroundColor, e.type === "ellipse" && (n.curveFitting = 1), n;
    case "line":
    case "freedraw":
      return Ti(e.points) && (n.fillStyle = e.fillStyle, n.fill = e.backgroundColor === "transparent" ? void 0 : e.backgroundColor), n;
    case "arrow":
      return n;
    default:
      throw new Error(`Unimplemented type ${e.type}`);
  }
}, _m = (e, t, n) => Gn(e) && (t || xn(e) && (n == null ? void 0 : n.get(e.id)) !== !0) && pa(e.backgroundColor) && pa(e.strokeColor) ? { ...e, roughness: 0, backgroundColor: "#d3d3d3", fillStyle: "solid" } : er(e) ? { ...e, strokeColor: pa(e.strokeColor) ? "#000000" : e.strokeColor, backgroundColor: pa(e.backgroundColor) ? "#f4f4f6" : e.backgroundColor } : e, Am = (e, t, n, a, i, r, l) => {
  let o = Pm(e, t, n, a);
  if (o === null) return [];
  let c = (d, s) => {
    if (d === null) return [];
    let [, , u, f, h, U] = d;
    return [i.line(u, f, h, U, s)];
  };
  switch (a) {
    case "dot":
    case "circle":
    case "circle_outline": {
      let [d, s, u] = o;
      return delete r.strokeLineDash, [i.circle(d, s, u, { ...r, fill: a === "circle_outline" ? l : e.strokeColor, fillStyle: "solid", stroke: e.strokeColor, roughness: Math.min(0.5, r.roughness || 0) })];
    }
    case "triangle":
    case "triangle_outline": {
      let [d, s, u, f, h, U] = o;
      return delete r.strokeLineDash, [i.polygon([[d, s], [u, f], [h, U], [d, s]], { ...r, fill: a === "triangle_outline" ? l : e.strokeColor, fillStyle: "solid", roughness: Math.min(1, r.roughness || 0) })];
    }
    case "diamond":
    case "diamond_outline": {
      let [d, s, u, f, h, U, m, g] = o;
      return delete r.strokeLineDash, [i.polygon([[d, s], [u, f], [h, U], [m, g], [d, s]], { ...r, fill: a === "diamond_outline" ? l : e.strokeColor, fillStyle: "solid", roughness: Math.min(1, r.roughness || 0) })];
    }
    case "crowfoot_one":
      return c(o, r);
    case "bar":
    case "arrow":
    case "crowfoot_many":
    case "crowfoot_one_or_many":
    default: {
      let [d, s, u, f, h, U] = o;
      if (e.strokeStyle === "dotted") {
        let m = o7(e.strokeWidth - 1);
        r.strokeLineDash = [m[0], m[1] - 1];
      } else delete r.strokeLineDash;
      return r.roughness = Math.min(1, r.roughness || 0), [i.line(u, f, d, s, r), i.line(h, U, d, s, r), ...a === "crowfoot_one_or_many" ? c(Pm(e, t, n, "crowfoot_one"), r) : []];
    }
  }
}, fR = (e, t, { isExporting: n, canvasBackgroundColor: a, embedsValidationStatus: i }) => {
  switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable": {
      let r;
      if (e.roundness) {
        let l = e.width, o = e.height, c = va(Math.min(l, o), e);
        r = t.path(`M ${c} 0 L ${l - c} 0 Q ${l} 0, ${l} ${c} L ${l} ${o - c} Q ${l} ${o}, ${l - c} ${o} L ${c} ${o} Q 0 ${o}, 0 ${o - c} L 0 ${c} Q 0 0, ${c} 0`, Ln(_m(e, n, i), !0));
      } else r = t.rectangle(0, 0, e.width, e.height, Ln(_m(e, n, i), !1));
      return r;
    }
    case "diamond": {
      let r, [l, o, c, d, s, u, f, h] = c7(e);
      if (e.roundness) {
        let U = va(Math.abs(l - f), e), m = va(Math.abs(d - o), e);
        r = t.path(`M ${l + U} ${o + m} L ${c - U} ${d - m}
            C ${c} ${d}, ${c} ${d}, ${c - U} ${d + m}
            L ${s + U} ${u - m}
            C ${s} ${u}, ${s} ${u}, ${s - U} ${u - m}
            L ${f + U} ${h + m}
            C ${f} ${h}, ${f} ${h}, ${f + U} ${h - m}
            L ${l - U} ${o + m}
            C ${l} ${o}, ${l} ${o}, ${l + U} ${o + m}`, Ln(e, !0));
      } else r = t.polygon([[l, o], [c, d], [s, u], [f, h]], Ln(e));
      return r;
    }
    case "ellipse":
      return t.ellipse(e.width / 2, e.height / 2, e.width, e.height, Ln(e));
    case "line":
    case "arrow": {
      let r, l = Ln(e), o = e.points.length ? e.points : [k(0, 0)];
      if (te(e) ? o.every((c) => Math.abs(c[0]) <= 1e6 && Math.abs(c[1]) <= 1e6) ? r = [t.path(hR(o, 16), Ln(e, !0))] : (console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.", e.id, JSON.stringify(o)), r = []) : e.roundness ? r = [t.curve(o, l)] : l.fill ? r = [t.polygon(o, l)] : r = [t.linearPath(o, l)], e.type === "arrow") {
        let { startArrowhead: c = null, endArrowhead: d = "arrow" } = e;
        if (c !== null) {
          let s = Am(e, r, "start", c, t, l, a);
          r.push(...s);
        }
        if (d !== null) {
          let s = Am(e, r, "end", d, t, l, a);
          r.push(...s);
        }
      }
      return r;
    }
    case "freedraw": {
      let r;
      if (lR(e), Ti(e.points)) {
        let l = sk(e.points, 0.75);
        r = t.curve(l, { ...Ln(e), stroke: "none" });
      } else r = null;
      return r;
    }
    case "frame":
    case "magicframe":
    case "text":
    case "image":
      return null;
    default:
      return ll(e, `generateElementShape(): Unimplemented type ${e == null ? void 0 : e.type}`), null;
  }
}, hR = (e, t) => {
  let n = [];
  for (let i = 1; i < e.length - 1; i += 1) {
    let r = e[i - 1], l = e[i + 1], o = e[i], c = yi(o, r), d = yi(l, o), s = Math.min(t, ze(e[i], l) / 2, ze(e[i], r) / 2);
    c ? r[0] < o[0] ? n.push([e[i][0] - s, e[i][1]]) : n.push([e[i][0] + s, e[i][1]]) : r[1] < o[1] ? n.push([e[i][0], e[i][1] - s]) : n.push([e[i][0], e[i][1] + s]), n.push(e[i]), d ? l[0] < o[0] ? n.push([e[i][0] - s, e[i][1]]) : n.push([e[i][0] + s, e[i][1]]) : l[1] < o[1] ? n.push([e[i][0], e[i][1] - s]) : n.push([e[i][0], e[i][1] + s]);
  }
  let a = [`M ${e[0][0]} ${e[0][1]}`];
  for (let i = 0; i < n.length; i += 3) a.push(`L ${n[i][0]} ${n[i][1]}`), a.push(`Q ${n[i + 1][0]} ${n[i + 1][1]}, ${n[i + 2][0]} ${n[i + 2][1]}`);
  return a.push(`L ${e[e.length - 1][0]} ${e[e.length - 1][1]}`), a.join(" ");
}, ho = (e) => {
  let t = e.map((a) => a[0]), n = e.map((a) => a[1]);
  return { width: Math.max(...t) - Math.min(...t), height: Math.max(...n) - Math.min(...n) };
}, su = (e, t, n, a) => {
  let i = n.map((f) => f[e]), r = Math.max(...i), l = Math.min(...i), o = r - l, c = o === 0 ? 1 : t / o, d = 1 / 0, s = n.map((f) => {
    let h = f[e] * c, U = [...f];
    return U[e] = h, h < d && (d = h), U;
  });
  if (!a || s.length === 2) return s;
  let u = l - d;
  return s.map((f) => f.map((h, U) => U === e ? h + u : h));
}, s7 = class xd {
  static getBounds(t, n) {
    let a = xd.boundsCache.get(t);
    if (a != null && a.version && a.version === t.version && !st(t)) return a.bounds;
    let i = xd.calculateBounds(t, n);
    return xd.boundsCache.set(t, { version: t.version, bounds: i }), i;
  }
  static calculateBounds(t, n) {
    let a, [i, r, l, o, c, d] = ge(t, n);
    if (ea(t)) {
      let [s, u, f, h] = rp(t.points.map(([U, m]) => X(k(U, m), k(c - t.x, d - t.y), t.angle)));
      return [s + t.x, u + t.y, f + t.x, h + t.y];
    } else if (me(t)) a = yR(t, c, d, n);
    else if (t.type === "diamond") {
      let [s, u] = X(k(c, r), k(c, d), t.angle), [f, h] = X(k(c, o), k(c, d), t.angle), [U, m] = X(k(i, d), k(c, d), t.angle), [g, b] = X(k(l, d), k(c, d), t.angle), v = Math.min(s, f, U, g), y = Math.min(u, h, m, b), w = Math.max(s, f, U, g), x = Math.max(u, h, m, b);
      a = [v, y, w, x];
    } else if (t.type === "ellipse") {
      let s = (l - i) / 2, u = (o - r) / 2, f = Math.cos(t.angle), h = Math.sin(t.angle), U = Math.hypot(s * f, u * h), m = Math.hypot(u * f, s * h);
      a = [c - U, d - m, c + U, d + m];
    } else {
      let [s, u] = X(k(i, r), k(c, d), t.angle), [f, h] = X(k(i, o), k(c, d), t.angle), [U, m] = X(k(l, o), k(c, d), t.angle), [g, b] = X(k(l, r), k(c, d), t.angle), v = Math.min(s, f, U, g), y = Math.min(u, h, m, b), w = Math.max(s, f, U, g), x = Math.max(u, h, m, b);
      a = [v, y, w, x];
    }
    return a;
  }
};
L(s7, "boundsCache", /* @__PURE__ */ new WeakMap());
var pR = s7, ge = (e, t, n = !1) => {
  if (ea(e)) return mR(e);
  if (me(e)) return ee.getElementAbsoluteCoords(e, t, n);
  if (J(e)) {
    let a = t ? Zt(e, t) : null;
    if (xe(a)) {
      let { x: i, y: r } = ee.getBoundTextElementPosition(a, e, t);
      return [i, r, i + e.width, r + e.height, i + e.width / 2, r + e.height / 2];
    }
  }
  return [e.x, e.y, e.x + e.width, e.y + e.height, e.x + e.width / 2, e.y + e.height / 2];
}, Dm = (e, t) => {
  let [n, a, i, r, l, o] = ge(e, t), c = k(l, o);
  if (me(e) || ea(e)) {
    let b = [], v = 0;
    for (; v < e.points.length - 1; ) b.push(ce(X(k(e.points[v][0] + e.x, e.points[v][1] + e.y), c, e.angle), X(k(e.points[v + 1][0] + e.x, e.points[v + 1][1] + e.y), c, e.angle))), v++;
    return b;
  }
  let [d, s, u, f, h, U, m, g] = [[n, a], [i, a], [n, r], [i, r], [l, a], [l, r], [n, o], [i, o]].map((b) => X(b, c, e.angle));
  return e.type === "diamond" ? [ce(h, m), ce(h, g), ce(U, m), ce(U, g)] : e.type === "ellipse" ? [ce(h, m), ce(h, g), ce(U, m), ce(U, g), ce(h, m), ce(h, g), ce(U, m), ce(U, g)] : [ce(d, s), ce(u, f), ce(d, u), ce(s, f), ce(d, g), ce(u, g), ce(s, m), ce(f, m)];
}, c7 = (e) => {
  let t = Math.floor(e.width / 2) + 1, n = 0, a = e.width, i = Math.floor(e.height / 2) + 1, r = t, l = e.height;
  return [t, n, a, i, r, l, 0, i];
}, Lm = (e, t, n, a, i) => {
  let r = 1 - e;
  return Math.pow(r, 3) * t + 3 * Math.pow(r, 2) * e * n + 3 * r * Math.pow(e, 2) * a + Math.pow(e, 3) * i;
}, Rm = (e, t, n, a) => {
  let i = t - e, r = n - t, l = a - n, o = 3 * i - 6 * r + 3 * l, c = 6 * r - 6 * i, d = 3 * i, s = c * c - 4 * o * d;
  if (!(s >= 0)) return !1;
  let u = null, f = null, h = 1 / 0, U = 1 / 0;
  return o === 0 ? h = U = -d / c : (h = (-c + Math.sqrt(s)) / (2 * o), U = (-c - Math.sqrt(s)) / (2 * o)), h >= 0 && h <= 1 && (u = Lm(h, e, t, n, a)), U >= 0 && U <= 1 && (f = Lm(U, e, t, n, a)), [u, f];
}, UR = (e, t, n, a) => {
  let i = Rm(e[0], t[0], n[0], a[0]), r = Rm(e[1], t[1], n[1], a[1]), l = Math.min(e[0], a[0]), o = Math.max(e[0], a[0]);
  if (i) {
    let s = i.filter((u) => u !== null);
    l = Math.min(l, ...s), o = Math.max(o, ...s);
  }
  let c = Math.min(e[1], a[1]), d = Math.max(e[1], a[1]);
  if (r) {
    let s = r.filter((u) => u !== null);
    c = Math.min(c, ...s), d = Math.max(d, ...s);
  }
  return [l, c, o, d];
}, Qu = (e, t) => {
  let n = k(0, 0), { minX: a, minY: i, maxX: r, maxY: l } = e.reduce((o, { op: c, data: d }) => {
    if (c === "move") {
      let s = H0(d);
      cn(s != null, "Op data is not a point"), n = s;
    } else if (c === "bcurveTo") {
      let s = k(d[0], d[1]), u = k(d[2], d[3]), f = k(d[4], d[5]), h = t ? t(s) : s, U = t ? t(u) : u, m = t ? t(f) : f, g = t ? t(n) : n;
      n = f;
      let [b, v, y, w] = UR(g, h, U, m);
      o.minX = Math.min(o.minX, b), o.minY = Math.min(o.minY, v), o.maxX = Math.max(o.maxX, y), o.maxY = Math.max(o.maxY, w);
    }
    return o;
  }, { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 });
  return [a, i, r, l];
}, rp = (e) => {
  let t = 1 / 0, n = 1 / 0, a = -1 / 0, i = -1 / 0;
  for (let [r, l] of e) t = Math.min(t, r), n = Math.min(n, l), a = Math.max(a, r), i = Math.max(i, l);
  return [t, n, a, i];
}, mR = (e) => {
  let [t, n, a, i] = rp(e.points), r = t + e.x, l = n + e.y, o = a + e.x, c = i + e.y;
  return [r, l, o, c, (r + o) / 2, (l + c) / 2];
}, gR = (e) => {
  switch (e) {
    case "arrow":
      return 25;
    case "diamond":
    case "diamond_outline":
      return 12;
    case "crowfoot_many":
    case "crowfoot_one":
    case "crowfoot_one_or_many":
      return 20;
    default:
      return 15;
  }
}, bR = (e) => {
  switch (e) {
    case "bar":
      return 90;
    case "arrow":
      return 20;
    default:
      return 25;
  }
}, Pm = (e, t, n, a) => {
  if (t.length < 1) return null;
  let i = xr(t[0]);
  if (i.length < 1) return null;
  let r = n === "start" ? 1 : i.length - 1, l = i[r].data;
  cn(l.length === 6, "Op data length is not 6");
  let o = k(l[4], l[5]), c = k(l[2], l[3]), d = k(l[0], l[1]), s = i[r - 1], u = k(0, 0);
  if (s.op === "move") {
    let O = H0(s.data);
    cn(O != null, "Op data is not a point"), u = O;
  } else s.op === "bcurveTo" && (u = k(s.data[4], s.data[5]));
  let f = (O, $) => Math.pow(1 - O, 3) * o[$] + 3 * O * Math.pow(1 - O, 2) * c[$] + 3 * Math.pow(O, 2) * (1 - O) * d[$] + u[$] * Math.pow(O, 3), [h, U] = n === "start" ? u : o, [m, g] = [f(0.3, 0), f(0.3, 1)], b = Math.hypot(h - m, U - g), v = (h - m) / b, y = (U - g) / b, w = gR(a), x = 0;
  {
    let [O, $] = n === "end" ? e.points[e.points.length - 1] : e.points[0], [F, N] = e.points.length > 1 ? n === "end" ? e.points[e.points.length - 2] : e.points[1] : [0, 0];
    x = Math.hypot(O - F, $ - N);
  }
  let S = Math.min(w, x * (a === "diamond" || a === "diamond_outline" ? 0.25 : 0.5)), E = h - v * S, M = U - y * S;
  if (a === "dot" || a === "circle" || a === "circle_outline") {
    let O = Math.hypot(M - U, E - h) + e.strokeWidth - 2;
    return [h, U, O];
  }
  let I = bR(a);
  if (a === "crowfoot_many" || a === "crowfoot_one_or_many") {
    let [O, $] = X(k(h, U), k(E, M), jr(-I)), [F, N] = X(k(h, U), k(E, M), jr(I));
    return [E, M, O, $, F, N];
  }
  let [T, A] = X(k(E, M), k(h, U), -I * Math.PI / 180), [D, R] = X(k(E, M), k(h, U), jr(I));
  if (a === "diamond" || a === "diamond_outline") {
    let O, $;
    if (n === "start") {
      let [F, N] = e.points.length > 1 ? e.points[1] : [0, 0];
      [O, $] = X(k(h + S * 2, U), k(h, U), Math.atan2(N - U, F - h));
    } else {
      let [F, N] = e.points.length > 1 ? e.points[e.points.length - 2] : [0, 0];
      [O, $] = X(k(h - S * 2, U), k(h, U), Math.atan2(U - N, h - F));
    }
    return [h, U, T, A, O, $, D, R];
  }
  return [h, U, T, A, D, R];
}, vR = (e) => {
  let t = wr.generator(), n = Ln(e), a = e.roundness ? "curve" : n.fill ? "polygon" : "linearPath";
  return t[a](e.points, n);
}, yR = (e, t, n, a) => {
  var d;
  let i = ye(e, a);
  if (e.points.length < 2) {
    let [s, u] = e.points[0], [f, h] = X(k(e.x + s, e.y + u), k(t, n), e.angle), U = [f, h, f, h];
    if (i) {
      let m = ee.getMinMaxXYWithBoundText(e, a, [f, h, f, h], i);
      U = [m[0], m[1], m[2], m[3]];
    }
    return U;
  }
  let r = ((d = mt.get(e)) == null ? void 0 : d[0]) ?? vR(e), l = xr(r), o = Qu(l, ([s, u]) => X(k(e.x + s, e.y + u), k(t, n), e.angle)), c = [o[0], o[1], o[2], o[3]];
  if (i) {
    let s = ee.getMinMaxXYWithBoundText(e, a, c, i);
    c = [s[0], s[1], s[2], s[3]];
  }
  return c;
}, Sa = (e, t) => pR.getBounds(e, t), We = (e, t) => {
  if (!e.length) return [0, 0, 0, 0];
  let n = 1 / 0, a = -1 / 0, i = 1 / 0, r = -1 / 0, l = t || he(e);
  return e.forEach((o) => {
    let [c, d, s, u] = Sa(o, l);
    n = Math.min(n, c), i = Math.min(i, d), a = Math.max(a, s), r = Math.max(r, u);
  }), [n, i, a, r];
}, lp = (e, t) => {
  let [n, a, i, r] = We(e);
  return [n + t.x, a + t.y, i + t.x, r + t.y];
}, ur = (e, t, n, a) => {
  if (!(me(e) || ea(e))) return [e.x, e.y, e.x + t, e.y + n];
  let i = su(0, t, su(1, n, e.points, a), a), r;
  if (ea(e)) r = rp(i);
  else {
    let s = wr.generator(), u = e.roundness ? s.curve(i, Ln(e)) : s.linearPath(i, Ln(e)), f = xr(u);
    r = Qu(f);
  }
  let [l, o, c, d] = r;
  return [l + e.x, o + e.y, c + e.x, d + e.y];
}, Nm = (e, t) => {
  let n = wr.generator(), a = e.roundness == null ? n.linearPath(t, Ln(e)) : n.curve(t, Ln(e)), i = xr(a), [r, l, o, c] = Qu(i);
  return [r + e.x, l + e.y, o + e.x, c + e.y];
}, wR = (e, t) => {
  if (!e.length) return [0, 0, 0, 0];
  let n = 1 / 0, a = e[0], i = he(e);
  return e.forEach((r) => {
    let [l, o, c, d] = Sa(r, i), s = ze(k((l + c) / 2, (o + d) / 2), k(t.x, t.y));
    s < n && (n = s, a = r);
  }), Sa(a, i);
}, ya = (e) => {
  let [t, n, a, i] = We(e);
  return { minX: t, minY: n, maxX: a, maxY: i, width: a - t, height: i - n, midX: (t + a) / 2, midY: (n + i) / 2 };
}, ER = ({ scrollX: e, scrollY: t, width: n, height: a, zoom: i }) => [-e, -t, -e + n / i.value, -t + a / i.value], op = (e) => k(e[0] + (e[2] - e[0]) / 2, e[1] + (e[3] - e[1]) / 2), xR = (e, t) => {
  if (e == null || t == null) return !1;
  let [n, a, i, r] = e, [l, o, c, d] = t;
  return n < c && i > l && a < d && r > o;
}, ef = (e, t) => {
  switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      return SR(e, t);
    case "diamond":
      return kR(e, t);
    case "ellipse":
      return MR(e, t);
  }
}, SR = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = X(t, n, -e.angle), [i, r] = H8(e);
  return Math.min(...i.map((l) => X0(a, l)), ...r.map((l) => Jb(l, a)).filter((l) => l !== null));
}, kR = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = X(t, n, -e.angle), [i, r] = X8(e);
  return Math.min(...i.map((l) => X0(a, l)), ...r.map((l) => Jb(l, a)).filter((l) => l !== null));
}, MR = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2);
  return $L(X(t, n, -e.angle), B8(n, e.width / 2, e.height / 2));
}, CR = (e) => !e[P.CTRL_OR_CMD], Wr = (e) => e.isBindingEnabled, nt = 5, sp = 10, cp = 4, IR = (e, t) => {
  let n = [];
  return t.forEach((a) => {
    let i = e.getNonDeletedElement(a);
    i != null && n.push(i);
  }), n;
}, tf = (e, t, n, a, i) => {
  let r = /* @__PURE__ */ new Set(), l = /* @__PURE__ */ new Set();
  Om(e, t, n, "start", r, l, a), Om(e, n, t, "end", r, l, a);
  let o = Array.from(l).filter((c) => !r.has(c));
  IR(i, o).forEach((c) => {
    var d;
    G(c, { boundElements: (d = c.boundElements) == null ? void 0 : d.filter((s) => s.type !== "arrow" || s.id !== e.id) });
  });
}, Om = (e, t, n, a, i, r, l) => {
  if (t !== "keep") {
    if (t === null) {
      let o = LR(e, a);
      o != null && r.add(o);
      return;
    }
    h7(e) ? (n == null || (n === "keep" ? !u7(e, t, a) : a === "start" || n.id !== t.id)) && (ti(e, t, a, l), i.add(t.id)) : (ti(e, t, a, l), i.add(t.id));
  }
}, TR = (e, t, n, a) => {
  var l, o;
  let i = p7(e, t, n), r = t === "start" ? (l = e.startBinding) == null ? void 0 : l.elementId : (o = e.endBinding) == null ? void 0 : o.elementId;
  if (r) {
    let c = n.get(r);
    if (xa(c) && Sd(c, i, n, a)) return c;
  }
  return null;
}, d7 = (e, t, n) => ["start", "end"].map((a) => TR(e, a, t, n)), _R = (e, t, n, a, i, r) => {
  let l = e.points.length - 1, o = n.findIndex((u) => u === 0) > -1, c = n.findIndex((u) => u === l) > -1, d = o ? t ? Xl(e, "start", a, i, r) : null : te(e) ? "keep" : Xl(e, "start", a, i, r), s = c ? t ? Xl(e, "end", a, i, r) : null : te(e) ? "keep" : Xl(e, "end", a, i, r);
  return [d, s];
}, AR = (e, t, n, a, i) => {
  if (te(e)) return ["keep", "keep"];
  let [r, l] = d7(e, t, i), o = r && a ? Xl(e, "start", t, n, i) : null, c = l && a ? Xl(e, "end", t, n, i) : null;
  return [o, c];
}, cu = (e, t, n, a, i, r, l) => {
  e.forEach((o) => {
    let [c, d] = r != null && r.length ? _R(o, i, r ?? [], t, n, l) : AR(o, t, n, i, l);
    tf(o, c, d, t, a);
  });
}, uh = (e, t, n) => e.length > 50 ? [] : e.filter(me).flatMap((a) => d7(a, t, n)).filter((a) => a !== null).filter((a) => e.filter((i) => i.id === (a == null ? void 0 : a.id)).length === 0), _1 = (e, t, n, a, i) => {
  t.startBoundElement != null && ti(e, t.startBoundElement, "start", a);
  let r = Ua(n, i, a, t.zoom, te(e), te(e));
  r !== null && (u7(e, r, "end") || ti(e, r, "end", a));
}, DR = (e, t) => {
  let n = e.gap, a = bc(t, t.width, t.height);
  return n > a && (n = sp + cp), { ...e, gap: n };
}, ti = (e, t, n, a) => {
  if (!xe(e)) return;
  let i = { elementId: t.id, ...te(e) ? { ...du(e, t, n), focus: 0, gap: 0 } : { ...DR(NR(e, t, n, a), t) } };
  G(e, { [n === "start" ? "startBinding" : "endBinding"]: i }), he(t.boundElements || []).has(e.id) || G(t, { boundElements: (t.boundElements || []).concat({ id: e.id, type: "arrow" }) });
}, u7 = (e, t, n) => {
  let a = e[n === "start" ? "endBinding" : "startBinding"];
  return f7(e, a == null ? void 0 : a.elementId, t);
}, f7 = (e, t, n) => t === n.id && h7(e), h7 = (e) => e.points.length < 3, LR = (e, t) => {
  let n = t === "start" ? "startBinding" : "endBinding", a = e[n];
  return a == null ? null : (G(e, { [n]: null }), a.elementId);
}, Ua = (e, t, n, a, i, r) => {
  if (r) {
    let l = !1, o = PR(t, (d) => xa(d, !1) && Sd(d, e, n, a, (i || !th(d)) && !fe(d))).filter((d) => l ? !1 : (th(d) || (l = !0), !0));
    if (!o || o.length === 0) return null;
    if (o.length === 1) return o[0];
    let c = o.filter((d) => Sd(d, e, n, a, !1));
    return c.length === 1 ? c[0] : o.sort((d, s) => s.width ** 2 + s.height ** 2 - (d.width ** 2 + d.height ** 2)).pop();
  }
  return RR(t, (l) => xa(l, !1) && Sd(l, e, n, a, (i || !th(l)) && !fe(l)));
}, RR = (e, t) => {
  let n = null;
  for (let a = e.length - 1; a >= 0; --a) {
    let i = e[a];
    if (!i.isDeleted && t(i)) {
      n = i;
      break;
    }
  }
  return n;
}, PR = (e, t) => {
  let n = [];
  for (let a = e.length - 1; a >= 0; --a) {
    let i = e[a];
    i.isDeleted || t(i) && n.push(i);
  }
  return n;
}, NR = (e, t, n, a) => {
  let i = n === "start" ? -1 : 1, r = i === -1 ? 0 : e.points.length - 1, l = r - i, o = ee.getPointAtIndexGlobalCoordinates(e, r, a), c = ee.getPointAtIndexGlobalCoordinates(e, l, a);
  return { focus: VR(t, c, o), gap: Math.max(1, ef(t, o)) };
}, In = (e, t, n) => {
  let { newSize: a, simultaneouslyUpdated: i } = n ?? {}, r = $R(i);
  xa(e) && nf(t, e, (l) => {
    var U, m;
    if (!me(l) || l.isDeleted || !OR(l, e)) return;
    let o = l.startBinding ? t.get(l.startBinding.elementId) : null, c = l.endBinding ? t.get(l.endBinding.elementId) : null, d = null, s = null;
    o && c && (d = Sa(o, t), s = Sa(c, t));
    let u = { startBinding: $m(e, l.startBinding, a), endBinding: $m(e, l.endBinding, a) };
    if (r.has(l.id)) {
      G(l, u, !0);
      return;
    }
    let f = af(t, l, (g, b) => {
      var v, y;
      if (g && xa(g) && (b === "startBinding" || b === "endBinding") && (e.id === ((v = l[b]) == null ? void 0 : v.elementId) || e.id === ((y = l[b === "startBinding" ? "endBinding" : "startBinding"]) == null ? void 0 : y.elementId) && !xR(d, s))) {
        let w = WR(l, b, u[b], g, t);
        if (w) return { index: b === "startBinding" ? 0 : l.points.length - 1, point: w };
      }
      return null;
    }).filter((g) => g !== null);
    ee.movePoints(l, f, { ...e.id === ((U = l.startBinding) == null ? void 0 : U.elementId) ? { startBinding: u.startBinding } : {}, ...e.id === ((m = l.endBinding) == null ? void 0 : m.elementId) ? { endBinding: u.endBinding } : {} });
    let h = ye(l, t);
    h && !h.isDeleted && vc(l, t, !1);
  });
}, OR = (e, t) => {
  var n, a;
  return ((n = e.startBinding) == null ? void 0 : n.elementId) === t.id || ((a = e.endBinding) == null ? void 0 : a.elementId) === t.id;
}, $R = (e) => new Set((e || []).map((t) => t.id)), zR = (e, t, n, a, i, r, l) => {
  let o = ul(se(t, e));
  return !n || !a ? o : FR(r, n, i, l) ? r7(n, a, e) : ul(se(e, k(n.x + n.width / 2, n.y + n.height / 2)));
}, FR = (e, t, n, a) => {
  let i = ef(t, e), r = bc(t, t.width, t.height, a);
  return i > r ? null : i;
}, js = (e, t, n) => {
  let a = t && Xa(t), i = e.points[n === "start" ? 0 : e.points.length - 1], r = k(e.x + i[0], e.y + i[1]), l = BM(t) ? HR(t, r) : r;
  if (t && a) {
    let o = op(a), c = V8(t, ce(o, Ce(yt(on(se(l, o)), Math.max(t.width, t.height)), o)))[0], d = ze(l, o), s = Math.max(ze(c ?? l, o), 1e-4), u = Ka(d / s, 6);
    switch (!0) {
      case u > 0.9:
        return d - s > nt || Xs(l, c) < 1e-4 ? l : Ce(yt(on(se(l, c ?? o)), u > 1 ? nt : -nt), c ?? o);
      default:
        return BR(l, t, a);
    }
  }
  return l;
}, BR = (e, t, n) => {
  let a = op(n), i = ul(se(e, a));
  switch (!0) {
    case wt(i, kn):
      return X(k((n[0] + n[2]) / 2 + 0.1, n[1]), a, t.angle);
    case wt(i, vt):
      return X(k(n[2], (n[1] + n[3]) / 2 + 0.1), a, t.angle);
    case wt(i, jt):
      return X(k((n[0] + n[2]) / 2 - 0.1, n[3]), a, t.angle);
    default:
      return X(k(n[0], (n[1] + n[3]) / 2 - 0.1), a, t.angle);
  }
}, HR = (e, t) => {
  let n = k(e.x + e.width / 2, e.y + e.height / 2), a = X(t, n, -e.angle);
  return a[0] < e.x && a[1] < e.y ? a[1] - e.y > -nt ? X(k(e.x - nt, e.y), n, e.angle) : X(k(e.x, e.y - nt), n, e.angle) : a[0] < e.x && a[1] > e.y + e.height ? a[0] - e.x > -nt ? X(k(e.x, e.y + e.height + nt), n, e.angle) : X(k(e.x - nt, e.y + e.height), n, e.angle) : a[0] > e.x + e.width && a[1] > e.y + e.height ? a[0] - e.x < e.width + nt ? X(k(e.x + e.width, e.y + e.height + nt), n, e.angle) : X(k(e.x + e.width + nt, e.y + e.height), n, e.angle) : a[0] > e.x + e.width && a[1] < e.y ? a[0] - e.x < e.width + nt ? X(k(e.x + e.width, e.y - nt), n, e.angle) : X(k(e.x + e.width + nt, e.y), n, e.angle) : t;
}, XR = (e, t, n = 0.05) => {
  let { x: a, y: i, width: r, height: l, angle: o } = e, c = k(a + r / 2 - 0.1, i + l / 2 - 0.1), d = X(t, c, -o), s = Me(n * l, 5, 80), u = Me(n * r, 5, 80);
  return d[0] <= a + r / 2 && d[1] > c[1] - s && d[1] < c[1] + s ? X(k(a - nt, c[1]), c, o) : d[1] <= i + l / 2 && d[0] > c[0] - u && d[0] < c[0] + u ? X(k(c[0], i - nt), c, o) : d[0] >= a + r / 2 && d[1] > c[1] - s && d[1] < c[1] + s ? X(k(a + r + nt, c[1]), c, o) : d[1] >= i + l / 2 && d[0] > c[0] - u && d[0] < c[0] + u ? X(k(c[0], i + l + nt), c, o) : t;
}, WR = (e, t, n, a, i) => {
  if (n == null || n.elementId !== a.id && e.points.length > 2) return null;
  let r = t === "startBinding" ? -1 : 1, l = r === -1 ? 0 : e.points.length - 1;
  if (te(e) && au(n)) {
    let u = rf(n.fixedPoint) ?? du(e, a, t === "startBinding" ? "start" : "end").fixedPoint, f = k(a.x + a.width / 2, a.y + a.height / 2), h = k(a.x + u[0] * a.width, a.y + u[1] * a.height), U = X(h, f, a.angle);
    return ee.pointFromAbsoluteCoords(e, U, i);
  }
  let o = l - r, c = ee.getPointAtIndexGlobalCoordinates(e, o, i), d = GR(a, n.focus, c), s;
  if (n.gap === 0) s = d;
  else {
    let u = ee.getPointAtIndexGlobalCoordinates(e, l, i), f = k(a.x + a.width / 2, a.y + a.height / 2), h = ze(c, u) + ze(c, f) + Math.max(a.width, a.height) * 2, U = V8(a, ce(c, Ce(yt(on(se(d, c)), h), c)), n.gap).sort((m, g) => Xs(m, c) - Xs(g, c));
    U.length > 1 ? s = U[0] : U.length === 1 ? s = d : s = u;
  }
  return ee.pointFromAbsoluteCoords(e, s, i);
}, du = (e, t, n, a) => {
  let i = [t.x, t.y, t.x + t.width, t.y + t.height], r = js(e, t, n), l = k(i[0] + (i[2] - i[0]) / 2, i[1] + (i[3] - i[1]) / 2), o = X(r, l, -t.angle);
  return { fixedPoint: rf([(o[0] - t.x) / t.width, (o[1] - t.y) / t.height]) };
}, $m = (e, t, n) => {
  if (t == null || n == null) return t;
  let { width: a, height: i } = n, { width: r, height: l } = e, o = Math.max(1, Math.min(bc(e, a, i), t.gap * (a < i ? a / r : i / l)));
  return { ...t, gap: o };
}, Xl = (e, t, n, a, i) => Ua(p7(e, t, n), a, n, i, te(e), te(e)), p7 = (e, t, n) => {
  let a = t === "start" ? 0 : -1;
  return ha(ee.getPointAtIndexGlobalCoordinates(e, a, n));
}, U7 = (e, t, n, a) => {
  let i = /* @__PURE__ */ new Set(), r = /* @__PURE__ */ new Set(), l = a === "duplicatesServeAsOld", o = new Map([...n].map(([c, d]) => [d, c]));
  t.forEach((c) => {
    let { boundElements: d } = c;
    if (d != null && d.length > 0 && (d.forEach((s) => {
      l && !n.has(s.id) && i.add(s.id);
    }), r.add(n.get(c.id))), Ga(c)) {
      if (c.startBinding != null) {
        let { elementId: s } = c.startBinding;
        l && !n.has(s) && r.add(s);
      }
      if (c.endBinding != null) {
        let { elementId: s } = c.endBinding;
        l && !n.has(s) && r.add(s);
      }
      (c.startBinding != null || c.endBinding != null) && i.add(n.get(c.id));
    }
  }), e.filter(({ id: c }) => i.has(c)).forEach((c) => {
    let { startBinding: d, endBinding: s } = c;
    G(c, { startBinding: zm(d, n), endBinding: zm(s, n) });
  }), e.filter(({ id: c }) => r.has(c)).forEach((c) => {
    var u;
    let d = o.get(c.id), s = (u = e.find(({ id: f }) => f === d)) == null ? void 0 : u.boundElements;
    s && s.length > 0 && G(c, { boundElements: s.map((f) => n.has(f.id) ? { id: n.get(f.id), type: f.type } : f) });
  });
}, zm = (e, t) => e == null ? null : { ...e, elementId: t.get(e.elementId) ?? e.elementId }, m7 = (e, t) => {
  let n = he(e);
  for (let a of t) Wl.unbindAffected(n, a, G), Vl.unbindAffected(n, a, G);
}, Ys = (e, t, n = []) => {
  if (!e) return null;
  let a = e.filter((i) => !t.has(i.id));
  return a.push(...n.map((i) => ({ id: i.id, type: i.type }))), a;
}, Sd = (e, { x: t, y: n }, a, i, r) => {
  let l = bc(e, e.width, e.height, i), o = vi(e, a);
  return S1(k(t, n), o, l) || r === !0 && uo(k(t, n), Xa(e));
}, bc = (e, t, n, a) => {
  let i = a != null && a.value && a.value < 1 ? a.value : 1, r = (e.type === "diamond" ? 1 / Math.sqrt(2) : 1) * Math.min(t, n);
  return Math.max(16, Math.min(0.25 * r, 32), sp / i + cp);
}, VR = (e, t, n) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2);
  if (Ea(t, n)) return 0;
  let i = X(t, a, -e.angle), r = X(n, a, -e.angle), l = Math.sign($t(se(r, t), se(r, a))) * -1, o = ce(r, Ce(yt(on(se(r, i)), Math.max(e.width * 2, e.height * 2)), r)), c = e.type === "diamond" ? [ce(k(e.x + e.width / 2, e.y), k(e.x + e.width / 2, e.y + e.height)), ce(k(e.x, e.y + e.height / 2), k(e.x + e.width, e.y + e.height / 2))] : [ce(k(e.x, e.y), k(e.x + e.width, e.y + e.height)), ce(k(e.x + e.width, e.y), k(e.x, e.y + e.height))], d = e.type === "diamond" ? [ce(k(e.x + e.width / 2, e.y - e.height), k(e.x + e.width / 2, e.y + e.height * 2)), ce(k(e.x - e.width, e.y + e.height / 2), k(e.x + e.width * 2, e.y + e.height / 2))] : [ce(k(e.x - e.width, e.y - e.height), k(e.x + e.width * 2, e.y + e.height * 2)), ce(k(e.x + e.width * 2, e.y - e.height), k(e.x - e.width, e.y + e.height * 2))];
  return [Ws(o, d[0]), Ws(o, d[1])].filter((s) => s !== null).sort((s, u) => Xs(s, n) - Xs(u, n)).map((s, u) => l * ze(a, s) / (e.type === "diamond" ? ze(c[u][0], c[u][1]) / 2 : Math.sqrt(e.width ** 2 + e.height ** 2) / 2)).sort((s, u) => Math.abs(s) - Math.abs(u))[0] ?? 0;
}, GR = (e, t, n) => {
  let a = k(e.x + e.width / 2, e.y + e.height / 2);
  if (t === 0) return a;
  let i = (e.type === "diamond" ? [k(e.x, e.y + e.height / 2), k(e.x + e.width / 2, e.y), k(e.x + e.width, e.y + e.height / 2), k(e.x + e.width / 2, e.y + e.height)] : [k(e.x, e.y), k(e.x + e.width, e.y), k(e.x + e.width, e.y + e.height), k(e.x, e.y + e.height)]).map((l) => Ce(yt(se(l, a), Math.abs(t)), a)).map((l) => X(l, a, e.angle)), r = [$t(se(n, i[0]), se(i[1], i[0])) > 0 && (t > 0 ? $t(se(n, i[1]), se(i[2], i[1])) < 0 : $t(se(n, i[3]), se(i[0], i[3])) < 0), $t(se(n, i[1]), se(i[2], i[1])) > 0 && (t > 0 ? $t(se(n, i[2]), se(i[3], i[2])) < 0 : $t(se(n, i[0]), se(i[1], i[0])) < 0), $t(se(n, i[2]), se(i[3], i[2])) > 0 && (t > 0 ? $t(se(n, i[3]), se(i[0], i[3])) < 0 : $t(se(n, i[1]), se(i[2], i[1])) < 0), $t(se(n, i[3]), se(i[0], i[3])) > 0 && (t > 0 ? $t(se(n, i[0]), se(i[1], i[0])) < 0 : $t(se(n, i[2]), se(i[3], i[2])) < 0)];
  return r[0] ? t > 0 ? i[1] : i[0] : r[1] ? t > 0 ? i[2] : i[1] : r[2] ? t > 0 ? i[3] : i[2] : t > 0 ? i[0] : i[3];
}, jR = /* @__PURE__ */ new Set(["boundElements", "frameId", "containerId", "startBinding", "endBinding"]), nf = (e, t, n) => {
  var a;
  xa(t) && (((a = t.boundElements) == null ? void 0 : a.slice()) ?? []).forEach(({ id: i }) => {
    n(e.get(i), "boundElements", i);
  });
}, af = (e, t, n) => {
  let a = [];
  if (t.frameId) {
    let i = t.frameId;
    a.push(n(e.get(i), "frameId", i));
  }
  if (st(t)) {
    let i = t.containerId;
    a.push(n(e.get(i), "containerId", i));
  }
  if (xe(t)) {
    if (t.startBinding) {
      let i = t.startBinding.elementId;
      a.push(n(e.get(i), "startBinding", i));
    }
    if (t.endBinding) {
      let i = t.endBinding.elementId;
      a.push(n(e.get(i), "endBinding", i));
    }
  }
  return a;
}, Wl = class {
  static unbindAffected(e, t, n) {
    t && af(e, t, (a) => {
      !a || a.isDeleted || nf(e, a, (i, r, l) => {
        l === t.id && n(a, { boundElements: Ys(a.boundElements, /* @__PURE__ */ new Set([l])) });
      });
    });
  }
};
L(Wl, "rebindAffected", (e, t, n) => {
  !t || t.isDeleted || af(e, t, (a, i) => {
    var r, l;
    if (!a || a.isDeleted) {
      n(t, { [i]: null });
      return;
    }
    i !== "frameId" && ((r = a.boundElements) != null && r.find((o) => o.id === t.id) || (xe(t) && n(a, { boundElements: Ys(a.boundElements, /* @__PURE__ */ new Set(), new Array(t)) }), J(t) && ((l = a.boundElements) != null && l.find((o) => o.type === "text") ? n(t, { [i]: null }) : n(a, { boundElements: Ys(a.boundElements, /* @__PURE__ */ new Set(), new Array(t)) }))));
  });
});
var Vl = class {
  static unbindAffected(e, t, n) {
    t && nf(e, t, (a) => {
      !a || a.isDeleted || af(e, a, (i, r, l) => {
        l === t.id && n(a, { [r]: null });
      });
    });
  }
};
L(Vl, "rebindAffected", (e, t, n) => {
  !t || t.isDeleted || nf(e, t, (a, i, r) => {
    var l, o;
    if (!a || a.isDeleted) {
      n(t, { boundElements: Ys(t.boundElements, /* @__PURE__ */ new Set([r])) });
      return;
    }
    J(a) && (((o = (((l = t.boundElements) == null ? void 0 : l.slice()) ?? []).reverse().find((c) => c.type === "text")) == null ? void 0 : o.id) === a.id ? a.containerId !== t.id && n(a, { containerId: t.id }) : (a.containerId !== null && n(a, { containerId: null }), n(t, { boundElements: Ys(t.boundElements, /* @__PURE__ */ new Set([a.id])) })));
  });
});
var A1 = (e, t) => {
  let [n, a] = rf(e);
  return X(k(t.x + t.width * n, t.y + t.height * a), k(t.x + t.width / 2, t.y + t.height / 2), t.angle);
}, YR = (e, t) => {
  let n = e.startBinding && t.get(e.startBinding.elementId), a = e.endBinding && t.get(e.endBinding.elementId), i = n && e.startBinding ? A1(e.startBinding.fixedPoint, n) : k(e.x + e.points[0][0], e.y + e.points[0][1]), r = a && e.endBinding ? A1(e.endBinding.fixedPoint, a) : k(e.x + e.points[e.points.length - 1][0], e.y + e.points[e.points.length - 1][1]);
  return [i, r];
}, ZR = (e, t) => {
  let [n, a] = YR(e, t);
  return [ee.pointFromAbsoluteCoords(e, n, t), ee.pointFromAbsoluteCoords(e, a, t)];
}, rf = (e) => e && (Math.abs(e[0] - 0.5) < 1e-4 || Math.abs(e[1] - 0.5) < 1e-4) ? e.map((t) => Math.abs(t - 0.5) < 1e-4 ? 0.5001 : t) : e, KR = (e, t) => {
  let [n, a, i, r] = t, { x: l, y: o } = fa({ sceneX: n, sceneY: a }, e), { x: c, y: d } = fa({ sceneX: i, sceneY: r }, e);
  return c - l > e.width || d - o > e.height;
}, g7 = ({ scenePoint: e, viewportDimensions: t, zoom: n, offsets: a }) => {
  let i = (t.width - ((a == null ? void 0 : a.right) ?? 0)) / 2 / n.value - e.x;
  i += ((a == null ? void 0 : a.left) ?? 0) / 2 / n.value;
  let r = (t.height - ((a == null ? void 0 : a.bottom) ?? 0)) / 2 / n.value - e.y;
  return r += ((a == null ? void 0 : a.top) ?? 0) / 2 / n.value, { scrollX: i, scrollY: r };
}, Zs = (e, t) => {
  if (e = xO(e), !e.length) return { scrollX: 0, scrollY: 0 };
  let [n, a, i, r] = We(e);
  KR(t, [n, a, i, r]) && ([n, a, i, r] = wR(e, it({ clientX: t.scrollX, clientY: t.scrollY }, t)));
  let l = (n + i) / 2, o = (a + r) / 2;
  return g7({ scenePoint: { x: l, y: o }, viewportDimensions: { width: t.width, height: t.height }, zoom: t.zoom });
}, Si = (e) => Me(Ka(e, 6), $0, z0), qR = (e) => Me(Math.round(e), 1, 100), b7 = (e) => Me(Math.round(e), 1, 100), v7 = (e, t, n) => {
  let a = n.reduce((i, r) => (r.groupIds.includes(e) && (i[r.id] = !0), i), {});
  return Object.keys(a).length < 2 ? t.selectedGroupIds[e] || t.editingGroupId === e ? { selectedElementIds: t.selectedElementIds, selectedGroupIds: { ...t.selectedGroupIds, [e]: !1 }, editingGroupId: null } : t : { editingGroupId: t.editingGroupId, selectedGroupIds: { ...t.selectedGroupIds, [e]: !0 }, selectedElementIds: { ...t.selectedElementIds, ...a } };
}, pn = function() {
  let e = null, t = null, n = null, a = (r, l, o, c) => {
    if (n !== void 0 && l === t && r === e && o.editingGroupId === (n == null ? void 0 : n.editingGroupId)) return n;
    let d = {};
    for (let f of r) {
      let h = f.groupIds;
      if (o.editingGroupId) {
        let U = h.indexOf(o.editingGroupId);
        U > -1 && (h = h.slice(0, U));
      }
      if (h.length > 0) {
        let U = h[h.length - 1];
        d[U] = !0;
      }
    }
    let s = {}, u = l.reduce((f, h) => {
      if (h.isDeleted) return f;
      let U = h.groupIds.find((m) => d[m]);
      return U && (f[h.id] = !0, Array.isArray(s[U]) ? s[U].push(h.id) : s[U] = [h.id]), f;
    }, {});
    for (let f of Object.keys(s)) s[f].length < 2 && d[f] && (d[f] = !1);
    return t = l, e = r, n = { editingGroupId: o.editingGroupId, selectedGroupIds: d, selectedElementIds: Ne({ ...o.selectedElementIds, ...u }, c) }, n;
  }, i = (r, l, o, c) => {
    let d = c ? c.scene.getSelectedElements({ selectedElementIds: r.selectedElementIds, elements: l }) : Ee(l, r);
    return d.length ? a(d, l, r, o) : { selectedGroupIds: {}, editingGroupId: null, selectedElementIds: Ne(r.selectedElementIds, o) };
  };
  return i.clearCache = () => {
    t = null, e = null, n = null;
  }, i;
}(), y7 = (e, t) => w7(e, t) != null, w7 = (e, t) => t.groupIds.filter((n) => n !== e.editingGroupId).find((n) => e.selectedGroupIds[n]), Kr = (e) => Object.entries(e.selectedGroupIds).filter(([t, n]) => n).map(([t, n]) => t), E7 = (e, t) => {
  let n = { ...t, selectedGroupIds: {} };
  for (let a of e) {
    let i = a.groupIds;
    if (t.editingGroupId) {
      let r = i.indexOf(t.editingGroupId);
      r > -1 && (i = i.slice(0, r));
    }
    if (i.length > 0) {
      let r = i[i.length - 1];
      n = { ...n, ...v7(r, n, e) };
    }
  }
  return n.selectedGroupIds;
}, JR = (e, t) => ({ ...e, editingGroupId: t.groupIds.length ? t.groupIds[0] : null, selectedGroupIds: {}, selectedElementIds: { [t.id]: !0 } }), Ks = (e, t) => e.groupIds.includes(t), ot = (e, t) => {
  let n = [];
  for (let a of e.values()) Ks(a, t) && n.push(a);
  return n;
}, QR = (e, t) => e.groupIds.find((n) => t[n]), eP = (e, t, n) => {
  let a = [...e], i = t ? e.indexOf(t) : -1, r = i > -1 ? i : e.length;
  for (let l = 0; l < r; l++) a[l] = n(a[l]);
  return a;
}, tP = (e, t, n) => {
  let a = [...e], i = n ? a.indexOf(n) : -1, r = i > -1 ? i : a.length;
  return a.splice(r, 0, t), a;
}, nP = (e, t) => e.filter((n) => !t[n]), lf = (e, t) => {
  let n = /* @__PURE__ */ new Map();
  return e.forEach((a) => {
    let i = a.groupIds.length === 0 ? a.id : a.groupIds[a.groupIds.length - 1], r = n.get(i) || [], l = ye(a, t);
    l && r.push(l), n.set(i, [...r, a]);
  }), Array.from(n.values());
}, aP = (e) => {
  let t = /* @__PURE__ */ new Set();
  for (let [, n] of e) if (!n.isDeleted) for (let a of n.groupIds ?? []) t.add(a);
  return t;
}, x7 = (e) => {
  let t = e.flatMap((i) => i.groupIds), n = /* @__PURE__ */ new Map(), a = 0;
  for (let i of t) n.set(i, (n.get(i) ?? 0) + 1), n.get(i) > a && (a = n.get(i));
  return a === e.length;
}, po = (e) => e.groupIds.length > 0, iP = 8, Fm = 99999, of = (e) => iP / e, wn = class {
};
L(wn, "referenceSnapPoints", null), L(wn, "visibleGaps", null), L(wn, "setReferenceSnapPoints", (e) => {
  wn.referenceSnapPoints = e;
}), L(wn, "getReferenceSnapPoints", () => wn.referenceSnapPoints), L(wn, "setVisibleGaps", (e) => {
  wn.visibleGaps = e;
}), L(wn, "getVisibleGaps", () => wn.visibleGaps), L(wn, "destroy", () => {
  wn.referenceSnapPoints = null, wn.visibleGaps = null;
});
var mi = wn, qs = (e) => e.props.gridModeEnabled ?? e.state.gridModeEnabled, Ur = ({ event: e, app: t, selectedElements: n }) => e ? t.state.objectsSnapModeEnabled && !e[P.CTRL_OR_CMD] || !t.state.objectsSnapModeEnabled && e[P.CTRL_OR_CMD] && !qs(t) : n.length === 1 && n[0].type === "arrow" ? !1 : t.state.objectsSnapModeEnabled, rP = (e, t, n = 0.01) => Math.abs(e - t) <= n, Js = (e, t, { omitCenter: n, boundingBoxCorners: a, dragOffset: i } = { omitCenter: !1, boundingBoxCorners: !1 }) => {
  let r = [];
  if (e.length === 1) {
    let l = e[0], [o, c, d, s, u, f] = ge(l, t);
    i && (o += i.x, d += i.x, u += i.x, c += i.y, s += i.y, f += i.y);
    let h = (d - o) / 2, U = (s - c) / 2;
    if ((l.type === "diamond" || l.type === "ellipse") && !a) {
      let m = X(k(o, c + U), k(u, f), l.angle), g = X(k(o + h, c), k(u, f), l.angle), b = X(k(d, c + U), k(u, f), l.angle), v = X(k(o + h, s), k(u, f), l.angle), y = k(u, f);
      r = n ? [m, g, b, v] : [m, g, b, v, y];
    } else {
      let m = X(k(o, c), k(u, f), l.angle), g = X(k(d, c), k(u, f), l.angle), b = X(k(o, s), k(u, f), l.angle), v = X(k(d, s), k(u, f), l.angle), y = k(u, f);
      r = n ? [m, g, b, v] : [m, g, b, v, y];
    }
  } else if (e.length > 1) {
    let [l, o, c, d] = lp(e, i ?? { x: 0, y: 0 }), s = c - l, u = d - o, f = k(l, o), h = k(c, o), U = k(l, d), m = k(c, d), g = k(l + s / 2, o + u / 2);
    r = n ? [f, h, U, m] : [f, h, U, m, g];
  }
  return r.map((l) => k(Ut(l[0]), Ut(l[1])));
}, S7 = (e, t, n, a) => {
  let i = t.filter((r) => fe(r)).map((r) => r.id);
  return m3(e, t, n, a).filter((r) => !(r.frameId && i.includes(r.frameId)));
}, lP = (e, t, n, a) => {
  let i = S7(e, t, n, a), r = lf(i, a).filter((u) => !(u.length === 1 && st(u[0]))).map((u) => We(u).map((f) => Ut(f))), l = r.sort((u, f) => u[0] - f[0]), o = [], c = 0;
  e: for (let u = 0; u < l.length; u++) {
    let f = l[u];
    for (let h = u + 1; h < l.length; h++) {
      if (++c > Fm) break e;
      let U = l[h], [, m, g, b] = f, [v, y, , w] = U;
      g < v && tu(an(m, b), an(y, w)) && o.push({ startBounds: f, endBounds: U, startSide: [k(g, m), k(g, b)], endSide: [k(v, y), k(v, w)], length: v - g, overlap: nu(an(m, b), an(y, w)) });
    }
  }
  let d = r.sort((u, f) => u[1] - f[1]), s = [];
  c = 0;
  e: for (let u = 0; u < d.length; u++) {
    let f = d[u];
    for (let h = u + 1; h < d.length; h++) {
      if (++c > Fm) break e;
      let U = d[h], [m, , g, b] = f, [v, y, w] = U;
      b < y && tu(an(m, g), an(v, w)) && s.push({ startBounds: f, endBounds: U, startSide: [k(m, b), k(g, b)], endSide: [k(v, y), k(w, y)], length: y - b, overlap: nu(an(m, g), an(v, w)) });
    }
  }
  return { horizontalGaps: o, verticalGaps: s };
}, Bm = (e, t, n, a, i, r, l) => {
  if (!Ur({ app: n, event: a, selectedElements: e })) return [];
  if (e.length === 0) return [];
  let o = mi.getVisibleGaps();
  if (o) {
    let { horizontalGaps: c, verticalGaps: d } = o, [s, u, f, h] = lp(e, t).map((g) => Ut(g)), U = (s + f) / 2, m = (u + h) / 2;
    for (let g of c) {
      if (!tu(an(u, h), g.overlap)) continue;
      let b = g.startSide[0][0] + g.length / 2, v = Ut(b - U);
      if (g.length > f - s && Math.abs(v) <= l.x) {
        Math.abs(v) < l.x && (i.length = 0), l.x = Math.abs(v);
        let I = { type: "gap", direction: "center_horizontal", gap: g, offset: v };
        i.push(I);
        continue;
      }
      let [, , y] = g.endBounds, w = s - y, x = Ut(g.length - w);
      if (Math.abs(x) <= l.x) {
        Math.abs(x) < l.x && (i.length = 0), l.x = Math.abs(x);
        let I = { type: "gap", direction: "side_right", gap: g, offset: x };
        i.push(I);
        continue;
      }
      let [S, , ,] = g.startBounds, E = S - f, M = Ut(E - g.length);
      if (Math.abs(M) <= l.x) {
        Math.abs(M) < l.x && (i.length = 0), l.x = Math.abs(M);
        let I = { type: "gap", direction: "side_left", gap: g, offset: M };
        i.push(I);
        continue;
      }
    }
    for (let g of d) {
      if (!tu(an(s, f), g.overlap)) continue;
      let b = g.startSide[0][1] + g.length / 2, v = Ut(b - m);
      if (g.length > h - u && Math.abs(v) <= l.y) {
        Math.abs(v) < l.y && (r.length = 0), l.y = Math.abs(v);
        let I = { type: "gap", direction: "center_vertical", gap: g, offset: v };
        r.push(I);
        continue;
      }
      let [, y, ,] = g.startBounds, w = y - h, x = Ut(w - g.length);
      if (Math.abs(x) <= l.y) {
        Math.abs(x) < l.y && (r.length = 0), l.y = Math.abs(x);
        let I = { type: "gap", direction: "side_top", gap: g, offset: x };
        r.push(I);
        continue;
      }
      let [, , , S] = g.endBounds, E = Ut(u - S), M = g.length - E;
      if (Math.abs(M) <= l.y) {
        Math.abs(M) < l.y && (r.length = 0), l.y = Math.abs(M);
        let I = { type: "gap", direction: "side_bottom", gap: g, offset: M };
        r.push(I);
        continue;
      }
    }
  }
}, oP = (e, t, n, a) => {
  let i = S7(e, t, n, a);
  return lf(i, a).filter((r) => !(r.length === 1 && st(r[0]))).flatMap((r) => Js(r, a));
}, Uo = (e, t, n, a, i, r, l) => {
  if (!Ur({ app: n, event: a, selectedElements: e }) || e.length === 0 && t.length === 0) return [];
  let o = mi.getReferenceSnapPoints();
  if (o) for (let c of t) for (let d of o) {
    let s = d[0] - c[0], u = d[1] - c[1];
    Math.abs(s) <= l.x && (Math.abs(s) < l.x && (i.length = 0), i.push({ type: "point", points: [c, d], offset: s }), l.x = Math.abs(s)), Math.abs(u) <= l.y && (Math.abs(u) < l.y && (r.length = 0), r.push({ type: "point", points: [c, d], offset: u }), l.y = Math.abs(u));
  }
}, sP = (e, t, n, a, i) => {
  var g, b;
  let r = n.state, l = Ee(e, r);
  if (!Ur({ app: n, event: a, selectedElements: l }) || l.length === 0) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  t.x = Ut(t.x), t.y = Ut(t.y);
  let o = [], c = [], d = of(r.zoom.value), s = { x: d, y: d }, u = Js(l, i, { dragOffset: t });
  Uo(l, u, n, a, o, c, s), Bm(l, t, n, a, o, c, s);
  let f = { x: ((g = o[0]) == null ? void 0 : g.offset) ?? 0, y: ((b = c[0]) == null ? void 0 : b.offset) ?? 0 };
  s.x = 0, s.y = 0, o.length = 0, c.length = 0;
  let h = { x: Ut(t.x + f.x), y: Ut(t.y + f.y) };
  Uo(l, Js(l, i, { dragOffset: h }), n, a, o, c, s), Bm(l, h, n, a, o, c, s);
  let U = dp(o, c), m = dP(l, h, [...o, ...c].filter((v) => v.type === "gap"));
  return { snapOffset: f, snapLines: [...U, ...m] };
}, Ut = (e) => Math.round(e * 10 ** 6) / 10 ** 6, Hm = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = n.join(",");
    t.has(a) || t.set(a, n);
  }
  return Array.from(t.values());
}, dp = (e, t) => {
  let n = {}, a = {};
  if (e.length > 0) {
    for (let i of e) if (i.type === "point") {
      let r = Ut(i.points[0][0]);
      n[r] || (n[r] = []), n[r].push(...i.points.map((l) => k(Ut(l[0]), Ut(l[1]))));
    }
  }
  if (t.length > 0) {
    for (let i of t) if (i.type === "point") {
      let r = Ut(i.points[0][1]);
      a[r] || (a[r] = []), a[r].push(...i.points.map((l) => k(Ut(l[0]), Ut(l[1]))));
    }
  }
  return Object.entries(n).map(([i, r]) => ({ type: "points", points: Hm(r.map((l) => k(Number(i), l[1])).sort((l, o) => l[1] - o[1])) })).concat(Object.entries(a).map(([i, r]) => ({ type: "points", points: Hm(r.map((l) => k(l[0], Number(i))).sort((l, o) => l[0] - o[0])) })));
}, cP = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = n.points.flat().map((i) => [Ut(i)]).join(",");
    t.has(a) || t.set(a, n);
  }
  return Array.from(t.values());
}, dP = (e, t, n) => {
  let [a, i, r, l] = lp(e, t), o = [];
  for (let c of n) {
    let [d, s, u, f] = c.gap.startBounds, [h, U, m, g] = c.gap.endBounds, b = nu(an(i, l), c.gap.overlap), v = nu(an(a, r), c.gap.overlap);
    switch (c.direction) {
      case "center_horizontal": {
        if (b) {
          let y = (b[0] + b[1]) / 2;
          o.push({ type: "gap", direction: "horizontal", points: [k(c.gap.startSide[0][0], y), k(a, y)] }, { type: "gap", direction: "horizontal", points: [k(r, y), k(c.gap.endSide[0][0], y)] });
        }
        break;
      }
      case "center_vertical": {
        if (v) {
          let y = (v[0] + v[1]) / 2;
          o.push({ type: "gap", direction: "vertical", points: [k(y, c.gap.startSide[0][1]), k(y, i)] }, { type: "gap", direction: "vertical", points: [k(y, l), k(y, c.gap.endSide[0][1])] });
        }
        break;
      }
      case "side_right": {
        if (b) {
          let y = (b[0] + b[1]) / 2;
          o.push({ type: "gap", direction: "horizontal", points: [k(u, y), k(h, y)] }, { type: "gap", direction: "horizontal", points: [k(m, y), k(a, y)] });
        }
        break;
      }
      case "side_left": {
        if (b) {
          let y = (b[0] + b[1]) / 2;
          o.push({ type: "gap", direction: "horizontal", points: [k(r, y), k(d, y)] }, { type: "gap", direction: "horizontal", points: [k(u, y), k(h, y)] });
        }
        break;
      }
      case "side_top": {
        if (v) {
          let y = (v[0] + v[1]) / 2;
          o.push({ type: "gap", direction: "vertical", points: [k(y, l), k(y, s)] }, { type: "gap", direction: "vertical", points: [k(y, f), k(y, U)] });
        }
        break;
      }
      case "side_bottom": {
        if (v) {
          let y = (v[0] + v[1]) / 2;
          o.push({ type: "gap", direction: "vertical", points: [k(y, f), k(y, U)] }, { type: "gap", direction: "vertical", points: [k(y, g), k(y, i)] });
        }
        break;
      }
    }
  }
  return cP(o.map((c) => ({ ...c, points: c.points.map((d) => k(Ut(d[0]), Ut(d[1]))) })));
}, Xm = (e, t, n, a, i, r) => {
  var S, E;
  if (!Ur({ event: a, selectedElements: e, app: n }) || e.length === 0 || e.length === 1 && !rP(e[0].angle, 0)) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  let [l, o, c, d] = We(t);
  r && (r.includes("e") ? c += i.x : r.includes("w") && (l += i.x), r.includes("n") ? o += i.y : r.includes("s") && (d += i.y));
  let s = [];
  if (r) switch (r) {
    case "e": {
      s.push(k(c, o), k(c, d));
      break;
    }
    case "w": {
      s.push(k(l, o), k(l, d));
      break;
    }
    case "n": {
      s.push(k(l, o), k(c, o));
      break;
    }
    case "s": {
      s.push(k(l, d), k(c, d));
      break;
    }
    case "ne": {
      s.push(k(c, o));
      break;
    }
    case "nw": {
      s.push(k(l, o));
      break;
    }
    case "se": {
      s.push(k(c, d));
      break;
    }
    case "sw": {
      s.push(k(l, d));
      break;
    }
  }
  let u = of(n.state.zoom.value), f = { x: u, y: u }, h = [], U = [];
  Uo(t, s, n, a, h, U, f);
  let m = { x: ((S = h[0]) == null ? void 0 : S.offset) ?? 0, y: ((E = U[0]) == null ? void 0 : E.offset) ?? 0 };
  f.x = 0, f.y = 0, h.length = 0, U.length = 0;
  let [g, b, v, y] = We(e).map((M) => Ut(M)), w = [k(g, b), k(g, y), k(v, b), k(v, y)];
  Uo(e, w, n, a, h, U, f);
  let x = dp(h, U);
  return { snapOffset: m, snapLines: x };
}, uP = (e, t, n, a, i, r) => {
  var U, m;
  if (!Ur({ event: n, selectedElements: [e], app: t })) return { snapOffset: { x: 0, y: 0 }, snapLines: [] };
  let l = [k(a.x + i.x, a.y + i.y)], o = of(t.state.zoom.value), c = { x: o, y: o }, d = [], s = [];
  Uo([e], l, t, n, d, s, c);
  let u = { x: ((U = d[0]) == null ? void 0 : U.offset) ?? 0, y: ((m = s[0]) == null ? void 0 : m.offset) ?? 0 };
  c.x = 0, c.y = 0, d.length = 0, s.length = 0;
  let f = Js([e], r, { boundingBoxCorners: !0, omitCenter: !0 });
  Uo([e], f, t, n, d, s, c);
  let h = dp(d, s);
  return { snapOffset: u, snapLines: h };
}, fP = (e, t, n, a, i) => {
  if (!Ur({ event: a, selectedElements: [], app: t })) return { originOffset: { x: 0, y: 0 }, snapLines: [] };
  let r = m3(e, [], t.state, i), l = of(t.state.zoom.value), o = { x: l, y: l }, c = [], d = [];
  for (let s of r) {
    let u = Js([s], i);
    for (let f of u) {
      let h = f[0] - n.x;
      Math.abs(h) <= Math.abs(o.x) && (Math.abs(h) < Math.abs(o.x) && (d.length = 0), d.push({ type: "pointer", points: [f, k(f[0], n.y)], direction: "vertical" }), o.x = h);
      let U = f[1] - n.y;
      Math.abs(U) <= Math.abs(o.y) && (Math.abs(U) < Math.abs(o.y) && (c.length = 0), c.push({ type: "pointer", points: [f, k(n.x, f[1])], direction: "horizontal" }), o.y = U);
    }
  }
  return { originOffset: { x: d.length > 0 ? d[0].points[0][0] - n.x : 0, y: c.length > 0 ? c[0].points[0][1] - n.y : 0 }, snapLines: [...d, ...c] };
}, hP = (e) => e === zt.rectangle || e === zt.ellipse || e === zt.diamond || e === zt.frame || e === zt.magicframe || e === zt.image || e === zt.text, Lt = (e, t, n) => n ? [Math.round(e / n) * n, Math.round(t / n) * n] : [e, t], Vi = { version: null, points: [], zoom: null }, St = class Se {
  constructor(t) {
    L(this, "elementId"), L(this, "selectedPointsIndices"), L(this, "pointerDownState"), L(this, "isDragging"), L(this, "lastUncommittedPoint"), L(this, "pointerOffset"), L(this, "startBindingElement"), L(this, "endBindingElement"), L(this, "hoverPointIndex"), L(this, "segmentMidPointHoveredCoords"), L(this, "elbowed"), this.elementId = t.id, Ea(t.points[0], k(0, 0)) || console.error("Linear element is not normalized", Error().stack), this.selectedPointsIndices = null, this.lastUncommittedPoint = null, this.isDragging = !1, this.pointerOffset = { x: 0, y: 0 }, this.startBindingElement = "keep", this.endBindingElement = "keep", this.pointerDownState = { prevSelectedPointsIndices: null, lastClickedPoint: -1, lastClickedIsEndPoint: !1, origin: null, segmentMidpoint: { value: null, index: null, added: !1 } }, this.hoverPointIndex = -1, this.segmentMidPointHoveredCoords = null, this.elbowed = te(t) && t.elbowed;
  }
  static getElement(t, n) {
    return n.get(t) || null;
  }
  static handleBoxSelection(t, n, a, i) {
    if (!n.editingLinearElement || !n.selectionElement) return !1;
    let { editingLinearElement: r } = n, { selectedPointsIndices: l, elementId: o } = r, c = Se.getElement(o, i);
    if (!c) return !1;
    let [d, s, u, f] = ge(n.selectionElement, i), h = Se.getPointsGlobalCoordinates(c, i).reduce((U, m, g) => ((m[0] >= d && m[0] <= u && m[1] >= s && m[1] <= f || t.shiftKey && (l != null && l.includes(g))) && U.push(g), U), []).filter((U) => !(te(c) && U !== 0 && U !== c.points.length - 1));
    a({ editingLinearElement: { ...r, selectedPointsIndices: h.length ? h : null } });
  }
  static handlePointDragging(t, n, a, i, r, l, o) {
    var U;
    if (!l) return !1;
    let { elementId: c } = l, d = o.getNonDeletedElementsMap(), s = Se.getElement(c, d);
    if (!s || te(s) && !l.pointerDownState.lastClickedIsEndPoint && l.pointerDownState.lastClickedPoint !== 0) return !1;
    let u = te(s) ? (U = l.selectedPointsIndices) == null ? void 0 : U.reduce((m, g) => g === 0 ? [0, m[1]] : [m[0], s.points.length - 1], [!1, !1]).filter((m) => typeof m == "number") : l.selectedPointsIndices, f = te(s) ? l.pointerDownState.lastClickedPoint > 0 ? s.points.length - 1 : 0 : l.pointerDownState.lastClickedPoint, h = s.points[f];
    if (u && h) {
      if (ws(t) && u.length === 1 && s.points.length > 1) {
        let m = u[0], g = s.points[m === 0 ? 1 : m - 1], [b, v] = Se._getShiftLockedDelta(s, d, g, k(a, i), t[P.CTRL_OR_CMD] ? null : n.getEffectiveGridSize());
        Se.movePoints(s, [{ index: m, point: k(b + g[0], v + g[1]), isDragging: m === f }]);
      } else {
        let m = Se.createPointAt(s, d, a - l.pointerOffset.x, i - l.pointerOffset.y, t[P.CTRL_OR_CMD] ? null : n.getEffectiveGridSize()), g = m[0] - h[0], b = m[1] - h[1];
        Se.movePoints(s, u.map((v) => {
          let y = v === f ? Se.createPointAt(s, d, a - l.pointerOffset.x, i - l.pointerOffset.y, t[P.CTRL_OR_CMD] ? null : n.getEffectiveGridSize()) : k(s.points[v][0] + g, s.points[v][1] + b);
          return { index: v, point: y, isDragging: v === f };
        }));
      }
      if (ye(s, d) && vc(s, d, !1), Ga(s, !1)) {
        let m = [];
        u[0] === 0 && m.push(ha(Se.getPointGlobalCoordinates(s, s.points[0], d)));
        let g = u[u.length - 1];
        g === s.points.length - 1 && m.push(ha(Se.getPointGlobalCoordinates(s, s.points[g], d))), m.length && r(s, m);
      }
      return !0;
    }
    return !1;
  }
  static handlePointerUp(t, n, a, i) {
    var h;
    let r = i.getNonDeletedElementsMap(), l = i.getNonDeletedElements(), { elementId: o, selectedPointsIndices: c, isDragging: d, pointerDownState: s } = n, u = Se.getElement(o, r);
    if (!u) return n;
    let f = {};
    if (d && c) {
      for (let U of c) if (U === 0 || U === u.points.length - 1) {
        Ti(u.points, a.zoom.value) && Se.movePoints(u, [{ index: U, point: U === 0 ? u.points[u.points.length - 1] : u.points[0] }]);
        let m = Wr(a) ? Ua(ha(Se.getPointAtIndexGlobalCoordinates(u, U, r)), l, r, a.zoom, te(u), te(u)) : null;
        f[U === 0 ? "startBindingElement" : "endBindingElement"] = m;
      }
    }
    return { ...n, ...f, selectedPointsIndices: d || t.shiftKey ? !d && t.shiftKey && ((h = s.prevSelectedPointsIndices) != null && h.includes(s.lastClickedPoint)) ? c && c.filter((U) => U !== s.lastClickedPoint) : c : c != null && c.includes(s.lastClickedPoint) ? [s.lastClickedPoint] : c, isDragging: !1, pointerOffset: { x: 0, y: 0 } };
  }
  static isSegmentTooShort(t, n, a, i, r) {
    if (te(t)) return i >= 0 && i < t.points.length ? ze(n, a) * r.value < Se.POINT_HANDLE_SIZE / 2 : !1;
    let l = ze(n, a);
    return t.points.length > 2 && t.roundness && (l = YL(t, a)), l * r.value < Se.POINT_HANDLE_SIZE * 4;
  }
  static getSegmentMidPoint(t, n, a, i, r) {
    let l = pc(n, a);
    if (t.points.length > 2 && t.roundness) {
      let o = j8(t, t.points[i]);
      if (o) {
        let c = ZL(t, t.points[i], 0.5);
        l = Se.getPointGlobalCoordinates(t, Y8(o[0], o[1], o[2], o[3], c), r);
      }
    }
    return l;
  }
  static getSegmentMidPointIndex(t, n, a, i) {
    let r = Se.getElement(t.elementId, i);
    if (!r) return -1;
    let l = Se.getEditorMidPoints(r, i, n), o = 0;
    for (; o < l.length; ) {
      if (Se.arePointsEqual(a, l[o])) return o + 1;
      o++;
    }
    return -1;
  }
  static handlePointerDown(t, n, a, i, r, l) {
    var M;
    let o = n.state, c = l.getNonDeletedElementsMap(), d = l.getNonDeletedElements(), s = { didAddPoint: !1, hitElement: null, linearElementEditor: null };
    if (!r) return s;
    let { elementId: u } = r, f = Se.getElement(u, c);
    if (!f) return s;
    let h = Se.getSegmentMidpointHitCoords(r, i, o, c), U = null;
    if (h) U = Se.getSegmentMidPointIndex(r, o, h, c);
    else if (t.altKey && o.editingLinearElement) return r.lastUncommittedPoint == null && (G(f, { points: [...f.points, Se.createPointAt(f, c, i.x, i.y, t[P.CTRL_OR_CMD] ? null : n.getEffectiveGridSize())] }), s.didAddPoint = !0), a.shouldCaptureIncrement(), s.linearElementEditor = { ...r, pointerDownState: { prevSelectedPointsIndices: r.selectedPointsIndices, lastClickedPoint: -1, lastClickedIsEndPoint: !1, origin: { x: i.x, y: i.y }, segmentMidpoint: { value: h, index: U, added: !1 } }, selectedPointsIndices: [f.points.length - 1], lastUncommittedPoint: null, endBindingElement: Ua(i, d, c, n.state.zoom, r.elbowed) }, s.didAddPoint = !0, s;
    let m = Se.getPointIndexUnderCursor(f, c, o.zoom, i.x, i.y);
    if (m >= 0 || h) s.hitElement = f;
    else {
      let { startBindingElement: I, endBindingElement: T } = r;
      Wr(o) && Ga(f) && tf(f, I, T, c, l);
    }
    let [g, b, v, y] = ge(f, c), w = (g + v) / 2, x = (b + y) / 2, S = m > -1 && X(k(f.x + f.points[m][0], f.y + f.points[m][1]), k(w, x), f.angle), E = m > -1 || t.shiftKey ? t.shiftKey || (M = r.selectedPointsIndices) != null && M.includes(m) ? pP([...r.selectedPointsIndices || [], m]) : [m] : null;
    return s.linearElementEditor = { ...r, pointerDownState: { prevSelectedPointsIndices: r.selectedPointsIndices, lastClickedPoint: m, lastClickedIsEndPoint: m === f.points.length - 1, origin: { x: i.x, y: i.y }, segmentMidpoint: { value: h, index: U, added: !1 } }, selectedPointsIndices: E, pointerOffset: S ? { x: i.x - S[0], y: i.y - S[1] } : { x: 0, y: 0 } }, s;
  }
  static arePointsEqual(t, n) {
    return !t && !n ? !0 : !t || !n ? !1 : Ea(t, n);
  }
  static handlePointerMove(t, n, a, i, r) {
    let l = i.state;
    if (!l.editingLinearElement) return null;
    let { elementId: o, lastUncommittedPoint: c } = l.editingLinearElement, d = Se.getElement(o, r);
    if (!d) return l.editingLinearElement;
    let { points: s } = d, u = s[s.length - 1];
    if (!t.altKey) return u === c && Se.deletePoints(d, [s.length - 1]), { ...l.editingLinearElement, lastUncommittedPoint: null };
    let f;
    if (ws(t) && s.length >= 2) {
      let h = s[s.length - 2], [U, m] = Se._getShiftLockedDelta(d, r, h, k(n, a), t[P.CTRL_OR_CMD] ? null : i.getEffectiveGridSize());
      f = k(U + h[0], m + h[1]);
    } else f = Se.createPointAt(d, r, n - l.editingLinearElement.pointerOffset.x, a - l.editingLinearElement.pointerOffset.y, t[P.CTRL_OR_CMD] || te(d) ? null : i.getEffectiveGridSize());
    return u === c ? Se.movePoints(d, [{ index: d.points.length - 1, point: f }]) : Se.addPoints(d, [{ point: f }]), { ...l.editingLinearElement, lastUncommittedPoint: d.points[d.points.length - 1] };
  }
  static getPointGlobalCoordinates(t, n, a) {
    let [i, r, l, o] = ge(t, a), c = (i + l) / 2, d = (r + o) / 2, { x: s, y: u } = t;
    return X(k(s + n[0], u + n[1]), k(c, d), t.angle);
  }
  static getPointsGlobalCoordinates(t, n) {
    let [a, i, r, l] = ge(t, n), o = (a + r) / 2, c = (i + l) / 2;
    return t.points.map((d) => {
      let { x: s, y: u } = t;
      return X(k(s + d[0], u + d[1]), k(o, c), t.angle);
    });
  }
  static getPointAtIndexGlobalCoordinates(t, n, a) {
    let i = n < 0 ? t.points.length + n : n, [r, l, o, c] = ge(t, a), d = (r + o) / 2, s = (l + c) / 2, u = t.points[i], { x: f, y: h } = t;
    return X(u ? k(f + u[0], h + u[1]) : k(f, h), k(d, s), t.angle);
  }
  static pointFromAbsoluteCoords(t, n, a) {
    if (te(t)) return k(n[0] - t.x, n[1] - t.y);
    let [i, r, l, o] = ge(t, a), c = (i + l) / 2, d = (r + o) / 2, [s, u] = X(k(n[0], n[1]), k(c, d), -t.angle);
    return k(s - t.x, u - t.y);
  }
  static getPointIndexUnderCursor(t, n, a, i, r) {
    let l = Se.getPointsGlobalCoordinates(t, n), o = l.length;
    for (; --o > -1; ) {
      let c = l[o];
      if (ze(k(i, r), k(c[0], c[1])) * a.value < Se.POINT_HANDLE_SIZE + 1) return o;
    }
    return -1;
  }
  static createPointAt(t, n, a, i, r) {
    let l = Lt(a, i, r), [o, c, d, s] = ge(t, n), u = (o + d) / 2, f = (c + s) / 2, [h, U] = X(k(l[0], l[1]), k(u, f), -t.angle);
    return k(h - t.x, U - t.y);
  }
  static getNormalizedPoints(t) {
    let { points: n } = t, a = n[0][0], i = n[0][1];
    return { points: n.map((r) => k(r[0] - a, r[1] - i)), x: t.x + a, y: t.y + i };
  }
  static normalizePoints(t) {
    G(t, Se.getNormalizedPoints(t));
  }
  static duplicateSelectedPoints(t, n) {
    cn(t.editingLinearElement, "Not currently editing a linear element");
    let { selectedPointsIndices: a, elementId: i } = t.editingLinearElement, r = Se.getElement(i, n);
    cn(r, "The linear element does not exist in the provided Scene"), cn(a != null, "There are no selected points to duplicate");
    let { points: l } = r, o = [], c = !1, d = -1, s = l.reduce((u, f, h) => {
      if (++d, u.push(f), a.includes(h)) {
        let U = l[h + 1];
        U || (c = !0), u.push(U ? k((f[0] + U[0]) / 2, (f[1] + U[1]) / 2) : k(f[0], f[1])), o.push(d + 1), ++d;
      }
      return u;
    }, []);
    if (G(r, { points: s }), c) {
      let u = r.points[r.points.length - 1];
      Se.movePoints(r, [{ index: r.points.length - 1, point: k(u[0] + 30, u[1] + 30) }]);
    }
    return { ...t, editingLinearElement: { ...t.editingLinearElement, selectedPointsIndices: o } };
  }
  static deletePoints(t, n) {
    let a = 0, i = 0;
    if (n.includes(0)) {
      let l = t.points.find((o, c) => !n.includes(c));
      l && (a = l[0], i = l[1]);
    }
    let r = t.points.reduce((l, o, c) => (n.includes(c) || l.push(l.length ? k(o[0] - a, o[1] - i) : k(0, 0)), l), []);
    Se._updatePoints(t, r, a, i);
  }
  static addPoints(t, n) {
    let a = [...t.points, ...n.map((i) => i.point)];
    Se._updatePoints(t, a, 0, 0);
  }
  static movePoints(t, n, a) {
    var s, u, f;
    let { points: i } = t, [r, l] = ((s = n.find(({ index: h }) => h === 0)) == null ? void 0 : s.point) ?? k(0, 0), [o, c] = k(r - i[0][0], l - i[0][1]), d = te(t) ? [((u = n.find((h) => h.index === 0)) == null ? void 0 : u.point) ?? i[0], ((f = n.find((h) => h.index === i.length - 1)) == null ? void 0 : f.point) ?? i[i.length - 1]] : i.map((h, U) => {
      var g;
      let m = ((g = n.find((b) => b.index === U)) == null ? void 0 : g.point) ?? h;
      return k(m[0] - o, m[1] - c);
    });
    Se._updatePoints(t, d, o, c, a, { isDragging: n.reduce((h, U) => h || U.isDragging === !0, !1) });
  }
  static shouldAddMidpoint(t, n, a, i) {
    let r = Se.getElement(t.elementId, i);
    if (r && te(r) || !r) return !1;
    let { segmentMidpoint: l } = t.pointerDownState;
    if (l.added || l.value === null || l.index === null || t.pointerDownState.origin === null) return !1;
    let o = t.pointerDownState.origin, c = ze(k(o.x, o.y), k(n.x, n.y));
    return !(!a.editingLinearElement && c < Pr / a.zoom.value);
  }
  static addMidpoint(t, n, a, i, r) {
    let l = Se.getElement(t.elementId, r);
    if (!l) return;
    let { segmentMidpoint: o } = t.pointerDownState, c = { pointerDownState: t.pointerDownState, selectedPointsIndices: t.selectedPointsIndices }, d = Se.createPointAt(l, r, n.x, n.y, i && !te(l) ? a.getEffectiveGridSize() : null), s = [...l.points.slice(0, o.index), d, ...l.points.slice(o.index)];
    return G(l, { points: s }), c.pointerDownState = { ...t.pointerDownState, segmentMidpoint: { ...t.pointerDownState.segmentMidpoint, added: !0 }, lastClickedPoint: o.index }, c.selectedPointsIndices = [o.index], c;
  }
  static _updatePoints(t, n, a, i, r, l) {
    if (te(t)) {
      let o = {};
      (r == null ? void 0 : r.startBinding) !== void 0 && (o.startBinding = r.startBinding !== null && au(r.startBinding) ? r.startBinding : null), (r == null ? void 0 : r.endBinding) !== void 0 && (o.endBinding = r.endBinding !== null && au(r.endBinding) ? r.endBinding : null), o.points = Array.from(n), G(t, o, !0, { isDragging: l == null ? void 0 : l.isDragging });
    } else {
      let o = Nm(t, n), c = Nm(t, t.points), d = (o[0] + o[2]) / 2, s = (o[1] + o[3]) / 2, u = (c[0] + c[2]) / 2, f = (c[1] + c[3]) / 2, h = u - d, U = f - s, m = X(k(a, i), k(h, U), t.angle);
      G(t, { ...r, points: n, x: t.x + m[0], y: t.y + m[1] });
    }
  }
  static _getShiftLockedDelta(t, n, a, i, r) {
    let l = Se.getPointGlobalCoordinates(t, a, n);
    if (te(t)) return [i[0] - l[0], i[1] - l[1]];
    let [o, c] = Lt(i[0], i[1], r), { width: d, height: s } = F1(l[0], l[1], o, c);
    return X(k(d, s), k(0, 0), -t.angle);
  }
  static moveFixedSegment(t, n, a, i, r) {
    let l = Se.getElement(t.elementId, r);
    if (!l || !te(l)) return t;
    if (n && n > 0 && n < l.points.length) {
      let o = xi(ul(se(l.points[n], l.points[n - 1]))), c = (l.fixedSegments ?? []).reduce((f, h) => (f[h.index] = h, f), {});
      c[n] = { index: n, start: k(o ? l.points[n - 1][0] : a - l.x, o ? i - l.y : l.points[n - 1][1]), end: k(o ? l.points[n][0] : a - l.x, o ? i - l.y : l.points[n][1]) };
      let d = Object.values(c).sort((f, h) => f.index - h.index), s = d.map((f) => f.index).reduce((f, h) => h < n ? f + 1 : f, 0);
      G(l, { fixedSegments: d });
      let u = k(l.x + (l.fixedSegments[s].start[0] + l.fixedSegments[s].end[0]) / 2, l.y + (l.fixedSegments[s].start[1] + l.fixedSegments[s].end[1]) / 2);
      return { ...t, segmentMidPointHoveredCoords: u, pointerDownState: { ...t.pointerDownState, segmentMidpoint: { added: !1, index: l.fixedSegments[s].index, value: u } } };
    }
    return t;
  }
  static deleteFixedSegment(t, n) {
    var a;
    G(t, { fixedSegments: (a = t.fixedSegments) == null ? void 0 : a.filter((i) => i.index !== n) }), G(t, {}, !0);
  }
};
L(St, "POINT_HANDLE_SIZE", 10), L(St, "getEditorMidPoints", (e, t, n) => {
  let a = ye(e, t);
  return !te(e) && !n.editingLinearElement && e.points.length > 2 && !a ? [] : (Vi.version === e.version && Vi.zoom === n.zoom.value || St.updateEditorMidPointsCache(e, t, n), Vi.points);
}), L(St, "updateEditorMidPointsCache", (e, t, n) => {
  let a = St.getPointsGlobalCoordinates(e, t), i = 0, r = [];
  for (; i < a.length - 1; ) {
    if (St.isSegmentTooShort(e, e.points[i], e.points[i + 1], i, n.zoom)) {
      r.push(null), i++;
      continue;
    }
    let l = St.getSegmentMidPoint(e, a[i], a[i + 1], i + 1, t);
    r.push(l), i++;
  }
  Vi.points = r, Vi.version = e.version, Vi.zoom = n.zoom.value;
}), L(St, "getSegmentMidpointHitCoords", (e, t, n, a) => {
  let { elementId: i } = e, r = St.getElement(i, a);
  if (!r) return null;
  let l = St.getPointIndexUnderCursor(r, a, n.zoom, t.x, t.y);
  if (!te(r) && l >= 0 || St.getPointsGlobalCoordinates(r, a).length >= 3 && !n.editingLinearElement && !te(r)) return null;
  let o = (St.POINT_HANDLE_SIZE + 1) / n.zoom.value, c = e.segmentMidPointHoveredCoords;
  if (c && ze(k(c[0], c[1]), k(t.x, t.y)) <= o) return c;
  let d = 0, s = St.getEditorMidPoints(r, a, n);
  for (; d < s.length; ) {
    if (s[d] !== null && ze(s[d], k(t.x, t.y)) <= o) return s[d];
    d++;
  }
  return null;
}), L(St, "getBoundTextElementPosition", (e, t, n) => {
  let a = St.getPointsGlobalCoordinates(e, n);
  a.length < 2 && G(t, { isDeleted: !0 });
  let i = 0, r = 0;
  if (e.points.length % 2 === 1) {
    let l = Math.floor(e.points.length / 2), o = St.getPointGlobalCoordinates(e, e.points[l], n);
    i = o[0] - t.width / 2, r = o[1] - t.height / 2;
  } else {
    let l = e.points.length / 2 - 1, o = Vi.points[l];
    e.points.length === 2 && (o = pc(a[0], a[1])), (!o || Vi.version !== e.version) && (o = St.getSegmentMidPoint(e, a[l], a[l + 1], l + 1, n)), i = o[0] - t.width / 2, r = o[1] - t.height / 2;
  }
  return { x: i, y: r };
}), L(St, "getMinMaxXYWithBoundText", (e, t, n, a) => {
  let [i, r, l, o] = n, c = (i + l) / 2, d = (r + o) / 2, { x: s, y: u } = St.getBoundTextElementPosition(e, a, t), f = s + a.width, h = u + a.height, U = k(c, d), m = X(k(i, r), U, e.angle), g = X(k(l, r), U, e.angle), b = X(k(s, u), U, -e.angle), v = X(k(f, u), U, -e.angle), y = X(k(s, h), U, -e.angle), w = X(k(f, h), U, -e.angle);
  return m[0] < g[0] && m[1] >= g[1] ? (i = Math.min(i, y[0]), l = Math.max(l, Math.max(v[0], w[0])), r = Math.min(r, b[1]), o = Math.max(o, w[1])) : m[0] >= g[0] && m[1] > g[1] ? (i = Math.min(i, w[0]), l = Math.max(l, Math.max(b[0], v[0])), r = Math.min(r, y[1]), o = Math.max(o, v[1])) : m[0] >= g[0] ? (i = Math.min(i, v[0]), l = Math.max(l, y[0]), r = Math.min(r, w[1]), o = Math.max(o, b[1])) : m[1] <= g[1] && (i = Math.min(i, Math.min(v[0], b[0])), l = Math.max(l, w[0]), r = Math.min(r, v[1]), o = Math.max(o, y[1])), [i, r, l, o, c, d];
}), L(St, "getElementAbsoluteCoords", (e, t, n = !1) => {
  let a, i, r, l, o;
  if (e.points.length < 2 || !mt.get(e)) {
    let { minX: u, minY: f, maxX: h, maxY: U } = e.points.reduce((m, [g, b]) => (m.minY = Math.min(m.minY, b), m.minX = Math.min(m.minX, g), m.maxX = Math.max(m.maxX, g), m.maxY = Math.max(m.maxY, b), m), { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 });
    i = u + e.x, r = f + e.y, l = h + e.x, o = U + e.y;
  } else {
    let u = mt.generateElementShape(e, null), f = xr(u[0]), [h, U, m, g] = Qu(f);
    i = h + e.x, r = U + e.y, l = m + e.x, o = g + e.y;
  }
  let c = (i + l) / 2, d = (r + o) / 2;
  if (a = [i, r, l, o, c, d], !n) return a;
  let s = ye(e, t);
  return s && (a = St.getMinMaxXYWithBoundText(e, t, [i, r, l, o], s)), a;
});
var ee = St, pP = (e) => {
  let t = [...new Set(e.filter((n) => n !== null && n !== -1))];
  return t = t.sort((n, a) => n - a), t.length ? t : null;
}, mo = {}, uu = (e, t) => {
  let n = mo[e] || (mo[e] = { height: t });
  return n.height = t, n;
}, k7 = (e) => {
  mo[e] && delete mo[e];
}, UP = (e) => {
  var t;
  return ((t = mo[e]) == null ? void 0 : t.height) ?? null;
}, Un = (e, t, n, a = !0) => {
  let i, r = { x: e.x, y: e.y, text: e.text, width: e.width, height: e.height, angle: (t == null ? void 0 : t.angle) ?? e.angle };
  r.text = e.text, (t || !e.autoResize) && (i = t ? Di(t, e) : e.width, r.text = yl(e.originalText, Je(e), i));
  let l = dn(r.text, Je(e), e.lineHeight);
  if (e.autoResize && (r.width = l.width), r.height = l.height, t) {
    let o = cf(t, e), c = Di(t, e);
    if (!xe(t) && l.height > o) {
      let f = fl(l.height, t.type);
      G(t, { height: f }, a), uu(t.id, f);
    }
    if (l.width > c) {
      let f = fl(l.width, t.type);
      G(t, { width: f }, a);
    }
    let d = { ...e, ...r }, { x: s, y: u } = sf(t, d, n);
    r.x = s, r.y = u;
  }
  G(e, r, a);
}, M7 = (e, t, n) => {
  let a = he(e);
  t.forEach((i) => {
    let r = n.get(i.id), l = Ai(i);
    if (l) {
      let o = n.get(l);
      if (o) {
        let c = a.get(r);
        c && G(c, { boundElements: (i.boundElements || []).filter((s) => s.id !== o && s.id !== l).concat({ type: "text", id: o }) });
        let d = a.get(o);
        d && J(d) && G(d, { containerId: c ? r : null });
      }
    }
  });
}, vc = (e, t, n, a = !1) => {
  if (!Ai(e)) return;
  k7(e.id);
  let i = ye(e, t);
  if (i && i.text) {
    if (!e) return;
    let r = i.text, l = i.height, o = i.width, c = Di(e, i), d = cf(e, i), s = e.height;
    if (a || n !== "n" && n !== "s") {
      r && (r = yl(i.originalText, Je(i), c));
      let u = dn(r, Je(i), i.lineHeight);
      l = u.height, o = u.width;
    }
    if (l > d) {
      s = fl(l, e.type);
      let u = s - e.height, f = !xe(e) && (n === "ne" || n === "nw" || n === "n") ? e.y - u : e.y;
      G(e, { height: s, y: f });
    }
    G(i, { text: r, width: o, height: l }), xe(e) || G(i, sf(e, i, t));
  }
}, sf = (e, t, n) => {
  if (xe(e)) return ee.getBoundTextElementPosition(e, t, n);
  let a = mP(e), i = cf(e, t), r = Di(e, t), l, o;
  return t.verticalAlign === Pn.TOP ? o = a.y : t.verticalAlign === Pn.BOTTOM ? o = a.y + (i - t.height) : o = a.y + (i / 2 - t.height / 2), t.textAlign === Hs.LEFT ? l = a.x : t.textAlign === Hs.RIGHT ? l = a.x + (r - t.width) : l = a.x + (r / 2 - t.width / 2), { x: l, y: o };
}, Ai = (e) => {
  var t, n, a;
  return ((t = e == null ? void 0 : e.boundElements) == null ? void 0 : t.length) && ((a = (n = e == null ? void 0 : e.boundElements) == null ? void 0 : n.find((i) => i.type === "text")) == null ? void 0 : a.id) || null;
}, ye = (e, t) => {
  if (!e) return null;
  let n = Ai(e);
  return n && t.get(n) || null;
}, Zt = (e, t) => e && e.containerId && t.get(e.containerId) || null, fh = (e, t, n) => {
  if (!xe(e)) return { x: e.x + e.width / 2, y: e.y + e.height / 2 };
  let a = ee.getPointsGlobalCoordinates(e, n);
  if (a.length % 2 === 1) {
    let l = Math.floor(e.points.length / 2), o = ee.getPointGlobalCoordinates(e, e.points[l], n);
    return { x: o[0], y: o[1] };
  }
  let i = e.points.length / 2 - 1, r = ee.getEditorMidPoints(e, n, t)[i];
  return r || (r = ee.getSegmentMidPoint(e, a[i], a[i + 1], i + 1, n)), { x: r[0], y: r[1] };
}, mP = (e) => {
  let t = Rt, n = Rt;
  return e.type === "ellipse" && (t += e.width / 2 * (1 - Math.sqrt(2) / 2), n += e.height / 2 * (1 - Math.sqrt(2) / 2)), e.type === "diamond" && (t += e.width / 4, n += e.height / 4), { x: e.x + t, y: e.y + n };
}, gP = (e, t) => !t || xe(t) ? e.angle : t.angle, bP = (e, t) => e.some((n) => {
  if (st(n)) {
    let a = Zt(n, t);
    return !xe(a);
  }
  return !1;
}), vP = (e, t) => e.some((n) => {
  if (st(n)) {
    let a = Zt(n, t);
    return !xe(a);
  }
  return J(n);
}), yP = /* @__PURE__ */ new Set(["rectangle", "ellipse", "diamond", "arrow"]), wP = (e) => yP.has(e.type), fl = (e, t) => {
  e = Math.ceil(e);
  let n = Rt * 2;
  return t === "ellipse" ? Math.round((e + n) / Math.sqrt(2) * 2) : t === "arrow" ? e + n * 8 : t === "diamond" ? 2 * (e + n) : e + n;
}, Di = (e, t) => {
  let { width: n } = e;
  if (xe(e)) {
    let a = ((t == null ? void 0 : t.fontSize) ?? Fi) * nM;
    return Math.max(tM * n, a);
  }
  return e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Rt * 2 : e.type === "diamond" ? Math.round(n / 2) - Rt * 2 : n - Rt * 2;
}, cf = (e, t) => {
  let { height: n } = e;
  return xe(e) ? n - Rt * 8 * 2 <= 0 ? t.height : n : e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Rt * 2 : e.type === "diamond" ? Math.round(n / 2) - Rt * 2 : n - Rt * 2;
}, EP = (e, t = `

`) => e.reduce((n, a) => (J(a) && n.push(a.text), n), []).join(t), Nn = (e) => (e = e.trim(), e && Lb(bd(e))), C7 = (e) => !!(e != null && e.includes(location.origin) || e != null && e.startsWith("/")), I7 = (e) => {
  if (e = Nn(e), e.startsWith("/")) return `${location.origin}${e}`;
  try {
    new URL(e);
  } catch {
    return "about:blank";
  }
  return e;
}, D1 = [], K = (e) => (D1 = D1.concat(e), e), T7 = '<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">', xP = '<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>', _7 = '<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>', SP = `data:${de.svg},${encodeURIComponent(`${T7}${_7}</svg>`)}`, kP = `data:${de.svg},${encodeURIComponent(`${T7}${xP}${_7}</svg>`)}`, sa = (e) => {
  e && (e.style.cursor = "");
}, qe = (e, t) => {
  e && (e.style.cursor = t);
}, Aa, Wm, A7 = (e, t) => {
  let n = () => {
    let a = t === Ie.DARK;
    Aa = document.createElement("canvas"), Aa.theme = t, Aa.height = 20, Aa.width = 20;
    let i = Aa.getContext("2d");
    i.lineWidth = 1, i.beginPath(), i.arc(Aa.width / 2, Aa.height / 2, 5, 0, 2 * Math.PI), i.fillStyle = a ? Yt.black : Yt.white, i.fill(), i.strokeStyle = a ? Yt.white : Yt.black, i.stroke(), Wm = Aa.toDataURL(de.svg);
  };
  (!Aa || Aa.theme !== t) && n(), qe(e, `url(${Wm}) ${20 / 2} ${20 / 2}, auto`);
}, Oa = (e, t) => {
  if (e) if (t.activeTool.type === "selection") sa(e);
  else if (ro(t)) e.style.cursor = Ye.GRAB;
  else if (Fa(t)) A7(e, t.theme);
  else if (t.activeTool.type === "laser") {
    let n = t.theme === Ie.LIGHT ? SP : kP;
    e.style.cursor = `url(${n}), auto`;
  } else ["image", "custom"].includes(t.activeTool.type) ? t.activeTool.type !== "image" && (e.style.cursor = Ye.AUTO) : e.style.cursor = Ye.CROSSHAIR;
}, MP = new xb(Date.now()), CP = 0, ni = () => Math.floor(MP.next() * 2 ** 31), na = () => Ii() ? `id${CP++}` : D0(), ka = (e, { x: t, y: n, strokeColor: a = bt.strokeColor, backgroundColor: i = bt.backgroundColor, fillStyle: r = bt.fillStyle, strokeWidth: l = bt.strokeWidth, strokeStyle: o = bt.strokeStyle, roughness: c = bt.roughness, opacity: d = bt.opacity, width: s = 0, height: u = 0, angle: f = 0, groupIds: h = [], frameId: U = null, index: m = null, roundness: g = null, boundElements: b = null, link: v = null, locked: y = bt.locked, ...w }) => ((t < -1e6 || t > 1e6 || n < -1e6 || n > 1e6 || s < -1e6 || s > 1e6 || u < -1e6 || u > 1e6) && console.error("New element size or position is too large", { x: t, y: n, width: s, height: u, points: w.points }), { id: w.id || na(), type: e, x: t, y: n, width: s, height: u, angle: f, strokeColor: a, backgroundColor: i, fillStyle: r, strokeWidth: l, strokeStyle: o, roughness: c, opacity: d, groupIds: h, frameId: U, index: m, roundness: g, seed: w.seed ?? ni(), version: w.version || 1, versionNonce: w.versionNonce ?? 0, isDeleted: !1, boundElements: b, updated: Io(), link: v, locked: y, customData: w.customData }), ai = (e) => ka(e.type, e), Vm = (e) => ka("embeddable", e), IP = (e) => ({ ...ka("iframe", e) }), up = (e) => ve({ ...ka("frame", e), type: "frame", name: (e == null ? void 0 : e.name) || null }, {}), L1 = (e) => ve({ ...ka("magicframe", e), type: "magicframe", name: (e == null ? void 0 : e.name) || null }, {}), D7 = (e, t) => ({ x: e.textAlign === "center" ? t.width / 2 : e.textAlign === "right" ? t.width : 0, y: e.verticalAlign === "middle" ? t.height / 2 : 0 }), $n = (e) => {
  let t = e.fontFamily || Er, n = e.fontSize || Fi, a = e.lineHeight || dl(t), i = co(e.text), r = dn(i, Je({ fontFamily: t, fontSize: n }), a), l = e.textAlign || fc, o = e.verticalAlign || Gd, c = D7({ textAlign: l, verticalAlign: o }, r), d = { ...ka("text", e), text: i, fontSize: n, fontFamily: t, textAlign: l, verticalAlign: o, x: e.x - c.x, y: e.y - c.y, width: r.width, height: r.height, containerId: e.containerId || null, originalText: e.originalText ?? i, autoResize: e.autoResize ?? !0, lineHeight: a };
  return ve(d, {});
}, TP = (e, t, n) => {
  let { width: a, height: i } = dn(n, Je(e), e.lineHeight);
  e.autoResize || (a = e.width);
  let { textAlign: r, verticalAlign: l } = e, o, c;
  if (r === "center" && l === Pn.MIDDLE && !e.containerId && e.autoResize) {
    let d = dn(e.text, Je(e), e.lineHeight), s = D7(e, { width: a - d.width, height: i - d.height });
    o = e.x - s.x, c = e.y - s.y;
  } else {
    let [d, s, u, f] = ge(e, t), [h, U, m, g] = ur(e, a, i, !1), b = (d - h) / 2, v = (s - U) / 2, y = (u - m) / 2, w = (f - g) / 2;
    [o, c] = _P({ s: !0, e: r === "center" || r === "left", w: r === "center" || r === "right" }, e.x, e.y, e.angle, b, v, y, w);
  }
  return { width: a, height: i, x: Number.isFinite(o) ? o : e.x, y: Number.isFinite(c) ? c : e.y };
}, _P = (e, t, n, a, i, r, l, o) => {
  let c = Math.cos(a), d = Math.sin(a);
  return e.e && e.w ? t += i + l : e.e ? (t += i * (1 + c), n += i * d, t += l * (1 - c), n += l * -d) : e.w && (t += i * (1 - c), n += i * -d, t += l * (1 + c), n += l * d), e.n && e.s ? n += r + o : e.n ? (t += r * d, n += r * (1 - c), t += o * -d, n += o * (1 + c)) : (t += r * -d, n += r * (1 + c), t += o * d, n += o * (1 - c)), [t, n];
}, L7 = (e, t, n, a = e.text) => {
  if (e.isDeleted) return;
  (t || !e.autoResize) && (a = yl(a, Je(e), t ? Di(t, e) : e.width));
  let i = TP(e, n, a);
  return { text: a, ...i };
}, AP = (e) => ({ ...ka(e.type, e), points: e.points || [], pressures: e.pressures || [], simulatePressure: e.simulatePressure, lastCommittedPoint: null }), qr = (e) => ({ ...ka(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: null, endArrowhead: null }), fp = (e) => e.elbowed ? { ...ka(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: e.startArrowhead || null, endArrowhead: e.endArrowhead || null, elbowed: !0, fixedSegments: e.fixedSegments || [], startIsSpecial: !1, endIsSpecial: !1 } : { ...ka(e.type, e), points: e.points || [], lastCommittedPoint: null, startBinding: null, endBinding: null, startArrowhead: e.startArrowhead || null, endArrowhead: e.endArrowhead || null, elbowed: !1 }, R7 = (e) => ({ ...ka("image", e), strokeColor: "transparent", status: e.status ?? "pending", fileId: e.fileId ?? null, scale: e.scale ?? [1, 1], crop: e.crop ?? null }), fu = (e, t = 0) => {
  if (e == null || typeof e != "object") return e;
  let n = Object.prototype.toString.call(e);
  if (n === "[object Object]") {
    let a = typeof e.constructor == "function" ? Object.create(Object.getPrototypeOf(e)) : {};
    for (let i in e) if (e.hasOwnProperty(i)) {
      if (t === 0 && (i === "shape" || i === "canvas")) continue;
      a[i] = fu(e[i], t + 1);
    }
    return a;
  }
  if (Array.isArray(e)) {
    let a = e.length, i = new Array(a);
    for (; a--; ) i[a] = fu(e[a], t + 1);
    return i;
  }
  return we.DEV && n !== "[object Object]" && n !== "[object Array]" && n.startsWith("[object ") && console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`), e;
}, wl = (e) => fu(e), P7 = (e, t) => {
  Object.defineProperty(e, rM, { value: t, writable: !1, enumerable: !1 });
}, hu = () => na(), N7 = (e, t, n, a) => {
  let i = wl(n);
  return Ii() && P7(i, n.id), i.id = hu(), i.boundElements = null, i.updated = Io(), i.seed = ni(), i.groupIds = eP(i.groupIds, e, (r) => (t.has(r) || t.set(r, hu()), t.get(r))), a && (i = Object.assign(i, a)), i;
}, O7 = (e, t) => {
  let n = [], a = he(e), i = /* @__PURE__ */ new Map(), r = (o) => {
    if (i.has(o)) return i.get(o);
    if (a.has(o)) {
      let c = hu();
      return i.set(o, c), c;
    }
    return null;
  }, l = /* @__PURE__ */ new Map();
  for (let o of e) {
    let c = fu(o);
    if (c.id = r(o.id), Ii() && P7(c, o.id), t != null && t.randomizeSeed && (c.seed = ni(), pf(c)), c.groupIds && (c.groupIds = c.groupIds.map((d) => (l.has(d) || l.set(d, hu()), l.get(d)))), "containerId" in c && c.containerId) {
      let d = r(c.containerId);
      c.containerId = d;
    }
    if ("boundElements" in c && c.boundElements && (c.boundElements = c.boundElements.reduce((d, s) => {
      let u = r(s.id);
      return u && d.push({ ...s, id: u }), d;
    }, [])), "endBinding" in c && c.endBinding) {
      let d = r(c.endBinding.elementId);
      c.endBinding = d ? { ...c.endBinding, elementId: d } : null;
    }
    if ("startBinding" in c && c.startBinding) {
      let d = r(c.startBinding.elementId);
      c.startBinding = d ? { ...c.startBinding, elementId: d } : null;
    }
    c.frameId && (c.frameId = r(c.frameId)), n.push(c);
  }
  return n;
}, hp = (e, { shouldThrow: t = !1, includeBoundTextValidation: n = !1, ignoreLogs: a, reconciliationContext: i }) => {
  let r = [], l = (c) => `${c == null ? void 0 : c.index}:${c == null ? void 0 : c.id}:${c == null ? void 0 : c.type}:${c == null ? void 0 : c.isDeleted}:${c == null ? void 0 : c.version}:${c == null ? void 0 : c.versionNonce}`, o = e.map((c) => c.index);
  for (let [c, d] of o.entries()) {
    let s = o[c - 1], u = o[c + 1];
    if (R1(d, s, u) || r.push(`Fractional indices invariant has been compromised: "${l(e[c - 1])}", "${l(e[c])}", "${l(e[c + 1])}"`), n && ta(e[c])) {
      let f = e[c], h = ye(f, he(e));
      h && h.index <= f.index && r.push(`Fractional indices invariant for bound elements has been compromised: "${l(h)}", "${l(f)}"`);
    }
  }
  if (r.length) {
    let c = new YI(), d = [];
    if (i && (d.push("Additional reconciliation context:"), d.push(i.localElements.map((s) => l(s))), d.push(i.remoteElements.map((s) => l(s)))), a || console.error(r.join(`

`), c.stack, e.map((s) => l(s)), ...d), t) throw c;
  }
}, DP = (e) => e.sort((t, n) => Gm(t) && Gm(n) ? t.index < n.index ? -1 : t.index > n.index ? 1 : t.id < n.id ? -1 : 1 : 1), ii = (e, t) => {
  try {
    let n = LP(e, t), a = $7(e, n), i = e.map((r) => a.has(r) ? { ...r, ...a.get(r) } : r);
    hp(i, { includeBoundTextValidation: !1, shouldThrow: !0, ignoreLogs: !0 });
    for (let [r, l] of a) G(r, l, !1);
  } catch {
    Li(e);
  }
  return e;
}, Li = (e) => {
  let t = RP(e), n = $7(e, t);
  for (let [a, i] of n) G(a, i, !1);
  return e;
}, LP = (e, t) => {
  let n = [], a = 0;
  for (; a < e.length; ) if (t.has(e[a].id)) {
    let i = [a - 1, a];
    for (; ++a < e.length && t.has(e[a].id); ) i.push(a);
    i.push(a), n.push(i);
  } else a++;
  return n;
}, RP = (e) => {
  let t = [], n, a, i = -1, r = 0, l = (d) => {
    var f;
    let s = e[i] ? e[i].index : void 0, u = (f = e[d - 1]) == null ? void 0 : f.index;
    return !s && u || s && u && u > s ? [u, d - 1] : [s, i];
  }, o = (d) => {
    var f;
    let s = e[r] ? e[r].index : void 0;
    if (s && d < r) return [s, r];
    let u = r;
    for (; ++u < e.length; ) {
      let h = (f = e[u]) == null ? void 0 : f.index;
      if (!s && h || s && h && h > s) return [h, u];
    }
    return [void 0, u];
  }, c = 0;
  for (; c < e.length; ) {
    let d = e[c].index;
    if ([n, i] = l(c), [a, r] = o(c), R1(d, n, a)) c++;
    else {
      let s = [i, c];
      for (; ++c < e.length; ) {
        let u = e[c].index, [f, h] = l(c), [U, m] = o(c);
        if (R1(u, f, U)) break;
        [n, i] = [f, h], [a, r] = [U, m], s.push(c);
      }
      s.push(r), t.push(s);
    }
  }
  return t;
}, R1 = (e, t, n) => e ? t && n ? t < e && e < n : !t && n ? e < n : t && !n ? t < e : !!e : !1, $7 = (e, t) => {
  var a, i;
  let n = /* @__PURE__ */ new Map();
  for (let r of t) {
    let l = r.shift(), o = r.pop(), c = h1((a = e[l]) == null ? void 0 : a.index, (i = e[o]) == null ? void 0 : i.index, r.length);
    for (let d = 0; d < r.length; d++) {
      let s = e[r[d]];
      n.set(s, { index: c[d] });
    }
  }
  return n;
}, Gm = (e) => !!e.index, Tt = class Ra {
  constructor(t, n) {
    this.deleted = t, this.inserted = n;
  }
  static create(t, n, a, i) {
    let r = a && i !== "inserted" ? a(t) : t, l = a && i !== "deleted" ? a(n) : n;
    return new Ra(r, l);
  }
  static calculate(t, n, a, i) {
    if (t === n) return Ra.empty();
    let r = {}, l = {};
    for (let d of this.distinctKeysIterator("full", t, n)) r[d] = t[d], l[d] = n[d];
    let [o, c] = i ? i(r, l) : [r, l];
    return Ra.create(o, c, a);
  }
  static empty() {
    return new Ra({}, {});
  }
  static isEmpty(t) {
    return !Object.keys(t.deleted).length && !Object.keys(t.inserted).length;
  }
  static mergeObjects(t, n, a) {
    let i = { ...t };
    for (let r of Object.keys(a)) delete i[r];
    return { ...i, ...n };
  }
  static mergeArrays(t, n, a, i) {
    return Object.values(Ra.mergeObjects(fi(t ?? [], i), fi(n ?? [], i), fi(a ?? [], i)));
  }
  static diffObjects(t, n, a, i) {
    if (!(!t[a] && !n[a]) && (typeof t[a] == "object" || typeof n[a] == "object")) {
      let r = t[a] ?? {}, l = n[a] ?? {}, o = Ra.getLeftDifferences(r, l).reduce((d, s) => (d[s] = i(r[s]), d), {}), c = Ra.getRightDifferences(r, l).reduce((d, s) => (d[s] = i(l[s]), d), {});
      Object.keys(o).length || Object.keys(c).length ? (Reflect.set(t, a, o), Reflect.set(n, a, c)) : (Reflect.deleteProperty(t, a), Reflect.deleteProperty(n, a));
    }
  }
  static diffArrays(t, n, a, i) {
    if (!(!t[a] && !n[a]) && (Array.isArray(t[a]) || Array.isArray(n[a]))) {
      let r = Array.isArray(t[a]) ? t[a] : [], l = Array.isArray(n[a]) ? n[a] : [], o = fi(Ra.getLeftDifferences(fi(r, i), fi(l, i))), c = fi(Ra.getRightDifferences(fi(r, i), fi(l, i)));
      if (Object.keys(o).length || Object.keys(c).length) {
        let d = r.filter((u) => o[i ? i(u) : String(u)]), s = l.filter((u) => c[i ? i(u) : String(u)]);
        Reflect.set(t, a, d), Reflect.set(n, a, s);
      } else Reflect.deleteProperty(t, a), Reflect.deleteProperty(n, a);
    }
  }
  static isLeftDifferent(t, n, a = !1) {
    return !!this.distinctKeysIterator("left", t, n, a).next().value;
  }
  static isRightDifferent(t, n, a = !1) {
    return !!this.distinctKeysIterator("right", t, n, a).next().value;
  }
  static getLeftDifferences(t, n, a = !1) {
    return Array.from(this.distinctKeysIterator("left", t, n, a));
  }
  static getRightDifferences(t, n, a = !1) {
    return Array.from(this.distinctKeysIterator("right", t, n, a));
  }
  static *distinctKeysIterator(t, n, a, i = !1) {
    if (n === a) return;
    let r = [];
    t === "left" ? r = Object.keys(n) : t === "right" ? r = Object.keys(a) : t === "full" ? r = Array.from(/* @__PURE__ */ new Set([...Object.keys(n), ...Object.keys(a)])) : ll(t, `Unknown distinctKeysIterator's join param "${t}"`, !0);
    for (let l of r) {
      let o = n[l], c = a[l];
      if (o !== c) {
        if (!i && typeof o == "object" && typeof c == "object" && o !== null && c !== null && en(o, c)) continue;
        yield l;
      }
    }
  }
}, jm = class En {
  constructor(t) {
    this.delta = t;
  }
  static calculate(t, n) {
    let a = Tt.calculate(t, n, void 0, En.postProcess);
    return new En(a);
  }
  static empty() {
    return new En(Tt.create({}, {}));
  }
  inverse() {
    let t = Tt.create(this.delta.inserted, this.delta.deleted);
    return new En(t);
  }
  applyTo(t, n) {
    try {
      let { selectedElementIds: a = {}, selectedGroupIds: i = {} } = this.delta.deleted, { selectedElementIds: r = {}, selectedGroupIds: l = {}, selectedLinearElementId: o, editingLinearElementId: c, ...d } = this.delta.inserted, s = Tt.mergeObjects(t.selectedElementIds, r, a), u = Tt.mergeObjects(t.selectedGroupIds, l, i), f = o && n.has(o) ? new ee(n.get(o)) : null, h = c && n.has(c) ? new ee(n.get(c)) : null, U = { ...t, ...d, selectedElementIds: s, selectedGroupIds: u, selectedLinearElement: typeof o < "u" ? f : t.selectedLinearElement, editingLinearElement: typeof c < "u" ? h : t.editingLinearElement }, m = this.filterInvisibleChanges(t, U, n);
      return [U, m];
    } catch (a) {
      if (console.error("Couldn't apply appstate change", a), we.DEV || we.MODE === Cn.TEST) throw a;
      return [t, !1];
    }
  }
  isEmpty() {
    return Tt.isEmpty(this.delta);
  }
  static postProcess(t, n) {
    try {
      Tt.diffObjects(t, n, "selectedElementIds", (a) => !0), Tt.diffObjects(t, n, "selectedGroupIds", (a) => a ?? !1);
    } catch (a) {
      if (console.error("Couldn't postprocess appstate change deltas."), we.DEV || we.MODE === Cn.TEST) throw a;
    } finally {
      return [t, n];
    }
  }
  filterInvisibleChanges(t, n, a) {
    let i = pu(t), r = pu(n), l = Tt.isRightDifferent(En.stripElementsProps(i), En.stripElementsProps(r)), o = Tt.isRightDifferent(En.stripStandaloneProps(i), En.stripStandaloneProps(r));
    if (!l && !o) return !1;
    let c = { value: l };
    if (o) {
      let d = Tt.getRightDifferences(En.stripStandaloneProps(i), En.stripStandaloneProps(r)), s = /* @__PURE__ */ new Set();
      (d.includes("editingGroupId") || d.includes("selectedGroupIds")) && (s = aP(a));
      for (let u of d) switch (u) {
        case "selectedElementIds":
          n[u] = En.filterSelectedElements(n[u], a, c);
          break;
        case "selectedGroupIds":
          n[u] = En.filterSelectedGroups(n[u], s, c);
          break;
        case "croppingElementId": {
          let m = n[u], g = m && a.get(m);
          g && !g.isDeleted ? c.value = !0 : n[u] = null;
          break;
        }
        case "editingGroupId":
          let f = n[u];
          f ? s.has(f) ? c.value = !0 : n[u] = null : c.value = !0;
          break;
        case "selectedLinearElementId":
        case "editingLinearElementId":
          let h = En.convertToAppStateKey(u), U = n[h];
          if (!U) c.value = !0;
          else {
            let m = a.get(U.elementId);
            m && !m.isDeleted ? c.value = !0 : n[h] = null;
          }
          break;
        default:
          ll(u, `Unknown ObservedElementsAppState's key "${u}"`, !0);
      }
    }
    return c.value;
  }
  static convertToAppStateKey(t) {
    switch (t) {
      case "selectedLinearElementId":
        return "selectedLinearElement";
      case "editingLinearElementId":
        return "editingLinearElement";
    }
  }
  static filterSelectedElements(t, n, a) {
    let i = Object.keys(t);
    if (!i.length) return a.value = !0, t;
    let r = { ...t };
    for (let l of i) {
      let o = n.get(l);
      o && !o.isDeleted ? a.value = !0 : delete r[l];
    }
    return r;
  }
  static filterSelectedGroups(t, n, a) {
    if (!Object.keys(t).length) return a.value = !0, t;
    let i = { ...t };
    for (let r of Object.keys(i)) n.has(r) ? a.value = !0 : delete i[r];
    return i;
  }
  static stripElementsProps(t) {
    let { editingGroupId: n, selectedGroupIds: a, selectedElementIds: i, editingLinearElementId: r, selectedLinearElementId: l, croppingElementId: o, ...c } = t;
    return c;
  }
  static stripStandaloneProps(t) {
    let { name: n, viewBackgroundColor: a, ...i } = t;
    return i;
  }
}, Ji = class ft {
  constructor(t, n, a) {
    this.added = t, this.removed = n, this.updated = a;
  }
  static create(t, n, a, i = { shouldRedistribute: !1 }) {
    let r;
    if (i.shouldRedistribute) {
      let l = /* @__PURE__ */ new Map(), o = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map(), d = [...t, ...n, ...a];
      for (let [s, u] of d) this.satisfiesAddition(u) ? l.set(s, u) : this.satisfiesRemoval(u) ? o.set(s, u) : c.set(s, u);
      r = new ft(l, o, c);
    } else r = new ft(t, n, a);
    return (we.DEV || we.MODE === Cn.TEST) && (ft.validate(r, "added", this.satisfiesAddition), ft.validate(r, "removed", this.satisfiesRemoval), ft.validate(r, "updated", this.satisfiesUpdate)), r;
  }
  static validate(t, n, a) {
    for (let [i, r] of t[n].entries()) if (!a(r)) throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`, r), new Error(`ElementsChange invariant broken for element "${i}".`);
  }
  static calculate(t, n) {
    if (t === n) return ft.empty();
    let a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map();
    for (let l of t.values()) if (!n.get(l.id)) {
      let o = { ...l, isDeleted: !1 }, c = { isDeleted: !0 }, d = Tt.create(o, c, ft.stripIrrelevantProps);
      i.set(l.id, d);
    }
    for (let l of n.values()) {
      let o = t.get(l.id);
      if (!o) {
        let c = { isDeleted: !0 }, d = { ...l, isDeleted: !1 }, s = Tt.create(c, d, ft.stripIrrelevantProps);
        a.set(l.id, s);
        continue;
      }
      if (o.versionNonce !== l.versionNonce) {
        let c = Tt.calculate(o, l, ft.stripIrrelevantProps, ft.postProcess);
        if (typeof o.isDeleted == "boolean" && typeof l.isDeleted == "boolean" && o.isDeleted !== l.isDeleted) {
          o.isDeleted && !l.isDeleted ? a.set(l.id, c) : i.set(l.id, c);
          continue;
        }
        Tt.isEmpty(c) || r.set(l.id, c);
      }
    }
    return ft.create(a, i, r);
  }
  static empty() {
    return ft.create(/* @__PURE__ */ new Map(), /* @__PURE__ */ new Map(), /* @__PURE__ */ new Map());
  }
  inverse() {
    let t = (r) => {
      let l = /* @__PURE__ */ new Map();
      for (let [o, c] of r.entries()) l.set(o, Tt.create(c.inserted, c.deleted));
      return l;
    }, n = t(this.added), a = t(this.removed), i = t(this.updated);
    return ft.create(a, n, i);
  }
  isEmpty() {
    return this.added.size === 0 && this.removed.size === 0 && this.updated.size === 0;
  }
  applyLatestChanges(t) {
    let n = (o) => (c) => {
      let d = {};
      for (let s of Object.keys(c)) switch (s) {
        case "boundElements":
          d[s] = c[s];
          break;
        default:
          d[s] = o[s];
      }
      return d;
    }, a = (o) => {
      let c = /* @__PURE__ */ new Map();
      for (let [d, s] of o.entries()) {
        let u = t.get(d);
        if (u) {
          let f = Tt.create(s.deleted, s.inserted, n(u), "inserted");
          c.set(d, f);
        } else c.set(d, s);
      }
      return c;
    }, i = a(this.added), r = a(this.removed), l = a(this.updated);
    return ft.create(i, r, l, { shouldRedistribute: !0 });
  }
  applyTo(t, n) {
    let a = Qn(new Map(t)), i, r = { containsVisibleDifference: !1, containsZindexDifference: !1 };
    try {
      let l = ft.createApplier(a, n, r), o = l(this.added), c = l(this.removed), d = l(this.updated), s = this.resolveConflicts(t, a);
      i = new Map([...o, ...c, ...d, ...s]);
    } catch (l) {
      if (console.error("Couldn't apply elements change", l), we.DEV || we.MODE === Cn.TEST) throw l;
      return [t, !0];
    }
    try {
      ft.redrawTextBoundingBoxes(a, i), a = ft.reorderElements(a, i, r), ft.redrawBoundArrows(a, i);
    } catch (l) {
      if (console.error("Couldn't mutate elements after applying elements change", l), we.DEV || we.MODE === Cn.TEST) throw l;
    } finally {
      return [a, r.containsVisibleDifference];
    }
  }
  static applyDelta(t, n, a = { containsVisibleDifference: !0, containsZindexDifference: !0 }) {
    var l, o;
    let { boundElements: i, ...r } = n.inserted;
    if ((l = n.deleted.boundElements) != null && l.length || (o = n.inserted.boundElements) != null && o.length) {
      let c = Tt.mergeArrays(t.boundElements, n.inserted.boundElements, n.deleted.boundElements, (d) => d.id);
      Object.assign(r, { boundElements: c });
    }
    if (Oe(t)) {
      let c = n;
      (c.deleted.crop || c.inserted.crop) && Object.assign(r, { crop: c.inserted.crop ?? null });
    }
    if (!a.containsVisibleDifference) {
      let { index: c, ...d } = r, s = ft.checkForVisibleDifference(t, d);
      a.containsVisibleDifference = s;
    }
    return a.containsZindexDifference || (a.containsZindexDifference = n.deleted.index !== n.inserted.index), ve(t, r);
  }
  static checkForVisibleDifference(t, n) {
    return t.isDeleted && n.isDeleted !== !1 ? !1 : t.isDeleted && n.isDeleted === !1 || t.isDeleted === !1 && n.isDeleted ? !0 : Tt.isRightDifferent(t, n);
  }
  resolveConflicts(t, n) {
    let a = /* @__PURE__ */ new Map(), i = (d, s) => {
      let u = n.get(d.id);
      if (!u) return;
      let f;
      t.get(d.id) === u ? f = ve(u, s) : f = G(u, s), a.set(f.id, f), n.set(f.id, f);
    };
    for (let [d] of this.removed) ft.unbindAffected(t, n, d, i);
    for (let [d] of this.added) ft.rebindAffected(t, n, d, i);
    for (let [d] of Array.from(this.updated).filter(([s, u]) => Object.keys({ ...u.deleted, ...u.inserted }).find((f) => jR.has(f)))) {
      let s = n.get(d);
      !s || s.isDeleted || ft.rebindAffected(t, n, d, i);
    }
    let r = new Map(Array.from(t).filter(([d]) => a.has(d))), { added: l, removed: o, updated: c } = ft.calculate(r, a);
    for (let [d, s] of l) this.added.set(d, s);
    for (let [d, s] of o) this.removed.set(d, s);
    for (let [d, s] of c) this.updated.set(d, s);
    return a;
  }
  static unbindAffected(t, n, a, i) {
    let r = () => t.get(a), l = () => n.get(a);
    Wl.unbindAffected(n, r(), i), Wl.unbindAffected(n, l(), i), Vl.unbindAffected(n, r(), i), Vl.unbindAffected(n, l(), i);
  }
  static rebindAffected(t, n, a, i) {
    let r = () => t.get(a), l = () => n.get(a);
    Wl.unbindAffected(n, r(), i), Wl.rebindAffected(n, l(), i), Vl.unbindAffected(n, r(), (o, c) => {
      J(o) && i(o, c);
    }), Vl.rebindAffected(n, l(), i);
  }
  static redrawTextBoundingBoxes(t, n) {
    let a = /* @__PURE__ */ new Map();
    for (let i of n.values()) {
      if (st(i)) {
        let { containerId: r } = i, l = r ? t.get(r) : void 0;
        l && a.set(l.id, { container: l, boundText: i });
      }
      if (ta(i)) {
        let r = Ai(i), l = r ? t.get(r) : void 0;
        l && a.set(i.id, { container: i, boundText: l });
      }
    }
    for (let { container: i, boundText: r } of a.values()) i.isDeleted || r.isDeleted || Un(r, i, t, !1);
  }
  static redrawBoundArrows(t, n) {
    for (let a of n.values()) !a.isDeleted && xa(a) && In(a, t, {});
  }
  static reorderElements(t, n, a) {
    if (!a.containsZindexDifference) return t;
    let i = Array.from(t.values()), r = DP([...i]), l = Tt.getRightDifferences(i, r, !0).reduce((o, c) => {
      let d = i[Number(c)];
      return d && n.has(d.id) && o.set(d.id, d), o;
    }, /* @__PURE__ */ new Map());
    return !a.containsVisibleDifference && l.size && (a.containsVisibleDifference = !0), he(ii(r, l));
  }
  static postProcess(t, n) {
    try {
      Tt.diffArrays(t, n, "boundElements", (a) => a.id);
    } catch (a) {
      if (console.error("Couldn't postprocess elements change deltas."), we.DEV || we.MODE === Cn.TEST) throw a;
    } finally {
      return [t, n];
    }
  }
  static stripIrrelevantProps(t) {
    let { id: n, updated: a, version: i, versionNonce: r, seed: l, ...o } = t;
    return o;
  }
};
L(Ji, "satisfiesAddition", ({ deleted: e, inserted: t }) => e.isDeleted === !0 && !t.isDeleted), L(Ji, "satisfiesRemoval", ({ deleted: e, inserted: t }) => !e.isDeleted && t.isDeleted === !0), L(Ji, "satisfiesUpdate", ({ deleted: e, inserted: t }) => !!e.isDeleted == !!t.isDeleted), L(Ji, "createApplier", (e, t, n) => {
  let a = Ji.createGetter(e, t, n);
  return (i) => Array.from(i.entries()).reduce((r, [l, o]) => {
    let c = a(l, o.inserted);
    if (c) {
      let d = Ji.applyDelta(c, o, n);
      e.set(d.id, d), r.set(d.id, d);
    }
    return r;
  }, /* @__PURE__ */ new Map());
}), L(Ji, "createGetter", (e, t, n) => (a, i) => {
  let r = e.get(a);
  return r || (r = t.get(a), r && (n.containsZindexDifference = !0, (i.isDeleted === !1 || i.isDeleted !== !0 && r.isDeleted === !1) && (n.containsVisibleDifference = !0))), r;
});
var Ym = Ji, Ba = class {
  constructor() {
    L(this, "subscribers", []);
  }
  on(...e) {
    let t = e.flat().filter((n) => typeof n == "function");
    return this.subscribers.push(...t), () => this.off(t);
  }
  once(...e) {
    let t = e.flat().filter((a) => typeof a == "function");
    t.push(() => n());
    let n = this.on(...t);
    return n;
  }
  off(...e) {
    let t = e.flat();
    this.subscribers = this.subscribers.filter((n) => !t.includes(n));
  }
  trigger(...e) {
    for (let t of this.subscribers) t(...e);
    return this;
  }
  clear() {
    this.subscribers = [];
  }
}, z7 = "__observedAppState", pu = (e) => {
  var n, a;
  let t = { name: e.name, editingGroupId: e.editingGroupId, viewBackgroundColor: e.viewBackgroundColor, selectedElementIds: e.selectedElementIds, selectedGroupIds: e.selectedGroupIds, editingLinearElementId: ((n = e.editingLinearElement) == null ? void 0 : n.elementId) || null, selectedLinearElementId: ((a = e.selectedLinearElement) == null ? void 0 : a.elementId) || null, croppingElementId: e.croppingElementId };
  return Reflect.defineProperty(t, z7, { value: !0, enumerable: !1 }), t;
}, PP = (e) => !!Reflect.get(e, z7), W = { IMMEDIATELY: "IMMEDIATELY", NEVER: "NEVER", EVENTUALLY: "EVENTUALLY" }, NP = class {
  constructor(e, t) {
    this.elementsChange = e, this.appStateChange = t;
  }
}, OP = class {
  constructor() {
    L(this, "onStoreIncrementEmitter", new Ba()), L(this, "scheduledActions", /* @__PURE__ */ new Set()), L(this, "_snapshot", Zm.empty()), L(this, "shouldCaptureIncrement", () => {
      this.scheduleAction(W.IMMEDIATELY);
    }), L(this, "shouldUpdateSnapshot", () => {
      this.scheduleAction(W.NEVER);
    }), L(this, "scheduleAction", (e) => {
      this.scheduledActions.add(e), this.satisfiesScheduledActionsInvariant();
    }), L(this, "commit", (e, t) => {
      try {
        this.scheduledActions.has(W.IMMEDIATELY) ? this.captureIncrement(e, t) : this.scheduledActions.has(W.NEVER) && this.updateSnapshot(e, t);
      } finally {
        this.satisfiesScheduledActionsInvariant(), this.scheduledActions = /* @__PURE__ */ new Set();
      }
    }), L(this, "captureIncrement", (e, t) => {
      let n = this.snapshot, a = this.snapshot.maybeClone(e, t);
      if (n !== a) {
        let i = a.meta.didElementsChange ? Ym.calculate(n.elements, a.elements) : Ym.empty(), r = a.meta.didAppStateChange ? jm.calculate(n.appState, a.appState) : jm.empty();
        (!i.isEmpty() || !r.isEmpty()) && this.onStoreIncrementEmitter.trigger(new NP(i, r)), this.snapshot = a;
      }
    }), L(this, "updateSnapshot", (e, t) => {
      let n = this.snapshot.maybeClone(e, t);
      this.snapshot !== n && (this.snapshot = n);
    }), L(this, "filterUncomittedElements", (e, t) => {
      for (let [n, a] of e.entries()) {
        if (!t.get(n)) continue;
        let i = this.snapshot.elements.get(n);
        i ? i.version < a.version && t.set(n, i) : t.delete(n);
      }
      return t;
    }), L(this, "clear", () => {
      this.snapshot = Zm.empty(), this.scheduledActions = /* @__PURE__ */ new Set();
    }), L(this, "satisfiesScheduledActionsInvariant", () => {
      if (!(this.scheduledActions.size >= 0 && this.scheduledActions.size <= 3)) {
        let e = `There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;
        if (console.error(e, this.scheduledActions.values()), we.DEV || we.MODE === Cn.TEST) throw new Error(e);
      }
    });
  }
  get snapshot() {
    return this._snapshot;
  }
  set snapshot(e) {
    this._snapshot = e;
  }
}, Zm = class P1 {
  constructor(t, n, a = { didElementsChange: !1, didAppStateChange: !1, isEmpty: !1 }) {
    this.elements = t, this.appState = n, this.meta = a;
  }
  static empty() {
    return new P1(/* @__PURE__ */ new Map(), pu(ei()), { didElementsChange: !1, didAppStateChange: !1, isEmpty: !0 });
  }
  isEmpty() {
    return this.meta.isEmpty;
  }
  maybeClone(t, n) {
    let a = this.maybeCreateElementsSnapshot(t), i = this.maybeCreateAppStateSnapshot(n), r = !1, l = !1;
    return this.elements !== a && (r = !0), this.appState !== i && (l = !0), !r && !l ? this : new P1(a, i, { didElementsChange: r, didAppStateChange: l });
  }
  maybeCreateAppStateSnapshot(t) {
    if (!t) return this.appState;
    let n = PP(t) ? t : pu(t);
    return this.detectChangedAppState(n) ? n : this.appState;
  }
  detectChangedAppState(t) {
    return !en(this.appState, t, { selectedElementIds: en, selectedGroupIds: en });
  }
  maybeCreateElementsSnapshot(t) {
    return t ? this.detectChangedElements(t) ? this.createElementsSnapshot(t) : this.elements : this.elements;
  }
  detectChangedElements(t) {
    if (this.elements === t) return !1;
    if (this.elements.size !== t.size) return !0;
    let n = Array.from(t.keys());
    for (let a = n.length - 1; a >= 0; a--) {
      let i = this.elements.get(n[a]), r = t.get(n[a]);
      if (!i || !r || i.id !== r.id || i.versionNonce !== r.versionNonce) return !0;
    }
    return !1;
  }
  createElementsSnapshot(t) {
    let n = /* @__PURE__ */ new Map();
    for (let [a, i] of this.elements.entries()) t.get(a) ? n.set(a, i) : n.set(a, ve(i, { isDeleted: !0 }));
    for (let [a, i] of t.entries()) {
      let r = n.get(a);
      (!r || r && r.versionNonce !== i.versionNonce) && n.set(a, wl(i));
    }
    return n;
  }
}, Da = /* @__PURE__ */ new Map(), $P = /^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/, zP = /^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/, FP = /^https:\/\/(?:www\.)?figma\.com/, Km = /^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/, BP = /^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i, qm = /(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/, HP = /^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i, XP = /^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/, WP = /^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i, Jm = /giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/, Qm = /^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/, VP = /^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i, N1 = /* @__PURE__ */ new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "link.excalidraw.com", "gist.github.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com", "val.town", "giphy.com", "reddit.com"]), eg = /* @__PURE__ */ new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com", "reddit.com"]), Es = (e) => `<html><body>${e}</body></html>`, Gl = (e) => {
  if (!e) return null;
  if (Da.has(e)) return Da.get(e);
  let t = e, n = eg.has(O1(e, eg) || ""), a = "generic", i = { w: 560, h: 840 }, r = e.match($P);
  if (r != null && r[2]) {
    let c = r[3] ? `&start=${r[3]}` : "", d = e.includes("shorts");
    switch (a = "video", r[1]) {
      case "embed/":
      case "watch?v=":
      case "shorts/":
        e = `https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;
        break;
      case "playlist?list=":
      case "embed/videoseries?list=":
        e = `https://www.youtube.com/embed/videoseries?list=${r[2]}&enablejsapi=1${c}`;
        break;
      default:
        e = `https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;
        break;
    }
    return i = d ? { w: 315, h: 560 } : { w: 560, h: 315 }, Da.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  }
  let l = e.match(zP);
  if (l != null && l[1]) {
    let c = l == null ? void 0 : l[1], d = /^\d+$/.test(c) ? void 0 : new URIError("Invalid embed link format");
    return a = "video", e = `https://player.vimeo.com/video/${c}?api=1`, i = { w: 560, h: 315 }, Da.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, error: d, sandbox: { allowSameOrigin: n } };
  }
  if (e.match(FP)) return a = "generic", e = `https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`, i = { w: 550, h: 550 }, Da.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  let o = e.match(XP);
  if (o) return e = o[1] === "embed" ? o[0] : o[0].replace("/v", "/embed"), Da.set(t, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
  if (qm.test(e)) {
    let c = e.match(qm)[1], d = bd(`https://twitter.com/x/status/${c}`), s = { type: "document", srcdoc: (u) => Es(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${u}"><a href="${d}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`), intrinsicSize: { w: 480, h: 480 }, sandbox: { allowSameOrigin: n } };
    return Da.set(t, s), s;
  }
  if (Qm.test(e)) {
    let [, c, d, s] = e.match(Qm), u = bd(`https://reddit.com/r/${c}/comments/${d}/${s}`), f = { type: "document", srcdoc: (h) => Es(`<blockquote class="reddit-embed-bq" data-embed-theme="${h}"><a href="${u}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`), intrinsicSize: { w: 480, h: 480 }, sandbox: { allowSameOrigin: n } };
    return Da.set(t, f), f;
  }
  if (Km.test(e)) {
    let [, c, d] = e.match(Km), s = bd(`https://gist.github.com/${c}/${d}`), u = { type: "document", srcdoc: () => Es(`
          <script src="${s}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `), intrinsicSize: { w: 550, h: 720 }, sandbox: { allowSameOrigin: n } };
    return Da.set(e, u), u;
  }
  return Da.set(e, { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } }), { link: e, intrinsicSize: i, type: a, sandbox: { allowSameOrigin: n } };
}, F7 = (e) => {
  let t;
  er(e) ? t = "IFrame element" : t = !e.link || (e == null ? void 0 : e.link) === "" ? "Empty Web-Embed" : e.link;
  let n = Math.max(Math.min(e.width / 2, e.width / t.length), e.width / 30), a = ht.Helvetica, i = Je({ fontSize: n, fontFamily: a });
  return $n({ x: e.x + e.width / 2, y: e.y + e.height / 2, strokeColor: e.strokeColor !== "transparent" ? e.strokeColor : "black", backgroundColor: "transparent", fontFamily: a, fontSize: n, text: yl(t, i, e.width - 20), textAlign: "center", verticalAlign: Pn.MIDDLE, angle: e.angle ?? 0 });
};
K({ name: "setEmbeddableAsActiveTool", trackEvent: { category: "toolbar" }, target: "Tool", label: "toolBar.embeddable", perform: (e, t, n, a) => {
  let i = _t(t, { type: "embeddable" });
  return Oa(a.canvas, { ...t, activeTool: i }), { elements: e, appState: { ...t, activeTool: _t(t, { type: "embeddable" }) }, captureUpdate: W.EVENTUALLY };
} });
var O1 = (e, t) => {
  try {
    let { hostname: n } = new URL(e), a = n.replace(/^www\./, "");
    if (t instanceof Set) {
      if (N1.has(a)) return a;
      let r = a.replace(/^([^.]+)/, "*");
      return N1.has(r) ? r : null;
    }
    let i = t.replace(/^www\./, "");
    if (a === i) return i;
  } catch {
  }
  return null;
}, GP = (e) => {
  let t = e.match(HP);
  if (t && t.length === 2) return t[1];
  let n = e.match(VP);
  if (n && n.length === 2) return n[1];
  let a = e.match(BP);
  if (a && a.length === 2) return a[1];
  if (Jm.test(e)) return `https://giphy.com/embed/${Jm.exec(e)[1]}`;
  let i = e.match(WP);
  return i && i.length === 2 ? i[1] : e;
}, kd = (e, t) => {
  if (!e) return !1;
  if (t != null) if (typeof t == "function") {
    let n = t(e);
    if (typeof n == "boolean") return n;
  } else {
    if (typeof t == "boolean") return t;
    if (t instanceof RegExp) return t.test(e);
    if (Array.isArray(t)) {
      for (let n of t) if (n instanceof RegExp) {
        if (e.match(n)) return !0;
      } else if (O1(e, n)) return !0;
      return !1;
    }
  }
  return !!O1(e, N1);
}, Go = (e, t, n) => {
  let a = { sets: t.sets, shape: t.shape, options: { ...t.options, fixedDecimalPlaceDigits: n } };
  return e.draw(a);
}, jo = (e, t, n, a, i) => {
  if (!a.enabled || !a.clip) return null;
  let r = Tn(e, i);
  if (r) {
    let l = t.ownerDocument.createElementNS(Re, "g");
    return l.setAttributeNS(Re, "clip-path", `url(#${r.id})`), n.forEach((o) => l.appendChild(o)), l;
  }
  return null;
}, Md = (e, t, n, a, i, r, l, o) => {
  var y;
  let c = { x: r, y: l }, [d, s, u, f] = ge(e, t), h = (u - d) / 2 - (e.x - d), U = (f - s) / 2 - (e.y - s);
  if (J(e)) {
    let w = Zt(e, t);
    if (xe(w)) {
      let [x, S, E, M] = ge(w, t), I = ee.getBoundTextElementPosition(w, e, t);
      h = (E - x) / 2 - (I.x - x), U = (M - S) / 2 - (I.y - S), r = r + I.x - e.x, l = l + I.y - e.y;
    }
  }
  let m = 180 * e.angle / Math.PI, g = a;
  if (e.link) {
    let w = a.ownerDocument.createElementNS(Re, "a");
    w.setAttribute("href", Nn(e.link)), g.appendChild(w), g = w;
  }
  let b = (w, x) => {
    Ii() && w.setAttribute("data-id", x.id), g.appendChild(w);
  }, v = (((y = Tn(e, t)) == null ? void 0 : y.opacity) ?? 100) * e.opacity / 1e4;
  switch (e.type) {
    case "selection":
      throw new Error("Selection rendering is not supported for SVG");
    case "rectangle":
    case "diamond":
    case "ellipse": {
      let w = mt.generateElementShape(e, null), x = Go(n, w, Xo);
      v !== 1 && (x.setAttribute("stroke-opacity", `${v}`), x.setAttribute("fill-opacity", `${v}`)), x.setAttribute("stroke-linecap", "round"), x.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`);
      let S = jo(e, g, [x], o.frameRendering, t);
      b(S || x, e);
      break;
    }
    case "iframe":
    case "embeddable": {
      let w = mt.generateElementShape(e, o), x = Go(n, w, Xo), S = e.opacity / 100;
      S !== 1 && (x.setAttribute("stroke-opacity", `${S}`), x.setAttribute("fill-opacity", `${S}`)), x.setAttribute("stroke-linecap", "round"), x.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`), b(x, e);
      let E = F7(e);
      Md(E, t, n, g, i, E.x + c.x - e.x, E.y + c.y - e.y, o);
      let M = Go(n, w, Xo);
      for (M.setAttribute("stroke-linecap", "round"), M.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`); M.firstChild; ) M.removeChild(M.firstChild);
      let I = va(Math.min(e.width, e.height), e), T = Gl(I7(e.link || ""));
      if (o.renderEmbeddables === !1 || (T == null ? void 0 : T.type) === "document") {
        let A = a.ownerDocument.createElementNS(Re, "a");
        A.setAttribute("href", Nn(e.link || "")), A.setAttribute("target", "_blank"), A.setAttribute("rel", "noopener noreferrer"), A.style.borderRadius = `${I}px`, M.appendChild(A);
      } else {
        let A = a.ownerDocument.createElementNS(Re, "foreignObject");
        A.style.width = `${e.width}px`, A.style.height = `${e.height}px`, A.style.border = "none";
        let D = A.ownerDocument.createElementNS(Re, "div");
        D.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"), D.style.width = "100%", D.style.height = "100%";
        let R = D.ownerDocument.createElement("iframe");
        R.src = (T == null ? void 0 : T.link) ?? "", R.style.width = "100%", R.style.height = "100%", R.style.border = "none", R.style.borderRadius = `${I}px`, R.style.top = "0", R.style.left = "0", R.allowFullscreen = !0, D.appendChild(R), A.appendChild(D), M.appendChild(A);
      }
      b(M, e);
      break;
    }
    case "line":
    case "arrow": {
      let w = ye(e, t), x = a.ownerDocument.createElementNS(Re, "mask");
      if (w) {
        x.setAttribute("id", `mask-${e.id}`);
        let M = a.ownerDocument.createElementNS(Re, "rect");
        r = r || 0, l = l || 0, M.setAttribute("x", "0"), M.setAttribute("y", "0"), M.setAttribute("fill", "#fff"), M.setAttribute("width", `${e.width + 100 + r}`), M.setAttribute("height", `${e.height + 100 + l}`), x.appendChild(M);
        let I = a.ownerDocument.createElementNS(Re, "rect"), T = ee.getBoundTextElementPosition(e, w, t), A = r + T.x - e.x, D = l + T.y - e.y;
        I.setAttribute("x", A.toString()), I.setAttribute("y", D.toString()), I.setAttribute("fill", "#000"), I.setAttribute("width", `${w.width}`), I.setAttribute("height", `${w.height}`), I.setAttribute("opacity", "1"), x.appendChild(I);
      }
      let S = a.ownerDocument.createElementNS(Re, "g");
      w && S.setAttribute("mask", `url(#mask-${e.id})`), S.setAttribute("stroke-linecap", "round"), mt.generateElementShape(e, o).forEach((M) => {
        let I = Go(n, M, Xo);
        v !== 1 && (I.setAttribute("stroke-opacity", `${v}`), I.setAttribute("fill-opacity", `${v}`)), I.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`), e.type === "line" && Ti(e.points) && e.backgroundColor !== "transparent" && I.setAttribute("fill-rule", "evenodd"), S.appendChild(I);
      });
      let E = jo(e, g, [S, x], o.frameRendering, t);
      E ? (b(E, e), g.appendChild(E)) : (b(S, e), g.append(x));
      break;
    }
    case "freedraw": {
      let w = mt.generateElementShape(e, o), x = w ? Go(n, w, Xo) : a.ownerDocument.createElementNS(Re, "g");
      v !== 1 && (x.setAttribute("stroke-opacity", `${v}`), x.setAttribute("fill-opacity", `${v}`)), x.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`), x.setAttribute("stroke", "none");
      let S = a.ownerDocument.createElementNS(Re, "path");
      S.setAttribute("fill", e.strokeColor), S.setAttribute("d", i7(e)), x.appendChild(S);
      let E = jo(e, g, [x], o.frameRendering, t);
      b(E || x, e);
      break;
    }
    case "image": {
      let w = Math.round(e.width), x = Math.round(e.height), S = Vn(e) && i[e.fileId];
      if (S) {
        let { reuseImages: E = !0 } = o, M = `image-${S.id}`, I = e.width, T = e.height;
        e.crop && ({ width: I, height: T } = _i(e), M = `image-crop-${S.id}-${EO(`${I}x${T}`)}`), E || (M = `image-${e.id}`);
        let A = a.querySelector(`#${M}`);
        if (!A) {
          A = a.ownerDocument.createElementNS(Re, "symbol"), A.id = M;
          let z = a.ownerDocument.createElementNS(Re, "image");
          z.setAttribute("href", S.dataURL), z.setAttribute("preserveAspectRatio", "none"), e.crop || !E ? (z.setAttribute("width", `${I}`), z.setAttribute("height", `${T}`)) : (z.setAttribute("width", "100%"), z.setAttribute("height", "100%")), A.appendChild(z), (g.querySelector("defs") || g).prepend(A);
        }
        let D = a.ownerDocument.createElementNS(Re, "use");
        D.setAttribute("href", `#${M}`), o.exportWithDarkMode && S.mimeType !== de.svg && D.setAttribute("filter", K8);
        let R = 0, O = 0;
        if (e.crop) {
          let { width: z, height: Y } = _i(e);
          R = e.crop.x / (e.crop.naturalWidth / z), O = e.crop.y / (e.crop.naturalHeight / Y);
        }
        let $ = h + R, F = U + O;
        D.setAttribute("width", `${w + R}`), D.setAttribute("height", `${x + O}`), D.setAttribute("opacity", `${v}`), (e.scale[0] !== 1 || e.scale[1] !== 1) && D.setAttribute("transform", `translate(${$} ${F}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-$} ${-F})`);
        let N = a.ownerDocument.createElementNS(Re, "g");
        if (e.crop) {
          let z = a.ownerDocument.createElementNS(Re, "mask");
          z.setAttribute("id", `mask-image-crop-${e.id}`), z.setAttribute("fill", "#fff");
          let Y = a.ownerDocument.createElementNS(Re, "rect");
          Y.setAttribute("x", `${R}`), Y.setAttribute("y", `${O}`), Y.setAttribute("width", `${w}`), Y.setAttribute("height", `${x}`), z.appendChild(Y), g.appendChild(z), N.setAttribute("mask", `url(#${z.id})`);
        }
        if (N.appendChild(D), N.setAttribute("transform", `translate(${r - R} ${l - O}) rotate(${m} ${$} ${F})`), e.roundness) {
          let z = a.ownerDocument.createElementNS(Re, "clipPath");
          z.id = `image-clipPath-${e.id}`;
          let Y = a.ownerDocument.createElementNS(Re, "rect"), ie = va(Math.min(e.width, e.height), e);
          Y.setAttribute("width", `${e.width}`), Y.setAttribute("height", `${e.height}`), Y.setAttribute("rx", `${ie}`), Y.setAttribute("ry", `${ie}`), z.appendChild(Y), b(z, e), N.setAttributeNS(Re, "clip-path", `url(#${z.id})`);
        }
        let j = jo(e, g, [N], o.frameRendering, t);
        b(j || N, e);
      }
      break;
    }
    case "frame":
    case "magicframe": {
      if (o.frameRendering.enabled && o.frameRendering.outline) {
        let w = document.createElementNS(Re, "rect");
        w.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`), w.setAttribute("width", `${e.width}px`), w.setAttribute("height", `${e.height}px`), w.setAttribute("rx", pt.radius.toString()), w.setAttribute("ry", pt.radius.toString()), w.setAttribute("fill", "none"), w.setAttribute("stroke", pt.strokeColor), w.setAttribute("stroke-width", pt.strokeWidth.toString()), b(w, e);
      }
      break;
    }
    default:
      if (J(e)) {
        let w = a.ownerDocument.createElementNS(Re, "g");
        v !== 1 && (w.setAttribute("stroke-opacity", `${v}`), w.setAttribute("fill-opacity", `${v}`)), w.setAttribute("transform", `translate(${r || 0} ${l || 0}) rotate(${m} ${h} ${U})`);
        let x = e.text.replace(/\r\n?/g, `
`).split(`
`), S = mc(e.fontSize, e.lineHeight), E = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0, M = O8(e.fontFamily, e.fontSize, S), I = e8(e.text) ? "rtl" : "ltr", T = e.textAlign === "center" ? "middle" : e.textAlign === "right" || I === "rtl" ? "end" : "start";
        for (let D = 0; D < x.length; D++) {
          let R = a.ownerDocument.createElementNS(Re, "text");
          R.textContent = x[D], R.setAttribute("x", `${E}`), R.setAttribute("y", `${D * S + M}`), R.setAttribute("font-family", lo(e)), R.setAttribute("font-size", `${e.fontSize}px`), R.setAttribute("fill", e.strokeColor), R.setAttribute("text-anchor", T), R.setAttribute("style", "white-space: pre;"), R.setAttribute("direction", I), R.setAttribute("dominant-baseline", "alphabetic"), w.appendChild(R);
        }
        let A = jo(e, g, [w], o.frameRendering, t);
        b(A || w, e);
      } else throw new Error(`Unimplemented type ${e.type}`);
  }
}, jP = (e, t, n, a, i, r) => {
  a && (e.filter((l) => !Gn(l)).forEach((l) => {
    if (!l.isDeleted) {
      if (J(l) && l.containerId && t.has(l.containerId)) return;
      try {
        Md(l, t, n, a, i, l.x + r.offsetX, l.y + r.offsetY, r);
        let o = ye(l, t);
        o && Md(o, t, n, a, i, o.x + r.offsetX, o.y + r.offsetY, r);
      } catch (o) {
        console.error(o);
      }
    }
  }), e.filter((l) => Gn(l)).forEach((l) => {
    if (!l.isDeleted) try {
      Md(l, t, n, a, i, l.x + r.offsetX, l.y + r.offsetY, r);
    } catch (o) {
      console.error(o);
    }
  }));
}, tg = 500, pp = (e) => {
  var a, i;
  let t = (a = e.extensions) == null ? void 0 : a.reduce((r, l) => (r.push(de[l]), r), []), n = (i = e.extensions) == null ? void 0 : i.reduce((r, l) => l === "jpg" ? r.concat(".jpg", ".jpeg") : r.concat(`.${l}`), []);
  return wk({ description: e.description, extensions: n, mimeTypes: t, multiple: e.multiple ?? !1, legacySetup: (r, l, o) => {
    let c = oo(l, tg), d = () => {
      s(), document.addEventListener("keyup", c), document.addEventListener("pointerup", c), c();
    }, s = () => {
      var f;
      if ((f = o.files) != null && f.length) {
        let h = e.multiple ? [...o.files] : o.files[0];
        r(h);
      }
    };
    requestAnimationFrame(() => {
      window.addEventListener("focus", d);
    });
    let u = window.setInterval(() => {
      s();
    }, tg);
    return (f) => {
      clearInterval(u), c.cancel(), window.removeEventListener("focus", d), document.removeEventListener("keyup", c), document.removeEventListener("pointerup", c), f && (console.warn("Opening the file was canceled (legacy-fs)."), f(new qu()));
    };
  } });
}, Uu = (e, t) => xk(e, { fileName: `${t.name}.${t.extension}`, description: t.description, extensions: [`.${t.extension}`], mimeTypes: t.mimeTypes }, t.fileHandle), YP = (e, t) => {
  let n = {};
  for (let a of e) !a.isDeleted && "fileId" in a && a.fileId && t[a.fileId] && (n[a.fileId] = t[a.fileId]);
  return n;
}, Up = (e, t, n, a) => {
  let i = { type: Zn.excalidraw, version: Wu.excalidraw, source: O0, elements: S3(e), appState: Zb(t), files: YP(e, n) };
  return JSON.stringify(i, null, 2);
}, B7 = async (e, t, n, a = t.name || jb) => {
  let i = Up(e, t, n), r = new Blob([i], { type: de.excalidraw });
  return { fileHandle: await Uu(r, { name: a, extension: "excalidraw", description: "Excalidraw file", fileHandle: Gp(t.fileHandle) ? null : t.fileHandle }) };
}, ZP = async (e, t) => {
  let n = await pp({ description: "Excalidraw files" });
  return T3(await jp(n), e, t, n.handle);
}, KP = (e) => (e == null ? void 0 : e.type) === Zn.excalidraw && (!e.elements || Array.isArray(e.elements) && (!e.appState || typeof e.appState == "object")), H7 = (e) => typeof e == "object" && e && e.type === Zn.excalidrawLibrary && (e.version === 1 || e.version === 2), X7 = (e) => {
  let t = { type: Zn.excalidrawLibrary, version: Wu.excalidrawLibrary, source: O0, libraryItems: e };
  return JSON.stringify(t, null, 2);
}, qP = async (e) => {
  let t = X7(e);
  await Uu(new Blob([t], { type: de.excalidrawlib }), { name: "library", extension: "excalidrawlib", description: "Excalidraw library file" });
}, W7 = (e) => new Promise((t, n) => {
  let a = new Image();
  a.onload = () => {
    t(a);
  }, a.onerror = (i) => {
    n(i);
  }, a.src = e;
}), V7 = async ({ fileIds: e, files: t, imageCache: n }) => {
  let a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map();
  return await Promise.all(e.reduce((r, l) => {
    let o = t[l];
    return o && !a.has(l) ? (a.set(l, !0), r.concat((async () => {
      try {
        if (o.mimeType === de.binary) throw new Error("Only images can be added to ImageCache");
        let c = W7(o.dataURL), d = { image: c, mimeType: o.mimeType };
        n.set(l, d);
        let s = await c;
        n.set(l, { ...d, image: s });
      } catch {
        i.set(l, !0);
      }
    })())) : r;
  }, [])), { imageCache: n, updatedFiles: a, erroredFiles: i };
}, G7 = (e) => e.filter((t) => Vn(t)), JP = (e) => (e == null ? void 0 : e.nodeName.toLowerCase()) === "svg", ng = (e) => {
  let t = new DOMParser().parseFromString(e, de.svg), n = t.querySelector("svg");
  if (t.querySelector("parsererror") || !JP(n)) throw new Error("Invalid SVG");
  {
    n.hasAttribute("xmlns") || n.setAttribute("xmlns", Re);
    let a = n.getAttribute("width"), i = n.getAttribute("height");
    (a != null && a.includes("%") || a === "auto") && (a = null), (i != null && i.includes("%") || i === "auto") && (i = null);
    let r = n.getAttribute("viewBox");
    if (!a || !i) {
      if (a = a || "50", i = i || "50", r) {
        let l = r.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);
        l && ([, a, i] = l);
      }
      n.setAttribute("width", a), n.setAttribute("height", i);
    }
    return r || n.setAttribute("viewBox", `0 0 ${a} ${i}`), n.outerHTML;
  }
}, j7 = document.createElement("img");
j7.src = `data:${de.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;
var Y7 = document.createElement("img");
Y7.src = `data:${de.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;
var mp = ([e, t, n, a], i, r) => {
  let l = aR, o = l / r.zoom.value, c = l / r.zoom.value, d = l / r.zoom.value, s = (e + n) / 2, u = (t + a) / 2, f = (l - 8) / (2 * r.zoom.value), h = 4 / r.zoom.value, U = n + h - f, m = t - h - d + f, [g, b] = X(k(U + o / 2, m + c / 2), k(s, u), i);
  return [g - o / 2, b - c / 2, o, c];
}, Z7 = (e, t, n, [a, i]) => {
  let r = 4 / n.zoom.value, [l, o, c, d] = ge(e, t), [s, u, f, h] = mp([l, o, c, d], e.angle, n);
  return a > s - r && a < s + r + f && i > u - r && i < u + h + r;
}, hh = (e, t, n, [a, i], r) => !e.link || n.selectedElementIds[e.id] ? !1 : !r && n.viewModeEnabled && ap(a, i, e, t) ? !0 : Z7(e, t, n, k(a, i)), df = (e, t, n, a, i = !0) => {
  e.beginPath(), e.arc(t, n, a, 0, Math.PI * 2), e.fill(), i && e.stroke();
}, gp = (e, t) => [e.width / t, e.height / t], bp = ({ canvas: e, scale: t, normalizedWidth: n, normalizedHeight: a, theme: i, isExporting: r, viewBackgroundColor: l }) => {
  let o = e.getContext("2d");
  return o.setTransform(1, 0, 0, 1, 0, 0), o.scale(t, t), r && i === Ie.DARK && (o.filter = F0), typeof l == "string" ? ((l === "transparent" || l.length === 5 || l.length === 9 || /(hsla|rgba)\(/.test(l)) && o.clearRect(0, 0, n, a), o.save(), o.fillStyle = l, o.fillRect(0, 0, n, a), o.restore()) : o.clearRect(0, 0, n, a), o;
}, K7 = (e, t) => {
  let n = window.location.href;
  try {
    let a = new URL(n);
    return a.searchParams.set(Kd, e), Nn(a.toString());
  } catch (a) {
    console.error(a);
  }
  return Nn(n);
}, q7 = (e, t) => {
  if (e.length > 0 && mu(e)) {
    if (e.length === 1) return { id: e[0].id, type: "element" };
    if (e.length > 1) {
      let n = Object.keys(t.selectedGroupIds)[0];
      return n ? { id: n, type: "group" } : { id: e[0].groupIds[0], type: "group" };
    }
  }
  return null;
}, mu = (e) => !!(e.length === 1 || e.length > 1 && x7(e)), xs = (e) => {
  try {
    let t = new URL(e);
    return t.searchParams.has(Kd) && t.host === window.location.host;
  } catch {
    return !1;
  }
}, QP = (e) => {
  try {
    let { searchParams: t } = new URL(e);
    if (t.has(Kd)) return t.get(Kd);
  } catch {
  }
  return null;
}, Gc = { Bold: "#dddddd", Regular: "#e5e5e5" }, eN = (e, t, n, a, i, r, l, o) => {
  let c = a % t - t, d = i % t - t, s = t * r.value, u = 1 / r.value;
  e.save(), r.value === 1 && e.translate(c % 1 ? 0 : 0.5, d % 1 ? 0 : 0.5);
  for (let f = c; f < c + l + t * 2; f += t) {
    let h = n > 1 && Math.round(f - a) % (n * t) === 0;
    if (!h && s < 10) continue;
    let U = Math.min(1 / r.value, h ? 4 : 1);
    e.lineWidth = U;
    let m = [U * 3, u + (U + u)];
    e.beginPath(), e.setLineDash(h ? [] : m), e.strokeStyle = h ? Gc.Bold : Gc.Regular, e.moveTo(f, d - t), e.lineTo(f, Math.ceil(d + o + t * 2)), e.stroke();
  }
  for (let f = d; f < d + o + t * 2; f += t) {
    let h = n > 1 && Math.round(f - i) % (n * t) === 0;
    if (!h && s < 10) continue;
    let U = Math.min(1 / r.value, h ? 4 : 1);
    e.lineWidth = U;
    let m = [U * 3, u + (U + u)];
    e.beginPath(), e.setLineDash(h ? [] : m), e.strokeStyle = h ? Gc.Bold : Gc.Regular, e.moveTo(c - t, f), e.lineTo(Math.ceil(c + l + t * 2), f), e.stroke();
  }
  e.restore();
}, ag = (e, t, n, a) => {
  t.translate(e.x + a.scrollX, e.y + a.scrollY), t.beginPath(), t.roundRect ? t.roundRect(0, 0, e.width, e.height, pt.radius / a.zoom.value) : t.rect(0, 0, e.width, e.height), t.clip(), t.translate(-(e.x + a.scrollX), -(e.y + a.scrollY));
}, ig = { regularLink: null, elementLink: null }, rg = (e, t, n, a) => {
  if (e.link && !n.selectedElementIds[e.id]) {
    let [i, r, l, o] = ge(e, a), [c, d, s, u] = mp([i, r, l, o], e.angle, n), f = c + s / 2, h = d + u / 2;
    t.save(), t.translate(n.scrollX + f, n.scrollY + h), t.rotate(e.angle);
    let U = xs(e.link) ? "elementLink" : "regularLink", m = ig[U];
    if (!m || m.zoom !== n.zoom.value) {
      m = Object.assign(document.createElement("canvas"), { zoom: n.zoom.value }), m.width = s * window.devicePixelRatio * n.zoom.value, m.height = u * window.devicePixelRatio * n.zoom.value, ig[U] = m;
      let g = m.getContext("2d");
      g.scale(window.devicePixelRatio * n.zoom.value, window.devicePixelRatio * n.zoom.value), g.fillStyle = "#fff", g.fillRect(0, 0, s, u), U === "elementLink" ? g.drawImage(Y7, 0, 0, s, u) : g.drawImage(j7, 0, 0, s, u), g.restore();
    }
    t.drawImage(m, c - f, d - h, s, u), t.restore();
  }
}, J7 = ({ canvas: e, rc: t, elementsMap: n, allElementsMap: a, visibleElements: i, scale: r, appState: l, renderConfig: o }) => {
  var m;
  if (e === null) return;
  let { renderGrid: c = !0, isExporting: d } = o, [s, u] = gp(e, r), f = bp({ canvas: e, scale: r, normalizedWidth: s, normalizedHeight: u, theme: l.theme, isExporting: d, viewBackgroundColor: l.viewBackgroundColor });
  f.scale(l.zoom.value, l.zoom.value), c && eN(f, l.gridSize, l.gridStep, l.scrollX, l.scrollY, l.zoom, s / l.zoom.value, u / l.zoom.value);
  let h = /* @__PURE__ */ new Set();
  i.forEach((g) => {
    g.groupIds.length > 0 && l.frameToHighlight && l.selectedElementIds[g.id] && (gr(g, l.frameToHighlight, n) || g.groupIds.find((b) => h.has(b))) && g.groupIds.forEach((b) => h.add(b));
  });
  let U = /* @__PURE__ */ new Map();
  i.filter((g) => !Gn(g)).forEach((g) => {
    var b;
    try {
      let v = g.frameId || ((b = l.frameToHighlight) == null ? void 0 : b.id);
      if (J(g) && g.containerId && n.has(g.containerId)) return;
      if (f.save(), v && l.frameRendering.enabled && l.frameRendering.clip) {
        let w = $1(g, n, l);
        w && vg(g, w, l, n, U) && ag(w, f, o, l), Nr(g, n, a, t, f, o, l);
      } else Nr(g, n, a, t, f, o, l);
      let y = ye(g, n);
      y && Nr(y, n, a, t, f, o, l), f.restore(), d || rg(g, f, l, n);
    } catch (v) {
      console.error(v, g.id, g.x, g.y, g.width, g.height);
    }
  }), i.filter((g) => Gn(g)).forEach((g) => {
    var b;
    try {
      let v = () => {
        if (Nr(g, n, a, t, f, o, l), Gn(g) && (d || xn(g) && o.embedsValidationStatus.get(g.id) !== !0) && g.width && g.height) {
          let y = F7(g);
          Nr(y, n, a, t, f, o, l);
        }
        d || rg(g, f, l, n);
      };
      if ((g.frameId || (b = l.frameToHighlight) != null && b.id) && l.frameRendering.enabled && l.frameRendering.clip) {
        f.save();
        let y = $1(g, n, l);
        y && vg(g, y, l, n, U) && ag(y, f, o, l), v(), f.restore();
      } else v();
    } catch (v) {
      console.error(v);
    }
  }), (m = o.pendingFlowchartNodes) == null || m.forEach((g) => {
    try {
      Nr(g, n, a, t, f, o, l);
    } catch (b) {
      console.error(b);
    }
  });
}, Q7 = Vu((e) => {
  J7(e);
}, { trailing: !0 }), e3 = (e, t) => {
  if (t) {
    Q7(e);
    return;
  }
  J7(e);
}, tN = (e, t) => {
  if (e.width <= t) return e;
  let n = document.createElement("canvas").getContext("2d");
  n.font = Je({ fontFamily: e.fontFamily, fontSize: e.fontSize });
  let a = e.text;
  if (n.measureText(a).width > t) for (let i = a.length; i > 0; i--) {
    let r = `${a.slice(0, i)}...`;
    if (n.measureText(r).width <= t) {
      a = r;
      break;
    }
  }
  return ve(e, { text: a, width: t });
}, nN = (e, t) => {
  let n = [];
  for (let a of e) {
    if (fe(a)) {
      let i = $n({ x: a.x, y: a.y - pt.nameOffsetY, fontFamily: ht.Helvetica, fontSize: pt.nameFontSize, lineHeight: pt.nameLineHeight, strokeColor: t.exportWithDarkMode ? pt.nameColorDarkTheme : pt.nameColorLightTheme, text: p3(a) });
      i.y -= i.height, i = tN(i, a.width), n.push(i);
    }
    n.push(a);
  }
  return n;
}, t3 = (e, t) => (t = t || ei().frameRendering, { enabled: e ? !0 : t.enabled, outline: e ? !1 : t.outline, name: e ? !1 : t.name, clip: e ? !0 : t.clip }), n3 = ({ elements: e, exportingFrame: t, frameRendering: n, exportWithDarkMode: a }) => {
  let i;
  return t ? i = $p(e, t) : n.enabled && n.name ? i = nN(e, { exportWithDarkMode: a }) : i = e, i;
}, a3 = async (e, t, n, { exportBackground: a, exportPadding: i = Co, viewBackgroundColor: r, exportingFrame: l }, o = (d, s) => {
  let u = document.createElement("canvas");
  return u.width = d * t.exportScale, u.height = s * t.exportScale, { canvas: u, scale: t.exportScale };
}, c = async () => {
  await Mi.loadElementsFonts(e);
}) => {
  await c();
  let d = t3(l ?? null, t.frameRendering ?? null);
  l && (d.clip = !1);
  let s = n3({ elements: e, exportingFrame: l, exportWithDarkMode: t.exportWithDarkMode, frameRendering: d });
  l && (i = 0);
  let [u, f, h, U] = yp(l ? [l] : Op(s), i), { canvas: m, scale: g = 1 } = o(h, U), b = ei(), { imageCache: v } = await V7({ imageCache: /* @__PURE__ */ new Map(), fileIds: G7(s).map((y) => y.fileId), files: n });
  return e3({ canvas: m, rc: wr.canvas(m), elementsMap: Qn(he(s)), allElementsMap: Qn(he(Li(e))), visibleElements: s, scale: g, appState: { ...t, frameRendering: d, viewBackgroundColor: a ? r : null, scrollX: -u + i, scrollY: -f + i, zoom: b.zoom, shouldCacheIgnoreZoom: !1, theme: t.exportWithDarkMode ? Ie.DARK : Ie.LIGHT }, renderConfig: { canvasBackgroundColor: r, imageCache: v, renderGrid: !1, isExporting: !0, embedsValidationStatus: /* @__PURE__ */ new Map(), elementsPendingErasure: /* @__PURE__ */ new Set(), pendingFlowchartNodes: null } }), m;
}, os = (e) => document.createComment(` ${e} `), vp = async (e, t, n, a) => {
  let i = t3((a == null ? void 0 : a.exportingFrame) ?? null, t.frameRendering ?? null), { exportPadding: r = Co, exportWithDarkMode: l = !1, viewBackgroundColor: o, exportScale: c = 1, exportEmbedScene: d } = t, { exportingFrame: s = null } = a || {}, u = n3({ elements: e, exportingFrame: s, exportWithDarkMode: l, frameRendering: i });
  s && (r = 0);
  let [f, h, U, m] = yp(s ? [s] : Op(u), r), g = -f + r, b = -h + r, v = document.createElementNS(Re, "svg");
  v.setAttribute("version", "1.1"), v.setAttribute("xmlns", Re), v.setAttribute("viewBox", `0 0 ${U} ${m}`), v.setAttribute("width", `${U * c}`), v.setAttribute("height", `${m * c}`), l && v.setAttribute("filter", F0);
  let y = v.ownerDocument.createElementNS(Re, "defs"), w = v.ownerDocument.createElementNS(Re, "metadata");
  if (v.appendChild(os("svg-source:excalidraw")), v.appendChild(w), v.appendChild(y), d) try {
    aN({ metadataElement: w, payload: Up(e, t, n || {}, "local") });
  } catch (A) {
    console.error(A);
  }
  let x = Np(e);
  if (x.length) {
    let A = he(e);
    for (let D of x) {
      let R = v.ownerDocument.createElementNS(Re, "clipPath");
      R.setAttribute("id", D.id);
      let [O, $, F, N] = ge(D, A), j = (F - O) / 2 - (D.x - O), z = (N - $) / 2 - (D.y - $), Y = v.ownerDocument.createElementNS(Re, "rect");
      Y.setAttribute("transform", `translate(${D.x + g} ${D.y + b}) rotate(${D.angle} ${j} ${z})`), Y.setAttribute("width", `${D.width}`), Y.setAttribute("height", `${D.height}`), s || (Y.setAttribute("rx", `${pt.radius}`), Y.setAttribute("ry", `${pt.radius}`)), R.appendChild(Y), y.appendChild(R);
    }
  }
  let S = a != null && a.skipInliningFonts ? [] : await Mi.generateFontFaceDeclarations(e), E = `
      `, M = v.ownerDocument.createElementNS(Re, "style");
  if (M.classList.add("style-fonts"), M.appendChild(document.createTextNode(`${E}${S.join(E)}`)), y.appendChild(M), t.exportBackground && o) {
    let A = v.ownerDocument.createElementNS(Re, "rect");
    A.setAttribute("x", "0"), A.setAttribute("y", "0"), A.setAttribute("width", `${U}`), A.setAttribute("height", `${m}`), A.setAttribute("fill", o), v.appendChild(A);
  }
  let I = wr.svg(v), T = (a == null ? void 0 : a.renderEmbeddables) ?? !1;
  return jP(u, Qn(he(u)), I, v, n || {}, { offsetX: g, offsetY: b, isExporting: !0, exportWithDarkMode: l, renderEmbeddables: T, frameRendering: i, canvasBackgroundColor: o, embedsValidationStatus: T ? new Map(u.filter((A) => fe(A)).map((A) => [A.id, !0])) : /* @__PURE__ */ new Map(), reuseImages: (a == null ? void 0 : a.reuseImages) ?? !0 }), v;
}, aN = ({ payload: e, metadataElement: t }) => {
  let n = L3(JSON.stringify(P3({ text: e })), !0);
  t.appendChild(os(`payload-type:${de.excalidraw}`)), t.appendChild(os("payload-version:2")), t.appendChild(os("payload-start")), t.appendChild(document.createTextNode(n)), t.appendChild(os("payload-end"));
}, iN = ({ svg: e }) => {
  var t;
  if (e.includes(`payload-type:${de.excalidraw}`)) {
    let n = e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);
    if (!n) throw new Error("INVALID");
    let a = (((t = e.match(/<!-- payload-version:(\d+) -->/)) == null ? void 0 : t[1]) || "1") !== "1";
    try {
      let i = R3(n[1], a), r = JSON.parse(i);
      if (!("encoded" in r)) {
        if ("type" in r && r.type === Zn.excalidraw) return i;
        throw new Error("FAILED");
      }
      return N3(r);
    } catch (i) {
      throw console.error(i), new Error("FAILED");
    }
  }
  throw new Error("INVALID");
}, yp = (e, t) => {
  let [n, a, i, r] = We(e), l = rn(n, i) + t * 2, o = rn(a, r) + t * 2;
  return [n, a, l, o];
}, rN = (e, t, n) => {
  let [, , a, i] = yp(e, t).map((r) => Math.trunc(r * n));
  return [a, i];
}, lN = class {
  constructor(t) {
    this.scoreFunction = t, L(this, "content", []);
  }
  sinkDown(t) {
    let n = this.content[t];
    for (; t > 0; ) {
      let a = (t + 1 >> 1) - 1, i = this.content[a];
      if (this.scoreFunction(n) < this.scoreFunction(i)) this.content[a] = n, this.content[t] = i, t = a;
      else break;
    }
  }
  bubbleUp(t) {
    let n = this.content.length, a = this.content[t], i = this.scoreFunction(a);
    for (; ; ) {
      let r = t + 1 << 1, l = r - 1, o = null, c = 0;
      if (l < n) {
        let d = this.content[l];
        c = this.scoreFunction(d), c < i && (o = l);
      }
      if (r < n) {
        let d = this.content[r];
        this.scoreFunction(d) < (o === null ? i : c) && (o = r);
      }
      if (o !== null) this.content[t] = this.content[o], this.content[o] = a, t = o;
      else break;
    }
  }
  push(t) {
    this.content.push(t), this.sinkDown(this.content.length - 1);
  }
  pop() {
    if (this.content.length === 0) return null;
    let t = this.content[0], n = this.content.pop();
    return this.content.length > 0 && (this.content[0] = n, this.bubbleUp(0)), t;
  }
  remove(t) {
    if (this.content.length === 0) return;
    let n = this.content.indexOf(t), a = this.content.pop();
    n < this.content.length && (this.content[n] = a, this.scoreFunction(a) < this.scoreFunction(t) ? this.sinkDown(n) : this.bubbleUp(n));
  }
  size() {
    return this.content.length;
  }
  rescoreElement(t) {
    this.sinkDown(this.content.indexOf(t));
  }
}, wp = 1, Ze = 40, oN = (e, t) => {
  let n = e.fixedSegments ? e.fixedSegments.slice() : null;
  if (n) {
    let a = [];
    e.points.map((l) => k(e.x + l[0], e.y + l[1])).forEach((l, o, c) => {
      if (o < 2) return a.push(l);
      let d = Gs(l, c[o - 1]), s = Gs(c[o - 1], c[o - 2]);
      if (wt(d, s)) {
        let u = (n == null ? void 0 : n.findIndex((h) => h.index === o - 1)) ?? -1, f = (n == null ? void 0 : n.findIndex((h) => h.index === o)) ?? -1;
        f !== -1 && (n[f].start = k(c[o - 2][0] - e.x, c[o - 2][1] - e.y)), u !== -1 && n.splice(u, 1), a.splice(-1, 1), n.forEach((h) => {
          h.index > o - 1 && (h.index -= 1);
        });
      }
      return a.push(l);
    });
    let i = [];
    a.forEach((l, o, c) => {
      if (o < 3) return i.push(l);
      if (ze(c[o - 2], c[o - 1]) < wp) {
        let d = (n == null ? void 0 : n.findIndex((f) => f.index === o - 2)) ?? -1, s = (n == null ? void 0 : n.findIndex((f) => f.index === o - 1)) ?? -1;
        s !== -1 && n.splice(s, 1), d !== -1 && n.splice(d, 1), i.splice(-2, 2), n.forEach((f) => {
          f.index > o - 2 && (f.index -= 2);
        });
        let u = yi(l, c[o - 1]);
        return i.push(k(u ? l[0] : c[o - 2][0], u ? c[o - 2][1] : l[1]));
      }
      i.push(l);
    });
    let r = n.filter((l) => l.index !== 1 && l.index !== i.length - 1);
    return r.length === 0 ? mr(kp(Mp(Sp(e, xp(e, t, i.map((l) => k(l[0] - e.x, l[1] - e.y)), e.startBinding && go(e.startBinding.elementId, t), e.endBinding && go(e.endBinding.elementId, t))) ?? [])), r, null, null) : (we.DEV && cn(Cp(i), "Invalid elbow points with fixed segments"), mr(i, r, e.startIsSpecial, e.endIsSpecial));
  }
  return { x: e.x, y: e.y, points: e.points, fixedSegments: e.fixedSegments, startIsSpecial: e.startIsSpecial, endIsSpecial: e.endIsSpecial };
}, sN = (e, t, n) => {
  var M, I;
  let a = t.map((T) => T.index), i = (((M = e.fixedSegments) == null ? void 0 : M.map((T) => T.index)) ?? []).findIndex((T) => !a.includes(T));
  if (i === -1 || !((I = e.fixedSegments) != null && I[i])) return { points: e.points };
  let r = e.fixedSegments[i].index, l = e.fixedSegments[i - 1], o = e.fixedSegments[i + 1], c = e.x + (l ? l.end[0] : 0), d = e.y + (l ? l.end[1] : 0), s = l ? null : e.startBinding, u = o ? null : e.endBinding, { startHeading: f, endHeading: h, startGlobalPoint: U, endGlobalPoint: m, hoveredStartElement: g, hoveredEndElement: b, ...v } = xp({ x: c, y: d, startBinding: s, endBinding: u, startArrowhead: null, endArrowhead: null, points: e.points }, n, [k(0, 0), k(e.x + ((o == null ? void 0 : o.start[0]) ?? e.points[e.points.length - 1][0]) - c, e.y + ((o == null ? void 0 : o.start[1]) ?? e.points[e.points.length - 1][1]) - d)], s && go(s.elementId, n), u && go(u.elementId, n), { isDragging: !1 }), { points: y } = mr(kp(Mp(Sp(e, { startHeading: f, endHeading: h, startGlobalPoint: U, endGlobalPoint: m, hoveredEndElement: b, ...v }) ?? [])), t, null, null), w = [];
  if (l) for (let T = 0; T < l.index; T++) w.push(k(e.x + e.points[T][0], e.y + e.points[T][1]));
  if (y.forEach((T) => {
    w.push(k(e.x + (l ? l.end[0] : 0) + T[0], e.y + (l ? l.end[1] : 0) + T[1]));
  }), o) for (let T = o.index; T < e.points.length; T++) w.push(k(e.x + e.points[T][0], e.y + e.points[T][1]));
  let x = ((o == null ? void 0 : o.index) ?? e.points.length) - ((l == null ? void 0 : l.index) ?? 0) - 1, S = t.map((T) => T.index > r ? { ...T, index: T.index - x + (y.length - 1) } : T), E = w.flatMap((T, A) => {
    let D = w[A - 1], R = w[A + 1];
    if (D && R) {
      let O = Gs(T, D), $ = Gs(R, T);
      if (wt(O, $)) return S.forEach((F) => {
        F.index > A && (F.index -= 1);
      }), [];
      if (wt(O, l7($))) return S.forEach((F) => {
        F.index > A && (F.index += 1);
      }), [T, T];
    }
    return [T];
  });
  return mr(E, S, !1, !1);
}, cN = (e, t, n, a, i, r) => {
  var x, S;
  let l = t.map((E, M) => e.fixedSegments == null || e.fixedSegments[M] === void 0 || e.fixedSegments[M].index !== E.index || (E.start[0] !== e.fixedSegments[M].start[0] && E.end[0] !== e.fixedSegments[M].end[0]) != (E.start[1] !== e.fixedSegments[M].start[1] && E.end[1] !== e.fixedSegments[M].end[1]) ? M : null).filter((E) => E !== null).shift();
  if (l == null) return { points: e.points };
  let o = ((x = e.fixedSegments) == null ? void 0 : x.findIndex((E) => E.index === 1)) ?? -1, c = ((S = e.fixedSegments) == null ? void 0 : S.findIndex((E) => E.index === e.points.length - 1)) ?? -1, d = ze(t[l].start, t[l].end), s = d < Ze + 5;
  if (o === -1 && t[l].index === 1 && i) {
    let E = xi(n), M = (E ? wt(n, vt) : wt(n, jt)) ? s ? d / 2 : Ze : s ? -d / 2 : -Ze;
    t[l].start = k(t[l].start[0] + (E ? M : 0), t[l].start[1] + (E ? 0 : M));
  }
  if (c === -1 && t[l].index === e.points.length - 1 && r) {
    let E = xi(a), M = (E ? wt(a, vt) : wt(a, jt)) ? s ? d / 2 : Ze : s ? -d / 2 : -Ze;
    t[l].end = k(t[l].end[0] + (E ? M : 0), t[l].end[1] + (E ? 0 : M));
  }
  let u = t.map((E) => ({ ...E, start: k(e.x + E.start[0], e.y + E.start[1]), end: k(e.x + E.end[0], e.y + E.end[1]) })), f = e.points.map((E, M) => k(e.x + E[0], e.y + E[1])), h = u[l].index - 1, U = u[l].index, m = u[l].start, g = u[l].end, b = f[h - 1] && !Ea(f[h], f[h - 1]) ? yi(f[h - 1], f[h]) : void 0, v = f[U + 1] && !Ea(f[U], f[U + 1]) ? yi(f[U + 1], f[U]) : void 0;
  if (b !== void 0) {
    let E = b ? 1 : 0;
    f[h - 1][E] = m[E];
  }
  if (f[h] = m, f[U] = g, v !== void 0) {
    let E = v ? 1 : 0;
    f[U + 1][E] = g[E];
  }
  let y = u.findIndex((E) => E.index === h);
  if (y !== -1) {
    let E = yi(u[y].end, u[y].start) ? 1 : 0;
    u[y].start[E] = m[E], u[y].end = m;
  }
  let w = u.findIndex((E) => E.index === U + 1);
  if (w !== -1) {
    let E = yi(u[w].end, u[w].start) ? 1 : 0;
    u[w].end[E] = g[E], u[w].start = g;
  }
  if (o === -1 && h === 0) {
    let E = i ? xi(n) : yi(f[1], f[0]);
    f.unshift(k(E ? m[0] : e.x + e.points[0][0], E ? e.y + e.points[0][1] : m[1])), i && f.unshift(k(e.x + e.points[0][0], e.y + e.points[0][1]));
    for (let M of u) M.index += i ? 2 : 1;
  }
  if (c === -1 && U === e.points.length - 1) {
    let E = xi(a);
    f.push(k(E ? g[0] : e.x + e.points[e.points.length - 1][0], E ? e.y + e.points[e.points.length - 1][1] : g[1])), r && f.push(k(e.x + e.points[e.points.length - 1][0], e.y + e.points[e.points.length - 1][1]));
  }
  return mr(f, u.map((E) => ({ ...E, start: k(E.start[0] - e.x, E.start[1] - e.y), end: k(E.end[0] - e.x, E.end[1] - e.y) })), !1, !1);
}, dN = (e, t, n, a, i, r, l, o, c) => {
  let d = e.startIsSpecial ?? null, s = e.endIsSpecial ?? null, u = t.map((g, b) => b === 0 || b === t.length - 1 ? k(e.x + g[0], e.y + g[1]) : k(e.x + e.points[b][0], e.y + e.points[b][1])), f = n.map((g) => ({ ...g, start: k(e.x + (g.start[0] - t[0][0]), e.y + (g.start[1] - t[0][1])), end: k(e.x + (g.end[0] - t[0][0]), e.y + (g.end[1] - t[0][1])) })), h = [], U = 2 + (d ? 1 : 0), m = 2 + (s ? 1 : 0);
  for (; h.length + U < u.length - m; ) h.push(u[h.length + U]);
  {
    let g = u[d ? 2 : 1], b = u[d ? 3 : 2], v = xi(a), y = xi(ul(se(g, b)));
    if (o && v === y) {
      let w = v ? wt(a, vt) : wt(a, jt);
      if (h.unshift(k(y ? r[0] + (w ? Ze : -Ze) : b[0], y ? b[1] : r[1] + (w ? Ze : -Ze))), h.unshift(k(v ? r[0] + (w ? Ze : -Ze) : r[0], v ? r[1] : r[1] + (w ? Ze : -Ze))), !d) {
        d = !0;
        for (let x of f) x.index > 1 && (x.index += 1);
      }
    } else if (h.unshift(k(y ? r[0] : g[0], y ? g[1] : r[1])), d) {
      d = !1;
      for (let w of f) w.index > 1 && (w.index -= 1);
    }
    h.unshift(r);
  }
  {
    let g = u[u.length - (s ? 3 : 2)], b = u[u.length - (s ? 4 : 3)], v = xi(i), y = yi(b, g);
    if (c && v === y) {
      let w = v ? wt(i, vt) : wt(i, jt);
      h.push(k(y ? l[0] + (w ? Ze : -Ze) : b[0], y ? b[1] : l[1] + (w ? Ze : -Ze))), h.push(k(v ? l[0] + (w ? Ze : -Ze) : l[0], v ? l[1] : l[1] + (w ? Ze : -Ze))), s || (s = !0);
    } else h.push(k(y ? l[0] : g[0], y ? g[1] : l[1])), s && (s = !1);
  }
  return h.push(l), mr(h, f.map(({ index: g }) => ({ index: g, start: h[g - 1], end: h[g] })).map((g) => ({ ...g, start: k(g.start[0] - r[0], g.start[1] - r[1]), end: k(g.end[0] - r[0], g.end[1] - r[1]) })), d, s);
}, et = 1e6, Ep = (e, t, n, a) => {
  var b, v, y, w, x, S, E, M, I, T, A, D, R, O, $, F, N, j, z, Y, ie, pe, ue, Ve, Ge;
  if (e.points.length < 2) return { points: n.points ?? e.points };
  (e.x < -et || e.x > et || e.y < -et || e.y > et || e.x + (((y = (v = n == null ? void 0 : n.points) == null ? void 0 : v[((b = n == null ? void 0 : n.points) == null ? void 0 : b.length) - 1]) == null ? void 0 : y[0]) ?? 0) < -et || e.x + (((S = (x = n == null ? void 0 : n.points) == null ? void 0 : x[((w = n == null ? void 0 : n.points) == null ? void 0 : w.length) - 1]) == null ? void 0 : S[0]) ?? 0) > et || e.y + (((I = (M = n == null ? void 0 : n.points) == null ? void 0 : M[((E = n == null ? void 0 : n.points) == null ? void 0 : E.length) - 1]) == null ? void 0 : I[1]) ?? 0) < -et || e.y + (((D = (A = n == null ? void 0 : n.points) == null ? void 0 : A[((T = n == null ? void 0 : n.points) == null ? void 0 : T.length) - 1]) == null ? void 0 : D[1]) ?? 0) > et || e.x + ((($ = (O = e == null ? void 0 : e.points) == null ? void 0 : O[((R = e == null ? void 0 : e.points) == null ? void 0 : R.length) - 1]) == null ? void 0 : $[0]) ?? 0) < -et || e.x + (((j = (N = e == null ? void 0 : e.points) == null ? void 0 : N[((F = e == null ? void 0 : e.points) == null ? void 0 : F.length) - 1]) == null ? void 0 : j[0]) ?? 0) > et || e.y + (((ie = (Y = e == null ? void 0 : e.points) == null ? void 0 : Y[((z = e == null ? void 0 : e.points) == null ? void 0 : z.length) - 1]) == null ? void 0 : ie[1]) ?? 0) < -et || e.y + (((Ve = (ue = e == null ? void 0 : e.points) == null ? void 0 : ue[((pe = e == null ? void 0 : e.points) == null ? void 0 : pe.length) - 1]) == null ? void 0 : Ve[1]) ?? 0) > et) && console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)", { arrow: e, updates: n }), e.x = Me(e.x, -et, et), e.y = Me(e.y, -et, et), n.points && (n.points = n.points.map(([je, Fe]) => k(Me(je, -et, et), Me(Fe, -et, et))));
  let i = n.points ? n.points && n.points.length === 2 ? e.points.map((je, Fe) => Fe === 0 ? n.points[0] : Fe === e.points.length - 1 ? n.points[1] : je) : n.points.slice() : e.points.slice(), r = typeof n.startBinding < "u" ? n.startBinding : e.startBinding, l = typeof n.endBinding < "u" ? n.endBinding : e.endBinding, o = r && go(r.elementId, t), c = l && go(l.elementId, t);
  if (t.size === 0 && Cp(i) || (o == null ? void 0 : o.id) !== (r == null ? void 0 : r.elementId) || (c == null ? void 0 : c.id) !== (l == null ? void 0 : l.elementId)) return mr(i.map((je) => k(e.x + je[0], e.y + je[1])), e.fixedSegments, e.startIsSpecial, e.endIsSpecial);
  let { startHeading: d, endHeading: s, startGlobalPoint: u, endGlobalPoint: f, hoveredStartElement: h, hoveredEndElement: U, ...m } = xp({ x: e.x, y: e.y, startBinding: r, endBinding: l, startArrowhead: e.startArrowhead, endArrowhead: e.endArrowhead, points: e.points }, t, i, o, c, a), g = n.fixedSegments ?? e.fixedSegments ?? [];
  return !n.points && !n.fixedSegments && !n.startBinding && !n.endBinding ? oN(e, t) : n.startBinding === e.startBinding && n.endBinding === e.endBinding && (n.points ?? []).every((je, Fe) => Ea(je, e.points[Fe] ?? k(1 / 0, 1 / 0))) ? {} : g.length === 0 ? mr(kp(Mp(Sp(e, { startHeading: d, endHeading: s, startGlobalPoint: u, endGlobalPoint: f, hoveredEndElement: U, ...m }) ?? [])), g, null, null) : (((Ge = e.fixedSegments) == null ? void 0 : Ge.length) ?? 0) > g.length ? sN(e, g, t) : n.points ? n.points && n.fixedSegments ? n : dN(e, i, g, d, s, u, f, h, U) : cN(e, g, d, s, h, U);
}, xp = (e, t, n, a, i, r) => {
  var E, M;
  let l = Qd(n[0], Jt(e.x, e.y)), o = Qd(n[n.length - 1], Jt(e.x, e.y)), c = a, d = i;
  if (r != null && r.isDragging) {
    let I = Array.from(t.values());
    c = cg(l, t, I, r == null ? void 0 : r.zoom) || a, d = cg(o, t, I, r == null ? void 0 : r.zoom) || i;
  }
  let s = og({ ...e, points: n }, "start", (E = e.startBinding) == null ? void 0 : E.fixedPoint, l, a, c, r == null ? void 0 : r.isDragging), u = og({ ...e, points: n }, "end", (M = e.endBinding) == null ? void 0 : M.fixedPoint, o, i, d, r == null ? void 0 : r.isDragging), f = sg(s, u, t, c, l), h = sg(u, s, t, d, o), U = [s[0] - 2, s[1] - 2, s[0] + 2, s[1] + 2], m = [u[0] - 2, u[1] - 2, u[0] + 2, u[1] + 2], g = c ? Xa(c, Gi(f, e.startArrowhead ? nt * 6 : nt * 2, 1)) : U, b = d ? Xa(d, Gi(h, e.endArrowhead ? nt * 6 : nt * 2, 1)) : m, v = uo(s, d ? Xa(d, Gi(h, Ze, Ze)) : m) || uo(u, c ? Xa(c, Gi(f, Ze, Ze)) : U), y = i3(v ? [U, m] : [g, b]), w = hN(v ? U : g, v ? m : b, y, v ? Gi(f, !c && !d ? 0 : Ze, 0) : Gi(f, !c && !d ? 0 : Ze - (e.startArrowhead ? nt * 6 : nt * 2), Ze), v ? Gi(h, !c && !d ? 0 : Ze, 0) : Gi(h, !c && !d ? 0 : Ze - (e.endArrowhead ? nt * 6 : nt * 2), Ze), v, c && Xa(c), d && Xa(d)), x = lg(w[0], f, s), S = lg(w[1], h, u);
  return { dynamicAABBs: w, startDonglePosition: x, startGlobalPoint: s, startHeading: f, endDonglePosition: S, endGlobalPoint: u, endHeading: h, commonBounds: y, hoveredStartElement: c, hoveredEndElement: d, boundsOverlap: v, startElementBounds: g, endElementBounds: b };
}, Sp = (e, t) => {
  let { dynamicAABBs: n, startDonglePosition: a, startGlobalPoint: i, startHeading: r, endDonglePosition: l, endGlobalPoint: o, endHeading: c, commonBounds: d, hoveredEndElement: s } = t, u = pN(n, a || i, r, l || o, c, d), f = a && jc(a, u), h = l && jc(l, u), U = jc(o, u);
  U && s && (U.closed = !0);
  let m = jc(i, u);
  m && e.startBinding && (m.closed = !0);
  let g = f && h && (uo(f.pos, n[1]) || uo(h.pos, n[0])), b = uN(f || m, h || U, u, r || vt, c || vt, g ? [] : n);
  if (b) {
    let v = b.map((y) => [y.pos[0], y.pos[1]]);
    return f && v.unshift(i), h && v.push(o), v;
  }
  return null;
}, Gi = (e, t, n) => {
  switch (e) {
    case kn:
      return [t, n, n, n];
    case vt:
      return [n, t, n, n];
    case jt:
      return [n, n, t, n];
  }
  return [n, n, n, t];
}, uN = (e, t, n, a, i, r) => {
  let l = ph(e.pos, t.pos), o = new lN((c) => c.f);
  for (o.push(e); o.size() > 0; ) {
    let c = o.pop();
    if (!c || c.closed) continue;
    if (c === t) return fN(e, c);
    c.closed = !0;
    let d = mN(c.addr, n);
    for (let s = 0; s < 4; s++) {
      let u = d[s];
      if (!u || u.closed) continue;
      let f = pi(u.pos, c.pos, 0.5);
      if (zM(...r.map((y) => uo(f, y)))) continue;
      let h = gN(s), U = c.parent ? ul(se(c.pos, c.parent.pos)) : a, m = l7(U);
      if (wt(m, h) || dg(e.addr, u.addr) && wt(h, a) || dg(t.addr, u.addr) && wt(h, i)) continue;
      let g = U !== h, b = c.g + ph(u.pos, c.pos) + (g ? Math.pow(l, 3) : 0), v = u.visited;
      if (!v || b < u.g) {
        let y = UN(u, t, h, i);
        u.visited = !0, u.parent = c, u.h = ph(t.pos, u.pos) + y * Math.pow(l, 2), u.g = b, u.f = u.g + u.h, v ? o.rescoreElement(u) : o.push(u);
      }
    }
  }
  return null;
}, fN = (e, t) => {
  let n = t, a = [];
  for (; n.parent; ) a.unshift(n), n = n.parent;
  return a.unshift(e), a;
}, ph = (e, t) => Math.abs(e[0] - t[0]) + Math.abs(e[1] - t[1]), hN = (e, t, n, a, i, r, l, o) => {
  let c = l ?? e, d = o ?? t, [s, u, f, h] = a ?? [0, 0, 0, 0], [U, m, g, b] = i ?? [0, 0, 0, 0], v = [e[0] > t[2] ? e[1] > t[3] || e[3] < t[1] ? Math.min((c[0] + d[2]) / 2, e[0] - h) : (c[0] + d[2]) / 2 : e[0] > t[0] ? e[0] - h : n[0] - h, e[1] > t[3] ? e[0] > t[2] || e[2] < t[0] ? Math.min((c[1] + d[3]) / 2, e[1] - s) : (c[1] + d[3]) / 2 : e[1] > t[1] ? e[1] - s : n[1] - s, e[2] < t[0] ? e[1] > t[3] || e[3] < t[1] ? Math.max((c[2] + d[0]) / 2, e[2] + u) : (c[2] + d[0]) / 2 : e[2] < t[2] ? e[2] + u : n[2] + u, e[3] < t[1] ? e[0] > t[2] || e[2] < t[0] ? Math.max((c[3] + d[1]) / 2, e[3] + f) : (c[3] + d[1]) / 2 : e[3] < t[3] ? e[3] + f : n[3] + f], y = [t[0] > e[2] ? t[1] > e[3] || t[3] < e[1] ? Math.min((d[0] + c[2]) / 2, t[0] - b) : (d[0] + c[2]) / 2 : t[0] > e[0] ? t[0] - b : n[0] - b, t[1] > e[3] ? t[0] > e[2] || t[2] < e[0] ? Math.min((d[1] + c[3]) / 2, t[1] - U) : (d[1] + c[3]) / 2 : t[1] > e[1] ? t[1] - U : n[1] - U, t[2] < e[0] ? t[1] > e[3] || t[3] < e[1] ? Math.max((d[2] + c[0]) / 2, t[2] + m) : (d[2] + c[0]) / 2 : t[2] < e[2] ? t[2] + m : n[2] + m, t[3] < e[1] ? t[0] > e[2] || t[2] < e[0] ? Math.max((d[3] + c[1]) / 2, t[3] + g) : (d[3] + c[1]) / 2 : t[3] < e[3] ? t[3] + g : n[3] + g], w = i3([v, y]);
  if (!r && v[2] - v[0] + y[2] - y[0] > w[2] - w[0] + 1e-11 && v[3] - v[1] + y[3] - y[1] > w[3] - w[1] + 1e-11) {
    let [x, S] = [(y[0] + y[2]) / 2, (y[1] + y[3]) / 2];
    if (t[0] > e[2] && e[1] > t[3]) {
      let E = v[2] + (y[0] - v[2]) / 2, M = y[3] + (v[1] - y[3]) / 2;
      return $t(Jt(e[2] - x, e[1] - S), Jt(e[0] - x, e[3] - S)) > 0 ? [[v[0], v[1], E, v[3]], [E, y[1], y[2], y[3]]] : [[v[0], M, v[2], v[3]], [y[0], y[1], y[2], M]];
    } else if (e[2] < t[0] && e[3] < t[1]) {
      let E = v[2] + (y[0] - v[2]) / 2, M = v[3] + (y[1] - v[3]) / 2;
      return $t(Jt(e[0] - x, e[1] - S), Jt(e[2] - x, e[3] - S)) > 0 ? [[v[0], v[1], v[2], M], [y[0], M, y[2], y[3]]] : [[v[0], v[1], E, v[3]], [E, y[1], y[2], y[3]]];
    } else if (e[0] > t[2] && e[3] < t[1]) {
      let E = y[2] + (v[0] - y[2]) / 2, M = v[3] + (y[1] - v[3]) / 2;
      return $t(Jt(e[2] - x, e[1] - S), Jt(e[0] - x, e[3] - S)) > 0 ? [[E, v[1], v[2], v[3]], [y[0], y[1], E, y[3]]] : [[v[0], v[1], v[2], M], [y[0], M, y[2], y[3]]];
    } else if (e[0] > t[2] && e[1] > t[3]) {
      let E = y[2] + (v[0] - y[2]) / 2, M = y[3] + (v[1] - y[3]) / 2;
      return $t(Jt(e[0] - x, e[1] - S), Jt(e[2] - x, e[3] - S)) > 0 ? [[E, v[1], v[2], v[3]], [y[0], y[1], E, y[3]]] : [[v[0], M, v[2], v[3]], [y[0], y[1], y[2], M]];
    }
  }
  return [v, y];
}, pN = (e, t, n, a, i, r) => {
  let l = /* @__PURE__ */ new Set(), o = /* @__PURE__ */ new Set();
  n === Sn || n === vt ? o.add(t[1]) : l.add(t[0]), i === Sn || i === vt ? o.add(a[1]) : l.add(a[0]), e.forEach((s) => {
    l.add(s[0]), l.add(s[2]), o.add(s[1]), o.add(s[3]);
  }), l.add(r[0]), l.add(r[2]), o.add(r[1]), o.add(r[3]);
  let c = Array.from(o).sort((s, u) => s - u), d = Array.from(l).sort((s, u) => s - u);
  return { row: c.length, col: d.length, data: c.flatMap((s, u) => d.map((f, h) => ({ f: 0, g: 0, h: 0, closed: !1, visited: !1, parent: null, addr: [h, u], pos: [f, s] }))) };
}, lg = (e, t, n) => {
  switch (t) {
    case kn:
      return k(n[0], e[1]);
    case vt:
      return k(e[2], n[1]);
    case jt:
      return k(n[0], e[3]);
  }
  return k(e[0], n[1]);
}, UN = (e, t, n, a) => {
  if (a === vt) switch (n) {
    case vt:
      return e.pos[0] >= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2;
    case kn:
      return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case jt:
      return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case Sn:
      return e.pos[1] === t.pos[1] ? 4 : 2;
  }
  else if (a === Sn) switch (n) {
    case vt:
      return e.pos[1] === t.pos[1] ? 4 : 2;
    case kn:
      return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
    case jt:
      return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
    case Sn:
      return e.pos[0] <= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2;
  }
  else if (a === kn) switch (n) {
    case vt:
      return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case kn:
      return e.pos[1] >= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
    case jt:
      return e.pos[0] === t.pos[0] ? 4 : 2;
    case Sn:
      return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
  }
  else if (a === jt) switch (n) {
    case vt:
      return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
    case kn:
      return e.pos[0] === t.pos[0] ? 4 : 2;
    case jt:
      return e.pos[1] <= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
    case Sn:
      return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
  }
  return 0;
}, mN = ([e, t], n) => [ss([e, t - 1], n), ss([e + 1, t], n), ss([e, t + 1], n), ss([e - 1, t], n)], ss = ([e, t], n) => e < 0 || e >= n.col || t < 0 || t >= n.row ? null : n.data[t * n.col + e] ?? null, jc = (e, t) => {
  for (let n = 0; n < t.col; n++) for (let a = 0; a < t.row; a++) {
    let i = ss([n, a], t);
    if (i && e[0] === i.pos[0] && e[1] === i.pos[1]) return i;
  }
  return null;
}, i3 = (e) => [Math.min(...e.map((t) => t[0])), Math.min(...e.map((t) => t[1])), Math.max(...e.map((t) => t[2])), Math.max(...e.map((t) => t[3]))], go = (e, t) => {
  let n = t.get(e);
  return n && xa(n) ? n : null;
}, mr = (e, t, n, a) => {
  let i = e[0][0], r = e[0][1], l = e.map((o) => Qd(o, yt(se(e[0]), -1)));
  return (i < -et || i > et || r < -et || r > et || i + l[l.length - 1][0] < -et || r + l[l.length - 1][0] > et || i + l[l.length - 1][1] < -et || r + l[l.length - 1][1] > et) && console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)", { x: i, y: r, points: l, ...ho(l) }), l = l.map(([o, c]) => k(Me(o, -1e6, 1e6), Me(c, -1e6, 1e6))), { points: l, x: Me(i, -1e6, 1e6), y: Me(r, -1e6, 1e6), fixedSegments: ((t == null ? void 0 : t.length) ?? 0) > 0 ? t : null, ...ho(l), startIsSpecial: n, endIsSpecial: a };
}, kp = (e) => {
  if (e.length > 1) {
    let t = Math.abs(e[0][1] - e[1][1]) < Math.abs(e[0][0] - e[1][0]);
    return e.filter((n, a) => {
      if (a === 0 || a === e.length - 1) return !0;
      let i = e[a + 1], r = Math.abs(n[1] - i[1]) < Math.abs(n[0] - i[0]);
      return t === r ? (t = r, !1) : (t = r, !0);
    });
  }
  return e;
}, Mp = (e) => e.length >= 4 ? e.filter((t, n) => {
  if (n === 0 || n === e.length - 1) return !0;
  let a = e[n - 1];
  return ze(a, t) > wp;
}) : e, gN = (e) => {
  switch (e) {
    case 0:
      return kn;
    case 1:
      return vt;
    case 2:
      return jt;
  }
  return Sn;
}, og = (e, t, n, a, i, r, l) => {
  if (l) {
    if (r) {
      let o = js(e, r, t);
      return XR(r, o);
    }
    return a;
  }
  if (i) {
    let o = A1(n || [0, 0], i);
    return Math.abs(ef(i, o) - nt) > 0.01 ? js(e, i, t) : o;
  }
  return a;
}, sg = (e, t, n, a, i) => zR(e, t, a, a && Xa(a, Array(4).fill(ef(a, e))), n, i), cg = (e, t, n, a) => Ua(ha(e), n, t, a, !0, !0), dg = (e, t) => e[0] === t[0] && e[1] === t[1], Cp = (e, t = wp) => e.slice(1).map((n, a) => Math.abs(n[0] - e[a][0]) < t || Math.abs(n[1] - e[a][1]) < t).every(Boolean), bN = { selection: !0, text: !0, rectangle: !0, diamond: !0, ellipse: !0, line: !0, image: !0, arrow: !0, freedraw: !0, eraser: !1, custom: !0, frame: !0, embeddable: !0, hand: !0, laser: !1, magicframe: !1 }, vN = (e) => Object.keys(ht).includes(e) ? ht[e] : Er, Tl = (e, t) => {
  if (!t) return null;
  let n = t.focus || 0;
  return te(e) ? au(t) ? { ...t, focus: n, fixedPoint: rf(t.fixedPoint ?? [0, 0]) } : null : { ...t, focus: n };
}, ji = (e, t) => {
  let n = { type: t.type || e.type, version: e.version || 1, versionNonce: e.versionNonce ?? 0, index: e.index ?? null, isDeleted: e.isDeleted ?? !1, id: e.id || na(), fillStyle: e.fillStyle || bt.fillStyle, strokeWidth: e.strokeWidth || bt.strokeWidth, strokeStyle: e.strokeStyle ?? bt.strokeStyle, roughness: e.roughness ?? bt.roughness, opacity: e.opacity == null ? bt.opacity : e.opacity, angle: e.angle || 0, x: t.x ?? e.x ?? 0, y: t.y ?? e.y ?? 0, strokeColor: e.strokeColor || bt.strokeColor, backgroundColor: e.backgroundColor || bt.backgroundColor, width: e.width || 0, height: e.height || 0, seed: e.seed ?? 1, groupIds: e.groupIds ?? [], frameId: e.frameId ?? null, roundness: e.roundness ? e.roundness : e.strokeSharpness === "round" ? { type: To(e.type) ? Pt.LEGACY : Pt.PROPORTIONAL_RADIUS } : null, boundElements: e.boundElementIds ? e.boundElementIds.map((a) => ({ type: "arrow", id: a })) : e.boundElements ?? [], updated: e.updated ?? Io(), link: e.link ? Nn(e.link) : null, locked: e.locked ?? !1 };
  return ("customData" in e || "customData" in t) && (n.customData = "customData" in t ? t.customData : e.customData), { ...e, ...n, ...b3(n), ...t };
}, yN = (e) => {
  switch (e = { ...e }, e.type) {
    case "text":
      delete e.rawText;
      let t = e.fontSize, n = e.fontFamily;
      if ("font" in e) {
        let [s, u] = e.font.split(" ");
        t = parseFloat(s), n = vN(u);
      }
      let a = typeof e.text == "string" && e.text || "", i = e.lineHeight || (e.height ? VM(e) : dl(e.fontFamily));
      return e = ji(e, { fontSize: t, fontFamily: n, text: a, textAlign: e.textAlign || fc, verticalAlign: e.verticalAlign || Gd, containerId: e.containerId ?? null, originalText: e.originalText || a, autoResize: e.autoResize ?? !0, lineHeight: i }), !a && !e.isDeleted && (e = { ...e, originalText: a, isDeleted: !0 }, e = pf(e)), e;
    case "freedraw":
      return ji(e, { points: e.points, lastCommittedPoint: null, simulatePressure: e.simulatePressure, pressures: e.pressures });
    case "image":
      return ji(e, { status: e.status || "pending", fileId: e.fileId, scale: e.scale || [1, 1], crop: e.crop ?? null });
    case "line":
    case "draw":
      let { startArrowhead: r = null, endArrowhead: l = null } = e, o = e.x, c = e.y, d = !Array.isArray(e.points) || e.points.length < 2 ? [k(0, 0), k(e.width, e.height)] : e.points;
      return (d[0][0] !== 0 || d[0][1] !== 0) && ({ points: d, x: o, y: c } = ee.getNormalizedPoints(e)), ji(e, { type: e.type === "draw" ? "line" : e.type, startBinding: Tl(e, e.startBinding), endBinding: Tl(e, e.endBinding), lastCommittedPoint: null, startArrowhead: r, endArrowhead: l, points: d, x: o, y: c, ...ho(d) });
    case "arrow": {
      let { startArrowhead: s = null, endArrowhead: u = "arrow" } = e, f = e.x, h = e.y, U = !Array.isArray(e.points) || e.points.length < 2 ? [k(0, 0), k(e.width, e.height)] : e.points;
      (U[0][0] !== 0 || U[0][1] !== 0) && ({ points: U, x: f, y: h } = ee.getNormalizedPoints(e));
      let m = { type: e.type, startBinding: Tl(e, e.startBinding), endBinding: Tl(e, e.endBinding), lastCommittedPoint: null, startArrowhead: s, endArrowhead: u, points: U, x: f, y: h, elbowed: e.elbowed, ...ho(U) };
      return te(e) ? ji(e, { ...m, elbowed: !0, startBinding: Tl(e, e.startBinding), endBinding: Tl(e, e.endBinding), fixedSegments: e.fixedSegments, startIsSpecial: e.startIsSpecial, endIsSpecial: e.endIsSpecial }) : ji(e, m);
    }
    case "ellipse":
    case "rectangle":
    case "diamond":
    case "iframe":
    case "embeddable":
      return ji(e, {});
    case "magicframe":
    case "frame":
      return ji(e, { name: e.name ?? null });
  }
  return null;
}, wN = (e, t) => {
  if (e.boundElements) {
    let n = e.boundElements.slice(), a = /* @__PURE__ */ new Set();
    e.boundElements = n.reduce((i, r) => {
      let l = t.get(r.id);
      if (l && !a.has(r.id)) {
        if (a.add(r.id), l.isDeleted) return i;
        i.push(r), J(l) && !l.containerId && (l.containerId = e.id);
      }
      return i;
    }, []);
  }
}, EN = (e, t) => {
  let n = e.containerId ? t.get(e.containerId) : null;
  if (!n) {
    e.containerId = null;
    return;
  }
  if (!e.isDeleted && n.boundElements && !n.boundElements.find((a) => a.id === e.id)) {
    let a = (n.boundElements || (n.boundElements = [])).slice();
    a.push({ type: "text", id: e.id }), n.boundElements = a;
  }
}, xN = (e, t) => {
  e.frameId && (t.get(e.frameId) || (e.frameId = null));
}, Ip = (e, t, n) => {
  let a = /* @__PURE__ */ new Set(), i = t ? he(t) : null, r = Li((e || []).reduce((o, c) => {
    if (c.type !== "selection" && !vo(c)) {
      let d = yN(c);
      if (d) {
        let s = i == null ? void 0 : i.get(c.id);
        s && s.version > d.version && (d = pf(d, s.version)), a.has(d.id) && (d = { ...d, id: na() }), a.add(d.id), o.push(d);
      }
    }
    return o;
  }, []));
  if (!(n != null && n.repairBindings)) return r;
  let l = he(r);
  for (let o of r) o.frameId && xN(o, l), J(o) && o.containerId ? EN(o, l) : o.boundElements && wN(o, l), n.refreshDimensions && J(o) && Object.assign(o, L7(o, Zt(o, l), l)), me(o) && (o.startBinding && (!l.has(o.startBinding.elementId) || !xe(o)) && (o.startBinding = null), o.endBinding && (!l.has(o.endBinding.elementId) || !xe(o)) && (o.endBinding = null));
  return r.map((o) => {
    if (te(o) && o.startBinding == null && o.endBinding == null && !Cp(o.points)) return { ...o, ...Ep(o, l, { points: [k(0, 0), o.points[o.points.length - 1]] }), index: o.index };
    if (te(o) && o.startBinding && o.endBinding && o.startBinding.elementId === o.endBinding.elementId && o.points.length > 1 && o.points.some(([c, d]) => Math.abs(c) > 1e6 || Math.abs(d) > 1e6)) {
      console.error("Fixing self-bound elbow arrow", o.id);
      let c = l.get(o.startBinding.elementId);
      return c ? { ...o, x: c.x + c.width / 2, y: c.y - 5, width: c.width, height: c.height, points: [k(0, 0), k(0, -10), k(c.width / 2 + 5, -10), k(c.width / 2 + 5, c.height / 2 + 5)] } : (console.error("Bound element not found", o.startBinding.elementId), o);
    }
    return o;
  });
}, SN = (e, t, n) => {
  let a = t[e];
  return a !== void 0 ? a : n[e];
}, ug = { isSidebarDocked: (e, t) => ["defaultSidebarDockedPreference", e.isSidebarDocked ?? SN("defaultSidebarDockedPreference", e, t)] }, kN = (e, t) => {
  var i;
  e = e || {};
  let n = ei(), a = {};
  for (let r of Object.keys(ug)) if (r in e) {
    let [l, o] = ug[r](e, n);
    a[l] = o;
  }
  for (let [r, l] of Object.entries(n)) {
    let o = e[r], c = t ? t[r] : void 0;
    a[r] = o !== void 0 ? o : c !== void 0 ? c : l;
  }
  return { ...a, cursorButton: (t == null ? void 0 : t.cursorButton) || "up", penDetected: (t == null ? void 0 : t.penDetected) ?? (e.penMode ? e.penDetected ?? !1 : !1), activeTool: { ..._t(n, a.activeTool.type && bN[a.activeTool.type] ? a.activeTool : { type: "selection" }), lastActiveTool: null, locked: a.activeTool.locked ?? !1 }, zoom: { value: Si(bs(e.zoom) ? e.zoom : ((i = e.zoom) == null ? void 0 : i.value) ?? n.zoom.value) }, openSidebar: typeof e.openSidebar == "string" ? { name: ba.name } : a.openSidebar, gridSize: qR(bs(e.gridSize) ? e.gridSize : Yd), gridStep: b7(bs(e.gridStep) ? e.gridStep : Wb), editingFrame: null };
}, uf = (e, t, n, a) => ({ elements: Ip(e == null ? void 0 : e.elements, n, a), appState: kN(e == null ? void 0 : e.appState, t || null), files: (e == null ? void 0 : e.files) || {} }), fg = (e) => {
  let t = Ip(at(e.elements), null);
  return t.length ? { ...e, elements: t } : null;
}, Tp = (e = [], t) => {
  let n = [];
  for (let a of e) if (Array.isArray(a)) {
    let i = fg({ status: t, elements: a, id: na(), created: Date.now() });
    i && n.push(i);
  } else {
    let i = a, r = fg({ ...i, id: i.id || na(), status: i.status || t, created: i.created || Date.now() });
    r && n.push(r);
  }
  return n;
}, da = 32, tt = 12, fr = 256, r3 = 50, Fr = "NOT_SPREADSHEET", Qs = "VALID_SPREADSHEET", cs = (e) => {
  let t = /^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);
  return t ? parseFloat(`${(t[1] || t[2]) + t[3]}`.replace(/,/g, "")) : null;
}, Uh = (e, t) => e.slice(1).every((n) => cs(n[t]) !== null), hg = (e) => {
  let t = e[0].length;
  if (t > 2) return { type: Fr, reason: "More than 2 columns" };
  if (t === 1) {
    if (!Uh(e, 0)) return { type: Fr, reason: "Value is not numeric" };
    let c = cs(e[0][0]) === null, d = (c ? e.slice(1) : e).map((s) => cs(s[0]));
    return d.length < 2 ? { type: Fr, reason: "Less than two rows" } : { type: Qs, spreadsheet: { title: c ? e[0][0] : null, labels: null, values: d } };
  }
  let n = Uh(e, 0), a = Uh(e, 1);
  if (!n && !a) return { type: Fr, reason: "Value is not numeric" };
  let [i, r] = a ? [0, 1] : [1, 0], l = cs(e[0][r]) === null, o = l ? e.slice(1) : e;
  return o.length < 2 ? { type: Fr, reason: "Less than 2 rows" } : { type: Qs, spreadsheet: { title: l ? e[0][r] : null, labels: o.map((c) => c[i]), values: o.map((c) => cs(c[r])) } };
}, MN = (e) => {
  let t = [];
  for (let n = 0; n < e[0].length; n++) {
    let a = [];
    for (let i = 0; i < e.length; i++) a.push(e[i][n]);
    t.push(a);
  }
  return t;
}, CN = (e) => {
  let t = e.trim().split(`
`).map((i) => i.trim().split("	"));
  if (t.length && t[0].length !== 2 && (t = e.trim().split(`
`).map((i) => i.trim().split(","))), t.length === 0) return { type: Fr, reason: "No values" };
  let n = t[0].length;
  if (!t.every((i) => i.length === n)) return { type: Fr, reason: "All rows don't have same number of columns" };
  let a = hg(t);
  if (a.type !== Qs) {
    let i = hg(MN(t));
    if (i.type === Qs) return i;
  }
  return a;
}, gu = Tk(Mk), Kn = { fillStyle: "hachure", fontFamily: Er, fontSize: Fi, opacity: 100, roughness: 1, strokeColor: ke.black, roundness: null, strokeStyle: "solid", strokeWidth: 1, verticalAlign: Pn.MIDDLE, locked: !1 }, l3 = (e) => {
  let t = (da + tt) * e.values.length + tt, n = fr + tt * 2;
  return { chartWidth: t, chartHeight: n };
}, IN = (e, t, n, a, i) => {
  var r;
  return ((r = e.labels) == null ? void 0 : r.map((l, o) => $n({ groupIds: [a], backgroundColor: i, ...Kn, text: l.length > 8 ? `${l.slice(0, 5)}...` : l, x: t + o * (da + tt) + tt * 2, y: n + tt / 2, width: da, angle: 5.87, fontSize: 16, textAlign: "center", verticalAlign: "top" }))) || [];
}, TN = (e, t, n, a, i) => {
  let r = $n({ groupIds: [a], backgroundColor: i, ...Kn, x: t - tt, y: n - tt, text: "0", textAlign: "right" }), l = $n({ groupIds: [a], backgroundColor: i, ...Kn, x: t - tt, y: n - fr - r.height / 2, text: Math.max(...e.values).toLocaleString(), textAlign: "right" });
  return [r, l];
}, _N = (e, t, n, a, i) => {
  let { chartWidth: r, chartHeight: l } = l3(e), o = qr({ backgroundColor: i, groupIds: [a], ...Kn, type: "line", x: t, y: n, width: r, points: [k(0, 0), k(r, 0)] }), c = qr({ backgroundColor: i, groupIds: [a], ...Kn, type: "line", x: t, y: n, height: l, points: [k(0, 0), k(0, -l)] }), d = qr({ backgroundColor: i, groupIds: [a], ...Kn, type: "line", x: t, y: n - fr - tt, strokeStyle: "dotted", width: r, opacity: r3, points: [k(0, 0), k(r, 0)] });
  return [o, c, d];
}, o3 = (e, t, n, a, i, r) => {
  let { chartWidth: l, chartHeight: o } = l3(e), c = e.title ? $n({ backgroundColor: i, groupIds: [a], ...Kn, text: e.title, x: t + l / 2, y: n - fr - tt * 2 - Fi, roundness: null, textAlign: "center" }) : null, d = r ? ai({ backgroundColor: i, groupIds: [a], ...Kn, type: "rectangle", x: t, y: n - o, width: l, height: o, strokeColor: ke.black, fillStyle: "solid", opacity: 6 }) : null;
  return [...d ? [d] : [], ...c ? [c] : [], ...IN(e, t, n, a, i), ...TN(e, t, n, a, i), ..._N(e, t, n, a, i)];
}, AN = (e, t, n) => {
  let a = Math.max(...e.values), i = na(), r = gu[Math.floor(Math.random() * gu.length)];
  return [...e.values.map((l, o) => {
    let c = l / a * fr;
    return ai({ backgroundColor: r, groupIds: [i], ...Kn, type: "rectangle", x: t + o * (da + tt) + tt, y: n - c - tt, width: da, height: c });
  }), ...o3(e, t, n, i, r, we.DEV)];
}, DN = (e, t, n) => {
  let a = Math.max(...e.values), i = na(), r = gu[Math.floor(Math.random() * gu.length)], l = 0, o = [];
  for (let m of e.values) {
    let g = l * (da + tt), b = -(m / a) * fr;
    o.push([g, b]), l++;
  }
  let c = Math.max(...o.map((m) => m[0])), d = Math.max(...o.map((m) => m[1])), s = Math.min(...o.map((m) => m[0])), u = Math.min(...o.map((m) => m[1])), f = qr({ backgroundColor: r, groupIds: [i], ...Kn, type: "line", x: t + tt + da / 2, y: n - tt, height: d - u, width: c - s, strokeWidth: 2, points: o }), h = e.values.map((m, g) => {
    let b = g * (da + tt) + tt / 2, v = -(m / a) * fr + tt / 2;
    return ai({ backgroundColor: r, groupIds: [i], ...Kn, fillStyle: "solid", strokeWidth: 2, type: "ellipse", x: t + b + da / 2, y: n + v - tt * 2, width: tt, height: tt });
  }), U = e.values.map((m, g) => {
    let b = g * (da + tt) + tt / 2, v = m / a * fr + tt / 2 + tt;
    return qr({ backgroundColor: r, groupIds: [i], ...Kn, type: "line", x: t + b + da / 2 + tt / 2, y: n - v, height: v, strokeStyle: "dotted", opacity: r3, points: [k(0, 0), k(0, v)] });
  });
  return [...o3(e, t, n, i, r, we.DEV), f, ...U, ...h];
}, LN = (e, t, n, a) => e === "line" ? DN(t, n, a) : AN(t, n, a), _p = "clipboard" in navigator && "writeText" in navigator.clipboard, Ap = "clipboard" in navigator && "write" in navigator.clipboard && "ClipboardItem" in window && "toBlob" in HTMLCanvasElement.prototype, RN = (e) => !!([Zn.excalidraw, Zn.excalidrawClipboard, Zn.excalidrawClipboardWithAPI].includes(e == null ? void 0 : e.type) && Array.isArray(e.elements)), PN = ({ types: e, files: t }) => {
  var a, i, r, l;
  !e && !t && console.warn("createPasteEvent: no types or files provided");
  let n = new ClipboardEvent("paste", { clipboardData: new DataTransfer() });
  if (e) for (let [o, c] of Object.entries(e)) {
    if (typeof c != "string") {
      t = t || [], t.push(c);
      continue;
    }
    try {
      if ((a = n.clipboardData) == null || a.setData(o, c), ((i = n.clipboardData) == null ? void 0 : i.getData(o)) !== c) throw new Error(`Failed to set "${o}" as clipboardData item`);
    } catch (d) {
      throw new Error(d.message);
    }
  }
  if (t) {
    let o = -1;
    for (let c of t) {
      o++;
      try {
        if ((r = n.clipboardData) == null || r.items.add(c), ((l = n.clipboardData) == null ? void 0 : l.files[o]) !== c) throw new Error(`Failed to set file "${c.name}" as clipboardData item`);
      } catch (d) {
        throw new Error(d.message);
      }
    }
  }
  return n;
}, NN = ({ elements: e, files: t }) => {
  let n = he(e), a = new Set(e.filter((o) => fe(o))), i = !1, r = e.reduce((o, c) => (Vn(c) && (i = !0, t && t[c.fileId] && (o[c.fileId] = t[c.fileId])), o), {});
  i && !t && console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");
  let l = { type: Zn.excalidrawClipboard, elements: e.map((o) => {
    if (Tn(o, n) && !a.has(Tn(o, n))) {
      let c = wl(o);
      return G(c, { frameId: null }), c;
    }
    return o;
  }), files: t ? r : void 0 };
  return JSON.stringify(l);
}, ON = async (e, t, n) => {
  await yc(NN({ elements: e, files: t }), n);
}, $N = (e) => {
  let t = CN(e);
  return t.type === Qs ? { spreadsheet: t.spreadsheet } : null;
};
function s3(e) {
  var n;
  let t = [];
  for (let a of e.childNodes) if (a.nodeType === 3) {
    let i = (n = a.textContent) == null ? void 0 : n.trim();
    i && t.push({ type: "text", value: i });
  } else if (a instanceof HTMLImageElement) {
    let i = a.getAttribute("src");
    i && i.startsWith("http") && t.push({ type: "imageUrl", value: i });
  } else t = t.concat(s3(a));
  return t;
}
var zN = (e) => {
  var n;
  let t = (n = e.clipboardData) == null ? void 0 : n.getData(de.html);
  if (!t) return null;
  try {
    let a = new DOMParser().parseFromString(t, de.html), i = s3(a.body);
    if (i.length) return { type: "mixedContent", value: i };
  } catch (a) {
    console.error(`error in parseHTMLFromPaste: ${a.message}`);
  }
  return null;
}, FN = async () => {
  var n, a, i, r;
  let e = {}, t;
  try {
    t = await ((n = navigator.clipboard) == null ? void 0 : n.read());
  } catch (l) {
    try {
      if ((a = navigator.clipboard) != null && a.readText) {
        console.warn(`navigator.clipboard.readText() failed (${l.message}). Failling back to navigator.clipboard.read()`);
        let o = await ((i = navigator.clipboard) == null ? void 0 : i.readText());
        if (o) return { [de.text]: o };
      }
    } catch (o) {
      if ((r = navigator.clipboard) != null && r.read) console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);
      else {
        if (o.name === "DataError") return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${o.message}`), e;
        throw o;
      }
    }
    throw l;
  }
  for (let l of t) for (let o of l.types) if (r8(Wk, o)) try {
    if (o === de.text || o === de.html) e[o] = await (await l.getType(o)).text();
    else if (C3(o)) {
      let c = await l.getType(o), d = ds(c, o, void 0);
      e[o] = d;
    } else throw new xm(`Unsupported clipboard type: ${o}`);
  } catch (c) {
    console.warn(c instanceof xm ? c.message : `Cannot retrieve ${o} from clipboardItem: ${c.message}`);
  }
  return Object.keys(e).length === 0 && console.warn("No clipboard data found from clipboard.read()."), e;
}, BN = async (e, t = !1) => {
  var n, a;
  try {
    let i = !t && e && zN(e);
    return i ? i.value.every((r) => r.type === "text") ? { type: "text", value: ((n = e.clipboardData) == null ? void 0 : n.getData(de.text)) || i.value.map((r) => r.value).join(`
`).trim() } : i : { type: "text", value: (((a = e.clipboardData) == null ? void 0 : a.getData(de.text)) || "").trim() };
  } catch {
    return { type: "text", value: "" };
  }
}, c3 = async (e, t = !1) => {
  let n = await BN(e, t);
  if (n.type === "mixedContent") return { mixedContent: n.value };
  try {
    let a = !t && $N(n.value);
    if (a) return a;
  } catch (a) {
    console.error(a);
  }
  try {
    let a = JSON.parse(n.value), i = a.type === Zn.excalidrawClipboardWithAPI;
    if (RN(a)) return { elements: a.elements, files: a.files, text: t ? JSON.stringify(a.elements, null, 2) : void 0, programmaticAPI: i };
  } catch {
  }
  return { text: n.value };
}, HN = async (e) => {
  try {
    await navigator.clipboard.write([new window.ClipboardItem({ [de.png]: e })]);
  } catch (t) {
    if (Uc(e)) await navigator.clipboard.write([new window.ClipboardItem({ [de.png]: await e })]);
    else throw t;
  }
}, yc = async (e, t) => {
  var n, a;
  if (_p) try {
    await navigator.clipboard.writeText(e || "");
    return;
  } catch (i) {
    console.error(i);
  }
  try {
    if (t) {
      if ((n = t.clipboardData) == null || n.setData(de.text, e || ""), ((a = t.clipboardData) == null ? void 0 : a.getData(de.text)) !== e) throw new Error("Failed to setData on clipboardEvent");
      return;
    }
  } catch (i) {
    console.error(i);
  }
  if (!XN(e)) throw new Error("Error copying to clipboard.");
}, XN = (e) => {
  e || (e = " ");
  let t = document.documentElement.getAttribute("dir") === "rtl", n = document.createElement("textarea");
  n.style.border = "0", n.style.padding = "0", n.style.margin = "0", n.style.position = "absolute", n.style[t ? "right" : "left"] = "-9999px";
  let a = window.pageYOffset || document.documentElement.scrollTop;
  n.style.top = `${a}px`, n.style.fontSize = "12pt", n.setAttribute("readonly", ""), n.value = e, document.body.appendChild(n);
  let i = !1;
  try {
    n.select(), n.setSelectionRange(0, n.value.length), i = document.execCommand("copy");
  } catch (r) {
    console.error(r);
  }
  return n.remove(), i;
}, Dp = ({ elements: e, appState: t, files: n, maxWidthOrHeight: a, getDimensions: i, exportPadding: r, exportingFrame: l }) => {
  let { elements: o, appState: c } = uf({ elements: e, appState: t }, null, null), { exportBackground: d, viewBackgroundColor: s } = c;
  return a3(o, { ...c, offsetTop: 0, offsetLeft: 0, width: 0, height: 0 }, n || {}, { exportBackground: d, exportPadding: r, viewBackgroundColor: s, exportingFrame: l }, (u, f) => {
    let h = document.createElement("canvas");
    if (a) {
      typeof i == "function" && console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");
      let m = Math.max(u, f), g = a < m ? a / m : (t == null ? void 0 : t.exportScale) ?? 1;
      return h.width = u * g, h.height = f * g, { canvas: h, scale: g };
    }
    let U = (i == null ? void 0 : i(u, f)) || { width: u, height: f };
    return h.width = U.width, h.height = U.height, { canvas: h, scale: U.scale ?? 1 };
  });
}, Lp = async ({ elements: e, appState: t = ei(), files: n = {}, exportPadding: a, renderEmbeddables: i, exportingFrame: r, skipInliningFonts: l, reuseImages: o }) => {
  let { elements: c, appState: d } = uf({ elements: e, appState: t }, null, null), s = { ...d, exportPadding: a };
  return vp(c, s, n, { exportingFrame: r, renderEmbeddables: i, skipInliningFonts: l, reuseImages: o });
}, WN = (e) => e.type === "diamond" ? [k(e.width / 2, 0), k(e.width, e.height / 2), k(e.width / 2, e.height), k(0, e.height / 2)] : [k(0, 0), k(0 + e.width, 0), k(0 + e.width, e.height), k(0, e.height)], VN = (e) => me(e) || ea(e) ? e.points : WN(e), pg = (e) => {
  let t = e.reduce((n, [a, i]) => (n.minY = Math.min(n.minY, i), n.minX = Math.min(n.minX, a), n.maxX = Math.max(n.maxX, a), n.maxY = Math.max(n.maxY, i), n), { minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0, cx: 0, cy: 0 });
  return t.cx = (t.maxX + t.minX) / 2, t.cy = (t.maxY + t.minY) / 2, t;
}, GN = (e) => {
  let t = VN(e), { cx: n, cy: a } = pg(t), i = k(n, a), r = t.map((s) => X(s, i, e.angle)), { minX: l, minY: o, maxX: c, maxY: d } = pg(r);
  return [l + e.x, o + e.y, c + e.x, d + e.y];
}, jN = (e, t) => {
  let n = GN(e);
  return (Hc(n[0], an(t[0], t[2])) || Hc(t[0], an(n[0], n[2]))) && (Hc(n[1], an(t[1], t[3])) || Hc(t[1], an(n[1], n[3])));
}, YN = ({ elements: e, bounds: t, type: n, errorMargin: a = 0 }) => {
  var l;
  c8(t) && (t = Sa(t, he(e)));
  let i = [t[0] - a, t[1] - a, t[2] + a, t[3] + a], r = /* @__PURE__ */ new Set();
  for (let o of e)
    if (!r.has(o.id) && jN(o, i)) {
      if (r.add(o.id), o.boundElements) for (let c of o.boundElements) r.add(c.id);
      J(o) && o.containerId && r.add(o.containerId), xe(o) && (o.startBinding && r.add(o.startBinding.elementId), o.endBinding && r.add((l = o.endBinding) == null ? void 0 : l.elementId));
    }
  return e.filter((o) => r.has(o.id));
};
function Ug(e) {
  return [Math.min(e[0][0], e[1][0]), Math.min(e[0][1], e[1][1]), Math.max(e[0][0], e[1][0]), Math.max(e[0][1], e[1][1])];
}
function ZN(e, t) {
  return e[0] <= t[2] && e[2] >= t[0] && e[1] <= t[3] && e[3] >= t[1];
}
var KN = 1e-6;
function mg(e, t) {
  let n = se(e[1], e[0]), a = se(t, e[0]), i = $t(n, a);
  return Math.abs(i) < KN;
}
function mh(e, t) {
  let n = se(e[1], e[0]), a = se(t, e[0]);
  return $t(n, a) < 0;
}
function gg(e, t) {
  return mg(e, t[0]) || mg(e, t[1]) || (mh(e, t[0]) ? !mh(e, t[1]) : mh(e, t[1]));
}
function qN(e, t) {
  return ZN(Ug(e), Ug(t)) && gg(e, t) && gg(t, e);
}
var d3 = (e, t, n) => {
  let a = he(e);
  for (let i of t) if (i.frameId) {
    let r = n.get(i.id), l = n.get(i.frameId);
    if (r) {
      let o = a.get(r);
      o && G(o, { frameId: l ?? i.frameId }, !1);
    }
  }
};
function Rp(e, t, n) {
  let a = Dm(t, n), i = Dm(e, n);
  return a.some((r) => i.some((l) => qN(r, l)));
}
var u3 = (e, t, n) => hf(Fp(e, t, n, !1)).filter((a) => !fe(a) && !a.frameId || a.frameId === t.id), Pp = (e, t, n) => Fp([t], e, n).some((a) => a.id === t.id), wc = (e, t, n) => {
  let [a, i, r, l] = ge(t, n), [o, c, d, s] = We(e);
  return a <= o && i <= c && r >= d && l >= s;
}, gr = (e, t, n) => wc([e], t, n) || Rp(e, t, n) || Pp(e, t, n), bg = (e, t, n) => {
  let [a, i, r, l] = ge(t, n);
  return Kb(k(a, i), k(e.x, e.y), k(r, l));
}, JN = (e) => {
  let t = /* @__PURE__ */ new Map();
  for (let n of e) {
    let a = fe(n) ? n.id : n.frameId;
    a && !t.has(a) && t.set(a, ri(e, a));
  }
  return t;
}, ri = (e, t) => {
  let n = [];
  for (let a of e.values()) a.frameId === t && n.push(a);
  return n;
}, Np = (e) => e.filter((t) => fe(t)), Op = (e) => {
  let t = he(Np(e));
  return e.filter((n) => t.has(n.id) || !n.frameId || !t.has(n.frameId));
}, Cd = (e, t, n, a) => {
  let i = ri(e, t.id), r = new Set(i), l = /* @__PURE__ */ new Set([...u3(e, t, a), ...i.filter((f) => Pp(f, t, a))]), o = i.filter((f) => !l.has(f)), c = new Set(Array.from(l).flatMap((f) => f.groupIds));
  for (let f of o) if (!Rp(f, t, a)) f.groupIds.length === 0 && r.delete(f);
  else if (f.groupIds.length > 0) for (let h of f.groupIds) c.add(h);
  for (let f of o) if (f.groupIds.length > 0) {
    let h = !0;
    for (let U of f.groupIds) c.has(U) && (h = !1);
    h && r.delete(f);
  }
  let d = Array.from(l).filter((f) => f.groupIds.length === 0);
  for (let f of d) r.add(f);
  let s = Array.from(l).filter((f) => f.groupIds.length > 0), u = E7(s, n);
  for (let [f, h] of Object.entries(u)) if (h) {
    let U = ot(e, f);
    if (wc(U, t, a)) for (let m of U) r.add(m);
  }
  return [...r].filter((f) => !(J(f) && f.containerId));
}, QN = (e, t, n) => eO(hf(e, u3(e, t, n)), t, n), eO = (e, t, n) => {
  let a = [], i = /* @__PURE__ */ new Map();
  for (let r of e) {
    let l = !1;
    if (r.groupIds.length > 0) {
      if (r.groupIds.some((o) => i.get(o))) l = !0;
      else {
        let o = new Set(r.groupIds.flatMap((c) => ot(n, c)));
        l = !wc(Array.from(o), t, n);
      }
      r.groupIds.forEach((o) => {
        i.set(o, l);
      });
    }
    l || a.push(r);
  }
  return a;
}, Tn = (e, t) => e.frameId && t.get(e.frameId) || null, tO = (e, t) => {
  let n = /* @__PURE__ */ new Set(), a = he(e);
  e = hf(e);
  for (let l of e) fe(l) && l.id !== t.id && n.add(l.id);
  let i = /* @__PURE__ */ new Set(), r = [];
  for (let l of e) if (!(fe(l) || l.frameId && n.has(l.frameId))) if (l.groupIds.length) {
    let o = l.groupIds.at(-1);
    if (!i.has(o)) {
      i.add(o);
      let c = ot(e, o);
      if (c.some((d) => gr(d, t, a))) for (let d of c) r.push(d);
    }
  } else gr(l, t, a) && r.push(l);
  return r;
}, Ss = (e, t, n, a) => {
  let i = he(e), r = /* @__PURE__ */ new Map();
  for (let d of e.values()) d.frameId === n.id && r.set(d.id, !0);
  let l = new Set(t.map((d) => d.id)), o = [], c = /* @__PURE__ */ new Set();
  for (let d of t) fe(d) && d.id !== n.id && c.add(d.id);
  for (let d of hf(e, t)) {
    if (fe(d) || d.frameId && c.has(d.frameId) || d.frameId && a.selectedElementIds[d.id] && a.selectedElementIds[d.frameId]) continue;
    r.has(d.id) || o.push(d);
    let s = ye(d, i);
    s && !l.has(s.id) && !r.has(s.id) && o.push(s);
  }
  for (let d of o) G(d, { frameId: n.id }, !1);
  return e;
}, ff = (e, t) => {
  let n = /* @__PURE__ */ new Map(), a = /* @__PURE__ */ new Map();
  for (let i of e) if (i.frameId) {
    n.set(i.id, i);
    let r = a.get(i.frameId) || [];
    r.push(i);
    let l = ye(i, t);
    l && (n.set(l.id, l), r.push(l)), a.set(i.frameId, r);
  }
  for (let [, i] of n) G(i, { frameId: null }, !1);
}, f3 = (e, t) => {
  let n = ri(e, t.id);
  return ff(n, he(e)), e;
}, h3 = (e, t, n, a) => Ss(f3(e, n), t, n, a.state).slice(), bo = (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, elements: e }), i = new Set(a);
  if (t.editingGroupId) for (let o of a) o.groupIds.length === 0 ? i.add(o) : o.groupIds.flatMap((c) => ot(e, c)).forEach((c) => i.add(c));
  let r = /* @__PURE__ */ new Set(), l = he(e);
  return i.forEach((o) => {
    o.frameId && !fe(o) && !bu(o, l, t) && r.add(o);
  }), r.size > 0 && ff(r, l), e;
}, hf = (e, t) => {
  let n = /* @__PURE__ */ new Set(), a = t || e;
  for (let l of a.values()) {
    let o = l.groupIds[l.groupIds.length - 1];
    o && n.add(o);
  }
  let i = /* @__PURE__ */ new Set();
  for (let l of n) ot(e, l).some((o) => fe(o)) && i.add(l);
  let r = [];
  for (let l of a.values()) i.has(l.groupIds[l.groupIds.length - 1]) || r.push(l);
  return r;
}, $1 = (e, t, n) => {
  let a = J(e) && Zt(e, t) || e;
  return a.frameId && n.selectedElementIds[a.id] && n.selectedElementIds[a.frameId] ? Tn(a, t) : n.selectedElementIds[a.id] && n.selectedElementsAreBeingDragged ? n.frameToHighlight : Tn(a, t);
}, bu = (e, t, n, a) => {
  var c;
  let i = (a == null ? void 0 : a.targetFrame) ?? $1(e, t, n);
  if (!i) return !1;
  let r = J(e) && Zt(e, t) || e, l = (d) => {
    a != null && a.checkedGroups && r.groupIds.forEach((s) => {
      var u;
      (u = a.checkedGroups) == null || u.set(s, d);
    });
  };
  if (!n.selectedElementIds[r.id] || !n.selectedElementsAreBeingDragged || n.selectedElementIds[r.id] && n.selectedElementIds[i.id]) return !0;
  if (r.groupIds.length === 0) return gr(r, i, t);
  for (let d of r.groupIds) if ((c = a == null ? void 0 : a.checkedGroups) != null && c.has(d)) return a.checkedGroups.get(d);
  let o = new Set(r.groupIds.filter((d) => a != null && a.checkedGroups ? !a.checkedGroups.has(d) : !0).flatMap((d) => ot(t, d)));
  if (n.editingGroupId && n.selectedElementsAreBeingDragged) {
    let d = new Set(Ee(t, n));
    if (n.frameToHighlight !== null) return !0;
    d.forEach((s) => {
      o.delete(s);
    });
  }
  for (let d of o) if (fe(d)) return l(!1), !1;
  for (let d of o) if (gr(d, i, t)) return l(!0), !0;
  return !1;
}, vg = (e, t, n, a, i) => {
  if (!n.frameRendering || !n.frameRendering.clip) return !1;
  let r = Rp(e, t, a) || Pp(e, t, a);
  if (r) {
    for (let l of e.groupIds) i == null || i.set(l, !0);
    return !0;
  }
  if (!r && e.groupIds.length > 0 && !wc([e], t, a)) {
    let l = !1;
    if (n.selectedElementsAreBeingDragged) l = bu(e, a, n, { targetFrame: t, checkedGroups: i });
    else {
      l = e.frameId === t.id;
      for (let o of e.groupIds) i == null || i.set(o, l);
    }
    for (let o of e.groupIds) i == null || i.set(o, l);
    return l;
  }
  return !1;
}, p3 = (e) => e.name === null ? o8(e) ? "Frame" : "AI Frame" : e.name, $p = (e, t) => YN({ elements: e, bounds: t, type: "overlap" }).filter((n) => !n.frameId || n.frameId === t.id), U3 = (e) => {
  let t = he(e);
  return e.length > 1 && e.some((n) => n.frameId && t.has(n.frameId));
}, zp = (e) => {
  let t = /* @__PURE__ */ new Set();
  return e.forEach((n) => {
    fe(n) && t.add(n.id);
  }), e.filter((n) => !(n.frameId && t.has(n.frameId)));
}, Fp = (e, t, n, a = !0) => {
  let [i, r, l, o] = ge(t, n), c = e.filter((d) => {
    let [s, u, f, h] = Sa(d, n), U = Tn(d, n);
    if (U) {
      let [m, g, b, v] = Sa(U, n);
      s = Math.max(m, s), u = Math.max(g, u), f = Math.min(b, f), h = Math.min(v, h);
    }
    return d.locked === !1 && d.type !== "selection" && !st(d) && i <= s && r <= u && l >= f && o >= h;
  });
  return c = a ? zp(c) : c, c = c.filter((d) => {
    let s = Tn(d, n);
    return s ? gr(d, s, n) : !0;
  }), c;
}, m3 = (e, t, n, a) => {
  let i = new Set(t.map((r) => r.id));
  return e.filter((r) => {
    let l = vu(r, n.width, n.height, n, a);
    return !i.has(r.id) && l;
  });
}, Nt = function() {
  let e = null, t = null, n = null, a = (i, r) => (n != null && i === e && r.selectedElementIds === t || (n = i.some((l) => r.selectedElementIds[l.id]), e = i, t = r.selectedElementIds), n);
  return a.clearCache = () => {
    e = null, t = null, n = null;
  }, a;
}(), nO = (e, t, n) => {
  let a = Array.from(new Set(Ee(e, t).map((i) => n(i))));
  return a.length === 1 ? a[0] : null;
}, Ee = (e, t, n) => {
  let a = /* @__PURE__ */ new Set(), i = [];
  for (let r of e.values()) {
    if (t.selectedElementIds[r.id]) {
      i.push(r), a.add(r.id);
      continue;
    }
    if (n != null && n.includeBoundTextElement && st(r) && t.selectedElementIds[r == null ? void 0 : r.containerId]) {
      i.push(r), a.add(r.id);
      continue;
    }
  }
  if (n != null && n.includeElementsInFrames) {
    let r = [];
    return i.forEach((l) => {
      fe(l) && ri(e, l.id).forEach((o) => !a.has(o.id) && r.push(o)), r.push(l);
    }), r;
  }
  return i;
}, g3 = (e, t) => t.editingTextElement ? [t.editingTextElement] : t.newElement ? [t.newElement] : Ee(e, t, { includeBoundTextElement: !0 }), Ne = (e, t) => en(t.selectedElementIds, e) ? t.selectedElementIds : e, yg = (e) => {
  let t = /* @__PURE__ */ new Map(), n = [];
  for (let a of e) a.isDeleted || (n.push(a), t.set(a.id, a));
  return { elementsMap: t, elements: n };
}, aO = dc((e) => {
  (we.DEV || we.MODE === Cn.TEST || window != null && window.DEBUG_FRACTIONAL_INDICES) && hp(e, { shouldThrow: we.DEV || we.MODE === Cn.TEST, includeBoundTextValidation: !0 });
}, 1e3 * 60, { leading: !0, trailing: !1 }), iO = (e) => {
  let t = ["includeBoundTextElement", "includeElementsInFrames"], n = "";
  for (let a of t) n += `${a}:${e[a] ? "1" : "0"}`;
  return n;
}, wg = (e) => typeof e == "string", z1 = class Id {
  constructor() {
    L(this, "callbacks", /* @__PURE__ */ new Set()), L(this, "nonDeletedElements", []), L(this, "nonDeletedElementsMap", Qn(/* @__PURE__ */ new Map())), L(this, "elements", []), L(this, "nonDeletedFramesLikes", []), L(this, "frames", []), L(this, "elementsMap", Qn(/* @__PURE__ */ new Map())), L(this, "selectedElementsCache", { selectedElementIds: null, elements: null, cache: /* @__PURE__ */ new Map() }), L(this, "sceneNonce"), L(this, "insertElement", (t) => {
      let n = t.frameId ? this.getElementIndex(t.frameId) : this.elements.length;
      this.insertElementAtIndex(t, n);
    }), L(this, "insertElements", (t) => {
      var a;
      if (!t.length) return;
      let n = (a = t[0]) != null && a.frameId ? this.getElementIndex(t[0].frameId) : this.elements.length;
      this.insertElementsAtIndex(t, n);
    }), L(this, "getContainerElement", (t) => t && t.containerId && this.getElement(t.containerId) || null), L(this, "getElementsFromId", (t) => {
      let n = this.getNonDeletedElementsMap(), a = n.get(t);
      return a ? [a] : ot(n, t);
    });
  }
  static mapElementToScene(t, n) {
    wg(t) ? this.sceneMapById.set(t, n) : (this.sceneMapByElement.set(t, n), this.sceneMapById.set(t.id, n));
  }
  static getScene(t) {
    return wg(t) ? this.sceneMapById.get(t) || null : this.sceneMapByElement.get(t) || null;
  }
  getSceneNonce() {
    return this.sceneNonce;
  }
  getNonDeletedElementsMap() {
    return this.nonDeletedElementsMap;
  }
  getElementsIncludingDeleted() {
    return this.elements;
  }
  getElementsMapIncludingDeleted() {
    return this.elementsMap;
  }
  getNonDeletedElements() {
    return this.nonDeletedElements;
  }
  getFramesIncludingDeleted() {
    return this.frames;
  }
  getSelectedElements(t) {
    let n = iO(t), a = (t == null ? void 0 : t.elements) || this.nonDeletedElements;
    if (this.selectedElementsCache.elements === a && this.selectedElementsCache.selectedElementIds === t.selectedElementIds) {
      let r = this.selectedElementsCache.cache.get(n);
      if (r) return r;
    } else (t == null ? void 0 : t.elements) == null && this.selectedElementsCache.cache.clear();
    let i = Ee(a, { selectedElementIds: t.selectedElementIds }, t);
    return (t == null ? void 0 : t.elements) == null && (this.selectedElementsCache.selectedElementIds = t.selectedElementIds, this.selectedElementsCache.elements = this.nonDeletedElements, this.selectedElementsCache.cache.set(n, i)), i;
  }
  getNonDeletedFramesLikes() {
    return this.nonDeletedFramesLikes;
  }
  getElement(t) {
    return this.elementsMap.get(t) || null;
  }
  getNonDeletedElement(t) {
    let n = this.getElement(t);
    return n && H1(n) ? n : null;
  }
  mapElements(t) {
    let n = !1, a = this.elements.map((i) => {
      let r = t(i);
      return r !== i && (n = !0), r;
    });
    return n && this.replaceAllElements(a), n;
  }
  replaceAllElements(t) {
    let n = t instanceof Array ? t : Array.from(t.values()), a = [];
    aO(n), this.elements = Li(n), this.elementsMap.clear(), this.elements.forEach((r) => {
      fe(r) && a.push(r), this.elementsMap.set(r.id, r), Id.mapElementToScene(r, this);
    });
    let i = yg(this.elements);
    this.nonDeletedElements = i.elements, this.nonDeletedElementsMap = i.elementsMap, this.frames = a, this.nonDeletedFramesLikes = yg(this.frames).elements, this.triggerUpdate();
  }
  triggerUpdate() {
    this.sceneNonce = ni();
    for (let t of Array.from(this.callbacks)) t();
  }
  onUpdate(t) {
    if (this.callbacks.has(t)) throw new Error();
    return this.callbacks.add(t), () => {
      if (!this.callbacks.has(t)) throw new Error();
      this.callbacks.delete(t);
    };
  }
  destroy() {
    this.elements = [], this.nonDeletedElements = [], this.nonDeletedFramesLikes = [], this.frames = [], this.elementsMap.clear(), this.selectedElementsCache.selectedElementIds = null, this.selectedElementsCache.elements = null, this.selectedElementsCache.cache.clear(), Id.sceneMapById.forEach((t, n) => {
      t === this && Id.sceneMapById.delete(n);
    }), this.callbacks.clear();
  }
  insertElementAtIndex(t, n) {
    if (!Number.isFinite(n) || n < 0) throw new Error("insertElementAtIndex can only be called with index >= 0");
    let a = [...this.elements.slice(0, n), t, ...this.elements.slice(n)];
    ii(a, he([t])), this.replaceAllElements(a);
  }
  insertElementsAtIndex(t, n) {
    if (!t.length) return;
    if (!Number.isFinite(n) || n < 0) throw new Error("insertElementAtIndex can only be called with index >= 0");
    let a = [...this.elements.slice(0, n), ...t, ...this.elements.slice(n)];
    ii(a, he(t)), this.replaceAllElements(a);
  }
  getElementIndex(t) {
    return this.elements.findIndex((n) => n.id === t);
  }
};
L(z1, "sceneMapByElement", /* @__PURE__ */ new WeakMap()), L(z1, "sceneMapById", /* @__PURE__ */ new Map());
var rO = z1, Ri = rO, G = (e, t, n = !0, a) => {
  var s, u;
  let i = !1, { points: r, fixedSegments: l, fileId: o, startBinding: c, endBinding: d } = t;
  if (te(e) && (Object.keys(t).length === 0 || typeof r < "u" || typeof l < "u" || typeof c < "u" || typeof d < "u")) {
    let f = Qn(((s = Ri.getScene(e)) == null ? void 0 : s.getNonDeletedElementsMap()) ?? /* @__PURE__ */ new Map());
    t = { ...t, angle: 0, ...Ep({ ...e, x: t.x || e.x, y: t.y || e.y }, f, { fixedSegments: l, points: r, startBinding: c, endBinding: d }, { isDragging: a == null ? void 0 : a.isDragging }) };
  } else typeof r < "u" && (t = { ...ho(r), ...t });
  for (let f in t) {
    let h = t[f];
    if (typeof h < "u") {
      if (e[f] === h && (typeof h != "object" || h === null || f === "groupIds" || f === "scale")) continue;
      if (f === "scale") {
        let U = e[f], m = h;
        if (U[0] === m[0] && U[1] === m[1]) continue;
      } else if (f === "points") {
        let U = e[f], m = h;
        if (U.length === m.length) {
          let g = !1, b = U.length;
          for (; --b; ) {
            let v = U[b], y = m[b];
            if (v[0] !== y[0] || v[1] !== y[1]) {
              g = !0;
              break;
            }
          }
          if (!g) continue;
        }
      }
      e[f] = h, i = !0;
    }
  }
  return i && ((typeof t.height < "u" || typeof t.width < "u" || typeof o < "u" || typeof r < "u") && mt.delete(e), e.version++, e.versionNonce = ni(), e.updated = Io(), n && ((u = Ri.getScene(e)) == null || u.triggerUpdate())), e;
}, ve = (e, t, n = !1) => {
  let a = !1;
  for (let i in t) {
    let r = t[i];
    if (typeof r < "u") {
      if (e[i] === r && (typeof r != "object" || r === null)) continue;
      a = !0;
    }
  }
  return !a && !n ? e : { ...e, ...t, updated: Io(), version: e.version + 1, versionNonce: ni() };
}, pf = (e, t) => (e.version = (t ?? e.version) + 1, e.versionNonce = ni(), e.updated = Io(), e), vo = (e) => me(e) || ea(e) ? e.points.length < 2 : e.width === 0 && e.height === 0, vu = (e, t, n, a, i) => {
  let [r, l, o, c] = Sa(e, i), d = it({ clientX: a.offsetLeft, clientY: a.offsetTop }, a), s = it({ clientX: a.offsetLeft + t, clientY: a.offsetTop + n }, a);
  return d.x <= o && d.y <= c && s.x >= r && s.y >= l;
}, Td = (e, t, n, a, i, r) => {
  let [l, o, c, d] = We(e, i), s = it({ clientX: a.offsetLeft + ((r == null ? void 0 : r.left) || 0), clientY: a.offsetTop + ((r == null ? void 0 : r.top) || 0) }, a), u = it({ clientX: a.offsetLeft + t - ((r == null ? void 0 : r.right) || 0), clientY: a.offsetTop + n - ((r == null ? void 0 : r.bottom) || 0) }, a);
  return l >= s.x && o >= s.y && c <= u.x && d <= u.y;
}, Eg = (e, t, n) => {
  let a = Math.abs(t), i = Math.abs(n);
  if (e === "line" || e === "arrow" || e === "freedraw") {
    let r = Math.round(Math.atan(i / a) / pr) * pr;
    r === 0 ? n = 0 : r === Math.PI / 2 ? t = 0 : n = a * Math.tan(r) * Math.sign(n) || n;
  } else e !== "selection" && (n = a * Math.sign(n));
  return { width: t, height: n };
}, F1 = (e, t, n, a) => {
  let i = n - e, r = a - t, l = Math.round(Math.atan(r / i) / pr) * pr;
  if (l === 0) r = 0;
  else if (l === Math.PI / 2) i = 0;
  else {
    let o = Math.tan(l), c = -1, d = t - o * e, s = -1 / o, u = -1, f = a - s * n, h = (c * f - u * d) / (o * u - s * c), U = (d * s - f * o) / (o * u - s * c);
    i = h - e, r = U - t;
  }
  return { width: i, height: r };
}, b3 = (e) => {
  let t = { width: e.width, height: e.height, x: e.x, y: e.y };
  if (e.width < 0) {
    let n = Math.abs(e.width);
    t.width = n, t.x = e.x - n;
  }
  if (e.height < 0) {
    let n = Math.abs(e.height);
    t.height = n, t.y = e.y - n;
  }
  return t;
}, xg = { mouse: 8, pen: 16, touch: 28 }, lO = 16, v3 = { e: !0, s: !0, n: !0, w: !0 }, Sg = { e: !0, s: !0, n: !0, w: !0, nw: !0, se: !0 }, gh = { e: !0, s: !0, n: !0, w: !0 }, hi = (e, t, n, a, i, r, l) => {
  let [o, c] = X(k(e + n / 2, t + a / 2), k(i, r), l);
  return [o - n / 2, c - a / 2, n, a];
}, Bp = (e) => !(e.viewport.isMobile || e.isTouchScreen && (Ak || Hb)), ks = (e) => Bp(e) ? v3 : {}, Hp = ([e, t, n, a, i, r], l, o, c, d = {}, s = 4, u = il) => {
  let f = xg[c], h = f / o.value, U = f / o.value, m = f / o.value, g = f / o.value, b = n - e, v = a - t, y = s / o.value, w = (f - u * 2) / (2 * o.value), x = { nw: d.nw ? void 0 : hi(e - y - m + w, t - y - g + w, h, U, i, r, l), ne: d.ne ? void 0 : hi(n + y - w, t - y - g + w, h, U, i, r, l), sw: d.sw ? void 0 : hi(e - y - m + w, a + y - w, h, U, i, r, l), se: d.se ? void 0 : hi(n + y - w, a + y - w, h, U, i, r, l), rotation: d.rotation ? void 0 : hi(e + b / 2 - h / 2, t - y - g + w - lO / o.value, h, U, i, r, l) }, S = 5 * xg.mouse / o.value;
  return Math.abs(b) > S && (d.n || (x.n = hi(e + b / 2 - h / 2, t - y - g + w, h, U, i, r, l)), d.s || (x.s = hi(e + b / 2 - h / 2, a + y - w, h, U, i, r, l))), Math.abs(v) > S && (d.w || (x.w = hi(e - y - m + w, t + v / 2 - U / 2, h, U, i, r, l)), d.e || (x.e = hi(n + y - w, t + v / 2 - U / 2, h, U, i, r, l))), x;
}, y3 = (e, t, n, a = "mouse", i = v3) => {
  if (e.locked || te(e)) return {};
  if (e.type === "freedraw" || me(e)) {
    if (e.points.length === 2) {
      let [, l] = e.points;
      l[0] === 0 || l[1] === 0 ? i = gh : l[0] > 0 && l[1] < 0 ? i = Sg : l[0] > 0 && l[1] > 0 ? i = gh : l[0] < 0 && l[1] > 0 ? i = Sg : l[0] < 0 && l[1] < 0 && (i = gh);
    }
  } else fe(e) && (i = { ...i, rotation: !0 });
  let r = me(e) ? il + 8 : Oe(e) ? 0 : il;
  return Hp(ge(e, n, !0), e.angle, t, a, i, r, Oe(e) ? 0 : void 0);
}, w3 = (e, t) => {
  if (t.editingLinearElement) return !1;
  if (e.length > 1) return !0;
  let n = e[0];
  return te(n) ? !1 : me(n) ? n.points.length > 2 : !0;
}, B1 = (e, t, n) => t >= e[0] && t <= e[0] + e[2] && n >= e[1] && n <= e[1] + e[3], oO = (e, t, n, a, i, r, l, o) => {
  if (!n.selectedElementIds[e.id]) return !1;
  let { rotation: c, ...d } = y3(e, r, t, l, ks(o));
  if (c && B1(c, a, i)) return "rotation";
  let s = Object.keys(d).filter((u) => {
    let f = d[u];
    return f ? B1(f, a, i) : !1;
  });
  if (s.length > 0) return s[0];
  if (Bp(o)) {
    let [u, f, h, U, m, g] = ge(e, t);
    if (!(me(e) && e.points.length <= 2)) {
      let b = Oe(e) ? 0 : jd / r.value, v = jd / r.value, y = E3(k(u - b, f - b), k(h + b, U + b), k(m, g), e.angle);
      for (let [w, x] of Object.entries(y)) if (rl(k(a, i), x, v)) return w;
    }
  }
  return !1;
}, kg = (e, t, n, a, i, r, l, o) => e.reduce((c, d) => {
  if (c) return c;
  let s = oO(d, l, t, n, a, i, r, o);
  return s ? { element: d, transformHandleType: s } : null;
}, null), Mg = ([e, t, n, a], i, r, l, o, c) => {
  let d = Hp([e, t, n, a, (e + n) / 2, (t + a) / 2], 0, l, o, ks(c)), s = Object.keys(d).find((u) => {
    let f = d[u];
    return f && B1(f, i, r);
  });
  if (s) return s;
  if (Bp(c)) {
    let u = (e + n) / 2, f = (t + a) / 2, h = jd / l.value, U = E3(k(e - h, t - h), k(n + h, a + h), k(u, f), 0);
    for (let [m, g] of Object.entries(U)) if (rl(k(i, r), g, h)) return m;
  }
  return !1;
}, bh = ["ns", "nesw", "ew", "nwse"], sO = (e, t) => {
  let n = bh.indexOf(e);
  if (n >= 0) {
    let a = Math.round(t / (Math.PI / 4));
    e = bh[(n + a) % bh.length];
  }
  return e;
}, Cg = (e) => {
  let { element: t, transformHandleType: n } = e, a = t && Math.sign(t.height) * Math.sign(t.width) === -1, i = null;
  switch (n) {
    case "n":
    case "s":
      i = "ns";
      break;
    case "w":
    case "e":
      i = "ew";
      break;
    case "nw":
    case "se":
      a ? i = "nesw" : i = "nwse";
      break;
    case "ne":
    case "sw":
      a ? i = "nwse" : i = "nesw";
      break;
    case "rotation":
      return "grab";
  }
  return i && t && (i = sO(i, t.angle)), i ? `${i}-resize` : "";
}, E3 = ([e, t], [n, a], i, r) => {
  let l = X(k(e, t), i, r), o = X(k(n, t), i, r), c = X(k(e, a), i, r), d = X(k(n, a), i, r);
  return { n: [l, o], e: [o, d], s: [d, c], w: [c, l] };
}, cO = (e, t, n, a, i, r, l, o, c, d, s, u) => {
  if (n.length === 1) {
    let [f] = n;
    if (t === "rotation") te(f) || (dO(f, a, i, c, d, r), In(f, a));
    else {
      if (J(f) && t) return uO(e, f, a, t, l, c, d), In(f, a), !0;
      if (t) {
        let h = n[0].id, U = a.get(h), m = e.get(h);
        if (U && m) {
          let { nextWidth: g, nextHeight: b } = gO(U, m, a, e, t, c, d, { shouldMaintainAspectRatio: o, shouldResizeFromCenter: l });
          ec(g, b, U, m, a, e, t, { shouldMaintainAspectRatio: o, shouldResizeFromCenter: l });
        }
      }
    }
    return !0;
  } else if (n.length > 1) {
    if (t === "rotation") return fO(e, n, a, i, c, d, r, s, u), !0;
    if (t) {
      let { nextWidth: f, nextHeight: h, flipByX: U, flipByY: m, originalBoundingBox: g } = bO(n, e, a, t, c, d, { shouldMaintainAspectRatio: o, shouldResizeFromCenter: l });
      return x3(n, a, t, i, e, { shouldResizeFromCenter: l, shouldMaintainAspectRatio: o, flipByX: U, flipByY: m, nextWidth: f, nextHeight: h, originalBoundingBox: g }), !0;
    }
  }
  return !1;
}, dO = (e, t, n, a, i, r) => {
  let [l, o, c, d] = ge(e, t), s = (l + c) / 2, u = (o + d) / 2, f;
  fe(e) ? f = 0 : (f = 5 * Math.PI / 2 + Math.atan2(i - u, a - s), r && (f = f + pr / 2, f = f - f % pr), f = qd(f));
  let h = Ai(e);
  if (G(e, { angle: f }), h) {
    let U = n.getElement(h);
    U && !xe(e) && G(U, { angle: f });
  }
}, Xp = (e, t, n, a) => me(e) || ea(e) ? { points: su(0, t, su(1, n, e.points, a), a) } : {}, Wp = (e, t, n) => {
  let a = e.width;
  if (st(e)) {
    let r = Zt(e, t);
    r && (a = Di(r, e));
  }
  let i = e.fontSize * (n / a);
  return i < N0 ? null : { size: i };
}, uO = (e, t, n, a, i, r, l) => {
  let [o, c, d, s, u, f] = ge(t, n), [h, U] = X(k(r, l), k(u, f), -t.angle), m = 0, g = 0;
  a !== "e" && a !== "w" && (a.includes("e") && (m = (h - o) / (d - o)), a.includes("w") && (m = (d - h) / (d - o)), a.includes("n") && (g = (s - U) / (s - c)), a.includes("s") && (g = (U - c) / (s - c)));
  let b = Math.max(m, g);
  if (b > 0) {
    let v = t.width * b, y = t.height * b, w = Wp(t, n, v);
    if (w === null) return;
    let x = [o, c], S = [d, s], E = [u, f], M = k(o, c);
    if (["n", "w", "nw"].includes(a) && (M = k(S[0] - Math.abs(v), S[1] - Math.abs(y))), a === "ne") {
      let $ = [x[0], S[1]];
      M = k($[0], $[1] - Math.abs(y));
    }
    if (a === "sw") {
      let $ = [S[0], x[1]];
      M = k($[0] - Math.abs(v), $[1]);
    }
    ["s", "n"].includes(a) && (M[0] = E[0] - v / 2), ["e", "w"].includes(a) && (M[1] = E[1] - y / 2), i && (M[0] = E[0] - Math.abs(v) / 2, M[1] = E[1] - Math.abs(y) / 2);
    let I = t.angle, T = X(M, k(u, f), I), A = k(M[0] + Math.abs(v) / 2, M[1] + Math.abs(y) / 2), D = X(A, k(u, f), I);
    M = X(T, D, -I);
    let [R, O] = M;
    G(t, { fontSize: w.size, width: v, height: y, x: R, y: O });
  }
  if (a === "e" || a === "w") {
    let v = e.get(t.id), [y, w, x, S] = ur(v, v.width, v.height, !0), E = k(y, w), M = k(x, S), I = pc(E, M), T = X(k(r, l), I, -v.angle), [A, , D] = ur(t, t.width, t.height, !0), R = D - A, O = M[0] - E[0], $ = V0(Je({ fontSize: t.fontSize, fontFamily: t.fontFamily }), t.lineHeight), F = O / R;
    a.includes("e") && (F = (T[0] - E[0]) / R), a.includes("w") && (F = (M[0] - T[0]) / R);
    let N = t.width * F < $ ? $ : t.width * F, j = yl(t.originalText, Je(t), Math.abs(N)), z = dn(j, Je(t), t.lineHeight), Y = z.height, [ie, pe, ue, Ve] = ur(v, N, Y, !0), Ge = ue - ie, je = Ve - pe, Fe = [...E];
    ["n", "w", "nw"].includes(a) && (Fe = [M[0] - Math.abs(Ge), E[1]]);
    let At = v.angle, qt = X(Fe, I, At), Le = k(Fe[0] + Math.abs(Ge) / 2, Fe[1] + Math.abs(je) / 2), Be = X(Le, I, At);
    Fe = X(qt, Be, -At);
    let xt = { width: Math.abs(N), height: Math.abs(z.height), x: Fe[0], y: Fe[1], text: j, autoResize: !1 };
    G(t, xt);
  }
}, fO = (e, t, n, a, i, r, l, o, c) => {
  var s;
  let d = 5 * Math.PI / 2 + Math.atan2(r - c, i - o);
  l && (d += pr / 2, d -= d % pr);
  for (let u of t) if (!fe(u)) {
    let [f, h, U, m] = ge(u, n), g = (f + U) / 2, b = (h + m) / 2, v = ((s = e.get(u.id)) == null ? void 0 : s.angle) ?? u.angle, [y, w] = X(k(g, b), k(o, c), d + v - u.angle);
    te(u) ? G(u, { points: ZR(u, n) }) : G(u, { x: u.x + (y - g), y: u.y + (w - b), angle: qd(d + v) }, !1), In(u, n, { simultaneouslyUpdated: t });
    let x = ye(u, n);
    x && !xe(u) && G(x, { x: x.x + (y - g), y: x.y + (w - b), angle: qd(d + v) }, !1);
  }
  a.triggerUpdate();
}, hO = (e, t, n, a, i) => {
  let [r, l, o, c] = t.length === 1 ? ge(t[0], n) : We(t), d = (r + o) / 2, s = (l + c) / 2, u = t.length === 1 ? t[0].angle : 0;
  switch ([a, i] = X(k(a, i), k(d, s), -u), e) {
    case "n":
      return X(k(a - (r + o) / 2, i - l), k(0, 0), u);
    case "s":
      return X(k(a - (r + o) / 2, i - c), k(0, 0), u);
    case "w":
      return X(k(a - r, i - (l + c) / 2), k(0, 0), u);
    case "e":
      return X(k(a - o, i - (l + c) / 2), k(0, 0), u);
    case "nw":
      return X(k(a - r, i - l), k(0, 0), u);
    case "ne":
      return X(k(a - o, i - l), k(0, 0), u);
    case "sw":
      return X(k(a - r, i - c), k(0, 0), u);
    case "se":
      return X(k(a - o, i - c), k(0, 0), u);
    default:
      return [0, 0];
  }
}, pO = (e, t) => {
  let [, [n, a]] = t.points;
  return e === "nw" && (n < 0 || a < 0) || e === "ne" && n >= 0 || e === "sw" && n <= 0 || e === "se" && (n > 0 || a > 0) ? "end" : "origin";
}, UO = (e, t, n) => {
  if (n) return "center";
  if (t) switch (e) {
    case "n":
      return "south-side";
    case "e":
      return "west-side";
    case "s":
      return "north-side";
    case "w":
      return "east-side";
    case "ne":
      return "bottom-left";
    case "nw":
      return "bottom-right";
    case "se":
      return "top-left";
    case "sw":
      return "top-right";
  }
  return ["e", "se", "s"].includes(e) ? "top-left" : ["n", "nw", "w"].includes(e) ? "bottom-right" : e === "ne" ? "bottom-left" : "top-right";
}, mO = (e, t, n, a, i, r, l, o, c) => {
  let d = UO(l, o, c), [s, u] = e;
  switch (d) {
    case "top-left":
      return { x: s + (t - a) / 2 + (a - t) / 2 * Math.cos(r) + (n - i) / 2 * Math.sin(r), y: u + (n - i) / 2 + (a - t) / 2 * Math.sin(r) + (i - n) / 2 * Math.cos(r) };
    case "top-right":
      return { x: s + (t - a) / 2 * (Math.cos(r) + 1) + (n - i) / 2 * Math.sin(r), y: u + (n - i) / 2 + (t - a) / 2 * Math.sin(r) + (i - n) / 2 * Math.cos(r) };
    case "bottom-left":
      return { x: s + (t - a) / 2 * (1 - Math.cos(r)) + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) + (a - t) / 2 * Math.sin(r) };
    case "bottom-right":
      return { x: s + (t - a) / 2 * (Math.cos(r) + 1) + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) + (t - a) / 2 * Math.sin(r) };
    case "center":
      return { x: s - (a - t) / 2, y: u - (i - n) / 2 };
    case "east-side":
      return { x: s + (t - a) / 2 * (Math.cos(r) + 1), y: u + (t - a) / 2 * Math.sin(r) + (n - i) / 2 };
    case "west-side":
      return { x: s + (t - a) / 2 * (1 - Math.cos(r)), y: u + (a - t) / 2 * Math.sin(r) + (n - i) / 2 };
    case "north-side":
      return { x: s + (t - a) / 2 + (n - i) / 2 * Math.sin(r), y: u + (i - n) / 2 * (Math.cos(r) - 1) };
    case "south-side":
      return { x: s + (t - a) / 2 + (i - n) / 2 * Math.sin(r), y: u + (n - i) / 2 * (Math.cos(r) + 1) };
  }
}, ec = (e, t, n, a, i, r, l, { shouldInformMutation: o = !0, shouldMaintainAspectRatio: c = !1, shouldResizeFromCenter: d = !1 } = {}) => {
  let s = {}, u = ye(n, i);
  if (u) {
    let m = r.get(u.id);
    if (m && (s = { fontSize: m.fontSize }), c) {
      let g = { ...n, width: e }, b = Wp(u, i, Di(g, u));
      if (b === null) return;
      s = { fontSize: b.size };
    } else {
      let g = f8(Je(u), u.lineHeight), b = h8(u.fontSize, u.lineHeight);
      e = Math.max(e, g), t = Math.max(t, b);
    }
  }
  let f = Xp(a, e, t, !0), h = k(a.x, a.y);
  if (me(a)) {
    let [m, g] = Sa(a, r);
    h = k(m, g);
  }
  let U = mO(h, a.width, a.height, e, t, a.angle, l, c, d);
  if (me(a) && f.points) {
    let m = a.x - h[0], g = a.y - h[1];
    U.x += m, U.y += g;
    let b = f.points[0][0], v = f.points[0][1];
    U.x += b, U.y += v, f.points = f.points.map((y) => k(y[0] - b, y[1] - v));
  }
  if (e < 0 && (U.x = U.x + e), t < 0 && (U.y = U.y + t), "scale" in n && "scale" in a && G(n, { scale: [(Math.sign(e) || a.scale[0]) * a.scale[0], (Math.sign(t) || a.scale[1]) * a.scale[1]] }), xe(n) && u && c) {
    let m = e / n.width * u.fontSize;
    if (m < N0) return;
    s.fontSize = m;
  }
  if (e !== 0 && t !== 0 && Number.isFinite(U.x) && Number.isFinite(U.y)) {
    let m = { ...U, width: Math.abs(e), height: Math.abs(t), ...f };
    G(n, m, o), In(n, i, { newSize: { width: e, height: t } }), u && s != null && G(u, { fontSize: s.fontSize }), vc(n, i, l, c);
  }
}, gO = (e, t, n, a, i, r, l, { shouldMaintainAspectRatio: o = !1, shouldResizeFromCenter: c = !1 } = {}) => {
  let [d, s, u, f] = ur(t, t.width, t.height, !0), h = k(d, s), U = k(u, f), m = pc(h, U), g = X(k(r, l), m, -t.angle), [b, v, y, w] = ur(e, e.width, e.height, !0), x = y - b, S = w - v, E = U[0] - h[0], M = U[1] - h[1], I = E / x, T = M / S;
  i.includes("e") && (I = (g[0] - h[0]) / x), i.includes("s") && (T = (g[1] - h[1]) / S), i.includes("w") && (I = (U[0] - g[0]) / x), i.includes("n") && (T = (U[1] - g[1]) / S);
  let A = e.width * I, D = e.height * T;
  if (c && (A = 2 * A - t.width, D = 2 * D - t.height), o) {
    let R = Math.abs(A) / t.width, O = Math.abs(D) / t.height;
    if (i.length === 1 && (D *= R, A *= O), i.length === 2) {
      let $ = Math.max(R, O);
      A = t.width * $ * Math.sign(A), D = t.height * $ * Math.sign(D);
    }
  }
  return { nextWidth: A, nextHeight: D };
}, bO = (e, t, n, a, i, r, { shouldMaintainAspectRatio: l = !1, shouldResizeFromCenter: o = !1 } = {}) => {
  let c = e.map((R) => t.get(R.id)), d = c.reduce((R, O) => {
    if (!me(O)) return R;
    let $ = Ai(O);
    if (!$) return R;
    let F = t.get($) ?? null;
    return st(F) ? [...R, { ...F, ...ee.getBoundTextElementPosition(O, F, n) }] : R;
  }, []), s = ya(c.map((R) => R).concat(d)), { minX: u, minY: f, maxX: h, maxY: U, midX: m, midY: g } = s, b = h - u, v = U - f, y = { ne: [u, U], se: [u, f], sw: [h, f], nw: [h, U], e: [u, f + v / 2], w: [h, f + v / 2], n: [u + b / 2, U], s: [u + b / 2, f] }, [w, x] = o ? [m, g] : y[a], S = o ? 2 : 1, E = Math.max(Math.abs(i - w) / b || 0, Math.abs(r - x) / v || 0) * S, M = a.includes("e") || a.includes("w") ? Math.abs(i - w) * S : b, I = a.includes("n") || a.includes("s") ? Math.abs(r - x) * S : v;
  l && (M = b * E * Math.sign(i - w), I = v * E * Math.sign(r - x));
  let T = { ne: [i < w, r > x], se: [i < w, r < x], sw: [i > w, r < x], nw: [i > w, r > x], e: [i < w, !1], w: [i > w, !1], n: [!1, r > x], s: [!1, r < x] }, [A, D] = T[a].map((R) => R);
  return { originalBoundingBox: s, nextWidth: M, nextHeight: I, flipByX: A, flipByY: D };
}, x3 = (e, t, n, a, i, { shouldMaintainAspectRatio: r = !1, shouldResizeFromCenter: l = !1, flipByX: o = !1, flipByY: c = !1, nextHeight: d, nextWidth: s, originalBoundingBox: u } = {}) => {
  if (s === void 0 && d === void 0 && o === void 0 && c === void 0 || d === 0 || s === 0) return;
  i || (i = t);
  let f = e.reduce((S, E) => {
    let M = i.get(E.id);
    return M && S.push({ orig: M, latest: E }), S;
  }, []), h;
  if (u) h = u;
  else {
    let S = f.reduce((E, { orig: M }) => {
      if (!me(M)) return E;
      let I = Ai(M);
      if (!I) return E;
      let T = i.get(I) ?? null;
      return st(T) ? [...E, { ...T, ...ee.getBoundTextElementPosition(M, T, t) }] : E;
    }, []);
    h = ya(f.map(({ orig: E }) => E).concat(S));
  }
  let { minX: U, minY: m, maxX: g, maxY: b, midX: v, midY: y } = h, w = g - U, x = b - m;
  if (s === void 0 && d === void 0 && (s = w, d = x), r && (s === void 0 ? s = d * (w / x) : d === void 0 ? d = s * (x / w) : Math.abs(s / d - w / x) > 1e-3 && (s = d * (w / x))), s && d) {
    let S = n.includes("e") || n.includes("w") ? Math.abs(s) / w : 1, E = n.includes("n") || n.includes("s") ? Math.abs(d) / x : 1, M;
    n.length === 1 ? M = n.includes("e") || n.includes("w") ? S : E : M = Math.max(Math.abs(s) / w || 0, Math.abs(d) / x || 0);
    let I = { ne: [U, b], se: [U, m], sw: [g, m], nw: [g, b], e: [U, m + x / 2], w: [g, m + x / 2], n: [U + w / 2, b], s: [U + w / 2, m] }, [T, A] = l ? [v, y] : I[n], D = r || f.some((N) => N.latest.angle !== 0 || J(N.latest) || po(N.latest));
    D && (S = M, E = M);
    let [R, O] = [o ? -1 : 1, c ? -1 : 1], $ = [];
    for (let { orig: N, latest: j } of f) {
      if (J(N) && st(N)) continue;
      let z = N.width * S, Y = N.height * E, ie = qd(N.angle * R * O), pe = me(N) || ea(N), ue = N.x - T, Ve = N.y - A, Ge = o && !pe ? z : 0, je = c && !pe ? Y : 0, Fe = T + R * (ue * S + Ge), At = A + O * (Ve * E + je), qt = Xp(N, z * R, Y * O, !1), Le = { x: Fe, y: At, width: z, height: Y, angle: ie, ...qt };
      if (te(N) && (N.startBinding && (Le.startBinding = { ...N.startBinding, fixedPoint: [o ? -N.startBinding.fixedPoint[0] + 1 : N.startBinding.fixedPoint[0], c ? -N.startBinding.fixedPoint[1] + 1 : N.startBinding.fixedPoint[1]] }), N.endBinding && (Le.endBinding = { ...N.endBinding, fixedPoint: [o ? -N.endBinding.fixedPoint[0] + 1 : N.endBinding.fixedPoint[0], c ? -N.endBinding.fixedPoint[1] + 1 : N.endBinding.fixedPoint[1]] }), N.fixedSegments && qt.points && (Le.fixedSegments = N.fixedSegments.map((xt) => ({ ...xt, start: qt.points[xt.index - 1], end: qt.points[xt.index] })))), Oe(N) && (Le.scale = [N.scale[0] * R, N.scale[1] * O]), J(N)) {
        let xt = Wp(N, t, z);
        if (!xt) return;
        Le.fontSize = xt.size;
      }
      let Be = i.get(Ai(N) ?? "");
      if (Be) if (D) {
        let xt = Be.fontSize * M;
        if (xt < N0) return;
        Le.boundTextFontSize = xt;
      } else Le.boundTextFontSize = Be.fontSize;
      $.push({ element: j, update: Le });
    }
    let F = $.map(({ element: N }) => N);
    for (let { element: N, update: { boundTextFontSize: j, ...z } } of $) {
      let { width: Y, height: ie, angle: pe } = z;
      G(N, z, !1, { isDragging: !0 }), In(N, t, { simultaneouslyUpdated: F, newSize: { width: Y, height: ie } });
      let ue = ye(N, t);
      ue && j && (G(ue, { fontSize: j, angle: me(N) ? void 0 : pe }, !1), vc(N, t, n, !0));
    }
    a.triggerUpdate();
  }
}, vO = (e, t, n, a, i, r) => {
  if (t.length === 1 && te(t[0]) && (t[0].startBinding || t[0].endBinding)) return;
  let l = t.filter((u) => {
    if (te(u) && u.startBinding && u.endBinding) {
      let f = t.find((U) => {
        var m;
        return U.id === ((m = u.startBinding) == null ? void 0 : m.elementId);
      }), h = t.find((U) => {
        var m;
        return U.id === ((m = u.endBinding) == null ? void 0 : m.elementId);
      });
      return f && h;
    }
    return !0;
  }), o = new Set(l), c = l.filter((u) => fe(u)).map((u) => u.id);
  if (c.length > 0) for (let u of a.getNonDeletedElements()) u.frameId !== null && c.includes(u.frameId) && o.add(u);
  let d = We(Array.from(o).map((u) => e.originalElements.get(u.id) ?? u)), s = yO(d, n, i, r);
  o.forEach((u) => {
    if (Ig(e, u, s), !xe(u)) {
      let f = ye(u, a.getNonDeletedElementsMap());
      f && Ig(e, f, s), In(u, a.getElementsMapIncludingDeleted(), { simultaneouslyUpdated: Array.from(o) });
    }
  });
}, yO = (e, t, n, a) => {
  let [i, r] = e, l = i + t.x + n.x, o = r + t.y + n.y;
  if (n.x === 0 || n.y === 0) {
    let [c, d] = Lt(i + t.x, r + t.y, a);
    n.x === 0 && (l = c), n.y === 0 && (o = d);
  }
  return { x: l - i, y: o - r };
}, Ig = (e, t, n) => {
  let a = e.originalElements.get(t.id) ?? t, i = a.x + n.x, r = a.y + n.y;
  G(t, { x: i, y: r });
}, wO = (e, t, n) => {
  let [a, i] = We(e);
  return [t - a, n - i];
}, Tg = ({ newElement: e, elementType: t, originX: n, originY: a, x: i, y: r, width: l, height: o, shouldMaintainAspectRatio: c, shouldResizeFromCenter: d, zoom: s, widthAspectRatio: u = null, originOffset: f = null, informMutation: h = !0 }) => {
  c && e.type !== "selection" && (u ? o = l / u : (Math.abs(r - a) > Math.abs(i - n) ? { width: l, height: o } = Eg(t, o, i < n ? -l : l) : { width: l, height: o } = Eg(t, l, r < a ? -o : o), o < 0 && (o = -o)));
  let U = i < n ? n - l : n, m = r < a ? a - o : a;
  d && (l += l, o += o, U = n - l / 2, m = a - o / 2);
  let g = null;
  if (J(e)) {
    o = e.height;
    let b = V0(Je({ fontSize: e.fontSize, fontFamily: e.fontFamily }), e.lineHeight);
    l = Math.max(l, b), Math.abs(i - n) > Nk / s && (g = { autoResize: !1 }), m = a, d && (U = n - l / 2);
  }
  if (l !== 0 && o !== 0) {
    let b = null;
    Oe(e) && (b = { initialWidth: l, initialHeight: o }), G(e, { x: U + ((f == null ? void 0 : f.x) ?? 0), y: m + ((f == null ? void 0 : f.y) ?? 0), width: l, height: o, ...g, ...b }, h);
  }
}, Vp = (e, t) => {
  var n;
  return !!(!e.viewModeEnabled && ((n = e.openDialog) == null ? void 0 : n.name) !== "elementLinkSelector" && (e.activeTool.type !== "custom" && (e.editingTextElement || e.activeTool.type !== "selection" && e.activeTool.type !== "eraser" && e.activeTool.type !== "hand" && e.activeTool.type !== "laser") || Ee(t, e).length));
}, EO = (e) => {
  let t = 5381;
  for (let n = 0; n < e.length; n++) {
    let a = e.charCodeAt(n);
    t = (t << 5) + t + a;
  }
  return t >>> 0;
}, xO = (e) => e.filter((t) => !t.isDeleted && !vo(t)), at = (e) => e.filter((t) => !t.isDeleted), H1 = (e) => !e.isDeleted, SO = (e) => at(e).map((t) => W0(t.type) ? { ...t, lastCommittedPoint: null } : t), S3 = (e) => SO(e), k3 = async (e) => {
  let t;
  if (e.type === de.png) try {
    return await (await import("./image-7KUKJ7J4-DTXncbzy.js")).decodePngMetadata(e);
  } catch (n) {
    throw n.message === "INVALID" ? new Xr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : new Xr("Error: cannot restore image");
  }
  else if ("text" in Blob ? t = await e.text() : t = await new Promise((n) => {
    let a = new FileReader();
    a.readAsText(e, "utf8"), a.onloadend = () => {
      a.readyState === FileReader.DONE && n(a.result);
    };
  }), e.type === de.svg) try {
    return iN({ svg: t });
  } catch (n) {
    throw n.message === "INVALID" ? new Xr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : new Xr("Error: cannot restore image");
  }
  return t;
}, M3 = (e) => {
  var t;
  return e && ((t = e.name.match(/\.(json|excalidraw|png|svg)$/)) == null ? void 0 : t[1]) || null;
}, kO = (e) => e === "png" || e === "svg", Gp = (e) => {
  let t = M3(e);
  return t === "png" || t === "svg";
}, C3 = (e) => !!e && Object.values(io).includes(e), Jr = (e) => {
  let { type: t } = e || {};
  return C3(t);
}, I3 = async (e, t, n, a) => {
  let i = await k3(e), r;
  try {
    try {
      r = JSON.parse(i);
    } catch (l) {
      throw Jr(e) ? new Xr("Image doesn't contain scene", "IMAGE_NOT_CONTAINS_SCENE_DATA") : l;
    }
    if (KP(r)) return { type: de.excalidraw, data: uf({ elements: S3(r.elements || []), appState: { theme: t == null ? void 0 : t.theme, fileHandle: a || e.handle || null, ...Zb(r.appState || {}), ...t ? Zs(r.elements || [], t) : {} }, files: r.files }, t, n, { repairBindings: !0, refreshDimensions: !1 }) };
    if (H7(r)) return { type: de.excalidrawlib, data: r };
    throw new Error("Error: invalid file");
  } catch (l) {
    throw l instanceof Xr ? l : new Error("Error: invalid file");
  }
}, T3 = async (e, t, n, a) => {
  let i = await I3(e, t, n, a);
  if (i.type !== de.excalidraw) throw new Error("Error: invalid file");
  return i.data;
}, _3 = (e, t = "unpublished") => {
  let n = JSON.parse(e);
  if (!H7(n)) throw new Error("Invalid library");
  let a = n.libraryItems || n.library;
  return Tp(a, t);
}, MO = async (e, t = "unpublished") => _3(await k3(e), t), tc = async (e) => new Promise(async (t, n) => {
  try {
    Uc(e) && (e = await e), e.toBlob((a) => {
      if (!a) return n(new jI("Error: Canvas too big", "CANVAS_POSSIBLY_TOO_BIG"));
      t(a);
    });
  } catch (a) {
    n(a);
  }
}), CO = async (e) => {
  try {
    let t = await window.crypto.subtle.digest("SHA-1", await Vr(e));
    return DM(new Uint8Array(t));
  } catch (t) {
    return console.error(t), D0(40);
  }
}, _g = async (e) => new Promise((t, n) => {
  let a = new FileReader();
  a.onload = () => {
    let i = a.result;
    t(i);
  }, a.onerror = (i) => n(i), a.readAsDataURL(e);
}), IO = (e, t) => `data:${t};base64,${L3(yu(e), !0)}`, TO = (e, t = "") => {
  let n = e.indexOf(","), a = atob(e.slice(n + 1)), i = e.slice(0, n).split(":")[1].split(";")[0], r = new ArrayBuffer(a.length), l = new Uint8Array(r);
  for (let o = 0; o < a.length; o++) l[o] = a.charCodeAt(o);
  return new File([r], t, { type: i });
}, _O = (e) => R3(e.slice(e.indexOf(",") + 1)), X1 = async (e, t) => {
  if (e.type === de.svg) return e;
  let [n, a] = await Promise.all([import("./pica-DulxyHgk.js").then((r) => r.p).then((r) => r.default), import("./image-blob-reduce.esm-BkjLmknz.js").then((r) => r.default)]), i = a({ pica: n({ features: ["js", "wasm"] }) });
  if (t.outputType) {
    let { outputType: r } = t;
    i._create_blob = function(l) {
      return this.pica.toBlob(l.out_canvas, r, 0.8).then((o) => (l.out_blob = o, l));
    };
  }
  if (!Jr(e)) throw new Error("Error: unsupported file type", { cause: "UNSUPPORTED" });
  return new File([await i.toBlob(e, { max: t.maxWidthOrHeight, alpha: !0 })], e.name, { type: t.outputType || e.type });
}, Ag = (e, t = "") => new File([new TextEncoder().encode(e)], t, { type: de.svg }), AO = async (e, t = "") => {
  let n;
  try {
    n = await fetch(e);
  } catch {
    throw new Error("Error: failed to fetch image", { cause: "FETCH_ERROR" });
  }
  if (!n.ok) throw new Error("Error: failed to fetch image", { cause: "FETCH_ERROR" });
  let a = await n.blob();
  if (a.type && Jr(a)) {
    let i = t || a.name || "";
    return new File([a], i, { type: a.type });
  }
  throw new Error("Error: unsupported file type", { cause: "UNSUPPORTED" });
}, DO = async (e) => {
  let t = e.dataTransfer.files.item(0), n = await LO(e);
  return { file: t ? await jp(t) : null, fileHandle: n };
}, LO = async (e) => {
  if (vl) try {
    return await e.dataTransfer.items[0].getAsFileSystemHandle() || null;
  } catch (t) {
    return console.warn(t.name, t.message), null;
  }
  return null;
}, Dg = (e) => {
  let t = null, n = `${[...new Uint8Array(e).slice(0, 8)].join(" ")} `, a = { png: "137 80 78 71 13 10 26 10 ", jpg: "255 216 255 ", gif: "71 73 70 56 57 97 " };
  return n === a.png ? t = de.png : n.startsWith(a.jpg) ? t = de.jpg : n.startsWith(a.gif) && (t = de.gif), t;
}, ds = (e, t, n) => new File([e], n || "", { type: t }), jp = async (e) => {
  var t, n;
  if (e.type) {
    if (Jr(e)) {
      let a = await Vr(e), i = Dg(a);
      i && i !== e.type && (e = ds(a, i, e.name));
    }
  } else if ((t = e == null ? void 0 : e.name) != null && t.endsWith(".excalidrawlib")) e = ds(await Vr(e), de.excalidrawlib, e.name);
  else if ((n = e == null ? void 0 : e.name) != null && n.endsWith(".excalidraw")) e = ds(await Vr(e), de.excalidraw, e.name);
  else {
    let a = await Vr(e), i = Dg(a);
    i && (e = ds(a, i, e.name));
  }
  return e;
}, Vr = (e) => "arrayBuffer" in e ? e.arrayBuffer() : new Promise((t, n) => {
  let a = new FileReader();
  a.onload = (i) => {
    var r;
    if (!((r = i.target) != null && r.result)) return n(new Error("Couldn't convert blob to ArrayBuffer"));
    t(i.target.result);
  }, a.readAsArrayBuffer(e);
}), yu = (e) => {
  let t = typeof e == "string" ? new TextEncoder().encode(e) : e instanceof Uint8Array ? e : new Uint8Array(e), n = "";
  for (let a of t) n += String.fromCharCode(a);
  return n;
}, A3 = (e) => {
  let t = new ArrayBuffer(e.length), n = new Uint8Array(t);
  for (let a = 0, i = e.length; a < i; a++) n[a] = e.charCodeAt(a);
  return t;
}, D3 = (e) => new TextDecoder("utf-8").decode(A3(e)), L3 = (e, t = !1) => t ? window.btoa(e) : window.btoa(yu(e)), R3 = (e, t = !1) => t ? window.atob(e) : D3(window.atob(e)), P3 = ({ text: e, compress: t }) => {
  let n;
  if (t !== !1) try {
    n = yu(Tx(e));
  } catch (a) {
    console.error("encode: cannot deflate", a);
  }
  return { version: "1", encoding: "bstring", compressed: !!n, encoded: n || yu(e) };
}, N3 = (e) => {
  let t;
  switch (e.encoding) {
    case "bstring":
      t = e.compressed ? e.encoded : D3(e.encoded);
      break;
    default:
      throw new Error(`decode: unknown encoding "${e.encoding}"`);
  }
  return e.compressed ? _x(new Uint8Array(A3(t)), { to: "string" }) : t;
}, RO = async (e) => {
  let t = F5(new Uint8Array(await Vr(e))).find((n) => n.name === "tEXt");
  return t ? Pu.decode(t.data) : null;
}, $Z = async ({ blob: e, metadata: t }) => {
  let n = F5(new Uint8Array(await Vr(e))), a = Pu.encode(de.excalidraw, JSON.stringify(P3({ text: t, compress: !0 })));
  return n.splice(-1, 0, a), new Blob([qy(n)], { type: de.png });
}, zZ = async (e) => {
  let t = await RO(e);
  if ((t == null ? void 0 : t.keyword) === de.excalidraw) try {
    let n = JSON.parse(t.text);
    if (!("encoded" in n)) {
      if ("type" in n && n.type === Zn.excalidraw) return t.text;
      throw new Error("FAILED");
    }
    return N3(n);
  } catch (n) {
    throw console.error(n), new Error("FAILED");
  }
  throw new Error("INVALID");
}, PO = { paste: "Paste", pasteAsPlaintext: "Paste as plaintext", pasteCharts: "Paste charts", selectAll: "Select all", multiSelect: "Add element to selection", moveCanvas: "Move canvas", cut: "Cut", copy: "Copy", copyAsPng: "Copy to clipboard as PNG", copyAsSvg: "Copy to clipboard as SVG", copyText: "Copy to clipboard as text", copySource: "Copy source to clipboard", convertToCode: "Convert to code", bringForward: "Bring forward", sendToBack: "Send to back", bringToFront: "Bring to front", sendBackward: "Send backward", delete: "Delete", copyStyles: "Copy styles", pasteStyles: "Paste styles", stroke: "Stroke", changeStroke: "Change stroke color", background: "Background", changeBackground: "Change background color", fill: "Fill", strokeWidth: "Stroke width", strokeStyle: "Stroke style", strokeStyle_solid: "Solid", strokeStyle_dashed: "Dashed", strokeStyle_dotted: "Dotted", sloppiness: "Sloppiness", opacity: "Opacity", textAlign: "Text align", edges: "Edges", sharp: "Sharp", round: "Round", arrowheads: "Arrowheads", arrowhead_none: "None", arrowhead_arrow: "Arrow", arrowhead_bar: "Bar", arrowhead_circle: "Circle", arrowhead_circle_outline: "Circle (outline)", arrowhead_triangle: "Triangle", arrowhead_triangle_outline: "Triangle (outline)", arrowhead_diamond: "Diamond", arrowhead_diamond_outline: "Diamond (outline)", arrowhead_crowfoot_many: "Crow's foot (many)", arrowhead_crowfoot_one: "Crow's foot (one)", arrowhead_crowfoot_one_or_many: "Crow's foot (one or many)", more_options: "More options", arrowtypes: "Arrow type", arrowtype_sharp: "Sharp arrow", arrowtype_round: "Curved arrow", arrowtype_elbowed: "Elbow arrow", fontSize: "Font size", fontFamily: "Font family", addWatermark: 'Add "Made with Excalidraw"', handDrawn: "Hand-drawn", normal: "Normal", code: "Code", small: "Small", medium: "Medium", large: "Large", veryLarge: "Very large", solid: "Solid", hachure: "Hachure", zigzag: "Zigzag", crossHatch: "Cross-hatch", thin: "Thin", bold: "Bold", left: "Left", center: "Center", right: "Right", extraBold: "Extra bold", architect: "Architect", artist: "Artist", cartoonist: "Cartoonist", fileTitle: "File name", colorPicker: "Color picker", canvasColors: "Used on canvas", canvasBackground: "Canvas background", drawingCanvas: "Drawing canvas", clearCanvas: "Clear canvas", layers: "Layers", actions: "Actions", language: "Language", liveCollaboration: "Live collaboration...", duplicateSelection: "Duplicate", untitled: "Untitled", name: "Name", yourName: "Your name", madeWithExcalidraw: "Made with Excalidraw", group: "Group selection", ungroup: "Ungroup selection", collaborators: "Collaborators", toggleGrid: "Toggle grid", addToLibrary: "Add to library", removeFromLibrary: "Remove from library", libraryLoadingMessage: "Loading library", libraries: "Browse libraries", loadingScene: "Loading scene", loadScene: "Load scene from file", align: "Align", alignTop: "Align top", alignBottom: "Align bottom", alignLeft: "Align left", alignRight: "Align right", centerVertically: "Center vertically", centerHorizontally: "Center horizontally", distributeHorizontally: "Distribute horizontally", distributeVertically: "Distribute vertically", flipHorizontal: "Flip horizontal", flipVertical: "Flip vertical", viewMode: "View mode", share: "Share", showStroke: "Show stroke color picker", showBackground: "Show background color picker", showFonts: "Show font picker", toggleTheme: "Toggle light/dark theme", theme: "Theme", personalLib: "Personal Library", excalidrawLib: "Excalidraw Library", decreaseFontSize: "Decrease font size", increaseFontSize: "Increase font size", unbindText: "Unbind text", bindText: "Bind text to the container", createContainerFromText: "Wrap text in a container", link: { edit: "Edit link", editEmbed: "Edit embeddable link", create: "Add link", label: "Link", labelEmbed: "Link & embed", empty: "No link is set", hint: "Type or paste your link here", goToElement: "Go to target element" }, lineEditor: { edit: "Edit line", editArrow: "Edit arrow" }, elementLock: { lock: "Lock", unlock: "Unlock", lockAll: "Lock all", unlockAll: "Unlock all" }, statusPublished: "Published", sidebarLock: "Keep sidebar open", selectAllElementsInFrame: "Select all elements in frame", removeAllElementsFromFrame: "Remove all elements from frame", eyeDropper: "Pick color from canvas", textToDiagram: "Text to diagram", prompt: "Prompt", followUs: "Follow us", discordChat: "Discord chat", zoomToFitViewport: "Zoom to fit in viewport", zoomToFitSelection: "Zoom to fit selection", zoomToFit: "Zoom to fit all elements", installPWA: "Install Excalidraw locally (PWA)", autoResize: "Enable text auto-resizing", imageCropping: "Image cropping", unCroppedDimension: "Uncropped dimension", copyElementLink: "Copy link to object", linkToElement: "Link to object", wrapSelectionInFrame: "Wrap selection in frame" }, NO = { title: "Link to object", desc: "Click on a shape on canvas or paste a link.", notFound: "Linked object wasn't found on canvas." }, OO = { noItems: "No items added yet...", hint_emptyLibrary: "Select an item on canvas to add it here, or install a library from the public repository, below.", hint_emptyPrivateLibrary: "Select an item on canvas to add it here." }, $O = { title: "Find on canvas", noMatch: "No matches found...", singleResult: "result", multipleResults: "results", placeholder: "Find text on canvas..." }, zO = { clearReset: "Reset the canvas", exportJSON: "Export to file", exportImage: "Export image...", export: "Save to...", copyToClipboard: "Copy to clipboard", copyLink: "Copy link", save: "Save to current file", saveAs: "Save as", load: "Open", getShareableLink: "Get shareable link", close: "Close", selectLanguage: "Select language", scrollBackToContent: "Scroll back to content", zoomIn: "Zoom in", zoomOut: "Zoom out", resetZoom: "Reset zoom", menu: "Menu", done: "Done", edit: "Edit", undo: "Undo", redo: "Redo", resetLibrary: "Reset library", createNewRoom: "Create new room", fullScreen: "Full screen", darkMode: "Dark mode", lightMode: "Light mode", systemMode: "System mode", zenMode: "Zen mode", objectsSnapMode: "Snap to objects", exitZenMode: "Exit zen mode", cancel: "Cancel", clear: "Clear", remove: "Remove", embed: "Toggle embedding", publishLibrary: "Publish", submit: "Submit", confirm: "Confirm", embeddableInteractionButton: "Click to interact" }, FO = { clearReset: "This will clear the whole canvas. Are you sure?", couldNotCreateShareableLink: "Couldn't create shareable link.", couldNotCreateShareableLinkTooBig: "Couldn't create shareable link: the scene is too big", couldNotLoadInvalidFile: "Couldn't load invalid file", importBackendFailed: "Importing from backend failed.", cannotExportEmptyCanvas: "Cannot export empty canvas.", couldNotCopyToClipboard: "Couldn't copy to clipboard.", decryptFailed: "Couldn't decrypt data.", uploadedSecurly: "The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.", loadSceneOverridePrompt: "Loading external drawing will replace your existing content. Do you wish to continue?", collabStopOverridePrompt: `Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`, errorAddingToLibrary: "Couldn't add item to the library", errorRemovingFromLibrary: "Couldn't remove item from the library", confirmAddLibrary: "This will add {{numShapes}} shape(s) to your library. Are you sure?", imageDoesNotContainScene: "This image does not seem to contain any scene data. Have you enabled scene embedding during export?", cannotRestoreFromImage: "Scene couldn't be restored from this image file", invalidSceneUrl: "Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.", resetLibrary: "This will clear your library. Are you sure?", removeItemsFromsLibrary: "Delete {{count}} item(s) from library?", invalidEncryptionKey: "Encryption key must be of 22 characters. Live collaboration is disabled.", collabOfflineWarning: `No internet connection available.
Your changes will not be saved!` }, BO = { unsupportedFileType: "Unsupported file type.", imageInsertError: "Couldn't insert image. Try again later...", fileTooBig: "File is too big. Maximum allowed size is {{maxSize}}.", svgImageInsertError: "Couldn't insert SVG image. The SVG markup looks invalid.", failedToFetchImage: "Failed to fetch image.", cannotResolveCollabServer: "Couldn't connect to the collab server. Please reload the page and try again.", importLibraryError: "Couldn't load library", saveLibraryError: "Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.", collabSaveFailed: "Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.", collabSaveFailed_sizeExceeded: "Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.", imageToolNotSupported: "Images are disabled.", brave_measure_text_error: { line1: "Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.", line2: "This could result in breaking the <bold>Text Elements</bold> in your drawings.", line3: "We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.", line4: "If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>" }, libraryElementTypeError: { embeddable: "Embeddable elements cannot be added to the library.", iframe: "IFrame elements cannot be added to the library.", image: "Support for adding images to the library coming soon!" }, asyncPasteFailedOnRead: "Couldn't paste (couldn't read from system clipboard).", asyncPasteFailedOnParse: "Couldn't paste.", copyToSystemClipboardFailed: "Couldn't copy to clipboard." }, HO = { selection: "Selection", image: "Insert image", rectangle: "Rectangle", diamond: "Diamond", ellipse: "Ellipse", arrow: "Arrow", line: "Line", freedraw: "Draw", text: "Text", library: "Library", lock: "Keep selected tool active after drawing", penMode: "Pen mode - prevent touch", link: "Add / Update link for a selected shape", eraser: "Eraser", frame: "Frame tool", magicframe: "Wireframe to code", embeddable: "Web Embed", laser: "Laser pointer", hand: "Hand (panning tool)", extraTools: "More tools", mermaidToExcalidraw: "Mermaid to Excalidraw" }, XO = { rectangle: "Rectangle", diamond: "Diamond", ellipse: "Ellipse", arrow: "Arrow", line: "Line", freedraw: "Freedraw", text: "Text", image: "Image", group: "Group", frame: "Frame", magicframe: "Wireframe to code", embeddable: "Web Embed", selection: "Selection", iframe: "IFrame" }, WO = { canvasActions: "Canvas actions", selectedShapeActions: "Selected shape actions", shapes: "Shapes" }, VO = { dismissSearch: "Escape to dismiss search", canvasPanning: "To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool", linearElement: "Click to start multiple points, drag for single line", arrowTool: "Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.", freeDraw: "Click and drag, release when you're finished", text: "Tip: you can also add text by double-clicking anywhere with the selection tool", embeddable: "Click-drag to create a website embed", text_selected: "Double-click or press ENTER to edit text", text_editing: "Press Escape or CtrlOrCmd+ENTER to finish editing", linearElementMulti: "Click on last point or press Escape or Enter to finish", lockAngle: "You can constrain angle by holding SHIFT", resize: `You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`, resizeImage: `You can resize freely by holding SHIFT,
hold ALT to resize from the center`, rotate: "You can constrain angles by holding SHIFT while rotating", lineEditor_info: "Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points", lineEditor_pointSelected: `Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`, lineEditor_nothingSelected: `Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`, placeImage: "Click to place the image, or click and drag to set its size manually", publishLibrary: "Publish your own library", bindTextToElement: "Press enter to add text", createFlowchart: "Hold CtrlOrCmd and Arrow key to create a flowchart", deepBoxSelect: "Hold CtrlOrCmd to deep select, and to prevent dragging", eraserRevert: "Hold Alt to revert the elements marked for deletion", firefox_clipboard_write: 'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.', disableSnapping: "Hold CtrlOrCmd to disable snapping", enterCropEditor: "Double click the image or press ENTER to crop the image", leaveCropEditor: "Click outside the image or press ENTER or ESCAPE to finish cropping" }, GO = { cannotShowPreview: "Cannot show preview", canvasTooBig: "The canvas may be too big.", canvasTooBigTip: "Tip: try moving the farthest elements a bit closer together." }, jO = { headingMain: "Encountered an error. Try <button>reloading the page</button>.", clearCanvasMessage: "If reloading doesn't work, try <button>clearing the canvas</button>.", clearCanvasCaveat: " This will result in loss of work ", trackedToSentry: "The error with identifier {{eventId}} was tracked on our system.", openIssueMessage: "We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.", sceneContent: "Scene content:" }, YO = { or: "Or" }, ZO = { desc_intro: "Invite people to collaborate on your drawing.", desc_privacy: "Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.", button_startSession: "Start session", button_stopSession: "Stop session", desc_inProgressIntro: "Live-collaboration session is now in progress.", desc_shareLink: "Share this link with anyone you want to collaborate with:", desc_exitSession: "Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.", shareTitle: "Join a live collaboration session on Excalidraw" }, KO = { title: "Error" }, qO = { disk_title: "Save to disk", disk_details: "Export the scene data to a file from which you can import later.", disk_button: "Save to file", link_title: "Shareable link", link_details: "Export as a read-only link.", link_button: "Export to Link", excalidrawplus_description: "Save the scene to your Excalidraw+ workspace.", excalidrawplus_button: "Export", excalidrawplus_exportError: "Couldn't export to Excalidraw+ at this moment..." }, JO = { blog: "Read our blog", click: "click", deepSelect: "Deep select", deepBoxSelect: "Deep select within box, and prevent dragging", createFlowchart: "Create a flowchart from a generic element", navigateFlowchart: "Navigate a flowchart", curvedArrow: "Curved arrow", curvedLine: "Curved line", documentation: "Documentation", doubleClick: "double-click", drag: "drag", editor: "Editor", editLineArrowPoints: "Edit line/arrow points", editText: "Edit text / add label", github: "Found an issue? Submit", howto: "Follow our guides", or: "or", preventBinding: "Prevent arrow binding", tools: "Tools", shortcuts: "Keyboard shortcuts", textFinish: "Finish editing (text editor)", textNewLine: "Add new line (text editor)", title: "Help", view: "View", zoomToFit: "Zoom to fit all elements", zoomToSelection: "Zoom to selection", toggleElementLock: "Lock/unlock selection", movePageUpDown: "Move page up/down", movePageLeftRight: "Move page left/right", cropStart: "Crop image", cropFinish: "Finish image cropping" }, QO = { title: "Clear canvas" }, e$ = { title: "Publish library", itemName: "Item name", authorName: "Author name", githubUsername: "GitHub username", twitterUsername: "Twitter username", libraryName: "Library name", libraryDesc: "Library description", website: "Website", placeholder: { authorName: "Your name or username", libraryName: "Name of your library", libraryDesc: "Description of your library to help people understand its usage", githubHandle: "GitHub handle (optional), so you can edit the library once submitted for review", twitterHandle: "Twitter username (optional), so we know who to credit when promoting over Twitter", website: "Link to your personal website or elsewhere (optional)" }, errors: { required: "Required", website: "Enter a valid URL" }, noteDescription: "Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.", noteGuidelines: "The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.", noteLicense: "By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.", noteItems: "Each library item must have its own name so it's filterable. The following library items will be included:", atleastOneLibItem: "Please select at least one library item to get started", republishWarning: "Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission." }, t$ = { title: "Library submitted", content: "Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>" }, n$ = { resetLibrary: "Reset library", removeItemsFromLib: "Remove selected items from library" }, a$ = { header: "Export image", label: { withBackground: "Background", onlySelected: "Only selected", darkMode: "Dark mode", embedScene: "Embed scene", scale: "Scale", padding: "Padding" }, tooltip: { embedScene: `Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.` }, title: { exportToPng: "Export to PNG", exportToSvg: "Export to SVG", copyPngToClipboard: "Copy PNG to clipboard" }, button: { exportToPng: "PNG", exportToSvg: "SVG", copyPngToClipboard: "Copy to clipboard" } }, i$ = { tooltip: "Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.", link: "Blog post on end-to-end encryption in Excalidraw" }, r$ = { angle: "Angle", shapes: "Shapes", height: "Height", scene: "Scene", selected: "Selected", storage: "Storage", fullTitle: "Canvas & Shape properties", title: "Properties", generalStats: "General", elementProperties: "Shape properties", total: "Total", version: "Version", versionCopy: "Click to copy", versionNotAvailable: "Version not available", width: "Width" }, l$ = { addedToLibrary: "Added to library", copyStyles: "Copied styles.", copyToClipboard: "Copied to clipboard.", copyToClipboardAsPng: `Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`, copyToClipboardAsSvg: `Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`, fileSaved: "File saved.", fileSavedToFilename: "Saved to {filename}", canvas: "canvas", selection: "selection", pasteAsSingleElement: `Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`, unableToEmbed: "Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted", unrecognizedLinkFormat: "The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site", elementLinkCopied: "Link copied to clipboard" }, o$ = { transparent: "Transparent", black: "Black", white: "White", red: "Red", pink: "Pink", grape: "Grape", violet: "Violet", gray: "Gray", blue: "Blue", cyan: "Cyan", teal: "Teal", green: "Green", yellow: "Yellow", orange: "Orange", bronze: "Bronze" }, s$ = { app: { center_heading: "All your data is saved locally in your browser.", center_heading_plus: "Did you want to go to the Excalidraw+ instead?", menuHint: "Export, preferences, languages, ..." }, defaults: { menuHint: "Export, preferences, and more...", center_heading: "Diagrams. Made. Simple.", toolbarHint: "Pick a tool & Start drawing!", helpHint: "Shortcuts & help" } }, c$ = { mostUsedCustomColors: "Most used custom colors", colors: "Colors", shades: "Shades", hexCode: "Hex code", noShades: "No shades available for this color" }, d$ = { action: { exportToImage: { title: "Export as image", button: "Export as image", description: "Export the scene data as an image from which you can import later." }, saveToDisk: { title: "Save to disk", button: "Save to disk", description: "Export the scene data to a file from which you can import later." }, excalidrawPlus: { title: "Excalidraw+", button: "Export to Excalidraw+", description: "Save the scene to your Excalidraw+ workspace." } }, modal: { loadFromFile: { title: "Load from file", button: "Load from file", description: "Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below." }, shareableLink: { title: "Load from link", button: "Replace my content", description: "Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below." } } }, u$ = { title: "Mermaid to Excalidraw", button: "Insert", description: "Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.", syntax: "Mermaid Syntax", preview: "Preview" }, f$ = { placeholder: "Quick search" }, h$ = { badge: { old: "old" }, sceneFonts: "In this scene", availableFonts: "Available fonts", empty: "No fonts found" }, p$ = { empty: "No users found", hint: { text: "Click on user to follow", followStatus: "You're currently following this user", inCall: "User is in a voice call", micMuted: "User's microphone is muted", isSpeaking: "User is speaking" } }, U$ = { title: "Command palette", shortcuts: { select: "Select", confirm: "Confirm", close: "Close" }, recents: "Recently used", search: { placeholder: "Search menus, commands, and discover hidden gems", noMatch: "No matching commands..." }, itemNotAvailable: "Command is not available...", shortcutHint: "For Command palette, use {{shortcut}}" }, O3 = { labels: PO, elementLink: NO, library: OO, search: $O, buttons: zO, alerts: FO, errors: BO, toolBar: HO, element: XO, headings: WO, hints: VO, canvasError: GO, errorSplash: jO, shareDialog: YO, roomDialog: ZO, errorDialog: KO, exportDialog: qO, helpDialog: JO, clearCanvasDialog: QO, publishDialog: e$, publishSuccessDialog: t$, confirmDialog: n$, imageExportDialog: a$, encrypted: i$, stats: r$, toast: l$, colors: o$, welcomeScreen: s$, colorPicker: c$, overwriteConfirm: d$, mermaid: u$, quickSearch: f$, fontList: h$, userList: p$, commandPalette: U$ }, m$ = 100, g$ = 36, b$ = { "ar-SA": 94, "az-AZ": 17, "bg-BG": 71, "bn-BD": 52, "ca-ES": 83, "cs-CZ": 86, "da-DK": 61, "de-DE": 100, "el-GR": 80, en: m$, "es-ES": 96, "eu-ES": 97, "fa-IR": 84, "fi-FI": 76, "fr-FR": 99, "gl-ES": 86, "he-IL": 77, "hi-IN": 76, "hu-HU": 76, "id-ID": 91, "it-IT": 98, "ja-JP": 90, kaa: g$, "kab-KAB": 76, "kk-KZ": 18, "km-KH": 83, "ko-KR": 100, "ku-TR": 87, "lt-LT": 48, "lv-LV": 77, "mr-IN": 98, "my-MM": 35, "nb-NO": 93, "nl-NL": 75, "nn-NO": 67, "oc-FR": 92, "pa-IN": 78, "pl-PL": 99, "pt-BR": 91, "pt-PT": 83, "ro-RO": 99, "ru-RU": 92, "si-LK": 7, "sk-SK": 100, "sl-SI": 100, "sv-SE": 100, "ta-IN": 81, "th-TH": 44, "tr-TR": 87, "uk-UA": 93, "vi-VN": 49, "zh-CN": 100, "zh-HK": 22, "zh-TW": 100 };
const Pi = {};
let v$ = 0;
function Kt(e, t) {
  const n = `atom${++v$}`, a = {
    toString() {
      return (Pi ? "production" : void 0) !== "production" && this.debugLabel ? n + ":" + this.debugLabel : n;
    }
  };
  return typeof e == "function" ? a.read = e : (a.init = e, a.read = y$, a.write = w$), a;
}
function y$(e) {
  return e(this);
}
function w$(e, t, n) {
  return t(
    this,
    typeof n == "function" ? n(e(this)) : n
  );
}
const Lg = (e, t) => e.unstable_is ? e.unstable_is(t) : t === e, W1 = (e) => "init" in e, vh = (e) => !!e.write, wu = /* @__PURE__ */ new WeakMap(), V1 = (e) => {
  var t;
  return G1(e) && !((t = wu.get(e)) != null && t[1]);
}, E$ = (e, t) => {
  const n = wu.get(e);
  if (n)
    n[1] = !0, n[0].forEach((a) => a(t));
  else if ((Pi ? "production" : void 0) !== "production")
    throw new Error("[Bug] cancelable promise not found");
}, x$ = (e) => {
  if (wu.has(e))
    return;
  const t = [/* @__PURE__ */ new Set(), !1];
  wu.set(e, t);
  const n = () => {
    t[1] = !0;
  };
  e.then(n, n), e.onCancel = (a) => {
    t[0].add(a);
  };
}, G1 = (e) => typeof (e == null ? void 0 : e.then) == "function", Rg = (e) => "v" in e || "e" in e, Yc = (e) => {
  if ("e" in e)
    throw e.e;
  if ((Pi ? "production" : void 0) !== "production" && !("v" in e))
    throw new Error("[Bug] atom state is not initialized");
  return e.v;
}, $3 = (e, t, n) => {
  n.p.has(e) || (n.p.add(e), t.then(
    () => {
      n.p.delete(e);
    },
    () => {
      n.p.delete(e);
    }
  ));
}, Pg = (e, t, n, a, i) => {
  var r;
  if ((Pi ? "production" : void 0) !== "production" && a === t)
    throw new Error("[Bug] atom cannot depend on itself");
  n.d.set(a, i.n), V1(n.v) && $3(t, n.v, i), (r = i.m) == null || r.t.add(t), e && S$(e, a, t);
}, Yo = () => ({
  D: /* @__PURE__ */ new Map(),
  H: /* @__PURE__ */ new Set(),
  M: /* @__PURE__ */ new Set(),
  L: /* @__PURE__ */ new Set()
}), Ms = (e, t, n) => {
  e[t].add(n);
}, Ng = (e, t, n) => {
  e.D.has(t) || (e.D.set(t, /* @__PURE__ */ new Set()), Ms(e, "M", () => {
    var a;
    (a = n.m) == null || a.l.forEach((i) => Ms(e, "M", i));
  }));
}, S$ = (e, t, n) => {
  const a = e.D.get(t);
  a && a.add(n);
}, k$ = (e, t) => e.D.get(t), Tr = (e) => {
  let t, n = !1;
  const a = (i) => {
    try {
      i();
    } catch (r) {
      n || (t = r, n = !0);
    }
  };
  for (; e.H.size || e.M.size || e.L.size; )
    e.D.clear(), e.H.forEach(a), e.H.clear(), e.M.forEach(a), e.M.clear(), e.L.forEach(a), e.L.clear();
  if (n)
    throw t;
}, z3 = (...[e, t, n, a]) => {
  const i = (b, v, y) => {
    const w = "v" in v, x = v.v, S = V1(v.v) ? v.v : null;
    if (G1(y)) {
      x$(y);
      for (const E of v.d.keys())
        $3(b, y, e(E));
      v.v = y;
    } else
      v.v = y;
    delete v.e, delete v.x, (!w || !Object.is(x, v.v)) && (++v.n, S && E$(S, y));
  }, r = (b, v) => {
    var y;
    const w = e(v);
    if (Rg(w) && (w.m && !w.x || Array.from(w.d).every(
      ([T, A]) => (
        // Recursively, read the atom state of the dependency, and
        // check if the atom epoch number is unchanged
        r(b, T).n === A
      )
    )))
      return w;
    w.d.clear();
    let x = !0;
    const S = (T) => {
      if (Lg(v, T)) {
        const D = e(T);
        if (!Rg(D))
          if (W1(T))
            i(T, D, T.init);
          else
            throw new Error("no atom init");
        return Yc(D);
      }
      const A = r(b, T);
      try {
        return Yc(A);
      } finally {
        if (x)
          Pg(b, v, w, T, A);
        else {
          const D = Yo();
          Pg(D, v, w, T, A), u(D, v, w), Tr(D);
        }
      }
    };
    let E, M;
    const I = {
      get signal() {
        return E || (E = new AbortController()), E.signal;
      },
      get setSelf() {
        return (Pi ? "production" : void 0) !== "production" && !vh(v) && console.warn("setSelf function cannot be used with read-only atom"), !M && vh(v) && (M = (...T) => {
          if ((Pi ? "production" : void 0) !== "production" && x && console.warn("setSelf function cannot be called in sync"), !x)
            return s(v, ...T);
        }), M;
      }
    };
    try {
      const T = t(v, S, I);
      if (i(v, w, T), G1(T)) {
        (y = T.onCancel) == null || y.call(T, () => E == null ? void 0 : E.abort());
        const A = () => {
          if (w.m) {
            const D = Yo();
            u(D, v, w), Tr(D);
          }
        };
        T.then(A, A);
      }
      return w;
    } catch (T) {
      return delete w.v, w.e = T, delete w.x, ++w.n, w;
    } finally {
      x = !1;
    }
  }, l = (b) => Yc(r(void 0, b)), o = (b, v, y) => {
    var w, x;
    const S = /* @__PURE__ */ new Map();
    for (const E of ((w = y.m) == null ? void 0 : w.t) || []) {
      const M = e(E);
      M.m && S.set(E, M);
    }
    for (const E of y.p)
      S.set(
        E,
        e(E)
      );
    return (x = k$(b, v)) == null || x.forEach((E) => {
      S.set(E, e(E));
    }), S;
  }, c = (b, v, y) => {
    const w = [], x = /* @__PURE__ */ new Set(), S = /* @__PURE__ */ new Set(), E = [[v, y]];
    for (; E.length > 0; ) {
      const [M, I] = E[E.length - 1];
      if (S.has(M)) {
        E.pop();
        continue;
      }
      if (x.has(M)) {
        w.push([M, I, I.n]), S.add(M), I.x = !0, E.pop();
        continue;
      }
      x.add(M);
      for (const [T, A] of o(b, M, I))
        M !== T && !x.has(T) && E.push([T, A]);
    }
    Ms(b, "H", () => {
      const M = /* @__PURE__ */ new Set([v]);
      for (let I = w.length - 1; I >= 0; --I) {
        const [T, A, D] = w[I];
        let R = !1;
        for (const O of A.d.keys())
          if (O !== T && M.has(O)) {
            R = !0;
            break;
          }
        R && (r(b, T), u(b, T, A), D !== A.n && (Ng(b, T, A), M.add(T))), delete A.x;
      }
    });
  }, d = (b, v, ...y) => {
    let w = !0;
    const x = (E) => Yc(r(b, E)), S = (E, ...M) => {
      const I = e(E);
      try {
        if (Lg(v, E)) {
          if (!W1(E))
            throw new Error("atom not writable");
          const T = I.n, A = M[0];
          i(E, I, A), u(b, E, I), T !== I.n && (Ng(b, E, I), c(b, E, I));
          return;
        } else
          return d(b, E, ...M);
      } finally {
        w || Tr(b);
      }
    };
    try {
      return n(v, x, S, ...y);
    } finally {
      w = !1;
    }
  }, s = (b, ...v) => {
    const y = Yo();
    try {
      return d(y, b, ...v);
    } finally {
      Tr(y);
    }
  }, u = (b, v, y) => {
    if (y.m && !V1(y.v)) {
      for (const w of y.d.keys())
        y.m.d.has(w) || (f(b, w, e(w)).t.add(v), y.m.d.add(w));
      for (const w of y.m.d || [])
        if (!y.d.has(w)) {
          y.m.d.delete(w);
          const x = h(b, w, e(w));
          x == null || x.t.delete(v);
        }
    }
  }, f = (b, v, y) => {
    if (!y.m) {
      r(b, v);
      for (const w of y.d.keys())
        f(b, w, e(w)).t.add(v);
      if (y.m = {
        l: /* @__PURE__ */ new Set(),
        d: new Set(y.d.keys()),
        t: /* @__PURE__ */ new Set()
      }, vh(v)) {
        const w = y.m;
        let x;
        const S = (E, M) => {
          let I = !0;
          x = (...T) => {
            try {
              return d(E, v, ...T);
            } finally {
              I || Tr(E);
            }
          };
          try {
            return M();
          } finally {
            I = !1;
          }
        };
        Ms(b, "L", () => {
          const E = S(
            b,
            () => a(v, (...M) => x(...M))
          );
          E && (w.u = (M) => S(M, E));
        });
      }
    }
    return y.m;
  }, h = (b, v, y) => {
    if (y.m && !y.m.l.size && !Array.from(y.m.t).some((w) => {
      var x;
      return (x = e(w).m) == null ? void 0 : x.d.has(v);
    })) {
      const w = y.m.u;
      w && Ms(b, "L", () => w(b)), delete y.m;
      for (const x of y.d.keys()) {
        const S = h(b, x, e(x));
        S == null || S.t.delete(v);
      }
      return;
    }
    return y.m;
  };
  return {
    get: l,
    set: s,
    sub: (b, v) => {
      const y = Yo(), w = e(b), S = f(y, b, w).l;
      return S.add(v), Tr(y), () => {
        S.delete(v);
        const E = Yo();
        h(E, b, w), Tr(E);
      };
    },
    unstable_derive: (b) => z3(...b(e, t, n, a))
  };
}, M$ = (e) => {
  const t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new Set();
  let a, i = 0;
  const r = e.unstable_derive(
    (c, d, s, u) => (a = c, [
      (f) => {
        let h = t.get(f);
        if (!h) {
          const U = c(f);
          h = new Proxy(U, {
            set(m, g, b) {
              return g === "m" && n.add(f), Reflect.set(m, g, b);
            },
            deleteProperty(m, g) {
              return g === "m" && n.delete(f), Reflect.deleteProperty(m, g);
            }
          }), t.set(f, h);
        }
        return h;
      },
      d,
      (f, h, U, ...m) => i ? U(f, ...m) : s(f, h, U, ...m),
      u
    ])
  ), l = r.set;
  return Object.assign(r, {
    // store dev methods (these are tentative and subject to change without notice)
    dev4_get_internal_weak_map: () => ({
      get: (c) => {
        const d = a(c);
        if (d.n !== 0)
          return d;
      }
    }),
    dev4_get_mounted_atoms: () => n,
    dev4_restore_atoms: (c) => {
      l({
        read: () => null,
        write: (s, u) => {
          ++i;
          try {
            for (const [f, h] of c)
              W1(f) && u(f, h);
          } finally {
            --i;
          }
        }
      });
    }
  });
}, Yp = () => {
  const e = /* @__PURE__ */ new WeakMap(), n = z3(
    (a) => {
      if ((Pi ? "production" : void 0) !== "production" && !a)
        throw new Error("Atom is undefined or null");
      let i = e.get(a);
      return i || (i = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 }, e.set(a, i)), i;
    },
    (a, ...i) => a.read(...i),
    (a, ...i) => a.write(...i),
    (a, ...i) => {
      var r;
      return (r = a.onMount) == null ? void 0 : r.call(a, ...i);
    }
  );
  return (Pi ? "production" : void 0) !== "production" ? M$(n) : n;
};
let Zo;
const C$ = () => (Zo || (Zo = Yp(), (Pi ? "production" : void 0) !== "production" && (globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = Zo), globalThis.__JOTAI_DEFAULT_STORE__ !== Zo && console.warn(
  "Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"
))), Zo), F3 = {}, I$ = Ja(
  void 0
), Uf = (e) => {
  const t = un(I$);
  return (e == null ? void 0 : e.store) || t || C$();
}, j1 = (e) => typeof (e == null ? void 0 : e.then) == "function", B3 = (e) => {
  e.status = "pending", e.then(
    (t) => {
      e.status = "fulfilled", e.value = t;
    },
    (t) => {
      e.status = "rejected", e.reason = t;
    }
  );
}, T$ = Z.use || ((e) => {
  if (e.status === "pending")
    throw e;
  if (e.status === "fulfilled")
    return e.value;
  throw e.status === "rejected" ? e.reason : (B3(e), e);
}), yh = /* @__PURE__ */ new WeakMap(), Og = (e) => {
  let t = yh.get(e);
  return t || (t = new Promise((n, a) => {
    let i = e;
    const r = (c) => (d) => {
      i === c && n(d);
    }, l = (c) => (d) => {
      i === c && a(d);
    }, o = (c) => {
      "onCancel" in c && typeof c.onCancel == "function" && c.onCancel((d) => {
        if ((F3 ? "production" : void 0) !== "production" && d === c)
          throw new Error("[Bug] p is not updated even after cancelation");
        j1(d) ? (yh.set(d, t), i = d, d.then(r(d), l(d)), o(d)) : n(d);
      });
    };
    e.then(r(e), l(e)), o(e);
  }), yh.set(e, t)), t;
};
function H3(e, t) {
  const n = Uf(t), [[a, i, r], l] = P5(
    (d) => {
      const s = n.get(e);
      return Object.is(d[0], s) && d[1] === n && d[2] === e ? d : [s, n, e];
    },
    void 0,
    () => [n.get(e), n, e]
  );
  let o = a;
  (i !== n || r !== e) && (l(), o = n.get(e));
  const c = t == null ? void 0 : t.delay;
  if (Q(() => {
    const d = n.sub(e, () => {
      if (typeof c == "number") {
        const s = n.get(e);
        j1(s) && B3(Og(s)), setTimeout(l, c);
        return;
      }
      l();
    });
    return l(), d;
  }, [n, e, c]), Iy(o), j1(o)) {
    const d = Og(o);
    return T$(d);
  }
  return o;
}
function X3(e, t) {
  const n = Uf(t);
  return _e(
    (...i) => {
      if ((F3 ? "production" : void 0) !== "production" && !("write" in e))
        throw new Error("not writable atom");
      return n.set(e, ...i);
    },
    [n, e]
  );
}
function _$(e, t) {
  return [
    H3(e, t),
    // We do wrong type assertion here, which results in throwing an error.
    X3(e, t)
  ];
}
const $g = /* @__PURE__ */ new WeakMap();
function A$(e, t) {
  const n = Uf(t), a = D$(n);
  for (const [i, r] of e)
    (!a.has(i) || t != null && t.dangerouslyForceHydrate) && (a.add(i), n.set(i, r));
}
const D$ = (e) => {
  let t = $g.get(e);
  return t || (t = /* @__PURE__ */ new WeakSet(), $g.set(e, t)), t;
};
function jl() {
  return jl = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var a in n)
        Object.prototype.hasOwnProperty.call(n, a) && (e[a] = n[a]);
    }
    return e;
  }, jl.apply(this, arguments);
}
function W3() {
  const e = Ja(null);
  function t({
    store: l,
    initialValues: o = [],
    children: c
  }) {
    const d = re(l);
    return d.current || (d.current = Yp()), A$(o, {
      store: d.current
    }), p(e.Provider, {
      value: d.current,
      children: c
    });
  }
  const n = (l) => {
    const o = un(e);
    if (!o) throw new Error("Missing Provider from createIsolation");
    return Uf(jl({
      store: o
    }, l));
  };
  return {
    Provider: t,
    useStore: n,
    useAtom: (l, o) => {
      const c = n();
      return _$(l, jl({
        store: c
      }, o));
    },
    useAtomValue: (l, o) => {
      const c = n();
      return H3(l, jl({
        store: c
      }, o));
    },
    useSetAtom: (l, o) => {
      const c = n();
      return X3(l, jl({
        store: c
      }, o));
    }
  };
}
process.env.NODE_ENV;
const {
  read: FZ,
  write: BZ
} = Kt(null);
Ja({
  scope: void 0,
  baseStore: void 0
});
function hr(e, t, { checkForDefaultPrevented: n = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), n === !1 || !i.defaultPrevented)
      return t == null ? void 0 : t(i);
  };
}
function zg(e, t) {
  if (typeof e == "function")
    return e(t);
  e != null && (e.current = t);
}
function V3(...e) {
  return (t) => {
    let n = !1;
    const a = e.map((i) => {
      const r = zg(i, t);
      return !n && typeof r == "function" && (n = !0), r;
    });
    if (n)
      return () => {
        for (let i = 0; i < a.length; i++) {
          const r = a[i];
          typeof r == "function" ? r() : zg(e[i], null);
        }
      };
  };
}
function Sr(...e) {
  return H.useCallback(V3(...e), e);
}
function G3(e, t = []) {
  let n = [];
  function a(r, l) {
    const o = H.createContext(l), c = n.length;
    n = [...n, l];
    const d = (u) => {
      var b;
      const { scope: f, children: h, ...U } = u, m = ((b = f == null ? void 0 : f[e]) == null ? void 0 : b[c]) || o, g = H.useMemo(() => U, Object.values(U));
      return /* @__PURE__ */ p(m.Provider, { value: g, children: h });
    };
    d.displayName = r + "Provider";
    function s(u, f) {
      var m;
      const h = ((m = f == null ? void 0 : f[e]) == null ? void 0 : m[c]) || o, U = H.useContext(h);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return [d, s];
  }
  const i = () => {
    const r = n.map((l) => H.createContext(l));
    return function(o) {
      const c = (o == null ? void 0 : o[e]) || r;
      return H.useMemo(
        () => ({ [`__scope${e}`]: { ...o, [e]: c } }),
        [o, c]
      );
    };
  };
  return i.scopeName = e, [a, L$(i, ...t)];
}
function L$(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map((i) => ({
      useScope: i(),
      scopeName: i.scopeName
    }));
    return function(r) {
      const l = a.reduce((o, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return { ...o, ...u };
      }, {});
      return H.useMemo(() => ({ [`__scope${t.scopeName}`]: l }), [l]);
    };
  };
  return n.scopeName = t.scopeName, n;
}
var Zp = H.forwardRef((e, t) => {
  const { children: n, ...a } = e, i = H.Children.toArray(n), r = i.find(P$);
  if (r) {
    const l = r.props.children, o = i.map((c) => c === r ? H.Children.count(l) > 1 ? H.Children.only(null) : H.isValidElement(l) ? l.props.children : null : c);
    return /* @__PURE__ */ p(Y1, { ...a, ref: t, children: H.isValidElement(l) ? H.cloneElement(l, void 0, o) : null });
  }
  return /* @__PURE__ */ p(Y1, { ...a, ref: t, children: n });
});
Zp.displayName = "Slot";
var Y1 = H.forwardRef((e, t) => {
  const { children: n, ...a } = e;
  if (H.isValidElement(n)) {
    const i = O$(n), r = N$(a, n.props);
    return n.type !== H.Fragment && (r.ref = t ? V3(t, i) : i), H.cloneElement(n, r);
  }
  return H.Children.count(n) > 1 ? H.Children.only(null) : null;
});
Y1.displayName = "SlotClone";
var R$ = ({ children: e }) => /* @__PURE__ */ p(le, { children: e });
function P$(e) {
  return H.isValidElement(e) && e.type === R$;
}
function N$(e, t) {
  const n = { ...t };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...o) => {
      r(...o), i(...o);
    } : i && (n[a] = i) : a === "style" ? n[a] = { ...i, ...r } : a === "className" && (n[a] = [i, r].filter(Boolean).join(" "));
  }
  return { ...e, ...n };
}
function O$(e) {
  var a, i;
  let t = (a = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : a.get, n = t && "isReactWarning" in t && t.isReactWarning;
  return n ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, n = t && "isReactWarning" in t && t.isReactWarning, n ? e.props.ref : e.props.ref || e.ref);
}
var $$ = [
  "a",
  "button",
  "div",
  "form",
  "h2",
  "h3",
  "img",
  "input",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "span",
  "svg",
  "ul"
], Bi = $$.reduce((e, t) => {
  const n = H.forwardRef((a, i) => {
    const { asChild: r, ...l } = a, o = r ? Zp : t;
    return typeof window < "u" && (window[Symbol.for("radix-ui")] = !0), /* @__PURE__ */ p(o, { ...l, ref: i });
  });
  return n.displayName = `Primitive.${t}`, { ...e, [t]: n };
}, {});
function z$(e, t) {
  e && O5.flushSync(() => e.dispatchEvent(t));
}
function br(e) {
  const t = H.useRef(e);
  return H.useEffect(() => {
    t.current = e;
  }), H.useMemo(() => (...n) => {
    var a;
    return (a = t.current) == null ? void 0 : a.call(t, ...n);
  }, []);
}
function F$(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = br(e);
  H.useEffect(() => {
    const a = (i) => {
      i.key === "Escape" && n(i);
    };
    return t.addEventListener("keydown", a, { capture: !0 }), () => t.removeEventListener("keydown", a, { capture: !0 });
  }, [n, t]);
}
var B$ = "DismissableLayer", Z1 = "dismissableLayer.update", H$ = "dismissableLayer.pointerDownOutside", X$ = "dismissableLayer.focusOutside", Fg, j3 = H.createContext({
  layers: /* @__PURE__ */ new Set(),
  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),
  branches: /* @__PURE__ */ new Set()
}), Y3 = H.forwardRef(
  (e, t) => {
    const {
      disableOutsidePointerEvents: n = !1,
      onEscapeKeyDown: a,
      onPointerDownOutside: i,
      onFocusOutside: r,
      onInteractOutside: l,
      onDismiss: o,
      ...c
    } = e, d = H.useContext(j3), [s, u] = H.useState(null), f = (s == null ? void 0 : s.ownerDocument) ?? (globalThis == null ? void 0 : globalThis.document), [, h] = H.useState({}), U = Sr(t, (E) => u(E)), m = Array.from(d.layers), [g] = [...d.layersWithOutsidePointerEventsDisabled].slice(-1), b = m.indexOf(g), v = s ? m.indexOf(s) : -1, y = d.layersWithOutsidePointerEventsDisabled.size > 0, w = v >= b, x = G$((E) => {
      const M = E.target, I = [...d.branches].some((T) => T.contains(M));
      !w || I || (i == null || i(E), l == null || l(E), E.defaultPrevented || o == null || o());
    }, f), S = j$((E) => {
      const M = E.target;
      [...d.branches].some((T) => T.contains(M)) || (r == null || r(E), l == null || l(E), E.defaultPrevented || o == null || o());
    }, f);
    return F$((E) => {
      v === d.layers.size - 1 && (a == null || a(E), !E.defaultPrevented && o && (E.preventDefault(), o()));
    }, f), H.useEffect(() => {
      if (s)
        return n && (d.layersWithOutsidePointerEventsDisabled.size === 0 && (Fg = f.body.style.pointerEvents, f.body.style.pointerEvents = "none"), d.layersWithOutsidePointerEventsDisabled.add(s)), d.layers.add(s), Bg(), () => {
          n && d.layersWithOutsidePointerEventsDisabled.size === 1 && (f.body.style.pointerEvents = Fg);
        };
    }, [s, f, n, d]), H.useEffect(() => () => {
      s && (d.layers.delete(s), d.layersWithOutsidePointerEventsDisabled.delete(s), Bg());
    }, [s, d]), H.useEffect(() => {
      const E = () => h({});
      return document.addEventListener(Z1, E), () => document.removeEventListener(Z1, E);
    }, []), /* @__PURE__ */ p(
      Bi.div,
      {
        ...c,
        ref: U,
        style: {
          pointerEvents: y ? w ? "auto" : "none" : void 0,
          ...e.style
        },
        onFocusCapture: hr(e.onFocusCapture, S.onFocusCapture),
        onBlurCapture: hr(e.onBlurCapture, S.onBlurCapture),
        onPointerDownCapture: hr(
          e.onPointerDownCapture,
          x.onPointerDownCapture
        )
      }
    );
  }
);
Y3.displayName = B$;
var W$ = "DismissableLayerBranch", V$ = H.forwardRef((e, t) => {
  const n = H.useContext(j3), a = H.useRef(null), i = Sr(t, a);
  return H.useEffect(() => {
    const r = a.current;
    if (r)
      return n.branches.add(r), () => {
        n.branches.delete(r);
      };
  }, [n.branches]), /* @__PURE__ */ p(Bi.div, { ...e, ref: i });
});
V$.displayName = W$;
function G$(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = br(e), a = H.useRef(!1), i = H.useRef(() => {
  });
  return H.useEffect(() => {
    const r = (o) => {
      if (o.target && !a.current) {
        let c = function() {
          Z3(
            H$,
            n,
            d,
            { discrete: !0 }
          );
        };
        const d = { originalEvent: o };
        o.pointerType === "touch" ? (t.removeEventListener("click", i.current), i.current = c, t.addEventListener("click", i.current, { once: !0 })) : c();
      } else
        t.removeEventListener("click", i.current);
      a.current = !1;
    }, l = window.setTimeout(() => {
      t.addEventListener("pointerdown", r);
    }, 0);
    return () => {
      window.clearTimeout(l), t.removeEventListener("pointerdown", r), t.removeEventListener("click", i.current);
    };
  }, [t, n]), {
    // ensures we check React component tree (not just DOM tree)
    onPointerDownCapture: () => a.current = !0
  };
}
function j$(e, t = globalThis == null ? void 0 : globalThis.document) {
  const n = br(e), a = H.useRef(!1);
  return H.useEffect(() => {
    const i = (r) => {
      r.target && !a.current && Z3(X$, n, { originalEvent: r }, {
        discrete: !1
      });
    };
    return t.addEventListener("focusin", i), () => t.removeEventListener("focusin", i);
  }, [t, n]), {
    onFocusCapture: () => a.current = !0,
    onBlurCapture: () => a.current = !1
  };
}
function Bg() {
  const e = new CustomEvent(Z1);
  document.dispatchEvent(e);
}
function Z3(e, t, n, { discrete: a }) {
  const i = n.originalEvent.target, r = new CustomEvent(e, { bubbles: !1, cancelable: !0, detail: n });
  t && i.addEventListener(e, t, { once: !0 }), a ? z$(i, r) : i.dispatchEvent(r);
}
var wh = 0;
function Y$() {
  H.useEffect(() => {
    const e = document.querySelectorAll("[data-radix-focus-guard]");
    return document.body.insertAdjacentElement("afterbegin", e[0] ?? Hg()), document.body.insertAdjacentElement("beforeend", e[1] ?? Hg()), wh++, () => {
      wh === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach((t) => t.remove()), wh--;
    };
  }, []);
}
function Hg() {
  const e = document.createElement("span");
  return e.setAttribute("data-radix-focus-guard", ""), e.tabIndex = 0, e.style.outline = "none", e.style.opacity = "0", e.style.position = "fixed", e.style.pointerEvents = "none", e;
}
var Eh = "focusScope.autoFocusOnMount", xh = "focusScope.autoFocusOnUnmount", Xg = { bubbles: !1, cancelable: !0 }, Z$ = "FocusScope", K3 = H.forwardRef((e, t) => {
  const {
    loop: n = !1,
    trapped: a = !1,
    onMountAutoFocus: i,
    onUnmountAutoFocus: r,
    ...l
  } = e, [o, c] = H.useState(null), d = br(i), s = br(r), u = H.useRef(null), f = Sr(t, (m) => c(m)), h = H.useRef({
    paused: !1,
    pause() {
      this.paused = !0;
    },
    resume() {
      this.paused = !1;
    }
  }).current;
  H.useEffect(() => {
    if (a) {
      let m = function(y) {
        if (h.paused || !o) return;
        const w = y.target;
        o.contains(w) ? u.current = w : Qi(u.current, { select: !0 });
      }, g = function(y) {
        if (h.paused || !o) return;
        const w = y.relatedTarget;
        w !== null && (o.contains(w) || Qi(u.current, { select: !0 }));
      }, b = function(y) {
        if (document.activeElement === document.body)
          for (const x of y)
            x.removedNodes.length > 0 && Qi(o);
      };
      document.addEventListener("focusin", m), document.addEventListener("focusout", g);
      const v = new MutationObserver(b);
      return o && v.observe(o, { childList: !0, subtree: !0 }), () => {
        document.removeEventListener("focusin", m), document.removeEventListener("focusout", g), v.disconnect();
      };
    }
  }, [a, o, h.paused]), H.useEffect(() => {
    if (o) {
      Vg.add(h);
      const m = document.activeElement;
      if (!o.contains(m)) {
        const b = new CustomEvent(Eh, Xg);
        o.addEventListener(Eh, d), o.dispatchEvent(b), b.defaultPrevented || (K$(tz(q3(o)), { select: !0 }), document.activeElement === m && Qi(o));
      }
      return () => {
        o.removeEventListener(Eh, d), setTimeout(() => {
          const b = new CustomEvent(xh, Xg);
          o.addEventListener(xh, s), o.dispatchEvent(b), b.defaultPrevented || Qi(m ?? document.body, { select: !0 }), o.removeEventListener(xh, s), Vg.remove(h);
        }, 0);
      };
    }
  }, [o, d, s, h]);
  const U = H.useCallback(
    (m) => {
      if (!n && !a || h.paused) return;
      const g = m.key === "Tab" && !m.altKey && !m.ctrlKey && !m.metaKey, b = document.activeElement;
      if (g && b) {
        const v = m.currentTarget, [y, w] = q$(v);
        y && w ? !m.shiftKey && b === w ? (m.preventDefault(), n && Qi(y, { select: !0 })) : m.shiftKey && b === y && (m.preventDefault(), n && Qi(w, { select: !0 })) : b === v && m.preventDefault();
      }
    },
    [n, a, h.paused]
  );
  return /* @__PURE__ */ p(Bi.div, { tabIndex: -1, ...l, ref: f, onKeyDown: U });
});
K3.displayName = Z$;
function K$(e, { select: t = !1 } = {}) {
  const n = document.activeElement;
  for (const a of e)
    if (Qi(a, { select: t }), document.activeElement !== n) return;
}
function q$(e) {
  const t = q3(e), n = Wg(t, e), a = Wg(t.reverse(), e);
  return [n, a];
}
function q3(e) {
  const t = [], n = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
    acceptNode: (a) => {
      const i = a.tagName === "INPUT" && a.type === "hidden";
      return a.disabled || a.hidden || i ? NodeFilter.FILTER_SKIP : a.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
    }
  });
  for (; n.nextNode(); ) t.push(n.currentNode);
  return t;
}
function Wg(e, t) {
  for (const n of e)
    if (!J$(n, { upTo: t })) return n;
}
function J$(e, { upTo: t }) {
  if (getComputedStyle(e).visibility === "hidden") return !0;
  for (; e; ) {
    if (t !== void 0 && e === t) return !1;
    if (getComputedStyle(e).display === "none") return !0;
    e = e.parentElement;
  }
  return !1;
}
function Q$(e) {
  return e instanceof HTMLInputElement && "select" in e;
}
function Qi(e, { select: t = !1 } = {}) {
  if (e && e.focus) {
    const n = document.activeElement;
    e.focus({ preventScroll: !0 }), e !== n && Q$(e) && t && e.select();
  }
}
var Vg = ez();
function ez() {
  let e = [];
  return {
    add(t) {
      const n = e[0];
      t !== n && (n == null || n.pause()), e = Gg(e, t), e.unshift(t);
    },
    remove(t) {
      var n;
      e = Gg(e, t), (n = e[0]) == null || n.resume();
    }
  };
}
function Gg(e, t) {
  const n = [...e], a = n.indexOf(t);
  return a !== -1 && n.splice(a, 1), n;
}
function tz(e) {
  return e.filter((t) => t.tagName !== "A");
}
var hl = globalThis != null && globalThis.document ? H.useLayoutEffect : () => {
}, nz = H.useId || (() => {
}), az = 0;
function iz(e) {
  const [t, n] = H.useState(nz());
  return hl(() => {
    n((a) => a ?? String(az++));
  }, [e]), e || (t ? `radix-${t}` : "");
}
const rz = ["top", "right", "bottom", "left"], vr = Math.min, Rn = Math.max, Eu = Math.round, Zc = Math.floor, qa = (e) => ({
  x: e,
  y: e
}), lz = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, oz = {
  start: "end",
  end: "start"
};
function K1(e, t, n) {
  return Rn(e, vr(t, n));
}
function Ni(e, t) {
  return typeof e == "function" ? e(t) : e;
}
function Oi(e) {
  return e.split("-")[0];
}
function Ao(e) {
  return e.split("-")[1];
}
function Kp(e) {
  return e === "x" ? "y" : "x";
}
function qp(e) {
  return e === "y" ? "height" : "width";
}
function Ya(e) {
  return ["top", "bottom"].includes(Oi(e)) ? "y" : "x";
}
function Jp(e) {
  return Kp(Ya(e));
}
function sz(e, t, n) {
  n === void 0 && (n = !1);
  const a = Ao(e), i = Jp(e), r = qp(i);
  let l = i === "x" ? a === (n ? "end" : "start") ? "right" : "left" : a === "start" ? "bottom" : "top";
  return t.reference[r] > t.floating[r] && (l = xu(l)), [l, xu(l)];
}
function cz(e) {
  const t = xu(e);
  return [q1(e), t, q1(t)];
}
function q1(e) {
  return e.replace(/start|end/g, (t) => oz[t]);
}
function dz(e, t, n) {
  const a = ["left", "right"], i = ["right", "left"], r = ["top", "bottom"], l = ["bottom", "top"];
  switch (e) {
    case "top":
    case "bottom":
      return n ? t ? i : a : t ? a : i;
    case "left":
    case "right":
      return t ? r : l;
    default:
      return [];
  }
}
function uz(e, t, n, a) {
  const i = Ao(e);
  let r = dz(Oi(e), n === "start", a);
  return i && (r = r.map((l) => l + "-" + i), t && (r = r.concat(r.map(q1)))), r;
}
function xu(e) {
  return e.replace(/left|right|bottom|top/g, (t) => lz[t]);
}
function fz(e) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...e
  };
}
function J3(e) {
  return typeof e != "number" ? fz(e) : {
    top: e,
    right: e,
    bottom: e,
    left: e
  };
}
function Su(e) {
  const {
    x: t,
    y: n,
    width: a,
    height: i
  } = e;
  return {
    width: a,
    height: i,
    top: n,
    left: t,
    right: t + a,
    bottom: n + i,
    x: t,
    y: n
  };
}
function jg(e, t, n) {
  let {
    reference: a,
    floating: i
  } = e;
  const r = Ya(t), l = Jp(t), o = qp(l), c = Oi(t), d = r === "y", s = a.x + a.width / 2 - i.width / 2, u = a.y + a.height / 2 - i.height / 2, f = a[o] / 2 - i[o] / 2;
  let h;
  switch (c) {
    case "top":
      h = {
        x: s,
        y: a.y - i.height
      };
      break;
    case "bottom":
      h = {
        x: s,
        y: a.y + a.height
      };
      break;
    case "right":
      h = {
        x: a.x + a.width,
        y: u
      };
      break;
    case "left":
      h = {
        x: a.x - i.width,
        y: u
      };
      break;
    default:
      h = {
        x: a.x,
        y: a.y
      };
  }
  switch (Ao(t)) {
    case "start":
      h[l] -= f * (n && d ? -1 : 1);
      break;
    case "end":
      h[l] += f * (n && d ? -1 : 1);
      break;
  }
  return h;
}
const hz = async (e, t, n) => {
  const {
    placement: a = "bottom",
    strategy: i = "absolute",
    middleware: r = [],
    platform: l
  } = n, o = r.filter(Boolean), c = await (l.isRTL == null ? void 0 : l.isRTL(t));
  let d = await l.getElementRects({
    reference: e,
    floating: t,
    strategy: i
  }), {
    x: s,
    y: u
  } = jg(d, a, c), f = a, h = {}, U = 0;
  for (let m = 0; m < o.length; m++) {
    const {
      name: g,
      fn: b
    } = o[m], {
      x: v,
      y,
      data: w,
      reset: x
    } = await b({
      x: s,
      y: u,
      initialPlacement: a,
      placement: f,
      strategy: i,
      middlewareData: h,
      rects: d,
      platform: l,
      elements: {
        reference: e,
        floating: t
      }
    });
    s = v ?? s, u = y ?? u, h = {
      ...h,
      [g]: {
        ...h[g],
        ...w
      }
    }, x && U <= 50 && (U++, typeof x == "object" && (x.placement && (f = x.placement), x.rects && (d = x.rects === !0 ? await l.getElementRects({
      reference: e,
      floating: t,
      strategy: i
    }) : x.rects), {
      x: s,
      y: u
    } = jg(d, f, c)), m = -1);
  }
  return {
    x: s,
    y: u,
    placement: f,
    strategy: i,
    middlewareData: h
  };
};
async function nc(e, t) {
  var n;
  t === void 0 && (t = {});
  const {
    x: a,
    y: i,
    platform: r,
    rects: l,
    elements: o,
    strategy: c
  } = e, {
    boundary: d = "clippingAncestors",
    rootBoundary: s = "viewport",
    elementContext: u = "floating",
    altBoundary: f = !1,
    padding: h = 0
  } = Ni(t, e), U = J3(h), g = o[f ? u === "floating" ? "reference" : "floating" : u], b = Su(await r.getClippingRect({
    element: (n = await (r.isElement == null ? void 0 : r.isElement(g))) == null || n ? g : g.contextElement || await (r.getDocumentElement == null ? void 0 : r.getDocumentElement(o.floating)),
    boundary: d,
    rootBoundary: s,
    strategy: c
  })), v = u === "floating" ? {
    x: a,
    y: i,
    width: l.floating.width,
    height: l.floating.height
  } : l.reference, y = await (r.getOffsetParent == null ? void 0 : r.getOffsetParent(o.floating)), w = await (r.isElement == null ? void 0 : r.isElement(y)) ? await (r.getScale == null ? void 0 : r.getScale(y)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, x = Su(r.convertOffsetParentRelativeRectToViewportRelativeRect ? await r.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: o,
    rect: v,
    offsetParent: y,
    strategy: c
  }) : v);
  return {
    top: (b.top - x.top + U.top) / w.y,
    bottom: (x.bottom - b.bottom + U.bottom) / w.y,
    left: (b.left - x.left + U.left) / w.x,
    right: (x.right - b.right + U.right) / w.x
  };
}
const pz = (e) => ({
  name: "arrow",
  options: e,
  async fn(t) {
    const {
      x: n,
      y: a,
      placement: i,
      rects: r,
      platform: l,
      elements: o,
      middlewareData: c
    } = t, {
      element: d,
      padding: s = 0
    } = Ni(e, t) || {};
    if (d == null)
      return {};
    const u = J3(s), f = {
      x: n,
      y: a
    }, h = Jp(i), U = qp(h), m = await l.getDimensions(d), g = h === "y", b = g ? "top" : "left", v = g ? "bottom" : "right", y = g ? "clientHeight" : "clientWidth", w = r.reference[U] + r.reference[h] - f[h] - r.floating[U], x = f[h] - r.reference[h], S = await (l.getOffsetParent == null ? void 0 : l.getOffsetParent(d));
    let E = S ? S[y] : 0;
    (!E || !await (l.isElement == null ? void 0 : l.isElement(S))) && (E = o.floating[y] || r.floating[U]);
    const M = w / 2 - x / 2, I = E / 2 - m[U] / 2 - 1, T = vr(u[b], I), A = vr(u[v], I), D = T, R = E - m[U] - A, O = E / 2 - m[U] / 2 + M, $ = K1(D, O, R), F = !c.arrow && Ao(i) != null && O !== $ && r.reference[U] / 2 - (O < D ? T : A) - m[U] / 2 < 0, N = F ? O < D ? O - D : O - R : 0;
    return {
      [h]: f[h] + N,
      data: {
        [h]: $,
        centerOffset: O - $ - N,
        ...F && {
          alignmentOffset: N
        }
      },
      reset: F
    };
  }
}), Uz = function(e) {
  return e === void 0 && (e = {}), {
    name: "flip",
    options: e,
    async fn(t) {
      var n, a;
      const {
        placement: i,
        middlewareData: r,
        rects: l,
        initialPlacement: o,
        platform: c,
        elements: d
      } = t, {
        mainAxis: s = !0,
        crossAxis: u = !0,
        fallbackPlacements: f,
        fallbackStrategy: h = "bestFit",
        fallbackAxisSideDirection: U = "none",
        flipAlignment: m = !0,
        ...g
      } = Ni(e, t);
      if ((n = r.arrow) != null && n.alignmentOffset)
        return {};
      const b = Oi(i), v = Ya(o), y = Oi(o) === o, w = await (c.isRTL == null ? void 0 : c.isRTL(d.floating)), x = f || (y || !m ? [xu(o)] : cz(o)), S = U !== "none";
      !f && S && x.push(...uz(o, m, U, w));
      const E = [o, ...x], M = await nc(t, g), I = [];
      let T = ((a = r.flip) == null ? void 0 : a.overflows) || [];
      if (s && I.push(M[b]), u) {
        const O = sz(i, l, w);
        I.push(M[O[0]], M[O[1]]);
      }
      if (T = [...T, {
        placement: i,
        overflows: I
      }], !I.every((O) => O <= 0)) {
        var A, D;
        const O = (((A = r.flip) == null ? void 0 : A.index) || 0) + 1, $ = E[O];
        if ($ && (!(u === "alignment" ? v !== Ya($) : !1) || // We leave the current main axis only if every placement on that axis
        // overflows the main axis.
        T.every((j) => j.overflows[0] > 0 && Ya(j.placement) === v)))
          return {
            data: {
              index: O,
              overflows: T
            },
            reset: {
              placement: $
            }
          };
        let F = (D = T.filter((N) => N.overflows[0] <= 0).sort((N, j) => N.overflows[1] - j.overflows[1])[0]) == null ? void 0 : D.placement;
        if (!F)
          switch (h) {
            case "bestFit": {
              var R;
              const N = (R = T.filter((j) => {
                if (S) {
                  const z = Ya(j.placement);
                  return z === v || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  z === "y";
                }
                return !0;
              }).map((j) => [j.placement, j.overflows.filter((z) => z > 0).reduce((z, Y) => z + Y, 0)]).sort((j, z) => j[1] - z[1])[0]) == null ? void 0 : R[0];
              N && (F = N);
              break;
            }
            case "initialPlacement":
              F = o;
              break;
          }
        if (i !== F)
          return {
            reset: {
              placement: F
            }
          };
      }
      return {};
    }
  };
};
function Yg(e, t) {
  return {
    top: e.top - t.height,
    right: e.right - t.width,
    bottom: e.bottom - t.height,
    left: e.left - t.width
  };
}
function Zg(e) {
  return rz.some((t) => e[t] >= 0);
}
const mz = function(e) {
  return e === void 0 && (e = {}), {
    name: "hide",
    options: e,
    async fn(t) {
      const {
        rects: n
      } = t, {
        strategy: a = "referenceHidden",
        ...i
      } = Ni(e, t);
      switch (a) {
        case "referenceHidden": {
          const r = await nc(t, {
            ...i,
            elementContext: "reference"
          }), l = Yg(r, n.reference);
          return {
            data: {
              referenceHiddenOffsets: l,
              referenceHidden: Zg(l)
            }
          };
        }
        case "escaped": {
          const r = await nc(t, {
            ...i,
            altBoundary: !0
          }), l = Yg(r, n.floating);
          return {
            data: {
              escapedOffsets: l,
              escaped: Zg(l)
            }
          };
        }
        default:
          return {};
      }
    }
  };
};
async function gz(e, t) {
  const {
    placement: n,
    platform: a,
    elements: i
  } = e, r = await (a.isRTL == null ? void 0 : a.isRTL(i.floating)), l = Oi(n), o = Ao(n), c = Ya(n) === "y", d = ["left", "top"].includes(l) ? -1 : 1, s = r && c ? -1 : 1, u = Ni(t, e);
  let {
    mainAxis: f,
    crossAxis: h,
    alignmentAxis: U
  } = typeof u == "number" ? {
    mainAxis: u,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: u.mainAxis || 0,
    crossAxis: u.crossAxis || 0,
    alignmentAxis: u.alignmentAxis
  };
  return o && typeof U == "number" && (h = o === "end" ? U * -1 : U), c ? {
    x: h * s,
    y: f * d
  } : {
    x: f * d,
    y: h * s
  };
}
const bz = function(e) {
  return e === void 0 && (e = 0), {
    name: "offset",
    options: e,
    async fn(t) {
      var n, a;
      const {
        x: i,
        y: r,
        placement: l,
        middlewareData: o
      } = t, c = await gz(t, e);
      return l === ((n = o.offset) == null ? void 0 : n.placement) && (a = o.arrow) != null && a.alignmentOffset ? {} : {
        x: i + c.x,
        y: r + c.y,
        data: {
          ...c,
          placement: l
        }
      };
    }
  };
}, vz = function(e) {
  return e === void 0 && (e = {}), {
    name: "shift",
    options: e,
    async fn(t) {
      const {
        x: n,
        y: a,
        placement: i
      } = t, {
        mainAxis: r = !0,
        crossAxis: l = !1,
        limiter: o = {
          fn: (g) => {
            let {
              x: b,
              y: v
            } = g;
            return {
              x: b,
              y: v
            };
          }
        },
        ...c
      } = Ni(e, t), d = {
        x: n,
        y: a
      }, s = await nc(t, c), u = Ya(Oi(i)), f = Kp(u);
      let h = d[f], U = d[u];
      if (r) {
        const g = f === "y" ? "top" : "left", b = f === "y" ? "bottom" : "right", v = h + s[g], y = h - s[b];
        h = K1(v, h, y);
      }
      if (l) {
        const g = u === "y" ? "top" : "left", b = u === "y" ? "bottom" : "right", v = U + s[g], y = U - s[b];
        U = K1(v, U, y);
      }
      const m = o.fn({
        ...t,
        [f]: h,
        [u]: U
      });
      return {
        ...m,
        data: {
          x: m.x - n,
          y: m.y - a,
          enabled: {
            [f]: r,
            [u]: l
          }
        }
      };
    }
  };
}, yz = function(e) {
  return e === void 0 && (e = {}), {
    options: e,
    fn(t) {
      const {
        x: n,
        y: a,
        placement: i,
        rects: r,
        middlewareData: l
      } = t, {
        offset: o = 0,
        mainAxis: c = !0,
        crossAxis: d = !0
      } = Ni(e, t), s = {
        x: n,
        y: a
      }, u = Ya(i), f = Kp(u);
      let h = s[f], U = s[u];
      const m = Ni(o, t), g = typeof m == "number" ? {
        mainAxis: m,
        crossAxis: 0
      } : {
        mainAxis: 0,
        crossAxis: 0,
        ...m
      };
      if (c) {
        const y = f === "y" ? "height" : "width", w = r.reference[f] - r.floating[y] + g.mainAxis, x = r.reference[f] + r.reference[y] - g.mainAxis;
        h < w ? h = w : h > x && (h = x);
      }
      if (d) {
        var b, v;
        const y = f === "y" ? "width" : "height", w = ["top", "left"].includes(Oi(i)), x = r.reference[u] - r.floating[y] + (w && ((b = l.offset) == null ? void 0 : b[u]) || 0) + (w ? 0 : g.crossAxis), S = r.reference[u] + r.reference[y] + (w ? 0 : ((v = l.offset) == null ? void 0 : v[u]) || 0) - (w ? g.crossAxis : 0);
        U < x ? U = x : U > S && (U = S);
      }
      return {
        [f]: h,
        [u]: U
      };
    }
  };
}, wz = function(e) {
  return e === void 0 && (e = {}), {
    name: "size",
    options: e,
    async fn(t) {
      var n, a;
      const {
        placement: i,
        rects: r,
        platform: l,
        elements: o
      } = t, {
        apply: c = () => {
        },
        ...d
      } = Ni(e, t), s = await nc(t, d), u = Oi(i), f = Ao(i), h = Ya(i) === "y", {
        width: U,
        height: m
      } = r.floating;
      let g, b;
      u === "top" || u === "bottom" ? (g = u, b = f === (await (l.isRTL == null ? void 0 : l.isRTL(o.floating)) ? "start" : "end") ? "left" : "right") : (b = u, g = f === "end" ? "top" : "bottom");
      const v = m - s.top - s.bottom, y = U - s.left - s.right, w = vr(m - s[g], v), x = vr(U - s[b], y), S = !t.middlewareData.shift;
      let E = w, M = x;
      if ((n = t.middlewareData.shift) != null && n.enabled.x && (M = y), (a = t.middlewareData.shift) != null && a.enabled.y && (E = v), S && !f) {
        const T = Rn(s.left, 0), A = Rn(s.right, 0), D = Rn(s.top, 0), R = Rn(s.bottom, 0);
        h ? M = U - 2 * (T !== 0 || A !== 0 ? T + A : Rn(s.left, s.right)) : E = m - 2 * (D !== 0 || R !== 0 ? D + R : Rn(s.top, s.bottom));
      }
      await c({
        ...t,
        availableWidth: M,
        availableHeight: E
      });
      const I = await l.getDimensions(o.floating);
      return U !== I.width || m !== I.height ? {
        reset: {
          rects: !0
        }
      } : {};
    }
  };
};
function mf() {
  return typeof window < "u";
}
function Do(e) {
  return Q3(e) ? (e.nodeName || "").toLowerCase() : "#document";
}
function On(e) {
  var t;
  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
function oi(e) {
  var t;
  return (t = (Q3(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;
}
function Q3(e) {
  return mf() ? e instanceof Node || e instanceof On(e).Node : !1;
}
function Ma(e) {
  return mf() ? e instanceof Element || e instanceof On(e).Element : !1;
}
function li(e) {
  return mf() ? e instanceof HTMLElement || e instanceof On(e).HTMLElement : !1;
}
function Kg(e) {
  return !mf() || typeof ShadowRoot > "u" ? !1 : e instanceof ShadowRoot || e instanceof On(e).ShadowRoot;
}
function Ec(e) {
  const {
    overflow: t,
    overflowX: n,
    overflowY: a,
    display: i
  } = Ca(e);
  return /auto|scroll|overlay|hidden|clip/.test(t + a + n) && !["inline", "contents"].includes(i);
}
function Ez(e) {
  return ["table", "td", "th"].includes(Do(e));
}
function gf(e) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return e.matches(t);
    } catch {
      return !1;
    }
  });
}
function Qp(e) {
  const t = eU(), n = Ma(e) ? Ca(e) : e;
  return ["transform", "translate", "scale", "rotate", "perspective"].some((a) => n[a] ? n[a] !== "none" : !1) || (n.containerType ? n.containerType !== "normal" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== "none" : !1) || !t && (n.filter ? n.filter !== "none" : !1) || ["transform", "translate", "scale", "rotate", "perspective", "filter"].some((a) => (n.willChange || "").includes(a)) || ["paint", "layout", "strict", "content"].some((a) => (n.contain || "").includes(a));
}
function xz(e) {
  let t = yr(e);
  for (; li(t) && !yo(t); ) {
    if (Qp(t))
      return t;
    if (gf(t))
      return null;
    t = yr(t);
  }
  return null;
}
function eU() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
function yo(e) {
  return ["html", "body", "#document"].includes(Do(e));
}
function Ca(e) {
  return On(e).getComputedStyle(e);
}
function bf(e) {
  return Ma(e) ? {
    scrollLeft: e.scrollLeft,
    scrollTop: e.scrollTop
  } : {
    scrollLeft: e.scrollX,
    scrollTop: e.scrollY
  };
}
function yr(e) {
  if (Do(e) === "html")
    return e;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    e.assignedSlot || // DOM Element detected.
    e.parentNode || // ShadowRoot detected.
    Kg(e) && e.host || // Fallback.
    oi(e)
  );
  return Kg(t) ? t.host : t;
}
function e4(e) {
  const t = yr(e);
  return yo(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : li(t) && Ec(t) ? t : e4(t);
}
function ac(e, t, n) {
  var a;
  t === void 0 && (t = []), n === void 0 && (n = !0);
  const i = e4(e), r = i === ((a = e.ownerDocument) == null ? void 0 : a.body), l = On(i);
  if (r) {
    const o = J1(l);
    return t.concat(l, l.visualViewport || [], Ec(i) ? i : [], o && n ? ac(o) : []);
  }
  return t.concat(i, ac(i, [], n));
}
function J1(e) {
  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;
}
function t4(e) {
  const t = Ca(e);
  let n = parseFloat(t.width) || 0, a = parseFloat(t.height) || 0;
  const i = li(e), r = i ? e.offsetWidth : n, l = i ? e.offsetHeight : a, o = Eu(n) !== r || Eu(a) !== l;
  return o && (n = r, a = l), {
    width: n,
    height: a,
    $: o
  };
}
function tU(e) {
  return Ma(e) ? e : e.contextElement;
}
function ql(e) {
  const t = tU(e);
  if (!li(t))
    return qa(1);
  const n = t.getBoundingClientRect(), {
    width: a,
    height: i,
    $: r
  } = t4(t);
  let l = (r ? Eu(n.width) : n.width) / a, o = (r ? Eu(n.height) : n.height) / i;
  return (!l || !Number.isFinite(l)) && (l = 1), (!o || !Number.isFinite(o)) && (o = 1), {
    x: l,
    y: o
  };
}
const Sz = /* @__PURE__ */ qa(0);
function n4(e) {
  const t = On(e);
  return !eU() || !t.visualViewport ? Sz : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
function kz(e, t, n) {
  return t === void 0 && (t = !1), !n || t && n !== On(e) ? !1 : t;
}
function pl(e, t, n, a) {
  t === void 0 && (t = !1), n === void 0 && (n = !1);
  const i = e.getBoundingClientRect(), r = tU(e);
  let l = qa(1);
  t && (a ? Ma(a) && (l = ql(a)) : l = ql(e));
  const o = kz(r, n, a) ? n4(r) : qa(0);
  let c = (i.left + o.x) / l.x, d = (i.top + o.y) / l.y, s = i.width / l.x, u = i.height / l.y;
  if (r) {
    const f = On(r), h = a && Ma(a) ? On(a) : a;
    let U = f, m = J1(U);
    for (; m && a && h !== U; ) {
      const g = ql(m), b = m.getBoundingClientRect(), v = Ca(m), y = b.left + (m.clientLeft + parseFloat(v.paddingLeft)) * g.x, w = b.top + (m.clientTop + parseFloat(v.paddingTop)) * g.y;
      c *= g.x, d *= g.y, s *= g.x, u *= g.y, c += y, d += w, U = On(m), m = J1(U);
    }
  }
  return Su({
    width: s,
    height: u,
    x: c,
    y: d
  });
}
function nU(e, t) {
  const n = bf(e).scrollLeft;
  return t ? t.left + n : pl(oi(e)).left + n;
}
function a4(e, t, n) {
  n === void 0 && (n = !1);
  const a = e.getBoundingClientRect(), i = a.left + t.scrollLeft - (n ? 0 : (
    // RTL <body> scrollbar.
    nU(e, a)
  )), r = a.top + t.scrollTop;
  return {
    x: i,
    y: r
  };
}
function Mz(e) {
  let {
    elements: t,
    rect: n,
    offsetParent: a,
    strategy: i
  } = e;
  const r = i === "fixed", l = oi(a), o = t ? gf(t.floating) : !1;
  if (a === l || o && r)
    return n;
  let c = {
    scrollLeft: 0,
    scrollTop: 0
  }, d = qa(1);
  const s = qa(0), u = li(a);
  if ((u || !u && !r) && ((Do(a) !== "body" || Ec(l)) && (c = bf(a)), li(a))) {
    const h = pl(a);
    d = ql(a), s.x = h.x + a.clientLeft, s.y = h.y + a.clientTop;
  }
  const f = l && !u && !r ? a4(l, c, !0) : qa(0);
  return {
    width: n.width * d.x,
    height: n.height * d.y,
    x: n.x * d.x - c.scrollLeft * d.x + s.x + f.x,
    y: n.y * d.y - c.scrollTop * d.y + s.y + f.y
  };
}
function Cz(e) {
  return Array.from(e.getClientRects());
}
function Iz(e) {
  const t = oi(e), n = bf(e), a = e.ownerDocument.body, i = Rn(t.scrollWidth, t.clientWidth, a.scrollWidth, a.clientWidth), r = Rn(t.scrollHeight, t.clientHeight, a.scrollHeight, a.clientHeight);
  let l = -n.scrollLeft + nU(e);
  const o = -n.scrollTop;
  return Ca(a).direction === "rtl" && (l += Rn(t.clientWidth, a.clientWidth) - i), {
    width: i,
    height: r,
    x: l,
    y: o
  };
}
function Tz(e, t) {
  const n = On(e), a = oi(e), i = n.visualViewport;
  let r = a.clientWidth, l = a.clientHeight, o = 0, c = 0;
  if (i) {
    r = i.width, l = i.height;
    const d = eU();
    (!d || d && t === "fixed") && (o = i.offsetLeft, c = i.offsetTop);
  }
  return {
    width: r,
    height: l,
    x: o,
    y: c
  };
}
function _z(e, t) {
  const n = pl(e, !0, t === "fixed"), a = n.top + e.clientTop, i = n.left + e.clientLeft, r = li(e) ? ql(e) : qa(1), l = e.clientWidth * r.x, o = e.clientHeight * r.y, c = i * r.x, d = a * r.y;
  return {
    width: l,
    height: o,
    x: c,
    y: d
  };
}
function qg(e, t, n) {
  let a;
  if (t === "viewport")
    a = Tz(e, n);
  else if (t === "document")
    a = Iz(oi(e));
  else if (Ma(t))
    a = _z(t, n);
  else {
    const i = n4(e);
    a = {
      x: t.x - i.x,
      y: t.y - i.y,
      width: t.width,
      height: t.height
    };
  }
  return Su(a);
}
function i4(e, t) {
  const n = yr(e);
  return n === t || !Ma(n) || yo(n) ? !1 : Ca(n).position === "fixed" || i4(n, t);
}
function Az(e, t) {
  const n = t.get(e);
  if (n)
    return n;
  let a = ac(e, [], !1).filter((o) => Ma(o) && Do(o) !== "body"), i = null;
  const r = Ca(e).position === "fixed";
  let l = r ? yr(e) : e;
  for (; Ma(l) && !yo(l); ) {
    const o = Ca(l), c = Qp(l);
    !c && o.position === "fixed" && (i = null), (r ? !c && !i : !c && o.position === "static" && !!i && ["absolute", "fixed"].includes(i.position) || Ec(l) && !c && i4(e, l)) ? a = a.filter((s) => s !== l) : i = o, l = yr(l);
  }
  return t.set(e, a), a;
}
function Dz(e) {
  let {
    element: t,
    boundary: n,
    rootBoundary: a,
    strategy: i
  } = e;
  const l = [...n === "clippingAncestors" ? gf(t) ? [] : Az(t, this._c) : [].concat(n), a], o = l[0], c = l.reduce((d, s) => {
    const u = qg(t, s, i);
    return d.top = Rn(u.top, d.top), d.right = vr(u.right, d.right), d.bottom = vr(u.bottom, d.bottom), d.left = Rn(u.left, d.left), d;
  }, qg(t, o, i));
  return {
    width: c.right - c.left,
    height: c.bottom - c.top,
    x: c.left,
    y: c.top
  };
}
function Lz(e) {
  const {
    width: t,
    height: n
  } = t4(e);
  return {
    width: t,
    height: n
  };
}
function Rz(e, t, n) {
  const a = li(t), i = oi(t), r = n === "fixed", l = pl(e, !0, r, t);
  let o = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const c = qa(0);
  function d() {
    c.x = nU(i);
  }
  if (a || !a && !r)
    if ((Do(t) !== "body" || Ec(i)) && (o = bf(t)), a) {
      const h = pl(t, !0, r, t);
      c.x = h.x + t.clientLeft, c.y = h.y + t.clientTop;
    } else i && d();
  r && !a && i && d();
  const s = i && !a && !r ? a4(i, o) : qa(0), u = l.left + o.scrollLeft - c.x - s.x, f = l.top + o.scrollTop - c.y - s.y;
  return {
    x: u,
    y: f,
    width: l.width,
    height: l.height
  };
}
function Sh(e) {
  return Ca(e).position === "static";
}
function Jg(e, t) {
  if (!li(e) || Ca(e).position === "fixed")
    return null;
  if (t)
    return t(e);
  let n = e.offsetParent;
  return oi(e) === n && (n = n.ownerDocument.body), n;
}
function r4(e, t) {
  const n = On(e);
  if (gf(e))
    return n;
  if (!li(e)) {
    let i = yr(e);
    for (; i && !yo(i); ) {
      if (Ma(i) && !Sh(i))
        return i;
      i = yr(i);
    }
    return n;
  }
  let a = Jg(e, t);
  for (; a && Ez(a) && Sh(a); )
    a = Jg(a, t);
  return a && yo(a) && Sh(a) && !Qp(a) ? n : a || xz(e) || n;
}
const Pz = async function(e) {
  const t = this.getOffsetParent || r4, n = this.getDimensions, a = await n(e.floating);
  return {
    reference: Rz(e.reference, await t(e.floating), e.strategy),
    floating: {
      x: 0,
      y: 0,
      width: a.width,
      height: a.height
    }
  };
};
function Nz(e) {
  return Ca(e).direction === "rtl";
}
const Oz = {
  convertOffsetParentRelativeRectToViewportRelativeRect: Mz,
  getDocumentElement: oi,
  getClippingRect: Dz,
  getOffsetParent: r4,
  getElementRects: Pz,
  getClientRects: Cz,
  getDimensions: Lz,
  getScale: ql,
  isElement: Ma,
  isRTL: Nz
};
function l4(e, t) {
  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;
}
function $z(e, t) {
  let n = null, a;
  const i = oi(e);
  function r() {
    var o;
    clearTimeout(a), (o = n) == null || o.disconnect(), n = null;
  }
  function l(o, c) {
    o === void 0 && (o = !1), c === void 0 && (c = 1), r();
    const d = e.getBoundingClientRect(), {
      left: s,
      top: u,
      width: f,
      height: h
    } = d;
    if (o || t(), !f || !h)
      return;
    const U = Zc(u), m = Zc(i.clientWidth - (s + f)), g = Zc(i.clientHeight - (u + h)), b = Zc(s), y = {
      rootMargin: -U + "px " + -m + "px " + -g + "px " + -b + "px",
      threshold: Rn(0, vr(1, c)) || 1
    };
    let w = !0;
    function x(S) {
      const E = S[0].intersectionRatio;
      if (E !== c) {
        if (!w)
          return l();
        E ? l(!1, E) : a = setTimeout(() => {
          l(!1, 1e-7);
        }, 1e3);
      }
      E === 1 && !l4(d, e.getBoundingClientRect()) && l(), w = !1;
    }
    try {
      n = new IntersectionObserver(x, {
        ...y,
        // Handle <iframe>s
        root: i.ownerDocument
      });
    } catch {
      n = new IntersectionObserver(x, y);
    }
    n.observe(e);
  }
  return l(!0), r;
}
function zz(e, t, n, a) {
  a === void 0 && (a = {});
  const {
    ancestorScroll: i = !0,
    ancestorResize: r = !0,
    elementResize: l = typeof ResizeObserver == "function",
    layoutShift: o = typeof IntersectionObserver == "function",
    animationFrame: c = !1
  } = a, d = tU(e), s = i || r ? [...d ? ac(d) : [], ...ac(t)] : [];
  s.forEach((b) => {
    i && b.addEventListener("scroll", n, {
      passive: !0
    }), r && b.addEventListener("resize", n);
  });
  const u = d && o ? $z(d, n) : null;
  let f = -1, h = null;
  l && (h = new ResizeObserver((b) => {
    let [v] = b;
    v && v.target === d && h && (h.unobserve(t), cancelAnimationFrame(f), f = requestAnimationFrame(() => {
      var y;
      (y = h) == null || y.observe(t);
    })), n();
  }), d && !c && h.observe(d), h.observe(t));
  let U, m = c ? pl(e) : null;
  c && g();
  function g() {
    const b = pl(e);
    m && !l4(m, b) && n(), m = b, U = requestAnimationFrame(g);
  }
  return n(), () => {
    var b;
    s.forEach((v) => {
      i && v.removeEventListener("scroll", n), r && v.removeEventListener("resize", n);
    }), u == null || u(), (b = h) == null || b.disconnect(), h = null, c && cancelAnimationFrame(U);
  };
}
const Fz = bz, Bz = vz, Hz = Uz, Xz = wz, Wz = mz, Qg = pz, Vz = yz, Gz = (e, t, n) => {
  const a = /* @__PURE__ */ new Map(), i = {
    platform: Oz,
    ...n
  }, r = {
    ...i.platform,
    _c: a
  };
  return hz(e, t, {
    ...i,
    platform: r
  });
};
var jz = typeof document < "u", Yz = function() {
}, _d = jz ? _n : Yz;
function ku(e, t) {
  if (e === t)
    return !0;
  if (typeof e != typeof t)
    return !1;
  if (typeof e == "function" && e.toString() === t.toString())
    return !0;
  let n, a, i;
  if (e && t && typeof e == "object") {
    if (Array.isArray(e)) {
      if (n = e.length, n !== t.length) return !1;
      for (a = n; a-- !== 0; )
        if (!ku(e[a], t[a]))
          return !1;
      return !0;
    }
    if (i = Object.keys(e), n = i.length, n !== Object.keys(t).length)
      return !1;
    for (a = n; a-- !== 0; )
      if (!{}.hasOwnProperty.call(t, i[a]))
        return !1;
    for (a = n; a-- !== 0; ) {
      const r = i[a];
      if (!(r === "_owner" && e.$$typeof) && !ku(e[r], t[r]))
        return !1;
    }
    return !0;
  }
  return e !== e && t !== t;
}
function o4(e) {
  return typeof window > "u" ? 1 : (e.ownerDocument.defaultView || window).devicePixelRatio || 1;
}
function e6(e, t) {
  const n = o4(e);
  return Math.round(t * n) / n;
}
function kh(e) {
  const t = H.useRef(e);
  return _d(() => {
    t.current = e;
  }), t;
}
function Zz(e) {
  e === void 0 && (e = {});
  const {
    placement: t = "bottom",
    strategy: n = "absolute",
    middleware: a = [],
    platform: i,
    elements: {
      reference: r,
      floating: l
    } = {},
    transform: o = !0,
    whileElementsMounted: c,
    open: d
  } = e, [s, u] = H.useState({
    x: 0,
    y: 0,
    strategy: n,
    placement: t,
    middlewareData: {},
    isPositioned: !1
  }), [f, h] = H.useState(a);
  ku(f, a) || h(a);
  const [U, m] = H.useState(null), [g, b] = H.useState(null), v = H.useCallback((j) => {
    j !== S.current && (S.current = j, m(j));
  }, []), y = H.useCallback((j) => {
    j !== E.current && (E.current = j, b(j));
  }, []), w = r || U, x = l || g, S = H.useRef(null), E = H.useRef(null), M = H.useRef(s), I = c != null, T = kh(c), A = kh(i), D = kh(d), R = H.useCallback(() => {
    if (!S.current || !E.current)
      return;
    const j = {
      placement: t,
      strategy: n,
      middleware: f
    };
    A.current && (j.platform = A.current), Gz(S.current, E.current, j).then((z) => {
      const Y = {
        ...z,
        // The floating element's position may be recomputed while it's closed
        // but still mounted (such as when transitioning out). To ensure
        // `isPositioned` will be `false` initially on the next open, avoid
        // setting it to `true` when `open === false` (must be specified).
        isPositioned: D.current !== !1
      };
      O.current && !ku(M.current, Y) && (M.current = Y, O5.flushSync(() => {
        u(Y);
      }));
    });
  }, [f, t, n, A, D]);
  _d(() => {
    d === !1 && M.current.isPositioned && (M.current.isPositioned = !1, u((j) => ({
      ...j,
      isPositioned: !1
    })));
  }, [d]);
  const O = H.useRef(!1);
  _d(() => (O.current = !0, () => {
    O.current = !1;
  }), []), _d(() => {
    if (w && (S.current = w), x && (E.current = x), w && x) {
      if (T.current)
        return T.current(w, x, R);
      R();
    }
  }, [w, x, R, T, I]);
  const $ = H.useMemo(() => ({
    reference: S,
    floating: E,
    setReference: v,
    setFloating: y
  }), [v, y]), F = H.useMemo(() => ({
    reference: w,
    floating: x
  }), [w, x]), N = H.useMemo(() => {
    const j = {
      position: n,
      left: 0,
      top: 0
    };
    if (!F.floating)
      return j;
    const z = e6(F.floating, s.x), Y = e6(F.floating, s.y);
    return o ? {
      ...j,
      transform: "translate(" + z + "px, " + Y + "px)",
      ...o4(F.floating) >= 1.5 && {
        willChange: "transform"
      }
    } : {
      position: n,
      left: z,
      top: Y
    };
  }, [n, o, F.floating, s.x, s.y]);
  return H.useMemo(() => ({
    ...s,
    update: R,
    refs: $,
    elements: F,
    floatingStyles: N
  }), [s, R, $, F, N]);
}
const Kz = (e) => {
  function t(n) {
    return {}.hasOwnProperty.call(n, "current");
  }
  return {
    name: "arrow",
    options: e,
    fn(n) {
      const {
        element: a,
        padding: i
      } = typeof e == "function" ? e(n) : e;
      return a && t(a) ? a.current != null ? Qg({
        element: a.current,
        padding: i
      }).fn(n) : {} : a ? Qg({
        element: a,
        padding: i
      }).fn(n) : {};
    }
  };
}, qz = (e, t) => ({
  ...Fz(e),
  options: [e, t]
}), Jz = (e, t) => ({
  ...Bz(e),
  options: [e, t]
}), Qz = (e, t) => ({
  ...Vz(e),
  options: [e, t]
}), eF = (e, t) => ({
  ...Hz(e),
  options: [e, t]
}), tF = (e, t) => ({
  ...Xz(e),
  options: [e, t]
}), nF = (e, t) => ({
  ...Wz(e),
  options: [e, t]
}), aF = (e, t) => ({
  ...Kz(e),
  options: [e, t]
});
var iF = "Arrow", s4 = H.forwardRef((e, t) => {
  const { children: n, width: a = 10, height: i = 5, ...r } = e;
  return /* @__PURE__ */ p(
    Bi.svg,
    {
      ...r,
      ref: t,
      width: a,
      height: i,
      viewBox: "0 0 30 10",
      preserveAspectRatio: "none",
      children: e.asChild ? n : /* @__PURE__ */ p("polygon", { points: "0,0 30,0 15,10" })
    }
  );
});
s4.displayName = iF;
var rF = s4;
function lF(e) {
  const [t, n] = H.useState(void 0);
  return hl(() => {
    if (e) {
      n({ width: e.offsetWidth, height: e.offsetHeight });
      const a = new ResizeObserver((i) => {
        if (!Array.isArray(i) || !i.length)
          return;
        const r = i[0];
        let l, o;
        if ("borderBoxSize" in r) {
          const c = r.borderBoxSize, d = Array.isArray(c) ? c[0] : c;
          l = d.inlineSize, o = d.blockSize;
        } else
          l = e.offsetWidth, o = e.offsetHeight;
        n({ width: l, height: o });
      });
      return a.observe(e, { box: "border-box" }), () => a.unobserve(e);
    } else
      n(void 0);
  }, [e]), t;
}
var aU = "Popper", [c4, d4] = G3(aU), [oF, u4] = c4(aU), f4 = (e) => {
  const { __scopePopper: t, children: n } = e, [a, i] = H.useState(null);
  return /* @__PURE__ */ p(oF, { scope: t, anchor: a, onAnchorChange: i, children: n });
};
f4.displayName = aU;
var h4 = "PopperAnchor", p4 = H.forwardRef(
  (e, t) => {
    const { __scopePopper: n, virtualRef: a, ...i } = e, r = u4(h4, n), l = H.useRef(null), o = Sr(t, l);
    return H.useEffect(() => {
      r.onAnchorChange((a == null ? void 0 : a.current) || l.current);
    }), a ? null : /* @__PURE__ */ p(Bi.div, { ...i, ref: o });
  }
);
p4.displayName = h4;
var iU = "PopperContent", [sF, cF] = c4(iU), U4 = H.forwardRef(
  (e, t) => {
    var Fe, At, qt, Le, Be, xt;
    const {
      __scopePopper: n,
      side: a = "bottom",
      sideOffset: i = 0,
      align: r = "center",
      alignOffset: l = 0,
      arrowPadding: o = 0,
      avoidCollisions: c = !0,
      collisionBoundary: d = [],
      collisionPadding: s = 0,
      sticky: u = "partial",
      hideWhenDetached: f = !1,
      updatePositionStrategy: h = "optimized",
      onPlaced: U,
      ...m
    } = e, g = u4(iU, n), [b, v] = H.useState(null), y = Sr(t, (Mr) => v(Mr)), [w, x] = H.useState(null), S = lF(w), E = (S == null ? void 0 : S.width) ?? 0, M = (S == null ? void 0 : S.height) ?? 0, I = a + (r !== "center" ? "-" + r : ""), T = typeof s == "number" ? s : { top: 0, right: 0, bottom: 0, left: 0, ...s }, A = Array.isArray(d) ? d : [d], D = A.length > 0, R = {
      padding: T,
      boundary: A.filter(uF),
      // with `strategy: 'fixed'`, this is the only way to get it to respect boundaries
      altBoundary: D
    }, { refs: O, floatingStyles: $, placement: F, isPositioned: N, middlewareData: j } = Zz({
      // default to `fixed` strategy so users don't have to pick and we also avoid focus scroll issues
      strategy: "fixed",
      placement: I,
      whileElementsMounted: (...Mr) => zz(...Mr, {
        animationFrame: h === "always"
      }),
      elements: {
        reference: g.anchor
      },
      middleware: [
        qz({ mainAxis: i + M, alignmentAxis: l }),
        c && Jz({
          mainAxis: !0,
          crossAxis: !1,
          limiter: u === "partial" ? Qz() : void 0,
          ...R
        }),
        c && eF({ ...R }),
        tF({
          ...R,
          apply: ({ elements: Mr, rects: No, availableWidth: El, availableHeight: Cr }) => {
            const { width: Ta, height: by } = No.reference, Tc = Mr.floating.style;
            Tc.setProperty("--radix-popper-available-width", `${El}px`), Tc.setProperty("--radix-popper-available-height", `${Cr}px`), Tc.setProperty("--radix-popper-anchor-width", `${Ta}px`), Tc.setProperty("--radix-popper-anchor-height", `${by}px`);
          }
        }),
        w && aF({ element: w, padding: o }),
        fF({ arrowWidth: E, arrowHeight: M }),
        f && nF({ strategy: "referenceHidden", ...R })
      ]
    }), [z, Y] = b4(F), ie = br(U);
    hl(() => {
      N && (ie == null || ie());
    }, [N, ie]);
    const pe = (Fe = j.arrow) == null ? void 0 : Fe.x, ue = (At = j.arrow) == null ? void 0 : At.y, Ve = ((qt = j.arrow) == null ? void 0 : qt.centerOffset) !== 0, [Ge, je] = H.useState();
    return hl(() => {
      b && je(window.getComputedStyle(b).zIndex);
    }, [b]), /* @__PURE__ */ p(
      "div",
      {
        ref: O.setFloating,
        "data-radix-popper-content-wrapper": "",
        style: {
          ...$,
          transform: N ? $.transform : "translate(0, -200%)",
          // keep off the page when measuring
          minWidth: "max-content",
          zIndex: Ge,
          "--radix-popper-transform-origin": [
            (Le = j.transformOrigin) == null ? void 0 : Le.x,
            (Be = j.transformOrigin) == null ? void 0 : Be.y
          ].join(" "),
          // hide the content if using the hide middleware and should be hidden
          // set visibility to hidden and disable pointer events so the UI behaves
          // as if the PopperContent isn't there at all
          ...((xt = j.hide) == null ? void 0 : xt.referenceHidden) && {
            visibility: "hidden",
            pointerEvents: "none"
          }
        },
        dir: e.dir,
        children: /* @__PURE__ */ p(
          sF,
          {
            scope: n,
            placedSide: z,
            onArrowChange: x,
            arrowX: pe,
            arrowY: ue,
            shouldHideArrow: Ve,
            children: /* @__PURE__ */ p(
              Bi.div,
              {
                "data-side": z,
                "data-align": Y,
                ...m,
                ref: y,
                style: {
                  ...m.style,
                  // if the PopperContent hasn't been placed yet (not all measurements done)
                  // we prevent animations so that users's animation don't kick in too early referring wrong sides
                  animation: N ? void 0 : "none"
                }
              }
            )
          }
        )
      }
    );
  }
);
U4.displayName = iU;
var m4 = "PopperArrow", dF = {
  top: "bottom",
  right: "left",
  bottom: "top",
  left: "right"
}, g4 = H.forwardRef(function(t, n) {
  const { __scopePopper: a, ...i } = t, r = cF(m4, a), l = dF[r.placedSide];
  return (
    // we have to use an extra wrapper because `ResizeObserver` (used by `useSize`)
    // doesn't report size as we'd expect on SVG elements.
    // it reports their bounding box which is effectively the largest path inside the SVG.
    /* @__PURE__ */ p(
      "span",
      {
        ref: r.onArrowChange,
        style: {
          position: "absolute",
          left: r.arrowX,
          top: r.arrowY,
          [l]: 0,
          transformOrigin: {
            top: "",
            right: "0 0",
            bottom: "center 0",
            left: "100% 0"
          }[r.placedSide],
          transform: {
            top: "translateY(100%)",
            right: "translateY(50%) rotate(90deg) translateX(-50%)",
            bottom: "rotate(180deg)",
            left: "translateY(50%) rotate(-90deg) translateX(50%)"
          }[r.placedSide],
          visibility: r.shouldHideArrow ? "hidden" : void 0
        },
        children: /* @__PURE__ */ p(
          rF,
          {
            ...i,
            ref: n,
            style: {
              ...i.style,
              // ensures the element can be measured correctly (mostly for if SVG)
              display: "block"
            }
          }
        )
      }
    )
  );
});
g4.displayName = m4;
function uF(e) {
  return e !== null;
}
var fF = (e) => ({
  name: "transformOrigin",
  options: e,
  fn(t) {
    var g, b, v;
    const { placement: n, rects: a, middlewareData: i } = t, l = ((g = i.arrow) == null ? void 0 : g.centerOffset) !== 0, o = l ? 0 : e.arrowWidth, c = l ? 0 : e.arrowHeight, [d, s] = b4(n), u = { start: "0%", center: "50%", end: "100%" }[s], f = (((b = i.arrow) == null ? void 0 : b.x) ?? 0) + o / 2, h = (((v = i.arrow) == null ? void 0 : v.y) ?? 0) + c / 2;
    let U = "", m = "";
    return d === "bottom" ? (U = l ? u : `${f}px`, m = `${-c}px`) : d === "top" ? (U = l ? u : `${f}px`, m = `${a.floating.height + c}px`) : d === "right" ? (U = `${-c}px`, m = l ? u : `${h}px`) : d === "left" && (U = `${a.floating.width + c}px`, m = l ? u : `${h}px`), { data: { x: U, y: m } };
  }
});
function b4(e) {
  const [t, n = "center"] = e.split("-");
  return [t, n];
}
var hF = f4, v4 = p4, pF = U4, UF = g4, mF = "Portal", y4 = H.forwardRef((e, t) => {
  var o;
  const { container: n, ...a } = e, [i, r] = H.useState(!1);
  hl(() => r(!0), []);
  const l = n || i && ((o = globalThis == null ? void 0 : globalThis.document) == null ? void 0 : o.body);
  return l ? Dy.createPortal(/* @__PURE__ */ p(Bi.div, { ...a, ref: t }), l) : null;
});
y4.displayName = mF;
function gF(e, t) {
  return H.useReducer((n, a) => t[n][a] ?? n, e);
}
var rU = (e) => {
  const { present: t, children: n } = e, a = bF(t), i = typeof n == "function" ? n({ present: a.isPresent }) : H.Children.only(n), r = Sr(a.ref, vF(i));
  return typeof n == "function" || a.isPresent ? H.cloneElement(i, { ref: r }) : null;
};
rU.displayName = "Presence";
function bF(e) {
  const [t, n] = H.useState(), a = H.useRef({}), i = H.useRef(e), r = H.useRef("none"), l = e ? "mounted" : "unmounted", [o, c] = gF(l, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return H.useEffect(() => {
    const d = Kc(a.current);
    r.current = o === "mounted" ? d : "none";
  }, [o]), hl(() => {
    const d = a.current, s = i.current;
    if (s !== e) {
      const f = r.current, h = Kc(d);
      e ? c("MOUNT") : h === "none" || (d == null ? void 0 : d.display) === "none" ? c("UNMOUNT") : c(s && f !== h ? "ANIMATION_OUT" : "UNMOUNT"), i.current = e;
    }
  }, [e, c]), hl(() => {
    if (t) {
      let d;
      const s = t.ownerDocument.defaultView ?? window, u = (h) => {
        const m = Kc(a.current).includes(h.animationName);
        if (h.target === t && m && (c("ANIMATION_END"), !i.current)) {
          const g = t.style.animationFillMode;
          t.style.animationFillMode = "forwards", d = s.setTimeout(() => {
            t.style.animationFillMode === "forwards" && (t.style.animationFillMode = g);
          });
        }
      }, f = (h) => {
        h.target === t && (r.current = Kc(a.current));
      };
      return t.addEventListener("animationstart", f), t.addEventListener("animationcancel", u), t.addEventListener("animationend", u), () => {
        s.clearTimeout(d), t.removeEventListener("animationstart", f), t.removeEventListener("animationcancel", u), t.removeEventListener("animationend", u);
      };
    } else
      c("ANIMATION_END");
  }, [t, c]), {
    isPresent: ["mounted", "unmountSuspended"].includes(o),
    ref: H.useCallback((d) => {
      d && (a.current = getComputedStyle(d)), n(d);
    }, [])
  };
}
function Kc(e) {
  return (e == null ? void 0 : e.animationName) || "none";
}
function vF(e) {
  var a, i;
  let t = (a = Object.getOwnPropertyDescriptor(e.props, "ref")) == null ? void 0 : a.get, n = t && "isReactWarning" in t && t.isReactWarning;
  return n ? e.ref : (t = (i = Object.getOwnPropertyDescriptor(e, "ref")) == null ? void 0 : i.get, n = t && "isReactWarning" in t && t.isReactWarning, n ? e.props.ref : e.props.ref || e.ref);
}
function yF({
  prop: e,
  defaultProp: t,
  onChange: n = () => {
  }
}) {
  const [a, i] = wF({ defaultProp: t, onChange: n }), r = e !== void 0, l = r ? e : a, o = br(n), c = H.useCallback(
    (d) => {
      if (r) {
        const u = typeof d == "function" ? d(e) : d;
        u !== e && o(u);
      } else
        i(d);
    },
    [r, e, i, o]
  );
  return [l, c];
}
function wF({
  defaultProp: e,
  onChange: t
}) {
  const n = H.useState(e), [a] = n, i = H.useRef(a), r = br(t);
  return H.useEffect(() => {
    i.current !== a && (r(a), i.current = a);
  }, [a, i, r]), n;
}
var EF = function(e) {
  if (typeof document > "u")
    return null;
  var t = Array.isArray(e) ? e[0] : e;
  return t.ownerDocument.body;
}, _l = /* @__PURE__ */ new WeakMap(), qc = /* @__PURE__ */ new WeakMap(), Jc = {}, Mh = 0, w4 = function(e) {
  return e && (e.host || w4(e.parentNode));
}, xF = function(e, t) {
  return t.map(function(n) {
    if (e.contains(n))
      return n;
    var a = w4(n);
    return a && e.contains(a) ? a : (console.error("aria-hidden", n, "in not contained inside", e, ". Doing nothing"), null);
  }).filter(function(n) {
    return !!n;
  });
}, SF = function(e, t, n, a) {
  var i = xF(t, Array.isArray(e) ? e : [e]);
  Jc[n] || (Jc[n] = /* @__PURE__ */ new WeakMap());
  var r = Jc[n], l = [], o = /* @__PURE__ */ new Set(), c = new Set(i), d = function(u) {
    !u || o.has(u) || (o.add(u), d(u.parentNode));
  };
  i.forEach(d);
  var s = function(u) {
    !u || c.has(u) || Array.prototype.forEach.call(u.children, function(f) {
      if (o.has(f))
        s(f);
      else
        try {
          var h = f.getAttribute(a), U = h !== null && h !== "false", m = (_l.get(f) || 0) + 1, g = (r.get(f) || 0) + 1;
          _l.set(f, m), r.set(f, g), l.push(f), m === 1 && U && qc.set(f, !0), g === 1 && f.setAttribute(n, "true"), U || f.setAttribute(a, "true");
        } catch (b) {
          console.error("aria-hidden: cannot operate on ", f, b);
        }
    });
  };
  return s(t), o.clear(), Mh++, function() {
    l.forEach(function(u) {
      var f = _l.get(u) - 1, h = r.get(u) - 1;
      _l.set(u, f), r.set(u, h), f || (qc.has(u) || u.removeAttribute(a), qc.delete(u)), h || u.removeAttribute(n);
    }), Mh--, Mh || (_l = /* @__PURE__ */ new WeakMap(), _l = /* @__PURE__ */ new WeakMap(), qc = /* @__PURE__ */ new WeakMap(), Jc = {});
  };
}, kF = function(e, t, n) {
  n === void 0 && (n = "data-aria-hidden");
  var a = Array.from(Array.isArray(e) ? e : [e]), i = EF(e);
  return i ? (a.push.apply(a, Array.from(i.querySelectorAll("[aria-live], script"))), SF(a, i, n, "aria-hidden")) : function() {
    return null;
  };
}, ja = function() {
  return ja = Object.assign || function(t) {
    for (var n, a = 1, i = arguments.length; a < i; a++) {
      n = arguments[a];
      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]);
    }
    return t;
  }, ja.apply(this, arguments);
};
function E4(e, t) {
  var n = {};
  for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && t.indexOf(a) < 0 && (n[a] = e[a]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, a = Object.getOwnPropertySymbols(e); i < a.length; i++)
      t.indexOf(a[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, a[i]) && (n[a[i]] = e[a[i]]);
  return n;
}
function MF(e, t, n) {
  if (n || arguments.length === 2) for (var a = 0, i = t.length, r; a < i; a++)
    (r || !(a in t)) && (r || (r = Array.prototype.slice.call(t, 0, a)), r[a] = t[a]);
  return e.concat(r || Array.prototype.slice.call(t));
}
var Ad = "right-scroll-bar-position", Dd = "width-before-scroll-bar", CF = "with-scroll-bars-hidden", IF = "--removed-body-scroll-bar-size";
function Ch(e, t) {
  return typeof e == "function" ? e(t) : e && (e.current = t), e;
}
function TF(e, t) {
  var n = oe(function() {
    return {
      // value
      value: e,
      // last callback
      callback: t,
      // "memoized" public interface
      facade: {
        get current() {
          return n.value;
        },
        set current(a) {
          var i = n.value;
          i !== a && (n.value = a, n.callback(a, i));
        }
      }
    };
  })[0];
  return n.callback = t, n.facade;
}
var _F = typeof window < "u" ? H.useLayoutEffect : H.useEffect, t6 = /* @__PURE__ */ new WeakMap();
function AF(e, t) {
  var n = TF(null, function(a) {
    return e.forEach(function(i) {
      return Ch(i, a);
    });
  });
  return _F(function() {
    var a = t6.get(n);
    if (a) {
      var i = new Set(a), r = new Set(e), l = n.current;
      i.forEach(function(o) {
        r.has(o) || Ch(o, null);
      }), r.forEach(function(o) {
        i.has(o) || Ch(o, l);
      });
    }
    t6.set(n, e);
  }, [e]), n;
}
function DF(e) {
  return e;
}
function LF(e, t) {
  t === void 0 && (t = DF);
  var n = [], a = !1, i = {
    read: function() {
      if (a)
        throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
      return n.length ? n[n.length - 1] : e;
    },
    useMedium: function(r) {
      var l = t(r, a);
      return n.push(l), function() {
        n = n.filter(function(o) {
          return o !== l;
        });
      };
    },
    assignSyncMedium: function(r) {
      for (a = !0; n.length; ) {
        var l = n;
        n = [], l.forEach(r);
      }
      n = {
        push: function(o) {
          return r(o);
        },
        filter: function() {
          return n;
        }
      };
    },
    assignMedium: function(r) {
      a = !0;
      var l = [];
      if (n.length) {
        var o = n;
        n = [], o.forEach(r), l = n;
      }
      var c = function() {
        var s = l;
        l = [], s.forEach(r);
      }, d = function() {
        return Promise.resolve().then(c);
      };
      d(), n = {
        push: function(s) {
          l.push(s), d();
        },
        filter: function(s) {
          return l = l.filter(s), n;
        }
      };
    }
  };
  return i;
}
function RF(e) {
  e === void 0 && (e = {});
  var t = LF(null);
  return t.options = ja({ async: !0, ssr: !1 }, e), t;
}
var x4 = function(e) {
  var t = e.sideCar, n = E4(e, ["sideCar"]);
  if (!t)
    throw new Error("Sidecar: please provide `sideCar` property to import the right car");
  var a = t.read();
  if (!a)
    throw new Error("Sidecar medium not found");
  return H.createElement(a, ja({}, n));
};
x4.isSideCarExport = !0;
function PF(e, t) {
  return e.useMedium(t), x4;
}
var S4 = RF(), Ih = function() {
}, vf = H.forwardRef(function(e, t) {
  var n = H.useRef(null), a = H.useState({
    onScrollCapture: Ih,
    onWheelCapture: Ih,
    onTouchMoveCapture: Ih
  }), i = a[0], r = a[1], l = e.forwardProps, o = e.children, c = e.className, d = e.removeScrollBar, s = e.enabled, u = e.shards, f = e.sideCar, h = e.noRelative, U = e.noIsolation, m = e.inert, g = e.allowPinchZoom, b = e.as, v = b === void 0 ? "div" : b, y = e.gapMode, w = E4(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noRelative", "noIsolation", "inert", "allowPinchZoom", "as", "gapMode"]), x = f, S = AF([n, t]), E = ja(ja({}, w), i);
  return H.createElement(
    H.Fragment,
    null,
    s && H.createElement(x, { sideCar: S4, removeScrollBar: d, shards: u, noRelative: h, noIsolation: U, inert: m, setCallbacks: r, allowPinchZoom: !!g, lockRef: n, gapMode: y }),
    l ? H.cloneElement(H.Children.only(o), ja(ja({}, E), { ref: S })) : H.createElement(v, ja({}, E, { className: c, ref: S }), o)
  );
});
vf.defaultProps = {
  enabled: !0,
  removeScrollBar: !0,
  inert: !1
};
vf.classNames = {
  fullWidth: Dd,
  zeroRight: Ad
};
var NF = function() {
  if (typeof __webpack_nonce__ < "u")
    return __webpack_nonce__;
};
function OF() {
  if (!document)
    return null;
  var e = document.createElement("style");
  e.type = "text/css";
  var t = NF();
  return t && e.setAttribute("nonce", t), e;
}
function $F(e, t) {
  e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t));
}
function zF(e) {
  var t = document.head || document.getElementsByTagName("head")[0];
  t.appendChild(e);
}
var FF = function() {
  var e = 0, t = null;
  return {
    add: function(n) {
      e == 0 && (t = OF()) && ($F(t, n), zF(t)), e++;
    },
    remove: function() {
      e--, !e && t && (t.parentNode && t.parentNode.removeChild(t), t = null);
    }
  };
}, BF = function() {
  var e = FF();
  return function(t, n) {
    H.useEffect(function() {
      return e.add(t), function() {
        e.remove();
      };
    }, [t && n]);
  };
}, k4 = function() {
  var e = BF(), t = function(n) {
    var a = n.styles, i = n.dynamic;
    return e(a, i), null;
  };
  return t;
}, HF = {
  left: 0,
  top: 0,
  right: 0,
  gap: 0
}, Th = function(e) {
  return parseInt(e || "", 10) || 0;
}, XF = function(e) {
  var t = window.getComputedStyle(document.body), n = t[e === "padding" ? "paddingLeft" : "marginLeft"], a = t[e === "padding" ? "paddingTop" : "marginTop"], i = t[e === "padding" ? "paddingRight" : "marginRight"];
  return [Th(n), Th(a), Th(i)];
}, WF = function(e) {
  if (e === void 0 && (e = "margin"), typeof window > "u")
    return HF;
  var t = XF(e), n = document.documentElement.clientWidth, a = window.innerWidth;
  return {
    left: t[0],
    top: t[1],
    right: t[2],
    gap: Math.max(0, a - n + t[2] - t[0])
  };
}, VF = k4(), Jl = "data-scroll-locked", GF = function(e, t, n, a) {
  var i = e.left, r = e.top, l = e.right, o = e.gap;
  return n === void 0 && (n = "margin"), `
  .`.concat(CF, ` {
   overflow: hidden `).concat(a, `;
   padding-right: `).concat(o, "px ").concat(a, `;
  }
  body[`).concat(Jl, `] {
    overflow: hidden `).concat(a, `;
    overscroll-behavior: contain;
    `).concat([
    t && "position: relative ".concat(a, ";"),
    n === "margin" && `
    padding-left: `.concat(i, `px;
    padding-top: `).concat(r, `px;
    padding-right: `).concat(l, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o, "px ").concat(a, `;
    `),
    n === "padding" && "padding-right: ".concat(o, "px ").concat(a, ";")
  ].filter(Boolean).join(""), `
  }
  
  .`).concat(Ad, ` {
    right: `).concat(o, "px ").concat(a, `;
  }
  
  .`).concat(Dd, ` {
    margin-right: `).concat(o, "px ").concat(a, `;
  }
  
  .`).concat(Ad, " .").concat(Ad, ` {
    right: 0 `).concat(a, `;
  }
  
  .`).concat(Dd, " .").concat(Dd, ` {
    margin-right: 0 `).concat(a, `;
  }
  
  body[`).concat(Jl, `] {
    `).concat(IF, ": ").concat(o, `px;
  }
`);
}, n6 = function() {
  var e = parseInt(document.body.getAttribute(Jl) || "0", 10);
  return isFinite(e) ? e : 0;
}, jF = function() {
  H.useEffect(function() {
    return document.body.setAttribute(Jl, (n6() + 1).toString()), function() {
      var e = n6() - 1;
      e <= 0 ? document.body.removeAttribute(Jl) : document.body.setAttribute(Jl, e.toString());
    };
  }, []);
}, YF = function(e) {
  var t = e.noRelative, n = e.noImportant, a = e.gapMode, i = a === void 0 ? "margin" : a;
  jF();
  var r = H.useMemo(function() {
    return WF(i);
  }, [i]);
  return H.createElement(VF, { styles: GF(r, !t, i, n ? "" : "!important") });
}, Q1 = !1;
if (typeof window < "u")
  try {
    var Qc = Object.defineProperty({}, "passive", {
      get: function() {
        return Q1 = !0, !0;
      }
    });
    window.addEventListener("test", Qc, Qc), window.removeEventListener("test", Qc, Qc);
  } catch {
    Q1 = !1;
  }
var Al = Q1 ? { passive: !1 } : !1, ZF = function(e) {
  return e.tagName === "TEXTAREA";
}, M4 = function(e, t) {
  if (!(e instanceof Element))
    return !1;
  var n = window.getComputedStyle(e);
  return (
    // not-not-scrollable
    n[t] !== "hidden" && // contains scroll inside self
    !(n.overflowY === n.overflowX && !ZF(e) && n[t] === "visible")
  );
}, KF = function(e) {
  return M4(e, "overflowY");
}, qF = function(e) {
  return M4(e, "overflowX");
}, a6 = function(e, t) {
  var n = t.ownerDocument, a = t;
  do {
    typeof ShadowRoot < "u" && a instanceof ShadowRoot && (a = a.host);
    var i = C4(e, a);
    if (i) {
      var r = I4(e, a), l = r[1], o = r[2];
      if (l > o)
        return !0;
    }
    a = a.parentNode;
  } while (a && a !== n.body);
  return !1;
}, JF = function(e) {
  var t = e.scrollTop, n = e.scrollHeight, a = e.clientHeight;
  return [
    t,
    n,
    a
  ];
}, QF = function(e) {
  var t = e.scrollLeft, n = e.scrollWidth, a = e.clientWidth;
  return [
    t,
    n,
    a
  ];
}, C4 = function(e, t) {
  return e === "v" ? KF(t) : qF(t);
}, I4 = function(e, t) {
  return e === "v" ? JF(t) : QF(t);
}, eB = function(e, t) {
  return e === "h" && t === "rtl" ? -1 : 1;
}, tB = function(e, t, n, a, i) {
  var r = eB(e, window.getComputedStyle(t).direction), l = r * a, o = n.target, c = t.contains(o), d = !1, s = l > 0, u = 0, f = 0;
  do {
    if (!o)
      break;
    var h = I4(e, o), U = h[0], m = h[1], g = h[2], b = m - g - r * U;
    (U || b) && C4(e, o) && (u += b, f += U);
    var v = o.parentNode;
    o = v && v.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? v.host : v;
  } while (
    // portaled content
    !c && o !== document.body || // self content
    c && (t.contains(o) || t === o)
  );
  return (s && Math.abs(u) < 1 || !s && Math.abs(f) < 1) && (d = !0), d;
}, ed = function(e) {
  return "changedTouches" in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0];
}, i6 = function(e) {
  return [e.deltaX, e.deltaY];
}, r6 = function(e) {
  return e && "current" in e ? e.current : e;
}, nB = function(e, t) {
  return e[0] === t[0] && e[1] === t[1];
}, aB = function(e) {
  return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`);
}, iB = 0, Dl = [];
function rB(e) {
  var t = H.useRef([]), n = H.useRef([0, 0]), a = H.useRef(), i = H.useState(iB++)[0], r = H.useState(k4)[0], l = H.useRef(e);
  H.useEffect(function() {
    l.current = e;
  }, [e]), H.useEffect(function() {
    if (e.inert) {
      document.body.classList.add("block-interactivity-".concat(i));
      var m = MF([e.lockRef.current], (e.shards || []).map(r6), !0).filter(Boolean);
      return m.forEach(function(g) {
        return g.classList.add("allow-interactivity-".concat(i));
      }), function() {
        document.body.classList.remove("block-interactivity-".concat(i)), m.forEach(function(g) {
          return g.classList.remove("allow-interactivity-".concat(i));
        });
      };
    }
  }, [e.inert, e.lockRef.current, e.shards]);
  var o = H.useCallback(function(m, g) {
    if ("touches" in m && m.touches.length === 2 || m.type === "wheel" && m.ctrlKey)
      return !l.current.allowPinchZoom;
    var b = ed(m), v = n.current, y = "deltaX" in m ? m.deltaX : v[0] - b[0], w = "deltaY" in m ? m.deltaY : v[1] - b[1], x, S = m.target, E = Math.abs(y) > Math.abs(w) ? "h" : "v";
    if ("touches" in m && E === "h" && S.type === "range")
      return !1;
    var M = a6(E, S);
    if (!M)
      return !0;
    if (M ? x = E : (x = E === "v" ? "h" : "v", M = a6(E, S)), !M)
      return !1;
    if (!a.current && "changedTouches" in m && (y || w) && (a.current = x), !x)
      return !0;
    var I = a.current || x;
    return tB(I, g, m, I === "h" ? y : w);
  }, []), c = H.useCallback(function(m) {
    var g = m;
    if (!(!Dl.length || Dl[Dl.length - 1] !== r)) {
      var b = "deltaY" in g ? i6(g) : ed(g), v = t.current.filter(function(x) {
        return x.name === g.type && (x.target === g.target || g.target === x.shadowParent) && nB(x.delta, b);
      })[0];
      if (v && v.should) {
        g.cancelable && g.preventDefault();
        return;
      }
      if (!v) {
        var y = (l.current.shards || []).map(r6).filter(Boolean).filter(function(x) {
          return x.contains(g.target);
        }), w = y.length > 0 ? o(g, y[0]) : !l.current.noIsolation;
        w && g.cancelable && g.preventDefault();
      }
    }
  }, []), d = H.useCallback(function(m, g, b, v) {
    var y = { name: m, delta: g, target: b, should: v, shadowParent: lB(b) };
    t.current.push(y), setTimeout(function() {
      t.current = t.current.filter(function(w) {
        return w !== y;
      });
    }, 1);
  }, []), s = H.useCallback(function(m) {
    n.current = ed(m), a.current = void 0;
  }, []), u = H.useCallback(function(m) {
    d(m.type, i6(m), m.target, o(m, e.lockRef.current));
  }, []), f = H.useCallback(function(m) {
    d(m.type, ed(m), m.target, o(m, e.lockRef.current));
  }, []);
  H.useEffect(function() {
    return Dl.push(r), e.setCallbacks({
      onScrollCapture: u,
      onWheelCapture: u,
      onTouchMoveCapture: f
    }), document.addEventListener("wheel", c, Al), document.addEventListener("touchmove", c, Al), document.addEventListener("touchstart", s, Al), function() {
      Dl = Dl.filter(function(m) {
        return m !== r;
      }), document.removeEventListener("wheel", c, Al), document.removeEventListener("touchmove", c, Al), document.removeEventListener("touchstart", s, Al);
    };
  }, []);
  var h = e.removeScrollBar, U = e.inert;
  return H.createElement(
    H.Fragment,
    null,
    U ? H.createElement(r, { styles: aB(i) }) : null,
    h ? H.createElement(YF, { noRelative: e.noRelative, gapMode: e.gapMode }) : null
  );
}
function lB(e) {
  for (var t = null; e !== null; )
    e instanceof ShadowRoot && (t = e.host, e = e.host), e = e.parentNode;
  return t;
}
const oB = PF(S4, rB);
var T4 = H.forwardRef(function(e, t) {
  return H.createElement(vf, ja({}, e, { ref: t, sideCar: oB }));
});
T4.classNames = vf.classNames;
var lU = "Popover", [_4, HZ] = G3(lU, [
  d4
]), xc = d4(), [sB, kr] = _4(lU), A4 = (e) => {
  const {
    __scopePopover: t,
    children: n,
    open: a,
    defaultOpen: i,
    onOpenChange: r,
    modal: l = !1
  } = e, o = xc(t), c = H.useRef(null), [d, s] = H.useState(!1), [u = !1, f] = yF({
    prop: a,
    defaultProp: i,
    onChange: r
  });
  return /* @__PURE__ */ p(hF, { ...o, children: /* @__PURE__ */ p(
    sB,
    {
      scope: t,
      contentId: iz(),
      triggerRef: c,
      open: u,
      onOpenChange: f,
      onOpenToggle: H.useCallback(() => f((h) => !h), [f]),
      hasCustomAnchor: d,
      onCustomAnchorAdd: H.useCallback(() => s(!0), []),
      onCustomAnchorRemove: H.useCallback(() => s(!1), []),
      modal: l,
      children: n
    }
  ) });
};
A4.displayName = lU;
var D4 = "PopoverAnchor", cB = H.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = kr(D4, n), r = xc(n), { onCustomAnchorAdd: l, onCustomAnchorRemove: o } = i;
    return H.useEffect(() => (l(), () => o()), [l, o]), /* @__PURE__ */ p(v4, { ...r, ...a, ref: t });
  }
);
cB.displayName = D4;
var L4 = "PopoverTrigger", R4 = H.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = kr(L4, n), r = xc(n), l = Sr(t, i.triggerRef), o = /* @__PURE__ */ p(
      Bi.button,
      {
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": i.open,
        "aria-controls": i.contentId,
        "data-state": F4(i.open),
        ...a,
        ref: l,
        onClick: hr(e.onClick, i.onOpenToggle)
      }
    );
    return i.hasCustomAnchor ? o : /* @__PURE__ */ p(v4, { asChild: !0, ...r, children: o });
  }
);
R4.displayName = L4;
var oU = "PopoverPortal", [dB, uB] = _4(oU, {
  forceMount: void 0
}), P4 = (e) => {
  const { __scopePopover: t, forceMount: n, children: a, container: i } = e, r = kr(oU, t);
  return /* @__PURE__ */ p(dB, { scope: t, forceMount: n, children: /* @__PURE__ */ p(rU, { present: n || r.open, children: /* @__PURE__ */ p(y4, { asChild: !0, container: i, children: a }) }) });
};
P4.displayName = oU;
var wo = "PopoverContent", N4 = H.forwardRef(
  (e, t) => {
    const n = uB(wo, e.__scopePopover), { forceMount: a = n.forceMount, ...i } = e, r = kr(wo, e.__scopePopover);
    return /* @__PURE__ */ p(rU, { present: a || r.open, children: r.modal ? /* @__PURE__ */ p(fB, { ...i, ref: t }) : /* @__PURE__ */ p(hB, { ...i, ref: t }) });
  }
);
N4.displayName = wo;
var fB = H.forwardRef(
  (e, t) => {
    const n = kr(wo, e.__scopePopover), a = H.useRef(null), i = Sr(t, a), r = H.useRef(!1);
    return H.useEffect(() => {
      const l = a.current;
      if (l) return kF(l);
    }, []), /* @__PURE__ */ p(T4, { as: Zp, allowPinchZoom: !0, children: /* @__PURE__ */ p(
      O4,
      {
        ...e,
        ref: i,
        trapFocus: n.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: hr(e.onCloseAutoFocus, (l) => {
          var o;
          l.preventDefault(), r.current || (o = n.triggerRef.current) == null || o.focus();
        }),
        onPointerDownOutside: hr(
          e.onPointerDownOutside,
          (l) => {
            const o = l.detail.originalEvent, c = o.button === 0 && o.ctrlKey === !0, d = o.button === 2 || c;
            r.current = d;
          },
          { checkForDefaultPrevented: !1 }
        ),
        onFocusOutside: hr(
          e.onFocusOutside,
          (l) => l.preventDefault(),
          { checkForDefaultPrevented: !1 }
        )
      }
    ) });
  }
), hB = H.forwardRef(
  (e, t) => {
    const n = kr(wo, e.__scopePopover), a = H.useRef(!1), i = H.useRef(!1);
    return /* @__PURE__ */ p(
      O4,
      {
        ...e,
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: (r) => {
          var l, o;
          (l = e.onCloseAutoFocus) == null || l.call(e, r), r.defaultPrevented || (a.current || (o = n.triggerRef.current) == null || o.focus(), r.preventDefault()), a.current = !1, i.current = !1;
        },
        onInteractOutside: (r) => {
          var c, d;
          (c = e.onInteractOutside) == null || c.call(e, r), r.defaultPrevented || (a.current = !0, r.detail.originalEvent.type === "pointerdown" && (i.current = !0));
          const l = r.target;
          ((d = n.triggerRef.current) == null ? void 0 : d.contains(l)) && r.preventDefault(), r.detail.originalEvent.type === "focusin" && i.current && r.preventDefault();
        }
      }
    );
  }
), O4 = H.forwardRef(
  (e, t) => {
    const {
      __scopePopover: n,
      trapFocus: a,
      onOpenAutoFocus: i,
      onCloseAutoFocus: r,
      disableOutsidePointerEvents: l,
      onEscapeKeyDown: o,
      onPointerDownOutside: c,
      onFocusOutside: d,
      onInteractOutside: s,
      ...u
    } = e, f = kr(wo, n), h = xc(n);
    return Y$(), /* @__PURE__ */ p(
      K3,
      {
        asChild: !0,
        loop: !0,
        trapped: a,
        onMountAutoFocus: i,
        onUnmountAutoFocus: r,
        children: /* @__PURE__ */ p(
          Y3,
          {
            asChild: !0,
            disableOutsidePointerEvents: l,
            onInteractOutside: s,
            onEscapeKeyDown: o,
            onPointerDownOutside: c,
            onFocusOutside: d,
            onDismiss: () => f.onOpenChange(!1),
            children: /* @__PURE__ */ p(
              pF,
              {
                "data-state": F4(f.open),
                role: "dialog",
                id: f.contentId,
                ...h,
                ...u,
                ref: t,
                style: {
                  ...u.style,
                  "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)",
                  "--radix-popover-content-available-width": "var(--radix-popper-available-width)",
                  "--radix-popover-content-available-height": "var(--radix-popper-available-height)",
                  "--radix-popover-trigger-width": "var(--radix-popper-anchor-width)",
                  "--radix-popover-trigger-height": "var(--radix-popper-anchor-height)"
                }
              }
            )
          }
        )
      }
    );
  }
), $4 = "PopoverClose", pB = H.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = kr($4, n);
    return /* @__PURE__ */ p(
      Bi.button,
      {
        type: "button",
        ...a,
        ref: t,
        onClick: hr(e.onClick, () => i.onOpenChange(!1))
      }
    );
  }
);
pB.displayName = $4;
var UB = "PopoverArrow", z4 = H.forwardRef(
  (e, t) => {
    const { __scopePopover: n, ...a } = e, i = xc(n);
    return /* @__PURE__ */ p(UF, { ...i, ...a, ref: t });
  }
);
z4.displayName = UB;
function F4(e) {
  return e ? "open" : "closed";
}
var yf = A4, wf = R4, mB = P4, sU = N4, B4 = z4, H4 = { exports: {} };
(function(e, t) {
  (function() {
    var n = {};
    e.exports = n, n.simpleFilter = function(a, i) {
      return i.filter(function(r) {
        return n.test(a, r);
      });
    }, n.test = function(a, i) {
      return n.match(a, i) !== null;
    }, n.match = function(a, i, r) {
      r = r || {};
      var l = 0, o = [], c = i.length, d = 0, s = 0, u = r.pre || "", f = r.post || "", h = r.caseSensitive && i || i.toLowerCase(), U;
      a = r.caseSensitive && a || a.toLowerCase();
      for (var m = 0; m < c; m++)
        U = i[m], h[m] === a[l] ? (U = u + U + f, l += 1, s += 1 + s) : s = 0, d += s, o[o.length] = U;
      return l === a.length ? (d = h === a ? 1 / 0 : d, { rendered: o.join(""), score: d }) : null;
    }, n.filter = function(a, i, r) {
      return !i || i.length === 0 ? [] : typeof a != "string" ? i : (r = r || {}, i.reduce(function(l, o, c, d) {
        var s = o;
        r.extract && (s = r.extract(o));
        var u = n.match(a, s, r);
        return u != null && (l[l.length] = {
          string: u.rendered,
          score: u.score,
          index: c,
          original: o
        }), l;
      }, []).sort(function(l, o) {
        var c = o.score - l.score;
        return c || l.index - o.index;
      }));
    };
  })();
})(H4);
var gB = H4.exports;
const bB = /* @__PURE__ */ ml(gB), vB = {}, l6 = (e) => {
  let t;
  const n = /* @__PURE__ */ new Set(), a = (s, u) => {
    const f = typeof s == "function" ? s(t) : s;
    if (!Object.is(f, t)) {
      const h = t;
      t = u ?? (typeof f != "object" || f === null) ? f : Object.assign({}, t, f), n.forEach((U) => U(t, h));
    }
  }, i = () => t, c = { setState: a, getState: i, getInitialState: () => d, subscribe: (s) => (n.add(s), () => n.delete(s)), destroy: () => {
    (vB ? "production" : void 0) !== "production" && console.warn(
      "[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."
    ), n.clear();
  } }, d = t = e(a, i, c);
  return c;
}, yB = (e) => e ? l6(e) : l6;
var e0 = { exports: {} }, _h = {}, td = { exports: {} }, Ah = {};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var o6;
function wB() {
  if (o6) return Ah;
  o6 = 1;
  var e = Z;
  function t(u, f) {
    return u === f && (u !== 0 || 1 / u === 1 / f) || u !== u && f !== f;
  }
  var n = typeof Object.is == "function" ? Object.is : t, a = e.useState, i = e.useEffect, r = e.useLayoutEffect, l = e.useDebugValue;
  function o(u, f) {
    var h = f(), U = a({ inst: { value: h, getSnapshot: f } }), m = U[0].inst, g = U[1];
    return r(
      function() {
        m.value = h, m.getSnapshot = f, c(m) && g({ inst: m });
      },
      [u, h, f]
    ), i(
      function() {
        return c(m) && g({ inst: m }), u(function() {
          c(m) && g({ inst: m });
        });
      },
      [u]
    ), l(h), h;
  }
  function c(u) {
    var f = u.getSnapshot;
    u = u.value;
    try {
      var h = f();
      return !n(u, h);
    } catch {
      return !0;
    }
  }
  function d(u, f) {
    return f();
  }
  var s = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? d : o;
  return Ah.useSyncExternalStore = e.useSyncExternalStore !== void 0 ? e.useSyncExternalStore : s, Ah;
}
var Dh = {};
/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var s6;
function EB() {
  return s6 || (s6 = 1, process.env.NODE_ENV !== "production" && function() {
    function e(h, U) {
      return h === U && (h !== 0 || 1 / h === 1 / U) || h !== h && U !== U;
    }
    function t(h, U) {
      s || i.startTransition === void 0 || (s = !0, console.error(
        "You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."
      ));
      var m = U();
      if (!u) {
        var g = U();
        r(m, g) || (console.error(
          "The result of getSnapshot should be cached to avoid an infinite loop"
        ), u = !0);
      }
      g = l({
        inst: { value: m, getSnapshot: U }
      });
      var b = g[0].inst, v = g[1];
      return c(
        function() {
          b.value = m, b.getSnapshot = U, n(b) && v({ inst: b });
        },
        [h, m, U]
      ), o(
        function() {
          return n(b) && v({ inst: b }), h(function() {
            n(b) && v({ inst: b });
          });
        },
        [h]
      ), d(m), m;
    }
    function n(h) {
      var U = h.getSnapshot;
      h = h.value;
      try {
        var m = U();
        return !r(h, m);
      } catch {
        return !0;
      }
    }
    function a(h, U) {
      return U();
    }
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var i = Z, r = typeof Object.is == "function" ? Object.is : e, l = i.useState, o = i.useEffect, c = i.useLayoutEffect, d = i.useDebugValue, s = !1, u = !1, f = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? a : t;
    Dh.useSyncExternalStore = i.useSyncExternalStore !== void 0 ? i.useSyncExternalStore : f, typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  }()), Dh;
}
var c6;
function X4() {
  return c6 || (c6 = 1, process.env.NODE_ENV === "production" ? td.exports = wB() : td.exports = EB()), td.exports;
}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var d6;
function xB() {
  if (d6) return _h;
  d6 = 1;
  var e = Z, t = X4();
  function n(d, s) {
    return d === s && (d !== 0 || 1 / d === 1 / s) || d !== d && s !== s;
  }
  var a = typeof Object.is == "function" ? Object.is : n, i = t.useSyncExternalStore, r = e.useRef, l = e.useEffect, o = e.useMemo, c = e.useDebugValue;
  return _h.useSyncExternalStoreWithSelector = function(d, s, u, f, h) {
    var U = r(null);
    if (U.current === null) {
      var m = { hasValue: !1, value: null };
      U.current = m;
    } else m = U.current;
    U = o(
      function() {
        function b(S) {
          if (!v) {
            if (v = !0, y = S, S = f(S), h !== void 0 && m.hasValue) {
              var E = m.value;
              if (h(E, S))
                return w = E;
            }
            return w = S;
          }
          if (E = w, a(y, S)) return E;
          var M = f(S);
          return h !== void 0 && h(E, M) ? (y = S, E) : (y = S, w = M);
        }
        var v = !1, y, w, x = u === void 0 ? null : u;
        return [
          function() {
            return b(s());
          },
          x === null ? void 0 : function() {
            return b(x());
          }
        ];
      },
      [s, u, f, h]
    );
    var g = i(d, U[0], U[1]);
    return l(
      function() {
        m.hasValue = !0, m.value = g;
      },
      [g]
    ), c(g), g;
  }, _h;
}
var Lh = {};
/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var u6;
function SB() {
  return u6 || (u6 = 1, process.env.NODE_ENV !== "production" && function() {
    function e(d, s) {
      return d === s && (d !== 0 || 1 / d === 1 / s) || d !== d && s !== s;
    }
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());
    var t = Z, n = X4(), a = typeof Object.is == "function" ? Object.is : e, i = n.useSyncExternalStore, r = t.useRef, l = t.useEffect, o = t.useMemo, c = t.useDebugValue;
    Lh.useSyncExternalStoreWithSelector = function(d, s, u, f, h) {
      var U = r(null);
      if (U.current === null) {
        var m = { hasValue: !1, value: null };
        U.current = m;
      } else m = U.current;
      U = o(
        function() {
          function b(S) {
            if (!v) {
              if (v = !0, y = S, S = f(S), h !== void 0 && m.hasValue) {
                var E = m.value;
                if (h(E, S))
                  return w = E;
              }
              return w = S;
            }
            if (E = w, a(y, S))
              return E;
            var M = f(S);
            return h !== void 0 && h(E, M) ? (y = S, E) : (y = S, w = M);
          }
          var v = !1, y, w, x = u === void 0 ? null : u;
          return [
            function() {
              return b(s());
            },
            x === null ? void 0 : function() {
              return b(x());
            }
          ];
        },
        [s, u, f, h]
      );
      var g = i(d, U[0], U[1]);
      return l(
        function() {
          m.hasValue = !0, m.value = g;
        },
        [g]
      ), c(g), g;
    }, typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop == "function" && __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());
  }()), Lh;
}
process.env.NODE_ENV === "production" ? e0.exports = xB() : e0.exports = SB();
var kB = e0.exports;
const MB = /* @__PURE__ */ ml(kB), W4 = {}, { useDebugValue: CB } = Z, { useSyncExternalStoreWithSelector: IB } = MB;
let f6 = !1;
const TB = (e) => e;
function _B(e, t = TB, n) {
  (W4 ? "production" : void 0) !== "production" && n && !f6 && (console.warn(
    "[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"
  ), f6 = !0);
  const a = IB(
    e.subscribe,
    e.getState,
    e.getServerState || e.getInitialState,
    t,
    n
  );
  return CB(a), a;
}
const h6 = (e) => {
  (W4 ? "production" : void 0) !== "production" && typeof e != "function" && console.warn(
    "[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`."
  );
  const t = typeof e == "function" ? yB(e) : e, n = (a, i) => _B(t, a, i);
  return Object.assign(n, t), n;
}, AB = (e) => e ? h6(e) : h6;
var p6, U6;
const m6 = typeof window < "u" && ((p6 = window.document) != null && p6.createElement || ((U6 = window.navigator) == null ? void 0 : U6.product) === "ReactNative") ? Z.useLayoutEffect : Z.useEffect;
function La() {
  const e = AB((t) => ({
    current: new Array(),
    version: 0,
    set: t
  }));
  return {
    In: ({
      children: t
    }) => {
      const n = e((i) => i.set), a = e((i) => i.version);
      return m6(() => {
        n((i) => ({
          version: i.version + 1
        }));
      }, []), m6(() => (n(({
        current: i
      }) => ({
        current: [...i, t]
      })), () => n(({
        current: i
      }) => ({
        current: i.filter((r) => r !== t)
      }))), [t, a]), null;
    },
    Out: () => {
      const t = e((n) => n.current);
      return /* @__PURE__ */ Z.createElement(Z.Fragment, null, t);
    }
  };
}
function Bt() {
  return Bt = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var a in n) ({}).hasOwnProperty.call(n, a) && (e[a] = n[a]);
    }
    return e;
  }, Bt.apply(null, arguments);
}
function Rh(e, t, { checkForDefaultPrevented: n = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), n === !1 || !i.defaultPrevented) return t == null ? void 0 : t(i);
  };
}
function DB(e, t = []) {
  let n = [];
  function a(r, l) {
    const o = /* @__PURE__ */ Ja(l), c = n.length;
    n = [
      ...n,
      l
    ];
    function d(u) {
      const { scope: f, children: h, ...U } = u, m = (f == null ? void 0 : f[e][c]) || o, g = $e(
        () => U,
        Object.values(U)
      );
      return /* @__PURE__ */ Ke(m.Provider, {
        value: g
      }, h);
    }
    function s(u, f) {
      const h = (f == null ? void 0 : f[e][c]) || o, U = un(h);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return d.displayName = r + "Provider", [
      d,
      s
    ];
  }
  const i = () => {
    const r = n.map((l) => /* @__PURE__ */ Ja(l));
    return function(o) {
      const c = (o == null ? void 0 : o[e]) || r;
      return $e(
        () => ({
          [`__scope${e}`]: {
            ...o,
            [e]: c
          }
        }),
        [
          o,
          c
        ]
      );
    };
  };
  return i.scopeName = e, [
    a,
    LB(i, ...t)
  ];
}
function LB(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map(
      (i) => ({
        useScope: i(),
        scopeName: i.scopeName
      })
    );
    return function(r) {
      const l = a.reduce((o, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return {
          ...o,
          ...u
        };
      }, {});
      return $e(
        () => ({
          [`__scope${t.scopeName}`]: l
        }),
        [
          l
        ]
      );
    };
  };
  return n.scopeName = t.scopeName, n;
}
function Ql(e, t, { checkForDefaultPrevented: n = !0 } = {}) {
  return function(i) {
    if (e == null || e(i), n === !1 || !i.defaultPrevented) return t == null ? void 0 : t(i);
  };
}
function RB(e, t = []) {
  let n = [];
  function a(r, l) {
    const o = /* @__PURE__ */ Ja(l), c = n.length;
    n = [
      ...n,
      l
    ];
    function d(u) {
      const { scope: f, children: h, ...U } = u, m = (f == null ? void 0 : f[e][c]) || o, g = $e(
        () => U,
        Object.values(U)
      );
      return /* @__PURE__ */ Ke(m.Provider, {
        value: g
      }, h);
    }
    function s(u, f) {
      const h = (f == null ? void 0 : f[e][c]) || o, U = un(h);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return d.displayName = r + "Provider", [
      d,
      s
    ];
  }
  const i = () => {
    const r = n.map((l) => /* @__PURE__ */ Ja(l));
    return function(o) {
      const c = (o == null ? void 0 : o[e]) || r;
      return $e(
        () => ({
          [`__scope${e}`]: {
            ...o,
            [e]: c
          }
        }),
        [
          o,
          c
        ]
      );
    };
  };
  return i.scopeName = e, [
    a,
    PB(i, ...t)
  ];
}
function PB(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map(
      (i) => ({
        useScope: i(),
        scopeName: i.scopeName
      })
    );
    return function(r) {
      const l = a.reduce((o, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return {
          ...o,
          ...u
        };
      }, {});
      return $e(
        () => ({
          [`__scope${t.scopeName}`]: l
        }),
        [
          l
        ]
      );
    };
  };
  return n.scopeName = t.scopeName, n;
}
function NB(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function V4(...e) {
  return (t) => e.forEach(
    (n) => NB(n, t)
  );
}
function g6(...e) {
  return _e(V4(...e), e);
}
const t0 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e, i = tn.toArray(n), r = i.find($B);
  if (r) {
    const l = r.props.children, o = i.map((c) => c === r ? tn.count(l) > 1 ? tn.only(null) : /* @__PURE__ */ qn(l) ? l.props.children : null : c);
    return /* @__PURE__ */ Ke(n0, Bt({}, a, {
      ref: t
    }), /* @__PURE__ */ qn(l) ? /* @__PURE__ */ gl(l, void 0, o) : null);
  }
  return /* @__PURE__ */ Ke(n0, Bt({}, a, {
    ref: t
  }), n);
});
t0.displayName = "Slot";
const n0 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e;
  return /* @__PURE__ */ qn(n) ? /* @__PURE__ */ gl(n, {
    ...zB(a, n.props),
    ref: V4(t, n.ref)
  }) : tn.count(n) > 1 ? tn.only(null) : null;
});
n0.displayName = "SlotClone";
const OB = ({ children: e }) => /* @__PURE__ */ Ke(Ru, null, e);
function $B(e) {
  return /* @__PURE__ */ qn(e) && e.type === OB;
}
function zB(e, t) {
  const n = {
    ...t
  };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...o) => {
      r(...o), i(...o);
    } : i && (n[a] = i) : a === "style" ? n[a] = {
      ...i,
      ...r
    } : a === "className" && (n[a] = [
      i,
      r
    ].filter(Boolean).join(" "));
  }
  return {
    ...e,
    ...n
  };
}
function FB(e) {
  const t = e + "CollectionProvider", [n, a] = RB(t), [i, r] = n(t, {
    collectionRef: {
      current: null
    },
    itemMap: /* @__PURE__ */ new Map()
  }), l = (h) => {
    const { scope: U, children: m } = h, g = Z.useRef(null), b = Z.useRef(/* @__PURE__ */ new Map()).current;
    return /* @__PURE__ */ Z.createElement(i, {
      scope: U,
      itemMap: b,
      collectionRef: g
    }, m);
  }, o = e + "CollectionSlot", c = /* @__PURE__ */ Z.forwardRef((h, U) => {
    const { scope: m, children: g } = h, b = r(o, m), v = g6(U, b.collectionRef);
    return /* @__PURE__ */ Z.createElement(t0, {
      ref: v
    }, g);
  }), d = e + "CollectionItemSlot", s = "data-radix-collection-item", u = /* @__PURE__ */ Z.forwardRef((h, U) => {
    const { scope: m, children: g, ...b } = h, v = Z.useRef(null), y = g6(U, v), w = r(d, m);
    return Z.useEffect(() => (w.itemMap.set(v, {
      ref: v,
      ...b
    }), () => void w.itemMap.delete(v))), /* @__PURE__ */ Z.createElement(t0, {
      [s]: "",
      ref: y
    }, g);
  });
  function f(h) {
    const U = r(e + "CollectionConsumer", h);
    return Z.useCallback(() => {
      const g = U.collectionRef.current;
      if (!g) return [];
      const b = Array.from(g.querySelectorAll(`[${s}]`));
      return Array.from(U.itemMap.values()).sort(
        (w, x) => b.indexOf(w.ref.current) - b.indexOf(x.ref.current)
      );
    }, [
      U.collectionRef,
      U.itemMap
    ]);
  }
  return [
    {
      Provider: l,
      Slot: c,
      ItemSlot: u
    },
    f,
    a
  ];
}
function BB(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function G4(...e) {
  return (t) => e.forEach(
    (n) => BB(n, t)
  );
}
function HB(...e) {
  return _e(G4(...e), e);
}
function XB(e, t = []) {
  let n = [];
  function a(r, l) {
    const o = /* @__PURE__ */ Ja(l), c = n.length;
    n = [
      ...n,
      l
    ];
    function d(u) {
      const { scope: f, children: h, ...U } = u, m = (f == null ? void 0 : f[e][c]) || o, g = $e(
        () => U,
        Object.values(U)
      );
      return /* @__PURE__ */ Ke(m.Provider, {
        value: g
      }, h);
    }
    function s(u, f) {
      const h = (f == null ? void 0 : f[e][c]) || o, U = un(h);
      if (U) return U;
      if (l !== void 0) return l;
      throw new Error(`\`${u}\` must be used within \`${r}\``);
    }
    return d.displayName = r + "Provider", [
      d,
      s
    ];
  }
  const i = () => {
    const r = n.map((l) => /* @__PURE__ */ Ja(l));
    return function(o) {
      const c = (o == null ? void 0 : o[e]) || r;
      return $e(
        () => ({
          [`__scope${e}`]: {
            ...o,
            [e]: c
          }
        }),
        [
          o,
          c
        ]
      );
    };
  };
  return i.scopeName = e, [
    a,
    WB(i, ...t)
  ];
}
function WB(...e) {
  const t = e[0];
  if (e.length === 1) return t;
  const n = () => {
    const a = e.map(
      (i) => ({
        useScope: i(),
        scopeName: i.scopeName
      })
    );
    return function(r) {
      const l = a.reduce((o, { useScope: c, scopeName: d }) => {
        const u = c(r)[`__scope${d}`];
        return {
          ...o,
          ...u
        };
      }, {});
      return $e(
        () => ({
          [`__scope${t.scopeName}`]: l
        }),
        [
          l
        ]
      );
    };
  };
  return n.scopeName = t.scopeName, n;
}
const VB = globalThis != null && globalThis.document ? _n : () => {
}, GB = H.useId || (() => {
});
let jB = 0;
function YB(e) {
  const [t, n] = H.useState(GB());
  return VB(() => {
    n(
      (a) => a ?? String(jB++)
    );
  }, [
    e
  ]), t ? `radix-${t}` : "";
}
const j4 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e, i = tn.toArray(n), r = i.find(KB);
  if (r) {
    const l = r.props.children, o = i.map((c) => c === r ? tn.count(l) > 1 ? tn.only(null) : /* @__PURE__ */ qn(l) ? l.props.children : null : c);
    return /* @__PURE__ */ Ke(a0, Bt({}, a, {
      ref: t
    }), /* @__PURE__ */ qn(l) ? /* @__PURE__ */ gl(l, void 0, o) : null);
  }
  return /* @__PURE__ */ Ke(a0, Bt({}, a, {
    ref: t
  }), n);
});
j4.displayName = "Slot";
const a0 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e;
  return /* @__PURE__ */ qn(n) ? /* @__PURE__ */ gl(n, {
    ...qB(a, n.props),
    ref: G4(t, n.ref)
  }) : tn.count(n) > 1 ? tn.only(null) : null;
});
a0.displayName = "SlotClone";
const ZB = ({ children: e }) => /* @__PURE__ */ Ke(Ru, null, e);
function KB(e) {
  return /* @__PURE__ */ qn(e) && e.type === ZB;
}
function qB(e, t) {
  const n = {
    ...t
  };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...o) => {
      r(...o), i(...o);
    } : i && (n[a] = i) : a === "style" ? n[a] = {
      ...i,
      ...r
    } : a === "className" && (n[a] = [
      i,
      r
    ].filter(Boolean).join(" "));
  }
  return {
    ...e,
    ...n
  };
}
const JB = [
  "a",
  "button",
  "div",
  "h2",
  "h3",
  "img",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "span",
  "svg",
  "ul"
], Y4 = JB.reduce((e, t) => {
  const n = /* @__PURE__ */ It((a, i) => {
    const { asChild: r, ...l } = a, o = r ? j4 : t;
    return Q(() => {
      window[Symbol.for("radix-ui")] = !0;
    }, []), /* @__PURE__ */ Ke(o, Bt({}, l, {
      ref: i
    }));
  });
  return n.displayName = `Primitive.${t}`, {
    ...e,
    [t]: n
  };
}, {});
function cU(e) {
  const t = re(e);
  return Q(() => {
    t.current = e;
  }), $e(
    () => (...n) => {
      var a;
      return (a = t.current) === null || a === void 0 ? void 0 : a.call(t, ...n);
    },
    []
  );
}
function QB({ prop: e, defaultProp: t, onChange: n = () => {
} }) {
  const [a, i] = eH({
    defaultProp: t,
    onChange: n
  }), r = e !== void 0, l = r ? e : a, o = cU(n), c = _e((d) => {
    if (r) {
      const u = typeof d == "function" ? d(e) : d;
      u !== e && o(u);
    } else i(d);
  }, [
    r,
    e,
    i,
    o
  ]);
  return [
    l,
    c
  ];
}
function eH({ defaultProp: e, onChange: t }) {
  const n = oe(e), [a] = n, i = re(a), r = cU(t);
  return Q(() => {
    i.current !== a && (r(a), i.current = a);
  }, [
    a,
    i,
    r
  ]), n;
}
const tH = /* @__PURE__ */ Ja(void 0);
function Z4(e) {
  const t = un(tH);
  return e || t || "ltr";
}
const Ph = "rovingFocusGroup.onEntryFocus", nH = {
  bubbles: !1,
  cancelable: !0
}, dU = "RovingFocusGroup", [i0, K4, aH] = FB(dU), [iH, q4] = XB(dU, [
  aH
]), [rH, lH] = iH(dU), oH = /* @__PURE__ */ It((e, t) => /* @__PURE__ */ Ke(i0.Provider, {
  scope: e.__scopeRovingFocusGroup
}, /* @__PURE__ */ Ke(i0.Slot, {
  scope: e.__scopeRovingFocusGroup
}, /* @__PURE__ */ Ke(sH, Bt({}, e, {
  ref: t
}))))), sH = /* @__PURE__ */ It((e, t) => {
  const { __scopeRovingFocusGroup: n, orientation: a, loop: i = !1, dir: r, currentTabStopId: l, defaultCurrentTabStopId: o, onCurrentTabStopIdChange: c, onEntryFocus: d, ...s } = e, u = re(null), f = HB(t, u), h = Z4(r), [U = null, m] = QB({
    prop: l,
    defaultProp: o,
    onChange: c
  }), [g, b] = oe(!1), v = cU(d), y = K4(n), w = re(!1), [x, S] = oe(0);
  return Q(() => {
    const E = u.current;
    if (E)
      return E.addEventListener(Ph, v), () => E.removeEventListener(Ph, v);
  }, [
    v
  ]), /* @__PURE__ */ Ke(rH, {
    scope: n,
    orientation: a,
    dir: h,
    loop: i,
    currentTabStopId: U,
    onItemFocus: _e(
      (E) => m(E),
      [
        m
      ]
    ),
    onItemShiftTab: _e(
      () => b(!0),
      []
    ),
    onFocusableItemAdd: _e(
      () => S(
        (E) => E + 1
      ),
      []
    ),
    onFocusableItemRemove: _e(
      () => S(
        (E) => E - 1
      ),
      []
    )
  }, /* @__PURE__ */ Ke(Y4.div, Bt({
    tabIndex: g || x === 0 ? -1 : 0,
    "data-orientation": a
  }, s, {
    ref: f,
    style: {
      outline: "none",
      ...e.style
    },
    onMouseDown: Ql(e.onMouseDown, () => {
      w.current = !0;
    }),
    onFocus: Ql(e.onFocus, (E) => {
      const M = !w.current;
      if (E.target === E.currentTarget && M && !g) {
        const I = new CustomEvent(Ph, nH);
        if (E.currentTarget.dispatchEvent(I), !I.defaultPrevented) {
          const T = y().filter(
            ($) => $.focusable
          ), A = T.find(
            ($) => $.active
          ), D = T.find(
            ($) => $.id === U
          ), O = [
            A,
            D,
            ...T
          ].filter(Boolean).map(
            ($) => $.ref.current
          );
          J4(O);
        }
      }
      w.current = !1;
    }),
    onBlur: Ql(
      e.onBlur,
      () => b(!1)
    )
  })));
}), cH = "RovingFocusGroupItem", dH = /* @__PURE__ */ It((e, t) => {
  const { __scopeRovingFocusGroup: n, focusable: a = !0, active: i = !1, tabStopId: r, ...l } = e, o = YB(), c = r || o, d = lH(cH, n), s = d.currentTabStopId === c, u = K4(n), { onFocusableItemAdd: f, onFocusableItemRemove: h } = d;
  return Q(() => {
    if (a)
      return f(), () => h();
  }, [
    a,
    f,
    h
  ]), /* @__PURE__ */ Ke(i0.ItemSlot, {
    scope: n,
    id: c,
    focusable: a,
    active: i
  }, /* @__PURE__ */ Ke(Y4.span, Bt({
    tabIndex: s ? 0 : -1,
    "data-orientation": d.orientation
  }, l, {
    ref: t,
    onMouseDown: Ql(e.onMouseDown, (U) => {
      a ? d.onItemFocus(c) : U.preventDefault();
    }),
    onFocus: Ql(
      e.onFocus,
      () => d.onItemFocus(c)
    ),
    onKeyDown: Ql(e.onKeyDown, (U) => {
      if (U.key === "Tab" && U.shiftKey) {
        d.onItemShiftTab();
        return;
      }
      if (U.target !== U.currentTarget) return;
      const m = hH(U, d.orientation, d.dir);
      if (m !== void 0) {
        U.preventDefault();
        let b = u().filter(
          (v) => v.focusable
        ).map(
          (v) => v.ref.current
        );
        if (m === "last") b.reverse();
        else if (m === "prev" || m === "next") {
          m === "prev" && b.reverse();
          const v = b.indexOf(U.currentTarget);
          b = d.loop ? pH(b, v + 1) : b.slice(v + 1);
        }
        setTimeout(
          () => J4(b)
        );
      }
    })
  })));
}), uH = {
  ArrowLeft: "prev",
  ArrowUp: "prev",
  ArrowRight: "next",
  ArrowDown: "next",
  PageUp: "first",
  Home: "first",
  PageDown: "last",
  End: "last"
};
function fH(e, t) {
  return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e;
}
function hH(e, t, n) {
  const a = fH(e.key, n);
  if (!(t === "vertical" && [
    "ArrowLeft",
    "ArrowRight"
  ].includes(a)) && !(t === "horizontal" && [
    "ArrowUp",
    "ArrowDown"
  ].includes(a)))
    return uH[a];
}
function J4(e) {
  const t = document.activeElement;
  for (const n of e)
    if (n === t || (n.focus(), document.activeElement !== t)) return;
}
function pH(e, t) {
  return e.map(
    (n, a) => e[(t + a) % e.length]
  );
}
const UH = oH, mH = dH;
function gH(e, t) {
  typeof e == "function" ? e(t) : e != null && (e.current = t);
}
function Q4(...e) {
  return (t) => e.forEach(
    (n) => gH(n, t)
  );
}
function bH(...e) {
  return _e(Q4(...e), e);
}
const r0 = globalThis != null && globalThis.document ? _n : () => {
};
function vH(e, t) {
  return P5((n, a) => {
    const i = t[n][a];
    return i ?? n;
  }, e);
}
const e9 = (e) => {
  const { present: t, children: n } = e, a = yH(t), i = typeof n == "function" ? n({
    present: a.isPresent
  }) : tn.only(n), r = bH(a.ref, i.ref);
  return typeof n == "function" || a.isPresent ? /* @__PURE__ */ gl(i, {
    ref: r
  }) : null;
};
e9.displayName = "Presence";
function yH(e) {
  const [t, n] = oe(), a = re({}), i = re(e), r = re("none"), l = e ? "mounted" : "unmounted", [o, c] = vH(l, {
    mounted: {
      UNMOUNT: "unmounted",
      ANIMATION_OUT: "unmountSuspended"
    },
    unmountSuspended: {
      MOUNT: "mounted",
      ANIMATION_END: "unmounted"
    },
    unmounted: {
      MOUNT: "mounted"
    }
  });
  return Q(() => {
    const d = nd(a.current);
    r.current = o === "mounted" ? d : "none";
  }, [
    o
  ]), r0(() => {
    const d = a.current, s = i.current;
    if (s !== e) {
      const f = r.current, h = nd(d);
      e ? c("MOUNT") : h === "none" || (d == null ? void 0 : d.display) === "none" ? c("UNMOUNT") : c(s && f !== h ? "ANIMATION_OUT" : "UNMOUNT"), i.current = e;
    }
  }, [
    e,
    c
  ]), r0(() => {
    if (t) {
      const d = (u) => {
        const h = nd(a.current).includes(u.animationName);
        u.target === t && h && za(
          () => c("ANIMATION_END")
        );
      }, s = (u) => {
        u.target === t && (r.current = nd(a.current));
      };
      return t.addEventListener("animationstart", s), t.addEventListener("animationcancel", d), t.addEventListener("animationend", d), () => {
        t.removeEventListener("animationstart", s), t.removeEventListener("animationcancel", d), t.removeEventListener("animationend", d);
      };
    } else
      c("ANIMATION_END");
  }, [
    t,
    c
  ]), {
    isPresent: [
      "mounted",
      "unmountSuspended"
    ].includes(o),
    ref: _e((d) => {
      d && (a.current = getComputedStyle(d)), n(d);
    }, [])
  };
}
function nd(e) {
  return (e == null ? void 0 : e.animationName) || "none";
}
const t9 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e, i = tn.toArray(n), r = i.find(EH);
  if (r) {
    const l = r.props.children, o = i.map((c) => c === r ? tn.count(l) > 1 ? tn.only(null) : /* @__PURE__ */ qn(l) ? l.props.children : null : c);
    return /* @__PURE__ */ Ke(l0, Bt({}, a, {
      ref: t
    }), /* @__PURE__ */ qn(l) ? /* @__PURE__ */ gl(l, void 0, o) : null);
  }
  return /* @__PURE__ */ Ke(l0, Bt({}, a, {
    ref: t
  }), n);
});
t9.displayName = "Slot";
const l0 = /* @__PURE__ */ It((e, t) => {
  const { children: n, ...a } = e;
  return /* @__PURE__ */ qn(n) ? /* @__PURE__ */ gl(n, {
    ...xH(a, n.props),
    ref: Q4(t, n.ref)
  }) : tn.count(n) > 1 ? tn.only(null) : null;
});
l0.displayName = "SlotClone";
const wH = ({ children: e }) => /* @__PURE__ */ Ke(Ru, null, e);
function EH(e) {
  return /* @__PURE__ */ qn(e) && e.type === wH;
}
function xH(e, t) {
  const n = {
    ...t
  };
  for (const a in t) {
    const i = e[a], r = t[a];
    /^on[A-Z]/.test(a) ? i && r ? n[a] = (...o) => {
      r(...o), i(...o);
    } : i && (n[a] = i) : a === "style" ? n[a] = {
      ...i,
      ...r
    } : a === "className" && (n[a] = [
      i,
      r
    ].filter(Boolean).join(" "));
  }
  return {
    ...e,
    ...n
  };
}
const SH = [
  "a",
  "button",
  "div",
  "h2",
  "h3",
  "img",
  "label",
  "li",
  "nav",
  "ol",
  "p",
  "span",
  "svg",
  "ul"
], Ef = SH.reduce((e, t) => {
  const n = /* @__PURE__ */ It((a, i) => {
    const { asChild: r, ...l } = a, o = r ? t9 : t;
    return Q(() => {
      window[Symbol.for("radix-ui")] = !0;
    }, []), /* @__PURE__ */ Ke(o, Bt({}, l, {
      ref: i
    }));
  });
  return n.displayName = `Primitive.${t}`, {
    ...e,
    [t]: n
  };
}, {});
function n9(e) {
  const t = re(e);
  return Q(() => {
    t.current = e;
  }), $e(
    () => (...n) => {
      var a;
      return (a = t.current) === null || a === void 0 ? void 0 : a.call(t, ...n);
    },
    []
  );
}
function kH({ prop: e, defaultProp: t, onChange: n = () => {
} }) {
  const [a, i] = MH({
    defaultProp: t,
    onChange: n
  }), r = e !== void 0, l = r ? e : a, o = n9(n), c = _e((d) => {
    if (r) {
      const u = typeof d == "function" ? d(e) : d;
      u !== e && o(u);
    } else i(d);
  }, [
    r,
    e,
    i,
    o
  ]);
  return [
    l,
    c
  ];
}
function MH({ defaultProp: e, onChange: t }) {
  const n = oe(e), [a] = n, i = re(a), r = n9(t);
  return Q(() => {
    i.current !== a && (r(a), i.current = a);
  }, [
    a,
    i,
    r
  ]), n;
}
const CH = H.useId || (() => {
});
let IH = 0;
function TH(e) {
  const [t, n] = H.useState(CH());
  return r0(() => {
    n(
      (a) => a ?? String(IH++)
    );
  }, [
    e
  ]), e || (t ? `radix-${t}` : "");
}
const a9 = "Tabs", [_H, XZ] = DB(a9, [
  q4
]), i9 = q4(), [AH, uU] = _H(a9), DH = /* @__PURE__ */ It((e, t) => {
  const { __scopeTabs: n, value: a, onValueChange: i, defaultValue: r, orientation: l = "horizontal", dir: o, activationMode: c = "automatic", ...d } = e, s = Z4(o), [u, f] = kH({
    prop: a,
    onChange: i,
    defaultProp: r
  });
  return /* @__PURE__ */ Ke(AH, {
    scope: n,
    baseId: TH(),
    value: u,
    onValueChange: f,
    orientation: l,
    dir: s,
    activationMode: c
  }, /* @__PURE__ */ Ke(Ef.div, Bt({
    dir: s,
    "data-orientation": l
  }, d, {
    ref: t
  })));
}), LH = "TabsList", RH = /* @__PURE__ */ It((e, t) => {
  const { __scopeTabs: n, loop: a = !0, ...i } = e, r = uU(LH, n), l = i9(n);
  return /* @__PURE__ */ Ke(UH, Bt({
    asChild: !0
  }, l, {
    orientation: r.orientation,
    dir: r.dir,
    loop: a
  }), /* @__PURE__ */ Ke(Ef.div, Bt({
    role: "tablist",
    "aria-orientation": r.orientation
  }, i, {
    ref: t
  })));
}), PH = "TabsTrigger", NH = /* @__PURE__ */ It((e, t) => {
  const { __scopeTabs: n, value: a, disabled: i = !1, ...r } = e, l = uU(PH, n), o = i9(n), c = r9(l.baseId, a), d = l9(l.baseId, a), s = a === l.value;
  return /* @__PURE__ */ Ke(mH, Bt({
    asChild: !0
  }, o, {
    focusable: !i,
    active: s
  }), /* @__PURE__ */ Ke(Ef.button, Bt({
    type: "button",
    role: "tab",
    "aria-selected": s,
    "aria-controls": d,
    "data-state": s ? "active" : "inactive",
    "data-disabled": i ? "" : void 0,
    disabled: i,
    id: c
  }, r, {
    ref: t,
    onMouseDown: Rh(e.onMouseDown, (u) => {
      !i && u.button === 0 && u.ctrlKey === !1 ? l.onValueChange(a) : u.preventDefault();
    }),
    onKeyDown: Rh(e.onKeyDown, (u) => {
      [
        " ",
        "Enter"
      ].includes(u.key) && l.onValueChange(a);
    }),
    onFocus: Rh(e.onFocus, () => {
      const u = l.activationMode !== "manual";
      !s && !i && u && l.onValueChange(a);
    })
  })));
}), OH = "TabsContent", $H = /* @__PURE__ */ It((e, t) => {
  const { __scopeTabs: n, value: a, forceMount: i, children: r, ...l } = e, o = uU(OH, n), c = r9(o.baseId, a), d = l9(o.baseId, a), s = a === o.value, u = re(s);
  return Q(() => {
    const f = requestAnimationFrame(
      () => u.current = !1
    );
    return () => cancelAnimationFrame(f);
  }, []), /* @__PURE__ */ Ke(
    e9,
    {
      present: i || s
    },
    ({ present: f }) => /* @__PURE__ */ Ke(Ef.div, Bt({
      "data-state": s ? "active" : "inactive",
      "data-orientation": o.orientation,
      role: "tabpanel",
      "aria-labelledby": c,
      hidden: !f,
      id: d,
      tabIndex: 0
    }, l, {
      ref: t,
      style: {
        ...e.style,
        animationDuration: u.current ? "0s" : void 0
      }
    }), f && r)
  );
});
function r9(e, t) {
  return `${e}-trigger-${t}`;
}
function l9(e, t) {
  return `${e}-content-${t}`;
}
const o9 = DH, s9 = RH, c9 = NH, d9 = $H;
var zH = "Expected a function", b6 = NaN, FH = "[object Symbol]", BH = /^\s+|\s+$/g, HH = /^[-+]0x[0-9a-f]+$/i, XH = /^0b[01]+$/i, WH = /^0o[0-7]+$/i, VH = parseInt, GH = typeof wi == "object" && wi && wi.Object === Object && wi, jH = typeof self == "object" && self && self.Object === Object && self, YH = GH || jH || Function("return this")(), ZH = Object.prototype, KH = ZH.toString, qH = Math.max, JH = Math.min, Nh = function() {
  return YH.Date.now();
};
function QH(e, t, n) {
  var a, i, r, l, o, c, d = 0, s = !1, u = !1, f = !0;
  if (typeof e != "function")
    throw new TypeError(zH);
  t = v6(t) || 0, o0(n) && (s = !!n.leading, u = "maxWait" in n, r = u ? qH(v6(n.maxWait) || 0, t) : r, f = "trailing" in n ? !!n.trailing : f);
  function h(S) {
    var E = a, M = i;
    return a = i = void 0, d = S, l = e.apply(M, E), l;
  }
  function U(S) {
    return d = S, o = setTimeout(b, t), s ? h(S) : l;
  }
  function m(S) {
    var E = S - c, M = S - d, I = t - E;
    return u ? JH(I, r - M) : I;
  }
  function g(S) {
    var E = S - c, M = S - d;
    return c === void 0 || E >= t || E < 0 || u && M >= r;
  }
  function b() {
    var S = Nh();
    if (g(S))
      return v(S);
    o = setTimeout(b, m(S));
  }
  function v(S) {
    return o = void 0, f && a ? h(S) : (a = i = void 0, l);
  }
  function y() {
    o !== void 0 && clearTimeout(o), d = 0, a = c = i = o = void 0;
  }
  function w() {
    return o === void 0 ? l : v(Nh());
  }
  function x() {
    var S = Nh(), E = g(S);
    if (a = arguments, i = this, c = S, E) {
      if (o === void 0)
        return U(c);
      if (u)
        return o = setTimeout(b, t), h(c);
    }
    return o === void 0 && (o = setTimeout(b, t)), l;
  }
  return x.cancel = y, x.flush = w, x;
}
function o0(e) {
  var t = typeof e;
  return !!e && (t == "object" || t == "function");
}
function eX(e) {
  return !!e && typeof e == "object";
}
function tX(e) {
  return typeof e == "symbol" || eX(e) && KH.call(e) == FH;
}
function v6(e) {
  if (typeof e == "number")
    return e;
  if (tX(e))
    return b6;
  if (o0(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = o0(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = e.replace(BH, "");
  var n = XH.test(e);
  return n || WH.test(e) ? VH(e.slice(2), n ? 2 : 8) : HH.test(e) ? b6 : +e;
}
var nX = QH;
const aX = /* @__PURE__ */ ml(nX);
function iX(e, t, n, a) {
  Object.defineProperty(e, t, { get: n, set: a, enumerable: !0, configurable: !0 });
}
var rX = {};
iX(rX, "LaserPointer", () => Cu);
function kt([e, t, n], [a, i, r]) {
  return [
    e + a,
    t + i,
    n + r
  ];
}
function us([e, t, n], [a, i, r]) {
  return [
    e - a,
    t - i,
    n - r
  ];
}
function Dt([e, t, n], a) {
  return [
    e * a,
    t * a,
    n * a
  ];
}
function Ll([e, t, n]) {
  return [
    e / Math.sqrt(e ** 2 + t ** 2),
    t / Math.sqrt(e ** 2 + t ** 2),
    n
  ];
}
function nn([e, t, n], a) {
  return [
    Math.cos(a) * e - Math.sin(a) * t,
    Math.sin(a) * e + Math.cos(a) * t,
    n
  ];
}
function lX(e, t, n) {
  return kt(e, Dt(us(t, e), n));
}
function y6(e, t, n) {
  return Math.atan2(n[1] - e[1], n[0] - e[0]) - Math.atan2(t[1] - e[1], t[0] - e[0]);
}
function w6(e) {
  return Math.atan2(Math.sin(e), Math.cos(e));
}
function E6([e, t]) {
  return Math.sqrt(e ** 2 + t ** 2);
}
function eo([e, t], [n, a]) {
  return Math.sqrt((n - e) ** 2 + (a - t) ** 2);
}
function oX(e) {
  if (e.length < 2) return 0;
  let t = 0;
  for (let n = 1; n <= e.length - 1; n++) t += eo(e[n - 1], e[n]);
  return t += eo(e[e.length - 2], e[e.length - 1]), t;
}
const sX = (e, t, n) => Math.max(t, Math.min(n, e));
function cX(e, t, n) {
  const a = eo(t, n);
  if (a === 0) return eo(e, t);
  const i = sX(((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / a ** 2, 0, 1), r = [
    t[0] + i * (n[0] - t[0]),
    t[1] + i * (n[1] - t[1]),
    e[2]
  ];
  return eo(r, e);
}
function Mu(e, t) {
  if (t === 0 || e.length <= 2) return e;
  const n = e[0], a = e[e.length - 1], [i, r] = e.reduce(([l, o], c, d) => {
    const s = cX(c, n, a);
    return s > l ? [
      s,
      d
    ] : [
      l,
      o
    ];
  }, [
    0,
    -1
  ]);
  if (i >= t) {
    const l = e[r];
    return [
      ...Mu([
        n,
        ...e.slice(1, r),
        l
      ], t).slice(0, -1),
      l,
      ...Mu([
        l,
        ...e.slice(r, -1),
        a
      ], t).slice(1)
    ];
  } else return [
    n,
    a
  ];
}
const tr = class tr {
  constructor(t) {
    this.originalPoints = [], this.stablePoints = [], this.tailPoints = [], this.isFresh = !0, this.options = Object.assign({}, tr.defaults, t);
  }
  get lastPoint() {
    return this.tailPoints[this.tailPoints.length - 1] ?? this.stablePoints[this.stablePoints.length - 1];
  }
  addPoint(t) {
    const n = this.originalPoints[this.originalPoints.length - 1];
    if (!(n && n[0] === t[0] && n[1] === t[1])) {
      if (this.originalPoints.push(t), this.isFresh) {
        this.isFresh = !1, this.stablePoints.push(t);
        return;
      }
      this.options.streamline > 0 && (t = lX(this.lastPoint, t, 1 - this.options.streamline)), this.tailPoints.push(t), oX(this.tailPoints) > tr.constants.maxTailLength && this.stabilizeTail();
    }
  }
  close() {
    this.stabilizeTail();
  }
  stabilizeTail() {
    if (this.options.simplify > 0 && this.options.simplifyPhase == "tail") throw new Error("Not implemented yet");
    this.stablePoints.push(...this.tailPoints), this.tailPoints = [];
  }
  getSize(t, n, a, i, r) {
    return (t ?? this.options.size) * this.options.sizeMapping({
      pressure: n,
      runningLength: r,
      currentIndex: a,
      totalLength: i
    });
  }
  getStrokeOutline(t) {
    if (this.isFresh) return [];
    let n = [
      ...this.stablePoints,
      ...this.tailPoints
    ];
    this.options.simplify > 0 && this.options.simplifyPhase === "input" && (n = Mu(n, this.options.simplify));
    const a = n.length;
    if (a === 0) return [];
    if (a === 1) {
      const E = n[0], M = this.getSize(t, E[2], 0, a, 0);
      if (M < 0.5) return [];
      const I = [];
      for (let T = 0; T <= Math.PI * 2; T += Math.PI / 16) I.push(kt(E, Dt(nn([
        1,
        0,
        0
      ], T), M)));
      return I.push(kt(E, Dt([
        1,
        0,
        0
      ], this.getSize(t, E[2], 0, a, 0)))), I;
    }
    if (a === 2) {
      const E = n[0], M = n[1], I = this.getSize(t, E[2], 0, a, 0), T = this.getSize(t, M[2], 0, a, 0);
      if (I < 0.5 || T < 0.5) return [];
      const A = [], D = y6(E, [
        E[0],
        E[1] - 100,
        E[2]
      ], M);
      for (let R = D; R <= Math.PI + D; R += Math.PI / 16) A.push(kt(E, Dt(nn([
        1,
        0,
        0
      ], R), I)));
      for (let R = Math.PI + D; R <= Math.PI * 2 + D; R += Math.PI / 16) A.push(kt(M, Dt(nn([
        1,
        0,
        0
      ], R), T)));
      return A.push(A[0]), A;
    }
    const i = [], r = [];
    let l = 0, o = 0, c = 0, d = 0;
    for (let E = 1; E < a - 1; E++) {
      const M = n[E - 1], I = n[E], T = n[E + 1];
      let A = I[2];
      const D = eo(M, I);
      d += D, l = o + (D - o) * 0.2;
      const R = this.getSize(t, A, E, a, d);
      if (R === 0) {
        c = E + 1;
        continue;
      }
      const O = Ll(us(M, I)), $ = Ll(us(T, I)), F = nn(O, Math.PI / 2), N = nn(O, -Math.PI / 2), j = nn($, Math.PI / 2), z = nn($, -Math.PI / 2), Y = kt(I, Dt(F, R)), ie = kt(I, Dt(N, R)), pe = kt(I, Dt(j, R)), ue = kt(I, Dt(z, R)), Ve = kt(F, z), Ge = kt(N, j), je = kt(I, Dt(E6(Ve) === 0 ? O : Ll(Ve), R)), Fe = kt(I, Dt(E6(Ge) === 0 ? $ : Ll(Ge), R)), At = w6(y6(I, M, T)), qt = tr.constants.cornerDetectionMaxAngle / 180 * Math.PI * tr.constants.cornerDetectionVariance(l);
      if (Math.abs(At) < qt) {
        const Le = Math.abs(w6(Math.PI - At));
        if (Le === 0) continue;
        if (At < 0) {
          r.push(ie, Fe);
          for (let Be = 0; Be <= Le; Be += Le / 4) i.push(kt(I, nn(Dt(F, R), Be)));
          for (let Be = Le; Be >= 0; Be -= Le / 4) r.push(kt(I, nn(Dt(F, R), Be)));
          r.push(Fe, pe);
        } else {
          i.push(Y, je);
          for (let Be = 0; Be <= Le; Be += Le / 4) r.push(kt(I, nn(Dt(F, -R), -Be)));
          for (let Be = Le; Be >= 0; Be -= Le / 4) i.push(kt(I, nn(Dt(F, -R), -Be)));
          i.push(je, ue);
        }
      } else
        i.push(je), r.push(Fe);
      o = l;
    }
    if (c >= a - 2)
      if (this.options.keepHead) {
        const E = n[a - 1], M = [];
        for (let I = 0; I <= Math.PI * 2; I += Math.PI / 16) M.push(kt(E, Dt(nn([
          1,
          0,
          0
        ], I), this.options.size)));
        return M.push(kt(E, Dt([
          1,
          0,
          0
        ], this.options.size))), M;
      } else return [];
    const s = n[c], u = n[c + 1], f = n[a - 2], h = n[a - 1], U = Ll(us(u, s)), m = Ll(us(f, h)), g = nn(U, -Math.PI / 2), b = nn(m, Math.PI / 2), v = this.getSize(t, s[2], 0, a, 0), y = [], w = this.options.keepHead ? this.options.size : this.getSize(t, f[2], a - 2, a, d), x = [];
    if (v > 1) {
      for (let E = 0; E <= Math.PI; E += Math.PI / 16) y.unshift(kt(s, nn(Dt(g, v), -E)));
      y.unshift(kt(s, Dt(g, -v)));
    } else y.push(s);
    for (let E = 0; E <= Math.PI * 3; E += Math.PI / 16) x.push(kt(h, nn(Dt(b, -w), -E)));
    const S = [
      ...y,
      ...i,
      ...x.reverse(),
      ...r.reverse()
    ];
    return y.length > 0 && S.push(y[0]), this.options.simplify > 0 && this.options.simplifyPhase === "output" ? Mu(S, this.options.simplify) : S;
  }
};
tr.defaults = {
  size: 2,
  streamline: 0.45,
  simplify: 0.1,
  simplifyPhase: "output",
  keepHead: !1,
  sizeMapping: () => 1
}, tr.constants = {
  cornerDetectionMaxAngle: 75,
  cornerDetectionVariance: (t) => t > 35 ? 0.5 : 1,
  maxTailLength: 50
};
let Cu = tr;
var u9 = W3(), { useAtom: Et, useSetAtom: xf, useAtomValue: f9, useStore: WZ } = u9, dX = u9.Provider, ma = Yp(), uX = Ry({ "./locales/ar-SA.json": () => import("./ar-SA-G6X2FPQ2-CGLAr2p3.js"), "./locales/az-AZ.json": () => import("./az-AZ-76LH7QW2-DXGUb-K4.js"), "./locales/bg-BG.json": () => import("./bg-BG-XCXSNQG7-DF0qEv_7.js"), "./locales/bn-BD.json": () => import("./bn-BD-2XOGV67Q-UJFW6MlT.js"), "./locales/ca-ES.json": () => import("./ca-ES-6MX7JW3Y-Br3ufKjH.js"), "./locales/cs-CZ.json": () => import("./cs-CZ-2BRQDIVT-CJuG5Mx8.js"), "./locales/da-DK.json": () => import("./da-DK-5WZEPLOC-CBCS7YEm.js"), "./locales/de-DE.json": () => import("./de-DE-XR44H4JA-Bj2FO0Xg.js"), "./locales/el-GR.json": () => import("./el-GR-BZB4AONW-DpOljp6e.js"), "./locales/en.json": () => import("./en-B4ZKOASM-2aitGAh_.js"), "./locales/es-ES.json": () => import("./es-ES-U4NZUMDT-C_DBz2jr.js"), "./locales/eu-ES.json": () => import("./eu-ES-A7QVB2H4-CP-P5-SX.js"), "./locales/fa-IR.json": () => import("./fa-IR-HGAKTJCU-SpMqLXjn.js"), "./locales/fi-FI.json": () => import("./fi-FI-Z5N7JZ37-CzZFe42P.js"), "./locales/fr-FR.json": () => import("./fr-FR-RHASNOE6-BFdlcuZH.js"), "./locales/gl-ES.json": () => import("./gl-ES-HMX3MZ6V-CRH58AOG.js"), "./locales/he-IL.json": () => import("./he-IL-6SHJWFNN-BXfBFQCS.js"), "./locales/hi-IN.json": () => import("./hi-IN-IWLTKZ5I-CIdflZVR.js"), "./locales/hu-HU.json": () => import("./hu-HU-A5ZG7DT2-BGYDW_VN.js"), "./locales/id-ID.json": () => import("./id-ID-SAP4L64H-CQfX6Ilg.js"), "./locales/it-IT.json": () => import("./it-IT-JPQ66NNP-DlmCW_HH.js"), "./locales/ja-JP.json": () => import("./ja-JP-DBVTYXUO-BU-iLtfp.js"), "./locales/kaa.json": () => import("./kaa-6HZHGXH3-CLOK7kcG.js"), "./locales/kab-KAB.json": () => import("./kab-KAB-ZGHBKWFO-DXHh2DQI.js"), "./locales/kk-KZ.json": () => import("./kk-KZ-P5N5QNE5-DYySmOQX.js"), "./locales/km-KH.json": () => import("./km-KH-HSX4SM5Z-BtM3S45H.js"), "./locales/ko-KR.json": () => import("./ko-KR-MTYHY66A-DtOJreJZ.js"), "./locales/ku-TR.json": () => import("./ku-TR-6OUDTVRD-DAOeeZDz.js"), "./locales/lt-LT.json": () => import("./lt-LT-XHIRWOB4-rwPS6WNk.js"), "./locales/lv-LV.json": () => import("./lv-LV-5QDEKY6T-DeGEKGkh.js"), "./locales/mr-IN.json": () => import("./mr-IN-CRQNXWMA-B77W9kSm.js"), "./locales/my-MM.json": () => import("./my-MM-5M5IBNSE-vOWDhKeA.js"), "./locales/nb-NO.json": () => import("./nb-NO-T6EIAALU-Cqa1dxl7.js"), "./locales/nl-NL.json": () => import("./nl-NL-IS3SIHDZ-B9PFJkva.js"), "./locales/nn-NO.json": () => import("./nn-NO-6E72VCQL-DnidwXIU.js"), "./locales/oc-FR.json": () => import("./oc-FR-POXYY2M6-B4Cl7_hX.js"), "./locales/pa-IN.json": () => import("./pa-IN-N4M65BXN-DrKOTkYp.js"), "./locales/percentages.json": () => import("./percentages-BXMCSKIN-DMZV3UYu.js"), "./locales/pl-PL.json": () => import("./pl-PL-T2D74RX3-OPFVdvMg.js"), "./locales/pt-BR.json": () => import("./pt-BR-5N22H2LF-Bk2qWDQS.js"), "./locales/pt-PT.json": () => import("./pt-PT-UZXXM6DQ-DXM6FFzA.js"), "./locales/ro-RO.json": () => import("./ro-RO-JPDTUUEW-D8mYdiI5.js"), "./locales/ru-RU.json": () => import("./ru-RU-B4JR7IUQ-DLqsOUDr.js"), "./locales/si-LK.json": () => import("./si-LK-N5RQ5JYF-DdRz7KHB.js"), "./locales/sk-SK.json": () => import("./sk-SK-C5VTKIMK-BhO6MS_-.js"), "./locales/sl-SI.json": () => import("./sl-SI-NN7IZMDC-CfmTQvZF.js"), "./locales/sv-SE.json": () => import("./sv-SE-XGPEYMSR-BkFCBtdl.js"), "./locales/ta-IN.json": () => import("./ta-IN-2NMHFXQM-BzW_tPGY.js"), "./locales/th-TH.json": () => import("./th-TH-HPSO5L25-DvscYKLS.js"), "./locales/tr-TR.json": () => import("./tr-TR-DEFEU3FU-DIKkX2sy.js"), "./locales/uk-UA.json": () => import("./uk-UA-QMV73CPH-CZ_9ucbg.js"), "./locales/vi-VN.json": () => import("./vi-VN-M7AON7JQ-DZ5334AA.js"), "./locales/zh-CN.json": () => import("./zh-CN-LNUGB5OW-CD__7F1Z.js"), "./locales/zh-HK.json": () => import("./zh-HK-E62DVLB3-CGVeyv7y.js"), "./locales/zh-TW.json": () => import("./zh-TW-RAJ6MFWO-C-o8N5wH.js") }), fX = 85, Lo = { code: "en", label: "English" }, fU = [Lo, ...[{ code: "ar-SA", label: "", rtl: !0 }, { code: "bg-BG", label: "" }, { code: "ca-ES", label: "Catal" }, { code: "cs-CZ", label: "esky" }, { code: "de-DE", label: "Deutsch" }, { code: "el-GR", label: "" }, { code: "es-ES", label: "Espaol" }, { code: "eu-ES", label: "Euskara" }, { code: "fa-IR", label: "", rtl: !0 }, { code: "fi-FI", label: "Suomi" }, { code: "fr-FR", label: "Franais" }, { code: "gl-ES", label: "Galego" }, { code: "he-IL", label: "", rtl: !0 }, { code: "hi-IN", label: "" }, { code: "hu-HU", label: "Magyar" }, { code: "id-ID", label: "Bahasa Indonesia" }, { code: "it-IT", label: "Italiano" }, { code: "ja-JP", label: "" }, { code: "kab-KAB", label: "Taqbaylit" }, { code: "kk-KZ", label: " " }, { code: "ko-KR", label: "" }, { code: "ku-TR", label: "Kurd" }, { code: "lt-LT", label: "Lietuvi" }, { code: "lv-LV", label: "Latvieu" }, { code: "my-MM", label: "Burmese" }, { code: "nb-NO", label: "Norsk bokml" }, { code: "nl-NL", label: "Nederlands" }, { code: "nn-NO", label: "Norsk nynorsk" }, { code: "oc-FR", label: "Occitan" }, { code: "pa-IN", label: "" }, { code: "pl-PL", label: "Polski" }, { code: "pt-BR", label: "Portugus Brasileiro" }, { code: "pt-PT", label: "Portugus" }, { code: "ro-RO", label: "Romn" }, { code: "ru-RU", label: "" }, { code: "sk-SK", label: "Slovenina" }, { code: "sv-SE", label: "Svenska" }, { code: "sl-SI", label: "Slovenina" }, { code: "tr-TR", label: "Trke" }, { code: "uk-UA", label: "" }, { code: "zh-CN", label: "" }, { code: "zh-TW", label: "" }, { code: "vi-VN", label: "Ting Vit" }, { code: "mr-IN", label: "" }].filter((e) => b$[e.code] >= fX).sort((e, t) => e.label > t.label ? 1 : -1)], Iu = "__test__";
we.DEV && fU.unshift({ code: Iu, label: "test language" }, { code: `${Iu}.rtl`, label: "test language (rtl)", rtl: !0 });
var Yl = Lo, Ld = {}, h9 = async (e) => {
  if (Yl = e, document.documentElement.dir = Yl.rtl ? "rtl" : "ltr", document.documentElement.lang = Yl.code, e.code.startsWith(Iu)) Ld = {};
  else try {
    Ld = await uX(`./locales/${Yl.code}.json`);
  } catch (t) {
    console.error(`Failed to load language ${e.code}:`, t.message), Ld = O3;
  }
  ma.set(p9, e.code);
}, ic = () => Yl, x6 = (e, t) => {
  for (let n = 0; n < t.length; ++n) {
    let a = t[n];
    if (e[a] === void 0) return;
    e = e[a];
  }
  if (typeof e == "string") return e;
}, C = (e, t, n) => {
  if (Yl.code.startsWith(Iu)) return `[[${t ? `${e}(${JSON.stringify(t).slice(1, -1)})` : e}]]`;
  let a = e.split("."), i = x6(Ld, a) || x6(O3, a) || n;
  if (i === void 0) {
    let r = `Can't find translation for ${e}`;
    return console.warn(r), "";
  }
  if (t) for (let r in t) i = i.replace(`{{${r}}}`, String(t[r]));
  return i;
}, p9 = Kt(Lo.code), fn = () => {
  let e = f9(p9);
  return { t: C, langCode: e };
}, hX = ({ size: e = "1em", circleWidth: t = 8, synchronized: n = !1, className: a = "" }) => {
  let i = -(Z.useRef(Date.now()).current % 1600);
  return p("div", { className: `Spinner ${a}`, children: p("svg", { viewBox: "0 0 100 100", style: { width: e, height: e, "--spinner-delay": n ? `${i}ms` : 0 }, children: p("circle", { cx: "50", cy: "50", r: 50 - t / 2, strokeWidth: t, fill: "none", strokeMiterlimit: "10" }) }) });
}, $i = hX, U9 = ({ delay: e, theme: t }) => {
  let [n, a] = oe(!!e);
  return Q(() => {
    if (!e) return;
    let i = setTimeout(() => {
      a(!1);
    }, e);
    return () => clearTimeout(i);
  }, [e]), n ? null : _("div", { className: ae("LoadingMessage", { "LoadingMessage--dark": t === Ie.DARK }), children: [p("div", { children: p($i, {}) }), p("div", { className: "LoadingMessage-text", children: C("labels.loadingScene") })] });
}, pX = (e) => {
  let [t, n] = oe(!0);
  return Q(() => {
    let a = async () => {
      await h9(i), n(!1);
    }, i = fU.find((r) => r.code === e.langCode) || Lo;
    a();
  }, [e.langCode]), t ? p(U9, { theme: e.theme }) : e.children;
}, Te = Z.forwardRef(({ size: e = "medium", visible: t = !0, className: n = "", ...a }, i) => {
  let { id: r } = di(), l = Z.useRef(null);
  Z.useImperativeHandle(i, () => l.current);
  let o = `ToolIcon_size_${e}`, [c, d] = oe(!1), s = re(!0), u = async (h) => {
    var m;
    let U = "onClick" in a && ((m = a.onClick) == null ? void 0 : m.call(a, h));
    if (Uc(U)) try {
      d(!0), await U;
    } catch (g) {
      if (g instanceof qu) console.warn(g);
      else throw g;
    } finally {
      s.current && d(!1);
    }
  };
  Q(() => (s.current = !0, () => {
    s.current = !1;
  }), []);
  let f = re(null);
  if (a.type === "button" || a.type === "icon" || a.type === "submit") {
    let h = a.type === "icon" ? "button" : a.type;
    return _("button", { className: ae("ToolIcon_type_button", o, n, t && !a.hidden ? "ToolIcon_type_button--show" : "ToolIcon_type_button--hide", { ToolIcon: !a.hidden, "ToolIcon--selected": a.selected, "ToolIcon--plain": a.type === "icon" }), style: a.style, "data-testid": a["data-testid"], hidden: a.hidden, title: a.title, "aria-label": a["aria-label"], type: h, onClick: u, ref: l, disabled: c || a.isLoading || !!a.disabled, children: [(a.icon || a.label) && _("div", { className: "ToolIcon__icon", "aria-hidden": "true", "aria-disabled": !!a.disabled, children: [a.icon || a.label, a.keyBindingLabel && p("span", { className: "ToolIcon__keybinding", children: a.keyBindingLabel }), a.isLoading && p($i, {})] }), a.showAriaLabel && _("div", { className: "ToolIcon__label", children: [a["aria-label"], " ", c && p($i, {})] }), a.children] });
  }
  return _("label", { className: ae("ToolIcon", n), title: a.title, onPointerDown: (h) => {
    var U;
    f.current = h.pointerType || null, (U = a.onPointerDown) == null || U.call(a, { pointerType: h.pointerType || null });
  }, onPointerUp: () => {
    requestAnimationFrame(() => {
      f.current = null;
    });
  }, children: [p("input", { className: `ToolIcon_type_radio ${o}`, type: "radio", name: a.name, "aria-label": a["aria-label"], "aria-keyshortcuts": a["aria-keyshortcuts"], "data-testid": a["data-testid"], id: `${r}-${a.id}`, onChange: () => {
    var h;
    (h = a.onChange) == null || h.call(a, { pointerType: f.current });
  }, checked: a.checked, ref: l }), _("div", { className: "ToolIcon__icon", children: [a.icon, a.keyBindingLabel && p("span", { className: "ToolIcon__keybinding", children: a.keyBindingLabel })] })] });
});
Te.displayName = "ToolButton";
var UX = (e, t, n) => {
  let a = new Set(Ee(e.filter((s) => fe(s)), t).map((s) => s.id)), i = {}, r = n.scene.getNonDeletedElementsMap(), l = /* @__PURE__ */ new Set();
  for (let s of a) {
    let u = ri(e, s);
    for (let f of u) if (!l.has(f.id)) {
      if (st(f)) {
        let h = Zt(f, r);
        h && (i[h.id] = !0);
      } else i[f.id] = !0;
      l.add(f.id);
    }
  }
  let o = !0, c = e.map((s) => {
    if (t.selectedElementIds[s.id]) {
      let u = st(s) ? Zt(s, r) : null;
      return s.frameId && a.has(s.frameId) ? (o = !1, i[s.id] = !0, s) : u != null && u.frameId && a.has(u == null ? void 0 : u.frameId) ? s : (s.boundElements && s.boundElements.forEach((f) => {
        var U, m;
        let h = n.scene.getNonDeletedElementsMap().get(f.id);
        h && te(h) && (G(h, { startBinding: s.id === ((U = h.startBinding) == null ? void 0 : U.elementId) ? null : h.startBinding, endBinding: s.id === ((m = h.endBinding) == null ? void 0 : m.elementId) ? null : h.endBinding }), G(h, { points: h.points }));
      }), ve(s, { isDeleted: !0 }));
    }
    return s.frameId && a.has(s.frameId) ? (o = !1, st(s) || (i[s.id] = !0), ve(s, { frameId: null })) : st(s) && t.selectedElementIds[s.containerId] ? ve(s, { isDeleted: !0 }) : s;
  }), d = t.editingGroupId;
  if (o && t.editingGroupId) {
    let s = ot(c, t.editingGroupId).filter((u) => !u.isDeleted);
    if (s.length > 1) s[0] && (i[s[0].id] = !0);
    else {
      d = null, s[0] && (i[s[0].id] = !0);
      let u = s[0];
      if (u) {
        let f = u.groupIds.findIndex((U) => U === t.editingGroupId), h = u.groupIds[f + 1];
        if (h) {
          let U = ot(c, h).filter((m) => !m.isDeleted);
          U.length > 1 && (d = h, U.forEach((m) => {
            i[m.id] = !0;
          }));
        }
      }
    }
  }
  return { elements: c, appState: { ...t, ...pn({ selectedElementIds: i, editingGroupId: d }, c, t, null) } };
}, S6 = (e, t) => {
  if (e.editingGroupId) {
    let n = ot(at(t), e.editingGroupId);
    if (n.length) return { ...e, selectedElementIds: { [n[0].id]: !0 } };
  }
  return e;
}, m9 = K({ name: "deleteSelectedElements", label: "labels.delete", icon: sl, trackEvent: { category: "element", action: "delete" }, perform: (e, t, n, a) => {
  if (t.editingLinearElement) {
    let { elementId: l, selectedPointsIndices: o, startBindingElement: c, endBindingElement: d } = t.editingLinearElement, s = a.scene.getNonDeletedElementsMap(), u = ee.getElement(l, s);
    if (!u || o == null) return !1;
    if (u.points.length < 2) {
      let h = e.map((m) => m.id === u.id ? ve(m, { isDeleted: !0 }) : m), U = S6(t, h);
      return { elements: h, appState: { ...U, editingLinearElement: null }, captureUpdate: W.IMMEDIATELY };
    }
    let f = { startBindingElement: o != null && o.includes(0) ? null : c, endBindingElement: o != null && o.includes(u.points.length - 1) ? null : d };
    return ee.deletePoints(u, o), { elements: e, appState: { ...t, editingLinearElement: { ...t.editingLinearElement, ...f, selectedPointsIndices: (o == null ? void 0 : o[0]) > 0 ? [o[0] - 1] : [0] } }, captureUpdate: W.IMMEDIATELY };
  }
  let { elements: i, appState: r } = UX(e, t, a);
  return m7(i, i.filter((l) => l.isDeleted)), r = S6(r, i), { elements: i, appState: { ...r, activeTool: _t(t, { type: "selection" }), multiElement: null, activeEmbeddable: null }, captureUpdate: Nt(at(e), t) ? W.IMMEDIATELY : W.EVENTUALLY };
}, keyTest: (e, t, n) => (e.key === P.BACKSPACE || e.key === P.DELETE) && !e[P.CTRL_OR_CMD], PanelComponent: ({ elements: e, appState: t, updateData: n }) => p(Te, { type: "button", icon: sl, title: C("labels.delete"), "aria-label": C("labels.delete"), onClick: () => n(null), visible: Nt(at(e), t) }) }), s0 = (e, t) => e.frameId === t || e.id === t, g9 = (e, t, n) => {
  let a = [], i = [], r = null, l = -1, o = he(n || Ee(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 }));
  for (; ++l < e.length; ) {
    let c = e[l];
    o.get(c.id) ? (i.length && (a = a.concat(i), i = []), a.push(l), r = l + 1) : c.isDeleted && r === l ? (r = l + 1, i.push(l)) : i = [];
  }
  return a;
}, mX = (e) => {
  let t = 0;
  return e.reduce((n, a, i) => (i > 0 && e[i - 1] !== a - 1 && (t = ++t), (n[t] || (n[t] = [])).push(a), n), []);
}, k6 = (e, t, n) => {
  var a, i;
  if ("containerId" in e && e.containerId) {
    let r = Ri.getScene(e).getElement(e.containerId);
    if (r) return n === "left" ? Math.min(t.indexOf(r), t.indexOf(e)) : Math.max(t.indexOf(r), t.indexOf(e));
  } else {
    let r = (i = (a = e.boundElements) == null ? void 0 : a.find((l) => l.type !== "arrow")) == null ? void 0 : i.id;
    if (r) {
      let l = Ri.getScene(e).getElement(r);
      if (l) return n === "left" ? Math.min(t.indexOf(l), t.indexOf(e)) : Math.max(t.indexOf(l), t.indexOf(e));
    }
  }
}, gX = (e, t) => {
  let n = -1, a = -1;
  return e.forEach((i, r) => {
    s0(i, t) && (n === -1 && (n = r), a = r);
  }), n === -1 ? [] : e.slice(n, a + 1);
}, bX = (e, t, n, a, i) => {
  let r = t[n], l = (u) => u.isDeleted ? !1 : i ? u.frameId === i : e.editingGroupId ? u.groupIds.includes(e.editingGroupId) : !0, o = a === "left" ? $r(t, (u) => l(u), Math.max(0, n - 1)) : n8(t, (u) => l(u), n + 1), c = t[o];
  if (!c) return -1;
  if (e.editingGroupId) {
    if ((r == null ? void 0 : r.groupIds.join("")) === (c == null ? void 0 : c.groupIds.join(""))) return k6(c, t, a) ?? o;
    if (!(c != null && c.groupIds.includes(e.editingGroupId))) return -1;
  }
  if (!i && (c.frameId || fe(c))) {
    let u = gX(t, c.frameId || c.id);
    return a === "left" ? t.indexOf(u[0]) : t.indexOf(u[u.length - 1]);
  }
  if (!c.groupIds.length) return k6(c, t, a) ?? o;
  let d = e.editingGroupId ? c.groupIds[c.groupIds.indexOf(e.editingGroupId) - 1] : c.groupIds[c.groupIds.length - 1], s = ot(t, d);
  return s.length ? a === "left" ? t.indexOf(s[0]) : t.indexOf(s[s.length - 1]) : o;
}, b9 = (e, t) => t.reduce((n, a) => {
  let i = e[a];
  return n.set(i.id, i), n;
}, /* @__PURE__ */ new Map()), v9 = (e, t, n) => {
  let a = g9(e, t), i = b9(e, a), r = mX(a);
  n === "right" && (r = r.reverse());
  let l = new Set(a.filter((o) => fe(e[o])).map((o) => e[o].id));
  return r.forEach((o, c) => {
    var v;
    let d = o[0], s = o[o.length - 1], u = n === "left" ? d : s, f = o.some((y) => {
      let w = e[y];
      return w.frameId && l.has(w.frameId);
    }) ? null : (v = e[u]) == null ? void 0 : v.frameId, h = bX(t, e, u, n, f);
    if (h === -1 || u === h) return;
    let U = n === "left" ? e.slice(0, h) : e.slice(0, d), m = e.slice(d, s + 1), g = n === "left" ? e.slice(h, d) : e.slice(s + 1, h + 1), b = n === "left" ? e.slice(s + 1) : e.slice(h + 1);
    e = n === "left" ? [...U, ...m, ...g, ...b] : [...U, ...g, ...m, ...b];
  }), ii(e, i), e;
}, y9 = (e, t, n, a, i) => {
  let r = g9(e, t, i), l = b9(e, r), o = [], c, d;
  if (n === "left") {
    if (a) c = n8(e, (U) => s0(U, a));
    else if (t.editingGroupId) {
      let U = ot(e, t.editingGroupId);
      if (!U.length) return e;
      c = e.indexOf(U[0]);
    } else c = 0;
    d = r[r.length - 1];
  } else {
    if (a) d = $r(e, (U) => s0(U, a));
    else if (t.editingGroupId) {
      let U = ot(e, t.editingGroupId);
      if (!U.length) return e;
      d = e.indexOf(U[U.length - 1]);
    } else d = e.length - 1;
    c = r[0];
  }
  c === -1 && (c = 0);
  for (let U = c; U < d + 1; U++) r.includes(U) || o.push(e[U]);
  let s = Array.from(l.values()), u = e.slice(0, c), f = e.slice(d + 1), h = n === "left" ? [...u, ...s, ...o, ...f] : [...u, ...o, ...s, ...f];
  return ii(h, l), h;
};
function w9(e, t, n, a) {
  let i = he(Ee(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 })), r = { regularElements: [], frameChildren: /* @__PURE__ */ new Map() }, l = /* @__PURE__ */ new Set();
  for (let d of e) i.has(d.id) && fe(d) && l.add(d.id);
  for (let d of e) if (i.has(d.id)) if (fe(d) || d.frameId && l.has(d.frameId)) r.regularElements.push(d);
  else if (!d.frameId) r.regularElements.push(d);
  else {
    let s = r.frameChildren.get(d.frameId) || [];
    s.push(d), r.frameChildren.set(d.frameId, s);
  }
  let o = e, c = Array.from(r.frameChildren.entries());
  for (let [d, s] of c) o = a(e, t, n, d, s);
  return a(o, t, n, null, r.regularElements);
}
var vX = (e, t) => v9(e, t, "left"), yX = (e, t) => v9(e, t, "right"), wX = (e, t) => w9(e, t, "left", y9), EX = (e, t) => w9(e, t, "right", y9), xX = K({ name: "sendBackward", label: "labels.sendBackward", keywords: ["move down", "zindex", "layer"], icon: dm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: vX(e, t), appState: t, captureUpdate: W.IMMEDIATELY }), keyPriority: 40, keyTest: (e) => e[P.CTRL_OR_CMD] && !e.shiftKey && e.code === De.BRACKET_LEFT, PanelComponent: ({ updateData: e, appState: t }) => p("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.sendBackward")}  ${V("CtrlOrCmd+[")}`, children: dm }) }), SX = K({ name: "bringForward", label: "labels.bringForward", keywords: ["move up", "zindex", "layer"], icon: cm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: yX(e, t), appState: t, captureUpdate: W.IMMEDIATELY }), keyPriority: 40, keyTest: (e) => e[P.CTRL_OR_CMD] && !e.shiftKey && e.code === De.BRACKET_RIGHT, PanelComponent: ({ updateData: e, appState: t }) => p("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.bringForward")}  ${V("CtrlOrCmd+]")}`, children: cm }) }), kX = K({ name: "sendToBack", label: "labels.sendToBack", keywords: ["move down", "zindex", "layer"], icon: fm, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: wX(e, t), appState: t, captureUpdate: W.IMMEDIATELY }), keyTest: (e) => Qa ? e[P.CTRL_OR_CMD] && e.altKey && e.code === De.BRACKET_LEFT : e[P.CTRL_OR_CMD] && e.shiftKey && e.code === De.BRACKET_LEFT, PanelComponent: ({ updateData: e, appState: t }) => p("button", { type: "button", className: "zIndexButton", onClick: () => e(null), title: `${C("labels.sendToBack")}  ${V(Qa ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")}`, children: fm }) }), MX = K({ name: "bringToFront", label: "labels.bringToFront", keywords: ["move up", "zindex", "layer"], icon: um, trackEvent: { category: "element" }, perform: (e, t) => ({ elements: EX(e, t), appState: t, captureUpdate: W.IMMEDIATELY }), keyTest: (e) => Qa ? e[P.CTRL_OR_CMD] && e.altKey && e.code === De.BRACKET_RIGHT : e[P.CTRL_OR_CMD] && e.shiftKey && e.code === De.BRACKET_RIGHT, PanelComponent: ({ updateData: e, appState: t }) => p("button", { type: "button", className: "zIndexButton", onClick: (n) => e(null), title: `${C("labels.bringToFront")}  ${V(Qa ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")}`, children: um }) }), CX = K({ name: "selectAll", label: "labels.selectAll", icon: _I, trackEvent: { category: "canvas" }, viewMode: !1, perform: (e, t, n, a) => {
  if (t.editingLinearElement) return !1;
  let i = e.filter((r) => !r.isDeleted && !(J(r) && r.containerId) && !r.locked).reduce((r, l) => (r[l.id] = !0, r), {});
  return { appState: { ...t, ...pn({ editingGroupId: null, selectedElementIds: i }, at(e), t, a), selectedLinearElement: Object.keys(i).length === 1 && me(e[0]) ? new ee(e[0]) : null }, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.A }), IX = (e) => {
  let t = e.slice(), n = /* @__PURE__ */ new Set(), a = (r) => {
    var d, s, u;
    let l = (s = (d = r[0]) == null ? void 0 : d.groupIds) == null ? void 0 : s.join(""), o = [r[0]], c = [];
    for (let f of r.slice(1)) ((u = f.groupIds) == null ? void 0 : u.join("")) === l ? o.push(f) : c.push(f);
    return c.length ? [...o, ...a(c)] : o;
  }, i = /* @__PURE__ */ new Map();
  return t.forEach((r, l) => {
    var o;
    if (!i.has(r.id)) if ((o = r.groupIds) != null && o.length) {
      let c = r.groupIds[r.groupIds.length - 1], d = t.slice(l).filter((s) => {
        var f;
        let u = (f = s == null ? void 0 : s.groupIds) == null ? void 0 : f.some((h) => h === c);
        return u && i.set(s.id, !0), u;
      });
      for (let s of a(d)) n.add(s);
    } else n.add(r);
  }), n.size !== e.length ? (console.error("normalizeGroupElementOrder: lost some elements... bailing!"), e) : [...n];
}, TX = (e) => {
  let t = LM(e), n = e.slice(), a = /* @__PURE__ */ new Set();
  return n.forEach((i, r) => {
    var l, o, c;
    i && ((l = i.boundElements) != null && l.length ? (a.add(i), n[r] = null, i.boundElements.forEach((d) => {
      let s = t.get(d.id);
      s && d.type === "text" && (a.add(s[0]), n[s[1]] = null);
    })) : i.type === "text" && i.containerId && ((c = (o = t.get(i.containerId)) == null ? void 0 : o[0].boundElements) != null && c.find((d) => d.id === i.id)) || (a.add(i), n[r] = null));
  }), a.size !== e.length ? (console.error("normalizeBoundElementsOrder: lost some elements... bailing!"), e) : [...a];
}, _X = (e) => TX(IX(e)), AX = K({ name: "duplicateSelection", label: "labels.duplicateSelection", icon: v1, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  if (t.editingLinearElement) try {
    let r = ee.duplicateSelectedPoints(t, a.scene.getNonDeletedElementsMap());
    return { elements: e, appState: r, captureUpdate: W.IMMEDIATELY };
  } catch {
    return !1;
  }
  let i = DX(e, t);
  if (a.props.onDuplicate && i.elements) {
    let r = a.props.onDuplicate(i.elements, e);
    r && (i.elements = r);
  }
  return { ...i, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.D, PanelComponent: ({ elements: e, appState: t, updateData: n }) => p(Te, { type: "button", icon: v1, title: `${C("labels.duplicateSelection")}  ${V("CtrlOrCmd+D")}`, "aria-label": C("labels.duplicateSelection"), onClick: () => n(null), visible: Nt(at(e), t) }) }), DX = (e, t) => {
  let n = /* @__PURE__ */ new Map(), a = [], i = [], r = /* @__PURE__ */ new Map(), l = /* @__PURE__ */ new Map(), o = he(e), c = (m) => {
    let g = am(m).reduce((b, v) => {
      if (s.has(v.id)) return b;
      s.set(v.id, !0);
      let y = N7(t.editingGroupId, n, v, { x: v.x + Yd / 2, y: v.y + Yd / 2 });
      return s.set(y.id, !0), l.set(y.id, y), r.set(v.id, y.id), i.push(v), a.push(y), b.push(y), b;
    }, []);
    return Array.isArray(m) ? g : g[0] || null;
  };
  e = _X(e);
  let d = he(Ee(e, t, { includeBoundTextElement: !0, includeElementsInFrames: !0 })), s = /* @__PURE__ */ new Map(), u = e.slice(), f = (m, g) => {
    cn(m !== -1, "targetIndex === -1 "), !(!Array.isArray(g) && !g) && u.splice(m + 1, 0, ...am(g));
  }, h = new Set(e.filter((m) => d.has(m.id) && fe(m)).map((m) => m.id));
  for (let m of e) {
    if (s.has(m.id) || !d.has(m.id)) continue;
    let g = w7(t, m);
    if (g) {
      let b = ot(e, g).flatMap((y) => fe(y) ? [...ri(e, y.id), y] : [y]), v = $r(u, (y) => {
        var w;
        return (w = y.groupIds) == null ? void 0 : w.includes(g);
      });
      f(v, c(b));
      continue;
    }
    if (!(m.frameId && h.has(m.frameId))) {
      if (fe(m)) {
        let b = m.id, v = ri(e, b), y = $r(u, (w) => w.frameId === b || w.id === b);
        f(y, c([...v, m]));
        continue;
      }
      if (ta(m)) {
        let b = ye(m, o), v = $r(u, (y) => y.id === m.id || "containerId" in y && y.containerId === m.id);
        b ? f(v, c([m, b])) : f(v, c(m));
        continue;
      }
      if (st(m)) {
        let b = Zt(m, o), v = $r(u, (y) => y.id === m.id || y.id === (b == null ? void 0 : b.id));
        b ? f(v, c([b, m])) : f(v, c(m));
        continue;
      }
      f($r(u, (b) => b.id === m.id), c(m));
    }
  }
  M7(u, i, r), U7(u, i, r), d3(u, i, r);
  let U = zp(a);
  return { elements: u, appState: { ...t, ...pn({ editingGroupId: t.editingGroupId, selectedElementIds: U.reduce((m, g) => (st(g) || (m[g.id] = !0), m), {}) }, at(u), t, null) } };
}, LX = /* @__PURE__ */ new Set(["command_palette", "export"]), rt = (e, t, n, a) => {
  try {
    if (typeof window > "u" || we.VITE_WORKER_ID || we.VITE_APP_ENABLE_TRACKING !== "true" || !LX.has(e) || we.DEV) return;
    we.PROD || console.info("trackEvent", { category: e, action: t, label: n, value: a }), window.sa_event && window.sa_event(t, { category: e, label: n, value: a });
  } catch (i) {
    console.error("error during analytics", i);
  }
}, E9 = It((e, t) => {
  let { title: n, className: a, testId: i, active: r, standalone: l, icon: o, onClick: c } = e;
  return p("button", { type: "button", ref: t, title: n, "data-testid": i, className: ae(a, { standalone: l, active: r }), onClick: c, children: o }, n);
}), si = (e) => p("div", { className: "buttonList", children: e.options.map((t) => e.type === "button" ? p(E9, { icon: t.icon, title: t.text, testId: t.testId, active: t.active ?? e.value === t.value, onClick: (n) => e.onClick(t.value, n) }, t.text) : _("label", { className: ae({ active: e.value === t.value }), title: t.text, children: [p("input", { type: "radio", name: e.group, onChange: () => e.onChange(t.value), checked: e.value === t.value, "data-testid": t.testId }), t.icon] }, t.text)) }), RX = ({ onChange: e, type: t, activeColor: n, topPicks: a }) => {
  let i;
  return t === "elementStroke" && (i = $b), t === "elementBackground" && (i = zb), t === "canvasBackground" && (i = Fb), a && (i = a), i ? p("div", { className: "color-picker__top-picks", children: i.map((r) => p("button", { className: ae("color-picker__button", { active: r === n, "is-transparent": r === "transparent" || !r }), style: { "--swatch-color": r }, type: "button", title: r, onClick: () => e(r), "data-testid": `color-top-pick-${r}`, children: p("div", { className: "color-picker__button-outline" }) }, r)) }) : (console.error("Invalid type for TopPicks"), null);
}, x9 = () => p("div", { style: { width: 1, height: "1rem", backgroundColor: "var(--default-border-color)", margin: "0 auto" } }), Sf = ({ palette: e, color: t }) => {
  for (let [n, a] of Object.entries(e)) if (Array.isArray(a)) {
    let i = a.indexOf(t);
    if (i > -1) return { colorName: n, shade: i };
  } else if (a === t) return { colorName: n, shade: null };
  return null;
}, c0 = [["q", "w", "e", "r", "t"], ["a", "s", "d", "f", "g"], ["z", "x", "c", "v", "b"]].flat(), S9 = ({ color: e, palette: t }) => !Object.values(t).flat().includes(e), PX = (e, t, n) => {
  let a = { elementBackground: "backgroundColor", elementStroke: "strokeColor" }, i = e.filter((l) => {
    if (l.isDeleted) return !1;
    let o = l[a[t]];
    return S9({ color: o, palette: n });
  }), r = /* @__PURE__ */ new Map();
  return i.forEach((l) => {
    let o = l[a[t]];
    r.has(o) ? r.set(o, r.get(o) + 1) : r.set(o, 1);
  }), [...r.entries()].sort((l, o) => o[1] - l[1]).map((l) => l[0]).slice(0, kk);
}, Ro = Kt(null), M6 = (e, t, n) => (e * 299 + t * 587 + n * 114) / 1e3 >= 160 ? "black" : "white", NX = (e, t) => {
  if (t) {
    let r = new Option().style;
    if (r.color = e, r.color) {
      let l = r.color.replace(/^(rgb|rgba)\(/, "").replace(/\)$/, "").replace(/\s/g, "").split(","), o = parseInt(l[0]), c = parseInt(l[1]), d = parseInt(l[2]);
      return M6(o, c, d);
    }
  }
  if (e === "transparent") return "black";
  let n = parseInt(e.substring(1, 3), 16), a = parseInt(e.substring(3, 5), 16), i = parseInt(e.substring(5, 7), 16);
  return M6(n, a, i);
}, OX = ({ color: e, keyLabel: t, isCustomColor: n = !1, isShade: a = !1 }) => _("div", { className: "color-picker__button__hotkey-label", style: { color: NX(e, n) }, children: [a && "", t] }), hU = OX, $X = ({ hex: e, onChange: t, palette: n }) => {
  let a = Sf({ color: e || "transparent", palette: n }), [i, r] = Et(Ro), l = re(null);
  if (Q(() => {
    l.current && i === "shades" && l.current.focus();
  }, [a, i]), a) {
    let { colorName: o, shade: c } = a, d = n[o];
    if (Array.isArray(d)) return p("div", { className: "color-picker-content--default shades", children: d.map((s, u) => _("button", { ref: u === c && i === "shades" ? l : void 0, tabIndex: -1, type: "button", className: ae("color-picker__button color-picker__button--large", { active: u === c }), "aria-label": "Shade", title: `${o} - ${u + 1}`, style: s ? { "--swatch-color": s } : void 0, onClick: () => {
      t(s), r("shades");
    }, children: [p("div", { className: "color-picker__button-outline" }), p(hU, { color: s, keyLabel: u + 1, isShade: !0 })] }, u)) });
  }
  return _("div", { className: "color-picker-content--default", style: { position: "relative" }, tabIndex: -1, children: [p("button", { type: "button", tabIndex: -1, className: "color-picker__button color-picker__button--large color-picker__button--no-focus-visible" }), p("div", { tabIndex: -1, style: { position: "absolute", top: 0, left: 0, right: 0, bottom: 0, display: "flex", alignItems: "center", justifyContent: "center", textAlign: "center", fontSize: "0.75rem" }, children: C("colorPicker.noShades") })] });
}, zX = ({ palette: e, color: t, onChange: n, label: a, activeShade: i }) => {
  let r = Sf({ color: t || "transparent", palette: e }), [l, o] = Et(Ro), c = re(null);
  return Q(() => {
    c.current && l === "baseColors" && c.current.focus();
  }, [r == null ? void 0 : r.colorName, l]), p("div", { className: "color-picker-content--default", children: Object.entries(e).map(([d, s], u) => {
    let f = (Array.isArray(s) ? s[i] : s) || "transparent", h = c0[u], U = C(`colors.${d.replace(/\d+/, "")}`, null, "");
    return _("button", { ref: (r == null ? void 0 : r.colorName) === d ? c : void 0, tabIndex: -1, type: "button", className: ae("color-picker__button color-picker__button--large", { active: (r == null ? void 0 : r.colorName) === d, "is-transparent": f === "transparent" || !f }), onClick: () => {
      n(f), o("baseColors");
    }, title: `${U}${f.startsWith("#") ? ` ${f}` : ""}  ${h}`, "aria-label": `${U}  ${h}`, style: { "--swatch-color": f }, "data-testid": `color-${d}`, children: [p("div", { className: "color-picker__button-outline" }), p(hU, { color: f, keyLabel: h })] }, d);
  }) });
}, FX = zX, BX = ({ colors: e, color: t, onChange: n, label: a }) => {
  let [i, r] = Et(Ro), l = re(null);
  return Q(() => {
    l.current && l.current.focus();
  }, [t, i]), p("div", { className: "color-picker-content--default", children: e.map((o, c) => _("button", { ref: t === o ? l : void 0, tabIndex: -1, type: "button", className: ae("color-picker__button color-picker__button--large", { active: t === o, "is-transparent": o === "transparent" || !o }), onClick: () => {
    n(o), r("custom");
  }, title: o, "aria-label": a, style: { "--swatch-color": o }, children: [p("div", { className: "color-picker__button-outline" }), p(hU, { color: o, keyLabel: c + 1, isCustomColor: !0 })] }, c)) });
}, Oh = (e, t, n) => {
  let a = Math.ceil(n / Ol);
  switch (t = t ?? -1, e) {
    case "ArrowLeft": {
      let i = t - 1;
      return i < 0 ? n - 1 : i;
    }
    case "ArrowRight":
      return (t + 1) % n;
    case "ArrowDown": {
      let i = t + Ol;
      return i >= n ? t % Ol : i;
    }
    case "ArrowUp": {
      let i = t - Ol, r = i < 0 ? Ol * a + i : i;
      return r >= n ? void 0 : r;
    }
  }
}, HX = ({ e, colorObj: t, onChange: n, palette: a, customColors: i, setActiveColorPickerSection: r, activeShade: l }) => {
  if ((t == null ? void 0 : t.shade) != null && ["Digit1", "Digit2", "Digit3", "Digit4", "Digit5"].includes(e.code) && e.shiftKey) {
    let o = Number(e.code.slice(-1)) - 1;
    return n(a[t.colorName][o]), r("shades"), !0;
  }
  if (["1", "2", "3", "4", "5"].includes(e.key) && i[Number(e.key) - 1]) return n(i[Number(e.key) - 1]), r("custom"), !0;
  if (c0.includes(e.key)) {
    let o = c0.indexOf(e.key), c = Object.keys(a)[o], d = a[c], s = Array.isArray(d) ? d[l] : d;
    return n(s), r("baseColors"), !0;
  }
  return !1;
}, XX = ({ event: e, activeColorPickerSection: t, palette: n, color: a, onChange: i, customColors: r, setActiveColorPickerSection: l, updateData: o, activeShade: c, onEyeDropperToggle: d, onEscape: s }) => {
  if (e[P.CTRL_OR_CMD]) return !1;
  if (e.key === P.ESCAPE) return s(e), !0;
  if (e.key === P.ALT) return d(!0), !0;
  if (e.key === P.I) return d(), !0;
  let u = Sf({ color: a, palette: n });
  if (e.key === P.TAB) {
    let f = { custom: !!r.length, baseColors: !0, shades: (u == null ? void 0 : u.shade) != null, hex: !0 }, h = Object.entries(f).reduce((v, [y, w]) => (w && v.push(y), v), []), U = h.indexOf(t), m = e.shiftKey ? -1 : 1, g = U + m > h.length - 1 ? 0 : U + m < 0 ? h.length - 1 : U + m, b = h[g];
    return b && l(b), b === "custom" ? i(r[0]) : b === "baseColors" && (Object.entries(n).find(([v, y]) => Array.isArray(y) ? y.includes(a) : y === a ? v : null) || i(ke.black)), e.preventDefault(), e.stopPropagation(), !0;
  }
  if (HX({ e, colorObj: u, onChange: i, palette: n, customColors: r, setActiveColorPickerSection: l, activeShade: c })) return !0;
  if (t === "shades" && u) {
    let { shade: f } = u, h = Oh(e.key, f, Ol);
    if (h !== void 0) return i(n[u.colorName][h]), !0;
  }
  if (t === "baseColors" && u) {
    let { colorName: f } = u, h = Object.keys(n), U = h.indexOf(f), m = Oh(e.key, U, h.length);
    if (m !== void 0) {
      let g = h[m], b = n[g];
      return i(Array.isArray(b) ? b[c] : b), !0;
    }
  }
  if (t === "custom") {
    let f = r.indexOf(a), h = Oh(e.key, f, r.length);
    if (h !== void 0) {
      let U = r[h];
      return i(U), !0;
    }
  }
  return !1;
}, WX = ({ children: e }) => p("div", { className: "color-picker__heading", children: e }), Rd = WX, VX = ({ color: e, onChange: t, label: n, type: a, elements: i, palette: r, updateData: l, children: o, onEyeDropperToggle: c, onEscape: d }) => {
  let [s] = Z.useState(() => a === "canvasBackground" ? [] : PX(i, a, r)), [u, f] = Et(Ro), h = Sf({ color: e, palette: r });
  Q(() => {
    if (!u) {
      let b = S9({ color: e, palette: r }), v = b && !s.includes(e);
      f(v ? "hex" : b ? "custom" : (h == null ? void 0 : h.shade) != null ? "shades" : "baseColors");
    }
  }, [u, e, r, f, h, s]);
  let [U, m] = oe((h == null ? void 0 : h.shade) ?? (a === "elementBackground" ? rs : is));
  Q(() => {
    (h == null ? void 0 : h.shade) != null && m(h.shade);
    let b = (v) => {
      v.key === P.ALT && c(!1);
    };
    return document.addEventListener("keyup", b, { capture: !0 }), () => {
      document.removeEventListener("keyup", b, { capture: !0 });
    };
  }, [h, c]);
  let g = Z.useRef(null);
  return p("div", { role: "dialog", "aria-modal": "true", "aria-label": C("labels.colorPicker"), children: _("div", { ref: g, onKeyDown: (b) => {
    XX({ event: b, activeColorPickerSection: u, palette: r, color: e, onChange: t, onEyeDropperToggle: c, customColors: s, setActiveColorPickerSection: f, updateData: l, activeShade: U, onEscape: d }) && (b.preventDefault(), b.stopPropagation());
  }, className: "color-picker-content properties-content", tabIndex: -1, children: [!!s.length && _("div", { children: [p(Rd, { children: C("colorPicker.mostUsedCustomColors") }), p(BX, { colors: s, color: e, label: C("colorPicker.mostUsedCustomColors"), onChange: t })] }), _("div", { children: [p(Rd, { children: C("colorPicker.colors") }), p(FX, { color: e, label: n, palette: r, onChange: t, activeShade: U })] }), _("div", { children: [p(Rd, { children: C("colorPicker.shades") }), p($X, { hex: e, onChange: t, palette: r })] }), o] }) });
}, k9 = Z.createContext(null), bn = () => Z.useContext(k9), M9 = (e) => {
  let [t, n] = oe(null), a = Ht(), { theme: i } = bn(), { container: r } = di();
  return _n(() => {
    var l;
    t && (t.className = "", t.classList.add("excalidraw", ...((l = e == null ? void 0 : e.className) == null ? void 0 : l.split(/\s+/)) || []), t.classList.toggle("excalidraw--mobile", a.editor.isMobile), t.classList.toggle("theme--dark", i === Ie.DARK));
  }, [t, i, a.editor.isMobile, e == null ? void 0 : e.className]), _n(() => {
    let l = e != null && e.parentSelector ? r == null ? void 0 : r.querySelector(e.parentSelector) : document.body;
    if (!l) return;
    let o = document.createElement("div");
    return l.appendChild(o), n(o), () => {
      l.removeChild(o);
    };
  }, [r, e == null ? void 0 : e.parentSelector]), t;
};
function pU(e, t, n) {
  Q(() => {
    function a(i) {
      let r = i;
      if (!e.current) return;
      let l = n == null ? void 0 : n(r, e.current);
      if (l !== !0) {
        if (l === !1) return t(r);
        e.current.contains(r.target) || !document.documentElement.contains(r.target) || r.target.closest("[data-radix-portal]") || r.target === document.documentElement && document.body.style.pointerEvents === "none" || r.target.closest("[data-prevent-outside-click]") || t(r);
      }
    }
    return document.addEventListener("pointerdown", a), document.addEventListener("touchstart", a), () => {
      document.removeEventListener("pointerdown", a), document.removeEventListener("touchstart", a);
    };
  }, [e, t, n]);
}
var kf = (e) => {
  let t = re(e);
  return Object.assign(t.current, e), t.current;
}, Mf = Kt(null), GX = ({ onCancel: e, onChange: t, onSelect: n, colorPickerType: a }) => {
  let i = M9({ className: "excalidraw-eye-dropper-backdrop", parentSelector: ".excalidraw-eye-dropper-container" }), r = bn(), l = Lf(), o = ci(), c = Ee(l, r), d = kf({ app: o, onCancel: e, onChange: t, onSelect: n, selectedElements: c }), { container: s } = di();
  Q(() => {
    let f = u.current;
    if (!f || !o.canvas || !i) return;
    let h = !1, U = o.canvas.getContext("2d"), m = ({ clientX: S, clientY: E }) => {
      let M = U.getImageData((S - r.offsetLeft) * window.devicePixelRatio, (E - r.offsetTop) * window.devicePixelRatio, 1, 1).data;
      return _k(M[0], M[1], M[2]);
    }, g = ({ clientX: S, clientY: E, altKey: M }) => {
      f.style.top = `${E + 20}px`, f.style.left = `${S + 20}px`;
      let I = m({ clientX: S, clientY: E });
      h && d.onChange(a, I, d.selectedElements, { altKey: M }), f.style.background = I;
    }, b = () => {
      d.onCancel();
    }, v = (S, E) => {
      d.onSelect(S, E);
    }, y = (S) => {
      h = !0, S.stopImmediatePropagation();
    }, w = (S) => {
      h = !1, s == null || s.focus(), S.stopImmediatePropagation(), S.preventDefault(), v(m(S), S);
    }, x = (S) => {
      S.key === P.ESCAPE && (S.preventDefault(), S.stopImmediatePropagation(), b());
    };
    return i.tabIndex = -1, i.focus(), g({ clientX: d.app.lastViewportPosition.x, clientY: d.app.lastViewportPosition.y, altKey: !1 }), i.addEventListener("keydown", x), i.addEventListener("pointerdown", y), i.addEventListener("pointerup", w), window.addEventListener("pointermove", g, { passive: !0 }), window.addEventListener("blur", b), () => {
      h = !1, i.removeEventListener("keydown", x), i.removeEventListener("pointerdown", y), i.removeEventListener("pointerup", w), window.removeEventListener("pointermove", g), window.removeEventListener("blur", b);
    };
  }, [d, o.canvas, i, a, s, r.offsetLeft, r.offsetTop]);
  let u = re(null);
  return pU(u, () => {
    e();
  }, (f) => !!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")), i ? M0(p("div", { ref: u, className: "excalidraw-eye-dropper-preview" }), i) : null;
}, jX = ({ color: e, onChange: t, label: n, colorPickerType: a }) => {
  let i = Ht(), [r, l] = oe(e), [o, c] = Et(Ro);
  Q(() => {
    l(e);
  }, [e]);
  let d = _e((U) => {
    let m = U.toLowerCase(), g = YX(m);
    g && t(g), l(m);
  }, [t]), s = re(null), u = re(null);
  Q(() => {
    s.current && s.current.focus();
  }, [o]);
  let [f, h] = Et(Mf);
  return Q(() => () => {
    h(null);
  }, [h]), _("div", { className: "color-picker__input-label", children: [p("div", { className: "color-picker__input-hash", children: "#" }), p("input", { ref: o === "hex" ? s : void 0, style: { border: 0, padding: 0 }, spellCheck: !1, className: "color-picker-input", "aria-label": n, onChange: (U) => {
    d(U.target.value);
  }, value: (r || "").replace(/^#/, ""), onBlur: () => {
    l(e);
  }, tabIndex: -1, onFocus: () => c("hex"), onKeyDown: (U) => {
    var m;
    U.key !== P.TAB && (U.key === P.ESCAPE && ((m = u.current) == null || m.focus()), U.stopPropagation());
  } }), !i.editor.isMobile && _(le, { children: [p("div", { style: { width: "1px", height: "1.25rem", backgroundColor: "var(--default-border-color)" } }), p("div", { ref: u, className: ae("excalidraw-eye-dropper-trigger", { selected: f }), onClick: () => h((U) => U ? null : { keepOpenOnAlt: !1, onSelect: (m) => t(m), colorPickerType: a }), title: `${C("labels.eyeDropper")}  ${P.I.toLocaleUpperCase()} or ${V("Alt")} `, children: EI })] })] });
}, wa = Z.forwardRef(({ children: e, padding: t, className: n, style: a }, i) => p("div", { className: ae("Island", n), style: { "--padding": t, ...a }, ref: i, children: e })), C9 = Z.forwardRef(({ className: e, container: t, children: n, style: a, onClose: i, onKeyDown: r, onFocusOutside: l, onPointerLeave: o, onPointerDownOutside: c }, d) => {
  let s = Ht();
  return p(mB, { container: t, children: _(sU, { ref: d, className: ae("focus-visible-none", e), "data-prevent-outside-click": !0, side: s.editor.isMobile && !s.viewport.isLandscape ? "bottom" : "right", align: s.editor.isMobile && !s.viewport.isLandscape ? "center" : "start", alignOffset: -16, sideOffset: 20, style: { zIndex: "var(--zIndex-popup)" }, onPointerLeave: o, onKeyDown: r, onFocusOutside: l, onPointerDownOutside: c, onCloseAutoFocus: (u) => {
    u.stopPropagation(), u.preventDefault(), t && !xM(document.activeElement) && t.focus(), i();
  }, children: [p(wa, { padding: 3, style: a, children: n }), p(B4, { width: 20, height: 10, style: { fill: "var(--popup-bg-color)", filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)" } })] }) });
}), C6 = (e) => {
  let t = new Option().style;
  return t.color = e, !!t.color;
}, YX = (e) => pa(e) ? e : C6(`#${e}`) ? `#${e}` : C6(e) ? e : null, ZX = ({ type: e, color: t, onChange: n, label: a, elements: i, palette: r = ke, updateData: l }) => {
  let { container: o } = di(), [, c] = Et(Ro), [d, s] = Et(Mf), u = _("div", { children: [p(Rd, { children: C("colorPicker.hexCode") }), p(jX, { color: t, label: a, onChange: (U) => {
    n(U);
  }, colorPickerType: e })] }), f = re(null), h = () => {
    var U, m;
    (m = (U = f.current) == null ? void 0 : U.querySelector(".color-picker-content")) == null || m.focus();
  };
  return p(C9, { container: o, style: { maxWidth: "13rem" }, onFocusOutside: (U) => {
    h(), U.preventDefault();
  }, onPointerDownOutside: (U) => {
    d && U.preventDefault();
  }, onClose: () => {
    l({ openPopup: null }), c(null);
  }, children: r ? p(VX, { palette: r, color: t, onChange: (U) => {
    n(U);
  }, onEyeDropperToggle: (U) => {
    s((m) => U ? (m = m || { keepOpenOnAlt: !0, onSelect: n, colorPickerType: e }, m.keepOpenOnAlt = !0, m) : U === !1 || m ? null : { keepOpenOnAlt: !1, onSelect: n, colorPickerType: e });
  }, onEscape: (U) => {
    d ? s(null) : l({ openPopup: null });
  }, label: a, type: e, elements: i, updateData: l, children: u }) : u });
}, KX = ({ label: e, color: t, type: n }) => p(wf, { type: "button", className: ae("color-picker__button active-color properties-trigger", { "is-transparent": t === "transparent" || !t }), "aria-label": e, style: t ? { "--swatch-color": t } : void 0, title: C(n === "elementStroke" ? "labels.showStroke" : "labels.showBackground"), children: p("div", { className: "color-picker__button-outline" }) }), UU = ({ type: e, color: t, onChange: n, label: a, elements: i, palette: r = ke, topPicks: l, updateData: o, appState: c }) => p("div", { children: _("div", { role: "dialog", "aria-modal": "true", className: "color-picker-container", children: [p(RX, { activeColor: t, onChange: n, type: e, topPicks: l }), p(x9, {}), _(yf, { open: c.openPopup === e, onOpenChange: (d) => {
  o({ openPopup: d ? e : null });
}, children: [p(KX, { color: t, label: a, type: e }), c.openPopup === e && p(ZX, { type: e, color: t, onChange: n, label: a, elements: i, palette: r, updateData: o })] })] }) }), Cf = ({ icon: e }) => p("span", { style: { width: "1em", margin: "0 0.5ex 0 0.5ex", display: "inline-block", lineHeight: 0, verticalAlign: "middle" }, children: e }), qX = ({ label: e, open: t, openTrigger: n, children: a, className: i }) => _(le, { children: [_("div", { style: { cursor: "pointer", display: "flex", justifyContent: "space-between", alignItems: "center" }, className: i, onClick: n, children: [e, p(Cf, { icon: t ? VI : A8 })] }), t && p("div", { style: { display: "flex", flexDirection: "column" }, children: a })] }), d0 = qX, JX = Kt(!1);
function QX({ options: e, value: t, label: n, onChange: a, onClose: i, numberOfOptionsToAlwaysShow: r = e.length }) {
  let l = Ht(), o = (h) => {
    let U = e.find((m) => m.keyBinding === h.key.toLowerCase());
    if (!(h.metaKey || h.altKey || h.ctrlKey) && U) a(U.value), h.preventDefault();
    else if (h.key === P.TAB) {
      let m = e.findIndex((b) => b.value === t), g = h.shiftKey ? (e.length + m - 1) % e.length : (m + 1) % e.length;
      a(e[g].value);
    } else if (ls(h.key)) {
      let m = ic().rtl, g = e.findIndex((b) => b.value === t);
      if (g !== -1) {
        let b = e.length, v = g;
        switch (h.key) {
          case (m ? P.ARROW_LEFT : P.ARROW_RIGHT):
            v = (g + 1) % b;
            break;
          case (m ? P.ARROW_RIGHT : P.ARROW_LEFT):
            v = (b + g - 1) % b;
            break;
          case P.ARROW_DOWN: {
            v = (g + (r ?? 1)) % b;
            break;
          }
          case P.ARROW_UP: {
            v = (b + g - (r ?? 1)) % b;
            break;
          }
        }
        a(e[v].value);
      }
      h.preventDefault();
    } else (h.key === P.ESCAPE || h.key === P.ENTER) && (h.preventDefault(), i());
    h.nativeEvent.stopImmediatePropagation(), h.stopPropagation();
  }, [c, d] = Et(JX), s = Z.useMemo(() => e.slice(0, r), [e, r]), u = Z.useMemo(() => e.slice(r), [e, r]);
  Q(() => {
    s.some((h) => h.value === t) || d(!0);
  }, [t, s, d]);
  let f = (h) => p("div", { className: "picker-content", children: h.map((U, m) => _("button", { type: "button", className: ae("picker-option", { active: t === U.value }), onClick: (g) => {
    a(U.value);
  }, title: `${U.text} ${U.keyBinding && ` ${U.keyBinding.toUpperCase()}`}`, "aria-label": U.text || "none", "aria-keyshortcuts": U.keyBinding || void 0, ref: (g) => {
    t === U.value && setTimeout(() => {
      g == null || g.focus();
    }, 0);
  }, children: [U.icon, U.keyBinding && p("span", { className: "picker-keybinding", children: U.keyBinding })] }, U.text)) });
  return p(sU, { side: l.editor.isMobile && !l.viewport.isLandscape ? "top" : "bottom", align: "start", sideOffset: 12, style: { zIndex: "var(--zIndex-popup)" }, onKeyDown: o, children: _("div", { className: "picker", role: "dialog", "aria-modal": "true", "aria-label": n, children: [f(s), u.length > 0 && p(d0, { label: C("labels.more_options"), open: c, openTrigger: () => {
    d((h) => !h);
  }, className: "picker-collapsible", children: f(u) })] }) });
}
function I6({ value: e, label: t, options: n, onChange: a, group: i = "", numberOfOptionsToAlwaysShow: r }) {
  var d;
  let [l, o] = Z.useState(!1), c = Z.useRef(null);
  return p("div", { children: _(yf, { open: l, onOpenChange: (s) => o(s), children: [p(wf, { name: i, type: "button", "aria-label": t, onClick: () => o(!l), ref: c, className: l ? "active" : "", children: (d = n.find((s) => s.value === e)) == null ? void 0 : d.icon }), l && p(QX, { options: n, value: e, label: t, onChange: a, onClose: () => {
    o(!1);
  }, numberOfOptionsToAlwaysShow: r })] }) });
}
var I9 = Z.forwardRef(({ className: e, placeholder: t, onChange: n }, a) => _("div", { className: ae("QuickSearch__wrapper", e), children: [cl, p("input", { ref: a, className: "QuickSearch__input", type: "text", placeholder: t, onChange: (i) => n(i.target.value.trim().toLowerCase()) })] })), T9 = ({ className: e, placeholder: t, children: n }) => {
  let a = !tn.count(n);
  return p("div", { className: ae("ScrollableList__wrapper", e), role: "menu", children: a ? p("div", { className: "empty", children: t }) : n });
}, _9 = ({ children: e, className: t = "", style: n, title: a }) => _("div", { className: `dropdown-menu-group ${t}`, style: n, children: [a && p("p", { className: "dropdown-menu-group-title", children: a }), e] }), u0 = _9;
_9.displayName = "DropdownMenuGroup";
var A9 = Z.createContext({}), D9 = (e = "", t = !1, n = !1) => `dropdown-menu-item dropdown-menu-item-base ${e}
  ${t ? "dropdown-menu-item--selected" : ""} ${n ? "dropdown-menu-item--hovered" : ""}`.trim(), L9 = (e, t) => {
  let n = un(A9);
  return Gu(e, (a) => {
    var r;
    let i = new CustomEvent("menu.itemSelect", { bubbles: !0, cancelable: !0 });
    t == null || t(i), i.defaultPrevented || ((r = n.onSelect) == null || r.call(n, i));
  });
}, eW = ({ textStyle: e, icon: t, shortcut: n, children: a }) => {
  let i = Ht();
  return _(le, { children: [t && p("div", { className: "dropdown-menu-item__icon", children: t }), p("div", { style: e, className: "dropdown-menu-item__text", children: a }), n && !i.editor.isMobile && p("div", { className: "dropdown-menu-item__shortcut", children: n })] });
}, R9 = eW, mU = ({ icon: e, value: t, order: n, children: a, shortcut: i, className: r, hovered: l, selected: o, textStyle: c, onSelect: d, onClick: s, ...u }) => {
  let f = L9(s, d), h = re(null);
  return Q(() => {
    var U, m;
    l && (n === 0 ? (U = h.current) == null || U.scrollIntoView({ block: "end" }) : (m = h.current) == null || m.scrollIntoView({ block: "nearest" }));
  }, [l, n]), p("button", { ...u, ref: h, value: t, onClick: f, className: D9(r, o, l), title: u.title ?? u["aria-label"], children: p(R9, { textStyle: c, icon: e, shortcut: i, children: a }) });
};
mU.displayName = "DropdownMenuItem";
var fs = { GREEN: "green", RED: "red", BLUE: "blue" }, gU = ({ type: e = fs.BLUE, children: t }) => {
  let { theme: n } = Cc(), a = { display: "inline-flex", marginLeft: "auto", padding: "2px 4px", borderRadius: 6, fontSize: 9, fontFamily: "Cascadia, monospace", border: n === Ie.LIGHT ? "1.5px solid white" : "none" };
  switch (e) {
    case fs.GREEN:
      Object.assign(a, { backgroundColor: "var(--background-color-badge)", color: "var(--color-badge)" });
      break;
    case fs.RED:
      Object.assign(a, { backgroundColor: "pink", color: "darkred" });
      break;
    case fs.BLUE:
    default:
      Object.assign(a, { background: "var(--color-promo)", color: "var(--color-surface-lowest)" });
  }
  return p("div", { className: "DropDownMenuItemBadge", style: a, children: t });
};
gU.displayName = "DropdownMenuItemBadge";
mU.Badge = gU;
var aa = mU, tW = ({ event: e, inputRef: t, hoveredFont: n, filteredFonts: a, onClose: i, onSelect: r, onHover: l }) => {
  var o, c, d;
  if (!e[P.CTRL_OR_CMD] && e.shiftKey && e.key.toLowerCase() === P.F) return (o = t.current) == null || o.focus(), !0;
  if (e.key === P.ESCAPE) return i(), !0;
  if (e.key === P.ENTER) return n != null && n.value && r(n.value), !0;
  if (e.key === P.ARROW_DOWN) return n != null && n.next ? l(n.next.value) : (c = a[0]) != null && c.value && l(a[0].value), !0;
  if (e.key === P.ARROW_UP) return n != null && n.prev ? l(n.prev.value) : (d = a[a.length - 1]) != null && d.value && l(a[a.length - 1].value), !0;
}, nW = Z.memo(({ selectedFontFamily: e, hoveredFontFamily: t, onSelect: n, onHover: a, onLeave: i, onOpen: r, onClose: l }) => {
  let { container: o } = di(), { fonts: c } = ci(), { showDeprecatedFonts: d } = Mc(), [s, u] = oe(""), f = re(null), h = $e(() => Array.from(Mi.registered.entries()).filter(([M, { metadata: I }]) => !I.serverSide && !I.fallback).map(([M, { metadata: I, fontFaces: T }]) => {
    var D, R;
    let A = { value: M, icon: I.icon ?? iu, text: ((R = (D = T[0]) == null ? void 0 : D.fontFace) == null ? void 0 : R.family) ?? "Unknown" };
    return I.deprecated && Object.assign(A, { deprecated: I.deprecated, badge: { type: fs.RED, placeholder: C("fontList.badge.old") } }), A;
  }).sort((M, I) => M.text.toLowerCase() > I.text.toLowerCase() ? 1 : -1), []), U = $e(() => new Set(c.getSceneFamilies()), [e]), m = $e(() => h.filter((M) => U.has(M.value)), [h, U]), g = $e(() => h.filter((M) => !U.has(M.value) && (d || !M.deprecated)), [h, U, d]), b = $e(() => RM([...m, ...g].filter((M) => {
    var I;
    return (I = M.text) == null ? void 0 : I.toLowerCase().includes(s);
  })), [m, g, s]), v = $e(() => {
    var I;
    let M;
    return t ? M = b.find((T) => T.value === t) : e && (M = b.find((T) => T.value === e)), !M && s && ((I = b[0]) != null && I.value ? a(b[0].value) : i()), M;
  }, [t, e, s, b, a, i]), y = _e((M) => {
    tW({ event: M, inputRef: f, hoveredFont: v, filteredFonts: b, onSelect: n, onHover: a, onClose: l }) && (M.preventDefault(), M.stopPropagation());
  }, [v, b, n, a, l]);
  Q(() => (r(), () => {
    l();
  }), []);
  let w = $e(() => b.filter((M) => U.has(M.value)), [b, U]), x = $e(() => b.filter((M) => !U.has(M.value)), [b, U]), S = (M, I) => _(aa, { icon: M.icon, value: M.value, order: I, textStyle: { fontFamily: lo({ fontFamily: M.value }) }, hovered: M.value === (v == null ? void 0 : v.value), selected: M.value === e, tabIndex: M.value === e ? 0 : -1, onClick: (T) => {
    n(Number(T.currentTarget.value));
  }, onMouseMove: () => {
    (v == null ? void 0 : v.value) !== M.value && a(M.value);
  }, children: [M.text, M.badge && p(gU, { type: M.badge.type, children: M.badge.placeholder })] }, M.value), E = [];
  return w.length && E.push(p(u0, { title: C("fontList.sceneFonts"), children: w.map(S) }, "group_1")), x.length && E.push(p(u0, { title: C("fontList.availableFonts"), children: x.map((M, I) => S(M, I + w.length)) }, "group_2")), _(C9, { className: "properties-content", container: o, style: { width: "15rem" }, onClose: l, onPointerLeave: i, onKeyDown: y, children: [p(I9, { ref: f, placeholder: C("quickSearch.placeholder"), onChange: oo(u, 20) }), p(T9, { className: "dropdown-menu fonts manual-hover", placeholder: C("fontList.empty"), children: E.length ? E : null })] });
}, (e, t) => e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily), aW = ({ selectedFontFamily: e }) => {
  let t = $e(() => !!(e && !rW(e)), [e]);
  return p(wf, { asChild: !0, children: p("div", { children: p(E9, { standalone: !0, icon: U8, title: C("labels.showFonts"), className: "properties-trigger", testId: "font-family-show-fonts", active: t, onClick: () => {
  } }) }) });
}, P9 = [{ value: ht.Excalifont, icon: Vs, text: C("labels.handDrawn"), testId: "font-family-hand-drawn" }, { value: ht.Nunito, icon: iu, text: C("labels.normal"), testId: "font-family-normal" }, { value: ht["Comic Shanns"], icon: x1, text: C("labels.code"), testId: "font-family-code" }], iW = new Set(P9.map((e) => e.value)), rW = (e) => e ? iW.has(e) : !1, lW = Z.memo(({ isOpened: e, selectedFontFamily: t, hoveredFontFamily: n, onSelect: a, onHover: i, onLeave: r, onPopupChange: l }) => {
  let o = $e(() => P9, []), c = _e((d) => {
    d && a(d);
  }, [a]);
  return _("div", { role: "dialog", "aria-modal": "true", className: "FontPicker__container", children: [p(si, { type: "button", options: o, value: t, onClick: c }), p(x9, {}), _(yf, { open: e, onOpenChange: l, children: [p(aW, { selectedFontFamily: t }), e && p(nW, { selectedFontFamily: t, hoveredFontFamily: n, onSelect: c, onHover: i, onLeave: r, onOpen: () => l(!0), onClose: () => l(!1) })] })] });
}, (e, t) => e.isOpened === t.isOpened && e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily), oW = ({ updateData: e, appState: t, elements: n, testId: a }) => {
  let i = Z.useRef(null), r = Z.useRef(null), l = gn(n, t, (o) => o.opacity, !0, t.currentItemOpacity);
  return Q(() => {
    if (i.current && r.current) {
      let o = i.current, c = r.current, d = o.offsetWidth, s = 15, u = l / 100 * (d - s) + s / 2;
      c.style.left = `${u}px`, o.style.background = `linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${l}%, var(--button-bg) ${l}%, var(--button-bg) 100%)`;
    }
  }, [l]), _("label", { className: "control-label", children: [C("labels.opacity"), _("div", { className: "range-wrapper", children: [p("input", { ref: i, type: "range", min: "0", max: "100", step: "10", onChange: (o) => {
    e(+o.target.value);
  }, value: l, className: "range-input", "data-testid": a }), p("div", { className: "value-bubble", ref: r, children: l !== 0 ? l : null }), p("div", { className: "zero-label", children: "0" })] })] });
}, N9 = 0.1, mn = (e, t, n, a = !1) => {
  let i = he(Ee(e, t, { includeBoundTextElement: a }));
  return e.map((r) => {
    var l;
    return i.get(r.id) || r.id === ((l = t.editingTextElement) == null ? void 0 : l.id) ? n(r) : r;
  });
}, gn = function(e, t, n, a, i) {
  let r = t.editingTextElement, l = at(e), o = null;
  return r && (o = n(r)), o || (Nt(l, t) ? o = nO(a === !0 ? l : l.filter((c) => a(c)), t, n) ?? (typeof i == "function" ? i(!0) : i) : o = typeof i == "function" ? i(!1) : i), o;
}, sW = (e, t) => st(t) || !t.autoResize ? t : G(t, { x: e.textAlign === "left" ? e.x : e.x + (e.width - t.width) / (e.textAlign === "center" ? 2 : 1), y: e.y + (e.height - t.height) / 2 }, !1), bU = (e, t, n, a, i) => {
  let r = /* @__PURE__ */ new Set(), l = mn(e, t, (c) => {
    if (J(c)) {
      let d = a(c);
      r.add(d);
      let s = ve(c, { fontSize: d });
      return Un(s, n.scene.getContainerElement(c), n.scene.getNonDeletedElementsMap()), s = sW(c, s), s;
    }
    return c;
  }, !0), o = he(l);
  return Ee(e, t, { includeBoundTextElement: !0 }).forEach((c) => {
    J(c) && In(c, o);
  }), { elements: l, appState: { ...t, currentItemFontSize: r.size === 1 ? [...r][0] : i ?? t.currentItemFontSize }, captureUpdate: W.IMMEDIATELY };
};
K({ name: "changeStrokeColor", label: "labels.stroke", trackEvent: !1, perform: (e, t, n) => ({ ...n.currentItemStrokeColor && { elements: mn(e, t, (a) => I1(a.type) ? ve(a, { strokeColor: n.currentItemStrokeColor }) : a, !0) }, appState: { ...t, ...n }, captureUpdate: n.currentItemStrokeColor ? W.IMMEDIATELY : W.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => _(le, { children: [p("h3", { "aria-hidden": "true", children: C("labels.stroke") }), p(UU, { topPicks: $b, palette: Ck, type: "elementStroke", label: C("labels.stroke"), color: gn(e, t, (i) => i.strokeColor, !0, t.currentItemStrokeColor), onChange: (i) => n({ currentItemStrokeColor: i }), elements: e, appState: t, updateData: n })] }) });
K({ name: "changeBackgroundColor", label: "labels.changeBackground", trackEvent: !1, perform: (e, t, n) => ({ ...n.currentItemBackgroundColor && { elements: mn(e, t, (a) => ve(a, { backgroundColor: n.currentItemBackgroundColor })) }, appState: { ...t, ...n }, captureUpdate: n.currentItemBackgroundColor ? W.IMMEDIATELY : W.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => _(le, { children: [p("h3", { "aria-hidden": "true", children: C("labels.background") }), p(UU, { topPicks: zb, palette: Ik, type: "elementBackground", label: C("labels.background"), color: gn(e, t, (i) => i.backgroundColor, !0, t.currentItemBackgroundColor), onChange: (i) => n({ currentItemBackgroundColor: i }), elements: e, appState: t, updateData: n })] }) });
K({ name: "changeFillStyle", label: "labels.fill", trackEvent: !1, perform: (e, t, n, a) => (rt("element", "changeFillStyle", `${n} (${a.device.editor.isMobile ? "mobile" : "desktop"})`), { elements: mn(e, t, (i) => ve(i, { fillStyle: n })), appState: { ...t, currentItemFillStyle: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = Ee(e, t), i = a.length > 0 && a.every((r) => r.fillStyle === "zigzag");
  return _("fieldset", { children: [p("legend", { children: C("labels.fill") }), p(si, { type: "button", options: [{ value: "hachure", text: `${C(i ? "labels.zigzag" : "labels.hachure")} (${V("Alt-Click")})`, icon: i ? PC : NC, active: i ? !0 : void 0, testId: "fill-hachure" }, { value: "cross-hatch", text: C("labels.crossHatch"), icon: OC, testId: "fill-cross-hatch" }, { value: "solid", text: C("labels.solid"), icon: $C, testId: "fill-solid" }], value: gn(e, t, (r) => r.fillStyle, (r) => r.hasOwnProperty("fillStyle"), (r) => r ? null : t.currentItemFillStyle), onClick: (r, l) => {
    let o = l.altKey && r === "hachure" && a.every((c) => c.fillStyle === "hachure") ? "zigzag" : r;
    n(o);
  } })] });
} });
K({ name: "changeStrokeWidth", label: "labels.strokeWidth", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => ve(a, { strokeWidth: n })), appState: { ...t, currentItemStrokeWidth: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => _("fieldset", { children: [p("legend", { children: C("labels.strokeWidth") }), p(si, { group: "stroke-width", options: [{ value: eh.thin, text: C("labels.thin"), icon: E8, testId: "strokeWidth-thin" }, { value: eh.bold, text: C("labels.bold"), icon: zC, testId: "strokeWidth-bold" }, { value: eh.extraBold, text: C("labels.extraBold"), icon: FC, testId: "strokeWidth-extraBold" }], value: gn(e, t, (a) => a.strokeWidth, (a) => a.hasOwnProperty("strokeWidth"), (a) => a ? null : t.currentItemStrokeWidth), onChange: (a) => n(a) })] }) });
K({ name: "changeSloppiness", label: "labels.sloppiness", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => ve(a, { seed: ni(), roughness: n })), appState: { ...t, currentItemRoughness: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => _("fieldset", { children: [p("legend", { children: C("labels.sloppiness") }), p(si, { group: "sloppiness", options: [{ value: 0, text: C("labels.architect"), icon: XC }, { value: 1, text: C("labels.artist"), icon: WC }, { value: 2, text: C("labels.cartoonist"), icon: VC }], value: gn(e, t, (a) => a.roughness, (a) => a.hasOwnProperty("roughness"), (a) => a ? null : t.currentItemRoughness), onChange: (a) => n(a) })] }) });
K({ name: "changeStrokeStyle", label: "labels.strokeStyle", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => ve(a, { strokeStyle: n })), appState: { ...t, currentItemStrokeStyle: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => _("fieldset", { children: [p("legend", { children: C("labels.strokeStyle") }), p(si, { group: "strokeStyle", options: [{ value: "solid", text: C("labels.strokeStyle_solid"), icon: E8 }, { value: "dashed", text: C("labels.strokeStyle_dashed"), icon: BC }, { value: "dotted", text: C("labels.strokeStyle_dotted"), icon: HC }], value: gn(e, t, (a) => a.strokeStyle, (a) => a.hasOwnProperty("strokeStyle"), (a) => a ? null : t.currentItemStrokeStyle), onChange: (a) => n(a) })] }) });
K({ name: "changeOpacity", label: "labels.opacity", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => ve(a, { opacity: n }), !0), appState: { ...t, currentItemOpacity: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => p(oW, { updateData: n, elements: e, appState: t, testId: "opacity" }) });
K({ name: "changeFontSize", label: "labels.fontSize", trackEvent: !1, perform: (e, t, n, a) => bU(e, t, a, () => n, n), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => _("fieldset", { children: [p("legend", { children: C("labels.fontSize") }), p(si, { group: "font-size", options: [{ value: 16, text: C("labels.small"), icon: lI, testId: "fontSize-small" }, { value: 20, text: C("labels.medium"), icon: oI, testId: "fontSize-medium" }, { value: 28, text: C("labels.large"), icon: sI, testId: "fontSize-large" }, { value: 36, text: C("labels.veryLarge"), icon: cI, testId: "fontSize-veryLarge" }], value: gn(e, t, (i) => {
  if (J(i)) return i.fontSize;
  let r = ye(i, a.scene.getNonDeletedElementsMap());
  return r ? r.fontSize : null;
}, (i) => J(i) || ye(i, a.scene.getNonDeletedElementsMap()) !== null, (i) => i ? null : t.currentItemFontSize || Fi), onChange: (i) => n(i) })] }) });
var T6 = K({ name: "decreaseFontSize", label: "labels.decreaseFontSize", icon: Ku, trackEvent: !1, perform: (e, t, n, a) => bU(e, t, a, (i) => Math.round(1 / (1 + N9) * i.fontSize)), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && (e.key === P.CHEVRON_LEFT || e.key === P.COMMA) }), _6 = K({ name: "increaseFontSize", label: "labels.increaseFontSize", icon: Ku, trackEvent: !1, perform: (e, t, n, a) => bU(e, t, a, (i) => Math.round(i.fontSize * (1 + N9))), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && (e.key === P.CHEVRON_RIGHT || e.key === P.PERIOD) });
K({ name: "changeFontFamily", label: "labels.fontFamily", trackEvent: !1, perform: (e, t, n, a) => {
  var U;
  let { cachedElements: i, resetAll: r, resetContainers: l, ...o } = n;
  if (r) return { elements: mn(e, t, (m) => {
    let g = i == null ? void 0 : i.get(m.id);
    return g ? ve(m, { ...g }) : m;
  }, !0), appState: { ...t, ...o }, captureUpdate: W.NEVER };
  let { currentItemFontFamily: c, currentHoveredFontFamily: d } = n, s = W.EVENTUALLY, u, f = !1;
  if (c) u = c, s = W.IMMEDIATELY;
  else if (d) {
    u = d, s = W.EVENTUALLY;
    let m = Ee(e, t, { includeBoundTextElement: !0 }).filter((g) => J(g));
    if (m.length > 200) f = !0;
    else {
      let g = 0, b = 0;
      for (; g < m.length && b < 5e3; ) {
        let v = m[g];
        b += (v == null ? void 0 : v.originalText.length) || 0, g++;
      }
      b > 5e3 && (f = !0);
    }
  }
  let h = { appState: { ...t, ...o }, captureUpdate: s };
  if (u && !f) {
    let m = /* @__PURE__ */ new Map(), g = /* @__PURE__ */ new Set(), b = !1, v = Array.from(Mi.loadedFontsCache.values()), y = (U = Object.entries(ht).find(([S, E]) => E === u)) == null ? void 0 : U[0];
    d && y && v.some((S) => S.startsWith(y)) && (b = !0), Object.assign(h, { elements: mn(e, t, (S) => {
      if (J(S) && (S.fontFamily !== u || c)) {
        let E = ve(S, { fontFamily: u, lineHeight: dl(u) }), M = (i == null ? void 0 : i.get(S.containerId || "")) || {}, I = a.scene.getContainerElement(S);
        return l && I && M && G(I, { ...M }, !1), b || (g = /* @__PURE__ */ new Set([...g, ...Array.from(E.originalText)])), m.set(E, I), E;
      }
      return S;
    }, !0) });
    let w = `10px ${lo({ fontFamily: u })}`, x = Array.from(g.values()).join();
    if (b || window.document.fonts.check(w, x)) for (let [S, E] of m) Un(S, E, a.scene.getNonDeletedElementsMap(), !1);
    else window.document.fonts.load(w, x).then((S) => {
      for (let [E, M] of m) {
        let I = a.scene.getElement(E.id), T = M ? a.scene.getElement(M.id) : null;
        I && Un(I, T, a.scene.getNonDeletedElementsMap(), !1);
      }
      a.fonts.onLoaded(S);
    });
  }
  return h;
}, PanelComponent: ({ elements: e, appState: t, app: n, updateData: a }) => {
  let i = re(/* @__PURE__ */ new Map()), r = re(null), [l, o] = oe({}), c = re(!0), d = $e(() => {
    var u;
    let s = (f, h) => gn(f, t, (U) => {
      if (J(U)) return U.fontFamily;
      let m = ye(U, h);
      return m ? m.fontFamily : null;
    }, (U) => J(U) || ye(U, h) !== null, (U) => U ? null : t.currentItemFontFamily || Er);
    return l.openPopup === "fontFamily" && t.openPopup === "fontFamily" ? s(Array.from(((u = i.current) == null ? void 0 : u.values()) ?? []), i.current) : !l.openPopup && t.openPopup !== "fontFamily" ? s(e, n.scene.getNonDeletedElementsMap()) : r.current;
  }, [l.openPopup, t, e, n.scene]);
  return Q(() => {
    r.current = d;
  }, [d]), Q(() => {
    Object.keys(l).length && (a(l), o({}));
  }, [l]), Q(() => (c.current = !1, () => {
    c.current = !0;
  }), []), _("fieldset", { children: [p("legend", { children: C("labels.fontFamily") }), p(lW, { isOpened: t.openPopup === "fontFamily", selectedFontFamily: d, hoveredFontFamily: t.currentHoveredFontFamily, onSelect: (s) => {
    o({ openPopup: null, currentHoveredFontFamily: null, currentItemFontFamily: s }), i.current.clear();
  }, onHover: (s) => {
    o({ currentHoveredFontFamily: s, cachedElements: new Map(i.current), resetContainers: !0 });
  }, onLeave: () => {
    o({ currentHoveredFontFamily: null, cachedElements: new Map(i.current), resetAll: !0 });
  }, onPopupChange: (s) => {
    if (s) {
      i.current.clear();
      let { editingTextElement: u } = t;
      if ((u == null ? void 0 : u.type) === "text") {
        let f = n.scene.getElement(u.id);
        i.current.set(u.id, ve(f || u, {}, !0));
      } else {
        let f = Ee(e, t, { includeBoundTextElement: !0 });
        for (let h of f) i.current.set(h.id, ve(h, {}, !0));
      }
      o({ openPopup: "fontFamily" });
    } else {
      let u = { openPopup: null, currentHoveredFontFamily: null, cachedElements: new Map(i.current), resetAll: !0 };
      c.current ? a({ ...l, ...u }) : o(u), i.current.clear();
    }
  } })] });
} });
K({ name: "changeTextAlign", label: "Change text alignment", trackEvent: !1, perform: (e, t, n, a) => ({ elements: mn(e, t, (i) => {
  if (J(i)) {
    let r = ve(i, { textAlign: n });
    return Un(r, a.scene.getContainerElement(i), a.scene.getNonDeletedElementsMap()), r;
  }
  return i;
}, !0), appState: { ...t, currentItemTextAlign: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => {
  let i = a.scene.getNonDeletedElementsMap();
  return _("fieldset", { children: [p("legend", { children: C("labels.textAlign") }), p(si, { group: "text-align", options: [{ value: "left", text: C("labels.left"), icon: uI, testId: "align-left" }, { value: "center", text: C("labels.center"), icon: fI, testId: "align-horizontal-center" }, { value: "right", text: C("labels.right"), icon: hI, testId: "align-right" }], value: gn(e, t, (r) => {
    if (J(r)) return r.textAlign;
    let l = ye(r, i);
    return l ? l.textAlign : null;
  }, (r) => J(r) || ye(r, i) !== null, (r) => r ? null : t.currentItemTextAlign), onChange: (r) => n(r) })] });
} });
K({ name: "changeVerticalAlign", label: "Change vertical alignment", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: mn(e, t, (i) => {
  if (J(i)) {
    let r = ve(i, { verticalAlign: n });
    return Un(r, a.scene.getContainerElement(i), a.scene.getNonDeletedElementsMap()), r;
  }
  return i;
}, !0), appState: { ...t }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p("fieldset", { children: p(si, { group: "text-align", options: [{ value: Pn.TOP, text: C("labels.alignTop"), icon: p(pI, { theme: t.theme }), testId: "align-top" }, { value: Pn.MIDDLE, text: C("labels.centerVertically"), icon: p(mI, { theme: t.theme }), testId: "align-middle" }, { value: Pn.BOTTOM, text: C("labels.alignBottom"), icon: p(UI, { theme: t.theme }), testId: "align-bottom" }], value: gn(e, t, (i) => {
  if (J(i) && i.containerId) return i.verticalAlign;
  let r = ye(i, a.scene.getNonDeletedElementsMap());
  return r ? r.verticalAlign : null;
}, (i) => J(i) || ye(i, a.scene.getNonDeletedElementsMap()) !== null, (i) => i ? null : Pn.MIDDLE), onChange: (i) => n(i) }) }) });
K({ name: "changeRoundness", label: "Change edge roundness", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => te(a) ? a : ve(a, { roundness: n === "round" ? { type: To(a.type) ? Pt.ADAPTIVE_RADIUS : Pt.PROPORTIONAL_RADIUS } : null })), appState: { ...t, currentItemRoundness: n }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = g3(at(e), t).some((i) => {
    var r;
    return ((r = i.roundness) == null ? void 0 : r.type) === Pt.LEGACY;
  });
  return _("fieldset", { children: [p("legend", { children: C("labels.edges") }), p(si, { group: "edges", options: [{ value: "sharp", text: C("labels.sharp"), icon: GC }, { value: "round", text: C("labels.round"), icon: jC }], value: gn(e, t, (i) => a ? null : i.roundness ? "round" : "sharp", (i) => !xe(i) && i.hasOwnProperty("roundness"), (i) => i ? null : t.currentItemRoundness), onChange: (i) => n(i) })] });
} });
var A6 = (e) => [{ value: null, text: C("labels.arrowhead_none"), keyBinding: "q", icon: YC }, { value: "arrow", text: C("labels.arrowhead_arrow"), keyBinding: "w", icon: p(ZC, { flip: e }) }, { value: "triangle", text: C("labels.arrowhead_triangle"), icon: p(QC, { flip: e }), keyBinding: "e" }, { value: "triangle_outline", text: C("labels.arrowhead_triangle_outline"), icon: p(eI, { flip: e }), keyBinding: "r" }, { value: "circle", text: C("labels.arrowhead_circle"), keyBinding: "a", icon: p(KC, { flip: e }) }, { value: "circle_outline", text: C("labels.arrowhead_circle_outline"), keyBinding: "s", icon: p(qC, { flip: e }) }, { value: "diamond", text: C("labels.arrowhead_diamond"), icon: p(tI, { flip: e }), keyBinding: "d" }, { value: "diamond_outline", text: C("labels.arrowhead_diamond_outline"), icon: p(nI, { flip: e }), keyBinding: "f" }, { value: "bar", text: C("labels.arrowhead_bar"), keyBinding: "z", icon: p(JC, { flip: e }) }, { value: "crowfoot_one", text: C("labels.arrowhead_crowfoot_one"), icon: p(iI, { flip: e }), keyBinding: "c" }, { value: "crowfoot_many", text: C("labels.arrowhead_crowfoot_many"), icon: p(aI, { flip: e }), keyBinding: "x" }, { value: "crowfoot_one_or_many", text: C("labels.arrowhead_crowfoot_one_or_many"), icon: p(rI, { flip: e }), keyBinding: "v" }];
K({ name: "changeArrowhead", label: "Change arrowheads", trackEvent: !1, perform: (e, t, n) => ({ elements: mn(e, t, (a) => {
  if (me(a)) {
    let { position: i, type: r } = n;
    if (i === "start") return ve(a, { startArrowhead: r });
    if (i === "end") return ve(a, { endArrowhead: r });
  }
  return a;
}), appState: { ...t, [n.position === "start" ? "currentItemStartArrowhead" : "currentItemEndArrowhead"]: n.type }, captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = ic().rtl;
  return _("fieldset", { children: [p("legend", { children: C("labels.arrowheads") }), _("div", { className: "iconSelectList buttonList", children: [p(I6, { label: "arrowhead_start", options: A6(!a), value: gn(e, t, (i) => me(i) && ou(i.type) ? i.startArrowhead : t.currentItemStartArrowhead, !0, t.currentItemStartArrowhead), onChange: (i) => n({ position: "start", type: i }), numberOfOptionsToAlwaysShow: 4 }), p(I6, { label: "arrowhead_end", group: "arrowheads", options: A6(!!a), value: gn(e, t, (i) => me(i) && ou(i.type) ? i.endArrowhead : t.currentItemEndArrowhead, !0, t.currentItemEndArrowhead), onChange: (i) => n({ position: "end", type: i }), numberOfOptionsToAlwaysShow: 4 })] })] });
} });
K({ name: "changeArrowType", label: "Change arrow types", trackEvent: !1, perform: (e, t, n, a) => {
  var o;
  let i = mn(e, t, (c) => {
    if (!xe(c)) return c;
    let d = ve(c, { roundness: n === Gt.round ? { type: Pt.PROPORTIONAL_RADIUS } : null, elbowed: n === Gt.elbow, points: n === Gt.elbow || c.elbowed ? [c.points[0], c.points[c.points.length - 1]] : c.points });
    if (te(d)) {
      let s = a.scene.getNonDeletedElementsMap();
      a.dismissLinearEditor();
      let u = ee.getPointAtIndexGlobalCoordinates(d, 0, s), f = ee.getPointAtIndexGlobalCoordinates(d, -1, s), h = !d.startBinding && Ua(ha(u), e, s, t.zoom, !1, !0), U = !d.endBinding && Ua(ha(f), e, s, t.zoom, !1, !0), m = h || d.startBinding && s.get(d.startBinding.elementId), g = U || d.endBinding && s.get(d.endBinding.elementId), b = h ? js(d, h, "start") : u, v = U ? js(d, U, "end") : f;
      h && ti(d, h, "start", s), U && ti(d, U, "end", s), G(d, { points: [b, v].map((y) => k(y[0] - d.x, y[1] - d.y)), ...m && d.startBinding ? { startBinding: { ...d.startBinding, ...du(d, m, "start") } } : {}, ...g && d.endBinding ? { endBinding: { ...d.endBinding, ...du(d, g, "end") } } : {} }), ee.updateEditorMidPointsCache(d, s, a.state);
    }
    return d;
  }), r = { ...t, currentItemArrowType: n }, l = (o = t.selectedLinearElement) == null ? void 0 : o.elementId;
  if (l) {
    let c = i.find((d) => d.id === l);
    c && (r.selectedLinearElement = new ee(c));
  }
  return { elements: i, appState: r, captureUpdate: W.IMMEDIATELY };
}, PanelComponent: ({ elements: e, appState: t, updateData: n }) => _("fieldset", { children: [p("legend", { children: C("labels.arrowtypes") }), p(si, { group: "arrowtypes", options: [{ value: Gt.sharp, text: C("labels.arrowtype_sharp"), icon: HI, testId: "sharp-arrow" }, { value: Gt.round, text: C("labels.arrowtype_round"), icon: WI, testId: "round-arrow" }, { value: Gt.elbow, text: C("labels.arrowtype_elbowed"), icon: XI, testId: "elbow-arrow" }], value: gn(e, t, (a) => xe(a) ? a.elbowed ? Gt.elbow : a.roundness ? Gt.round : Gt.sharp : null, (a) => xe(a), (a) => a ? null : t.currentItemArrowType), onChange: (a) => n(a) })] }) });
var Gr = ({ viewportX: e, viewportY: t, nextZoom: n }, a) => {
  let i = e - a.offsetLeft, r = t - a.offsetTop, l = a.zoom.value, o = a.scrollX + (i - i / l), c = a.scrollY + (r - r / l), d = -(i - i / n), s = -(r - r / n);
  return { scrollX: o + d, scrollY: c + s, zoom: { value: n } };
}, Cs = () => {
  let e = document.querySelector(".excalidraw-tooltip");
  if (e) return e;
  let t = document.createElement("div");
  return document.body.appendChild(t), t.classList.add("excalidraw-tooltip"), t;
}, O9 = (e, t, n = "bottom") => {
  let a = e.getBoundingClientRect(), i = window.innerWidth, r = window.innerHeight, l = 5, o = t.left + t.width / 2 - a.width / 2;
  o < 0 ? o = l : o + a.width >= i && (o = i - a.width - l);
  let c;
  n === "bottom" ? (c = t.top + t.height + l, c + a.height >= r && (c = t.top - a.height - l)) : (c = t.top - a.height - l, c < 0 && (c = t.top + t.height + l)), Object.assign(e.style, { top: `${c}px`, left: `${o}px` });
}, cW = (e, t, n, a) => {
  t.classList.add("excalidraw-tooltip--visible"), t.style.minWidth = a ? "50ch" : "10ch", t.style.maxWidth = a ? "50ch" : "15ch", t.textContent = n;
  let i = e.getBoundingClientRect();
  O9(t, i);
}, Ul = ({ children: e, label: t, long: n = !1, style: a, disabled: i }) => (Q(() => () => Cs().classList.remove("excalidraw-tooltip--visible"), []), i ? null : p("div", { className: "excalidraw-tooltip-wrapper", onPointerEnter: (r) => cW(r.currentTarget, Cs(), t, n), onPointerLeave: () => Cs().classList.remove("excalidraw-tooltip--visible"), style: a, children: e }));
K({ name: "changeViewBackgroundColor", label: "labels.canvasBackground", paletteName: "Change canvas background color", trackEvent: !1, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.changeViewBackgroundColor && !t.viewModeEnabled, perform: (e, t, n) => ({ appState: { ...t, ...n }, captureUpdate: n.viewBackgroundColor ? W.IMMEDIATELY : W.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n, appProps: a }) => p(UU, { palette: null, topPicks: Fb, label: C("labels.canvasBackground"), type: "canvasBackground", color: t.viewBackgroundColor, onChange: (i) => n({ viewBackgroundColor: i }), "data-testid": "canvas-background-picker", elements: e, appState: t, updateData: n }) });
var Is = K({ name: "clearCanvas", label: "labels.clearCanvas", paletteName: "Clear canvas", icon: sl, trackEvent: { category: "canvas" }, predicate: (e, t, n, a) => {
  var i;
  return !!a.props.UIOptions.canvasActions.clearCanvas && !t.viewModeEnabled && ((i = t.openDialog) == null ? void 0 : i.name) !== "elementLinkSelector";
}, perform: (e, t, n, a) => (a.imageCache.clear(), { elements: e.map((i) => ve(i, { isDeleted: !0 })), appState: { ...ei(), files: {}, theme: t.theme, penMode: t.penMode, penDetected: t.penDetected, exportBackground: t.exportBackground, exportEmbedScene: t.exportEmbedScene, gridSize: t.gridSize, gridStep: t.gridStep, gridModeEnabled: t.gridModeEnabled, stats: t.stats, pasteDialog: t.pasteDialog, activeTool: t.activeTool.type === "image" ? { ...t.activeTool, type: "selection" } : t.activeTool }, captureUpdate: W.IMMEDIATELY }) }), D6 = K({ name: "zoomIn", label: "buttons.zoomIn", viewMode: !0, icon: im, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Gr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: Si(t.zoom.value + Xu) }, t), userToFollow: null }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => p(Te, { type: "button", className: "zoom-in-button zoom-button", icon: im, title: `${C("buttons.zoomIn")}  ${V("CtrlOrCmd++")}`, "aria-label": C("buttons.zoomIn"), disabled: t.zoom.value >= z0, onClick: () => {
  e(null);
} }), keyTest: (e) => (e.code === De.EQUAL || e.code === De.NUM_ADD) && (e[P.CTRL_OR_CMD] || e.shiftKey) }), L6 = K({ name: "zoomOut", label: "buttons.zoomOut", icon: rm, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Gr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: Si(t.zoom.value - Xu) }, t), userToFollow: null }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => p(Te, { type: "button", className: "zoom-out-button zoom-button", icon: rm, title: `${C("buttons.zoomOut")}  ${V("CtrlOrCmd+-")}`, "aria-label": C("buttons.zoomOut"), disabled: t.zoom.value <= $0, onClick: () => {
  e(null);
} }), keyTest: (e) => (e.code === De.MINUS || e.code === De.NUM_SUBTRACT) && (e[P.CTRL_OR_CMD] || e.shiftKey) }), R6 = K({ name: "resetZoom", label: "buttons.resetZoom", icon: wC, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => ({ appState: { ...t, ...Gr({ viewportX: t.width / 2 + t.offsetLeft, viewportY: t.height / 2 + t.offsetTop, nextZoom: Si(1) }, t), userToFollow: null }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ updateData: e, appState: t }) => p(Ul, { label: C("buttons.resetZoom"), style: { height: "100%" }, children: _(Te, { type: "button", className: "reset-zoom-button zoom-button", title: C("buttons.resetZoom"), "aria-label": C("buttons.resetZoom"), onClick: () => {
  e(null);
}, children: [(t.zoom.value * 100).toFixed(0), "%"] }) }), keyTest: (e) => (e.code === De.ZERO || e.code === De.NUM_ZERO) && (e[P.CTRL_OR_CMD] || e.shiftKey) }), dW = (e, t, n = 1) => {
  let [a, i, r, l] = e, o = r - a, c = t.width / o, d = l - i, s = t.height / d, u = Math.min(c, s) * Me(n, 0.1, 1);
  return Math.min(u, 1);
}, uW = ({ bounds: e, appState: t, canvasOffsets: n, fitToViewport: a = !1, viewportZoomFactor: i = 1, minZoom: r = -1 / 0, maxZoom: l = 1 / 0 }) => {
  i = Me(i, $0, z0);
  let [o, c, d, s] = e, u = (o + d) / 2, f = (c + s) / 2, h = (n == null ? void 0 : n.left) ?? 0, U = (n == null ? void 0 : n.top) ?? 0, m = (n == null ? void 0 : n.right) ?? 0, g = (n == null ? void 0 : n.bottom) ?? 0, b = t.width - h - m, v = t.height - U - g, y;
  if (a) {
    let S = d - o, E = s - c;
    y = Math.min(b / S, v / E) * i;
  } else y = dW(e, { width: b, height: v }, i);
  let w = Si(Me(dM(y, Xu, "floor"), r, l)), x = g7({ scenePoint: { x: u, y: f }, viewportDimensions: { width: t.width, height: t.height }, offsets: n, zoom: { value: w } });
  return { appState: { ...t, scrollX: x.scrollX, scrollY: x.scrollY, zoom: { value: w } }, captureUpdate: W.EVENTUALLY };
}, If = ({ canvasOffsets: e, targetElements: t, appState: n, fitToViewport: a, viewportZoomFactor: i, minZoom: r, maxZoom: l }) => {
  let o = We(at(t));
  return uW({ canvasOffsets: e, bounds: o, appState: n, fitToViewport: a, viewportZoomFactor: i, minZoom: r, maxZoom: l });
};
K({ name: "zoomToFitSelectionInViewport", label: "labels.zoomToFitViewport", icon: tp, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return If({ targetElements: i.length ? i : e, appState: { ...t, userToFollow: null }, fitToViewport: !1, canvasOffsets: a.getEditorUIOffsets() });
}, keyTest: (e) => e.code === De.TWO && e.shiftKey && !e.altKey && !e[P.CTRL_OR_CMD] });
K({ name: "zoomToFitSelection", label: "helpDialog.zoomToSelection", icon: tp, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return If({ targetElements: i.length ? i : e, appState: { ...t, userToFollow: null }, fitToViewport: !0, canvasOffsets: a.getEditorUIOffsets() });
}, keyTest: (e) => e.code === De.THREE && e.shiftKey && !e.altKey && !e[P.CTRL_OR_CMD] });
K({ name: "zoomToFit", label: "helpDialog.zoomToFit", icon: tp, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n, a) => If({ targetElements: e, appState: { ...t, userToFollow: null }, fitToViewport: !1, canvasOffsets: a.getEditorUIOffsets() }), keyTest: (e) => e.code === De.ONE && e.shiftKey && !e.altKey && !e[P.CTRL_OR_CMD] });
var Tu = K({ name: "toggleTheme", label: (e, t) => t.theme === Ie.DARK ? "buttons.lightMode" : "buttons.darkMode", keywords: ["toggle", "dark", "light", "mode", "theme"], icon: (e) => e.theme === Ie.LIGHT ? y1 : w1, viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t, n) => ({ appState: { ...t, theme: n || (t.theme === Ie.LIGHT ? Ie.DARK : Ie.LIGHT) }, captureUpdate: W.EVENTUALLY }), keyTest: (e) => e.altKey && e.shiftKey && e.code === De.D, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.toggleTheme });
K({ name: "toggleEraserTool", label: "toolBar.eraser", trackEvent: { category: "toolbar" }, perform: (e, t) => {
  let n;
  return Fa(t) ? n = _t(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : n = _t(t, { type: "eraser", lastActiveToolBeforeEraser: t.activeTool }), { appState: { ...t, selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null, activeTool: n }, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => e.key === P.E });
var fW = K({ name: "toggleHandTool", label: "toolBar.hand", paletteName: "Toggle hand tool", trackEvent: { category: "toolbar" }, icon: S8, viewMode: !1, perform: (e, t, n, a) => {
  let i;
  return ro(t) ? i = _t(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : (i = _t(t, { type: "hand", lastActiveToolBeforeEraser: t.activeTool }), qe(a.interactiveCanvas, Ye.GRAB)), { appState: { ...t, selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null, activeTool: i }, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => !e.altKey && !e[P.CTRL_OR_CMD] && e.key === P.H }), la = K({ name: "finalize", label: "", trackEvent: !1, perform: (e, t, n, a) => {
  var f;
  let { interactiveCanvas: i, focusContainer: r, scene: l } = a, o = l.getNonDeletedElementsMap();
  if (t.editingLinearElement) {
    let { elementId: h, startBindingElement: U, endBindingElement: m } = t.editingLinearElement, g = ee.getElement(h, o);
    if (g) return Ga(g) && tf(g, U, m, o, l), { elements: g.points.length < 2 || vo(g) ? e.filter((b) => b.id !== g.id) : void 0, appState: { ...t, cursorButton: "up", editingLinearElement: null }, captureUpdate: W.IMMEDIATELY };
  }
  let c = e, d = t.pendingImageElementId && l.getElement(t.pendingImageElementId);
  d && G(d, { isDeleted: !0 }, !1), window.document.activeElement instanceof HTMLElement && r();
  let s = t.multiElement ? t.multiElement : ((f = t.newElement) == null ? void 0 : f.type) === "freedraw" ? t.newElement : null;
  if (s) {
    if (s.type !== "freedraw" && t.lastPointerDownWith !== "touch") {
      let { points: U, lastCommittedPoint: m } = s;
      (!m || U[U.length - 1] !== m) && G(s, { points: s.points.slice(0, -1) });
    }
    vo(s) && (c = c.filter((U) => U.id !== s.id));
    let h = Ti(s.points, t.zoom.value);
    if ((s.type === "line" || s.type === "freedraw") && h) {
      let U = s.points, m = U[0];
      G(s, { points: U.map((g, b) => b === U.length - 1 ? k(m[0], m[1]) : g) });
    }
    if (Ga(s) && !h && s.points.length > 1) {
      let [U, m] = ee.getPointAtIndexGlobalCoordinates(s, -1, he(e));
      _1(s, t, { x: U, y: m }, o, e);
    }
  }
  (!t.activeTool.locked && t.activeTool.type !== "freedraw" || !s) && sa(i);
  let u;
  return t.activeTool.type === "eraser" ? u = _t(t, { ...t.activeTool.lastActiveTool || { type: "selection" }, lastActiveToolBeforeEraser: null }) : u = _t(t, { type: "selection" }), { elements: c, appState: { ...t, cursorButton: "up", activeTool: (t.activeTool.locked || t.activeTool.type === "freedraw") && s ? t.activeTool : u, activeEmbeddable: null, newElement: null, selectionElement: null, multiElement: null, editingTextElement: null, startBoundElement: null, suggestedBindings: [], selectedElementIds: s && !t.activeTool.locked && t.activeTool.type !== "freedraw" ? { ...t.selectedElementIds, [s.id]: !0 } : t.selectedElementIds, selectedLinearElement: s && me(s) ? new ee(s) : t.selectedLinearElement, pendingImageElementId: null }, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e, t) => e.key === P.ESCAPE && (t.editingLinearElement !== null || !t.newElement && t.multiElement === null) || (e.key === P.ESCAPE || e.key === P.ENTER) && t.multiElement !== null, PanelComponent: ({ appState: e, updateData: t, data: n }) => p(Te, { type: "button", icon: AC, title: C("buttons.done"), "aria-label": C("buttons.done"), onClick: t, visible: e.multiElement != null, size: (n == null ? void 0 : n.size) || "medium", style: { pointerEvents: "all" } }) }), hW = (e) => {
  let { id: t } = di(), [n, a] = oe(e.value), i = (l) => {
    e.ignoreFocus || AM(l.target);
    let o = l.target.value;
    o !== e.value && e.onChange(o);
  }, r = (l) => {
    if (l.key === P.ENTER) {
      if (l.preventDefault(), l.nativeEvent.isComposing || l.keyCode === 229) return;
      l.currentTarget.blur();
    }
  };
  return _("div", { className: "ProjectName", children: [p("label", { className: "ProjectName-label", htmlFor: "filename", children: `${e.label}:` }), p("input", { type: "text", className: "TextInput", onBlur: i, onKeyDown: r, id: `${t}-filename`, value: n, onChange: (l) => a(l.target.value) })] });
}, pW = (e) => {
  let t = e.title || (e.value === Ie.DARK ? C("buttons.lightMode") : C("buttons.darkMode"));
  return p(Te, { type: "icon", icon: e.value === Ie.LIGHT ? P6.MOON : P6.SUN, title: t, "aria-label": t, onClick: () => e.onChange(e.value === Ie.DARK ? Ie.LIGHT : Ie.DARK), "data-testid": "toggle-dark-mode" });
}, P6 = { SUN: p("svg", { width: "512", height: "512", className: "rtl-mirror", viewBox: "0 0 512 512", children: p("path", { fill: "currentColor", d: "M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z" }) }), MOON: p("svg", { width: "512", height: "512", className: "rtl-mirror", viewBox: "0 0 512 512", children: p("path", { fill: "currentColor", d: "M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z" }) }) }, Tf = (e, { selectedElementIds: t }, n) => {
  e = at(e);
  let a = n && Nt(e, { selectedElementIds: t }), i = null, r = a ? Ee(e, { selectedElementIds: t }, { includeBoundTextElement: !0 }) : e;
  return a && (r.length === 1 && fe(r[0]) ? (i = r[0], r = $p(e, i)) : r.length > 1 && (r = Ee(e, { selectedElementIds: t }, { includeBoundTextElement: !0, includeElementsInFrames: !0 }))), { exportingFrame: i, exportedElements: ki(r) };
}, _f = async (e, t, n, a, { exportBackground: i, exportPadding: r = Co, viewBackgroundColor: l, name: o = n.name || jb, fileHandle: c = null, exportingFrame: d = null }) => {
  if (t.length === 0) throw new Error(C("alerts.cannotExportEmptyCanvas"));
  if (e === "svg" || e === "clipboard-svg") {
    let u = vp(t, { exportBackground: i, exportWithDarkMode: n.exportWithDarkMode, viewBackgroundColor: l, exportPadding: r, exportScale: n.exportScale, exportEmbedScene: n.exportEmbedScene && e === "svg" }, a, { exportingFrame: d });
    if (e === "svg") return Uu(u.then((f) => new Blob([f.outerHTML], { type: de.svg })), { description: "Export to SVG", name: o, extension: n.exportEmbedScene ? "excalidraw.svg" : "svg", mimeTypes: [io.svg], fileHandle: c });
    if (e === "clipboard-svg") {
      let f = await u.then((h) => h.outerHTML);
      try {
        await yc(f);
      } catch {
        throw new Error(C("errors.copyToSystemClipboardFailed"));
      }
      return;
    }
  }
  let s = a3(t, n, a, { exportBackground: i, viewBackgroundColor: l, exportPadding: r, exportingFrame: d });
  if (e === "png") {
    let u = tc(s);
    return n.exportEmbedScene && (u = u.then((f) => import("./image-7KUKJ7J4-DTXncbzy.js").then(({ encodePngMetadata: h }) => h({ blob: f, metadata: Up(t, n, a) })))), Uu(u, { description: "Export to PNG", name: o, extension: n.exportEmbedScene ? "excalidraw.png" : "png", mimeTypes: [io.png], fileHandle: c });
  } else if (e === "clipboard") try {
    let u = tc(s);
    await HN(u);
  } catch (u) {
    throw console.warn(u), u.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : Fs && u.name === "TypeError" ? new Error(`${C("alerts.couldNotCopyToClipboard")}

${C("hints.firefox_clipboard_write")}`) : new Error(C("alerts.couldNotCopyToClipboard"));
  }
  else throw new Error("Unsupported export type");
}, UW = async (e, t, n, a) => {
  let { exportBackground: i, viewBackgroundColor: r, fileHandle: l } = t, o = M3(l);
  if (!l || !kO(o)) throw new Error("fileHandle should exist and should be of type svg or png when resaving");
  t = { ...t, exportEmbedScene: !0 };
  let { exportedElements: c, exportingFrame: d } = Tf(e, t, !1);
  return await _f(o, c, t, n, { exportBackground: i, viewBackgroundColor: r, name: a, fileHandle: l, exportingFrame: d }), { fileHandle: l };
}, vU = ({ children: e, checked: t, onChange: n, className: a }) => _("div", { className: ae("Checkbox", a, { "is-checked": t }), onClick: (i) => {
  n(!t, i), i.currentTarget.querySelector(".Checkbox-box").focus();
}, children: [p("button", { type: "button", className: "Checkbox-box", role: "checkbox", "aria-checked": t, children: MC }), p("div", { className: "Checkbox-label", children: e })] }), mW = K({ name: "changeProjectName", label: "labels.fileTitle", trackEvent: !1, perform: (e, t, n) => ({ appState: { ...t, name: n }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t, appProps: n, data: a, app: i }) => p(hW, { label: C("labels.fileTitle"), value: i.getName(), onChange: (r) => t(r), ignoreFocus: (a == null ? void 0 : a.ignoreFocus) ?? !1 }) }), gW = K({ name: "changeExportScale", label: "imageExportDialog.scale", trackEvent: { category: "export", action: "scale" }, perform: (e, t, n) => ({ appState: { ...t, exportScale: n }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = at(e), i = Nt(a, t) ? Ee(a, t) : a;
  return p(le, { children: B0.map((r) => {
    let [l, o] = rN(i, Co, r), c = `${C("imageExportDialog.label.scale")} ${r}x (${l}x${o})`;
    return p(Te, { size: "small", type: "radio", icon: `${r}x`, name: "export-canvas-scale", title: c, "aria-label": c, id: "export-canvas-scale", checked: r === t.exportScale, onChange: () => n(r) }, r);
  }) });
} }), bW = K({ name: "changeExportBackground", label: "imageExportDialog.label.withBackground", trackEvent: { category: "export", action: "toggleBackground" }, perform: (e, t, n) => ({ appState: { ...t, exportBackground: n }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => p(vU, { checked: e.exportBackground, onChange: (n) => t(n), children: C("imageExportDialog.label.withBackground") }) }), $9 = K({ name: "changeExportEmbedScene", label: "imageExportDialog.tooltip.embedScene", trackEvent: { category: "export", action: "embedScene" }, perform: (e, t, n) => ({ appState: { ...t, exportEmbedScene: n }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => _(vU, { checked: e.exportEmbedScene, onChange: (n) => t(n), children: [C("imageExportDialog.label.embedScene"), p(Ul, { label: C("imageExportDialog.tooltip.embedScene"), long: !0, children: p("div", { className: "excalidraw-tooltip-icon", children: DC }) })] }) }), N6 = K({ name: "saveToActiveFile", label: "buttons.save", icon: Zu, trackEvent: { category: "export" }, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.saveToActiveFile && !!t.fileHandle && !t.viewModeEnabled, perform: async (e, t, n, a) => {
  let i = !!t.fileHandle;
  try {
    let { fileHandle: r } = Gp(t.fileHandle) ? await UW(e, t, a.files, a.getName()) : await B7(e, t, a.files, a.getName());
    return { captureUpdate: W.EVENTUALLY, appState: { ...t, fileHandle: r, toast: i ? { message: r != null && r.name ? C("toast.fileSavedToFilename").replace("{filename}", `"${r.name}"`) : C("toast.fileSaved") } : null } };
  } catch (r) {
    return (r == null ? void 0 : r.name) !== "AbortError" ? console.error(r) : console.warn(r), { captureUpdate: W.EVENTUALLY };
  }
}, keyTest: (e) => e.key === P.S && e[P.CTRL_OR_CMD] && !e.shiftKey }), z9 = K({ name: "saveFileToDisk", label: "exportDialog.disk_title", icon: Zu, viewMode: !0, trackEvent: { category: "export" }, perform: async (e, t, n, a) => {
  try {
    let { fileHandle: i } = await B7(e, { ...t, fileHandle: null }, a.files, a.getName());
    return { captureUpdate: W.EVENTUALLY, appState: { ...t, openDialog: null, fileHandle: i, toast: { message: C("toast.fileSaved") } } };
  } catch (i) {
    return (i == null ? void 0 : i.name) !== "AbortError" ? console.error(i) : console.warn(i), { captureUpdate: W.EVENTUALLY };
  }
}, keyTest: (e) => e.key === P.S && e.shiftKey && e[P.CTRL_OR_CMD], PanelComponent: ({ updateData: e }) => p(Te, { type: "button", icon: IC, title: C("buttons.saveAs"), "aria-label": C("buttons.saveAs"), showAriaLabel: Ht().editor.isMobile, hidden: !vl, onClick: () => e(null), "data-testid": "save-as-button" }) }), f0 = K({ name: "loadScene", label: "buttons.load", trackEvent: { category: "export" }, predicate: (e, t, n, a) => !!a.props.UIOptions.canvasActions.loadScene && !t.viewModeEnabled, perform: async (e, t, n, a) => {
  try {
    let { elements: i, appState: r, files: l } = await ZP(t, e);
    return { elements: i, appState: r, files: l, captureUpdate: W.IMMEDIATELY };
  } catch (i) {
    return (i == null ? void 0 : i.name) === "AbortError" ? (console.warn(i), !1) : { elements: e, appState: { ...t, errorMessage: i.message }, files: a.files, captureUpdate: W.EVENTUALLY };
  }
}, keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.O }), vW = K({ name: "exportWithDarkMode", label: "imageExportDialog.label.darkMode", trackEvent: { category: "export", action: "toggleTheme" }, perform: (e, t, n) => ({ appState: { ...t, exportWithDarkMode: n }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => p("div", { style: { display: "flex", justifyContent: "flex-end", marginTop: "-45px", marginBottom: "10px" }, children: p(pW, { value: e.exportWithDarkMode ? Ie.DARK : Ie.LIGHT, onChange: (n) => {
  t(n === Ie.DARK);
}, title: C("imageExportDialog.label.darkMode") }) }) }), F9 = "{}", yW = K({ name: "copyStyles", label: "labels.copyStyles", icon: _8, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = [], r = e.find((l) => t.selectedElementIds[l.id]);
  if (i.push(r), r && ta(r)) {
    let l = ye(r, a.scene.getNonDeletedElementsMap());
    i.push(l);
  }
  return r && (F9 = JSON.stringify(i)), { appState: { ...t, toast: { message: C("toast.copyStyles") } }, captureUpdate: W.EVENTUALLY };
}, keyTest: (e) => e[P.CTRL_OR_CMD] && e.altKey && e.code === De.C }), wW = K({ name: "pasteStyles", label: "labels.pasteStyles", icon: _8, trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = JSON.parse(F9), r = i[0], l = i[1];
  if (!c8(r)) return { elements: e, captureUpdate: W.EVENTUALLY };
  let o = Ee(e, t, { includeBoundTextElement: !0 }), c = o.map((d) => d.id);
  return { elements: e.map((d) => {
    if (c.includes(d.id)) {
      let s = r;
      if (J(d) && d.containerId && (s = l), !s) return d;
      let u = ve(d, { backgroundColor: s == null ? void 0 : s.backgroundColor, strokeWidth: s == null ? void 0 : s.strokeWidth, strokeColor: s == null ? void 0 : s.strokeColor, strokeStyle: s == null ? void 0 : s.strokeStyle, fillStyle: s == null ? void 0 : s.fillStyle, opacity: s == null ? void 0 : s.opacity, roughness: s == null ? void 0 : s.roughness, roundness: s.roundness ? HM(s.roundness.type, d) ? s.roundness : XM(d) : null });
      if (J(u)) {
        let f = s.fontSize || Fi, h = s.fontFamily || Er;
        u = ve(u, { fontSize: f, fontFamily: h, textAlign: s.textAlign || fc, lineHeight: s.lineHeight || dl(h) });
        let U = null;
        u.containerId && (U = o.find((m) => J(u) && m.id === u.containerId) || null), Un(u, U, a.scene.getNonDeletedElementsMap());
      }
      return u.type === "arrow" && xe(s) && (u = ve(u, { startArrowhead: s.startArrowhead, endArrowhead: s.endArrowhead })), fe(d) && (u = ve(u, { roundness: null, backgroundColor: "transparent" })), u;
    }
    return d;
  }), captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => e[P.CTRL_OR_CMD] && e.altKey && e.code === De.V });
K({ name: "toggleCanvasMenu", label: "buttons.menu", trackEvent: { category: "menu" }, perform: (e, t) => ({ appState: { ...t, openMenu: t.openMenu === "canvas" ? null : "canvas" }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ appState: e, updateData: t }) => p(Te, { type: "button", icon: m8, "aria-label": C("buttons.menu"), onClick: t, selected: e.openMenu === "canvas" }) });
K({ name: "toggleEditMenu", label: "buttons.edit", trackEvent: { category: "menu" }, perform: (e, t) => ({ appState: { ...t, openMenu: t.openMenu === "shape" ? null : "shape" }, captureUpdate: W.EVENTUALLY }), PanelComponent: ({ elements: e, appState: t, updateData: n }) => p(Te, { visible: Vp(t, at(e)), type: "button", icon: TC, "aria-label": C("buttons.edit"), onClick: n, selected: t.openMenu === "shape" }) });
var yU = K({ name: "toggleShortcuts", label: "welcomeScreen.defaults.helpHint", icon: xC, viewMode: !0, trackEvent: { category: "menu", action: "toggleHelpDialog" }, perform: (e, t, n, { focusContainer: a }) => {
  var i, r;
  return ((i = t.openDialog) == null ? void 0 : i.name) === "help" && a(), { appState: { ...t, openDialog: ((r = t.openDialog) == null ? void 0 : r.name) === "help" ? null : { name: "help" } }, captureUpdate: W.EVENTUALLY };
}, keyTest: (e) => e.key === P.QUESTION_MARK }), EW = (e) => {
  if (e.length >= 2) {
    let t = e[0].groupIds;
    for (let n of t) if (e.reduce((a, i) => a && Ks(i, n), !0)) return !0;
  }
  return !1;
}, O6 = (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 });
  return a.length >= 2 && !EW(a) && !U3(a);
}, xW = K({ name: "group", label: "labels.group", icon: (e) => p(vm, { theme: e.theme }), trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = Op(a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 }));
  if (i.length < 2) return { appState: t, elements: e, captureUpdate: W.EVENTUALLY };
  let r = Kr(t);
  if (r.length === 1) {
    let m = r[0], g = new Set(ot(e, m).map((v) => v.id)), b = new Set(i.map((v) => v.id));
    if ((/* @__PURE__ */ new Set([...Array.from(g), ...Array.from(b)])).size === g.size) return { appState: t, elements: e, captureUpdate: W.EVENTUALLY };
  }
  let l = [...e];
  new Set(i.map((m) => m.frameId)).size > 1 && JN(i).forEach((m, g) => {
    ff(m, a.scene.getNonDeletedElementsMap());
  });
  let o = na(), c = he(i);
  l = l.map((m) => c.get(m.id) ? ve(m, { groupIds: tP(m.groupIds, o, t.editingGroupId) }) : m);
  let d = ot(l, o), s = d[d.length - 1], u = l.lastIndexOf(s), f = l.slice(u + 1), h = l.slice(0, u).filter((m) => !Ks(m, o)), U = ii([...h, ...d, ...f], he(d));
  return { appState: { ...t, ...v7(o, { ...t, selectedGroupIds: {} }, at(l)) }, elements: U, captureUpdate: W.IMMEDIATELY };
}, predicate: (e, t, n, a) => O6(e, t, a), keyTest: (e) => !e.shiftKey && e[P.CTRL_OR_CMD] && e.key === P.G, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !O6(e, t, a), type: "button", icon: p(vm, { theme: t.theme }), onClick: () => n(null), title: `${C("labels.group")}  ${V("CtrlOrCmd+G")}`, "aria-label": C("labels.group"), visible: Nt(at(e), t) }) }), SW = K({ name: "ungroup", label: "labels.ungroup", icon: (e) => p(ym, { theme: e.theme }), trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = Kr(t), r = he(e);
  if (i.length === 0) return { appState: t, elements: e, captureUpdate: W.EVENTUALLY };
  let l = [...e], o = [];
  l = l.map((u) => {
    st(u) && o.push(u.id);
    let f = nP(u.groupIds, t.selectedGroupIds);
    return f.length === u.groupIds.length ? u : ve(u, { groupIds: f });
  });
  let c = pn(t, at(l), t, null), d = a.scene.getSelectedElements(t), s = new Set(d.filter((u) => u.frameId).map((u) => u.frameId));
  return Np(e).filter((u) => s.has(u.id)).forEach((u) => {
    u && (l = h3(l, Cd(l, u, t, r), u, a));
  }), c.selectedElementIds = Object.entries(c.selectedElementIds).reduce((u, [f, h]) => (h && !o.includes(f) && (u[f] = !0), u), {}), { appState: { ...t, ...c }, elements: l, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e) => e.shiftKey && e[P.CTRL_OR_CMD] && e.key === P.G.toUpperCase(), predicate: (e, t) => Kr(t).length > 0, PanelComponent: ({ elements: e, appState: t, updateData: n }) => p(Te, { type: "button", hidden: Kr(t).length === 0, icon: p(ym, { theme: t.theme }), onClick: () => n(null), title: `${C("labels.ungroup")}  ${V("CtrlOrCmd+Shift+G")}`, "aria-label": C("labels.ungroup"), visible: Nt(at(e), t) }) }), B9 = (e, t, n, a, i, r, l) => {
  e.beginPath(), e.moveTo(t + r, n), e.lineTo(t + a - r, n), e.quadraticCurveTo(t + a, n, t + a, n + r), e.lineTo(t + a, n + i - r), e.quadraticCurveTo(t + a, n + i, t + a - r, n + i), e.lineTo(t + r, n + i), e.quadraticCurveTo(t, n + i, t, n + i - r), e.lineTo(t, n + r), e.quadraticCurveTo(t, n, t + r, n), e.closePath(), e.fill(), l && (e.strokeStyle = l), e.stroke();
};
function kW(e) {
  let t = 0;
  if (e.length === 0) return t;
  for (let n = 0; n < e.length; n++) {
    let a = e.charCodeAt(n);
    t = (t << 5) - t + a;
  }
  return t;
}
var Af = (e, t) => `hsl(${Math.abs(kW((t == null ? void 0 : t.id) || e)) % 37 * 10}, 100%, 83%)`, MW = (e) => {
  var n;
  let t = (n = e == null ? void 0 : e.trim()) == null ? void 0 : n.codePointAt(0);
  return (t ? String.fromCodePoint(t) : "?").toUpperCase();
}, CW = ({ context: e, renderConfig: t, appState: n, normalizedWidth: a, normalizedHeight: i }) => {
  for (let [r, l] of t.remotePointerViewportCoords) {
    let { x: o, y: c } = l, d = n.collaborators.get(r);
    o -= n.offsetLeft, c -= n.offsetTop;
    let s = 11, u = 14, f = o < 0 || o > a - s || c < 0 || c > i - u;
    o = Math.max(o, 0), o = Math.min(o, a - s), c = Math.max(c, 0), c = Math.min(c, i - u);
    let h = Af(r, d);
    e.save(), e.strokeStyle = h, e.fillStyle = h;
    let U = t.remotePointerUserStates.get(r), m = f || U === "idle" || U === "away";
    m && (e.globalAlpha = 0.3), t.remotePointerButton.get(r) === "down" && (e.beginPath(), e.arc(o, c, 15, 0, 2 * Math.PI, !1), e.lineWidth = 3, e.strokeStyle = "#ffffff88", e.stroke(), e.closePath(), e.beginPath(), e.arc(o, c, 15, 0, 2 * Math.PI, !1), e.lineWidth = 1, e.strokeStyle = h, e.stroke(), e.closePath());
    let g = n.theme === Ie.DARK ? "#2f6330" : Xk, b = d == null ? void 0 : d.isSpeaking;
    b && (e.fillStyle = g, e.strokeStyle = g, e.lineWidth = 10, e.lineJoin = "round", e.beginPath(), e.moveTo(o, c), e.lineTo(o + 0, c + 14), e.lineTo(o + 4, c + 9), e.lineTo(o + 11, c + 8), e.closePath(), e.stroke(), e.fill()), e.fillStyle = Fc, e.strokeStyle = Fc, e.lineWidth = 6, e.lineJoin = "round", e.beginPath(), e.moveTo(o, c), e.lineTo(o + 0, c + 14), e.lineTo(o + 4, c + 9), e.lineTo(o + 11, c + 8), e.closePath(), e.stroke(), e.fill(), e.fillStyle = h, e.strokeStyle = h, e.lineWidth = 2, e.lineJoin = "round", e.beginPath(), m ? (e.moveTo(o - 1, c - 1), e.lineTo(o - 1, c + 15), e.lineTo(o + 5, c + 10), e.lineTo(o + 12, c + 9), e.closePath(), e.fill()) : (e.moveTo(o, c), e.lineTo(o + 0, c + 14), e.lineTo(o + 4, c + 9), e.lineTo(o + 11, c + 8), e.closePath(), e.fill(), e.stroke());
    let v = t.remotePointerUsernames.get(r) || "";
    if (!f && v) {
      e.font = "600 12px sans-serif";
      let y = (b ? o + 0 : o) + s / 2, w = (b ? c + 0 : c) + u + 2, x = 5, S = 3, E = e.measureText(v), M = E.actualBoundingBoxDescent + E.actualBoundingBoxAscent, I = Math.max(M, 12), T = y - 1, A = w - 1, D = E.width + 2 + x * 2 + 2, R = I + 2 + S * 2 + 2;
      if (e.roundRect ? (e.beginPath(), e.roundRect(T, A, D, R, 8), e.fillStyle = h, e.fill(), e.strokeStyle = Fc, e.stroke(), b && (e.beginPath(), e.roundRect(T - 2, A - 2, D + 4, R + 4, 8), e.strokeStyle = g, e.stroke())) : B9(e, T, A, D, R, 8, Fc), e.fillStyle = Hk, e.fillText(v, y + x + 1, w + S + E.actualBoundingBoxAscent + Math.floor((I - M) / 2) + 2), b) {
        e.fillStyle = g;
        let O = 8, $ = 8, F = 5;
        e.fillRect(T + D + $, A + (R / 2 - O / 2), 2, O), e.fillRect(T + D + $ + F, A + (R / 2 - O * 2 / 2), 2, O * 2), e.fillRect(T + D + $ + F * 2, A + (R / 2 - O / 2), 2, O);
      }
    }
    e.restore(), e.closePath();
  }
}, $6 = ({ color: e, onClick: t, name: n, src: a, className: i }) => {
  let r = MW(n), [l, o] = oe(!1), c = !l && a, d = c ? void 0 : { background: e };
  return p("div", { className: ae("Avatar", i), style: d, onClick: t, children: c ? p("img", { className: "Avatar-img", src: a, alt: r, referrerPolicy: "no-referrer", onError: () => o(!0) }) : r });
};
K({ name: "goToCollaborator", label: "Go to a collaborator", viewMode: !0, trackEvent: { category: "collab" }, perform: (e, t, n) => {
  var a;
  return !n.socketId || ((a = t.userToFollow) == null ? void 0 : a.socketId) === n.socketId || n.isCurrentUser ? { appState: { ...t, userToFollow: null }, captureUpdate: W.EVENTUALLY } : { appState: { ...t, userToFollow: { socketId: n.socketId, username: n.username || "" }, openMenu: t.openMenu === "canvas" ? null : t.openMenu }, captureUpdate: W.EVENTUALLY };
}, PanelComponent: ({ updateData: e, data: t, appState: n }) => {
  let { socketId: a, collaborator: i, withName: r, isBeingFollowed: l } = t, o = Af(a, i), c = ae({ "is-followed": l, "is-current-user": i.isCurrentUser === !0, "is-speaking": i.isSpeaking, "is-in-call": i.isInCall, "is-muted": i.isMuted }), d = i.isInCall ? i.isSpeaking ? _("div", { className: "UserList__collaborator-status-icon-speaking-indicator", title: C("userList.hint.isSpeaking"), children: [p("div", {}), p("div", {}), p("div", {})] }) : i.isMuted ? p("div", { className: "UserList__collaborator-status-icon-microphone-muted", title: C("userList.hint.micMuted"), children: TI }) : p("div", { title: C("userList.hint.inCall"), children: II }) : null;
  return r ? _("div", { className: `dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${c}`, style: { "--avatar-size": "1.5rem" }, onClick: () => e(i), children: [p($6, { color: o, onClick: () => {
  }, name: i.username || "", src: i.avatarUrl, className: c }), p("div", { className: "UserList__collaborator-name", children: i.username }), _("div", { className: "UserList__collaborator-status-icons", "aria-hidden": !0, children: [l && p("div", { className: "UserList__collaborator-status-icon-is-followed", title: C("userList.hint.followStatus"), children: ep }), d] })] }) : _("div", { className: `UserList__collaborator UserList__collaborator--avatar-only ${c}`, children: [p($6, { color: o, onClick: () => {
    e(i);
  }, name: i.username || "", src: i.avatarUrl, className: c }), d && p("div", { className: "UserList__collaborator-status-icon", children: d })] });
} });
var IW = K({ name: "addToLibrary", trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  for (let r of Gb) if (i.some((l) => l.type === r)) return { captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: C(`errors.libraryElementTypeError.${r}`) } };
  return a.library.getLatestLibrary().then((r) => a.library.setLibrary([{ id: na(), status: "unpublished", elements: i.map(wl), created: Date.now() }, ...r])).then(() => ({ captureUpdate: W.EVENTUALLY, appState: { ...t, toast: { message: C("toast.addedToLibrary") } } })).catch((r) => ({ captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: r.message } }));
}, label: "labels.addToLibrary" }), TW = (e, t, n, a) => {
  let i = lf(e, t), r = ya(e);
  return i.flatMap((l) => {
    let o = _W(l, r, n);
    return l.map((c) => {
      let d = G(c, { x: c.x + o.x, y: c.y + o.y });
      return In(c, a.getNonDeletedElementsMap(), { simultaneouslyUpdated: l }), d;
    });
  });
}, _W = (e, t, { axis: n, position: a }) => {
  let i = ya(e), [r, l] = n === "x" ? ["minX", "maxX"] : ["minY", "maxY"], o = { x: 0, y: 0 };
  return a === "start" ? { ...o, [n]: t[r] - i[r] } : a === "end" ? { ...o, [n]: t[l] - i[l] } : { ...o, [n]: (t[r] + t[l]) / 2 - (i[r] + i[l]) / 2 };
}, zn = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length > 1 && !n.some((a) => fe(a));
}, Po = (e, t, n, a) => {
  let i = n.scene.getSelectedElements(t), r = he(e), l = TW(i, r, a, n.scene), o = he(l);
  return bo(e.map((c) => o.get(c.id) || c), t, n);
};
K({ name: "alignTop", label: "labels.alignTop", icon: hm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "start", axis: "y" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && e.key === P.ARROW_UP, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: hm, onClick: () => n(null), title: `${C("labels.alignTop")}  ${V("CtrlOrCmd+Shift+Up")}`, "aria-label": C("labels.alignTop"), visible: Nt(at(e), t) }) });
K({ name: "alignBottom", label: "labels.alignBottom", icon: pm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "end", axis: "y" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && e.key === P.ARROW_DOWN, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: pm, onClick: () => n(null), title: `${C("labels.alignBottom")}  ${V("CtrlOrCmd+Shift+Down")}`, "aria-label": C("labels.alignBottom"), visible: Nt(at(e), t) }) });
K({ name: "alignLeft", label: "labels.alignLeft", icon: Um, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "start", axis: "x" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && e.key === P.ARROW_LEFT, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: Um, onClick: () => n(null), title: `${C("labels.alignLeft")}  ${V("CtrlOrCmd+Shift+Left")}`, "aria-label": C("labels.alignLeft"), visible: Nt(at(e), t) }) });
K({ name: "alignRight", label: "labels.alignRight", icon: mm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "end", axis: "x" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e[P.CTRL_OR_CMD] && e.shiftKey && e.key === P.ARROW_RIGHT, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: mm, onClick: () => n(null), title: `${C("labels.alignRight")}  ${V("CtrlOrCmd+Shift+Right")}`, "aria-label": C("labels.alignRight"), visible: Nt(at(e), t) }) });
K({ name: "alignVerticallyCentered", label: "labels.centerVertically", icon: gm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "center", axis: "y" }), captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: gm, onClick: () => n(null), title: C("labels.centerVertically"), "aria-label": C("labels.centerVertically"), visible: Nt(at(e), t) }) });
K({ name: "alignHorizontallyCentered", label: "labels.centerHorizontally", icon: bm, trackEvent: { category: "element" }, predicate: (e, t, n, a) => zn(t, a), perform: (e, t, n, a) => ({ appState: t, elements: Po(e, t, a, { position: "center", axis: "x" }), captureUpdate: W.IMMEDIATELY }), PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !zn(t, a), type: "button", icon: bm, onClick: () => n(null), title: C("labels.centerHorizontally"), "aria-label": C("labels.centerHorizontally"), visible: Nt(at(e), t) }) });
var AW = (e, t, n) => {
  let [a, i, r, l] = n.axis === "x" ? ["minX", "midX", "maxX", "width"] : ["minY", "midY", "maxY", "height"], o = ya(e), c = lf(e, t).map((f) => [f, ya(f)]).sort((f, h) => f[1][i] - h[1][i]), d = 0;
  for (let f of c) d += f[1][l];
  let s = (o[l] - d) / (c.length - 1);
  if (s < 0) {
    let f = c.findIndex((g) => g[1][a] === o[a]), h = c.findIndex((g) => g[1][r] === o[r]), U = (c[h][1][i] - c[f][1][i]) / (c.length - 1), m = c[f][1][i];
    return c.flatMap(([g, b], v) => {
      let y = { x: 0, y: 0 };
      return v !== f && v !== h && (m += U, y[n.axis] = m - b[i]), g.map((w) => ve(w, { x: w.x + y.x, y: w.y + y.y }));
    });
  }
  let u = o[a];
  return c.flatMap(([f, h]) => {
    let U = { x: 0, y: 0 };
    return U[n.axis] = u - h[a], u += s, u += h[l], f.map((m) => ve(m, { x: m.x + U.x, y: m.y + U.y }));
  });
}, H9 = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length > 1 && !n.some((a) => fe(a));
}, X9 = (e, t, n, a) => {
  let i = n.scene.getSelectedElements(t), r = AW(i, n.scene.getNonDeletedElementsMap(), a), l = he(r);
  return bo(e.map((o) => l.get(o.id) || o), t, n);
};
K({ name: "distributeHorizontally", label: "labels.distributeHorizontally", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ appState: t, elements: X9(e, t, a, { axis: "x" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.H, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !H9(t, a), type: "button", icon: LC, onClick: () => n(null), title: `${C("labels.distributeHorizontally")}  ${V("Alt+H")}`, "aria-label": C("labels.distributeHorizontally"), visible: Nt(at(e), t) }) });
K({ name: "distributeVertically", label: "labels.distributeVertically", trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ appState: t, elements: X9(e, t, a, { axis: "y" }), captureUpdate: W.IMMEDIATELY }), keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.V, PanelComponent: ({ elements: e, appState: t, updateData: n, app: a }) => p(Te, { hidden: !H9(t, a), type: "button", icon: RC, onClick: () => n(null), title: `${C("labels.distributeVertically")}  ${V("Alt+V")}`, "aria-label": C("labels.distributeVertically"), visible: Nt(at(e), t) }) });
var DW = K({ name: "flipHorizontal", label: "labels.flipHorizontal", icon: LI, trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: bo(W9(e, a.scene.getNonDeletedElementsMap(), t, "horizontal", a), t, a), appState: t, captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e.shiftKey && e.code === De.H }), LW = K({ name: "flipVertical", label: "labels.flipVertical", icon: DI, trackEvent: { category: "element" }, perform: (e, t, n, a) => ({ elements: bo(W9(e, a.scene.getNonDeletedElementsMap(), t, "vertical", a), t, a), appState: t, captureUpdate: W.IMMEDIATELY }), keyTest: (e) => e.shiftKey && e.code === De.V && !e[P.CTRL_OR_CMD] }), W9 = (e, t, n, a, i) => {
  let r = Ee(at(e), n, { includeBoundTextElement: !0, includeElementsInFrames: !0 }), l = RW(r, t, n, a, i), o = he(l);
  return e.map((c) => o.get(c.id) || c);
}, RW = (e, t, n, a, i) => {
  if (e.every((h) => xe(h) && (h.startBinding || h.endBinding))) return e.map((h) => {
    let U = h;
    return ve(U, { startArrowhead: U.endArrowhead, endArrowhead: U.startArrowhead });
  });
  let { midX: r, midY: l } = ya(e);
  x3(e, t, "nw", i.scene, new Map(Array.from(t.values()).map((h) => [h.id, wl(h)])), { flipByX: a === "horizontal", flipByY: a === "vertical", shouldResizeFromCenter: !0, shouldMaintainAspectRatio: !0 }), cu(e.filter(me), t, i.scene.getNonDeletedElements(), i.scene, Wr(n), [], n.zoom);
  let { elbowArrows: o, otherElements: c } = e.reduce((h, U) => te(U) ? { ...h, elbowArrows: h.elbowArrows.concat(U) } : { ...h, otherElements: h.otherElements.concat(U) }, { elbowArrows: [], otherElements: [] }), { midX: d, midY: s } = ya(e), [u, f] = [r - d, l - s];
  return c.forEach((h) => G(h, { x: h.x + u, y: h.y + f })), o.forEach((h) => G(h, { x: h.x + u, y: h.y + f })), e;
}, Pd = K({ name: "copy", label: "labels.copy", icon: v1, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  try {
    await ON(i, a.files, n);
  } catch (r) {
    return { captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: r.message } };
  }
  return { captureUpdate: W.EVENTUALLY };
}, keyTest: void 0 }), z6 = K({ name: "paste", label: "labels.paste", trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i;
  try {
    i = await FN();
  } catch (r) {
    return r.name === "AbortError" || r.name === "NotAllowedError" ? !1 : (console.error(`actionPaste ${r.name}: ${r.message}`), Fs ? { captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: C("hints.firefox_clipboard_write") } } : { captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: C("errors.asyncPasteFailedOnRead") } });
  }
  try {
    a.pasteFromClipboard(PN({ types: i }));
  } catch (r) {
    return console.error(r), { captureUpdate: W.EVENTUALLY, appState: { ...t, errorMessage: C("errors.asyncPasteFailedOnParse") } };
  }
  return { captureUpdate: W.EVENTUALLY };
}, keyTest: void 0 }), F6 = K({ name: "cut", label: "labels.cut", icon: bI, trackEvent: { category: "element" }, perform: (e, t, n, a) => (Pd.perform(e, t, n, a), m9.perform(e, t, null, a)), keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.X }), B6 = K({ name: "copyAsSvg", label: "labels.copyAsSvg", icon: RI, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  if (!a.canvas) return { captureUpdate: W.EVENTUALLY };
  let { exportedElements: i, exportingFrame: r } = Tf(e, t, !0);
  try {
    await _f("clipboard-svg", i, t, a.files, { ...t, exportingFrame: r, name: a.getName() });
    let l = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
    return { appState: { toast: { message: C("toast.copyToClipboardAsSvg", { exportSelection: l.length ? C("toast.selection") : C("toast.canvas"), exportColorScheme: t.exportWithDarkMode ? C("buttons.darkMode") : C("buttons.lightMode") }) } }, captureUpdate: W.EVENTUALLY };
  } catch (l) {
    return console.error(l), { appState: { errorMessage: l.message }, captureUpdate: W.EVENTUALLY };
  }
}, predicate: (e) => _p && e.length > 0, keywords: ["svg", "clipboard", "copy"] }), H6 = K({ name: "copyAsPng", label: "labels.copyAsPng", icon: PI, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  if (!a.canvas) return { captureUpdate: W.EVENTUALLY };
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }), { exportedElements: r, exportingFrame: l } = Tf(e, t, !0);
  try {
    return await _f("clipboard", r, t, a.files, { ...t, exportingFrame: l, name: a.getName() }), { appState: { ...t, toast: { message: C("toast.copyToClipboardAsPng", { exportSelection: i.length ? C("toast.selection") : C("toast.canvas"), exportColorScheme: t.exportWithDarkMode ? C("buttons.darkMode") : C("buttons.lightMode") }) } }, captureUpdate: W.EVENTUALLY };
  } catch (o) {
    return console.error(o), { appState: { ...t, errorMessage: o.message }, captureUpdate: W.EVENTUALLY };
  }
}, predicate: (e) => Ap && e.length > 0, keyTest: (e) => e.code === De.C && e.altKey && e.shiftKey, keywords: ["png", "clipboard", "copy"] }), X6 = K({ name: "copyText", label: "labels.copyText", trackEvent: { category: "element" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 });
  try {
    yc(EP(i));
  } catch {
    throw new Error(C("errors.copyToSystemClipboardFailed"));
  }
  return { captureUpdate: W.EVENTUALLY };
}, predicate: (e, t, n, a) => _p && a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 }).some(J), keywords: ["text", "clipboard", "copy"] }), W6 = K({ name: "gridMode", icon: FI, keywords: ["snap"], label: "labels.toggleGrid", viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => e.gridModeEnabled }, perform(e, t) {
  return { appState: { ...t, gridModeEnabled: !this.checked(t), objectsSnapModeEnabled: !1 }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.gridModeEnabled, predicate: (e, t, n) => n.gridModeEnabled === void 0, keyTest: (e) => e[P.CTRL_OR_CMD] && e.code === De.QUOTE }), h0 = K({ name: "zenMode", label: "buttons.zenMode", icon: OI, paletteName: "Toggle zen mode", viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => !e.zenModeEnabled }, perform(e, t) {
  return { appState: { ...t, zenModeEnabled: !this.checked(t) }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.zenModeEnabled, predicate: (e, t, n) => typeof n.zenModeEnabled > "u", keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.Z }), PW = K({ name: "objectsSnapMode", label: "buttons.objectsSnapMode", icon: NI, viewMode: !1, trackEvent: { category: "canvas", predicate: (e) => !e.objectsSnapModeEnabled }, perform(e, t) {
  return { appState: { ...t, objectsSnapModeEnabled: !this.checked(t), gridModeEnabled: !1 }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.objectsSnapModeEnabled, predicate: (e, t, n) => typeof n.objectsSnapModeEnabled > "u", keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.S }), p0 = K({ name: "stats", label: "stats.fullTitle", icon: AI, paletteName: "Toggle stats", viewMode: !0, trackEvent: { category: "menu" }, keywords: ["edit", "attributes", "customize"], perform(e, t) {
  return { appState: { ...t, stats: { ...t.stats, open: !this.checked(t) } }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.stats.open, keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.SLASH }), NW = K({ name: "unbindText", label: "labels.unbindText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => a.scene.getSelectedElements(t).some((i) => ta(i)), perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r = a.scene.getNonDeletedElementsMap();
  return i.forEach((l) => {
    var c;
    let o = ye(l, r);
    if (o) {
      let { width: d, height: s } = dn(o.originalText, Je(o), o.lineHeight), u = UP(l.id);
      k7(l.id);
      let { x: f, y: h } = sf(l, o, r);
      G(o, { containerId: null, width: d, height: s, text: o.originalText, x: f, y: h }), G(l, { boundElements: (c = l.boundElements) == null ? void 0 : c.filter((U) => U.id !== o.id), height: u || l.height });
    }
  }), { elements: e, appState: t, captureUpdate: W.IMMEDIATELY };
} }), OW = K({ name: "bindText", label: "labels.bindText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  if (i.length === 2) {
    let r = J(i[0]) || J(i[1]), l;
    if (Zr(i[0]) ? l = i[0] : Zr(i[1]) && (l = i[1]), r && l && ye(l, a.scene.getNonDeletedElementsMap()) === null) return !0;
  }
  return !1;
}, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r, l;
  J(i[0]) && Zr(i[1]) ? (r = i[0], l = i[1]) : (r = i[1], l = i[0]), G(r, { containerId: l.id, verticalAlign: Pn.MIDDLE, textAlign: Hs.CENTER, autoResize: !0 }), G(l, { boundElements: (l.boundElements || []).concat({ type: "text", id: r.id }) });
  let o = l.height;
  return Un(r, l, a.scene.getNonDeletedElementsMap()), uu(l.id, o), { elements: $W(e, l, r), appState: { ...t, selectedElementIds: { [l.id]: !0 } }, captureUpdate: W.IMMEDIATELY };
} }), $W = (e, t, n) => {
  let a = e.slice(), i = a.findIndex((l) => l.id === n.id);
  a.splice(i, 1);
  let r = a.findIndex((l) => l.id === t.id);
  return a.splice(r + 1, 0, n), ii(a, he([t, n])), a;
}, zW = (e, t, n) => {
  let a = e.slice(), i = a.findIndex((l) => l.id === t.id);
  a.splice(i, 1);
  let r = a.findIndex((l) => l.id === n.id);
  return a.splice(r, 0, t), ii(a, he([t, n])), a;
}, FW = K({ name: "wrapTextInContainer", label: "labels.createContainerFromText", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t), r = i.every((l) => J(l));
  return i.length > 0 && r;
}, perform: (e, t, n, a) => {
  var o;
  let i = a.scene.getSelectedElements(t), r = e.slice(), l = {};
  for (let c of i) if (J(c)) {
    let d = ai({ type: "rectangle", backgroundColor: t.currentItemBackgroundColor, boundElements: [...c.boundElements || [], { id: c.id, type: "text" }], angle: c.angle, fillStyle: t.currentItemFillStyle, strokeColor: t.currentItemStrokeColor, roughness: t.currentItemRoughness, strokeWidth: t.currentItemStrokeWidth, strokeStyle: t.currentItemStrokeStyle, roundness: t.currentItemRoundness === "round" ? { type: To("rectangle") ? Pt.ADAPTIVE_RADIUS : Pt.PROPORTIONAL_RADIUS } : null, opacity: 100, locked: !1, x: c.x - Rt, y: c.y - Rt, width: fl(c.width, "rectangle"), height: fl(c.height, "rectangle"), groupIds: c.groupIds, frameId: c.frameId });
    if ((o = c.boundElements) != null && o.length) {
      let s = c.boundElements.filter((u) => u.type === "arrow").map((u) => u.id);
      r.filter((u) => s.includes(u.id)).forEach((u) => {
        let f = u.startBinding, h = u.endBinding;
        (f == null ? void 0 : f.elementId) === c.id && (f = { ...f, elementId: d.id }), (h == null ? void 0 : h.elementId) === c.id && (h = { ...h, elementId: d.id }), (f || h) && G(u, { startBinding: f, endBinding: h }, !1);
      });
    }
    G(c, { containerId: d.id, verticalAlign: Pn.MIDDLE, boundElements: null, textAlign: Hs.CENTER, autoResize: !0 }, !1), Un(c, d, a.scene.getNonDeletedElementsMap()), r = zW([...r, d], d, c), l[d.id] = !0;
  }
  return { elements: r, appState: { ...t, selectedElementIds: l }, captureUpdate: W.IMMEDIATELY };
} }), wU = 380, BW = 42, U0 = 5, V9 = 85, HW = 500, m0 = !1, ad = /* @__PURE__ */ new Map(), XW = ({ element: e, elementsMap: t, setAppState: n, onLinkOpen: a, setToast: i, updateEmbedValidationStatus: r }) => {
  let l = Cc(), o = Mc(), c = Ht(), d = e.link || "", [s, u] = oe(d), f = re(null), h = l.showHyperlinkPopup === "editor", U = _e(() => {
    var w;
    if (!f.current) return;
    let y = Nn(f.current.value) || null;
    if (!e.link && y && rt("hyperlink", "create"), xn(e)) {
      if (((w = l.activeEmbeddable) == null ? void 0 : w.element) === e && n({ activeEmbeddable: null }), !y) {
        G(e, { link: null }), r(e, !1);
        return;
      }
      if (!kd(y, o.validateEmbeddable)) y && i({ message: C("toast.unableToEmbed"), closable: !0 }), e.link && ad.set(e.id, e.link), G(e, { link: y }), r(e, !1);
      else {
        let { width: x, height: S } = e, E = Gl(y);
        (E == null ? void 0 : E.error) instanceof URIError && i({ message: C("toast.unrecognizedLinkFormat"), closable: !0 });
        let M = E ? E.intrinsicSize.w / E.intrinsicSize.h : 1, I = ad.get(e.id) !== e.link;
        G(e, { ...I ? { width: (E == null ? void 0 : E.type) === "video" ? x > S ? x : S * M : x, height: (E == null ? void 0 : E.type) === "video" && x > S ? x / M : S } : {}, link: y }), r(e, !0), ad.has(e.id) && ad.delete(e.id);
      }
    } else G(e, { link: y });
  }, [e, i, o.validateEmbeddable, l.activeEmbeddable, n, r]);
  _n(() => () => {
    U();
  }, [U]), Q(() => {
    h && (f != null && f.current) && !(c.viewport.isMobile || c.isTouchScreen) && f.current.select();
  }, [h, c.viewport.isMobile, c.isTouchScreen]), Q(() => {
    let y = null, w = (x) => {
      h || (y && clearTimeout(y), GW(e, t, l, k(x.clientX, x.clientY)) && (y = window.setTimeout(() => {
        n({ showHyperlinkPopup: !1 });
      }, HW)));
    };
    return window.addEventListener("pointermove", w, !1), () => {
      window.removeEventListener("pointermove", w, !1), y && clearTimeout(y);
    };
  }, [l, e, h, n, t]);
  let m = _e(() => {
    rt("hyperlink", "delete"), G(e, { link: null }), n({ showHyperlinkPopup: !1 });
  }, [n, e]), g = () => {
    rt("hyperlink", "edit", "popup-ui"), n({ showHyperlinkPopup: "editor" });
  }, { x: b, y: v } = G9(e, l, t);
  return l.contextMenu || l.selectedElementsAreBeingDragged || l.resizingElement || l.isRotating || l.openMenu || l.viewModeEnabled ? null : _("div", { className: "excalidraw-hyperlinkContainer", style: { top: `${v}px`, left: `${b}px`, width: wU, padding: U0 }, children: [h ? p("input", { className: ae("excalidraw-hyperlinkContainer-input"), placeholder: C("labels.link.hint"), ref: f, value: s, onChange: (y) => u(y.target.value), autoFocus: !0, onKeyDown: (y) => {
    y.stopPropagation(), y[P.CTRL_OR_CMD] && y.key === P.K && y.preventDefault(), (y.key === P.ENTER || y.key === P.ESCAPE) && (U(), n({ showHyperlinkPopup: "info" }));
  } }) : e.link ? p("a", { href: Nn(e.link || ""), className: "excalidraw-hyperlinkContainer-link", target: C7(e.link) ? "_self" : "_blank", onClick: (y) => {
    if (e.link && a) {
      let w = i8("excalidraw-link", y.nativeEvent);
      a({ ...e, link: Nn(e.link) }, w), w.defaultPrevented && y.preventDefault();
    }
  }, rel: "noopener noreferrer", children: e.link }) : p("div", { className: "excalidraw-hyperlinkContainer-link", children: C("labels.link.empty") }), _("div", { className: "excalidraw-hyperlinkContainer__buttons", children: [!h && p(Te, { type: "button", title: C("buttons.edit"), "aria-label": C("buttons.edit"), label: C("buttons.edit"), onClick: g, className: "excalidraw-hyperlinkContainer--edit", icon: Vs }), p(Te, { type: "button", title: C("labels.linkToElement"), "aria-label": C("labels.linkToElement"), label: C("labels.linkToElement"), onClick: () => {
    n({ openDialog: { name: "elementLinkSelector", sourceElementId: e.id } });
  }, icon: D8 }), d && !xn(e) && p(Te, { type: "button", title: C("buttons.remove"), "aria-label": C("buttons.remove"), label: C("buttons.remove"), onClick: m, className: "excalidraw-hyperlinkContainer--remove", icon: sl })] })] });
}, G9 = (e, t, n) => {
  let [a, i] = ge(e, n), { x: r, y: l } = fa({ sceneX: a + e.width / 2, sceneY: i }, t), o = r - t.offsetLeft - wU / 2, c = l - t.offsetTop - V9;
  return { x: o, y: c };
}, V6 = (e, t) => {
  var a;
  let n = Ee(e, t);
  return xn(n[0]) ? "labels.link.editEmbed" : (a = n[0]) != null && a.link ? "labels.link.edit" : "labels.link.create";
}, Ts = null, WW = (e, t, n) => {
  Ts && clearTimeout(Ts), Ts = window.setTimeout(() => VW(e, t, n), Zk);
}, VW = (e, t, n) => {
  if (!e.link) return;
  let a = Cs();
  a.classList.add("excalidraw-tooltip--visible"), a.style.maxWidth = "20rem", a.textContent = xs(e.link) ? C("labels.link.goToElement") : e.link;
  let [i, r, l, o] = ge(e, n), [c, d, s, u] = mp([i, r, l, o], e.angle, t), f = fa({ sceneX: c, sceneY: d }, t);
  O9(a, { left: f.x, top: f.y, width: s, height: u }, "top"), rt("hyperlink", "tooltip", "link-icon"), m0 = !0;
}, G6 = () => {
  Ts && clearTimeout(Ts), m0 && (m0 = !1, Cs().classList.remove("excalidraw-tooltip--visible"));
}, GW = (e, t, n, [a, i]) => {
  let { x: r, y: l } = it({ clientX: a, clientY: i }, n), o = 15 / n.zoom.value;
  if (ap(r, l, e, t)) return !1;
  let [c, d, s] = ge(e, t);
  if (r >= c && r <= s && l >= d - V9 && l <= d) return !1;
  let { x: u, y: f } = G9(e, n, t);
  return !(a >= u - o && a <= u + wU + U0 * 2 + o && i >= f - o && i <= f + o + U0 * 2 + BW);
}, j9 = K({ name: "hyperlink", label: (e, t) => V6(e, t), icon: E1, perform: (e, t) => t.showHyperlinkPopup === "editor" ? !1 : { elements: e, appState: { ...t, showHyperlinkPopup: "editor", openMenu: null }, captureUpdate: W.IMMEDIATELY }, trackEvent: { category: "hyperlink", action: "click" }, keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.K, predicate: (e, t) => Ee(e, t).length === 1, PanelComponent: ({ elements: e, appState: t, updateData: n }) => {
  let a = Ee(e, t);
  return p(Te, { type: "button", icon: E1, "aria-label": C(V6(e, t)), title: `${xn(e[0]) ? C("labels.link.labelEmbed") : C("labels.link.label")} - ${V("CtrlOrCmd+K")}`, onClick: () => n(null), selected: a.length === 1 && !!a[0].link });
} }), $h = (e) => e.every((t) => !t.locked), jW = K({ name: "toggleElementLock", label: (e, t, n) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 });
  return a.length === 1 && !fe(a[0]) ? a[0].locked ? "labels.elementLock.unlock" : "labels.elementLock.lock" : $h(a) ? "labels.elementLock.lockAll" : "labels.elementLock.unlockAll";
}, icon: (e, t) => {
  let n = Ee(t, e);
  return $h(n) ? K0 : Yu;
}, trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return i.length > 0 && !i.some((r) => r.locked && r.frameId);
}, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 });
  if (!i.length) return !1;
  let r = $h(i), l = he(i);
  return { elements: e.map((o) => l.has(o.id) ? ve(o, { locked: r }) : o), appState: { ...t, selectedLinearElement: r ? null : t.selectedLinearElement }, captureUpdate: W.IMMEDIATELY };
}, keyTest: (e, t, n, a) => e.key.toLocaleLowerCase() === P.L && e[P.CTRL_OR_CMD] && e.shiftKey && a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 }).length > 0 }), YW = K({ name: "unlockAllElements", paletteName: "Unlock all elements", trackEvent: { category: "canvas" }, viewMode: !1, icon: Yu, predicate: (e, t) => Ee(e, t).length === 0 && e.some((n) => n.locked), perform: (e, t) => {
  let n = e.filter((a) => a.locked);
  return { elements: e.map((a) => a.locked ? ve(a, { locked: !1 }) : a), appState: { ...t, selectedElementIds: Object.fromEntries(n.map((a) => [a.id, !0])) }, captureUpdate: W.IMMEDIATELY };
}, label: "labels.elementLock.unlockAll" }), ZW = () => {
  let [e, t] = oe(null), n = _e((a) => t(a), []);
  return [e, n];
}, KW = (e) => {
  let { closeOnClickOutside: t = !0 } = e, n = M9({ className: "excalidraw-modal-container" }), a = re(document.body.classList.contains("excalidraw-animations-disabled"));
  if (!n) return null;
  let i = (r) => {
    r.key === P.ESCAPE && (r.nativeEvent.stopImmediatePropagation(), r.stopPropagation(), e.onCloseRequest());
  };
  return M0(_("div", { className: ae("Modal", e.className, { "animations-disabled": a.current }), role: "dialog", "aria-modal": "true", onKeyDown: i, "aria-labelledby": e.labelledBy, "data-prevent-outside-click": !0, children: [p("div", { className: "Modal__background", onClick: t ? e.onCloseRequest : void 0 }), p("div", { className: "Modal__content", style: { "--max-width": `${e.maxWidth}px` }, tabIndex: 0, children: e.children })] }), n);
}, Y9 = Kt(/* @__PURE__ */ new Map()), j6 = async (e) => await Lp({ elements: e, appState: { exportBackground: !1, viewBackgroundColor: ke.white }, files: null, renderEmbeddables: !1, skipInliningFonts: !0 }), qW = (e, t, n) => {
  let [a, i] = oe();
  return Q(() => {
    if (t) if (e) {
      let r = n.get(e);
      r ? i(r) : (async () => {
        var o;
        let l = await j6(t);
        (o = l.querySelector(".style-fonts")) == null || o.remove(), l && (n.set(e, l), i(l));
      })();
    } else (async () => {
      let r = await j6(t);
      i(r);
    })();
  }, [e, t, n, i]), a;
}, Z9 = () => {
  let [e] = Et(Y9);
  return { clearLibraryCache: () => e.clear(), deleteItemsFromLibraryCache: (t) => {
    t.forEach((n) => e.delete(n));
  }, svgCache: e };
}, JW = class {
  constructor() {
    L(this, "jobs", []), L(this, "running", !1);
  }
  tick() {
    if (this.running) return;
    let e = this.jobs.shift();
    e ? (this.running = !0, e.promise.resolve(so(e.jobFactory, ...e.args).finally(() => {
      this.running = !1, this.tick();
    }))) : this.running = !1;
  }
  push(e, ...t) {
    let n = TM();
    return this.jobs.push({ jobFactory: e, promise: n, args: t }), this.tick(), n;
  }
}, QW = new Ba(), rc = Kt({ status: "loaded", isInitialized: !1, libraryItems: [] }), Ko = (e) => ki(e), eV = (e, t) => !e.find((n) => n.elements.length !== t.elements.length ? !1 : n.elements.every((a, i) => a.id === t.elements[i].id && a.versionNonce === t.elements[i].versionNonce)), tV = (e, t) => {
  let n = [];
  for (let a of t) eV(e, a) && n.push(a);
  return [...n, ...e];
}, nV = (e, t) => {
  let n = he(t), a = { deletedItems: /* @__PURE__ */ new Map(), addedItems: /* @__PURE__ */ new Map() };
  for (let r of e) n.has(r.id) || a.deletedItems.set(r.id, r);
  let i = he(e);
  for (let r of t) i.has(r.id) || a.addedItems.set(r.id, r);
  return a;
}, aV = class {
  constructor(e) {
    L(this, "currLibraryItems", []), L(this, "prevLibraryItems", Ko(this.currLibraryItems)), L(this, "app"), L(this, "updateQueue", []), L(this, "getLastUpdateTask", () => this.updateQueue[this.updateQueue.length - 1]), L(this, "notifyListeners", () => {
      var t, n;
      if (this.updateQueue.length > 0) ma.set(rc, (a) => ({ status: "loading", libraryItems: this.currLibraryItems, isInitialized: a.isInitialized }));
      else {
        ma.set(rc, { status: "loaded", libraryItems: this.currLibraryItems, isInitialized: !0 });
        try {
          let a = this.prevLibraryItems;
          this.prevLibraryItems = Ko(this.currLibraryItems);
          let i = Ko(this.currLibraryItems);
          (n = (t = this.app.props).onLibraryChange) == null || n.call(t, i), QW.trigger(nV(a, i), i);
        } catch (a) {
          console.error(a);
        }
      }
    }), L(this, "destroy", () => {
      this.updateQueue = [], this.currLibraryItems = [], ma.set(Y9, /* @__PURE__ */ new Map());
    }), L(this, "resetLibrary", () => this.setLibrary([])), L(this, "getLatestLibrary", () => new Promise(async (t) => {
      try {
        let n = await (this.getLastUpdateTask() || this.currLibraryItems);
        this.updateQueue.length > 0 ? t(this.getLatestLibrary()) : t(Ko(n));
      } catch {
        return t(this.currLibraryItems);
      }
    })), L(this, "updateLibrary", async ({ libraryItems: t, prompt: n = !1, merge: a = !1, openLibraryMenu: i = !1, defaultStatus: r = "unpublished" }) => (i && this.app.setState({ openSidebar: { name: ba.name, tab: Zd } }), this.setLibrary(() => new Promise(async (l, o) => {
      try {
        let c = await (typeof t == "function" && !(t instanceof Blob) ? t(this.currLibraryItems) : t), d;
        c instanceof Blob ? d = await MO(c, r) : d = Tp(c, r), !n || window.confirm(C("alerts.confirmAddLibrary", { numShapes: d.length })) ? (n && this.app.focusContainer(), l(a ? tV(this.currLibraryItems, d) : d)) : o(new qu());
      } catch (c) {
        o(c);
      }
    })))), L(this, "setLibrary", (t) => {
      let n = new Promise(async (a, i) => {
        try {
          await this.getLastUpdateTask(), typeof t == "function" && (t = t(this.currLibraryItems)), this.currLibraryItems = Ko(await t), a(this.currLibraryItems);
        } catch (r) {
          i(r);
        }
      }).catch((a) => {
        if (a.name === "AbortError") return console.warn("Library update aborted by user"), this.currLibraryItems;
        throw a;
      }).finally(() => {
        this.updateQueue = this.updateQueue.filter((a) => a !== n), this.notifyListeners();
      });
      return this.updateQueue.push(n), this.notifyListeners(), n;
    }), this.app = e;
  }
}, iV = aV, K9 = (e) => {
  let t = Math.ceil(Math.sqrt(e.length)), n = [], a = (f) => e.slice(f * t, f * t + t).reduce((h, U) => {
    let { height: m } = ya(U.elements);
    return Math.max(h, m);
  }, 0), i = (f) => {
    let h = 0, U = 0, m = 0;
    for (let g of e) {
      if (h % t === 0 && (U = 0), U === f) {
        let { width: b } = ya(g.elements);
        m = Math.max(m, b);
      }
      h++, U++;
    }
    return m;
  }, r = 0, l = 0, o = 0, c = 0, d = 0, s = 0, u = 0;
  for (let f of e) {
    d && d % t === 0 && (l += o + 50, r = 0, s = 0, u++), s === 0 && (o = a(u)), c = i(s);
    let { minX: h, minY: U, width: m, height: g } = ya(f.elements), b = (c - m) / 2, v = (o - g) / 2;
    n.push(...f.elements.map((y) => ({ ...y, x: y.x + r + b - h, y: y.y + l + v - U }))), r += c + 50, d++, s++;
  }
  return n;
}, id = class g0 {
  constructor(t) {
    L(this, "adapter"), this.adapter = t;
  }
  static async getLibraryItems(t, n, a = !0) {
    let i = () => new Promise(async (r, l) => {
      try {
        let o = await t.load({ source: n });
        r(Tp((o == null ? void 0 : o.libraryItems) || [], "published"));
      } catch (o) {
        l(o);
      }
    });
    return a ? g0.queue.push(i) : i();
  }
  getLibraryItems(t) {
    return g0.getLibraryItems(this.adapter, t, !1);
  }
};
L(id, "queue", new JW()), L(id, "run", async (e, t) => {
  let n = new id(e);
  return id.queue.push(() => t(n));
});
var rV = It(({ children: e, gap: t, align: n, justifyContent: a, className: i, style: r }, l) => p("div", { className: ae("Stack Stack_horizontal", i), style: { "--gap": t, alignItems: n, justifyContent: a, ...r }, ref: l, children: e })), lV = It(({ children: e, gap: t, align: n, justifyContent: a, className: i, style: r }, l) => p("div", { className: ae("Stack Stack_vertical", i), style: { "--gap": t, justifyItems: n, justifyContent: a, ...r }, ref: l, children: e })), jn = { Row: rV, Col: lV }, oV = ({ theme: e, id: t, libraryReturnUrl: n }) => {
  let a = n || window.location.origin + window.location.pathname;
  return p("a", { className: "library-menu-browse-button", href: `${we.VITE_APP_LIBRARY_URL}?target=${window.name || "_blank"}&referrer=${a}&useHash=true&token=${t}&theme=${e}&version=${Wu.excalidrawLibrary}`, target: "_excalidraw_libraries", children: C("labels.libraries") });
}, sV = oV, q9 = ({ libraryReturnUrl: e, theme: t, id: n, style: a, children: i, className: r }) => _("div", { className: ae("library-menu-control-buttons", r), style: a, children: [p(sV, { id: n, libraryReturnUrl: e, theme: t }), i] }), cV = /({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g, dV = /{{([\w-]+)}}/, uV = /<([\w-]+)>/, fV = /<\/([\w-]+)>/, hV = (e, t) => {
  let n = [{ name: "", children: [] }];
  return e.split(cV).filter(Boolean).forEach((a) => {
    let i = a.match(uV), r = a.match(fV), l = a.match(dV);
    if (i !== null) {
      let o = i[1];
      t.hasOwnProperty(o) ? n.push({ name: o, children: [] }) : console.warn(`Trans: missed to pass in prop ${o} for interpolating ${e}`);
    } else if (r !== null) if (r[1] === n[n.length - 1].name) {
      let o = n.pop(), c = Z.createElement(Z.Fragment, {}, ...o.children), d = t[o.name];
      typeof d == "function" && n[n.length - 1].children.push(d(c));
    } else console.warn(`Trans: unexpected end tag ${a} for interpolating ${e}`);
    else if (l !== null) {
      let o = l[1];
      t.hasOwnProperty(o) ? n[n.length - 1].children.push(t[o]) : console.warn(`Trans: key ${o} not in props for interpolating ${e}`);
    } else n[n.length - 1].children.push(a);
  }), n.length !== 1 && console.warn(`Trans: stack not empty for interpolating ${e}`), n[0].children;
}, pV = ({ i18nKey: e, children: t, ...n }) => {
  let { t: a } = fn();
  return Z.createElement(Z.Fragment, {}, ...hV(a(e), n));
}, Za = pV, UV = ({ label: e, onClick: t, className: n, children: a, actionType: i, type: r = "button", isLoading: l, ...o }) => {
  let c = i ? `Dialog__action-button--${i}` : "";
  return _("button", { className: ae("Dialog__action-button", c, n), type: r, "aria-label": e, onClick: t, ...o, children: [a && p("div", { style: l ? { visibility: "hidden" } : {}, children: a }), p("div", { style: l ? { visibility: "hidden" } : {}, children: e }), l && p("div", { style: { position: "absolute", inset: 0 }, children: p($i, {}) })] });
}, Eo = UV, mV = (e) => {
  let { onConfirm: t, onCancel: n, children: a, confirmText: i = C("buttons.confirm"), cancelText: r = C("buttons.cancel"), className: l = "", ...o } = e, c = Xt(), d = xf(EU), { container: s } = di();
  return _(Ia, { onCloseRequest: n, size: "small", ...o, className: `confirm-dialog ${l}`, children: [a, _("div", { className: "confirm-dialog-buttons", children: [p(Eo, { label: r, onClick: () => {
    c({ openMenu: null }), d(!1), za(() => {
      n();
    }), s == null || s.focus();
  } }), p(Eo, { label: i, onClick: () => {
    c({ openMenu: null }), d(!1), za(() => {
      t();
    }), s == null || s.focus();
  }, actionType: "danger" })] })] });
}, J9 = mV, Qr = class {
  static has(e) {
    try {
      return !!window.localStorage.getItem(e);
    } catch (t) {
      return console.warn(`localStorage.getItem error: ${t.message}`), !1;
    }
  }
  static get(e) {
    try {
      let t = window.localStorage.getItem(e);
      return t ? JSON.parse(t) : null;
    } catch (t) {
      return console.warn(`localStorage.getItem error: ${t.message}`), null;
    }
  }
};
L(Qr, "set", (e, t) => {
  try {
    return window.localStorage.setItem(e, JSON.stringify(t)), !0;
  } catch (n) {
    return console.warn(`localStorage.setItem error: ${n.message}`), !1;
  }
}), L(Qr, "delete", (e) => {
  try {
    window.localStorage.removeItem(e);
  } catch (t) {
    console.warn(`localStorage.removeItem error: ${t.message}`);
  }
});
var gV = async (e) => {
  let t = Math.round(8), n = Math.max(Math.round(128 / 64), 2), a = kM(e, 6), i = document.createElement("canvas");
  i.width = a[0].length * 128 + (a[0].length + 1) * (t * 2) - t * 2, i.height = a.length * 128 + (a.length + 1) * (t * 2) - t * 2;
  let r = i.getContext("2d");
  r.fillStyle = Yt.white, r.fillRect(0, 0, i.width, i.height);
  for (let [l, o] of e.entries()) {
    let c = await Dp({ elements: o.elements, files: null, maxWidthOrHeight: 128 }), { width: d, height: s } = c, u = Math.floor(l / 6) * (128 + t * 2), f = l % 6 * (128 + t * 2);
    r.drawImage(c, f + (128 - d) / 2 + t, u + (128 - s) / 2 + t), r.lineWidth = n, r.strokeStyle = Yt.gray[4], r.strokeRect(f + t / 2, u + t / 2, 128 + t, 128 + t);
  }
  return await X1(new File([await tc(i)], "preview", { type: de.png }), { outputType: de.jpg, maxWidthOrHeight: 5e3 });
}, bV = ({ libItem: e, appState: t, index: n, onChange: a, onRemove: i }) => {
  let r = re(null), l = re(null);
  return Q(() => {
    let o = r.current;
    o && (async () => {
      let c = await Lp({ elements: e.elements, appState: { ...t, viewBackgroundColor: Yt.white, exportBackground: !0 }, files: null, skipInliningFonts: !0 });
      o.innerHTML = c.outerHTML;
    })();
  }, [e.elements, t]), _("div", { className: "single-library-item", children: [e.status === "published" && p("span", { className: "single-library-item-status", children: C("labels.statusPublished") }), p("div", { ref: r, className: "single-library-item__svg" }), p(Te, { "aria-label": C("buttons.remove"), type: "button", icon: _o, className: "single-library-item--remove", onClick: i.bind(null, e.id), title: C("buttons.remove") }), _("div", { style: { display: "flex", margin: "0.8rem 0", width: "100%", fontSize: "14px", fontWeight: 500, flexDirection: "column" }, children: [_("label", { style: { display: "flex", justifyContent: "space-between", flexDirection: "column" }, children: [_("div", { style: { padding: "0.5em 0" }, children: [p("span", { style: { fontWeight: 500, color: Yt.gray[6] }, children: C("publishDialog.itemName") }), p("span", { "aria-hidden": "true", className: "required", children: "*" })] }), p("input", { type: "text", ref: l, style: { width: "80%", padding: "0.2rem" }, defaultValue: e.name, placeholder: "Item name", onChange: (o) => {
    a(o.target.value, n);
  } })] }), p("span", { className: "error", children: e.error })] })] });
}, vV = ({ onClose: e, libraryItems: t, appState: n, onSuccess: a, onError: i, updateItemsInStorage: r, onRemove: l }) => {
  let [o, c] = oe({ authorName: "", githubHandle: "", name: "", description: "", twitterHandle: "", website: "" }), [d, s] = oe(!1);
  Q(() => {
    let y = Qr.get(gs.PUBLISH_LIBRARY);
    y && c(y);
  }, []);
  let [u, f] = oe(t.slice());
  Q(() => {
    f(t.slice());
  }, [t]);
  let h = (y) => {
    c({ ...o, [y.target.name]: y.target.value });
  }, U = async (y) => {
    y.preventDefault(), s(!0);
    let w = [], x = !1;
    if (u.forEach((A) => {
      let D = "";
      A.name || (D = C("publishDialog.errors.required"), x = !0), w.push({ ...A, error: D });
    }), x) {
      f(w), s(!1);
      return;
    }
    let S = await gV(u), E = { type: Zn.excalidrawLibrary, version: Wu.excalidrawLibrary, source: O0, libraryItems: u }, M = JSON.stringify(E, null, 2), I = new Blob([M], { type: "application/json" }), T = new FormData();
    T.append("excalidrawLib", I), T.append("previewImage", S), T.append("previewImageType", S.type), T.append("title", o.name), T.append("authorName", o.authorName), T.append("githubHandle", o.githubHandle), T.append("name", o.name), T.append("description", o.description), T.append("twitterHandle", o.twitterHandle), T.append("website", o.website), fetch(`${we.VITE_APP_LIBRARY_BACKEND}/submit`, { method: "post", body: T }).then((A) => A.ok ? A.json().then(({ url: D }) => {
      Qr.delete(gs.PUBLISH_LIBRARY), a({ url: D, authorName: o.authorName, items: u });
    }) : A.json().catch(() => {
      throw new Error(A.statusText || "something went wrong");
    }).then((D) => {
      throw new Error(D.message || A.statusText || "something went wrong");
    }), (A) => {
      console.error(A), i(A), s(!1);
    }).catch((A) => {
      console.error(A), i(A), s(!1);
    });
  }, m = () => {
    let y = [];
    return u.forEach((w, x) => {
      y.push(p("div", { className: "single-library-item-wrapper", children: p(bV, { libItem: w, appState: n, index: x, onChange: (S, E) => {
        let M = u.slice();
        M[E].name = S, f(M);
      }, onRemove: l }) }, x));
    }), p("div", { className: "selected-library-items", children: y });
  }, g = _e(() => {
    r(u), Qr.set(gs.PUBLISH_LIBRARY, o), e();
  }, [u, e, r, o]), b = !!t.length, v = t.some((y) => y.status === "published");
  return p(Ia, { onCloseRequest: g, title: C("publishDialog.title"), className: "publish-library", children: b ? _("form", { onSubmit: U, children: [p("div", { className: "publish-library-note", children: p(Za, { i18nKey: "publishDialog.noteDescription", link: (y) => p("a", { href: "https://libraries.excalidraw.com", target: "_blank", rel: "noopener noreferrer", children: y }) }) }), p("span", { className: "publish-library-note", children: p(Za, { i18nKey: "publishDialog.noteGuidelines", link: (y) => p("a", { href: "https://github.com/excalidraw/excalidraw-libraries#guidelines", target: "_blank", rel: "noopener noreferrer", children: y }) }) }), p("div", { className: "publish-library-note", children: C("publishDialog.noteItems") }), v && p("span", { className: "publish-library-note publish-library-warning", children: C("publishDialog.republishWarning") }), m(), _("div", { className: "publish-library__fields", children: [_("label", { children: [_("div", { children: [p("span", { children: C("publishDialog.libraryName") }), p("span", { "aria-hidden": "true", className: "required", children: "*" })] }), p("input", { type: "text", name: "name", required: !0, value: o.name, onChange: h, placeholder: C("publishDialog.placeholder.libraryName") })] }), _("label", { style: { alignItems: "flex-start" }, children: [_("div", { children: [p("span", { children: C("publishDialog.libraryDesc") }), p("span", { "aria-hidden": "true", className: "required", children: "*" })] }), p("textarea", { name: "description", rows: 4, required: !0, value: o.description, onChange: h, placeholder: C("publishDialog.placeholder.libraryDesc") })] }), _("label", { children: [_("div", { children: [p("span", { children: C("publishDialog.authorName") }), p("span", { "aria-hidden": "true", className: "required", children: "*" })] }), p("input", { type: "text", name: "authorName", required: !0, value: o.authorName, onChange: h, placeholder: C("publishDialog.placeholder.authorName") })] }), _("label", { children: [p("span", { children: C("publishDialog.githubUsername") }), p("input", { type: "text", name: "githubHandle", value: o.githubHandle, onChange: h, placeholder: C("publishDialog.placeholder.githubHandle") })] }), _("label", { children: [p("span", { children: C("publishDialog.twitterUsername") }), p("input", { type: "text", name: "twitterHandle", value: o.twitterHandle, onChange: h, placeholder: C("publishDialog.placeholder.twitterHandle") })] }), _("label", { children: [p("span", { children: C("publishDialog.website") }), p("input", { type: "text", name: "website", pattern: "https?://.+", title: C("publishDialog.errors.website"), value: o.website, onChange: h, placeholder: C("publishDialog.placeholder.website") })] }), p("span", { className: "publish-library-note", children: p(Za, { i18nKey: "publishDialog.noteLicense", link: (y) => p("a", { href: "https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE", target: "_blank", rel: "noopener noreferrer", children: y }) }) })] }), _("div", { className: "publish-library__buttons", children: [p(Eo, { label: C("buttons.cancel"), onClick: g, "data-testid": "cancel-clear-canvas-button" }), p(Eo, { type: "submit", label: C("buttons.submit"), actionType: "primary", isLoading: d })] })] }) : p("p", { style: { padding: "1em", textAlign: "center", fontWeight: 500 }, children: C("publishDialog.atleastOneLibItem") }) });
}, yV = vV, Q9 = ({ className: e = "", children: t, onToggle: n, title: a, ...i }) => {
  let r = Ht(), l = ae(`dropdown-menu-button ${e}`, "zen-mode-transition", { "dropdown-menu-button--mobile": r.editor.isMobile }).trim();
  return p("button", { "data-prevent-outside-click": !0, className: l, onClick: n, type: "button", "data-testid": "dropdown-menu-button", title: a, ...i, children: t });
}, wV = Q9;
Q9.displayName = "DropdownMenuTrigger";
var ev = () => p("div", { style: { height: "1px", backgroundColor: "var(--default-border-color)", margin: ".5rem 0" } }), EV = ev;
ev.displayName = "DropdownMenuSeparator";
var tv = ({ children: e, onClickOutside: t, className: n = "", onSelect: a, style: i }) => {
  let r = Ht(), l = re(null), o = kf({ onClickOutside: t });
  pU(l, () => {
    var d;
    (d = o.onClickOutside) == null || d.call(o);
  }), Q(() => {
    let d = (u) => {
      var f;
      u.key === P.ESCAPE && (u.stopImmediatePropagation(), (f = o.onClickOutside) == null || f.call(o));
    }, s = { capture: !0 };
    return document.addEventListener("keydown", d, s), () => {
      document.removeEventListener("keydown", d, s);
    };
  }, [o]);
  let c = ae(`dropdown-menu ${n}`, { "dropdown-menu--mobile": r.editor.isMobile }).trim();
  return p(A9.Provider, { value: { onSelect: a }, children: p("div", { ref: l, className: c, style: i, "data-testid": "dropdown-menu", children: r.editor.isMobile ? p(jn.Col, { className: "dropdown-menu-container", children: e }) : p(wa, { className: "dropdown-menu-container", padding: 2, style: { zIndex: 2 }, children: e }) }) });
};
tv.displayName = "DropdownMenuContent";
var xV = tv, nv = ({ icon: e, shortcut: t, href: n, children: a, onSelect: i, className: r = "", selected: l, rel: o = "noreferrer", ...c }) => {
  let d = L9(c.onClick, i);
  return p("a", { ...c, href: n, target: "_blank", rel: "noreferrer", className: D9(r, l), title: c.title ?? c["aria-label"], onClick: d, children: p(R9, { icon: e, shortcut: t, children: a }) });
}, Nd = nv;
nv.displayName = "DropdownMenuItemLink";
var SV = ({ children: e, className: t = "", selected: n, ...a }) => p("div", { ...a, className: `dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n ? "dropdown-menu-item--selected" : ""}`.trim(), children: e }), kV = SV, MV = (e) => Z.Children.toArray(e).find((n) => Z.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuTrigger") || null, CV = (e) => Z.Children.toArray(e).find((n) => Z.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuContent") || null, Hi = ({ children: e, open: t }) => {
  let n = MV(e), a = CV(e);
  return _(le, { children: [n, t && a] });
};
Hi.Trigger = wV;
Hi.Content = xV;
Hi.Item = aa;
Hi.ItemLink = Nd;
Hi.ItemCustom = kV;
Hi.Group = u0;
Hi.Separator = EV;
var ct = Hi;
Hi.displayName = "DropdownMenu";
var IV = (e, t) => e.filter((n) => t.includes(n.id)), TV = ({ setAppState: e, selectedItems: t, library: n, onRemoveFromLibrary: a, resetLibrary: i, onSelectItems: r, appState: l, className: o }) => {
  let [c] = Et(rc), [d, s] = Et(EU), u = () => {
    let T = t.length ? C("alerts.removeItemsFromsLibrary", { count: t.length }) : C("alerts.resetLibrary"), A = t.length ? C("confirmDialog.removeItemsFromLib") : C("confirmDialog.resetLibrary");
    return p(J9, { onConfirm: () => {
      t.length ? a() : i(), h(!1);
    }, onCancel: () => {
      h(!1);
    }, title: A, children: p("p", { children: T }) });
  }, [f, h] = oe(!1), U = !!t.length, m = U ? c.libraryItems.filter((T) => t.includes(T.id)) : c.libraryItems, g = C(U ? "buttons.remove" : "buttons.resetLibrary"), [b, v] = oe(!1), [y, w] = oe(null), x = _e(() => _(Ia, { onCloseRequest: () => w(null), title: C("publishSuccessDialog.title"), className: "publish-library-success", size: "small", children: [p("p", { children: p(Za, { i18nKey: "publishSuccessDialog.content", authorName: y.authorName, link: (T) => p("a", { href: y == null ? void 0 : y.url, target: "_blank", rel: "noopener noreferrer", children: T }) }) }), p(Te, { type: "button", title: C("buttons.close"), "aria-label": C("buttons.close"), label: C("buttons.close"), onClick: () => w(null), "data-testid": "publish-library-success-close", className: "publish-library-success-close" })] }), [w, y]), S = (T, A) => {
    v(!1), w({ url: T.url, authorName: T.authorName });
    let D = A.slice();
    D.forEach((R) => {
      t.includes(R.id) && (R.status = "published");
    }), n.setLibrary(D);
  }, E = async () => {
    try {
      await n.updateLibrary({ libraryItems: pp({ description: "Excalidraw library files" }), merge: !0, openLibraryMenu: !0 });
    } catch (T) {
      if ((T == null ? void 0 : T.name) === "AbortError") {
        console.warn(T);
        return;
      }
      e({ errorMessage: C("errors.importLibraryError") });
    }
  }, M = async () => {
    let T = U ? m : await n.getLatestLibrary();
    qP(T).catch(t8).catch((A) => {
      e({ errorMessage: A.message });
    });
  }, I = () => _(ct, { open: d, children: [p(ct.Trigger, { onToggle: () => s(!d), children: oC }), _(ct.Content, { onClickOutside: () => s(!1), onSelect: () => s(!1), className: "library-menu", children: [!U && p(ct.Item, { onSelect: E, icon: J0, "data-testid": "lib-dropdown--load", children: C("buttons.load") }), !!m.length && p(ct.Item, { onSelect: M, icon: Zu, "data-testid": "lib-dropdown--export", children: C("buttons.export") }), !!m.length && p(ct.Item, { onSelect: () => h(!0), icon: sl, children: g }), U && p(ct.Item, { icon: gI, onSelect: () => v(!0), "data-testid": "lib-dropdown--remove", children: C("buttons.publishLibrary") })] })] });
  return _("div", { className: ae("library-menu-dropdown-container", o), children: [I(), t.length > 0 && p("div", { className: "library-actions-counter", children: t.length }), f && u(), b && p(yV, { onClose: () => v(!1), libraryItems: IV(c.libraryItems, t), appState: l, onSuccess: (T) => S(T, c.libraryItems), onError: (T) => window.alert(T), updateItemsInStorage: () => n.setLibrary(c.libraryItems), onRemove: (T) => r(t.filter((A) => A !== T)) }), y && x()] });
}, Y6 = ({ selectedItems: e, onSelectItems: t, className: n }) => {
  let { library: a } = ci(), { clearLibraryCache: i, deleteItemsFromLibraryCache: r } = Z9(), l = bn(), o = Xt(), [c] = Et(rc), d = async (s) => {
    let u = s.filter((f) => !e.includes(f.id));
    a.setLibrary(u).catch(() => {
      o({ errorMessage: C("alerts.errorRemovingFromLibrary") });
    }), r(e), t([]);
  };
  return p(TV, { appState: l, setAppState: o, selectedItems: e, onSelectItems: t, library: a, onRemoveFromLibrary: () => d(c.libraryItems), resetLibrary: () => {
    a.resetLibrary(), i();
  }, className: n });
}, _V = So(({ id: e, elements: t, isPending: n, onClick: a, selected: i, onToggle: r, onDrag: l, svgCache: o }) => {
  let c = re(null), d = qW(e, t, o);
  Q(() => {
    let U = c.current;
    if (U) return d && (U.innerHTML = d.outerHTML), () => {
      U.innerHTML = "";
    };
  }, [d]);
  let [s, u] = oe(!1), f = Ht().editor.isMobile, h = n && p("div", { className: "library-unit__adder", children: lC });
  return _("div", { className: ae("library-unit", { "library-unit__active": t, "library-unit--hover": t && s, "library-unit--selected": i, "library-unit--skeleton": !d }), onMouseEnter: () => u(!0), onMouseLeave: () => u(!1), children: [p("div", { className: ae("library-unit__dragger", { "library-unit__pulse": !!n }), ref: c, draggable: !!t, onClick: t || n ? (U) => {
    e && U.shiftKey ? r(e, U) : a(e);
  } : void 0, onDragStart: (U) => {
    if (!e) {
      U.preventDefault();
      return;
    }
    u(!1), l(e, U);
  } }), h, e && t && (s || f || i) && p(vU, { checked: i, onChange: (U, m) => r(e, m), className: "library-unit__checkbox" })] });
}), AV = () => p("div", { className: "library-unit library-unit--skeleton" });
function DV() {
  return [!1, _e((e) => e(), [])];
}
var LV = Z.useTransition || DV, Z6 = ({ children: e }) => p("div", { className: "library-menu-items-container__grid", children: e }), zh = So(({ items: e, onItemSelectToggle: t, onItemDrag: n, isItemSelected: a, onClick: i, svgCache: r, itemsRenderedPerBatch: l }) => {
  let [, o] = LV(), [c, d] = oe(0);
  return Q(() => {
    c < e.length && o(() => {
      d(c + l);
    });
  }, [c, e.length, o, l]), p(le, { children: e.map((s, u) => u < c ? p(_V, { elements: s == null ? void 0 : s.elements, isPending: !(s != null && s.id) && !!(s != null && s.elements), onClick: i, svgCache: r, id: s == null ? void 0 : s.id, selected: a(s.id), onToggle: t, onDrag: n }, (s == null ? void 0 : s.id) ?? u) : p(AV, {}, u)) });
}), RV = Kt(0), PV = (e) => {
  let [t, n] = Et(RV);
  return Q(() => {
    let { current: a } = e;
    if (!a) return;
    let i = dc(() => {
      let { scrollTop: r } = a;
      n(r);
    }, 200);
    return a.addEventListener("scroll", i), () => {
      i.cancel(), a.removeEventListener("scroll", i);
    };
  }, [e, n]), t;
}, NV = 17, OV = 64;
function $V({ isLoading: e, libraryItems: t, onAddToLibrary: n, onInsertLibraryItems: a, pendingElements: i, theme: r, id: l, libraryReturnUrl: o, onSelectItems: c, selectedItems: d }) {
  let s = re(null), u = PV(s);
  Q(() => {
    var T;
    u > 0 && ((T = s.current) == null || T.scrollTo(0, u));
  }, []);
  let { svgCache: f } = Z9(), h = $e(() => t.filter((T) => T.status !== "published"), [t]), U = $e(() => t.filter((T) => T.status === "published"), [t]), m = !t.length && !i.length, g = !i.length && !h.length && !U.length, [b, v] = oe(null), y = _e((T, A) => {
    let D = !d.includes(T), R = [...h, ...U];
    if (D) {
      if (A.shiftKey && b) {
        let O = R.findIndex((j) => j.id === b), $ = R.findIndex((j) => j.id === T);
        if (O === -1 || $ === -1) {
          c([...d, T]);
          return;
        }
        let F = he(d), N = R.reduce((j, z, Y) => ((Y >= O && Y <= $ || F.has(z.id)) && j.push(z.id), j), []);
        c(N);
      } else c([...d, T]);
      v(T);
    } else v(null), c(d.filter((O) => O !== T));
  }, [b, c, U, d, h]), w = _e((T) => {
    let A;
    return d.includes(T) ? A = t.filter((D) => d.includes(D.id)) : A = t.filter((D) => D.id === T), A.map((D) => ({ ...D, elements: O7(D.elements, { randomizeSeed: !0 }) }));
  }, [t, d]), x = _e((T, A) => {
    A.dataTransfer.setData(de.excalidrawlib, X7(w(T)));
  }, [w]), S = _e((T) => T ? d.includes(T) : !1, [d]), E = _e(() => {
    n(i);
  }, [i, n]), M = _e((T) => {
    T && a(w(T));
  }, [w, a]), I = f.size >= t.length ? OV : NV;
  return _("div", { className: "library-menu-items-container", style: i.length || h.length || U.length ? { justifyContent: "flex-start" } : { borderBottom: 0 }, children: [!g && p(Y6, { selectedItems: d, onSelectItems: c, className: "library-menu-dropdown-container--in-heading" }), _(jn.Col, { className: "library-menu-items-container__items", align: "start", gap: 1, style: { flex: U.length > 0 ? 1 : "0 1 auto", marginBottom: 0 }, ref: s, children: [_(le, { children: [!g && p("div", { className: "library-menu-items-container__header", children: C("labels.personalLib") }), e && p("div", { style: { position: "absolute", top: "var(--container-padding-y)", right: "var(--container-padding-x)", transform: "translateY(50%)" }, children: p($i, {}) }), !i.length && !h.length ? _("div", { className: "library-menu-items__no-items", children: [p("div", { className: "library-menu-items__no-items__label", children: C("library.noItems") }), p("div", { className: "library-menu-items__no-items__hint", children: U.length > 0 ? C("library.hint_emptyPrivateLibrary") : C("library.hint_emptyLibrary") })] }) : _(Z6, { children: [i.length > 0 && p(zh, { itemsRenderedPerBatch: I, items: [{ id: null, elements: i }], onItemSelectToggle: y, onItemDrag: x, onClick: E, isItemSelected: S, svgCache: f }), p(zh, { itemsRenderedPerBatch: I, items: h, onItemSelectToggle: y, onItemDrag: x, onClick: M, isItemSelected: S, svgCache: f })] })] }), _(le, { children: [(U.length > 0 || i.length > 0 || h.length > 0) && p("div", { className: "library-menu-items-container__header library-menu-items-container__header--excal", children: C("labels.excalidrawLib") }), U.length > 0 ? p(Z6, { children: p(zh, { itemsRenderedPerBatch: I, items: U, onItemSelectToggle: y, onItemDrag: x, onClick: M, isItemSelected: S, svgCache: f }) }) : h.length > 0 ? p("div", { style: { margin: "1rem 0", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", width: "100%", fontSize: ".9rem" }, children: C("library.noItems") }) : null] }), m && p(q9, { style: { padding: "16px 0", width: "100%" }, id: l, libraryReturnUrl: o, theme: r, children: p(Y6, { selectedItems: d, onSelectItems: c }) })] })] });
}
var EU = Kt(!1), K6 = ({ children: e }) => p("div", { className: "layer-ui__library", children: e }), zV = So(({ onInsertLibraryItems: e, pendingElements: t, onAddToLibrary: n, setAppState: a, libraryReturnUrl: i, library: r, id: l, theme: o, selectedItems: c, onSelectItems: d }) => {
  let [s] = Et(rc), u = _e((U) => {
    (async (m, g) => {
      rt("element", "addToLibrary", "ui");
      for (let v of Gb) if (m.some((y) => y.type === v)) return a({ errorMessage: C(`errors.libraryElementTypeError.${v}`) });
      let b = [{ status: "unpublished", elements: m, id: na(), created: Date.now() }, ...g];
      n(), r.setLibrary(b).catch(() => {
        a({ errorMessage: C("alerts.errorAddingToLibrary") });
      });
    })(U, s.libraryItems);
  }, [n, r, a, s.libraryItems]), f = $e(() => s.libraryItems, [s]);
  if (s.status === "loading" && !s.isInitialized) return p(K6, { children: p("div", { className: "layer-ui__library-message", children: _("div", { children: [p($i, { size: "2em" }), p("span", { children: C("labels.libraryLoadingMessage") })] }) }) });
  let h = s.libraryItems.length > 0 || t.length > 0;
  return _(K6, { children: [p($V, { isLoading: s.status === "loading", libraryItems: f, onAddToLibrary: u, onInsertLibraryItems: e, pendingElements: t, id: l, libraryReturnUrl: i, theme: o, onSelectItems: d, selectedItems: c }), h && p(q9, { className: "library-menu-control-buttons--at-bottom", style: { padding: "16px 12px 0 12px" }, id: l, libraryReturnUrl: i, theme: o })] });
}), Fh = (e, t) => ({ elements: e, pending: Ee(e, { selectedElementIds: t }, { includeBoundTextElement: !0, includeElementsInFrames: !0 }), selectedElementIds: t }), FV = (e, t) => {
  let n = Lf(), [a, i] = oe(() => Fh(n, e.selectedElementIds)), r = re(/* @__PURE__ */ new Map());
  return Q(() => {
    for (let l of a.pending) r.current.set(l.id, l.version);
  }, [a.pending]), Q(() => {
    t.state.cursorButton === "up" && t.state.activeTool.type === "selection" && i((l) => {
      var c;
      if (!en(l.selectedElementIds, e.selectedElementIds)) return r.current.clear(), Fh(n, e.selectedElementIds);
      let o = t.scene.getNonDeletedElementsMap();
      for (let d of Object.keys(e.selectedElementIds)) {
        let s = (c = o.get(d)) == null ? void 0 : c.version;
        if (s && s !== r.current.get(d)) return Fh(n, e.selectedElementIds);
      }
      return l;
    });
  }, [t, t.state.cursorButton, t.state.activeTool.type, e.selectedElementIds, n]), a.pending;
}, BV = So(() => {
  let e = ci(), { onInsertElements: t } = e, n = Mc(), a = bn(), i = Xt(), [r, l] = oe([]), o = $e(() => e.library, [e.library]), c = FV(a, e), d = _e((u) => {
    t(K9(u));
  }, [t]), s = _e(() => {
    i({ selectedElementIds: {}, selectedGroupIds: {}, activeEmbeddable: null });
  }, [i]);
  return p(zV, { pendingElements: c, onInsertLibraryItems: d, onAddToLibrary: s, setAppState: i, libraryReturnUrl: n.libraryReturnUrl, library: o, id: e.id, theme: a.theme, selectedItems: r, onSelectItems: l });
});
function HV(e) {
  if (e && typeof e == "number") return e;
  switch (e) {
    case "small":
      return 550;
    case "wide":
      return 1024;
    case "regular":
    default:
      return 800;
  }
}
var Ia = (e) => {
  let [t, n] = ZW(), [a] = oe(document.activeElement), { id: i } = di(), r = Ht().viewport.isMobile;
  Q(() => {
    if (!t) return;
    let d = b1(t);
    setTimeout(() => {
      d.length > 0 && e.autofocus !== !1 && (d[1] || d[0]).focus();
    });
    let s = (u) => {
      if (u.key === P.TAB) {
        let f = b1(t), { activeElement: h } = document, U = f.findIndex((m) => m === h);
        U === 0 && u.shiftKey ? (f[f.length - 1].focus(), u.preventDefault()) : U === f.length - 1 && !u.shiftKey && (f[0].focus(), u.preventDefault());
      }
    };
    return t.addEventListener("keydown", s), () => t.removeEventListener("keydown", s);
  }, [t, e.autofocus]);
  let l = Xt(), o = xf(EU), c = () => {
    l({ openMenu: null }), o(!1), a.focus(), e.onCloseRequest();
  };
  return p(KW, { className: ae("Dialog", e.className, { "Dialog--fullscreen": r }), labelledBy: "dialog-title", maxWidth: HV(e.size), onCloseRequest: c, closeOnClickOutside: e.closeOnClickOutside, children: _(wa, { ref: n, children: [e.title && p("h2", { id: `${i}-dialog-title`, className: "Dialog__title", children: p("span", { className: "Dialog__titleContent", children: e.title }) }), r && p("button", { className: "Dialog__close", onClick: c, title: C("buttons.close"), "aria-label": C("buttons.close"), type: "button", children: _o }), p("div", { className: "Dialog__content", children: e.children })] }) });
}, xo = ({ type: e = "button", onSelect: t, selected: n, children: a, className: i = "", ...r }) => p("button", { onClick: Gu(r.onClick, (l) => {
  t();
}), type: e, className: ae("excalidraw-button", i, { selected: n }), ...r, children: a }), xU = It(({ onChange: e, label: t, fullWidth: n, placeholder: a, readonly: i, selectOnRender: r, onKeyDown: l, isRedacted: o = !1, icon: c, className: d, ...s }, u) => {
  let f = re(null);
  N5(u, () => f.current), _n(() => {
    var m, g;
    r && ((m = f.current) == null || m.focus(), (g = f.current) == null || g.select());
  }, [r]);
  let [h, U] = oe(!1);
  return _("div", { className: ae("ExcTextField", d, { "ExcTextField--fullWidth": n, "ExcTextField--hasIcon": !!c }), onClick: () => {
    var m;
    (m = f.current) == null || m.focus();
  }, children: [c, t && p("div", { className: "ExcTextField__label", children: t }), _("div", { className: ae("ExcTextField__input", { "ExcTextField__input--readonly": i }), children: [p("input", { className: ae({ "is-redacted": "value" in s && s.value && o && !h }), readOnly: i, value: "value" in s ? s.value : void 0, defaultValue: "defaultValue" in s ? s.defaultValue : void 0, placeholder: a, ref: f, onChange: (m) => e == null ? void 0 : e(m.target.value), onKeyDown: l }), o && p(xo, { onSelect: () => U(!h), style: { border: 0, userSelect: "none" }, children: h ? kI : ep })] })] });
}), XV = { toggleTheme: [V("Shift+Alt+D")], saveScene: [V("CtrlOrCmd+S")], loadScene: [V("CtrlOrCmd+O")], clearCanvas: [V("CtrlOrCmd+Delete")], imageExport: [V("CtrlOrCmd+Shift+E")], commandPalette: [V("CtrlOrCmd+/"), V("CtrlOrCmd+Shift+P")], cut: [V("CtrlOrCmd+X")], copy: [V("CtrlOrCmd+C")], paste: [V("CtrlOrCmd+V")], copyStyles: [V("CtrlOrCmd+Alt+C")], pasteStyles: [V("CtrlOrCmd+Alt+V")], selectAll: [V("CtrlOrCmd+A")], deleteSelectedElements: [V("Delete")], duplicateSelection: [V("CtrlOrCmd+D"), V(`Alt+${C("helpDialog.drag")}`)], sendBackward: [V("CtrlOrCmd+[")], bringForward: [V("CtrlOrCmd+]")], sendToBack: [V(Qa ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")], bringToFront: [V(Qa ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")], copyAsPng: [V("Shift+Alt+C")], group: [V("CtrlOrCmd+G")], ungroup: [V("CtrlOrCmd+Shift+G")], gridMode: [V("CtrlOrCmd+'")], zenMode: [V("Alt+Z")], objectsSnapMode: [V("Alt+S")], stats: [V("Alt+/")], addToLibrary: [], flipHorizontal: [V("Shift+H")], flipVertical: [V("Shift+V")], viewMode: [V("Alt+R")], hyperlink: [V("CtrlOrCmd+K")], toggleElementLock: [V("CtrlOrCmd+Shift+L")], resetZoom: [V("CtrlOrCmd+0")], zoomOut: [V("CtrlOrCmd+-")], zoomIn: [V("CtrlOrCmd++")], zoomToFitSelection: [V("Shift+3")], zoomToFit: [V("Shift+1")], zoomToFitSelectionInViewport: [V("Shift+2")], toggleEraserTool: [V("E")], toggleHandTool: [V("H")], setFrameAsActiveTool: [V("F")], saveFileToDisk: [V("CtrlOrCmd+S")], saveToActiveFile: [V("CtrlOrCmd+S")], toggleShortcuts: [V("?")], searchMenu: [V("CtrlOrCmd+F")], wrapSelectionInFrame: [] }, sn = (e, t = 0) => {
  let n = XV[e];
  return n && n.length > 0 ? n[t] || n[0] : "";
}, WV = "\\u0300-\\u036f", VV = "\\ufe20-\\ufe2f", GV = "\\u20d0-\\u20ff", jV = WV + VV + GV, YV = `[${jV}]`, ZV = RegExp(YV, "g"), KV = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, qV = { : "A", : "A", : "A", : "A", : "A", : "A", : "a", : "a", : "a", : "a", : "a", : "a", : "C", : "c", : "D", : "d", : "E", : "E", : "E", : "E", : "e", : "e", : "e", : "e", : "I", : "I", : "I", : "I", : "i", : "i", : "i", : "i", : "N", : "n", : "O", : "O", : "O", : "O", : "O", : "O", : "o", : "o", : "o", : "o", : "o", : "o", : "U", : "U", : "U", : "U", : "u", : "u", : "u", : "u", : "Y", : "y", : "y", : "E", : "e", : "T", : "t", : "s", : "A", : "A", : "A", : "a", : "a", : "a", : "C", : "C", : "C", : "C", : "c", : "c", : "c", : "c", : "D", : "D", : "d", : "d", : "E", : "E", : "E", : "E", : "E", : "e", : "e", : "e", : "e", : "e", : "G", : "G", : "G", : "G", : "g", : "g", : "g", : "g", : "H", : "H", : "h", : "h", : "I", : "I", : "I", : "I", : "I", : "i", : "i", : "i", : "i", : "i", : "J", : "j", : "K", : "k", : "k", : "L", : "L", : "L", : "L", : "L", : "l", : "l", : "l", : "l", : "l", : "N", : "N", : "N", : "N", : "n", : "n", : "n", : "n", : "O", : "O", : "O", : "o", : "o", : "o", : "R", : "R", : "R", : "r", : "r", : "r", : "S", : "S", : "S", : "S", : "s", : "s", : "s", : "s", : "T", : "T", : "T", : "t", : "t", : "t", : "U", : "U", : "U", : "U", : "U", : "U", : "u", : "u", : "u", : "u", : "u", : "u", : "W", : "w", : "Y", : "y", : "Y", : "Z", : "Z", : "Z", : "z", : "z", : "z", : "I", : "i", : "E", : "e", : "n", : "s" }, q6 = (e) => e.replace(KV, (t) => qV[t] || t).replace(ZV, ""), av = Z.createContext(null), Fn = () => Z.useContext(av), JV = W3(), QV = () => Z.useMemo(() => ({ MainMenuTunnel: La(), WelcomeScreenMenuHintTunnel: La(), WelcomeScreenToolbarHintTunnel: La(), WelcomeScreenHelpHintTunnel: La(), WelcomeScreenCenterTunnel: La(), FooterCenterTunnel: La(), DefaultSidebarTriggerTunnel: La(), DefaultSidebarTabTriggersTunnel: La(), OverwriteConfirmDialogTunnel: La(), TTDDialogTriggerTunnel: La(), tunnelsJotai: JV }), []), iv = (e, t) => {
  var a;
  let n = ((a = t[0]) == null ? void 0 : a.type) || null;
  for (let i of t) if (i.type !== n) {
    n = null;
    break;
  }
  return I1(e.activeTool.type) && e.activeTool.type !== "image" && n !== "image" && n !== "frame" && n !== "magicframe" || t.some((i) => I1(i.type));
}, rv = (e, t) => fo(e.activeTool.type) || t.some((n) => fo(n.type)), lv = ({ appState: e, elementsMap: t, renderAction: n, app: a }) => {
  let i = g3(t, e), r = !1;
  i.length === 2 && (ta(i[0]) || ta(i[1])) && (r = !0);
  let l = !!(e.editingTextElement || e.newElement), o = Ht(), c = document.documentElement.getAttribute("dir") === "rtl", d = fo(e.activeTool.type) && !pa(e.currentItemBackgroundColor) || i.some((U) => fo(U.type) && !pa(U.backgroundColor)), s = i.length === 1 || r, u = !e.editingLinearElement && i.length === 1 && me(i[0]) && !te(i[0]), f = !e.croppingElementId && i.length === 1 && Oe(i[0]), h = !r && zn(e, a);
  return _("div", { className: "panelColumn", children: [p("div", { children: iv(e, i) && n("changeStrokeColor") }), rv(e, i) && p("div", { children: n("changeBackgroundColor") }), d && n("changeFillStyle"), (Cm(e.activeTool.type) || i.some((U) => Cm(U.type))) && n("changeStrokeWidth"), (e.activeTool.type === "freedraw" || i.some((U) => U.type === "freedraw")) && n("changeStrokeShape"), (Im(e.activeTool.type) || i.some((U) => Im(U.type))) && _(le, { children: [n("changeStrokeStyle"), n("changeSloppiness")] }), (T1(e.activeTool.type) || i.some((U) => T1(U.type))) && p(le, { children: n("changeRoundness") }), (Tm(e.activeTool.type) || i.some((U) => Tm(U.type))) && p(le, { children: n("changeArrowType") }), (e.activeTool.type === "text" || i.some(J)) && _(le, { children: [n("changeFontFamily"), n("changeFontSize"), (e.activeTool.type === "text" || vP(i, t)) && n("changeTextAlign")] }), bP(i, t) && n("changeVerticalAlign"), (ou(e.activeTool.type) || i.some((U) => ou(U.type))) && p(le, { children: n("changeArrowhead") }), n("changeOpacity"), _("fieldset", { children: [p("legend", { children: C("labels.layers") }), _("div", { className: "buttonList", children: [n("sendToBack"), n("sendBackward"), n("bringForward"), n("bringToFront")] })] }), h && !r && _("fieldset", { children: [p("legend", { children: C("labels.align") }), _("div", { className: "buttonList", children: [c ? _(le, { children: [n("alignRight"), n("alignHorizontallyCentered"), n("alignLeft")] }) : _(le, { children: [n("alignLeft"), n("alignHorizontallyCentered"), n("alignRight")] }), i.length > 2 && n("distributeHorizontally"), p("div", { style: { flexBasis: "100%", height: 0 } }), _("div", { style: { display: "flex", flexWrap: "wrap", gap: ".5rem", marginTop: "-0.5rem" }, children: [n("alignTop"), n("alignVerticallyCentered"), n("alignBottom"), i.length > 2 && n("distributeVertically")] })] })] }), !l && i.length > 0 && _("fieldset", { children: [p("legend", { children: C("labels.actions") }), _("div", { className: "buttonList", children: [!o.editor.isMobile && n("duplicateSelection"), !o.editor.isMobile && n("deleteSelectedElements"), n("group"), n("ungroup"), s && n("hyperlink"), f && n("cropEditor"), u && n("toggleLinearEditor")] })] })] });
}, ov = ({ activeTool: e, appState: t, app: n, UIOptions: a }) => {
  let [i, r] = oe(!1), l = e.type === "frame", o = e.type === "laser", c = e.type === "embeddable", { TTDDialogTriggerTunnel: d } = Fn();
  return _(le, { children: [ip.map(({ value: s, icon: u, key: f, numericKey: h, fillable: U }, m) => {
    var y;
    if (((y = a.tools) == null ? void 0 : y[s]) === !1) return null;
    let g = C(`toolBar.${s}`), b = f && ys(typeof f == "string" ? f : f[0]), v = b ? `${b} ${C("helpDialog.or")} ${h}` : `${h}`;
    return p(Te, { className: ae("Shape", { fillable: U }), type: "radio", icon: u, checked: e.type === s, name: "editor-current-shape", title: `${ys(g)}  ${v}`, keyBindingLabel: h || b, "aria-label": ys(g), "aria-keyshortcuts": v, "data-testid": `toolbar-${s}`, onPointerDown: ({ pointerType: w }) => {
      !t.penDetected && w === "pen" && n.togglePenMode(!0);
    }, onChange: ({ pointerType: w }) => {
      t.activeTool.type !== s && rt("toolbar", s, "ui"), s === "image" ? n.setActiveTool({ type: s, insertOnCanvasDirectly: w !== "mouse" }) : n.setActiveTool({ type: s });
    } }, s);
  }), p("div", { className: "App-toolbar__divider" }), _(ct, { open: i, children: [p(ct.Trigger, { className: ae("App-toolbar__extra-tools-trigger", { "App-toolbar__extra-tools-trigger--selected": l || c || o && !n.props.isCollaborating }), onToggle: () => r(!i), title: C("toolBar.extraTools"), children: xI }), _(ct.Content, { onClickOutside: () => r(!1), onSelect: () => r(!1), className: "App-toolbar__extra-tools-dropdown", children: [p(ct.Item, { onSelect: () => n.setActiveTool({ type: "frame" }), icon: k8, shortcut: P.F.toLocaleUpperCase(), "data-testid": "toolbar-frame", selected: l, children: C("toolBar.frame") }), p(ct.Item, { onSelect: () => n.setActiveTool({ type: "embeddable" }), icon: EC, "data-testid": "toolbar-embeddable", selected: c, children: C("toolBar.embeddable") }), p(ct.Item, { onSelect: () => n.setActiveTool({ type: "laser" }), icon: C8, "data-testid": "toolbar-laser", selected: o, shortcut: P.K.toLocaleUpperCase(), children: C("toolBar.laser") }), p("div", { style: { margin: "6px 0", fontSize: 14, fontWeight: 600 }, children: "Generate" }), n.props.aiEnabled !== !1 && p(d.Out, {}), p(ct.Item, { onSelect: () => n.setOpenDialog({ name: "ttd", tab: "mermaid" }), icon: M8, "data-testid": "toolbar-embeddable", children: C("toolBar.mermaidToExcalidraw") }), n.props.aiEnabled !== !1 && n.plugins.diagramToCode && p(le, { children: _(ct.Item, { onSelect: () => n.onMagicframeToolSelect(), icon: I8, "data-testid": "toolbar-magicframe", children: [C("toolBar.magicframe"), p(ct.Item.Badge, { children: "AI" })] }) })] })] })] });
}, eG = ({ renderAction: e, zoom: t }) => p(jn.Col, { gap: 1, className: ao.ZOOM_ACTIONS, children: _(jn.Row, { align: "center", children: [e("zoomOut"), e("resetZoom"), e("zoomIn")] }) }), tG = ({ renderAction: e, className: t }) => _("div", { className: `undo-redo-buttons ${t}`, children: [p("div", { className: "undo-button-container", children: p(Ul, { label: C("buttons.undo"), children: e("undo") }) }), p("div", { className: "redo-button-container", children: _(Ul, { label: C("buttons.redo"), children: [" ", e("redo")] }) })] }), nG = ({ actionManager: e, showExitZenModeBtn: t }) => p("button", { type: "button", className: ae("disable-zen-mode", { "disable-zen-mode--visible": t }), onClick: () => e.executeAction(h0), children: C("buttons.exitZenMode") }), aG = ({ renderAction: e, className: t }) => p("div", { className: `finalize-button ${t}`, children: e("finalize", { size: "small" }) }), J6 = (e) => {
  let t = re({ userFn: e });
  return t.current.userFn = e, t.current.stableFn || (t.current.stableFn = (...n) => t.current.userFn(...n)), t.current.stableFn;
}, Df = Kt(null), iG = () => {
  let [e, t] = Et(Df), n = An();
  return e && e === "clearCanvas" ? p(J9, { onConfirm: () => {
    n.executeAction(Is), t(null);
  }, onCancel: () => t(null), title: C("clearCanvasDialog.title"), children: _("p", { className: "clear-canvas__content", children: [" ", C("alerts.clearReset")] }) }) : null;
}, sv = {};
z5(sv, { toggleTheme: () => rG });
var rG = { ...Tu, category: "App", label: "Toggle theme", perform: ({ actionManager: e }) => {
  e.executeAction(Tu, "commandPalette");
} }, cv = K({ name: "copyElementLink", label: "labels.copyElementLink", icon: Q0, trackEvent: { category: "element" }, perform: async (e, t, n, a) => {
  let i = Ee(e, t);
  try {
    if (window.location) {
      let r = q7(i, t);
      return r ? (await yc(a.props.generateLinkForSelection ? a.props.generateLinkForSelection(r.id, r.type) : K7(r.id, r.type)), { appState: { toast: { message: C("toast.elementLinkCopied"), closable: !0 } }, captureUpdate: W.EVENTUALLY }) : { appState: t, elements: e, app: a, captureUpdate: W.EVENTUALLY };
    }
  } catch (r) {
    console.error(r);
  }
  return { appState: t, elements: e, app: a, captureUpdate: W.EVENTUALLY };
}, predicate: (e, t) => mu(Ee(e, t)) }), lG = K({ name: "linkToElement", label: "labels.linkToElement", icon: D8, perform: (e, t, n, a) => {
  let i = Ee(e, t);
  return i.length !== 1 || !mu(i) ? { elements: e, appState: t, app: a, captureUpdate: W.EVENTUALLY } : { appState: { ...t, openDialog: { name: "elementLinkSelector", sourceElementId: Ee(e, t)[0].id } }, captureUpdate: W.IMMEDIATELY };
}, predicate: (e, t, n, a) => {
  var r;
  let i = Ee(e, t);
  return ((r = t.openDialog) == null ? void 0 : r.name) !== "elementLinkSelector" && i.length === 1 && mu(i);
}, trackEvent: !1 }), oG = Kt(null), Mt = { app: "App", export: "Export", tools: "Tools", editor: "Editor", elements: "Elements", links: "Links" }, sG = (e) => {
  switch (e) {
    case Mt.app:
      return 1;
    case Mt.export:
      return 2;
    case Mt.editor:
      return 3;
    case Mt.tools:
      return 4;
    case Mt.elements:
      return 5;
    case Mt.links:
      return 6;
    default:
      return 10;
  }
}, Od = ({ shortcut: e, className: t, children: n }) => {
  let a = e.replace("++", "+$").split("+");
  return _("div", { className: ae("shortcut", t), children: [a.map((i, r) => p("div", { className: "shortcut-wrapper", children: p("div", { className: "shortcut-key", children: i === "$" ? "+" : i }) }, i)), p("div", { className: "shortcut-desc", children: n })] });
}, dv = (e) => !e.altKey && e[P.CTRL_OR_CMD] && (e.shiftKey && e.key.toLowerCase() === P.P || e.key === P.SLASH);
Object.assign((e) => {
  var a;
  let t = bn(), n = Xt();
  return Q(() => {
    let i = (r) => {
      dv(r) && (r.preventDefault(), r.stopPropagation(), n((l) => {
        var c;
        let o = ((c = l.openDialog) == null ? void 0 : c.name) === "commandPalette" ? null : { name: "commandPalette" };
        return o && rt("command_palette", "open", "shortcut"), { openDialog: o };
      }));
    };
    return window.addEventListener("keydown", i, { capture: !0 }), () => window.removeEventListener("keydown", i, { capture: !0 });
  }, [n]), ((a = t.openDialog) == null ? void 0 : a.name) !== "commandPalette" ? null : p(cG, { ...e });
}, { defaultItems: sv });
function cG({ customCommandPaletteItems: e }) {
  let t = ci(), n = bn(), a = Xt(), i = Mc(), r = An(), [l, o] = Et(oG), [c, d] = oe(null), s = re(null), u = kf({ uiAppState: n, customCommandPaletteItems: e, appProps: i });
  Q(() => {
    let { uiAppState: S, customCommandPaletteItems: E, appProps: M } = u, I = (R) => {
      let O = "";
      return R.label && (typeof R.label == "function" ? O = C(R.label(t.scene.getNonDeletedElements(), S, t)) : O = C(R.label)), O;
    }, T = (R) => typeof R.icon == "function" ? R.icon(S, t.scene.getNonDeletedElements()) : R.icon, A = [], D = (R, O, $) => {
      let F = { label: I(R), icon: T(R), category: O, shortcut: sn(R.name), keywords: R.keywords, predicate: R.predicate, viewMode: R.viewMode, perform: () => {
        r.executeAction(R, "commandPalette");
      } };
      return $ ? $(F, R) : F;
    };
    if (S && t.scene && r) {
      let R = [r.actions.group, r.actions.ungroup, r.actions.cut, r.actions.copy, r.actions.deleteSelectedElements, r.actions.wrapSelectionInFrame, r.actions.copyStyles, r.actions.pasteStyles, r.actions.bringToFront, r.actions.bringForward, r.actions.sendBackward, r.actions.sendToBack, r.actions.alignTop, r.actions.alignBottom, r.actions.alignLeft, r.actions.alignRight, r.actions.alignVerticallyCentered, r.actions.alignHorizontallyCentered, r.actions.duplicateSelection, r.actions.flipHorizontal, r.actions.flipVertical, r.actions.zoomToFitSelection, r.actions.zoomToFitSelectionInViewport, r.actions.increaseFontSize, r.actions.decreaseFontSize, r.actions.toggleLinearEditor, r.actions.cropEditor, j9, cv, lG].map((z) => D(z, Mt.elements, (Y, ie) => ({ ...Y, predicate: ie.predicate ? ie.predicate : (pe, ue, Ve, Ge) => Ee(pe, ue).length > 0 }))), O = [r.actions.toggleHandTool, r.actions.setFrameAsActiveTool].map((z) => D(z, Mt.tools)), $ = [r.actions.undo, r.actions.redo, r.actions.zoomIn, r.actions.zoomOut, r.actions.resetZoom, r.actions.zoomToFit, r.actions.zenMode, r.actions.viewMode, r.actions.gridMode, r.actions.objectsSnapMode, r.actions.toggleShortcuts, r.actions.selectAll, r.actions.toggleElementLock, r.actions.unlockAllElements, r.actions.stats].map((z) => D(z, Mt.editor)), F = [r.actions.saveToActiveFile, r.actions.saveFileToDisk, r.actions.copyAsPng, r.actions.copyAsSvg].map((z) => D(z, Mt.export));
      A = [...R, ...$, { label: I(Is), icon: T(Is), shortcut: sn(Is.name), category: Mt.editor, keywords: ["delete", "destroy"], viewMode: !1, perform: () => {
        ma.set(Df, "clearCanvas");
      } }, { label: C("buttons.exportImage"), category: Mt.export, icon: b8, shortcut: sn("imageExport"), keywords: ["export", "image", "png", "jpeg", "svg", "clipboard", "picture"], perform: () => {
        a({ openDialog: { name: "imageExport" } });
      } }, ...F];
      let N = [{ label: C("toolBar.library"), category: Mt.app, icon: Z0, viewMode: !1, perform: () => {
        S.openSidebar ? a({ openSidebar: null }) : a({ openSidebar: { name: ba.name, tab: ba.defaultTab } });
      } }, { label: C("search.title"), category: Mt.app, icon: cl, viewMode: !0, perform: () => {
        r.executeAction(uv);
      } }, { label: C("labels.changeStroke"), keywords: ["color", "outline"], category: Mt.elements, icon: rh, viewMode: !1, predicate: (z, Y) => {
        let ie = Ee(z, Y);
        return ie.length > 0 && iv(Y, ie);
      }, perform: () => {
        a((z) => ({ openMenu: z.openMenu === "shape" ? null : "shape", openPopup: "elementStroke" }));
      } }, { label: C("labels.changeBackground"), keywords: ["color", "fill"], icon: rh, category: Mt.elements, viewMode: !1, predicate: (z, Y) => {
        let ie = Ee(z, Y);
        return ie.length > 0 && rv(Y, ie);
      }, perform: () => {
        a((z) => ({ openMenu: z.openMenu === "shape" ? null : "shape", openPopup: "elementBackground" }));
      } }, { label: C("labels.canvasBackground"), keywords: ["color"], icon: rh, category: Mt.editor, viewMode: !1, perform: () => {
        a((z) => ({ openMenu: z.openMenu === "canvas" ? null : "canvas", openPopup: "canvasBackground" }));
      } }, ...ip.reduce((z, Y) => {
        var Fe;
        let { value: ie, icon: pe, key: ue, numericKey: Ve } = Y;
        if (((Fe = M.UIOptions.tools) == null ? void 0 : Fe[ie]) === !1) return z;
        let Ge = ue && ys(typeof ue == "string" ? ue : ue[0]) || Ve, je = { label: C(`toolBar.${ie}`), category: Mt.tools, shortcut: Ge, icon: pe, keywords: ["toolbar"], viewMode: !1, perform: ({ event: At }) => {
          ie === "image" ? t.setActiveTool({ type: ie, insertOnCanvasDirectly: At.type === "keydown" }) : t.setActiveTool({ type: ie });
        } };
        return z.push(je), z;
      }, []), ...O, { label: C("toolBar.lock"), category: Mt.tools, icon: S.activeTool.locked ? K0 : Yu, shortcut: P.Q.toLocaleUpperCase(), viewMode: !1, perform: () => {
        t.toggleLock();
      } }, { label: `${C("labels.textToDiagram")}...`, category: Mt.tools, icon: MI, viewMode: !1, predicate: M.aiEnabled, perform: () => {
        a((z) => ({ ...z, openDialog: { name: "ttd", tab: "text-to-diagram" } }));
      } }, { label: `${C("toolBar.mermaidToExcalidraw")}...`, category: Mt.tools, icon: M8, viewMode: !1, predicate: M.aiEnabled, perform: () => {
        a((z) => ({ ...z, openDialog: { name: "ttd", tab: "mermaid" } }));
      } }], j = [...A, ...N, ...E || []].map((z) => {
        var Y;
        return { ...z, icon: z.icon || T8, order: z.order ?? sG(z.category), haystack: `${q6(z.label.toLocaleLowerCase())} ${((Y = z.keywords) == null ? void 0 : Y.join(" ")) || ""}` };
      });
      d(j), o(j.find((z) => z.label === (l == null ? void 0 : l.label)) ?? null);
    }
  }, [u, t, r, d, l == null ? void 0 : l.label, o, a]);
  let [f, h] = oe(""), [U, m] = oe(null), [g, b] = oe({}), v = (S) => {
    a({ openDialog: null }, S), h("");
  }, y = (S, E) => {
    var M;
    ((M = n.openDialog) == null ? void 0 : M.name) === "commandPalette" && (E.stopPropagation(), E.preventDefault(), document.body.classList.add("excalidraw-animations-disabled"), v(() => {
      S.perform({ actionManager: r, event: E }), o(S), requestAnimationFrame(() => {
        document.body.classList.remove("excalidraw-animations-disabled");
      });
    }));
  }, w = J6((S) => S.viewMode === !1 && n.viewModeEnabled ? !1 : typeof S.predicate == "function" ? S.predicate(t.scene.getNonDeletedElements(), n, i, t) : S.predicate === void 0 || S.predicate), x = J6((S) => {
    var T;
    let E = Or(S.target) || dv(S) || S.key === P.ESCAPE;
    if (E && S.key !== P.ARROW_UP && S.key !== P.ARROW_DOWN && S.key !== P.ENTER) return;
    let M = Object.values(g).flat(), I = l && !f && w(l);
    if (S.key === P.ARROW_UP) {
      S.preventDefault();
      let A = M.findIndex((O) => O.label === (U == null ? void 0 : U.label));
      if (I) {
        if (A === 0) {
          m(l);
          return;
        }
        if (U === l) {
          let O = M[M.length - 1];
          O && m(O);
          return;
        }
      }
      let D;
      A === -1 ? D = M.length - 1 : D = A === 0 ? M.length - 1 : (A - 1) % M.length;
      let R = M[D];
      R && m(R);
      return;
    }
    if (S.key === P.ARROW_DOWN) {
      S.preventDefault();
      let A = M.findIndex((O) => O.label === (U == null ? void 0 : U.label));
      if (I) {
        if (!U || A === M.length - 1) {
          m(l);
          return;
        }
        if (U === l) {
          let O = M[0];
          O && m(O);
          return;
        }
      }
      let D = (A + 1) % M.length, R = M[D];
      R && m(R);
      return;
    }
    if (S.key === P.ENTER && U && setTimeout(() => {
      y(U, S);
    }), !E) {
      if (S.stopPropagation(), /^[a-zA-Z0-9]$/.test(S.key)) {
        (T = s == null ? void 0 : s.current) == null || T.focus();
        return;
      }
      S.preventDefault();
    }
  });
  return Q(() => (window.addEventListener("keydown", x, { capture: !0 }), () => window.removeEventListener("keydown", x, { capture: !0 })), [x]), Q(() => {
    if (!c) return;
    let S = (T) => {
      let A = {};
      for (let D of T) A[D.category] ? A[D.category].push(D) : A[D.category] = [D];
      return A;
    }, E = c.filter(w).sort((T, A) => T.order - A.order), M = !f && l && w(l);
    if (!f) {
      b(S(M ? E.filter((T) => T.label !== (l == null ? void 0 : l.label)) : E)), m(M ? l : E[0] || null);
      return;
    }
    let I = q6(f.toLocaleLowerCase().replace(/[<>_| -]/g, ""));
    E = bB.filter(I, E, { extract: (T) => T.haystack }).sort((T, A) => A.score - T.score).map((T) => T.original), b(S(E)), m(E[0] ?? null);
  }, [f, c, w, l]), _(Ia, { onCloseRequest: () => v(), closeOnClickOutside: !0, title: !1, size: 720, autofocus: !0, className: "command-palette-dialog", children: [p(xU, { value: f, placeholder: C("commandPalette.search.placeholder"), onChange: (S) => {
    h(S);
  }, selectOnRender: !0, ref: s }), !t.device.viewport.isMobile && _("div", { className: "shortcuts-wrapper", children: [p(Od, { shortcut: "", children: C("commandPalette.shortcuts.select") }), p(Od, { shortcut: "", children: C("commandPalette.shortcuts.confirm") }), p(Od, { shortcut: V("Esc"), children: C("commandPalette.shortcuts.close") })] }), _("div", { className: "commands", children: [l && !f && _("div", { className: "command-category", children: [_("div", { className: "command-category-title", children: [C("commandPalette.recents"), p("div", { className: "icon", style: { marginLeft: "6px" }, children: CI })] }), p(Q6, { command: l, isSelected: l.label === (U == null ? void 0 : U.label), onClick: (S) => y(l, S), disabled: !w(l), onMouseMove: () => m(l), showShortcut: !t.device.viewport.isMobile, appState: n })] }), Object.keys(g).length > 0 ? Object.keys(g).map((S, E) => _("div", { className: "command-category", children: [p("div", { className: "command-category-title", children: S }), g[S].map((M) => p(Q6, { command: M, isSelected: M.label === (U == null ? void 0 : U.label), onClick: (I) => y(M, I), onMouseMove: () => m(M), showShortcut: !t.device.viewport.isMobile, appState: n }, M.label))] }, S)) : c ? _("div", { className: "no-match", children: [p("div", { className: "icon", children: cl }), " ", C("commandPalette.search.noMatch")] }) : null] })] });
}
var Q6 = ({ command: e, isSelected: t, disabled: n, onMouseMove: a, onClick: i, showShortcut: r, appState: l }) => {
  let o = () => {
  };
  return _("div", { className: ae("command-item", { "item-selected": t, "item-disabled": n }), ref: (c) => {
    var d;
    t && !n && ((d = c == null ? void 0 : c.scrollIntoView) == null || d.call(c, { block: "nearest" }));
  }, onClick: n ? o : i, onMouseMove: n ? o : a, title: n ? C("commandPalette.itemNotAvailable") : "", children: [_("div", { className: "name", children: [e.icon && p(Cf, { icon: typeof e.icon == "function" ? e.icon(l) : e.icon }), e.label] }), r && e.shortcut && p(Od, { shortcut: e.shortcut })] });
}, dG = K({ name: "toggleLinearEditor", category: Mt.elements, label: (e, t, n) => {
  var a;
  return ((a = n.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds })[0]) == null ? void 0 : a.type) === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit";
}, keywords: ["line"], trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return !!(!t.editingLinearElement && i.length === 1 && me(i[0]) && !te(i[0]));
}, perform(e, t, n, a) {
  var l;
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 })[0], r = ((l = t.editingLinearElement) == null ? void 0 : l.elementId) === i.id ? null : new ee(i);
  return { appState: { ...t, editingLinearElement: r }, captureUpdate: W.IMMEDIATELY };
}, PanelComponent: ({ appState: e, updateData: t, app: n }) => {
  let a = n.scene.getSelectedElements({ selectedElementIds: e.selectedElementIds })[0], i = C(a.type === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit");
  return p(Te, { type: "button", icon: BI, title: i, "aria-label": i, onClick: () => t(null) });
} }), uv = K({ name: "searchMenu", icon: cl, keywords: ["search", "find"], label: "search.title", viewMode: !0, trackEvent: { category: "search_menu", action: "toggle", predicate: (e) => e.gridModeEnabled }, perform(e, t, n, a) {
  var i, r;
  if (((i = t.openSidebar) == null ? void 0 : i.name) === ba.name && t.openSidebar.tab === Kl) {
    let l = (r = a.excalidrawContainerValue.container) == null ? void 0 : r.querySelector(`.${ao.SEARCH_MENU_INPUT_WRAPPER} input`);
    return l != null && l.matches(":focus") ? { appState: { ...t, openSidebar: null }, captureUpdate: W.EVENTUALLY } : (l == null || l.focus(), l == null || l.select(), !1);
  }
  return { appState: { ...t, openSidebar: { name: ba.name, tab: Kl }, openDialog: null }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.gridModeEnabled, predicate: (e, t, n) => n.gridModeEnabled === void 0, keyTest: (e) => e[P.CTRL_OR_CMD] && e.key === P.F }), uG = K({ name: "cropEditor", label: "helpDialog.cropStart", icon: Em, viewMode: !0, trackEvent: { category: "menu" }, keywords: ["image", "crop"], perform(e, t, n, a) {
  let i = a.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !0 })[0];
  return { appState: { ...t, isCropping: !1, croppingElementId: i.id }, captureUpdate: W.IMMEDIATELY };
}, predicate: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t);
  return !!(!t.croppingElementId && i.length === 1 && Oe(i[0]));
}, PanelComponent: ({ appState: e, updateData: t, app: n }) => {
  let a = C("helpDialog.cropStart");
  return p(Te, { type: "button", icon: Em, title: a, "aria-label": a, onClick: () => t(null) });
} }), _u = class {
  constructor(e = !0, t = !0) {
    this.isUndoStackEmpty = e, this.isRedoStackEmpty = t;
  }
}, e5 = class hs {
  constructor() {
    L(this, "onHistoryChangedEmitter", new Ba()), L(this, "undoStack", []), L(this, "redoStack", []);
  }
  get isUndoStackEmpty() {
    return this.undoStack.length === 0;
  }
  get isRedoStackEmpty() {
    return this.redoStack.length === 0;
  }
  clear() {
    this.undoStack.length = 0, this.redoStack.length = 0;
  }
  record(t, n) {
    let a = fG.create(n, t);
    a.isEmpty() || (this.undoStack.push(a.inverse()), a.elementsChange.isEmpty() || (this.redoStack.length = 0), this.onHistoryChangedEmitter.trigger(new _u(this.isUndoStackEmpty, this.isRedoStackEmpty)));
  }
  undo(t, n, a) {
    return this.perform(t, n, a, () => hs.pop(this.undoStack), (i) => hs.push(this.redoStack, i, t));
  }
  redo(t, n, a) {
    return this.perform(t, n, a, () => hs.pop(this.redoStack), (i) => hs.push(this.undoStack, i, t));
  }
  perform(t, n, a, i, r) {
    try {
      let l = i();
      if (l === null) return;
      let o = t, c = n, d = !1;
      for (; l; ) {
        try {
          [o, c, d] = l.applyTo(o, c, a);
        } finally {
          r(l);
        }
        if (d) break;
        l = i();
      }
      return [o, c];
    } finally {
      this.onHistoryChangedEmitter.trigger(new _u(this.isUndoStackEmpty, this.isRedoStackEmpty));
    }
  }
  static pop(t) {
    if (!t.length) return null;
    let n = t.pop();
    return n !== void 0 ? n : null;
  }
  static push(t, n, a) {
    let i = n.inverse().applyLatestChanges(a);
    return t.push(i);
  }
}, fG = class $d {
  constructor(t, n) {
    this.appStateChange = t, this.elementsChange = n;
  }
  static create(t, n) {
    return new $d(t, n);
  }
  inverse() {
    return new $d(this.appStateChange.inverse(), this.elementsChange.inverse());
  }
  applyTo(t, n, a) {
    let [i, r] = this.elementsChange.applyTo(t, a.elements), [l, o] = this.appStateChange.applyTo(n, i);
    return [i, l, r || o];
  }
  applyLatestChanges(t) {
    let n = this.elementsChange.applyLatestChanges(t);
    return $d.create(this.appStateChange, n);
  }
  isEmpty() {
    return this.appStateChange.isEmpty() && this.elementsChange.isEmpty();
  }
}, fv = (e, t) => {
  let [n, a] = oe(t);
  return Q(() => {
    let i = e.on((r) => {
      a(r);
    });
    return () => {
      i();
    };
  }, [e]), n;
}, hv = (e, t, n) => {
  if (!t.multiElement && !t.resizingElement && !t.editingTextElement && !t.newElement && !t.selectedElementsAreBeingDragged && !t.selectionElement && !e.flowChartCreator.isCreatingChart) {
    let a = n();
    if (!a) return { captureUpdate: W.EVENTUALLY };
    let [i, r] = a, l = Array.from(i.values());
    return { appState: r, elements: l, captureUpdate: W.NEVER };
  }
  return { captureUpdate: W.EVENTUALLY };
}, hG = (e, t) => ({ name: "undo", label: "buttons.undo", icon: om, trackEvent: { category: "history" }, viewMode: !1, perform: (n, a, i, r) => hv(r, a, () => e.undo(he(n), a, t.snapshot)), keyTest: (n) => n[P.CTRL_OR_CMD] && M1(n, P.Z) && !n.shiftKey, PanelComponent: ({ updateData: n, data: a }) => {
  let { isUndoStackEmpty: i } = fv(e.onHistoryChangedEmitter, new _u(e.isUndoStackEmpty, e.isRedoStackEmpty));
  return p(Te, { type: "button", icon: om, "aria-label": C("buttons.undo"), onClick: n, size: (a == null ? void 0 : a.size) || "medium", disabled: i, "data-testid": "button-undo" });
} }), pG = (e, t) => ({ name: "redo", label: "buttons.redo", icon: sm, trackEvent: { category: "history" }, viewMode: !1, perform: (n, a, i, r) => hv(r, a, () => e.redo(he(n), a, t.snapshot)), keyTest: (n) => n[P.CTRL_OR_CMD] && n.shiftKey && M1(n, P.Z) || Bb && n.ctrlKey && !n.shiftKey && M1(n, P.Y), PanelComponent: ({ updateData: n, data: a }) => {
  let { isRedoStackEmpty: i } = fv(e.onHistoryChangedEmitter, new _u(e.isUndoStackEmpty, e.isRedoStackEmpty));
  return p(Te, { type: "button", icon: sm, "aria-label": C("buttons.redo"), onClick: n, size: (a == null ? void 0 : a.size) || "medium", disabled: i, "data-testid": "button-redo" });
} }), Bh = (e, t, n, a, i, r) => {
  if (e.trackEvent) try {
    typeof e.trackEvent == "object" && (!e.trackEvent.predicate || e.trackEvent.predicate(n, a, r)) && rt(e.trackEvent.category, e.trackEvent.action || e.name, `${t} (${i.device.editor.isMobile ? "mobile" : "desktop"})`);
  } catch (l) {
    console.error("error while logging action:", l);
  }
}, UG = class {
  constructor(e, t, n, a) {
    L(this, "actions", {}), L(this, "updater"), L(this, "getAppState"), L(this, "getElementsIncludingDeleted"), L(this, "app"), L(this, "renderAction", (i, r) => {
      let l = this.app.props.UIOptions.canvasActions;
      if (this.actions[i] && "PanelComponent" in this.actions[i] && (!(i in l) || l[i])) {
        let o = this.actions[i], c = o.PanelComponent;
        c.displayName = "PanelComponent";
        let d = this.getElementsIncludingDeleted(), s = this.getAppState(), u = (f) => {
          Bh(o, "ui", s, d, this.app, f), this.updater(o.perform(this.getElementsIncludingDeleted(), this.getAppState(), f, this.app));
        };
        return p(c, { elements: this.getElementsIncludingDeleted(), appState: this.getAppState(), updateData: u, appProps: this.app.props, app: this.app, data: r });
      }
      return null;
    }), L(this, "isActionEnabled", (i) => {
      let r = this.getElementsIncludingDeleted(), l = this.getAppState();
      return !i.predicate || i.predicate(r, l, this.app.props, this.app);
    }), this.updater = (i) => {
      if (Uc(i)) i.then((r) => e(r));
      else return e(i);
    }, this.getAppState = t, this.getElementsIncludingDeleted = n, this.app = a;
  }
  registerAction(e) {
    this.actions[e.name] = e;
  }
  registerAll(e) {
    e.forEach((t) => this.registerAction(t));
  }
  handleKeyDown(e) {
    let t = this.app.props.UIOptions.canvasActions, n = Object.values(this.actions).sort((o, c) => (c.keyPriority || 0) - (o.keyPriority || 0)).filter((o) => (o.name in t ? t[o.name] : !0) && o.keyTest && o.keyTest(e, this.getAppState(), this.getElementsIncludingDeleted(), this.app));
    if (n.length !== 1) return n.length > 1 && console.warn("Canceling as multiple actions match this shortcut", n), !1;
    let a = n[0];
    if (this.getAppState().viewModeEnabled && a.viewMode !== !0) return !1;
    let i = this.getElementsIncludingDeleted(), r = this.getAppState();
    return Bh(a, "keyboard", r, i, this.app, null), e.preventDefault(), e.stopPropagation(), this.updater(n[0].perform(i, r, null, this.app)), !0;
  }
  executeAction(e, t = "api", n = null) {
    let a = this.getElementsIncludingDeleted(), i = this.getAppState();
    Bh(e, t, i, a, this.app, n), this.updater(e.perform(a, i, n, this.app));
  }
}, t5 = (e) => {
  let t = Array.from(e.values());
  return { x: a5(t, (n) => n.x) / t.length, y: a5(t, (n) => n.y) / t.length };
}, n5 = ([e, t]) => Math.hypot(e.x - t.x, e.y - t.y), a5 = (e, t) => e.reduce((n, a) => n + t(a), 0), mG = ({ children: e, left: t, top: n, onCloseRequest: a, fitInViewport: i = !1, offsetLeft: r = 0, offsetTop: l = 0, viewportWidth: o = window.innerWidth, viewportHeight: c = window.innerHeight }) => {
  let d = re(null);
  Q(() => {
    let u = d.current;
    if (!u) return;
    u.contains(document.activeElement) || u.focus();
    let f = (h) => {
      var U, m, g;
      if (h.key === P.TAB) {
        let b = b1(u), { activeElement: v } = document, y = b.findIndex((w) => w === v);
        v === u ? (h.shiftKey ? (U = b[b.length - 1]) == null || U.focus() : b[0].focus(), h.preventDefault(), h.stopImmediatePropagation()) : y === 0 && h.shiftKey ? ((m = b[b.length - 1]) == null || m.focus(), h.preventDefault(), h.stopImmediatePropagation()) : y === b.length - 1 && !h.shiftKey && ((g = b[0]) == null || g.focus(), h.preventDefault(), h.stopImmediatePropagation());
      }
    };
    return u.addEventListener("keydown", f), () => u.removeEventListener("keydown", f);
  }, []);
  let s = re(null);
  return _n(() => {
    var u, f;
    if (i && d.current && n != null && t != null) {
      let h = d.current, { width: U, height: m } = h.getBoundingClientRect();
      if (((u = s.current) == null ? void 0 : u.top) === n && ((f = s.current) == null ? void 0 : f.left) === t) return;
      s.current = { top: n, left: t }, U >= o ? (h.style.width = `${o}px`, h.style.left = "0px", h.style.overflowX = "scroll") : t + U - r > o ? h.style.left = `${o - U - 10}px` : h.style.left = `${t}px`, m >= c ? (h.style.height = `${c - 20}px`, h.style.top = "10px", h.style.overflowY = "scroll") : n + m - l > c ? h.style.top = `${c - m}px` : h.style.top = `${n}px`;
    }
  }, [n, t, i, o, c, r, l]), Q(() => {
    if (a) {
      let u = (f) => {
        var h;
        (h = d.current) != null && h.contains(f.target) || k0(() => a(f));
      };
      return document.addEventListener("pointerdown", u, !1), () => document.removeEventListener("pointerdown", u, !1);
    }
  }, [a]), p("div", { className: "popover", ref: d, tabIndex: -1, children: e });
}, Ot = "separator", gG = Z.memo(({ actionManager: e, items: t, top: n, left: a, onClose: i }) => {
  let r = Cc(), l = Lf(), o = t.reduce((c, d) => (d && (d === Ot || !d.predicate || d.predicate(l, r, e.app.props, e.app)) && c.push(d), c), []);
  return p(mG, { onCloseRequest: () => {
    i();
  }, top: n, left: a, fitInViewport: !0, offsetLeft: r.offsetLeft, offsetTop: r.offsetTop, viewportWidth: r.width, viewportHeight: r.height, children: p("ul", { className: "context-menu", onContextMenu: (c) => c.preventDefault(), children: o.map((c, d) => {
    var f;
    if (c === Ot) return !o[d - 1] || o[d - 1] === Ot ? null : p("hr", { className: "context-menu-item-separator" }, d);
    let s = c.name, u = "";
    return c.label && (typeof c.label == "function" ? u = C(c.label(l, r, e.app)) : u = C(c.label)), p("li", { "data-testid": s, onClick: () => {
      i(() => {
        e.executeAction(c, "contextMenu");
      });
    }, children: _("button", { type: "button", className: ae("context-menu-item", { dangerous: s === "deleteSelectedElements", checkmark: (f = c.checked) == null ? void 0 : f.call(c, r) }), children: [p("div", { className: "context-menu-item__label", children: u }), p("kbd", { className: "context-menu-item__shortcut", children: s ? sn(s) : "" })] }) }, d);
  }) }) });
}), bG = ({ children: e, onClose: t }) => {
  let [n, a] = oe(!!e), { container: i } = di(), r = Z.useCallback(() => {
    a(!1), t && t(), i == null || i.focus();
  }, [t, i]);
  return p(le, { children: n && p(Ia, { size: "small", onCloseRequest: r, title: C("errorDialog.title"), children: p("div", { style: { whiteSpace: "pre-wrap" }, children: e }) }) });
}, pv = function({ onChange: e, value: t, choices: n, name: a }) {
  return p("div", { className: "RadioGroup", children: n.map((i) => _("div", { className: ae("RadioGroup__choice", { active: i.value === t }), title: i.ariaLabel, children: [p("input", { name: a, type: "radio", checked: i.value === t, onChange: () => e(i.value), "aria-label": i.ariaLabel }), i.label] }, String(i.value))) });
}, rd = ({ title: e, name: t, checked: n, onChange: a, disabled: i = !1 }) => p("div", { className: ae("Switch", { toggled: n, disabled: i }), children: p("input", { name: t, id: t, title: e, type: "checkbox", checked: n, disabled: i, onChange: () => a(!n), onKeyDown: (r) => {
  r.key === " " && a(!n);
} }) }), _s = It(({ children: e, icon: t, onClick: n, label: a, variant: i = "filled", color: r = "primary", size: l = "medium", fullWidth: o, className: c, status: d }, s) => {
  let [u, f] = oe(!1), h = async (m) => {
    let g = n == null ? void 0 : n(m);
    if (Uc(g)) {
      let b = window.setTimeout(() => {
        f(!0);
      }, 50);
      try {
        await g;
      } catch (v) {
        if (v instanceof qu) console.warn(v);
        else throw v;
      } finally {
        clearTimeout(b), f(!1);
      }
    }
  }, U = u ? "loading" : d;
  return r = U === "success" ? "success" : r, p("button", { className: ae("ExcButton", `ExcButton--color-${r}`, `ExcButton--variant-${i}`, `ExcButton--size-${l}`, `ExcButton--status-${U}`, { "ExcButton--fullWidth": o }, c), onClick: h, type: "button", "aria-label": a, ref: s, disabled: U === "loading" || U === "success", children: _("div", { className: "ExcButton__contents", children: [U === "loading" ? p($i, { className: "ExcButton__statusIcon" }) : U === "success" && p("div", { className: "ExcButton__statusIcon", children: yI }), t && p("div", { className: "ExcButton__icon", "aria-hidden": !0, children: t }), i !== "icon" && (e ?? a)] }) });
}), vG = 2e3, yG = () => {
  let [e, t] = oe(null), n = re(0), a = () => {
    clearTimeout(n.current), t("success"), n.current = window.setTimeout(() => {
      t(null);
    }, vG);
  }, i = _e(() => {
    t(null);
  }, []);
  return { copyStatus: e, resetCopyStatus: i, onCopy: a };
}, wG = "filter" in document.createElement("canvas").getContext("2d"), EG = () => _("div", { children: [p("h3", { children: C("canvasError.cannotShowPreview") }), p("p", { children: p("span", { children: C("canvasError.canvasTooBig") }) }), _("em", { children: ["(", C("canvasError.canvasTooBigTip"), ")"] })] }), xG = ({ appStateSnapshot: e, elementsSnapshot: t, files: n, actionManager: a, onExportImage: i, name: r }) => {
  let l = Nt(t, e), [o, c] = oe(r), [d, s] = oe(l), [u, f] = oe(e.exportBackground), [h, U] = oe(e.exportWithDarkMode), [m, g] = oe(e.exportEmbedScene), [b, v] = oe(e.exportScale), y = re(null), [w, x] = oe(null), { onCopy: S, copyStatus: E, resetCopyStatus: M } = yG();
  Q(() => {
    M();
  }, [o, u, h, b, m, M]);
  let { exportedElements: I, exportingFrame: T } = Tf(t, e, d);
  return Q(() => {
    let A = y.current;
    if (!A) return;
    let D = A.offsetWidth, R = A.offsetHeight;
    D && Dp({ elements: I, appState: { ...e, name: o, exportBackground: u, exportWithDarkMode: h, exportScale: b, exportEmbedScene: m }, files: n, exportPadding: Co, maxWidthOrHeight: Math.max(D, R), exportingFrame: T }).then((O) => (x(null), tc(O).then(() => {
      A.replaceChildren(O);
    }).catch(($) => {
      throw $.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : $;
    }))).catch((O) => {
      console.error(O), x(O);
    });
  }, [e, n, I, T, o, u, h, b, m]), _("div", { className: "ImageExportModal", children: [p("h3", { children: C("imageExportDialog.header") }), _("div", { className: "ImageExportModal__preview", children: [p("div", { className: "ImageExportModal__preview__canvas", ref: y, children: w && p(EG, {}) }), p("div", { className: "ImageExportModal__preview__filename", children: !vl && p("input", { type: "text", className: "TextInput", value: o, style: { width: "30ch" }, onChange: (A) => {
    c(A.target.value), a.executeAction(mW, "ui", A.target.value);
  } }) })] }), _("div", { className: "ImageExportModal__settings", children: [p("h3", { children: C("imageExportDialog.header") }), l && p(qo, { label: C("imageExportDialog.label.onlySelected"), name: "exportOnlySelected", children: p(rd, { name: "exportOnlySelected", checked: d, onChange: (A) => {
    s(A);
  } }) }), p(qo, { label: C("imageExportDialog.label.withBackground"), name: "exportBackgroundSwitch", children: p(rd, { name: "exportBackgroundSwitch", checked: u, onChange: (A) => {
    f(A), a.executeAction(bW, "ui", A);
  } }) }), wG && p(qo, { label: C("imageExportDialog.label.darkMode"), name: "exportDarkModeSwitch", children: p(rd, { name: "exportDarkModeSwitch", checked: h, onChange: (A) => {
    U(A), a.executeAction(vW, "ui", A);
  } }) }), p(qo, { label: C("imageExportDialog.label.embedScene"), tooltip: C("imageExportDialog.tooltip.embedScene"), name: "exportEmbedSwitch", children: p(rd, { name: "exportEmbedSwitch", checked: m, onChange: (A) => {
    g(A), a.executeAction($9, "ui", A);
  } }) }), p(qo, { label: C("imageExportDialog.label.scale"), name: "exportScale", children: p(pv, { name: "exportScale", value: b, onChange: (A) => {
    v(A), a.executeAction(gW, "ui", A);
  }, choices: B0.map((A) => ({ value: A, label: `${A}` })) }) }), _("div", { className: "ImageExportModal__settings__buttons", children: [p(_s, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.exportToPng"), onClick: () => i(Jf.png, I, { exportingFrame: T }), icon: wm, children: C("imageExportDialog.button.exportToPng") }), p(_s, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.exportToSvg"), onClick: () => i(Jf.svg, I, { exportingFrame: T }), icon: wm, children: C("imageExportDialog.button.exportToSvg") }), (Ap || Fs) && p(_s, { className: "ImageExportModal__settings__buttons__button", label: C("imageExportDialog.title.copyPngToClipboard"), status: E, onClick: async () => {
    await i(Jf.clipboard, I, { exportingFrame: T }), S();
  }, icon: Q0, children: C("imageExportDialog.button.copyPngToClipboard") })] })] })] });
}, qo = ({ label: e, children: t, tooltip: n, name: a }) => _("div", { className: "ImageExportModal__settings__setting", title: e, children: [_("label", { htmlFor: a, className: "ImageExportModal__settings__setting__label", children: [e, n && p(Ul, { label: n, long: !0, children: vI })] }), p("div", { className: "ImageExportModal__settings__setting__content", children: t })] }), SG = ({ elements: e, appState: t, files: n, actionManager: a, onExportImage: i, onCloseRequest: r, name: l }) => {
  let [{ appStateSnapshot: o, elementsSnapshot: c }] = oe(() => ({ appStateSnapshot: ki(t), elementsSnapshot: ki(e) }));
  return p(Ia, { onCloseRequest: r, size: "wide", title: !1, children: p(xG, { elementsSnapshot: c, appStateSnapshot: o, files: n, actionManager: a, onExportImage: i, name: l }) });
}, Uv = ({ children: e, side: t, className: n }) => p("div", { className: ae("FixedSideContainer", `FixedSideContainer_side_${t}`, n), children: e }), to = 100, no = 100, i5 = (e) => {
  switch (e) {
    case P.ARROW_UP:
      return "up";
    case P.ARROW_DOWN:
      return "down";
    case P.ARROW_RIGHT:
      return "right";
    case P.ARROW_LEFT:
      return "left";
    default:
      return "right";
  }
}, mv = (e, t, n, a) => {
  let i = [...n.values()].reduce((r, l) => {
    var c;
    let o;
    if (te(l) && (o = l[e === "predecessors" ? "startBinding" : "endBinding"]) && ((c = l[e === "predecessors" ? "endBinding" : "startBinding"]) == null ? void 0 : c.elementId) === t.id) {
      let d = n.get(o.elementId);
      if (!d) return r;
      cn(xa(d), "not an ExcalidrawBindableElement");
      let s = e === "predecessors" ? l.points[l.points.length - 1] : [0, 0], u = r7(t, Xa(t), [s[0] + l.x, s[1] + l.y]);
      r.push({ relative: d, heading: u });
    }
    return r;
  }, []);
  switch (a) {
    case "up":
      return i.filter((r) => wt(r.heading, kn)).map((r) => r.relative);
    case "down":
      return i.filter((r) => wt(r.heading, jt)).map((r) => r.relative);
    case "right":
      return i.filter((r) => wt(r.heading, vt)).map((r) => r.relative);
    case "left":
      return i.filter((r) => wt(r.heading, Sn)).map((r) => r.relative);
  }
}, b0 = (e, t, n) => mv("successors", e, t, n), v0 = (e, t, n) => mv("predecessors", e, t, n), kG = (e, t, n) => {
  let a = no + e.width;
  if (n === "up" || n === "down") {
    let o = to + e.height, c = e.x, d = e.x + e.width;
    if (t.every((s) => s.x + s.width < c || s.x > d)) return { x: 0, y: o * (n === "up" ? -1 : 1) };
  } else if (n === "right" || n === "left") {
    let o = e.y, c = e.y + e.height;
    if (t.every((d) => d.y + d.height < o || d.y > c)) return { x: (no + e.width) * (n === "left" ? -1 : 1), y: 0 };
  }
  if (n === "up" || n === "down") {
    let o = to + e.height, c = (t.length, o), d = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * a : t.length / 2 * a * -1;
    return n === "up" ? { x: d, y: c * -1 } : { x: d, y: c };
  }
  let i = to + e.height, r = (t.length, no + e.width), l = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * i : t.length / 2 * i * -1;
  return n === "left" ? { x: r * -1, y: l } : { x: r, y: l };
}, MG = (e, t, n, a) => {
  let i = b0(e, t, a), r = v0(e, t, a), l = kG(e, [...i, ...r], a), o = ai({ type: e.type, x: e.x + l.x, y: e.y + l.y, width: e.width, height: e.height, roundness: e.roundness, roughness: e.roughness, backgroundColor: e.backgroundColor, strokeColor: e.strokeColor, strokeWidth: e.strokeWidth, opacity: e.opacity, fillStyle: e.fillStyle, strokeStyle: e.strokeStyle });
  cn(ju(o), "not an ExcalidrawFlowchartNodeElement");
  let c = gv(e, o, t, a, n);
  return { nextNode: o, bindingArrow: c };
}, CG = (e, t, n, a, i) => {
  let r = [];
  for (let l = 0; l < i; l++) {
    let o, c;
    if (a === "left" || a === "right") {
      let u = to * (i - 1) + i * e.height, f = e.y + e.height / 2 - u / 2, h = no + e.width;
      a === "left" && (h *= -1), o = e.x + h;
      let U = (to + e.height) * l;
      c = f + U;
    } else {
      let u = no * (i - 1) + i * e.width, f = e.x + e.width / 2 - u / 2, h = to + e.height;
      a === "up" && (h *= -1), c = e.y + h;
      let U = (no + e.width) * l;
      o = f + U;
    }
    let d = ai({ type: e.type, x: o, y: c, width: e.width, height: e.height, roundness: e.roundness, roughness: e.roughness, backgroundColor: e.backgroundColor, strokeColor: e.strokeColor, strokeWidth: e.strokeWidth, opacity: e.opacity, fillStyle: e.fillStyle, strokeStyle: e.strokeStyle });
    cn(ju(d), "not an ExcalidrawFlowchartNodeElement");
    let s = gv(e, d, t, a, n);
    r.push(d), r.push(s);
  }
  return r;
}, gv = (e, t, n, a, i) => {
  let r, l;
  switch (a) {
    case "up": {
      r = e.x + e.width / 2, l = e.y - 6;
      break;
    }
    case "down": {
      r = e.x + e.width / 2, l = e.y + e.height + 6;
      break;
    }
    case "right": {
      r = e.x + e.width + 6, l = e.y + e.height / 2;
      break;
    }
    case "left": {
      r = e.x - 6, l = e.y + e.height / 2;
      break;
    }
  }
  let o, c;
  switch (a) {
    case "up": {
      o = t.x + t.width / 2 - r, c = t.y + t.height - l + 6;
      break;
    }
    case "down": {
      o = t.x + t.width / 2 - r, c = t.y - l - 6;
      break;
    }
    case "right": {
      o = t.x - r - 6, c = t.y - l + t.height / 2;
      break;
    }
    case "left": {
      o = t.x + t.width - r + 6, c = t.y - l + t.height / 2;
      break;
    }
  }
  let d = fp({ type: "arrow", x: r, y: l, startArrowhead: null, endArrowhead: i.currentItemEndArrowhead, strokeColor: e.strokeColor, strokeStyle: e.strokeStyle, strokeWidth: e.strokeWidth, opacity: e.opacity, roughness: e.roughness, points: [k(0, 0), k(o, c)], elbowed: !0 });
  ti(d, e, "start", n), ti(d, t, "end", n);
  let s = /* @__PURE__ */ new Map();
  s.set(e.id, e), s.set(t.id, t), s.set(d.id, d), ee.movePoints(d, [{ index: 1, point: d.points[1] }]);
  let u = Ep(d, Qn(new Map([...n.entries(), [e.id, e], [t.id, t], [d.id, d]])), { points: d.points });
  return { ...d, ...u };
}, IG = class {
  constructor() {
    L(this, "isExploring", !1), L(this, "sameLevelNodes", []), L(this, "sameLevelIndex", 0), L(this, "direction", null), L(this, "visitedNodes", /* @__PURE__ */ new Set());
  }
  clear() {
    this.isExploring = !1, this.sameLevelNodes = [], this.sameLevelIndex = 0, this.direction = null, this.visitedNodes.clear();
  }
  exploreByDirection(e, t, n) {
    if (!xa(e)) return null;
    if (n !== this.direction && this.clear(), this.visitedNodes.has(e.id) || this.visitedNodes.add(e.id), this.isExploring && n === this.direction && this.sameLevelNodes.length > 1) return this.sameLevelIndex = (this.sameLevelIndex + 1) % this.sameLevelNodes.length, this.sameLevelNodes[this.sameLevelIndex].id;
    let a = [...b0(e, t, n), ...v0(e, t, n)];
    if (a.length > 0) return this.sameLevelIndex = 0, this.isExploring = !0, this.sameLevelNodes = a, this.direction = n, this.visitedNodes.add(a[0].id), a[0].id;
    if (n === this.direction || !this.isExploring) {
      this.isExploring || this.visitedNodes.add(e.id);
      let i = ["up", "right", "down", "left"].filter((r) => r !== n).map((r) => [...b0(e, t, r), ...v0(e, t, r)]).flat().filter((r) => !this.visitedNodes.has(r.id));
      for (let r of i) if (!this.visitedNodes.has(r.id)) return this.visitedNodes.add(r.id), this.isExploring = !0, this.direction = n, r.id;
    }
    return null;
  }
}, TG = class {
  constructor() {
    L(this, "isCreatingChart", !1), L(this, "numberOfNodes", 0), L(this, "direction", "right"), L(this, "pendingNodes", null);
  }
  createNodes(e, t, n, a) {
    if (a !== this.direction) {
      let { nextNode: i, bindingArrow: r } = MG(e, t, n, a);
      this.numberOfNodes = 1, this.isCreatingChart = !0, this.direction = a, this.pendingNodes = [i, r];
    } else {
      this.numberOfNodes += 1;
      let i = CG(e, t, n, a, this.numberOfNodes);
      this.isCreatingChart = !0, this.direction = a, this.pendingNodes = i;
    }
    if (e.frameId) {
      let i = t.get(e.frameId);
      cn(i && o8(i), "not an ExcalidrawFrameElement"), i && this.pendingNodes.every((r) => wc([r], i, t) || gr(r, i, t)) && (this.pendingNodes = this.pendingNodes.map((r) => G(r, { frameId: e.frameId }, !1)));
    }
  }
  clear() {
    this.isCreatingChart = !1, this.pendingNodes = null, this.direction = null, this.numberOfNodes = 0;
  }
}, _G = (e, t) => {
  var n, a;
  for (let [, i] of t) if (i.type === "arrow" && (((n = i.startBinding) == null ? void 0 : n.elementId) === e.id || ((a = i.endBinding) == null ? void 0 : a.elementId) === e.id)) return !0;
  return !1;
}, AG = ({ appState: e, isMobile: t, device: n, app: a }) => {
  var s, u;
  let { activeTool: i, isResizing: r, isRotating: l, lastPointerDownWith: o } = e, c = e.multiElement !== null;
  if (((s = e.openSidebar) == null ? void 0 : s.name) === ba.name && e.openSidebar.tab === Kl && ((u = e.searchMatches) != null && u.length)) return C("hints.dismissSearch");
  if (e.openSidebar && !n.editor.canFitSidebar) return null;
  if (Fa(e)) return C("hints.eraserRevert");
  if (i.type === "arrow" || i.type === "line") return c ? C("hints.linearElementMulti") : i.type === "arrow" ? C("hints.arrowTool", { arrowShortcut: V("A") }) : C("hints.linearElement");
  if (i.type === "freedraw") return C("hints.freeDraw");
  if (i.type === "text") return C("hints.text");
  if (i.type === "embeddable") return C("hints.embeddable");
  if (e.activeTool.type === "image" && e.pendingImageElementId) return C("hints.placeImage");
  let d = a.scene.getSelectedElements(e);
  if (r && o === "mouse" && d.length === 1) {
    let f = d[0];
    return me(f) && f.points.length === 2 ? C("hints.lockAngle") : Oe(f) ? C("hints.resizeImage") : C("hints.resize");
  }
  if (l && o === "mouse") return C("hints.rotate");
  if (d.length === 1 && J(d[0])) return C("hints.text_selected");
  if (e.editingTextElement) return C("hints.text_editing");
  if (e.croppingElementId) return C("hints.leaveCropEditor");
  if (d.length === 1 && Oe(d[0])) return C("hints.enterCropEditor");
  if (i.type === "selection") {
    if (e.selectionElement && !d.length && !e.editingTextElement && !e.editingLinearElement) return C("hints.deepBoxSelect");
    if (qs(a) && e.selectedElementsAreBeingDragged) return C("hints.disableSnapping");
    if (!d.length && !t) return C("hints.canvasPanning");
    if (d.length === 1) {
      if (me(d[0])) return e.editingLinearElement ? e.editingLinearElement.selectedPointsIndices ? C("hints.lineEditor_pointSelected") : C("hints.lineEditor_nothingSelected") : C("hints.lineEditor_info");
      if (!e.newElement && !e.selectedElementsAreBeingDragged && Zr(d[0])) return ju(d[0]) ? _G(d[0], a.scene.getNonDeletedElementsMap()) ? [C("hints.bindTextToElement"), C("hints.createFlowchart")] : [C("hints.bindTextToElement"), C("hints.createFlowchart")] : C("hints.bindTextToElement");
    }
  }
  return null;
}, bv = ({ appState: e, isMobile: t, device: n, app: a }) => {
  let i = AG({ appState: e, isMobile: t, device: n, app: a });
  if (!i) return null;
  let r = Array.isArray(i) ? i.map((l) => V(l).replace(/\. ?$/, "")).join(". ") : V(i);
  return p("div", { className: "HintViewer", children: p("span", { children: r }) });
}, DG = "medium", r5 = { CHECKED: K0, UNCHECKED: Yu }, vv = (e) => _("label", { className: ae("ToolIcon ToolIcon__lock", `ToolIcon_size_${DG}`, { "is-mobile": e.isMobile }), title: `${e.title}  Q`, children: [p("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title, "data-testid": "toolbar-lock" }), p("div", { className: "ToolIcon__icon", children: e.checked ? r5.CHECKED : r5.UNCHECKED })] }), lc = ({ heading: e, children: t, ...n }) => {
  let { id: a } = di(), i = p("h2", { className: "visually-hidden", id: `${a}-${e}-title`, children: C(`headings.${e}`) });
  return p("section", { ...n, "aria-labelledby": `${a}-${e}-title`, children: typeof t == "function" ? t(i) : _(le, { children: [i, t] }) });
}, Ha = 4, lr = 6, LG = "rgba(0,0,0,0.3)", RG = (e, t, n, a) => {
  if (!e.length) return { horizontal: null, vertical: null };
  let [i, r, l, o] = We(e), c = t / a.zoom.value, d = n / a.zoom.value, s = t - c, u = n - d, f = { top: parseInt(Xc("sat")) || 0, bottom: parseInt(Xc("sab")) || 0, left: parseInt(Xc("sal")) || 0, right: parseInt(Xc("sar")) || 0 }, h = ic().rtl, U = -a.scrollX + s / 2 + f.left, m = -a.scrollY + u / 2 + f.top, g = U + c - f.right, b = m + d - f.bottom, v = Math.min(i, U), y = Math.min(r, m), w = Math.max(l, g), x = Math.max(o, b);
  return { horizontal: U === v && g === w ? null : { x: Math.max(f.left, Ha) + (U - v) / (w - v) * t, y: n - lr - Math.max(Ha, f.bottom), width: (g - U) / (w - v) * t - Math.max(Ha * 2, f.left + f.right), height: lr }, vertical: m === y && b === x ? null : { x: h ? Math.max(f.left, Ha) : t - lr - Math.max(f.right, Ha), y: (m - y) / (x - y) * n + Math.max(f.top, Ha), width: lr, height: (b - m) / (x - y) * n - Math.max(Ha * 2, f.top + f.bottom) } };
}, l5 = (e, t, n) => {
  let [a, i] = [e.horizontal, e.vertical].map((r) => r != null && r.x <= t && t <= r.x + r.width && r.y <= n && n <= r.y + r.height);
  return { isOverEither: a || i, isOverHorizontal: a, isOverVertical: i };
}, PG = "medium", yv = (e) => e.penDetected ? _("label", { className: ae("ToolIcon ToolIcon__penMode", `ToolIcon_size_${PG}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [p("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title }), p("div", { className: "ToolIcon__icon", children: bC })] }) : null, wv = (e) => p(Te, { className: ae("Shape", { fillable: !1 }), type: "radio", icon: S8, name: "editor-current-shape", checked: e.checked, title: `${e.title}  H`, keyBindingLabel: e.isMobile ? void 0 : P.H.toLocaleUpperCase(), "aria-label": `${e.title}  H`, "aria-keyshortcuts": P.H, "data-testid": "toolbar-hand", onChange: () => {
  var t;
  return (t = e.onChange) == null ? void 0 : t.call(e);
} }), NG = ({ appState: e, elements: t, actionManager: n, setAppState: a, onLockToggle: i, onHandToolToggle: r, onPenModeToggle: l, renderTopRightUI: o, renderCustomStats: c, renderSidebars: d, device: s, renderWelcomeScreen: u, UIOptions: f, app: h }) => {
  var y, w;
  let { WelcomeScreenCenterTunnel: U, MainMenuTunnel: m, DefaultSidebarTriggerTunnel: g } = Fn(), b = () => _(Uv, { side: "top", className: "App-top-bar", children: [u && p(U.Out, {}), p(lc, { heading: "shapes", children: (x) => {
    var S;
    return p(jn.Col, { gap: 4, align: "center", children: _(jn.Row, { gap: 1, className: "App-toolbar-container", children: [_(wa, { padding: 1, className: "App-toolbar App-toolbar--mobile", children: [x, p(jn.Row, { gap: 1, children: p(ov, { appState: e, activeTool: e.activeTool, UIOptions: f, app: h }) })] }), o && o(!0, e), _("div", { className: "mobile-misc-tools-container", children: [!e.viewModeEnabled && ((S = e.openDialog) == null ? void 0 : S.name) !== "elementLinkSelector" && p(g.Out, {}), p(yv, { checked: e.penMode, onChange: () => l(null), title: C("toolBar.penMode"), isMobile: !0, penDetected: e.penDetected }), p(vv, { checked: e.activeTool.locked, onChange: i, title: C("toolBar.lock"), isMobile: !0 }), p(wv, { checked: ro(e), onChange: () => r(), title: C("toolBar.hand"), isMobile: !0 })] })] }) });
  } }), p(bv, { appState: e, isMobile: !0, device: s, app: h })] }), v = () => {
    var x;
    return e.viewModeEnabled || ((x = e.openDialog) == null ? void 0 : x.name) === "elementLinkSelector" ? p("div", { className: "App-toolbar-content", children: p(m.Out, {}) }) : _("div", { className: "App-toolbar-content", children: [p(m.Out, {}), n.renderAction("toggleEditMenu"), n.renderAction(e.multiElement ? "finalize" : "duplicateSelection"), n.renderAction("deleteSelectedElements"), _("div", { children: [n.renderAction("undo"), n.renderAction("redo")] })] });
  };
  return _(le, { children: [d(), !e.viewModeEnabled && ((y = e.openDialog) == null ? void 0 : y.name) !== "elementLinkSelector" && b(), p("div", { className: "App-bottom-bar", style: { marginBottom: lr + Ha * 2, marginLeft: lr + Ha * 2, marginRight: lr + Ha * 2 }, children: _(wa, { padding: 0, children: [e.openMenu === "shape" && !e.viewModeEnabled && ((w = e.openDialog) == null ? void 0 : w.name) !== "elementLinkSelector" && Vp(e, t) ? p(lc, { className: "App-mobile-menu", heading: "selectedShapeActions", children: p(lv, { appState: e, elementsMap: h.scene.getNonDeletedElementsMap(), renderAction: n.renderAction, app: h }) }) : null, _("footer", { className: "App-toolbar", children: [v(), e.scrolledOutside && !e.openMenu && !e.openSidebar && p("button", { type: "button", className: "scroll-back-to-content", onClick: () => {
    a((x) => ({ ...Zs(t, x) }));
  }, children: C("buttons.scrollBackToContent") })] })] }) })] });
}, o5 = (e) => {
  let t = re(null), [n, a] = oe(null);
  return _n(() => {
    if (!e.spreadsheet) return;
    let i = LN(e.chartType, e.spreadsheet, 0, 0);
    a(i);
    let r, l = t.current;
    return (async () => {
      var o;
      return r = await vp(i, { exportBackground: !1, viewBackgroundColor: Yt.white }, null, { skipInliningFonts: !0 }), (o = r.querySelector(".style-fonts")) == null || o.remove(), l.replaceChildren(), l.appendChild(r), e.selected && l.parentNode.focus();
    })(), () => {
      l.replaceChildren();
    };
  }, [e.spreadsheet, e.chartType, e.selected]), p("button", { type: "button", className: "ChartPreview", onClick: () => {
    n && e.onClick(e.chartType, n);
  }, children: p("div", { ref: t }) });
}, OG = ({ setAppState: e, appState: t, onClose: n }) => {
  let { onInsertElements: a } = ci(), i = Z.useCallback(() => {
    n && n();
  }, [n]), r = (l, o) => {
    a(o), rt("paste", "chart", l), e({ currentChartType: l, pasteDialog: { shown: !1, data: null } });
  };
  return p(Ia, { size: "small", onCloseRequest: i, title: C("labels.pasteCharts"), className: "PasteChartDialog", autofocus: !1, children: _("div", { className: "container", children: [p(o5, { chartType: "bar", spreadsheet: t.pasteDialog.data, selected: t.currentChartType === "bar", onClick: r }), p(o5, { chartType: "line", spreadsheet: t.pasteDialog.data, selected: t.currentChartType === "line", onClick: r })] }) });
}, $G = () => _("div", { className: "HelpDialog__header", children: [_("a", { className: "HelpDialog__btn", href: "https://docs.excalidraw.com", target: "_blank", rel: "noopener noreferrer", children: [p("div", { className: "HelpDialog__link-icon", children: lm }), C("helpDialog.documentation")] }), _("a", { className: "HelpDialog__btn", href: "https://plus.excalidraw.com/blog", target: "_blank", rel: "noopener noreferrer", children: [p("div", { className: "HelpDialog__link-icon", children: lm }), C("helpDialog.blog")] }), _("a", { className: "HelpDialog__btn", href: "https://github.com/excalidraw/excalidraw/issues", target: "_blank", rel: "noopener noreferrer", children: [p("div", { className: "HelpDialog__link-icon", children: g8 }), C("helpDialog.github")] }), _("a", { className: "HelpDialog__btn", href: "https://youtube.com/@excalidraw", target: "_blank", rel: "noopener noreferrer", children: [p("div", { className: "HelpDialog__link-icon", children: zI }), "YouTube"] })] }), zG = (e) => _(le, { children: [p("h3", { children: e.title }), p("div", { className: "HelpDialog__islands-container", children: e.children })] }), Hh = (e) => _("div", { className: `HelpDialog__island ${e.className}`, children: [p("h4", { className: "HelpDialog__island-title", children: e.caption }), p("div", { className: "HelpDialog__island-content", children: e.children })] });
function* FG(e, t) {
  let n = !0;
  for (let a of e) n || (yield t), n = !1, yield a;
}
var BG = (e) => e.replace(/\b[a-z]\b/, (t) => t.toUpperCase()), ne = ({ label: e, shortcuts: t, isOr: n = !0 }) => {
  let a = t.map((i) => (i.endsWith("++") ? [...i.slice(0, -2).split("+"), "+"] : i.split("+")).map((r) => p(HG, { children: BG(r) }, r)));
  return _("div", { className: "HelpDialog__shortcut", children: [p("div", { children: e }), p("div", { className: "HelpDialog__key-container", children: [...FG(a, n ? C("helpDialog.or") : null)] })] });
}, HG = (e) => p("kbd", { className: "HelpDialog__key", ...e }), XG = ({ onClose: e }) => {
  let t = Z.useCallback(() => {
    e && e();
  }, [e]);
  return p(le, { children: _(Ia, { onCloseRequest: t, title: C("helpDialog.title"), className: "HelpDialog", children: [p($G, {}), _(zG, { title: C("helpDialog.shortcuts"), children: [_(Hh, { className: "HelpDialog__island--tools", caption: C("helpDialog.tools"), children: [p(ne, { label: C("toolBar.hand"), shortcuts: [P.H] }), p(ne, { label: C("toolBar.selection"), shortcuts: [P.V, P[1]] }), p(ne, { label: C("toolBar.rectangle"), shortcuts: [P.R, P[2]] }), p(ne, { label: C("toolBar.diamond"), shortcuts: [P.D, P[3]] }), p(ne, { label: C("toolBar.ellipse"), shortcuts: [P.O, P[4]] }), p(ne, { label: C("toolBar.arrow"), shortcuts: [P.A, P[5]] }), p(ne, { label: C("toolBar.line"), shortcuts: [P.L, P[6]] }), p(ne, { label: C("toolBar.freedraw"), shortcuts: [P.P, P[7]] }), p(ne, { label: C("toolBar.text"), shortcuts: [P.T, P[8]] }), p(ne, { label: C("toolBar.image"), shortcuts: [P[9]] }), p(ne, { label: C("toolBar.eraser"), shortcuts: [P.E, P[0]] }), p(ne, { label: C("toolBar.frame"), shortcuts: [P.F] }), p(ne, { label: C("toolBar.laser"), shortcuts: [P.K] }), p(ne, { label: C("labels.eyeDropper"), shortcuts: [P.I, "Shift+S", "Shift+G"] }), p(ne, { label: C("helpDialog.editLineArrowPoints"), shortcuts: [V("CtrlOrCmd+Enter")] }), p(ne, { label: C("helpDialog.editText"), shortcuts: [V("Enter")] }), p(ne, { label: C("helpDialog.textNewLine"), shortcuts: [V("Enter"), V("Shift+Enter")] }), p(ne, { label: C("helpDialog.textFinish"), shortcuts: [V("Esc"), V("CtrlOrCmd+Enter")] }), p(ne, { label: C("helpDialog.curvedArrow"), shortcuts: ["A", C("helpDialog.click"), C("helpDialog.click"), C("helpDialog.click")], isOr: !1 }), p(ne, { label: C("helpDialog.curvedLine"), shortcuts: ["L", C("helpDialog.click"), C("helpDialog.click"), C("helpDialog.click")], isOr: !1 }), p(ne, { label: C("helpDialog.cropStart"), shortcuts: [C("helpDialog.doubleClick"), V("Enter")], isOr: !0 }), p(ne, { label: C("helpDialog.cropFinish"), shortcuts: [V("Enter"), V("Escape")], isOr: !0 }), p(ne, { label: C("toolBar.lock"), shortcuts: [P.Q] }), p(ne, { label: C("helpDialog.preventBinding"), shortcuts: [V("CtrlOrCmd")] }), p(ne, { label: C("toolBar.link"), shortcuts: [V("CtrlOrCmd+K")] })] }), _(Hh, { className: "HelpDialog__island--view", caption: C("helpDialog.view"), children: [p(ne, { label: C("buttons.zoomIn"), shortcuts: [V("CtrlOrCmd++")] }), p(ne, { label: C("buttons.zoomOut"), shortcuts: [V("CtrlOrCmd+-")] }), p(ne, { label: C("buttons.resetZoom"), shortcuts: [V("CtrlOrCmd+0")] }), p(ne, { label: C("helpDialog.zoomToFit"), shortcuts: ["Shift+1"] }), p(ne, { label: C("helpDialog.zoomToSelection"), shortcuts: ["Shift+2"] }), p(ne, { label: C("helpDialog.movePageUpDown"), shortcuts: ["PgUp/PgDn"] }), p(ne, { label: C("helpDialog.movePageLeftRight"), shortcuts: ["Shift+PgUp/PgDn"] }), p(ne, { label: C("buttons.zenMode"), shortcuts: [V("Alt+Z")] }), p(ne, { label: C("buttons.objectsSnapMode"), shortcuts: [V("Alt+S")] }), p(ne, { label: C("labels.toggleGrid"), shortcuts: [V("CtrlOrCmd+'")] }), p(ne, { label: C("labels.viewMode"), shortcuts: [V("Alt+R")] }), p(ne, { label: C("labels.toggleTheme"), shortcuts: [V("Alt+Shift+D")] }), p(ne, { label: C("stats.fullTitle"), shortcuts: [V("Alt+/")] }), p(ne, { label: C("search.title"), shortcuts: [sn("searchMenu")] }), p(ne, { label: C("commandPalette.title"), shortcuts: Fs ? [sn("commandPalette")] : [sn("commandPalette"), sn("commandPalette", 1)] })] }), _(Hh, { className: "HelpDialog__island--editor", caption: C("helpDialog.editor"), children: [p(ne, { label: C("helpDialog.createFlowchart"), shortcuts: [V("CtrlOrCmd+Arrow Key")], isOr: !0 }), p(ne, { label: C("helpDialog.navigateFlowchart"), shortcuts: [V("Alt+Arrow Key")], isOr: !0 }), p(ne, { label: C("labels.moveCanvas"), shortcuts: [V(`Space+${C("helpDialog.drag")}`), V(`Wheel+${C("helpDialog.drag")}`)], isOr: !0 }), p(ne, { label: C("buttons.clearReset"), shortcuts: [V("CtrlOrCmd+Delete")] }), p(ne, { label: C("labels.delete"), shortcuts: [V("Delete")] }), p(ne, { label: C("labels.cut"), shortcuts: [V("CtrlOrCmd+X")] }), p(ne, { label: C("labels.copy"), shortcuts: [V("CtrlOrCmd+C")] }), p(ne, { label: C("labels.paste"), shortcuts: [V("CtrlOrCmd+V")] }), p(ne, { label: C("labels.pasteAsPlaintext"), shortcuts: [V("CtrlOrCmd+Shift+V")] }), p(ne, { label: C("labels.selectAll"), shortcuts: [V("CtrlOrCmd+A")] }), p(ne, { label: C("labels.multiSelect"), shortcuts: [V(`Shift+${C("helpDialog.click")}`)] }), p(ne, { label: C("helpDialog.deepSelect"), shortcuts: [V(`CtrlOrCmd+${C("helpDialog.click")}`)] }), p(ne, { label: C("helpDialog.deepBoxSelect"), shortcuts: [V(`CtrlOrCmd+${C("helpDialog.drag")}`)] }), (Ap || Fs) && p(ne, { label: C("labels.copyAsPng"), shortcuts: [V("Shift+Alt+C")] }), p(ne, { label: C("labels.copyStyles"), shortcuts: [V("CtrlOrCmd+Alt+C")] }), p(ne, { label: C("labels.pasteStyles"), shortcuts: [V("CtrlOrCmd+Alt+V")] }), p(ne, { label: C("labels.sendToBack"), shortcuts: [V(Qa ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")] }), p(ne, { label: C("labels.bringToFront"), shortcuts: [V(Qa ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")] }), p(ne, { label: C("labels.sendBackward"), shortcuts: [V("CtrlOrCmd+[")] }), p(ne, { label: C("labels.bringForward"), shortcuts: [V("CtrlOrCmd+]")] }), p(ne, { label: C("labels.alignTop"), shortcuts: [V("CtrlOrCmd+Shift+Up")] }), p(ne, { label: C("labels.alignBottom"), shortcuts: [V("CtrlOrCmd+Shift+Down")] }), p(ne, { label: C("labels.alignLeft"), shortcuts: [V("CtrlOrCmd+Shift+Left")] }), p(ne, { label: C("labels.alignRight"), shortcuts: [V("CtrlOrCmd+Shift+Right")] }), p(ne, { label: C("labels.duplicateSelection"), shortcuts: [V("CtrlOrCmd+D"), V(`Alt+${C("helpDialog.drag")}`)] }), p(ne, { label: C("helpDialog.toggleElementLock"), shortcuts: [V("CtrlOrCmd+Shift+L")] }), p(ne, { label: C("buttons.undo"), shortcuts: [V("CtrlOrCmd+Z")] }), p(ne, { label: C("buttons.redo"), shortcuts: Bb ? [V("CtrlOrCmd+Y"), V("CtrlOrCmd+Shift+Z")] : [V("CtrlOrCmd+Shift+Z")] }), p(ne, { label: C("labels.group"), shortcuts: [V("CtrlOrCmd+G")] }), p(ne, { label: C("labels.ungroup"), shortcuts: [V("CtrlOrCmd+Shift+G")] }), p(ne, { label: C("labels.flipHorizontal"), shortcuts: [V("Shift+H")] }), p(ne, { label: C("labels.flipVertical"), shortcuts: [V("Shift+V")] }), p(ne, { label: C("labels.showStroke"), shortcuts: [V("S")] }), p(ne, { label: C("labels.showBackground"), shortcuts: [V("G")] }), p(ne, { label: C("labels.showFonts"), shortcuts: [V("Shift+F")] }), p(ne, { label: C("labels.decreaseFontSize"), shortcuts: [V("CtrlOrCmd+Shift+<")] }), p(ne, { label: C("labels.increaseFontSize"), shortcuts: [V("CtrlOrCmd+Shift+>")] })] })] })] }) });
}, WG = 4, VG = 8, GG = ({ shouldWrap: e, children: t, username: n }) => e ? p(Ul, { label: n || "Unknown user", children: t }) : p(le, { children: t }), Xh = ({ actionManager: e, collaborator: t, socketId: n, withName: a = !1, shouldWrapWithTooltip: i = !1, isBeingFollowed: r }) => {
  let l = { socketId: n, collaborator: t, withName: a, isBeingFollowed: r }, o = e.renderAction("goToCollaborator", l);
  return p(GG, { username: t.username, shouldWrap: i, children: o }, n);
}, jG = ["avatarUrl", "id", "socketId", "username", "isInCall", "isSpeaking", "isMuted"], Ev = Z.memo(({ className: e, mobile: t, collaborators: n, userToFollow: a }) => {
  let i = An(), r = /* @__PURE__ */ new Map();
  n.forEach((U, m) => {
    let g = U.id || m;
    r.set(g, { ...U, socketId: m });
  });
  let l = Array.from(r.values()).filter((U) => {
    var m;
    return (m = U.username) == null ? void 0 : m.trim();
  }), [o, c] = Z.useState(""), d = l.filter((U) => {
    var m;
    return (m = U.username) == null ? void 0 : m.toLowerCase().includes(o);
  }), s = Z.useRef(null);
  _n(() => {
    if (s.current) {
      let U = (g) => {
        let b = Math.max(1, Math.min(8, Math.floor(g / 38)));
        f(b);
      };
      if (U(s.current.clientWidth), !p1) return;
      let m = new ResizeObserver((g) => {
        for (let b of g) {
          let { width: v } = b.contentRect;
          U(v);
        }
      });
      return m.observe(s.current), () => {
        m.disconnect();
      };
    }
  }, []);
  let [u, f] = Z.useState(WG), h = l.slice(0, u - 1).map((U) => Xh({ actionManager: i, collaborator: U, socketId: U.socketId, shouldWrapWithTooltip: !0, isBeingFollowed: U.socketId === a }));
  return t ? p("div", { className: ae("UserList UserList_mobile", e), children: l.map((U) => Xh({ actionManager: i, collaborator: U, socketId: U.socketId, shouldWrapWithTooltip: !0, isBeingFollowed: U.socketId === a })) }) : p("div", { className: "UserList__wrapper", ref: s, children: _("div", { className: ae("UserList", e), style: { "--max-avatars": u }, children: [h, l.length > u - 1 && _(yf, { children: [_(wf, { className: "UserList__more", children: ["+", l.length - u + 1] }), p(sU, { style: { zIndex: 2, width: "15rem", textAlign: "left" }, align: "end", sideOffset: 10, children: _(wa, { padding: 2, children: [l.length >= VG && p(I9, { placeholder: C("quickSearch.placeholder"), onChange: c }), p(T9, { className: "dropdown-menu UserList__collaborators", placeholder: C("userList.empty"), children: d.length > 0 ? [p("div", { className: "hint", children: C("userList.hint.text") }), d.map((U) => Xh({ actionManager: i, collaborator: U, socketId: U.socketId, withName: !0, isBeingFollowed: U.socketId === a }))] : [] }), p(B4, { width: 20, height: 10, style: { fill: "var(--popup-bg-color)", filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)" } })] }) })] })] }) });
}, (e, t) => {
  if (e.collaborators.size !== t.collaborators.size || e.mobile !== t.mobile || e.className !== t.className || e.userToFollow !== t.userToFollow) return !1;
  let n = t.collaborators.keys();
  for (let [a, i] of e.collaborators) {
    let r = t.collaborators.get(a);
    if (!r || a !== n.next().value || !en(i, r, jG)) return !1;
  }
  return !0;
}), s5 = ({ children: e, color: t }) => p("div", { className: "Card", style: { "--card-color": t === "primary" ? "var(--color-primary)" : Yt[t][7], "--card-color-darker": t === "primary" ? "var(--color-primary-darker)" : Yt[t][8], "--card-color-darkest": t === "primary" ? "var(--color-primary-darkest)" : Yt[t][9] }, children: e }), YG = ({ elements: e, appState: t, setAppState: n, files: a, actionManager: i, exportOpts: r, canvas: l, onCloseRequest: o }) => {
  let { onExportToBackend: c } = r;
  return p("div", { className: "ExportDialog ExportDialog--json", children: _("div", { className: "ExportDialog-cards", children: [r.saveFileToDisk && _(s5, { color: "lime", children: [p("div", { className: "Card-icon", children: _C }), p("h2", { children: C("exportDialog.disk_title") }), _("div", { className: "Card-details", children: [C("exportDialog.disk_details"), !vl && i.renderAction("changeProjectName")] }), p(Te, { className: "Card-button", type: "button", title: C("exportDialog.disk_button"), "aria-label": C("exportDialog.disk_button"), showAriaLabel: !0, onClick: () => {
    i.executeAction(z9, "ui");
  } })] }), c && _(s5, { color: "pink", children: [p("div", { className: "Card-icon", children: E1 }), p("h2", { children: C("exportDialog.link_title") }), p("div", { className: "Card-details", children: C("exportDialog.link_details") }), p(Te, { className: "Card-button", type: "button", title: C("exportDialog.link_button"), "aria-label": C("exportDialog.link_button"), showAriaLabel: !0, onClick: async () => {
    try {
      rt("export", "link", `ui (${NM()})`), await c(e, t, a), o();
    } catch (d) {
      n({ errorMessage: d.message });
    }
  } })] }), r.renderCustomUI && r.renderCustomUI(e, t, a, l)] }) });
}, ZG = ({ elements: e, appState: t, files: n, actionManager: a, exportOpts: i, canvas: r, setAppState: l }) => {
  var c;
  let o = Z.useCallback(() => {
    l({ openDialog: null });
  }, [l]);
  return p(le, { children: ((c = t.openDialog) == null ? void 0 : c.name) === "jsonExport" && p(Ia, { onCloseRequest: o, title: C("buttons.export"), children: p(YG, { elements: e, appState: t, setAppState: l, files: n, actionManager: a, onCloseRequest: o, exportOpts: i, canvas: r }) }) });
}, KG = (e) => p("button", { className: "help-icon", onClick: e.onClick, type: "button", title: `${C("helpDialog.title")}  ?`, "aria-label": C("helpDialog.title"), children: q0 }), xv = ({ appState: e, actionManager: t, showExitZenModeBtn: n, renderWelcomeScreen: a }) => {
  let { FooterCenterTunnel: i, WelcomeScreenHelpHintTunnel: r } = Fn(), l = Ht(), o = !e.viewModeEnabled && e.multiElement && l.isTouchScreen;
  return _("footer", { role: "contentinfo", className: "layer-ui__wrapper__footer App-menu App-menu_bottom", children: [p("div", { className: ae("layer-ui__wrapper__footer-left zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled }), children: p(jn.Col, { gap: 2, children: _(lc, { heading: "canvasActions", children: [p(eG, { renderAction: t.renderAction, zoom: e.zoom }), !e.viewModeEnabled && p(tG, { renderAction: t.renderAction, className: ae("zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-bottom": e.zenModeEnabled }) }), o && p(aG, { renderAction: t.renderAction, className: ae("zen-mode-transition", { "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled }) })] }) }) }), p(i.Out, {}), p("div", { className: ae("layer-ui__wrapper__footer-right zen-mode-transition", { "transition-right": e.zenModeEnabled }), children: _("div", { style: { position: "relative" }, children: [a && p(r.Out, {}), p(KG, { onClick: () => t.executeAction(yU) })] }) }), p(nG, { actionManager: t, showExitZenModeBtn: n })] });
}, qG = xv;
xv.displayName = "Footer";
var Sv = Z.createContext({}), kv = ({ children: e, className: t }) => {
  let n = Ht(), a = un(Sv), i = !!(n.editor.canFitSidebar && a.shouldRenderDockButton);
  return _("div", { className: ae("sidebar__header", t), "data-testid": "sidebar-header", children: [e, _("div", { className: "sidebar__header__buttons", children: [i && p(Ul, { label: C("labels.sidebarLock"), children: p(xo, { onSelect: () => {
    var r;
    return (r = a.onDock) == null ? void 0 : r.call(a, !a.docked);
  }, selected: !!a.docked, className: "sidebar__dock", "data-testid": "sidebar-dock", "aria-label": C("labels.sidebarLock"), children: sC }) }), p(xo, { "data-testid": "sidebar-close", className: "sidebar__close", onSelect: a.onCloseRequest, "aria-label": C("buttons.close"), children: _o })] })] });
};
kv.displayName = "SidebarHeader";
var Mv = ({ name: e, tab: t, icon: n, title: a, children: i, onToggle: r, className: l, style: o }) => {
  var s;
  let c = Xt(), d = bn();
  return _("label", { title: a, className: "sidebar-trigger__label-element", children: [p("input", { className: "ToolIcon_type_checkbox", type: "checkbox", onChange: (u) => {
    var h;
    (h = document.querySelector(".layer-ui__wrapper")) == null || h.classList.remove("animate");
    let f = u.target.checked;
    c({ openSidebar: f ? { name: e, tab: t } : null }), r == null || r(f);
  }, checked: ((s = d.openSidebar) == null ? void 0 : s.name) === e, "aria-label": a, "aria-keyshortcuts": "0" }), _("div", { className: ae("sidebar-trigger", l), style: o, children: [n && p("div", { children: n }), i && p("div", { className: "sidebar-trigger__label", children: i })] })] });
};
Mv.displayName = "SidebarTrigger";
var Cv = ({ children: e, ...t }) => p(s9, { className: "sidebar-triggers", ...t, children: e });
Cv.displayName = "SidebarTabTriggers";
var Iv = ({ children: e, tab: t, onSelect: n, ...a }) => p(c9, { value: t, asChild: !0, onSelect: n, children: p("button", { type: "button", className: "excalidraw-button sidebar-tab-trigger", ...a, children: e }) });
Iv.displayName = "SidebarTabTrigger";
var Tv = ({ children: e, ...t }) => {
  let n = bn(), a = Xt();
  if (!n.openSidebar) return null;
  let { name: i } = n.openSidebar;
  return p(o9, { className: "sidebar-tabs-root", value: n.openSidebar.tab, onValueChange: (r) => a((l) => ({ ...l, openSidebar: { ...l.openSidebar, name: i, tab: r } })), ...t, children: e });
};
Tv.displayName = "SidebarTabs";
var _v = ({ tab: e, children: t, ...n }) => p(d9, { ...n, value: e, "data-testid": e, children: t });
_v.displayName = "SidebarTab";
var SU = Kt(!1), Av = It(({ name: e, children: t, onDock: n, docked: a, className: i, ...r }, l) => {
  we.DEV && n && a == null && console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");
  let o = Xt(), c = xf(SU);
  _n(() => (c(!!a), () => {
    c(!1);
  }), [c, a]);
  let d = re({});
  d.current.onCloseRequest = () => {
    o({ openSidebar: null });
  }, d.current.onDock = (h) => n == null ? void 0 : n(h), d.current = gd(d.current, { docked: a, shouldRenderDockButton: !!n && a != null });
  let s = re(null);
  N5(l, () => s.current);
  let u = Ht(), f = _e(() => {
    document.querySelector(".Dialog") || o({ openSidebar: null });
  }, [o]);
  return pU(s, _e((h) => {
    h.target.closest(".sidebar-trigger") || (!a || !u.editor.canFitSidebar) && f();
  }, [f, a, u.editor.canFitSidebar])), Q(() => {
    let h = (U) => {
      U.key === P.ESCAPE && (!a || !u.editor.canFitSidebar) && f();
    };
    return document.addEventListener("keydown", h), () => {
      document.removeEventListener("keydown", h);
    };
  }, [f, a, u.editor.canFitSidebar]), p(wa, { ...r, className: ae("sidebar", { "sidebar--docked": a }, i), ref: s, children: p(Sv.Provider, { value: d.current, children: t }) });
});
Av.displayName = "SidebarInner";
var $a = Object.assign(It((e, t) => {
  var o;
  let n = bn(), { onStateChange: a } = e, i = re(n.openSidebar);
  Q(() => {
    var c, d, s, u, f;
    (!n.openSidebar && ((c = i == null ? void 0 : i.current) == null ? void 0 : c.name) === e.name || ((d = n.openSidebar) == null ? void 0 : d.name) === e.name && ((s = i == null ? void 0 : i.current) == null ? void 0 : s.name) !== e.name || ((u = i.current) == null ? void 0 : u.name) === e.name) && n.openSidebar !== i.current && (a == null || a(((f = n.openSidebar) == null ? void 0 : f.name) !== e.name ? null : n.openSidebar)), i.current = n.openSidebar;
  }, [n.openSidebar, a, e.name]);
  let [r, l] = oe(!1);
  return _n(() => (l(!0), () => l(!1)), []), r && ((o = n.openSidebar) == null ? void 0 : o.name) === e.name ? Ke(Av, { ...e, ref: t, key: e.name }) : null;
}), { Header: kv, TabTriggers: Cv, TabTrigger: Iv, Tabs: Tv, Tab: _v, Trigger: Mv });
$a.displayName = "Sidebar";
var Dv = {};
z5(Dv, { ChangeCanvasBackground: () => Xv, ClearCanvas: () => Bv, CommandPalette: () => $v, Export: () => Wv, Help: () => Fv, LiveCollaborationTrigger: () => Gv, LoadScene: () => Pv, SaveAsImage: () => Ov, SaveToActiveFile: () => Nv, SearchMenu: () => zv, Socials: () => Vv, ToggleTheme: () => Hv });
var Lv = Kt({ active: !1 });
async function JG({ title: e, description: t, actionLabel: n, color: a }) {
  return new Promise((i) => {
    ma.set(Lv, { active: !0, onConfirm: () => i(!0), onClose: () => i(!1), onReject: () => i(!1), title: e, description: t, actionLabel: n, color: a });
  });
}
var Rv = ({ value: e, shortcut: t, onChange: n, choices: a, children: i, name: r }) => {
  let l = Ht();
  return _(le, { children: [_("div", { className: "dropdown-menu-item-base dropdown-menu-item-bare", children: [p("label", { className: "dropdown-menu-item__text", htmlFor: r, children: i }), p(pv, { name: r, value: e, onChange: n, choices: a })] }), t && !l.editor.isMobile && p("div", { className: "dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned", children: t })] });
};
Rv.displayName = "DropdownMenuItemContentRadio";
var QG = Rv, Pv = () => {
  let { t: e } = fn(), t = An(), n = Lf();
  return t.isActionEnabled(f0) ? p(aa, { icon: J0, onSelect: async () => {
    (!n.length || await JG({ title: e("overwriteConfirm.modal.loadFromFile.title"), actionLabel: e("overwriteConfirm.modal.loadFromFile.button"), color: "warning", description: p(Za, { i18nKey: "overwriteConfirm.modal.loadFromFile.description", bold: (a) => p("strong", { children: a }), br: () => p("br", {}) }) })) && t.executeAction(f0);
  }, "data-testid": "load-button", shortcut: sn("loadScene"), "aria-label": e("buttons.load"), children: e("buttons.load") }) : null;
};
Pv.displayName = "LoadScene";
var Nv = () => {
  let { t: e } = fn(), t = An();
  return t.isActionEnabled(N6) ? p(aa, { shortcut: sn("saveScene"), "data-testid": "save-button", onSelect: () => t.executeAction(N6), icon: CC, "aria-label": `${e("buttons.save")}`, children: `${e("buttons.save")}` }) : null;
};
Nv.displayName = "SaveToActiveFile";
var Ov = () => {
  let e = Xt(), { t } = fn();
  return p(aa, { icon: b8, "data-testid": "image-export-button", onSelect: () => e({ openDialog: { name: "imageExport" } }), shortcut: sn("imageExport"), "aria-label": t("buttons.exportImage"), children: t("buttons.exportImage") });
};
Ov.displayName = "SaveAsImage";
var $v = (e) => {
  let t = Xt(), { t: n } = fn();
  return p(aa, { icon: T8, "data-testid": "command-palette-button", onSelect: () => {
    rt("command_palette", "open", "menu"), t({ openDialog: { name: "commandPalette" } });
  }, shortcut: sn("commandPalette"), "aria-label": n("commandPalette.title"), className: e == null ? void 0 : e.className, children: n("commandPalette.title") });
};
$v.displayName = "CommandPalette";
var zv = (e) => {
  let { t } = fn(), n = An();
  return p(aa, { icon: cl, "data-testid": "search-menu-button", onSelect: () => {
    n.executeAction(uv);
  }, shortcut: sn("searchMenu"), "aria-label": t("search.title"), className: e == null ? void 0 : e.className, children: t("search.title") });
};
zv.displayName = "SearchMenu";
var Fv = () => {
  let { t: e } = fn(), t = An();
  return p(aa, { "data-testid": "help-menu-item", icon: q0, onSelect: () => t.executeAction(yU), shortcut: "?", "aria-label": e("helpDialog.title"), children: e("helpDialog.title") });
};
Fv.displayName = "Help";
var Bv = () => {
  let { t: e } = fn(), t = xf(Df);
  return An().isActionEnabled(Is) ? p(aa, { icon: sl, onSelect: () => t("clearCanvas"), "data-testid": "clear-canvas-button", "aria-label": e("buttons.clearReset"), children: e("buttons.clearReset") }) : null;
};
Bv.displayName = "ClearCanvas";
var Hv = (e) => {
  let { t } = fn(), n = bn(), a = An(), i = sn("toggleTheme");
  return a.isActionEnabled(Tu) ? e != null && e.allowSystemTheme ? p(QG, { name: "theme", value: e.theme, onChange: (r) => e.onSelect(r), choices: [{ value: Ie.LIGHT, label: w1, ariaLabel: `${t("buttons.lightMode")} - ${i}` }, { value: Ie.DARK, label: y1, ariaLabel: `${t("buttons.darkMode")} - ${i}` }, { value: "system", label: $I, ariaLabel: t("buttons.systemMode") }], children: t("labels.theme") }) : p(aa, { onSelect: (r) => {
    if (r.preventDefault(), e == null ? void 0 : e.onSelect) e.onSelect(n.theme === Ie.DARK ? Ie.LIGHT : Ie.DARK);
    else return a.executeAction(Tu);
  }, icon: n.theme === Ie.DARK ? w1 : y1, "data-testid": "toggle-dark-mode", shortcut: i, "aria-label": n.theme === Ie.DARK ? t("buttons.lightMode") : t("buttons.darkMode"), children: n.theme === Ie.DARK ? t("buttons.lightMode") : t("buttons.darkMode") }) : null;
};
Hv.displayName = "ToggleTheme";
var Xv = () => {
  let { t: e } = fn(), t = bn(), n = An(), a = Mc();
  return t.viewModeEnabled || !a.UIOptions.canvasActions.changeViewBackgroundColor ? null : _("div", { style: { marginTop: "0.5rem" }, children: [p("div", { "data-testid": "canvas-background-label", style: { fontSize: ".75rem", marginBottom: ".5rem" }, children: e("labels.canvasBackground") }), p("div", { style: { padding: "0 0.625rem" }, children: n.renderAction("changeViewBackgroundColor") })] });
};
Xv.displayName = "ChangeCanvasBackground";
var Wv = () => {
  let { t: e } = fn(), t = Xt();
  return p(aa, { icon: Zu, onSelect: () => {
    t({ openDialog: { name: "jsonExport" } });
  }, "data-testid": "json-export-button", "aria-label": e("buttons.export"), children: e("buttons.export") });
};
Wv.displayName = "Export";
var Vv = () => {
  let { t: e } = fn();
  return _(le, { children: [p(Nd, { icon: g8, href: "https://github.com/excalidraw/excalidraw", "aria-label": "GitHub", children: "GitHub" }), p(Nd, { icon: kC, href: "https://x.com/excalidraw", "aria-label": "X", children: e("labels.followUs") }), p(Nd, { icon: SC, href: "https://discord.gg/UexuTaE", "aria-label": "Discord", children: e("labels.discordChat") })] });
};
Vv.displayName = "Socials";
var Gv = ({ onSelect: e, isCollaborating: t }) => {
  let { t: n } = fn();
  return p(aa, { "data-testid": "collab-button", icon: w8, className: ae({ "active-collab": t }), onSelect: e, children: n("labels.liveCollaboration") });
};
Gv.displayName = "LiveCollaborationTrigger";
var Sc = (e, t) => {
  let n = Kt(0), a = (i) => {
    let { tunnelsJotai: { useAtom: r } } = Fn(), [, l] = r(n), o = re({ preferHost: !1, counter: 0 });
    return _n(() => {
      let c = o.current;
      return l((d) => {
        let s = d + 1;
        return c.counter = s, s;
      }), () => {
        l((d) => {
          let s = d - 1;
          return c.counter = s, s || (c.preferHost = !1), s;
        });
      };
    }, [l]), i.__fallback || (o.current.preferHost = !0), !o.current.counter && i.__fallback && o.current.preferHost || o.current.counter > 1 && i.__fallback ? null : p(t, { ...i });
  };
  return a.displayName = e, a;
}, ej = Object.assign(Sc("MainMenu", ({ children: e, onSelect: t }) => {
  var o;
  let { MainMenuTunnel: n } = Fn(), a = Ht(), i = bn(), r = Xt(), l = a.editor.isMobile ? void 0 : () => r({ openMenu: null });
  return p(n.In, { children: _(ct, { open: i.openMenu === "canvas", children: [p(ct.Trigger, { onToggle: () => {
    r({ openMenu: i.openMenu === "canvas" ? null : "canvas" });
  }, "data-testid": "main-menu-trigger", className: "main-menu-trigger", children: m8 }), _(ct.Content, { onClickOutside: l, onSelect: Gu(t, () => {
    r({ openMenu: null });
  }), children: [e, a.editor.isMobile && i.collaborators.size > 0 && _("fieldset", { className: "UserList-Wrapper", children: [p("legend", { children: C("labels.collaborators") }), p(Ev, { mobile: !0, collaborators: i.collaborators, userToFollow: ((o = i.userToFollow) == null ? void 0 : o.socketId) || null })] })] })] }) });
}), { Trigger: ct.Trigger, Item: ct.Item, ItemLink: ct.ItemLink, ItemCustom: ct.ItemCustom, Group: ct.Group, Separator: ct.Separator, DefaultItems: Dv }), yn = ej, kU = ({ title: e, children: t, actionLabel: n, onClick: a }) => _("div", { className: "OverwriteConfirm__Actions__Action", children: [p("h4", { children: e }), p("div", { className: "OverwriteConfirm__Actions__Action__content", children: t }), p(_s, { variant: "outlined", color: "muted", label: n, size: "large", fullWidth: !0, onClick: a })] }), tj = () => {
  let { t: e } = fn(), t = An(), n = Xt();
  return p(kU, { title: e("overwriteConfirm.action.exportToImage.title"), actionLabel: e("overwriteConfirm.action.exportToImage.button"), onClick: () => {
    t.executeAction($9, "ui", !0), n({ openDialog: { name: "imageExport" } });
  }, children: e("overwriteConfirm.action.exportToImage.description") });
}, nj = () => {
  let { t: e } = fn(), t = An();
  return p(kU, { title: e("overwriteConfirm.action.saveToDisk.title"), actionLabel: e("overwriteConfirm.action.saveToDisk.button"), onClick: () => {
    t.executeAction(z9, "ui");
  }, children: e("overwriteConfirm.action.saveToDisk.description") });
}, c5 = Object.assign(({ children: e }) => p("div", { className: "OverwriteConfirm__Actions", children: e }), { ExportToImage: tj, SaveToDisk: nj }), Wh = Object.assign(Sc("OverwriteConfirmDialog", ({ children: e }) => {
  let { OverwriteConfirmDialogTunnel: t } = Fn(), [n, a] = Et(Lv);
  if (!n.active) return null;
  let i = () => {
    n.onClose(), a((l) => ({ ...l, active: !1 }));
  }, r = () => {
    n.onConfirm(), a((l) => ({ ...l, active: !1 }));
  };
  return p(t.In, { children: p(Ia, { onCloseRequest: i, title: !1, size: 916, children: _("div", { className: "OverwriteConfirm", children: [p("h3", { children: n.title }), _("div", { className: `OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`, children: [p("div", { className: "OverwriteConfirm__Description__icon", children: wI }), p("div", { children: n.description }), p("div", { className: "OverwriteConfirm__Description__spacer" }), p(_s, { color: n.color, size: "large", label: n.actionLabel, onClick: r })] }), p(c5, { children: e })] }) }) });
}), { Actions: c5, Action: kU }), aj = Kt(""), jv = Kt(null), ij = 350, rj = () => {
  let e = ci(), t = Xt(), n = re(null), [a, i] = Et(aj), r = a.trim(), [l, o] = oe(!1), [c, d] = oe({ nonce: null, items: [] }), s = re(null), u = re(void 0), [f, h] = Et(jv), U = e.scene.getNonDeletedElementsMap();
  Q(() => {
    l || (r !== s.current || e.scene.getSceneNonce() !== u.current) && (s.current = null, d5(r, e, (y, w) => {
      d({ nonce: ni(), items: y }), s.current = r, u.current = e.scene.getSceneNonce(), t({ searchMatches: y.map((x) => ({ id: x.textElement.id, focus: !1, matchedLines: x.matchedLines })) });
    }));
  }, [l, r, U, e, t, h, u]);
  let m = () => {
    c.items.length > 0 && h((y) => y === null ? 0 : (y + 1) % c.items.length);
  }, g = () => {
    c.items.length > 0 && h((y) => y === null ? 0 : y - 1 < 0 ? c.items.length - 1 : y - 1);
  };
  Q(() => {
    t((y) => ({ searchMatches: y.searchMatches.map((w, x) => x === f ? { ...w, focus: !0 } : { ...w, focus: !1 }) }));
  }, [f, t]), Q(() => {
    var y, w, x, S;
    if (c.items.length > 0 && f !== null) {
      let E = c.items[f];
      if (E) {
        let M = e.state.zoom.value, I = $n({ text: E.searchQuery, x: E.textElement.x + (((y = E.matchedLines[0]) == null ? void 0 : y.offsetX) ?? 0), y: E.textElement.y + (((w = E.matchedLines[0]) == null ? void 0 : w.offsetY) ?? 0), width: (x = E.matchedLines[0]) == null ? void 0 : x.width, height: (S = E.matchedLines[0]) == null ? void 0 : S.height, fontSize: E.textElement.fontSize, fontFamily: E.textElement.fontFamily }), T = 14, A = E.textElement.fontSize, D = A * M < T;
        if (!Td([I], e.canvas.width / window.devicePixelRatio, e.canvas.height / window.devicePixelRatio, { offsetLeft: e.state.offsetLeft, offsetTop: e.state.offsetTop, scrollX: e.state.scrollX, scrollY: e.state.scrollY, zoom: e.state.zoom }, e.scene.getNonDeletedElementsMap(), e.getEditorUIOffsets()) || D) {
          let R;
          D ? A >= T ? R = { fitToContent: !0 } : R = { fitToViewport: !0, maxZoom: Ka(T / A, 1) } : R = { fitToContent: !0 }, e.scrollToContent(I, { animate: !0, duration: 300, ...R, canvasOffsets: e.getEditorUIOffsets() });
        }
      }
    }
  }, [f, c, e]), Q(() => () => {
    h(null), s.current = null, u.current = void 0, t({ searchMatches: [] }), o(!1);
  }, [t, h]);
  let b = kf({ goToNextItem: m, goToPreviousItem: g, searchMatches: c });
  Q(() => ut(window, "keydown", (w) => {
    var x, S, E;
    if (w.key === P.ESCAPE && !e.state.openDialog && !e.state.openPopup) {
      w.preventDefault(), w.stopPropagation(), t({ openSidebar: null });
      return;
    }
    w[P.CTRL_OR_CMD] && w.key === P.F && (w.preventDefault(), w.stopPropagation(), (x = n.current) != null && x.matches(":focus") ? t({ openSidebar: null }) : (e.state.openDialog && t({ openDialog: null }), (S = n.current) == null || S.focus(), (E = n.current) == null || E.select())), w.target instanceof HTMLElement && w.target.closest(".layer-ui__search") && b.searchMatches.items.length && (w.key === P.ENTER && (w.stopPropagation(), b.goToNextItem()), w.key === P.ARROW_UP ? (w.stopPropagation(), b.goToPreviousItem()) : w.key === P.ARROW_DOWN && (w.stopPropagation(), b.goToNextItem()));
  }, { capture: !0, passive: !1 }), [t, b, e]);
  let v = `${c.items.length} ${c.items.length === 1 ? C("search.singleResult") : C("search.multipleResults")}`;
  return _("div", { className: "layer-ui__search", children: [p("div", { className: "layer-ui__search-header", children: p(xU, { className: ao.SEARCH_MENU_INPUT_WRAPPER, value: a, ref: n, placeholder: C("search.placeholder"), icon: cl, onChange: (y) => {
    i(y), o(!0);
    let w = y.trim();
    d5(w, e, (x, S) => {
      d({ nonce: ni(), items: x }), h(S), s.current = w, u.current = e.scene.getSceneNonce(), t({ searchMatches: x.map((E) => ({ id: E.textElement.id, focus: !1, matchedLines: E.matchedLines })) }), o(!1);
    });
  }, selectOnRender: !0 }) }), _("div", { className: "layer-ui__search-count", children: [c.items.length > 0 && _(le, { children: [f !== null && f > -1 ? _("div", { children: [f + 1, " / ", v] }) : p("div", { children: v }), _("div", { className: "result-nav", children: [p(xo, { onSelect: () => {
    m();
  }, className: "result-nav-btn", children: A8 }), p(xo, { onSelect: () => {
    g();
  }, className: "result-nav-btn", children: GI })] })] }), c.items.length === 0 && r && s.current && p("div", { style: { margin: "1rem auto" }, children: C("search.noMatch") })] }), p(cj, { matches: c, onItemClick: h, focusIndex: f, searchQuery: r })] });
}, lj = (e) => {
  let t = [e.preview.moreBefore ? "..." : "", e.preview.previewText.slice(0, e.preview.indexInSearchQuery), e.preview.previewText.slice(e.preview.indexInSearchQuery, e.preview.indexInSearchQuery + e.searchQuery.length), e.preview.previewText.slice(e.preview.indexInSearchQuery + e.searchQuery.length), e.preview.moreAfter ? "..." : ""];
  return p("div", { tabIndex: -1, className: ae("layer-ui__result-item", { active: e.highlighted }), onClick: e.onClick, ref: (n) => {
    e.highlighted && (n == null || n.scrollIntoView({ behavior: "auto", block: "nearest" }));
  }, children: p("div", { className: "preview-text", children: t.flatMap((n, a) => p(Ru, { children: a === 2 ? p("b", { children: n }) : n }, a)) }) });
}, oj = (e) => p("div", { className: "layer-ui__search-result-container", children: e.matches.items.map((t, n) => p(lj, { searchQuery: e.searchQuery, preview: t.preview, highlighted: n === e.focusIndex, onClick: () => e.onItemClick(n) }, t.textElement.id + t.index)) }), sj = (e, t) => e.matches.nonce === t.matches.nonce && e.focusIndex === t.focusIndex, cj = So(oj, sj), dj = (e, t, n) => {
  let a = e.slice(0, t), i = a.split(/\s+/), r = a.endsWith(" "), l = i.length - 2 - 1 - (r ? 0 : 1), o = i.slice(l <= 0 ? 0 : l).join(" ") + (r ? " " : ""), c = 20;
  o = o.length > c ? o.slice(-c) : o;
  let d = e.slice(t + n.length), s = d.split(/\s+/), u = !d.startsWith(" "), f = u ? 6 : 5, h = (u ? "" : " ") + s.slice(0, f).join(" ");
  return { indexInSearchQuery: o.length, previewText: o + n + h, moreBefore: l > 0, moreAfter: s.length > f };
}, uj = (e, t) => {
  let n = e.split(`
`), a = [], i = 0;
  for (let r = 0; r < n.length; r++) {
    let l = n[r], o = n[r + 1];
    if (o) {
      let c = t.indexOf(o, i);
      if (c > l.length + i) {
        let d = c - (l.length + i);
        for (; d > 0; ) l += " ", d--;
      }
    }
    a.push(l), i = i + l.length;
  }
  return a.join(`
`);
}, fj = (e, t, n) => {
  let a = uj(e.text, e.originalText).split(`
`), i = [], r = 0, l = 0;
  for (let s of a) {
    let u = r, f = u + s.length - 1;
    i.push({ line: s, startIndex: u, endIndex: f, lineNumber: l }), r = f + 1, l++;
  }
  let o = n, c = e.originalText.slice(n, n + t.length), d = [];
  for (let s of i) {
    if (c === "") break;
    if (o >= s.startIndex && o <= s.endIndex) {
      let u = s.endIndex + 1 - o, f = s.line.slice(0, o - s.startIndex), h = c.slice(0, u);
      c = c.slice(u);
      let U = dn(f, Je(e), e.lineHeight);
      if (f === "" && (U.width = 0), e.textAlign !== "left" && s.line.length > 0) {
        let y = dn(s.line, Je(e), e.lineHeight), w = e.textAlign === "center" ? (e.width - y.width) / 2 : e.width - y.width;
        U.width += w;
      }
      let { width: m, height: g } = dn(h, Je(e), e.lineHeight), b = U.width, v = s.lineNumber * U.height;
      d.push({ offsetX: b, offsetY: v, width: m, height: g }), o += u;
    }
  }
  return d;
}, hj = (e) => e.replace(/[.*+?^${}()|[\]\\-]/g, "\\$&"), d5 = aX((e, t, n) => {
  if (!e || e === "") {
    n([], null);
    return;
  }
  let a = t.scene.getNonDeletedElements().filter((c) => J(c));
  a.sort((c, d) => c.y - d.y);
  let i = [], r = new RegExp(hj(e), "gi");
  for (let c of a) {
    let d = null, s = c.originalText;
    for (; (d = r.exec(s)) !== null; ) {
      let u = dj(s, d.index, e), f = fj(c, e, d.index);
      f.length > 0 && i.push({ textElement: c, searchQuery: e, preview: u, index: d.index, matchedLines: f });
    }
  }
  let l = new Set(t.visibleElements.map((c) => c.id)), o = i.findIndex((c) => l.has(c.textElement.id)) ?? null;
  n(i, o);
}, ij), Yv = Sc("DefaultSidebarTrigger", (e) => {
  let { DefaultSidebarTriggerTunnel: t } = Fn();
  return p(t.In, { children: p($a.Trigger, { ...e, className: "default-sidebar-trigger", name: ba.name }) });
});
Yv.displayName = "DefaultSidebarTrigger";
var Zv = ({ children: e }) => {
  let { DefaultSidebarTabTriggersTunnel: t } = Fn();
  return p(t.In, { children: e });
};
Zv.displayName = "DefaultTabTriggers";
var u5 = Object.assign(Sc("DefaultSidebar", ({ children: e, className: t, onDock: n, docked: a, ...i }) => {
  var d;
  let r = bn(), l = Xt(), { DefaultSidebarTabTriggersTunnel: o } = Fn(), c = ((d = r.openSidebar) == null ? void 0 : d.tab) === Kl;
  return Ke($a, { ...i, name: "default", key: "default", className: ae("default-sidebar", t), docked: c || (a ?? r.defaultSidebarDockedPreference), onDock: c || n === !1 || !n && a != null ? void 0 : Gu(n, (s) => {
    l({ defaultSidebarDockedPreference: s });
  }) }, _($a.Tabs, { children: [p($a.Header, { children: _($a.TabTriggers, { children: [p($a.TabTrigger, { tab: Kl, children: cl }), p($a.TabTrigger, { tab: Zd, children: Z0 }), p(o.Out, {})] }) }), p($a.Tab, { tab: Zd, children: p(BV, {}) }), p($a.Tab, { tab: Kl, children: p(rj, {}) }), e] }));
}), { Trigger: Yv, TabTriggers: Zv }), pj = "small", Uj = (e) => _("label", { className: ae("ToolIcon ToolIcon__LaserPointer", `ToolIcon_size_${pj}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [p("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title, "data-testid": "toolbar-LaserPointer" }), p("div", { className: "ToolIcon__icon", children: C8 })] }), mj = ({ canvasRef: e, setError: t }) => {
  let n = e.current;
  if (!n) return;
  let a = n.parentElement;
  a && (a.style.background = "", t(null), n.replaceChildren());
}, Kv = async ({ canvasRef: e, mermaidToExcalidrawLib: t, mermaidDefinition: n, setError: a, data: i }) => {
  let r = e.current, l = r == null ? void 0 : r.parentElement;
  if (!(!r || !l)) {
    if (!n) {
      mj({ canvasRef: e, setError: a });
      return;
    }
    try {
      let o = await t.api, c;
      try {
        c = await o.parseMermaidToExcalidraw(n);
      } catch {
        c = await o.parseMermaidToExcalidraw(n.replace(/"/g, "'"));
      }
      let { elements: d, files: s } = c;
      a(null), i.current = { elements: x0(d, { regenerateIds: !0 }), files: s };
      let u = await Dp({ elements: i.current.elements, files: i.current.files, exportPadding: Co, maxWidthOrHeight: Math.max(l.offsetWidth, l.offsetHeight) * window.devicePixelRatio });
      try {
        await tc(u);
      } catch (f) {
        throw f.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(C("canvasError.canvasTooBig")) : f;
      }
      l.style.background = "var(--default-bg-color)", r.replaceChildren(u);
    } catch (o) {
      throw l.style.background = "var(--default-bg-color)", n && a(o), o;
    }
  }
}, MU = (e) => {
  Qr.set(gs.MERMAID_TO_EXCALIDRAW, e);
}, qv = ({ app: e, data: t, text: n, shouldSaveMermaidDataToStorage: a }) => {
  let { elements: i, files: r } = t.current;
  i.length && (e.addElementsFromPasteOrLibrary({ elements: i, files: r, position: "center", fitToContent: !0 }), e.setOpenDialog(null), a && n && MU(n));
}, Jv = ({ children: e }) => p("div", { className: "ttd-dialog-panels", children: e }), Au = ({ label: e, children: t, panelAction: n, panelActionDisabled: a = !1, onTextSubmitInProgess: i, renderTopRight: r, renderSubmitShortcut: l, renderBottomRight: o }) => _("div", { className: "ttd-dialog-panel", children: [_("div", { className: "ttd-dialog-panel__header", children: [p("label", { children: e }), r == null ? void 0 : r()] }), t, _("div", { className: ae("ttd-dialog-panel-button-container", { invisible: !n }), style: { display: "flex", alignItems: "center" }, children: [_(xo, { className: "ttd-dialog-panel-button", onSelect: n ? n.action : () => {
}, disabled: a || i, children: [_("div", { className: ae({ invisible: i }), children: [n == null ? void 0 : n.label, (n == null ? void 0 : n.icon) && p("span", { children: n.icon })] }), i && p($i, {})] }), !a && !i && (l == null ? void 0 : l()), o == null ? void 0 : o()] })] }), Qv = ({ input: e, placeholder: t, onChange: n, onKeyboardSubmit: a }) => {
  let i = re(null), r = re(a);
  return r.current = a, Q(() => {
    if (!r.current) return;
    let l = i.current;
    if (l) {
      let o = (c) => {
        var d;
        c[P.CTRL_OR_CMD] && c.key === P.ENTER && (c.preventDefault(), (d = r.current) == null || d.call(r));
      };
      return l.addEventListener("keydown", o), () => {
        l.removeEventListener("keydown", o);
      };
    }
  }, []), p("textarea", { className: "ttd-dialog-input", onChange: n, value: e, placeholder: t, autoFocus: !0, ref: i });
}, gj = ({ error: e }) => _("div", { "data-testid": "ttd-dialog-output-error", className: "ttd-dialog-output-error", children: ["Error! ", p("p", { children: e })] }), ey = ({ error: e, canvasRef: t, loaded: n }) => _("div", { className: "ttd-dialog-output-wrapper", children: [e && p(gj, { error: e.message }), n ? p("div", { ref: t, style: { opacity: e ? "0.15" : 1 }, className: "ttd-dialog-output-canvas-container" }) : p($i, { size: "2rem" })] }), ty = () => _("div", { className: "ttd-dialog-submit-shortcut", children: [p("div", { className: "ttd-dialog-submit-shortcut__key", children: V("CtrlOrCmd") }), p("div", { className: "ttd-dialog-submit-shortcut__key", children: V("Enter") })] }), bj = `flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`, f5 = oo(MU, 300), vj = ({ mermaidToExcalidrawLib: e }) => {
  let [t, n] = oe(() => Qr.get(gs.MERMAID_TO_EXCALIDRAW) || bj), a = _y(t.trim()), [i, r] = oe(null), l = re(null), o = re({ elements: [], files: null }), c = ci();
  Q(() => {
    Kv({ canvasRef: l, data: o, mermaidToExcalidrawLib: e, setError: r, mermaidDefinition: a }).catch((s) => {
      a8() && console.error("Failed to parse mermaid definition", s);
    }), f5(a);
  }, [a, e]), Q(() => () => {
    f5.flush();
  }, []);
  let d = () => {
    qv({ app: c, data: o, text: t, shouldSaveMermaidDataToStorage: !0 });
  };
  return _(le, { children: [p("div", { className: "ttd-dialog-desc", children: p(Za, { i18nKey: "mermaid.description", flowchartLink: (s) => p("a", { href: "https://mermaid.js.org/syntax/flowchart.html", children: s }), sequenceLink: (s) => p("a", { href: "https://mermaid.js.org/syntax/sequenceDiagram.html", children: s }), classLink: (s) => p("a", { href: "https://mermaid.js.org/syntax/classDiagram.html", children: s }) }) }), _(Jv, { children: [p(Au, { label: C("mermaid.syntax"), children: p(Qv, { input: t, placeholder: "Write Mermaid diagram defintion here...", onChange: (s) => n(s.target.value), onKeyboardSubmit: () => {
    d();
  } }) }), p(Au, { label: C("mermaid.preview"), panelAction: { action: () => {
    d();
  }, label: C("mermaid.button"), icon: yd }, renderSubmitShortcut: () => p(ty, {}), children: p(ey, { canvasRef: l, loaded: e.loaded, error: i }) })] })] });
}, yj = vj, ny = (e) => {
  let t = Xt(), n = re(null), a = re(0);
  return p(o9, { ref: n, className: "ttd-dialog-tabs-root", value: e.tab, onValueChange: (i) => {
    var l;
    if (!i) return;
    let r = (l = n.current) == null ? void 0 : l.closest(".Modal__content");
    if (r) {
      let o = r.offsetHeight || 0;
      o > a.current && (a.current = o, r.style.minHeight = `min(${a.current}px, 100%)`);
    }
    e.dialog === "ttd" && r8(["text-to-diagram", "mermaid"], i) && t({ openDialog: { name: e.dialog, tab: i } });
  }, children: e.children });
};
ny.displayName = "TTDDialogTabs";
var wj = ny, ay = ({ children: e, ...t }) => p(s9, { className: "ttd-dialog-triggers", ...t, children: e });
ay.displayName = "TTDDialogTabTriggers";
var y0 = ({ children: e, tab: t, onSelect: n, ...a }) => p(c9, { value: t, asChild: !0, onSelect: n, children: p("button", { type: "button", className: "ttd-dialog-tab-trigger", ...a, children: e }) });
y0.displayName = "TTDDialogTabTrigger";
var w0 = ({ tab: e, children: t, ...n }) => p(d9, { ...n, value: e, children: t });
w0.displayName = "TTDDialogTab";
var Vh = 3, Rl = 1e3, Ej = Kt(null), xj = Kt(null), Sj = (e) => {
  var n;
  let t = bn();
  return ((n = t.openDialog) == null ? void 0 : n.name) !== "ttd" ? null : p(kj, { ...e, tab: t.openDialog.tab });
}, kj = Sc("TTDDialogBase", ({ tab: e, ...t }) => {
  let n = ci(), a = Xt(), i = re(null), [r, l] = Et(xj), [o, c] = oe((r == null ? void 0 : r.prompt) ?? ""), d = o.trim(), s = (S) => {
    c(S.target.value), l((E) => ({ generatedResponse: (E == null ? void 0 : E.generatedResponse) ?? null, prompt: S.target.value }));
  }, [u, f] = oe(!1), [h, U] = Et(Ej), m = async () => {
    if (d.length > Rl || d.length < Vh || u || (h == null ? void 0 : h.rateLimitRemaining) === 0 || "__fallback" in t) {
      d.length < Vh && x(new Error(`Prompt is too short (min ${Vh} characters)`)), d.length > Rl && x(new Error(`Prompt is too long (max ${Rl} characters)`));
      return;
    }
    try {
      f(!0), rt("ai", "generate", "ttd");
      let { generatedResponse: S, error: E, rateLimit: M, rateLimitRemaining: I } = await t.onTextSubmit(d);
      if (typeof S == "string" && l((T) => ({ generatedResponse: S, prompt: (T == null ? void 0 : T.prompt) ?? null })), bs(M) && bs(I) && U({ rateLimit: M, rateLimitRemaining: I }), E) {
        x(E);
        return;
      }
      if (!S) {
        x(new Error("Generation failed"));
        return;
      }
      try {
        await Kv({ canvasRef: i, data: y, mermaidToExcalidrawLib: b, setError: x, mermaidDefinition: S }), rt("ai", "mermaid parse success", "ttd");
      } catch (T) {
        console.info(`%cTTD mermaid render errror: ${T.message}`, "color: red"), console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${T.message}`, "color: yellow"), rt("ai", "mermaid parse failed", "ttd"), x(new Error("Generated an invalid diagram :(. You may also try a different prompt."));
      }
    } catch (S) {
      let E = S.message;
      (!E || E === "Failed to fetch") && (E = "Request failed"), x(new Error(E));
    } finally {
      f(!1);
    }
  }, g = re(m);
  g.current = m;
  let [b, v] = oe({ loaded: !1, api: import("./index-CItKjTo7.js").then((S) => S.b1) });
  Q(() => {
    (async () => (await b.api, v((S) => ({ ...S, loaded: !0 }))))();
  }, [b.api]);
  let y = re({ elements: [], files: null }), [w, x] = oe(null);
  return p(Ia, { className: "ttd-dialog", onCloseRequest: () => {
    n.setOpenDialog(null);
  }, size: 1200, title: !1, ...t, autofocus: !1, children: _(wj, { dialog: "ttd", tab: e, children: ["__fallback" in t && t.__fallback ? p("p", { className: "dialog-mermaid-title", children: C("mermaid.title") }) : _(ay, { children: [p(y0, { tab: "text-to-diagram", children: _("div", { style: { display: "flex", alignItems: "center" }, children: [C("labels.textToDiagram"), p("div", { style: { display: "flex", alignItems: "center", justifyContent: "center", padding: "1px 6px", marginLeft: "10px", fontSize: 10, borderRadius: "12px", background: "var(--color-promo)", color: "var(--color-surface-lowest)" }, children: "AI Beta" })] }) }), p(y0, { tab: "mermaid", children: "Mermaid" })] }), p(w0, { className: "ttd-dialog-content", tab: "mermaid", children: p(yj, { mermaidToExcalidrawLib: b }) }), !("__fallback" in t) && _(w0, { className: "ttd-dialog-content", tab: "text-to-diagram", children: [p("div", { className: "ttd-dialog-desc", children: "Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar." }), _(Jv, { children: [p(Au, { label: C("labels.prompt"), panelAction: { action: m, label: "Generate", icon: yd }, onTextSubmitInProgess: u, panelActionDisabled: d.length > Rl || (h == null ? void 0 : h.rateLimitRemaining) === 0, renderTopRight: () => h ? _("div", { className: "ttd-dialog-rate-limit", style: { fontSize: 12, marginLeft: "auto", color: h.rateLimitRemaining === 0 ? "var(--color-danger)" : void 0 }, children: [h.rateLimitRemaining, " requests left today"] }) : null, renderSubmitShortcut: () => p(ty, {}), renderBottomRight: () => {
    if (typeof (r == null ? void 0 : r.generatedResponse) == "string") return _("div", { className: "excalidraw-link", style: { marginLeft: "auto", fontSize: 14 }, onClick: () => {
      typeof (r == null ? void 0 : r.generatedResponse) == "string" && (MU(r.generatedResponse), a({ openDialog: { name: "ttd", tab: "mermaid" } }));
    }, children: ["View as Mermaid", p(Cf, { icon: yd })] });
    let S = d.length / Rl;
    return S > 0.8 ? _("div", { style: { marginLeft: "auto", fontSize: 12, fontFamily: "monospace", color: S > 1 ? "var(--color-danger)" : void 0 }, children: ["Length: ", d.length, "/", Rl] }) : null;
  }, children: p(Qv, { onChange: s, input: o, placeholder: "Describe what you want to see...", onKeyboardSubmit: () => {
    g.current();
  } }) }), p(Au, { label: "Preview", panelAction: { action: () => {
    console.info("Panel action clicked"), qv({ app: n, data: y });
  }, label: "Insert", icon: yd }, children: p(ey, { canvasRef: i, error: w, loaded: b.loaded }) })] })] })] }) });
}), Mj = 0.01, zi = (e, t) => !(t === "height" && J(e) || t === "width" && J(e) || t === "angle" && fe(e)), ln = (e, t) => {
  let n = e + t / 2;
  return n - n % t;
}, Du = (e, t, n) => Object.keys(e).map((a) => ({ original: (n ?? t).get(a), latest: t.get(a) })).filter((a) => a.original !== void 0 && a.latest !== void 0), oc = (e, t, n, a, i, r, l, o = !0) => {
  let c = a.get(n.id);
  if (!c) return;
  let [d, s] = [n.x + n.width / 2, n.y + n.height / 2], [u, f] = X(k(n.x, n.y), k(d, s), n.angle), h = e - u, U = t - f, [m, g] = X(k(e, t), k(d + h, s + U), -n.angle);
  G(c, { x: m, y: g }, o), E0(c, a, i, r);
  let b = ye(n, l);
  if (b) {
    let v = a.get(b.id);
    v && G(v, { x: b.x + h, y: b.y + U }, o);
  }
}, CU = (e, t) => {
  let n = Kr(t).map((a) => ot(e, a).reduce((i, r) => (i[r.id] = !0, i), {}));
  return e.filter((a) => !po(a)).forEach((a) => {
    n.push({ [a.id]: !0 });
  }), n;
}, E0 = (e, t, n, a, i) => {
  me(e) ? cu([e], t, n, a, !0, [], i == null ? void 0 : i.zoom) : In(e, t, i);
}, Cj = ({ label: e, icon: t, dragInputCallback: n, value: a, elements: i, editable: r = !0, shouldKeepAspectRatio: l, property: o, scene: c, appState: d, sensitivity: s = 1 }) => {
  let u = ci(), f = re(null), h = re(null), [U, m] = oe(a.toString()), g = re(null);
  g.current || (g.current = { originalAppState: ki(d), originalElements: i, lastUpdatedValue: U, updatePending: !1 }), Q(() => {
    let y = a.toString();
    m(y), g.current.lastUpdatedValue = y;
  }, [a]);
  let b = (y, w, x) => {
    if (!g.current.updatePending) return !1;
    g.current.updatePending = !1;
    let S = Number(y);
    if (isNaN(S)) {
      m(a.toString());
      return;
    }
    let E = Number(S.toFixed(2)), M = Number(a);
    (isNaN(M) || Math.abs(E - M) >= Mj) && (g.current.lastUpdatedValue = y, n({ accumulatedChange: 0, instantChange: 0, originalElements: w, originalElementsMap: u.scene.getNonDeletedElementsMap(), shouldKeepAspectRatio: l, shouldChangeByStepSize: !1, scene: c, nextValue: E, property: o, originalAppState: x, setInputValue: (I) => m(String(I)) }), u.syncActionResult({ captureUpdate: W.IMMEDIATELY }));
  }, v = re({});
  return v.current.handleInputValue = b, Q(() => {
    let y = f.current, w = v.current;
    return () => {
      var S;
      let x = y == null ? void 0 : y.value;
      x && ((S = w.handleInputValue) == null || S.call(w, x, g.current.originalElements, g.current.originalAppState)), window.removeEventListener("pointermove", w.onPointerMove, !1), window.removeEventListener("pointerup", w.onPointerUp, !1);
    };
  }, [r]), r ? _("div", { className: ae("drag-input-container", !r && "disabled"), "data-testid": e, children: [p("div", { className: "drag-input-label", ref: h, onPointerDown: (y) => {
    if (f.current && r) {
      document.body.classList.add("excalidraw-cursor-resize"), Number(f.current.value);
      let w = null, x = u.scene.getNonDeletedElements().reduce((D, R) => (D.set(R.id, wl(R)), D), /* @__PURE__ */ new Map()), S = i.map((D) => x.get(D.id)), E = ki(d), M = 0, I = 0, T = (D) => {
        if (w && x !== null && S !== null) {
          let R = D.clientX - w.x;
          R !== 0 && (I += R, Math.abs(I) >= s && (I = Math.sign(I) * Math.floor(Math.abs(I) / s), M += I, n({ accumulatedChange: M, instantChange: I, originalElements: S, originalElementsMap: x, shouldKeepAspectRatio: l, shouldChangeByStepSize: D.shiftKey, property: o, scene: c, originalAppState: E, setInputValue: (O) => m(String(O)) }), I = 0));
        }
        w = { x: D.clientX, y: D.clientY };
      }, A = () => {
        window.removeEventListener("pointermove", T, !1), u.syncActionResult({ captureUpdate: W.IMMEDIATELY }), w = null, M = 0, I = 0, S = null, x = null, document.body.classList.remove("excalidraw-cursor-resize"), window.removeEventListener("pointerup", A, !1);
      };
      v.current.onPointerMove = T, v.current.onPointerUp = A, window.addEventListener("pointermove", T, !1), window.addEventListener("pointerup", A, !1);
    }
  }, onPointerEnter: () => {
    h.current && (h.current.style.cursor = "ew-resize");
  }, children: t ? p(Cf, { icon: t }) : e }), p("input", { className: "drag-input", autoComplete: "off", spellCheck: "false", onKeyDown: (y) => {
    if (r) {
      let w = y.target;
      w instanceof HTMLInputElement && y.key === P.ENTER && (b(w.value, i, d), u.focusContainer());
    }
  }, ref: f, value: U, onChange: (y) => {
    g.current.updatePending = !0, m(y.target.value);
  }, onFocus: (y) => {
    y.target.select(), g.current.originalElements = i, g.current.originalAppState = ki(d);
  }, onBlur: (y) => {
    U ? r && b(y.target.value, g.current.originalElements, g.current.originalAppState) : m(a.toString());
  }, disabled: !r })] }) : null;
}, Xi = Cj, h5 = 10, Ij = (e) => e.type === "image", Tj = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldKeepAspectRatio: a, shouldChangeByStepSize: i, nextValue: r, property: l, originalAppState: o, instantChange: c, scene: d }) => {
  let s = d.getNonDeletedElementsMap(), u = t[0], f = s.get(u.id);
  if (u && f) {
    let h = a || Ij(u), U = u.width / u.height;
    if (o.croppingElementId === u.id) {
      let y = s.get(u.id);
      if (!y || !Oe(y) || !y.crop) return;
      let w = y.crop, x = { ...w }, S = y.scale[0] === -1, E = y.scale[1] === -1, { width: M, height: I } = _i(y), T = w.naturalWidth / M, A = w.naturalHeight / I, D = S ? w.width + w.x : w.naturalWidth - w.x, R = E ? w.height + w.y : w.naturalHeight - w.y, O = Wt * T, $ = Wt * A;
      if (r !== void 0) {
        if (l === "width") {
          let Y = r * T, ie = Me(Y, O, D);
          x = { ...x, width: ie, x: S ? w.x + w.width - ie : w.x };
        } else if (l === "height") {
          let Y = r * A, ie = Me(Y, $, R);
          x = { ...x, height: ie, y: E ? w.y + w.height - ie : w.y };
        }
        G(y, { crop: x, width: x.width / (w.naturalWidth / M), height: x.height / (w.naturalHeight / I) });
        return;
      }
      let F = l === "width" ? c : 0, N = l === "height" ? c : 0, j = Me(w.width + F, O, D), z = Me(w.height + N, O, R);
      x = { ...w, x: S ? w.x + w.width - j : w.x, y: E ? w.y + w.height - z : w.y, width: j, height: z }, G(y, { crop: x, width: x.width / (w.naturalWidth / M), height: x.height / (w.naturalHeight / I) });
      return;
    }
    if (r !== void 0) {
      let y = Math.max(l === "width" ? r : h ? r * U : u.width, Wn), w = Math.max(l === "height" ? r : h ? r / U : u.height, Wn);
      ec(y, w, f, u, s, n, l === "width" ? "e" : "s", { shouldMaintainAspectRatio: h });
      return;
    }
    let m = l === "width" ? e : 0, g = l === "height" ? e : 0, b = Math.max(0, u.width + m);
    l === "width" && (i ? b = ln(b, h5) : b = Math.round(b));
    let v = Math.max(0, u.height + g);
    l === "height" && (i ? v = ln(v, h5) : v = Math.round(v)), h && (l === "width" ? v = Math.round(b / U * 100) / 100 : b = Math.round(v * U * 100) / 100), v = Math.max(Wn, v), b = Math.max(Wn, b), ec(b, v, f, u, s, n, l === "width" ? "e" : "s", { shouldMaintainAspectRatio: h });
  }
}, _j = ({ property: e, element: t, scene: n, appState: a }) => {
  let i = Ka(e === "width" ? t.width : t.height, 2);
  if (a.croppingElementId && a.croppingElementId === t.id && Oe(t) && t.crop) {
    let { width: r, height: l } = _i(t);
    if (e === "width") {
      let o = r / t.crop.naturalWidth;
      i = Ka(t.crop.width * o, 2);
    }
    if (e === "height") {
      let o = l / t.crop.naturalHeight;
      i = Ka(t.crop.height * o, 2);
    }
  }
  return p(Xi, { label: e === "width" ? "W" : "H", elements: [t], dragInputCallback: Tj, value: i, editable: zi(t, e), scene: n, appState: a, property: e });
}, p5 = _j, Aj = 15, Dj = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = i.getNonDeletedElements(), o = t[0];
  if (o && !te(o)) {
    let c = r.get(o.id);
    if (!c) return;
    if (a !== void 0) {
      let U = jr(a);
      G(c, { angle: U }), E0(c, r, l, i);
      let m = ye(c, r);
      m && !xe(c) && G(m, { angle: U });
      return;
    }
    let d = Math.round(hc(o.angle) * 100) / 100, s = Math.round(e), u = (d + s) % 360;
    n && (u = ln(u, Aj)), u = u < 0 ? u + 360 : u;
    let f = jr(u);
    G(c, { angle: f }), E0(c, r, l, i);
    let h = ye(c, r);
    h && !xe(c) && G(h, { angle: f });
  }
}, Lj = ({ element: e, scene: t, appState: n, property: a }) => p(Xi, { label: "A", icon: x8, value: Math.round(hc(e.angle) % 360 * 100) / 100, elements: [e], dragInputCallback: Dj, editable: zi(e, "angle"), scene: t, appState: n, property: a }), Rj = Lj, U5 = 4, Pj = 4, Nj = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = t[0];
  if (l) {
    let o = r.get(l.id);
    if (!o || !J(o)) return;
    let c;
    if (a !== void 0) c = Math.max(Math.round(a), U5);
    else if (l.type === "text") {
      let d = Math.round(l.fontSize), s = Math.round(e);
      c = Math.max(d + s, U5), n && (c = ln(c, Pj));
    }
    c && (G(o, { fontSize: c }), Un(o, i.getContainerElement(o), i.getNonDeletedElementsMap()));
  }
}, Oj = ({ element: e, scene: t, appState: n, property: a }) => {
  let i = J(e) ? e : ta(e) ? ye(e, t.getNonDeletedElementsMap()) : null;
  return i ? p(Xi, { label: "F", value: Math.round(i.fontSize * 10) / 10, elements: [i], dragInputCallback: Nj, icon: Ku, appState: n, scene: t, property: a }) : null;
}, $j = Oj, Pl = 10, zj = (e, t, n, a) => {
  let i = a.x - e, r = a.y - t, l = a.width * n, o = a.height * n, c = e + i * n, d = t + r * n;
  return { width: l, height: o, x: c, y: d, ...Xp(a, l, o, !1), ...J(a) ? { fontSize: a.fontSize * n } : {} };
}, Fj = (e, t, n, a, i, r, l, o) => {
  let c = zj(e, t, a, r);
  G(i, c, !1);
  let d = ye(r, o);
  if (d) {
    let s = d.fontSize * a;
    In(i, l, { newSize: { width: c.width, height: c.height } });
    let u = l.get(d.id);
    u && J(u) && (G(u, { fontSize: s }, !1), vc(i, l, n === "width" ? "e" : "s", !0));
  }
}, m5 = (e, t, n, a, i, r, l, o, c, d) => {
  r === "width" ? t = Math.round(e / a * 100) / 100 : e = Math.round(t * a * 100) / 100;
  let s = t / n;
  for (let u = 0; u < o.length; u++) {
    let f = o[u], h = l[u];
    Fj(i[0], i[1], r, s, h, f, c, d);
  }
}, Bj = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, originalAppState: a, shouldChangeByStepSize: i, nextValue: r, scene: l, property: o }) => {
  let c = l.getNonDeletedElementsMap(), d = CU(t, a);
  if (r !== void 0) {
    for (let f of d) {
      let h = Du(f, c, n);
      if (h.length > 1) {
        let U = h.map((I) => I.latest), m = h.map((I) => I.original), [g, b, v, y] = We(m), w = v - g, x = y - b, S = w / x, E = Math.max(Wn, o === "width" ? Math.max(0, r) : w), M = Math.max(Wn, o === "height" ? Math.max(0, r) : x);
        m5(E, M, x, S, k(g, b), o, U, m, c, n);
      } else {
        let [U] = h, m = U == null ? void 0 : U.latest, g = U == null ? void 0 : U.original;
        if (m && g && zi(m, o)) {
          let b = o === "width" ? Math.max(0, r) : m.width;
          o === "width" && (i ? b = ln(b, Pl) : b = Math.round(b));
          let v = o === "height" ? Math.max(0, r) : m.height;
          o === "height" && (i ? v = ln(v, Pl) : v = Math.round(v)), b = Math.max(Wn, b), v = Math.max(Wn, v), ec(b, v, m, g, c, n, o === "width" ? "e" : "s", { shouldInformMutation: !1 });
        }
      }
    }
    l.triggerUpdate();
    return;
  }
  let s = o === "width" ? e : 0, u = o === "height" ? e : 0;
  for (let f of d) {
    let h = Du(f, c, n);
    if (h.length > 1) {
      let U = h.map((I) => I.latest), m = h.map((I) => I.original), [g, b, v, y] = We(m), w = v - g, x = y - b, S = w / x, E = Math.max(0, w + s);
      o === "width" && (i ? E = ln(E, Pl) : E = Math.round(E));
      let M = Math.max(0, x + u);
      o === "height" && (i ? M = ln(M, Pl) : M = Math.round(M)), E = Math.max(Wn, E), M = Math.max(Wn, M), m5(E, M, x, S, k(g, b), o, U, m, c, n);
    } else {
      let [U] = h, m = U == null ? void 0 : U.latest, g = U == null ? void 0 : U.original;
      if (m && g && zi(m, o)) {
        let b = Math.max(0, g.width + s);
        o === "width" && (i ? b = ln(b, Pl) : b = Math.round(b));
        let v = Math.max(0, g.height + u);
        o === "height" && (i ? v = ln(v, Pl) : v = Math.round(v)), b = Math.max(Wn, b), v = Math.max(Wn, v), ec(b, v, m, g, c, n, o === "width" ? "e" : "s", { shouldInformMutation: !1 });
      }
    }
  }
  l.triggerUpdate();
}, Hj = ({ property: e, elements: t, elementsMap: n, atomicUnits: a, scene: i, appState: r }) => {
  let l = $e(() => a.map((d) => {
    let s = Du(d, n);
    if (s.length > 1) {
      let [f, h, U, m] = We(s.map((g) => g.latest));
      return Math.round((e === "width" ? U - f : m - h) * 100) / 100;
    }
    let [u] = s;
    return Math.round((e === "width" ? u.latest.width : u.latest.height) * 100) / 100;
  }), [n, a, e]), o = new Set(l).size === 1 ? Math.round(l[0] * 100) / 100 : "Mixed", c = l.length > 0;
  return p(Xi, { label: e === "width" ? "W" : "H", elements: t, dragInputCallback: Bj, value: o, editable: c, appState: r, property: e, scene: i });
}, g5 = Hj, Xj = 15, Wj = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, property: i, scene: r }) => {
  let l = r.getNonDeletedElementsMap(), o = t.map((d) => l.get(d.id)).filter((d) => d && !po(d) && zi(d, i)), c = t.filter((d) => !po(d) && zi(d, i));
  if (a !== void 0) {
    let d = jr(a);
    for (let s of o) {
      if (!s) continue;
      G(s, { angle: d }, !1);
      let u = ye(s, l);
      u && !xe(s) && G(u, { angle: d }, !1);
    }
    r.triggerUpdate();
    return;
  }
  for (let d = 0; d < o.length; d++) {
    let s = o[d];
    if (!s) continue;
    let u = c[d], f = Math.round(hc(u.angle) * 100) / 100, h = Math.round(e), U = (f + h) % 360;
    n && (U = ln(U, Xj)), U = U < 0 ? U + 360 : U;
    let m = jr(U);
    G(s, { angle: m }, !1);
    let g = ye(s, l);
    g && !xe(s) && G(g, { angle: m }, !1);
  }
  r.triggerUpdate();
}, Vj = ({ elements: e, scene: t, appState: n, property: a }) => {
  let i = e.filter((c) => !po(c) && zi(c, "angle")), r = i.map((c) => Math.round(hc(c.angle) % 360 * 100) / 100), l = new Set(r).size === 1 ? r[0] : "Mixed", o = i.some((c) => zi(c, "angle"));
  return p(Xi, { label: "A", icon: x8, value: l, elements: e, dragInputCallback: Wj, editable: o, appState: n, scene: t, property: a });
}, Gj = Vj, b5 = 4, jj = 4, Yj = (e, t) => e.reduce((n, a) => {
  if (!a || po(a)) return n;
  if (J(a)) return n.push(a), n;
  if (ta(a)) {
    let i = ye(a, t);
    if (i) return n.push(i), n;
  }
  return n;
}, []), Zj = ({ accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: a, scene: i }) => {
  let r = i.getNonDeletedElementsMap(), l = t.map((c) => r.get(c.id)), o;
  if (a) {
    o = Math.max(Math.round(a), b5);
    for (let c of l) G(c, { fontSize: o }, !1), Un(c, i.getContainerElement(c), r, !1);
    i.triggerUpdate();
  } else {
    let c = t;
    for (let d = 0; d < l.length; d++) {
      let s = l[d], u = c[d], f = Math.round(u.fontSize), h = Math.round(e), U = Math.max(f + h, b5);
      n && (U = ln(U, jj)), G(s, { fontSize: U }, !1), Un(s, i.getContainerElement(s), r, !1);
    }
    i.triggerUpdate();
  }
}, Kj = ({ elements: e, scene: t, appState: n, property: a, elementsMap: i }) => {
  let r = Yj(e, i);
  if (!r.length) return null;
  let l = r.map((d) => Math.round(d.fontSize * 10) / 10), o = new Set(l).size === 1 ? l[0] : "Mixed", c = l.length > 0;
  return p(Xi, { label: "F", icon: Ku, elements: r, dragInputCallback: Zj, value: o, editable: c, scene: t, property: a, appState: n });
}, qj = Kj, v5 = 10, Jj = ({ accumulatedChange: e, instantChange: t, originalElements: n, originalElementsMap: a, shouldChangeByStepSize: i, nextValue: r, property: l, scene: o, originalAppState: c }) => {
  let d = o.getNonDeletedElementsMap(), s = o.getNonDeletedElements(), u = n[0], [f, h] = [u.x + u.width / 2, u.y + u.height / 2], [U, m] = X(k(u.x, u.y), k(f, h), u.angle);
  if (c.croppingElementId === u.id) {
    let w = d.get(u.id);
    if (!w || !Oe(w) || !w.crop) return;
    let x = w.crop, S = x, E = w.scale[0] === -1, M = w.scale[1] === -1, { width: I, height: T } = _i(w);
    if (r !== void 0) {
      if (l === "x") {
        let R = r * (x.naturalWidth / I);
        E ? S = { ...x, x: Me(x.naturalWidth - R - x.width, 0, x.naturalWidth - x.width) } : S = { ...x, x: Me(r * (x.naturalWidth / I), 0, x.naturalWidth - x.width) };
      }
      l === "y" && (S = { ...x, y: Me(r * (x.naturalHeight / T), 0, x.naturalHeight - x.height) }), G(w, { crop: S });
      return;
    }
    let A = (l === "x" ? t : 0) * (E ? -1 : 1), D = (l === "y" ? t : 0) * (M ? -1 : 1);
    S = { ...x, x: Me(x.x + A, 0, x.naturalWidth - x.width), y: Me(x.y + D, 0, x.naturalHeight - x.height) }, G(w, { crop: S });
    return;
  }
  if (r !== void 0) {
    oc(l === "x" ? r : U, l === "y" ? r : m, u, d, s, o, a);
    return;
  }
  let g = l === "x" ? e : 0, b = l === "y" ? e : 0, v = l === "x" ? Math.round(i ? ln(u.x + g, v5) : U + g) : U, y = l === "y" ? Math.round(i ? ln(u.y + b, v5) : m + b) : m;
  oc(v, y, u, d, s, o, a);
}, Qj = ({ property: e, element: t, elementsMap: n, scene: a, appState: i }) => {
  let [r, l] = X(k(t.x, t.y), k(t.x + t.width / 2, t.y + t.height / 2), t.angle), o = Ka(e === "x" ? r : l, 2);
  if (i.croppingElementId === t.id && Oe(t) && t.crop) {
    let c = eR(t);
    c && (o = Ka(e === "x" ? c.x : c.y, 2));
  }
  return p(Xi, { label: e === "x" ? "X" : "Y", elements: [t], dragInputCallback: Jj, scene: a, value: o, property: e, appState: i });
}, y5 = Qj, eY = 10, tY = (e, t, n, a, i, r, l, o) => {
  for (let c = 0; c < a.length; c++) {
    let d = i[c], [s, u] = [d.x + d.width / 2, d.y + d.height / 2], [f, h] = X(k(d.x, d.y), k(s, u), d.angle), U = e === "x" ? Math.round(f + t) : f, m = e === "y" ? Math.round(h + n) : h;
    oc(U, m, d, r, a, o, l, !1);
  }
}, nY = (e, t, n, a, i, r, l) => {
  let [o, c, ,] = We(n), d = e - o, s = t - c;
  for (let u = 0; u < n.length; u++) {
    let f = n[u], h = a.get(f.id);
    if (h && (!J(h) || !h.containerId)) {
      let [U, m] = [h.x + h.width / 2, h.y + h.height / 2], [g, b] = X(k(h.x, h.y), k(U, m), h.angle);
      oc(g + d, b + s, f, a, i, l, r, !1);
    }
  }
}, aY = ({ accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldChangeByStepSize: a, nextValue: i, property: r, scene: l, originalAppState: o }) => {
  var u, f;
  let c = l.getNonDeletedElementsMap(), d = l.getNonDeletedElements();
  if (i !== void 0) {
    for (let h of CU(t, o)) {
      let U = Du(h, c, n);
      if (U.length > 1) {
        let [m, g, ,] = We(U.map((b) => b.latest));
        nY(r === "x" ? i : m, r === "y" ? i : g, U.map((b) => b.original), c, d, n, l);
      } else {
        let m = (u = U[0]) == null ? void 0 : u.original, g = (f = U[0]) == null ? void 0 : f.latest;
        if (m && g && zi(g, r)) {
          let [b, v] = [m.x + m.width / 2, m.y + m.height / 2], [y, w] = X(k(m.x, m.y), k(b, v), m.angle);
          oc(r === "x" ? i : y, r === "y" ? i : w, m, c, d, l, n, !1);
        }
      }
    }
    l.triggerUpdate();
    return;
  }
  let s = a ? ln(e, eY) : e;
  tY(r, r === "x" ? s : 0, r === "y" ? s : 0, t, t, c, n, l), l.triggerUpdate();
}, iY = ({ property: e, elements: t, elementsMap: n, atomicUnits: a, scene: i, appState: r }) => {
  let l = $e(() => a.map((c) => {
    let d = Object.keys(c).map((m) => n.get(m)).filter((m) => m !== void 0);
    if (d.length > 1) {
      let [m, g] = We(d);
      return Math.round((e === "x" ? m : g) * 100) / 100;
    }
    let [s] = d, [u, f] = [s.x + s.width / 2, s.y + s.height / 2], [h, U] = X(k(s.x, s.y), k(u, f), s.angle);
    return Math.round((e === "x" ? h : U) * 100) / 100;
  }), [a, n, e]), o = new Set(l).size === 1 ? l[0] : "Mixed";
  return p(Xi, { label: e === "x" ? "X" : "Y", elements: t, dragInputCallback: aY, value: o, property: e, scene: i, appState: r });
}, w5 = iY, E5 = 5, rY = ({ property: e, scene: t, appState: n, setAppState: a }) => p(Xi, { label: "Grid step", sensitivity: 8, elements: [], dragInputCallback: ({ nextValue: i, instantChange: r, shouldChangeByStepSize: l, setInputValue: o }) => {
  a((c) => {
    let d;
    return i ? d = i : r && (d = l ? ln(c.gridStep + E5 * Math.sign(r), E5) : c.gridStep + r), d ? (d = b7(d), o(d), { gridStep: d }) : (o(c.gridStep), null);
  });
}, scene: t, value: n.gridStep, property: e, appState: n }), lY = rY, oY = 50, IU = (e) => {
  let t = Cc(), n = e.app.scene.getSceneNonce() || 1, a = e.app.scene.getSelectedElements({ selectedElementIds: t.selectedElementIds, includeBoundTextElement: !1 }), i = qs(e.app);
  return p(sY, { ...e, appState: t, sceneNonce: n, selectedElements: a, gridModeEnabled: i });
}, lt = ({ children: e, columns: t = 1, heading: n, style: a, ...i }) => p("div", { className: ae("exc-stats__row", { "exc-stats__row--heading": n }), style: { gridTemplateColumns: `repeat(${t}, 1fr)`, ...a }, ...i, children: e });
lt.displayName = "StatsRow";
var Lu = ({ children: e, order: t, style: n, ...a }) => p("div", { className: "exc-stats__rows", style: { order: t, ...n }, ...a, children: e });
Lu.displayName = "StatsRows";
IU.StatsRow = lt;
IU.StatsRows = Lu;
var sY = So(({ app: e, onClose: t, renderCustomStats: n, selectedElements: a, appState: i, sceneNonce: r, gridModeEnabled: l }) => {
  let o = e.scene, c = o.getNonDeletedElements(), d = o.getNonDeletedElementsMap(), s = Xt(), u = a.length === 1 ? a[0] : null, f = a.length > 1 ? a : null, h = i.croppingElementId && Oe(u), U = h ? _i(u) : null, [m, g] = oe({ width: 0, height: 0 }), b = $e(() => dc((w) => {
    let x = We(w);
    g({ width: Math.round(x[2]) - Math.round(x[0]), height: Math.round(x[3]) - Math.round(x[1]) });
  }, oY), []);
  Q(() => {
    b(c);
  }, [r, c, b]), Q(() => () => b.cancel(), [b]);
  let v = $e(() => CU(a, i), [a, i]), y = $e(() => U3(a), [a]);
  return p("div", { className: "exc-stats", children: _(wa, { padding: 3, children: [_("div", { className: "title", children: [p("h2", { children: C("stats.title") }), p("div", { className: "close", onClick: t, children: _o })] }), _(d0, { label: p("h3", { children: C("stats.generalStats") }), open: !!(i.stats.panels & Hl.generalStats), openTrigger: () => s((w) => ({ stats: { open: !0, panels: w.stats.panels ^ Hl.generalStats } })), children: [_(Lu, { children: [p(lt, { heading: !0, children: C("stats.scene") }), _(lt, { columns: 2, children: [p("div", { children: C("stats.shapes") }), p("div", { children: c.length })] }), _(lt, { columns: 2, children: [p("div", { children: C("stats.width") }), p("div", { children: m.width })] }), _(lt, { columns: 2, children: [p("div", { children: C("stats.height") }), p("div", { children: m.height })] }), l && _(le, { children: [p(lt, { heading: !0, children: "Canvas" }), p(lt, { children: p(lY, { property: "gridStep", scene: o, appState: i, setAppState: s }) })] })] }), n == null ? void 0 : n(c, i)] }), !y && a.length > 0 && p("div", { id: "elementStats", style: { marginTop: 12 }, children: p(d0, { label: p("h3", { children: C("stats.elementProperties") }), open: !!(i.stats.panels & Hl.elementProperties), openTrigger: () => s((w) => ({ stats: { open: !0, panels: w.stats.panels ^ Hl.elementProperties } })), children: _(Lu, { children: [u && _(le, { children: [h && p(lt, { heading: !0, children: C("labels.unCroppedDimension") }), i.croppingElementId && Oe(u) && U && _(lt, { columns: 2, children: [p("div", { children: C("stats.width") }), p("div", { children: Ka(U.width, 2) })] }), i.croppingElementId && Oe(u) && U && _(lt, { columns: 2, children: [p("div", { children: C("stats.height") }), p("div", { children: Ka(U.height, 2) })] }), p(lt, { heading: !0, "data-testid": "stats-element-type", children: i.croppingElementId ? C("labels.imageCropping") : C(`element.${u.type}`) }), p(lt, { children: p(y5, { element: u, property: "x", elementsMap: d, scene: o, appState: i }) }), p(lt, { children: p(y5, { element: u, property: "y", elementsMap: d, scene: o, appState: i }) }), p(lt, { children: p(p5, { property: "width", element: u, scene: o, appState: i }) }), p(lt, { children: p(p5, { property: "height", element: u, scene: o, appState: i }) }), !te(u) && p(lt, { children: p(Rj, { property: "angle", element: u, scene: o, appState: i }) }), p(lt, { children: p($j, { property: "fontSize", element: u, scene: o, appState: i }) })] }), f && _(le, { children: [x7(f) && p(lt, { heading: !0, children: C("element.group") }), _(lt, { columns: 2, style: { margin: "0.3125rem 0" }, children: [p("div", { children: C("stats.shapes") }), p("div", { children: a.length })] }), p(lt, { children: p(w5, { property: "x", elements: f, elementsMap: d, atomicUnits: v, scene: o, appState: i }) }), p(lt, { children: p(w5, { property: "y", elements: f, elementsMap: d, atomicUnits: v, scene: o, appState: i }) }), p(lt, { children: p(g5, { property: "width", elements: f, elementsMap: d, atomicUnits: v, scene: o, appState: i }) }), p(lt, { children: p(g5, { property: "height", elements: f, elementsMap: d, atomicUnits: v, scene: o, appState: i }) }), p(lt, { children: p(Gj, { property: "angle", elements: f, scene: o, appState: i }) }), p(lt, { children: p(qj, { property: "fontSize", elements: f, scene: o, appState: i, elementsMap: d }) })] })] }) }) })] }) });
}, (e, t) => e.sceneNonce === t.sceneNonce && e.selectedElements === t.selectedElements && e.appState.stats.panels === t.appState.stats.panels && e.gridModeEnabled === t.gridModeEnabled && e.appState.gridStep === t.appState.gridStep && e.appState.croppingElementId === t.appState.croppingElementId), cY = ({ sourceElementId: e, onClose: t, elementsMap: n, appState: a, generateLinkForSelection: i = K7 }) => {
  var u;
  let r = ((u = n.get(e)) == null ? void 0 : u.link) ?? null, [l, o] = oe(r), [c, d] = oe(!1);
  Q(() => {
    let f = Ee(n, a), h = r;
    if (f.length > 0 && i) {
      let U = q7(f, a);
      U && (h = Nn(i(U.id, U.type)));
    }
    o(h);
  }, [n, a, a.selectedElementIds, r, i]);
  let s = _e(() => {
    var f;
    if (l && l !== ((f = n.get(e)) == null ? void 0 : f.link)) {
      let h = n.get(e);
      h && G(h, { link: l });
    }
    if (!l && c && e) {
      let h = n.get(e);
      h && G(h, { link: null });
    }
    t == null || t();
  }, [e, l, n, c, t]);
  return Q(() => {
    let f = (h) => {
      var U, m;
      ((U = a.openDialog) == null ? void 0 : U.name) === "elementLinkSelector" && h.key === P.ENTER && s(), ((m = a.openDialog) == null ? void 0 : m.name) === "elementLinkSelector" && h.key === P.ESCAPE && (t == null || t());
    };
    return window.addEventListener("keydown", f), () => {
      window.removeEventListener("keydown", f);
    };
  }, [a, t, s]), _("div", { className: "ElementLinkDialog", children: [_("div", { className: "ElementLinkDialog__header", children: [p("h2", { children: C("elementLink.title") }), p("p", { children: C("elementLink.desc") })] }), _("div", { className: "ElementLinkDialog__input", children: [p(xU, { value: l ?? "", onChange: (f) => {
    c || d(!0), o(f);
  }, onKeyDown: (f) => {
    f.key === P.ENTER && s();
  }, className: "ElementLinkDialog__input-field", selectOnRender: !0 }), r && l && p(Te, { type: "button", title: C("buttons.remove"), "aria-label": C("buttons.remove"), label: C("buttons.remove"), onClick: () => {
    o(null), d(!0);
  }, className: "ElementLinkDialog__remove", icon: sl })] }), _("div", { className: "ElementLinkDialog__actions", children: [p(Eo, { label: C("buttons.cancel"), onClick: () => {
    t == null || t();
  }, style: { marginRight: 10 } }), p(Eo, { label: C("buttons.confirm"), onClick: s, actionType: "primary" })] })] });
}, dY = cY, uY = ({ UIOptions: e }) => _(yn, { __fallback: !0, children: [p(yn.DefaultItems.LoadScene, {}), p(yn.DefaultItems.SaveToActiveFile, {}), e.canvasActions.export && p(yn.DefaultItems.Export, {}), e.canvasActions.saveAsImage && p(yn.DefaultItems.SaveAsImage, {}), p(yn.DefaultItems.SearchMenu, {}), p(yn.DefaultItems.Help, {}), p(yn.DefaultItems.ClearCanvas, {}), p(yn.Separator, {}), p(yn.Group, { title: "Excalidraw links", children: p(yn.DefaultItems.Socials, {}) }), p(yn.Separator, {}), p(yn.DefaultItems.ToggleTheme, {}), p(yn.DefaultItems.ChangeCanvasBackground, {})] }), fY = () => _(Wh, { __fallback: !0, children: [p(Wh.Actions.SaveToDisk, {}), p(Wh.Actions.ExportToImage, {})] }), hY = ({ actionManager: e, appState: t, files: n, setAppState: a, elements: i, canvas: r, onLockToggle: l, onHandToolToggle: o, onPenModeToggle: c, showExitZenModeBtn: d, renderTopRightUI: s, renderCustomStats: u, UIOptions: f, onExportImage: h, renderWelcomeScreen: U, children: m, app: g, isCollaborating: b, generateLinkForSelection: v }) => {
  var F, N, j;
  let y = Ht(), w = QV(), x = w.tunnelsJotai.Provider, [S, E] = Et(Mf), M = () => f.canvasActions.export ? p(ZG, { elements: i, appState: t, files: n, actionManager: e, exportOpts: f.canvasActions.export, canvas: r, setAppState: a }) : null, I = () => {
    var z;
    return !f.canvasActions.saveAsImage || ((z = t.openDialog) == null ? void 0 : z.name) !== "imageExport" ? null : p(SG, { elements: i, appState: t, files: n, actionManager: e, onExportImage: h, onCloseRequest: () => a({ openDialog: null }), name: g.getName() });
  }, T = () => _("div", { style: { position: "relative" }, children: [p(w.MainMenuTunnel.Out, {}), U && p(w.WelcomeScreenMenuHintTunnel.Out, {})] }), A = () => p(lc, { heading: "selectedShapeActions", className: ae("selected-shape-actions zen-mode-transition", { "transition-left": t.zenModeEnabled }), children: p(wa, { className: ao.SHAPE_ACTIONS_MENU, padding: 2, style: { maxHeight: `${t.height - 166}px` }, children: p(lv, { appState: t, elementsMap: g.scene.getNonDeletedElementsMap(), renderAction: e.renderAction, app: g }) }) }), D = () => {
    var ie, pe, ue, Ve, Ge;
    let z = Vp(t, i), Y = t.stats.open && !t.zenModeEnabled && !t.viewModeEnabled && ((ie = t.openDialog) == null ? void 0 : ie.name) !== "elementLinkSelector";
    return p(Uv, { side: "top", children: _("div", { className: "App-menu App-menu_top", children: [_(jn.Col, { gap: 6, className: ae("App-menu_top__left"), children: [T(), z && A()] }), !t.viewModeEnabled && ((pe = t.openDialog) == null ? void 0 : pe.name) !== "elementLinkSelector" && p(lc, { heading: "shapes", className: "shapes-section", children: (je) => _("div", { style: { position: "relative" }, children: [U && p(w.WelcomeScreenToolbarHintTunnel.Out, {}), p(jn.Col, { gap: 4, align: "start", children: _(jn.Row, { gap: 1, className: ae("App-toolbar-container", { "zen-mode": t.zenModeEnabled }), children: [_(wa, { padding: 1, className: ae("App-toolbar", { "zen-mode": t.zenModeEnabled }), children: [p(bv, { appState: t, isMobile: y.editor.isMobile, device: y, app: g }), je, _(jn.Row, { gap: 1, children: [p(yv, { zenModeEnabled: t.zenModeEnabled, checked: t.penMode, onChange: () => c(null), title: C("toolBar.penMode"), penDetected: t.penDetected }), p(vv, { checked: t.activeTool.locked, onChange: l, title: C("toolBar.lock") }), p("div", { className: "App-toolbar__divider" }), p(wv, { checked: ro(t), onChange: () => o(), title: C("toolBar.hand"), isMobile: !0 }), p(ov, { appState: t, activeTool: t.activeTool, UIOptions: f, app: g })] })] }), b && p(wa, { style: { marginLeft: 8, alignSelf: "center", height: "fit-content" }, children: p(Uj, { title: C("toolBar.laser"), checked: t.activeTool.type === zt.laser, onChange: () => g.setActiveTool({ type: zt.laser }), isMobile: !0 }) })] }) })] }) }), _("div", { className: ae("layer-ui__wrapper__top-right zen-mode-transition", { "transition-right": t.zenModeEnabled }), children: [t.collaborators.size > 0 && p(Ev, { collaborators: t.collaborators, userToFollow: ((ue = t.userToFollow) == null ? void 0 : ue.socketId) || null }), s == null ? void 0 : s(y.editor.isMobile, t), !t.viewModeEnabled && ((Ve = t.openDialog) == null ? void 0 : Ve.name) !== "elementLinkSelector" && (!O || ((Ge = t.openSidebar) == null ? void 0 : Ge.name) !== ba.name) && p(w.DefaultSidebarTriggerTunnel.Out, {}), Y && p(IU, { app: g, onClose: () => {
      e.executeAction(p0);
    }, renderCustomStats: u })] })] }) });
  }, R = () => p(u5, { __fallback: !0, onDock: (z) => {
    rt("sidebar", `toggleDock (${z ? "dock" : "undock"})`, `(${y.editor.isMobile ? "mobile" : "desktop"})`);
  } }), O = f9(SU), $ = _(le, { children: [m, p(uY, { UIOptions: f }), p(u5.Trigger, { __fallback: !0, icon: Z0, title: ys(C("toolBar.library")), onToggle: (z) => {
    z && rt("sidebar", `${ba.name} (open)`, `button (${y.editor.isMobile ? "mobile" : "desktop"})`);
  }, tab: ba.defaultTab, children: C("toolBar.library") }), p(fY, {}), ((F = t.openDialog) == null ? void 0 : F.name) === "ttd" && p(Sj, { __fallback: !0 }), t.isLoading && p(U9, { delay: 250 }), t.errorMessage && p(bG, { onClose: () => a({ errorMessage: null }), children: t.errorMessage }), S && !y.editor.isMobile && p(GX, { colorPickerType: S.colorPickerType, onCancel: () => {
    E(null);
  }, onChange: (z, Y, ie, { altKey: pe }) => {
    var ue;
    if (!(z !== "elementBackground" && z !== "elementStroke")) if (ie.length) {
      for (let Ve of ie) G(Ve, { [pe && S.swapPreviewOnAlt ? z === "elementBackground" ? "strokeColor" : "backgroundColor" : z === "elementBackground" ? "backgroundColor" : "strokeColor"]: Y }, !1), mt.delete(Ve);
      (ue = Ri.getScene(ie[0])) == null || ue.triggerUpdate();
    } else a(z === "elementBackground" ? { currentItemBackgroundColor: Y } : { currentItemStrokeColor: Y });
  }, onSelect: (z, Y) => {
    var ie;
    E((pe) => pe != null && pe.keepOpenOnAlt && Y.altKey ? pe : null), (ie = S == null ? void 0 : S.onSelect) == null || ie.call(S, z, Y);
  } }), ((N = t.openDialog) == null ? void 0 : N.name) === "help" && p(XG, { onClose: () => {
    a({ openDialog: null });
  } }), p(iG, {}), ((j = t.openDialog) == null ? void 0 : j.name) === "elementLinkSelector" && p(dY, { sourceElementId: t.openDialog.sourceElementId, onClose: () => {
    a({ openDialog: null });
  }, elementsMap: g.scene.getNonDeletedElementsMap(), appState: t, generateLinkForSelection: v }), p(w.OverwriteConfirmDialogTunnel.Out, {}), I(), M(), t.pasteDialog.shown && p(OG, { setAppState: a, appState: t, onClose: () => a({ pasteDialog: { shown: !1, data: null } }) }), y.editor.isMobile && p(NG, { app: g, appState: t, elements: i, actionManager: e, renderJSONExportDialog: M, renderImageExportDialog: I, setAppState: a, onLockToggle: l, onHandToolToggle: o, onPenModeToggle: c, renderTopRightUI: s, renderCustomStats: u, renderSidebars: R, device: y, renderWelcomeScreen: U, UIOptions: f }), !y.editor.isMobile && _(le, { children: [_("div", { className: "layer-ui__wrapper", style: t.openSidebar && O && y.editor.canFitSidebar ? { width: "calc(100% - var(--right-sidebar-width))" } : {}, children: [U && p(w.WelcomeScreenCenterTunnel.Out, {}), D(), p(qG, { appState: t, actionManager: e, showExitZenModeBtn: d, renderWelcomeScreen: U }), t.scrolledOutside && p("button", { type: "button", className: "scroll-back-to-content", onClick: () => {
    a((z) => ({ ...Zs(i, z) }));
  }, children: C("buttons.scrollBackToContent") })] }), R()] })] });
  return p(k9.Provider, { value: t, children: p(x, { children: p(av.Provider, { value: w, children: $ }) }) });
}, x5 = (e) => {
  let { suggestedBindings: t, startBoundElement: n, cursorButton: a, scrollX: i, scrollY: r, ...l } = e;
  return l;
}, pY = (e, t) => {
  if (e.children !== t.children) return !1;
  let { canvas: n, appState: a, ...i } = e, { canvas: r, appState: l, ...o } = t;
  return en(x5(a), x5(l), { selectedElementIds: en, selectedGroupIds: en }) && en(i, o);
}, UY = Z.memo(hY, pY), mY = 5e3, gY = ({ message: e, onClose: t, closable: n = !1, duration: a = mY, style: i }) => {
  let r = re(0), l = a !== 1 / 0, o = _e(() => {
    l && (r.current = window.setTimeout(() => t(), a));
  }, [t, a, l]);
  return Q(() => {
    if (l) return o(), () => clearTimeout(r.current);
  }, [o, e, a, l]), _("div", { className: "Toast", onMouseEnter: l ? () => clearTimeout(r == null ? void 0 : r.current) : void 0, onMouseLeave: l ? o : void 0, style: i, children: [p("p", { className: "Toast__message", children: e }), n && p(Te, { icon: _o, "aria-label": "close", type: "icon", onClick: t, className: "close" })] });
}, S5 = K({ name: "viewMode", label: "labels.viewMode", paletteName: "Toggle view mode", icon: ep, viewMode: !0, trackEvent: { category: "canvas", predicate: (e) => !e.viewModeEnabled }, perform(e, t) {
  return { appState: { ...t, viewModeEnabled: !this.checked(t) }, captureUpdate: W.EVENTUALLY };
}, checked: (e) => e.viewModeEnabled, predicate: (e, t, n) => typeof n.viewModeEnabled > "u", keyTest: (e) => !e[P.CTRL_OR_CMD] && e.altKey && e.code === De.R }), iy = (e, t) => {
  let n = t.scene.getSelectedElements(e);
  return n.length === 1 && fe(n[0]);
}, bY = K({ name: "selectAllElementsInFrame", label: "labels.selectAllElementsInFrame", trackEvent: { category: "canvas" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t).at(0) || null;
  if (fe(i)) {
    let r = ri(at(e), i.id).filter((l) => !(l.type === "text" && l.containerId));
    return { elements: e, appState: { ...t, selectedElementIds: r.reduce((l, o) => (l[o.id] = !0, l), {}) }, captureUpdate: W.IMMEDIATELY };
  }
  return { elements: e, appState: t, captureUpdate: W.EVENTUALLY };
}, predicate: (e, t, n, a) => iy(t, a) }), vY = K({ name: "removeAllElementsFromFrame", label: "labels.removeAllElementsFromFrame", trackEvent: { category: "history" }, perform: (e, t, n, a) => {
  let i = a.scene.getSelectedElements(t).at(0) || null;
  return fe(i) ? { elements: f3(e, i), appState: { ...t, selectedElementIds: { [i.id]: !0 } }, captureUpdate: W.IMMEDIATELY } : { elements: e, appState: t, captureUpdate: W.EVENTUALLY };
}, predicate: (e, t, n, a) => iy(t, a) });
K({ name: "updateFrameRendering", label: "labels.updateFrameRendering", viewMode: !0, trackEvent: { category: "canvas" }, perform: (e, t) => ({ elements: e, appState: { ...t, frameRendering: { ...t.frameRendering, enabled: !t.frameRendering.enabled } }, captureUpdate: W.EVENTUALLY }), checked: (e) => e.frameRendering.enabled });
K({ name: "setFrameAsActiveTool", label: "toolBar.frame", trackEvent: { category: "toolbar" }, icon: k8, viewMode: !1, perform: (e, t, n, a) => {
  let i = _t(t, { type: "frame" });
  return Oa(a.interactiveCanvas, { ...t, activeTool: i }), { elements: e, appState: { ...t, activeTool: _t(t, { type: "frame" }) }, captureUpdate: W.EVENTUALLY };
}, keyTest: (e) => !e[P.CTRL_OR_CMD] && !e.shiftKey && !e.altKey && e.key.toLocaleLowerCase() === P.F });
var yY = K({ name: "wrapSelectionInFrame", label: "labels.wrapSelectionInFrame", trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = Ee(e, t);
  return i.length > 0 && !i.some((r) => fe(r));
}, perform: (e, t, n, a) => {
  let i = Ee(e, t), [r, l, o, c] = We(i, a.scene.getNonDeletedElementsMap()), d = 16, s = up({ x: r - d, y: l - d, width: o - r + d * 2, height: c - l + d * 2 });
  if (t.editingGroupId) {
    let u = ot(i, t.editingGroupId);
    for (let f of u) {
      let h = f.groupIds.indexOf(t.editingGroupId);
      G(f, { groupIds: f.groupIds.slice(0, h) }, !1);
    }
  }
  return { elements: Ss([...a.scene.getElementsIncludingDeleted(), s], i, s, t), appState: { selectedElementIds: { [s.id]: !0 } }, captureUpdate: W.IMMEDIATELY };
} }), wY = () => _("div", { "data-testid": "brave-measure-text-error", children: [p("p", { children: p(Za, { i18nKey: "errors.brave_measure_text_error.line1", bold: (e) => p("span", { style: { fontWeight: 600 }, children: e }) }) }), p("p", { children: p(Za, { i18nKey: "errors.brave_measure_text_error.line2", bold: (e) => p("span", { style: { fontWeight: 600 }, children: e }) }) }), p("p", { children: p(Za, { i18nKey: "errors.brave_measure_text_error.line3", link: (e) => p("a", { href: "http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser", children: e }) }) }), p("p", { children: p(Za, { i18nKey: "errors.brave_measure_text_error.line4", issueLink: (e) => p("a", { href: "https://github.com/excalidraw/excalidraw/issues/new", children: e }), discordLink: (e) => _("a", { href: "https://discord.gg/UexuTaE", children: [e, "."] }) }) })] }), EY = wY, ld = { width: 100, height: 0 }, or = 100, xY = (e, t, n) => {
  let a = $n({ x: 0, y: 0, textAlign: Hs.CENTER, verticalAlign: Pn.MIDDLE, ...t, containerId: e.id, strokeColor: t.strokeColor || e.strokeColor });
  return Object.assign(e, { boundElements: (e.boundElements || []).concat({ type: "text", id: a.id }) }), Un(a, e, n), [e, a];
}, k5 = (e, t, n, a, i) => {
  let r, l;
  if (Object.assign(e, { startBinding: (e == null ? void 0 : e.startBinding) || null, endBinding: e.endBinding || null }), t) {
    let s = (t == null ? void 0 : t.width) ?? or, u = (t == null ? void 0 : t.height) ?? or, f;
    t.id && (f = a.getElement(t.id), f || console.error(`No element for start binding with id ${t.id} found`));
    let h = t.x || e.x - s, U = t.y || e.y - u / 2, m = f ? f.type : t.type;
    if (m) {
      if (m === "text") {
        let g = "";
        f && f.type === "text" ? g = f.text : t.type === "text" && (g = t.text), g || console.error(`No text found for start binding text element for ${e.id}`), r = $n({ x: h, y: U, type: "text", ...f, ...t, text: g }), Object.assign(r, { x: t.x || e.x - r.width, y: t.y || e.y - r.height / 2 });
      } else switch (m) {
        case "rectangle":
        case "ellipse":
        case "diamond": {
          r = ai({ x: h, y: U, width: s, height: u, ...f, ...t, type: m });
          break;
        }
        default:
          ll(e, `Unhandled element start type "${t.type}"`, !0);
      }
      ti(e, r, "start", i);
    }
  }
  if (n) {
    let s = (n == null ? void 0 : n.height) ?? or, u = (n == null ? void 0 : n.width) ?? or, f;
    n.id && (f = a.getElement(n.id), f || console.error(`No element for end binding with id ${n.id} found`));
    let h = n.x || e.x + e.width, U = n.y || e.y - s / 2, m = f ? f.type : n.type;
    if (m) {
      if (m === "text") {
        let g = "";
        f && f.type === "text" ? g = f.text : n.type === "text" && (g = n.text), g || console.error(`No text found for end binding text element for ${e.id}`), l = $n({ x: h, y: U, type: "text", ...f, ...n, text: g }), Object.assign(l, { y: n.y || e.y - l.height / 2 });
      } else switch (m) {
        case "rectangle":
        case "ellipse":
        case "diamond": {
          l = ai({ x: h, y: U, width: u, height: s, ...f, ...n, type: m });
          break;
        }
        default:
          ll(e, `Unhandled element end type "${m}"`, !0);
      }
      ti(e, l, "end", i);
    }
  }
  if (e.points.length < 2) return { linearElement: e, startBoundElement: r, endBoundElement: l };
  let o = e.points.length - 1, c = 0.5, d = ki(e.points);
  return e.points[o][0] > e.points[o - 1][0] && (d[0][0] = c, d[o][0] -= c), e.points[o][0] < e.points[o - 1][0] && (d[0][0] = -c, d[o][0] += c), e.points[o][1] > e.points[o - 1][1] && (d[0][1] = c, d[o][1] -= c), e.points[o][1] < e.points[o - 1][1] && (d[0][1] = -c, d[o][1] += c), Object.assign(e, { points: d }), { linearElement: e, startBoundElement: r, endBoundElement: l };
}, SY = class {
  constructor() {
    L(this, "excalidrawElements", /* @__PURE__ */ new Map()), L(this, "add", (e) => {
      e && this.excalidrawElements.set(e.id, e);
    }), L(this, "getElements", () => Li(Array.from(this.excalidrawElements.values()))), L(this, "getElementsMap", () => Qn(he(this.getElements()))), L(this, "getElement", (e) => this.excalidrawElements.get(e));
  }
}, x0 = (e, t) => {
  var o, c, d;
  if (!e) return [];
  let n = ki(e), a = new SY(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map();
  for (let s of n) {
    let u, f = s.id;
    switch ((t == null ? void 0 : t.regenerateIds) !== !1 && Object.assign(s, { id: na() }), s.type) {
      case "rectangle":
      case "ellipse":
      case "diamond": {
        let h = (o = s == null ? void 0 : s.label) != null && o.text && s.width === void 0 ? 0 : (s == null ? void 0 : s.width) || or, U = (c = s == null ? void 0 : s.label) != null && c.text && s.height === void 0 ? 0 : (s == null ? void 0 : s.height) || or;
        u = ai({ ...s, width: h, height: U });
        break;
      }
      case "line": {
        let h = s.width || ld.width, U = s.height || ld.height;
        u = qr({ width: h, height: U, points: [k(0, 0), k(h, U)], ...s });
        break;
      }
      case "arrow": {
        let h = s.width || ld.width, U = s.height || ld.height;
        u = fp({ width: h, height: U, endArrowhead: "arrow", points: [k(0, 0), k(h, U)], ...s, type: "arrow" }), Object.assign(u, ho(u.points));
        break;
      }
      case "text": {
        let h = (s == null ? void 0 : s.fontFamily) || Er, U = (s == null ? void 0 : s.fontSize) || Fi, m = (s == null ? void 0 : s.lineHeight) || dl(h), g = s.text ?? "", b = co(g), v = dn(b, Je({ fontFamily: h, fontSize: U }), m);
        u = $n({ width: v.width, height: v.height, fontFamily: h, fontSize: U, ...s });
        break;
      }
      case "image": {
        u = R7({ width: (s == null ? void 0 : s.width) || or, height: (s == null ? void 0 : s.height) || or, ...s });
        break;
      }
      case "frame": {
        u = up({ x: 0, y: 0, ...s });
        break;
      }
      case "magicframe": {
        u = L1({ x: 0, y: 0, ...s });
        break;
      }
      case "freedraw":
      case "iframe":
      case "embeddable": {
        u = s;
        break;
      }
      default:
        u = s, ll(s, `Unhandled element type "${s.type}"`, !0);
    }
    a.getElement(u.id) ? console.error(`Duplicate id found for ${u.id}`) : (a.add(u), i.set(u.id, s), f && r.set(f, u.id));
  }
  let l = a.getElementsMap();
  for (let [s, u] of i) {
    let f = a.getElement(s);
    switch (u.type) {
      case "rectangle":
      case "ellipse":
      case "diamond":
      case "arrow": {
        if ((d = u.label) != null && d.text) {
          let [h, U] = xY(f, u == null ? void 0 : u.label, l);
          if (a.add(h), a.add(U), xe(h)) {
            let m = u.type === "arrow" ? u == null ? void 0 : u.start : void 0, g = u.type === "arrow" ? u == null ? void 0 : u.end : void 0;
            if (m && m.id) {
              let w = r.get(m.id);
              w && Object.assign(m, { id: w });
            }
            if (g && g.id) {
              let w = r.get(g.id);
              w && Object.assign(g, { id: w });
            }
            let { linearElement: b, startBoundElement: v, endBoundElement: y } = k5(h, m, g, a, l);
            h = b, a.add(b), a.add(v), a.add(y);
          }
        } else switch (u.type) {
          case "arrow": {
            let { start: h, end: U } = u;
            if (h && h.id) {
              let v = r.get(h.id);
              Object.assign(h, { id: v });
            }
            if (U && U.id) {
              let v = r.get(U.id);
              Object.assign(U, { id: v });
            }
            let { linearElement: m, startBoundElement: g, endBoundElement: b } = k5(f, h, U, a, l);
            a.add(m), a.add(g), a.add(b);
            break;
          }
        }
        break;
      }
    }
  }
  for (let [s, u] of i) {
    if (u.type !== "frame" && u.type !== "magicframe") continue;
    let f = a.getElement(s);
    if (!f) throw new Error(`Excalidraw element with id ${s} doesn't exist`);
    let h = [];
    u.children.forEach((E) => {
      var T;
      let M = r.get(E);
      if (!M) throw new Error(`Element with ${E} wasn't mapped correctly`);
      let I = a.getElement(M);
      if (!I) throw new Error(`Frame element with id ${M} doesn't exist`);
      Object.assign(I, { frameId: f.id }), (T = I == null ? void 0 : I.boundElements) == null || T.forEach((A) => {
        let D = a.getElement(A.id);
        if (!D) throw new Error(`Bound element with id ${A.id} doesn't exist`);
        Object.assign(D, { frameId: f.id }), h.push(D);
      }), h.push(I);
    });
    let [U, m, g, b] = We(h), v = 10;
    U = U - v, m = m - v, g = g + v, b = b + v;
    let y = (f == null ? void 0 : f.x) || U, w = (f == null ? void 0 : f.y) || m, x = (f == null ? void 0 : f.width) || g - U, S = (f == null ? void 0 : f.height) || b - m;
    Object.assign(f, { x: y, y: w, width: x, height: S }), a8() && u.children.length && (f != null && f.x || f != null && f.y || f != null && f.width || f != null && f.height) && console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically");
  }
  return a.getElements();
}, gt = (e) => (t) => {
  k0(e, t);
}, Gh = (e) => Vu((t) => {
  k0(e, t);
}), TU = (() => {
  let e;
  try {
    let n = Ty.split(".");
    e = Number(n[0]) > 17;
  } catch {
    e = !1;
  }
  let t = !1;
  return () => window.EXCALIDRAW_THROTTLE_RENDER === !0 ? e ? !0 : (t || (t = !0, console.warn("Excalidraw: render throttling is disabled on React versions < 18.")), !1) : !1;
})(), kY = "#ff6b6b", MY = "#ff0000", M5 = 1, C5 = 2, CY = (e, t) => {
  if (!t.snapLines.length) return;
  let n = t.theme === Ie.LIGHT || t.zenModeEnabled ? kY : MY, a = (t.zenModeEnabled ? M5 * 1.5 : M5) / t.zoom.value;
  e.save(), e.translate(t.scrollX, t.scrollY);
  for (let i of t.snapLines) i.type === "pointer" ? (e.lineWidth = a, e.strokeStyle = n, TY(i, e, t)) : i.type === "gap" ? (e.lineWidth = a, e.strokeStyle = n, _Y(i.points[0], i.points[1], i.direction, t, e)) : i.type === "points" && (e.lineWidth = a, e.strokeStyle = n, IY(i, e, t));
  e.restore();
}, IY = (e, t, n) => {
  if (!n.zenModeEnabled) {
    let a = e.points[0], i = e.points[e.points.length - 1];
    Hn(a, i, t);
  }
  for (let a of e.points) ry(a, n, t);
}, TY = (e, t, n) => {
  ry(e.points[0], n, t), n.zenModeEnabled || Hn(e.points[0], e.points[1], t);
}, ry = ([e, t], n, a) => {
  a.save();
  let i = (n.zenModeEnabled ? C5 * 1.5 : C5) / n.zoom.value;
  a.beginPath(), a.moveTo(e - i, t - i), a.lineTo(e + i, t + i), a.moveTo(e + i, t - i), a.lineTo(e - i, t + i), a.stroke(), a.restore();
}, Hn = (e, t, n) => {
  n.beginPath(), n.lineTo(e[0], e[1]), n.lineTo(t[0], t[1]), n.stroke();
}, _Y = (e, t, n, a, i) => {
  let r = 8 / a.zoom.value, l = r / 2, o = r / 4;
  if (n === "horizontal") {
    let c = [(e[0] + t[0]) / 2, e[1]];
    a.zenModeEnabled || Hn(k(e[0], e[1] - r), k(e[0], e[1] + r), i), Hn(k(c[0] - o, c[1] - l), k(c[0] - o, c[1] + l), i), Hn(k(c[0] + o, c[1] - l), k(c[0] + o, c[1] + l), i), a.zenModeEnabled || (Hn(k(t[0], t[1] - r), k(t[0], t[1] + r), i), Hn(e, t, i));
  } else {
    let c = [e[0], (e[1] + t[1]) / 2];
    a.zenModeEnabled || Hn(k(e[0] - r, e[1]), k(e[0] + r, e[1]), i), Hn(k(c[0] - l, c[1] - o), k(c[0] + l, c[1] - o), i), Hn(k(c[0] - l, c[1] + o), k(c[0] + l, c[1] + o), i), a.zenModeEnabled || (Hn(k(t[0] - r, t[1]), k(t[0] + r, t[1]), i), Hn(e, t, i));
  }
}, AY = (e, t) => {
  cn(t.selectedLinearElement, "selectedLinearElement is null");
  let { segmentMidPointHoveredCoords: n } = t.selectedLinearElement;
  cn(n, "midPointCoords is null"), e.save(), e.translate(t.scrollX, t.scrollY), ly(n, e, t), e.restore();
}, DY = (e, t, n) => {
  var o, c;
  let { elementId: a, hoverPointIndex: i } = t.selectedLinearElement;
  if ((c = (o = t.editingLinearElement) == null ? void 0 : o.selectedPointsIndices) != null && c.includes(i)) return;
  let r = ee.getElement(a, n);
  if (!r) return;
  let l = ee.getPointAtIndexGlobalCoordinates(r, i, n);
  e.save(), e.translate(t.scrollX, t.scrollY), ly(l, e, t), e.restore();
}, ly = (e, t, n) => {
  t.fillStyle = "rgba(105, 101, 219, 0.4)", df(t, e[0], e[1], ee.POINT_HANDLE_SIZE / n.zoom.value, !1);
}, kc = (e, t, n, a, i, r, l, o, c = !1, d = 0) => {
  e.save(), e.translate(r, l), e.rotate(o), c && e.fillRect(t - r, n - l, a, i), d && e.roundRect ? (e.beginPath(), e.roundRect(t - r, n - l, a, i, d), e.stroke(), e.closePath()) : e.strokeRect(t - r, n - l, a, i), e.restore();
}, LY = (e, t, n, a, i, r) => {
  e.save(), e.translate(a, i), e.rotate(r), e.beginPath(), e.moveTo(0, n / 2), e.lineTo(t / 2, 0), e.lineTo(0, -n / 2), e.lineTo(-t / 2, 0), e.closePath(), e.stroke(), e.restore();
}, jh = (e, t, n, a, i, r = !1) => {
  e.strokeStyle = "#5e5ad8", e.setLineDash([]), e.fillStyle = "rgba(255, 255, 255, 0.9)", i ? e.fillStyle = "rgba(134, 131, 226, 0.9)" : r && (e.fillStyle = "rgba(177, 151, 252, 0.7)"), df(e, n[0], n[1], a / t.zoom.value, !r);
}, RY = (e, t, n, a, i, r) => {
  e.beginPath(), e.ellipse(a, i, t / 2, n / 2, r, 0, Math.PI * 2), e.stroke();
}, PY = (e, t, n, a) => {
  let [i, r, l, o] = ge(t, n), c = l - i, d = o - r;
  e.strokeStyle = "rgba(0,0,0,.05)";
  let s = a.value < 1 ? a.value : 1;
  e.lineWidth = sp / s;
  let u = e.lineWidth / 2 + cp, f = va(Math.min(t.width, t.height), t);
  switch (t.type) {
    case "rectangle":
    case "text":
    case "image":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
      kc(e, i - u, r - u, c + u * 2, d + u * 2, i + c / 2, r + d / 2, t.angle, void 0, f);
      break;
    case "diamond":
      let h = Math.hypot(c, d), U = u * h / d, m = u * h / c;
      LY(e, c + U * 2, d + m * 2, i + c / 2, r + d / 2, t.angle);
      break;
    case "ellipse":
      RY(e, c + u * 2, d + u * 2, i + c / 2, r + d / 2, t.angle);
      break;
  }
}, NY = (e, t, n, a) => {
  let [i, r, l] = t, o = bc(l, l.width, l.height, a);
  e.strokeStyle = "rgba(0,0,0,0)", e.fillStyle = "rgba(0,0,0,.05)", (r === "both" ? [0, -1] : r === "start" ? [0] : [-1]).forEach((c) => {
    let [d, s] = ee.getPointAtIndexGlobalCoordinates(i, c, n);
    df(e, d, s, o);
  });
}, oy = (e, t, n) => {
  let { angle: a, x1: i, y1: r, x2: l, y2: o, selectionColors: c, cx: d, cy: s, dashed: u, activeEmbeddable: f } = n, h = l - i, U = o - r, m = (n.padding ?? il * 2) / t.zoom.value, g = 8 / t.zoom.value, b = 4 / t.zoom.value;
  e.save(), e.translate(t.scrollX, t.scrollY), e.lineWidth = (f ? 4 : 1) / t.zoom.value;
  let v = c.length;
  for (let y = 0; y < v; ++y) e.strokeStyle = c[y], u && e.setLineDash([g, b + (g + b) * (v - 1)]), e.lineDashOffset = (g + b) * y, kc(e, i - m, r - m, h + m * 2, U + m * 2, d, s, a);
  e.restore();
}, OY = (e, t, n, a) => {
  let i = Array.isArray(n) ? NY : PY;
  e.save(), e.translate(t.scrollX, t.scrollY), i(e, n, a, t.zoom), e.restore();
}, $Y = (e, t, n, a) => {
  let [i, r, l, o] = ge(n, a), c = l - i, d = o - r;
  e.strokeStyle = "rgb(0,118,255)", e.lineWidth = pt.strokeWidth / t.zoom.value, e.save(), e.translate(t.scrollX, t.scrollY), kc(e, i, r, c, d, i + c / 2, r + d / 2, n.angle, !1, pt.radius / t.zoom.value), e.restore();
}, zY = (e, t, n) => {
  let a = n.filter((o) => o.groupIds.length === 0), i = n.filter((o) => o.groupIds.length > 0), r = (o) => {
    let [c, d, s, u] = We(o);
    return { angle: 0, x1: c, x2: s, y1: d, y2: u, selectionColors: ["rgb(0,118,255)"], dashed: !1, cx: c + (s - c) / 2, cy: d + (u - d) / 2, activeEmbeddable: !1 };
  }, l = (o) => {
    let c = ot(n, o);
    return r(c);
  };
  Object.entries(E7(i, t)).filter(([o, c]) => c).map(([o, c]) => o).map((o) => l(o)).concat(a.map((o) => r([o]))).forEach((o) => oy(e, t, o));
}, Yh = (e, t, n, a) => {
  var o;
  if (!t.selectedLinearElement) return;
  e.save(), e.translate(t.scrollX, t.scrollY), e.lineWidth = 1 / t.zoom.value;
  let i = ee.getPointsGlobalCoordinates(n, a), { POINT_HANDLE_SIZE: r } = ee, l = t.editingLinearElement ? r : r / 2;
  if (i.forEach((c, d) => {
    var u, f;
    if (te(n) && d !== 0 && d !== i.length - 1) return;
    let s = !!((f = (u = t.editingLinearElement) == null ? void 0 : u.selectedPointsIndices) != null && f.includes(d));
    jh(e, t, c, l, s);
  }), te(n)) {
    let c = ((o = n.fixedSegments) == null ? void 0 : o.map((d) => d.index)) || [];
    i.slice(0, -1).forEach((d, s) => {
      ee.isSegmentTooShort(n, i[s + 1], i[s], s, t.zoom) || jh(e, t, k((d[0] + i[s + 1][0]) / 2, (d[1] + i[s + 1][1]) / 2), r / 2, !1, !c.includes(s + 1));
    });
  } else ee.getEditorMidPoints(n, a, t).filter((c, d, s) => c !== null && !(te(n) && (d === 0 || d === s.length - 1))).forEach((c) => {
    (t.editingLinearElement || i.length === 2) && jh(e, t, c, r / 2, !1, !0);
  });
  e.restore();
}, I5 = (e, t, n, a, i) => {
  Object.keys(a).forEach((r) => {
    let l = a[r];
    if (l !== void 0) {
      let [o, c, d, s] = l;
      e.save(), e.lineWidth = 1 / n.zoom.value, t.selectionColor && (e.strokeStyle = t.selectionColor), r === "rotation" ? df(e, o + d / 2, c + s / 2, d / 2) : e.roundRect ? (e.beginPath(), e.roundRect(o, c, d, s, 2 / n.zoom.value), e.fill(), e.stroke()) : kc(e, o, c, d, s, o + d / 2, c + s / 2, i, !0), e.restore();
    }
  });
}, FY = (e, t, n, a, i) => {
  let [r, l, , , o, c] = ge(a, i), d = 3, s = 20, u = d / n.zoom.value, f = u / 2, h = o - r + u, U = c - l + u, m = Math.min(s / n.zoom.value, h), g = Math.min(s / n.zoom.value, U);
  e.save(), e.fillStyle = t.selectionColor, e.strokeStyle = t.selectionColor, e.lineWidth = u, [[[-h, -U], [0, f], [m, f], [f, 0], [f, g]], [[h - f, -U], [f, f], [-m + f, f], [0, 0], [0, g]], [[-h, U], [0, -f], [m, -f], [f, 0], [f, -g]], [[h - f, U], [f, -f], [-m + f, -f], [0, 0], [0, -g]]].forEach((b) => {
    let [[v, y], [w, x], [S, E], [M, I], [T, A]] = b;
    e.save(), e.translate(o, c), e.rotate(a.angle), e.beginPath(), e.moveTo(v + w, y + x), e.lineTo(v + S, y + E), e.stroke(), e.beginPath(), e.moveTo(v + M, y + I), e.lineTo(v + T, y + A), e.stroke(), e.restore();
  }), e.restore();
}, BY = (e, t, n, a) => {
  t.save();
  let i = il * 2 / n.zoom.value, r = e.width + i * 2, l = e.height + i * 2, o = e.x + r / 2, c = e.y + l / 2, d = -(r / 2 + i), s = -(l / 2 + i);
  t.translate(o + n.scrollX, c + n.scrollY), t.rotate(e.angle), t.lineWidth = 1 / n.zoom.value, t.strokeStyle = a, t.strokeRect(d, s, r, l), t.restore();
}, sy = ({ canvas: e, elementsMap: t, visibleElements: n, selectedElements: a, allElementsMap: i, scale: r, appState: l, renderConfig: o, device: c }) => {
  var m, g, b;
  if (e === null) return { atLeastOneVisibleElement: !1, elementsMap: t };
  let [d, s] = gp(e, r), u = bp({ canvas: e, scale: r, normalizedWidth: d, normalizedHeight: s });
  u.save(), u.scale(l.zoom.value, l.zoom.value);
  let f;
  if (n.forEach((v) => {
    var y;
    ((y = l.editingLinearElement) == null ? void 0 : y.elementId) === v.id && v && (f = v);
  }), f && Yh(u, l, f, t), l.selectionElement && !l.isCropping) try {
    rR(l.selectionElement, u, l, o.selectionColor);
  } catch (v) {
    console.error(v);
  }
  if (l.editingTextElement && J(l.editingTextElement)) {
    let v = i.get(l.editingTextElement.id);
    v && !v.autoResize && BY(v, u, l, o.selectionColor);
  }
  l.isBindingEnabled && l.suggestedBindings.filter((v) => v != null).forEach((v) => {
    OY(u, l, v, t);
  }), l.frameToHighlight && $Y(u, l, l.frameToHighlight, t), l.elementsToHighlight && zY(u, l, l.elementsToHighlight);
  let h = a.some((v) => fe(v));
  if (a.length === 1 && ((m = l.editingLinearElement) == null ? void 0 : m.elementId) === a[0].id && Yh(u, l, a[0], t), te(a[0]) && l.selectedLinearElement && l.selectedLinearElement.segmentMidPointHoveredCoords ? AY(u, l) : l.selectedLinearElement && l.selectedLinearElement.hoverPointIndex >= 0 && !(te(a[0]) && l.selectedLinearElement.hoverPointIndex > 0 && l.selectedLinearElement.hoverPointIndex < a[0].points.length - 1) && DY(u, l, t), !l.multiElement && !l.editingLinearElement) {
    let v = w3(a, l), y = a.length === 1 && me(a[0]);
    y && ((g = l.selectedLinearElement) == null ? void 0 : g.elementId) === a[0].id && !a[0].locked && Yh(u, l, a[0], t);
    let w = o.selectionColor || Yt.black;
    if (v) {
      let x = he(a), S = [];
      for (let M of t.values()) {
        let I = [], T = o.remoteSelectedElementIds.get(M.id);
        if (y && te(M) && (M.startBinding || M.endBinding) || (x.has(M.id) && !y7(l, M) && I.push(w), T && I.push(...T.map((A) => Af(A, l.collaborators.get(A))))), I.length) {
          let [A, D, R, O, $, F] = ge(M, t, !0);
          S.push({ angle: M.angle, x1: A, y1: D, x2: R, y2: O, selectionColors: I, dashed: !!T, cx: $, cy: F, activeEmbeddable: ((b = l.activeEmbeddable) == null ? void 0 : b.element) === M && l.activeEmbeddable.state === "active", padding: M.id === l.croppingElementId || Oe(M) ? 0 : void 0 });
        }
      }
      let E = (M) => {
        let I = ot(t, M), [T, A, D, R] = We(I);
        S.push({ angle: 0, x1: T, x2: D, y1: A, y2: R, selectionColors: [Yt.black], dashed: !0, cx: T + (D - T) / 2, cy: A + (R - A) / 2, activeEmbeddable: !1 });
      };
      for (let M of Kr(l)) E(M);
      l.editingGroupId && E(l.editingGroupId), S.forEach((M) => oy(u, l, M));
    }
    if (u.save(), u.translate(l.scrollX, l.scrollY), a.length === 1) {
      u.fillStyle = Yt.white;
      let x = y3(a[0], l.zoom, t, "mouse", ks(c));
      if (!l.viewModeEnabled && v && !J(l.editingTextElement) && !l.croppingElementId && I5(u, o, l, x, a[0].angle), l.croppingElementId && !l.isCropping) {
        let S = t.get(l.croppingElementId);
        S && Oe(S) && FY(u, o, l, S, t);
      }
    } else if (a.length > 1 && !l.isRotating) {
      let x = il * 2 / l.zoom.value;
      u.fillStyle = Yt.white;
      let [S, E, M, I] = We(a), T = u.getLineDash();
      u.setLineDash([2 / l.zoom.value]);
      let A = u.lineWidth;
      u.lineWidth = 1 / l.zoom.value, u.strokeStyle = w, kc(u, S - x, E - x, M - S + x * 2, I - E + x * 2, (S + M) / 2, (E + I) / 2, 0), u.lineWidth = A, u.setLineDash(T);
      let D = Hp([S, E, M, I, (S + M) / 2, (E + I) / 2], 0, l.zoom, "mouse", h ? { ...ks(c), rotation: !0 } : ks(c));
      a.some((R) => !R.locked) && I5(u, o, l, D, 0);
    }
    u.restore();
  }
  l.searchMatches.forEach(({ id: v, focus: y, matchedLines: w }) => {
    let x = t.get(v);
    if (x && J(x)) {
      let [S, E, , , M, I] = ge(x, t, !0);
      u.save(), l.theme === Ie.LIGHT ? y ? u.fillStyle = "rgba(255, 124, 0, 0.4)" : u.fillStyle = "rgba(255, 226, 0, 0.4)" : y ? u.fillStyle = "rgba(229, 82, 0, 0.4)" : u.fillStyle = "rgba(99, 52, 0, 0.4)", u.translate(l.scrollX, l.scrollY), u.translate(M, I), u.rotate(x.angle), w.forEach((T) => {
        u.fillRect(S + T.offsetX - M, E + T.offsetY - I, T.width, T.height);
      }), u.restore();
    }
  }), CY(u, l), u.restore(), CW({ context: u, renderConfig: o, appState: l, normalizedWidth: d, normalizedHeight: s });
  let U;
  return o.renderScrollbars && (U = RG(n, d, s, l), u.save(), u.fillStyle = LG, u.strokeStyle = "rgba(255,255,255,0.8)", [U.horizontal, U.vertical].forEach((v) => {
    v && B9(u, v.x, v.y, v.width, v.height, lr / 2);
  }), u.restore()), { scrollBars: U, atLeastOneVisibleElement: n.length > 0, elementsMap: t };
}, cy = Vu((e) => {
  var n;
  let t = sy(e);
  (n = e.callback) == null || n.call(e, t);
}, { trailing: !0 }), HY = (e, t) => {
  if (t) {
    cy(e);
    return;
  }
  let n = sy(e);
  return e.callback(n), n;
}, XY = (e) => {
  let t = re(!1);
  return Q(() => {
    var c;
    if (!t.current) {
      t.current = !0;
      return;
    }
    let n = /* @__PURE__ */ new Map(), a = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), r = /* @__PURE__ */ new Map(), l = /* @__PURE__ */ new Map();
    e.appState.collaborators.forEach((d, s) => {
      if (d.selectedElementIds) for (let u of Object.keys(d.selectedElementIds)) i.has(u) || i.set(u, []), i.get(u).push(s);
      !d.pointer || d.pointer.renderCursor === !1 || (d.username && r.set(s, d.username), d.userState && l.set(s, d.userState), a.set(s, fa({ sceneX: d.pointer.x, sceneY: d.pointer.y }, e.appState)), n.set(s, d.button));
    });
    let o = ((c = e.containerRef) == null ? void 0 : c.current) && getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection") || "#6965db";
    HY({ canvas: e.canvas, elementsMap: e.elementsMap, visibleElements: e.visibleElements, selectedElements: e.selectedElements, allElementsMap: e.allElementsMap, scale: window.devicePixelRatio, appState: e.appState, renderConfig: { remotePointerViewportCoords: a, remotePointerButton: n, remoteSelectedElementIds: i, remotePointerUsernames: r, remotePointerUserStates: l, selectionColor: o, renderScrollbars: !1 }, device: e.device, callback: e.renderInteractiveSceneCallback }, TU());
  }), p("canvas", { className: "excalidraw__canvas interactive", style: { width: e.appState.width, height: e.appState.height, cursor: e.appState.viewModeEnabled ? Ye.GRAB : Ye.AUTO }, width: e.appState.width * e.scale, height: e.appState.height * e.scale, ref: e.handleCanvasRef, onContextMenu: e.onContextMenu, onPointerMove: e.onPointerMove, onPointerUp: e.onPointerUp, onPointerCancel: e.onPointerCancel, onTouchMove: e.onTouchMove, onPointerDown: e.onPointerDown, onDoubleClick: e.appState.viewModeEnabled ? void 0 : e.onDoubleClick, children: C("labels.drawingCanvas") });
}, T5 = (e) => ({ zoom: e.zoom, scrollX: e.scrollX, scrollY: e.scrollY, width: e.width, height: e.height, viewModeEnabled: e.viewModeEnabled, openDialog: e.openDialog, editingGroupId: e.editingGroupId, editingLinearElement: e.editingLinearElement, selectedElementIds: e.selectedElementIds, frameToHighlight: e.frameToHighlight, offsetLeft: e.offsetLeft, offsetTop: e.offsetTop, theme: e.theme, pendingImageElementId: e.pendingImageElementId, selectionElement: e.selectionElement, selectedGroupIds: e.selectedGroupIds, selectedLinearElement: e.selectedLinearElement, multiElement: e.multiElement, isBindingEnabled: e.isBindingEnabled, suggestedBindings: e.suggestedBindings, isRotating: e.isRotating, elementsToHighlight: e.elementsToHighlight, collaborators: e.collaborators, activeEmbeddable: e.activeEmbeddable, snapLines: e.snapLines, zenModeEnabled: e.zenModeEnabled, editingTextElement: e.editingTextElement, isCropping: e.isCropping, croppingElementId: e.croppingElementId, searchMatches: e.searchMatches }), WY = (e, t) => e.selectionNonce !== t.selectionNonce || e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements || e.selectedElements !== t.selectedElements ? !1 : en(T5(e.appState), T5(t.appState)), VY = Z.memo(XY, WY), GY = (e) => {
  let t = re(null), n = re(!1);
  return Q(() => {
    let a = t.current;
    if (!a) return;
    let i = e.canvas;
    n.current || (n.current = !0, a.replaceChildren(i), i.classList.add("excalidraw__canvas", "static"));
    let r = `${e.appState.width}px`, l = `${e.appState.height}px`;
    i.style.width !== r && (i.style.width = r), i.style.height !== l && (i.style.height = l);
    let o = e.appState.width * e.scale, c = e.appState.height * e.scale;
    i.width !== o && (i.width = o), i.height !== c && (i.height = c), e3({ canvas: i, rc: e.rc, scale: e.scale, elementsMap: e.elementsMap, allElementsMap: e.allElementsMap, visibleElements: e.visibleElements, appState: e.appState, renderConfig: e.renderConfig }, TU());
  }), p("div", { className: "excalidraw__canvas-wrapper", ref: t });
}, _5 = (e) => ({ zoom: e.zoom, scrollX: e.scrollX, scrollY: e.scrollY, width: e.width, height: e.height, viewModeEnabled: e.viewModeEnabled, openDialog: e.openDialog, hoveredElementIds: e.hoveredElementIds, offsetLeft: e.offsetLeft, offsetTop: e.offsetTop, theme: e.theme, pendingImageElementId: e.pendingImageElementId, shouldCacheIgnoreZoom: e.shouldCacheIgnoreZoom, viewBackgroundColor: e.viewBackgroundColor, exportScale: e.exportScale, selectedElementsAreBeingDragged: e.selectedElementsAreBeingDragged, gridSize: e.gridSize, gridStep: e.gridStep, frameRendering: e.frameRendering, selectedElementIds: e.selectedElementIds, frameToHighlight: e.frameToHighlight, editingGroupId: e.editingGroupId, currentHoveredFontFamily: e.currentHoveredFontFamily, croppingElementId: e.croppingElementId }), jY = (e, t) => e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements ? !1 : en(_5(e.appState), _5(t.appState)) && en(e.renderConfig, t.renderConfig), YY = Z.memo(GY, jY), A5 = class {
  constructor(e) {
    L(this, "scene"), L(this, "getRenderableElements", (() => {
      let t = ({ elementsMap: a, zoom: i, offsetLeft: r, offsetTop: l, scrollX: o, scrollY: c, height: d, width: s }) => {
        let u = [];
        for (let f of a.values()) vu(f, s, d, { zoom: i, offsetLeft: r, offsetTop: l, scrollX: o, scrollY: c }, a) && u.push(f);
        return u;
      }, n = ({ elements: a, editingTextElement: i, newElementId: r, pendingImageElementId: l }) => {
        let o = Qn(/* @__PURE__ */ new Map());
        for (let c of a) Oe(c) && l === c.id || r !== c.id && (!i || i.type !== "text" || c.id !== i.id) && o.set(c.id, c);
        return o;
      };
      return OM(({ zoom: a, offsetLeft: i, offsetTop: r, scrollX: l, scrollY: o, height: c, width: d, editingTextElement: s, newElementId: u, pendingImageElementId: f, sceneNonce: h }) => {
        let U = this.scene.getNonDeletedElements(), m = n({ elements: U, editingTextElement: s, newElementId: u, pendingImageElementId: f }), g = t({ elementsMap: m, zoom: a, offsetLeft: i, offsetTop: r, scrollX: l, scrollY: o, height: c, width: d });
        return { elementsMap: m, visibleElements: g };
      });
    })()), this.scene = e;
  }
  destroy() {
    cy.cancel(), Q7.cancel(), this.getRenderableElements.clear();
  }
}, ZY = ({ trails: e }) => {
  let t = re(null);
  return Q(() => {
    if (t.current) for (let n of e) n.start(t.current);
    return () => {
      for (let n of e) n.stop();
    };
  }, e), p("div", { className: "SVGLayer", children: p("svg", { ref: t }) });
}, KY = 5, qY = (e, t, n) => {
  let [a, i] = ge(e, n), { x: r, y: l } = fa({ sceneX: a + e.width, sceneY: i }, t), o = r - t.offsetLeft + 10, c = l - t.offsetTop;
  return { x: o, y: c };
}, D5 = ({ children: e, element: t, elementsMap: n }) => {
  let a = Cc();
  if (a.contextMenu || a.newElement || a.resizingElement || a.isRotating || a.openMenu || a.viewModeEnabled) return null;
  let { x: i, y: r } = qY(t, a, n);
  return p("div", { className: "excalidraw-canvas-buttons", style: { top: `${r}px`, left: `${i}px`, padding: KY }, children: e });
}, JY = "small", Zh = (e) => _("label", { className: ae("ToolIcon ToolIcon__MagicButton", `ToolIcon_size_${JY}`, { "is-mobile": e.isMobile }), title: `${e.title}`, children: [p("input", { className: "ToolIcon_type_checkbox", type: "checkbox", name: e.name, onChange: e.onChange, checked: e.checked, "aria-label": e.title }), p("div", { className: "ToolIcon__icon", children: e.icon })] }), QY = ({ height: e, width: t, userToFollow: n, onDisconnect: a }) => p("div", { className: "follow-mode", style: { width: t, height: e }, children: _("div", { className: "follow-mode__badge", children: [_("div", { className: "follow-mode__badge__label", children: ["Following", " ", p("span", { className: "follow-mode__badge__username", title: n.username, children: n.username })] }), p("button", { type: "button", onClick: a, className: "follow-mode__disconnect-btn", children: _o })] }) }), eZ = QY, tZ = class {
  constructor() {
    L(this, "targets", /* @__PURE__ */ new WeakMap()), L(this, "rafIds", /* @__PURE__ */ new WeakMap());
  }
  register(e, t) {
    this.targets.set(e, { callback: t, stopped: !0 });
  }
  start(e) {
    let t = this.targets.get(e);
    t && (this.rafIds.has(e) || (this.targets.set(e, { ...t, stopped: !1 }), this.scheduleFrame(e)));
  }
  stop(e) {
    let t = this.targets.get(e);
    t && !t.stopped && this.targets.set(e, { ...t, stopped: !0 }), this.cancelFrame(e);
  }
  constructFrame(e) {
    return (t) => {
      let n = this.targets.get(e);
      if (!n) return;
      let a = this.onFrame(n, t);
      !n.stopped && !a ? this.scheduleFrame(e) : this.cancelFrame(e);
    };
  }
  scheduleFrame(e) {
    let t = requestAnimationFrame(this.constructFrame(e));
    this.rafIds.set(e, t);
  }
  cancelFrame(e) {
    if (this.rafIds.has(e)) {
      let t = this.rafIds.get(e);
      cancelAnimationFrame(t);
    }
    this.rafIds.delete(e);
  }
  onFrame(e, t) {
    return e.callback(t) ?? !1;
  }
}, S0 = class {
  constructor(e, t, n) {
    this.animationFrameHandler = e, this.app = t, this.options = n, L(this, "currentTrail"), L(this, "pastTrails", []), L(this, "container"), L(this, "trailElement"), this.animationFrameHandler.register(this, this.onFrame.bind(this)), this.trailElement = document.createElementNS(Re, "path");
  }
  get hasCurrentTrail() {
    return !!this.currentTrail;
  }
  hasLastPoint(e, t) {
    if (this.currentTrail) {
      let n = this.currentTrail.originalPoints.length;
      return this.currentTrail.originalPoints[n - 1][0] === e && this.currentTrail.originalPoints[n - 1][1] === t;
    }
    return !1;
  }
  start(e) {
    e && (this.container = e), this.trailElement.parentNode !== this.container && this.container && this.container.appendChild(this.trailElement), this.animationFrameHandler.start(this);
  }
  stop() {
    var e;
    this.animationFrameHandler.stop(this), this.trailElement.parentNode === this.container && ((e = this.container) == null || e.removeChild(this.trailElement));
  }
  startPath(e, t) {
    this.currentTrail = new Cu(this.options), this.currentTrail.addPoint([e, t, performance.now()]), this.update();
  }
  addPointToPath(e, t) {
    this.currentTrail && (this.currentTrail.addPoint([e, t, performance.now()]), this.update());
  }
  endPath() {
    this.currentTrail && (this.currentTrail.close(), this.currentTrail.options.keepHead = !1, this.pastTrails.push(this.currentTrail), this.currentTrail = void 0, this.update());
  }
  update() {
    this.start();
  }
  onFrame() {
    let e = [];
    for (let n of this.pastTrails) e.push(this.drawTrail(n, this.app.state));
    if (this.currentTrail) {
      let n = this.drawTrail(this.currentTrail, this.app.state);
      e.push(n);
    }
    this.pastTrails = this.pastTrails.filter((n) => n.getStrokeOutline().length !== 0), e.length === 0 && this.stop();
    let t = e.join(" ").trim();
    this.trailElement.setAttribute("d", t), this.trailElement.setAttribute("fill", (this.options.fill ?? (() => "black"))(this));
  }
  drawTrail(e, t) {
    let n = e.getStrokeOutline(e.options.size / t.zoom.value).map(([a, i]) => {
      let r = fa({ sceneX: a, sceneY: i }, t);
      return [r.x, r.y];
    });
    return $M(n, !0);
  }
}, nZ = class {
  constructor(e, t) {
    this.animationFrameHandler = e, this.app = t, L(this, "localTrail"), L(this, "collabTrails", /* @__PURE__ */ new Map()), L(this, "container"), this.animationFrameHandler.register(this, this.onFrame.bind(this)), this.localTrail = new S0(e, t, { ...this.getTrailOptions(), fill: () => zk });
  }
  getTrailOptions() {
    return { simplify: 0, streamline: 0.4, sizeMapping: (e) => {
      let t = Math.max(0, 1 - (performance.now() - e.pressure) / 1e3), n = (50 - Math.min(50, e.totalLength - e.currentIndex)) / 50;
      return Math.min(Yr(n), Yr(t));
    } };
  }
  startPath(e, t) {
    this.localTrail.startPath(e, t);
  }
  addPointToPath(e, t) {
    this.localTrail.addPointToPath(e, t);
  }
  endPath() {
    this.localTrail.endPath();
  }
  start(e) {
    this.container = e, this.animationFrameHandler.start(this), this.localTrail.start(e);
  }
  stop() {
    this.animationFrameHandler.stop(this), this.localTrail.stop();
  }
  onFrame() {
    this.updateCollabTrails();
  }
  updateCollabTrails() {
    if (!(!this.container || this.app.state.collaborators.size === 0)) {
      for (let [e, t] of this.app.state.collaborators.entries()) {
        let n;
        this.collabTrails.has(e) ? n = this.collabTrails.get(e) : (n = new S0(this.animationFrameHandler, this.app, { ...this.getTrailOptions(), fill: () => {
          var a;
          return ((a = t.pointer) == null ? void 0 : a.laserColor) || Af(e, t);
        } }), n.start(this.container), this.collabTrails.set(e, n)), t.pointer && t.pointer.tool === "laser" && (t.button === "down" && !n.hasCurrentTrail && n.startPath(t.pointer.x, t.pointer.y), t.button === "down" && n.hasCurrentTrail && !n.hasLastPoint(t.pointer.x, t.pointer.y) && n.addPointToPath(t.pointer.x, t.pointer.y), t.button === "up" && n.hasCurrentTrail && (n.addPointToPath(t.pointer.x, t.pointer.y), n.endPath()));
      }
      for (let e of this.collabTrails.keys()) this.app.state.collaborators.has(e) || (this.collabTrails.get(e).stop(), this.collabTrails.delete(e));
    }
  }
}, aZ = (e, t, n, a, i, r) => {
  let { zoom: l } = a, o = 180 * n / Math.PI, c = e * (l.value - 1) / 2, d = t * (l.value - 1) / 2;
  return e > i && l.value !== 1 && (c = i * (l.value - 1) / 2), t > r && l.value !== 1 && (d = r * (l.value - 1) / 2), `translate(${c}px, ${d}px) scale(${l.value}) rotate(${o}deg)`;
}, iZ = ({ id: e, onChange: t, onSubmit: n, getViewportCoords: a, element: i, canvas: r, excalidrawContainer: l, app: o, autoSelect: c = !0 }) => {
  let d = ($, F) => {
    if (!F.style.fontFamily || !F.style.fontSize) return !1;
    let N = F.style.fontFamily.replace(/"/g, "");
    return lo({ fontFamily: $.fontFamily }) !== N || `${$.fontSize}px` !== F.style.fontSize;
  }, s = () => {
    var Y;
    let $ = o.state, F = (Y = Ri.getScene(i)) == null ? void 0 : Y.getElement(e);
    if (!F) return;
    let { textAlign: N, verticalAlign: j } = F, z = o.scene.getNonDeletedElementsMap();
    if (F && J(F)) {
      let ie = F.x, pe = F.y, ue = Zt(F, o.scene.getNonDeletedElementsMap()), Ve = F.width, Ge = F.height, je = F.width, Fe = F.height;
      if (ue && F.containerId) {
        if (xe(ue)) {
          let Ta = ee.getBoundTextElementPosition(ue, F, z);
          ie = Ta.x, pe = Ta.y;
        }
        let El = d(F, u), Cr;
        if (El ? Cr = uu(ue.id, ue.height) : (Cr = mo[ue.id], Cr || (Cr = uu(ue.id, ue.height))), je = Di(ue, F), Fe = cf(ue, F), !xe(ue) && Ge > Fe) {
          let Ta = fl(Ge, ue.type);
          G(ue, { height: Ta });
          return;
        } else if (!xe(ue) && ue.height > Cr.height && Ge < Fe) {
          let Ta = fl(Ge, ue.type);
          G(ue, { height: Ta });
        } else {
          let { y: Ta } = sf(ue, F, z);
          pe = Ta;
        }
      }
      let [At, qt] = a(ie, pe), Le = u.selectionStart, Be = u.selectionEnd, xt = u.value.length;
      if (Le === Be && Be !== xt) {
        let El = xt - Be;
        u.selectionStart = u.value.length - El, u.selectionEnd = u.value.length - El;
      }
      ue ? Ve += 0.5 : (je = ($.width - 8 - At) / $.zoom.value, Ve = Math.min(Ve, je)), Ge *= 1.05;
      let Mr = Je(F), No = ($.height - qt) / $.zoom.value;
      Object.assign(u.style, { font: Mr, lineHeight: F.lineHeight, width: `${Ve}px`, height: `${Ge}px`, left: `${At}px`, top: `${qt}px`, transform: aZ(Ve, Ge, gP(F, ue), $, je, No), textAlign: N, verticalAlign: j, color: F.strokeColor, opacity: F.opacity / 100, filter: "var(--theme-filter)", maxHeight: `${No}px` }), u.scrollTop = 0, Ii() && (u.style.fontFamily = lo(F)), G(F, { x: ie, y: pe });
    }
  }, u = document.createElement("textarea");
  u.dir = "auto", u.tabIndex = 0, u.dataset.type = "wysiwyg", u.wrap = "off", u.classList.add("excalidraw-wysiwyg");
  let f = "pre", h = "normal";
  (st(i) || !i.autoResize) && (f = "pre-wrap", h = "break-word"), Object.assign(u.style, { position: "absolute", display: "inline-block", minHeight: "1em", backfaceVisibility: "hidden", margin: 0, padding: 0, border: 0, outline: 0, resize: "none", background: "transparent", overflow: "hidden", zIndex: "var(--zIndex-wysiwyg)", wordBreak: h, whiteSpace: f, overflowWrap: "break-word", boxSizing: "content-box" }), u.value = i.originalText, s(), t && (u.onpaste = async ($) => {
    let F = await c3($, !0);
    if (!F.text) return;
    let N = co(F.text);
    if (!N) return;
    let j = Zt(i, o.scene.getNonDeletedElementsMap()), z = Je({ fontSize: o.state.currentItemFontSize, fontFamily: o.state.currentItemFontFamily });
    if (j) {
      let Y = ye(j, o.scene.getNonDeletedElementsMap()), ie = yl(`${u.value}${N}`, z, Di(j, Y)), pe = j0(ie, z);
      u.style.width = `${pe}px`;
    }
  }, u.oninput = () => {
    let $ = co(u.value);
    if (u.value !== $) {
      let F = u.selectionStart;
      u.value = $, u.selectionStart = F, u.selectionEnd = F;
    }
    t(u.value);
  }), u.onkeydown = ($) => {
    if (!$.shiftKey && D6.keyTest($)) $.preventDefault(), o.actionManager.executeAction(D6), s();
    else if (!$.shiftKey && L6.keyTest($)) $.preventDefault(), o.actionManager.executeAction(L6), s();
    else if (!$.shiftKey && R6.keyTest($)) $.preventDefault(), o.actionManager.executeAction(R6), s();
    else if (T6.keyTest($)) o.actionManager.executeAction(T6);
    else if (_6.keyTest($)) o.actionManager.executeAction(_6);
    else if ($.key === P.ESCAPE) $.preventDefault(), x = !0, S();
    else if ($.key === P.ENTER && $[P.CTRL_OR_CMD]) {
      if ($.preventDefault(), $.isComposing || $.keyCode === 229) return;
      x = !0, S();
    } else if ($.key === P.TAB || $[P.CTRL_OR_CMD] && ($.code === De.BRACKET_LEFT || $.code === De.BRACKET_RIGHT)) {
      if ($.preventDefault(), $.isComposing) return;
      $.shiftKey || $.code === De.BRACKET_LEFT ? v() : b(), u.dispatchEvent(new Event("input"));
    }
  };
  let U = 4, m = " ".repeat(U), g = new RegExp(`^ {1,${U}}`), b = () => {
    let { selectionStart: $, selectionEnd: F } = u, N = y(), j = u.value;
    N.forEach((z) => {
      let Y = j.slice(0, z), ie = j.slice(z);
      j = `${Y}${m}${ie}`;
    }), u.value = j, u.selectionStart = $ + U, u.selectionEnd = F + U * N.length;
  }, v = () => {
    let { selectionStart: $, selectionEnd: F } = u, N = y(), j = [], z = u.value;
    N.forEach((Y) => {
      let ie = z.slice(Y, Y + U).match(g);
      if (ie) {
        let pe = z.slice(0, Y), ue = z.slice(Y + ie[0].length);
        z = `${pe}${ue}`, j.push(Y);
      }
    }), u.value = z, j.length && ($ > j[j.length - 1] ? u.selectionStart = Math.max($ - U, j[j.length - 1]) : u.selectionStart = $, u.selectionEnd = Math.max(u.selectionStart, F - U * j.length));
  }, y = () => {
    let { selectionStart: $, selectionEnd: F, value: N } = u, j = N.slice(0, $).match(/[^\n]*$/)[0].length;
    return $ = $ - j, N.slice($, F).split(`
`).reduce((z, Y, ie, pe) => z.concat(ie ? z[ie - 1] + pe[ie - 1].length + 1 : $), []).reverse();
  }, w = ($) => {
    $.target instanceof HTMLCanvasElement && ($.preventDefault(), $.stopPropagation());
  }, x = !1, S = () => {
    var N, j;
    if (R) return;
    R = !0, E();
    let $ = (N = Ri.getScene(i)) == null ? void 0 : N.getElement(i.id);
    if (!$) return;
    let F = Zt($, o.scene.getNonDeletedElementsMap());
    if (F) {
      if (u.value.trim()) {
        let z = Ai(F);
        !z || z !== i.id ? G(F, { boundElements: (F.boundElements || []).concat({ type: "text", id: i.id }) }) : xe(F) && pf(F);
      } else G(F, { boundElements: (j = F.boundElements) == null ? void 0 : j.filter((z) => !J(z)) });
      Un($, F, o.scene.getNonDeletedElementsMap());
    }
    n({ viaKeyboard: x, nextOriginalText: u.value });
  }, E = () => {
    u.onblur = null, u.oninput = null, u.onkeydown = null, O && O.disconnect(), window.removeEventListener("resize", s), window.removeEventListener("wheel", w, !0), window.removeEventListener("pointerdown", T), window.removeEventListener("pointerup", M), window.removeEventListener("blur", S), window.removeEventListener("beforeunload", S), A(), D(), u.remove();
  }, M = ($) => {
    window.removeEventListener("pointerup", M);
    let F = $ == null ? void 0 : $.target, N = F instanceof HTMLElement && F.classList.contains("properties-trigger");
    setTimeout(() => {
      u.onblur = S, N || u.focus();
    });
  }, I = () => {
    u.onblur = null, window.addEventListener("pointerup", M), window.addEventListener("blur", S);
  }, T = ($) => {
    let F = $ == null ? void 0 : $.target;
    if ($.button === Ki.WHEEL) {
      F instanceof HTMLTextAreaElement && ($.preventDefault(), o.handleCanvasPanUsingWheelOrSpaceDrag($)), I();
      return;
    }
    let N = F instanceof HTMLElement && F.classList.contains("properties-trigger");
    ($.target instanceof HTMLElement || $.target instanceof SVGElement) && $.target.closest(`.${ao.SHAPE_ACTIONS_MENU}, .${ao.ZOOM_ACTIONS}`) && !Or($.target) || N ? I() : $.target instanceof HTMLCanvasElement && !Ii() && requestAnimationFrame(() => {
      S();
    });
  }, A = o.scene.onUpdate(() => {
    var $;
    s(), ($ = document.activeElement) != null && $.closest(".properties-content") || u.focus();
  }), D = o.onScrollChangeEmitter.on(() => {
    s();
  }), R = !1;
  c && u.select(), M();
  let O = null;
  r && "ResizeObserver" in window ? (O = new window.ResizeObserver(() => {
    s();
  }), O.observe(r)) : window.addEventListener("resize", s), u.onpointerdown = ($) => $.stopPropagation(), requestAnimationFrame(() => {
    window.addEventListener("pointerdown", T, { capture: !0 });
  }), window.addEventListener("beforeunload", S), l == null || l.querySelector(".excalidraw-textEditorContainer").appendChild(u);
}, rZ = K({ name: "autoResize", label: "labels.autoResize", icon: null, trackEvent: { category: "element" }, predicate: (e, t, n, a) => {
  let i = Ee(e, t);
  return i.length === 1 && J(i[0]) && !i[0].autoResize;
}, perform: (e, t, n, a) => {
  let i = Ee(e, t);
  return { appState: t, elements: e.map((r) => {
    if (r.id === i[0].id && J(r)) {
      let l = dn(r.originalText, Je(r), r.lineHeight);
      return ve(r, { autoResize: !0, width: l.width, height: l.height, text: r.originalText });
    }
    return r;
  }), captureUpdate: W.IMMEDIATELY };
} }), lZ = (e) => {
  let t = ["flowchart", "graph", "sequenceDiagram", "classDiagram", "stateDiagram", "stateDiagram-v2", "erDiagram", "journey", "gantt", "pie", "quadrantChart", "requirementDiagram", "gitGraph", "C4Context", "mindmap", "timeline", "zenuml", "sankey", "xychart", "block"];
  return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map((n) => `\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim());
}, dy = ({ canvas: e, rc: t, newElement: n, elementsMap: a, allElementsMap: i, scale: r, appState: l, renderConfig: o }) => {
  if (e) {
    let [c, d] = gp(e, r), s = bp({ canvas: e, scale: r, normalizedWidth: c, normalizedHeight: d });
    s.save(), s.scale(l.zoom.value, l.zoom.value), n && n.type !== "selection" ? Nr(n, a, i, t, s, o, l) : s.clearRect(0, 0, c, d);
  }
}, oZ = Vu((e) => {
  dy(e);
}, { trailing: !0 }), sZ = (e, t) => {
  if (t) {
    oZ(e);
    return;
  }
  dy(e);
}, cZ = (e) => {
  let t = re(null);
  return Q(() => {
    t.current && sZ({ canvas: t.current, scale: e.scale, newElement: e.appState.newElement, elementsMap: e.elementsMap, allElementsMap: e.allElementsMap, rc: e.rc, renderConfig: e.renderConfig, appState: e.appState }, TU());
  }), p("canvas", { className: "excalidraw__canvas", style: { width: e.appState.width, height: e.appState.height }, width: e.appState.width * e.scale, height: e.appState.height * e.scale, ref: t });
}, dZ = cZ, uy = Z.createContext(null), fy = Z.createContext(null), hy = { viewport: { isMobile: !1, isLandscape: !1 }, editor: { isMobile: !1, canFitSidebar: !1 }, isTouchScreen: !1 }, _U = Z.createContext(hy);
_U.displayName = "DeviceContext";
var AU = Z.createContext({ container: null, id: null });
AU.displayName = "ExcalidrawContainerContext";
var DU = Z.createContext([]);
DU.displayName = "ExcalidrawElementsContext";
var LU = Z.createContext({ ...ei(), width: 0, height: 0, offsetLeft: 0, offsetTop: 0 });
LU.displayName = "ExcalidrawAppStateContext";
var RU = Z.createContext(() => {
  console.warn("Uninitialized ExcalidrawSetAppStateContext context!");
});
RU.displayName = "ExcalidrawSetAppStateContext";
var PU = Z.createContext(null);
PU.displayName = "ExcalidrawActionManagerContext";
var ci = () => un(uy), Mc = () => un(fy), Ht = () => un(_U), di = () => un(AU), Lf = () => un(DU), Cc = () => un(LU), Xt = () => un(RU), An = () => un(PU), Jo = !1, Kh = 0, _r = !1, Qo = !1, qh = !1, Jh = { horizontal: null, vertical: null }, Yi = 0, es = !1, Qh = /* @__PURE__ */ new Map(), od = !1, L5 = 0, R5 = !1, Ar = null, Pe = { pointers: /* @__PURE__ */ new Map(), lastCenter: null, initialDistance: null, initialScale: null }, uZ = class py extends Z.Component {
  constructor(t) {
    super(t), L(this, "canvas"), L(this, "interactiveCanvas", null), L(this, "rc"), L(this, "unmounted", !1), L(this, "actionManager"), L(this, "device", hy), L(this, "excalidrawContainerRef", Z.createRef()), L(this, "scene"), L(this, "fonts"), L(this, "renderer"), L(this, "visibleElements"), L(this, "resizeObserver"), L(this, "nearestScrollableContainer"), L(this, "library"), L(this, "libraryItemsFromStorage"), L(this, "id"), L(this, "store"), L(this, "history"), L(this, "excalidrawContainerValue"), L(this, "files", {}), L(this, "imageCache", /* @__PURE__ */ new Map()), L(this, "iFrameRefs", /* @__PURE__ */ new Map()), L(this, "embedsValidationStatus", /* @__PURE__ */ new Map()), L(this, "initializedEmbeds", /* @__PURE__ */ new Set()), L(this, "elementsPendingErasure", /* @__PURE__ */ new Set()), L(this, "flowChartCreator", new TG()), L(this, "flowChartNavigator", new IG()), L(this, "hitLinkElement"), L(this, "lastPointerDownEvent", null), L(this, "lastPointerUpEvent", null), L(this, "lastPointerMoveEvent", null), L(this, "lastPointerMoveCoords", null), L(this, "lastViewportPosition", { x: 0, y: 0 }), L(this, "animationFrameHandler", new tZ()), L(this, "laserTrails", new nZ(this.animationFrameHandler, this)), L(this, "eraserTrail", new S0(this.animationFrameHandler, this, { streamline: 0.2, size: 5, keepHead: !0, sizeMapping: (s) => {
      let u = Math.max(0, 1 - (performance.now() - s.pressure) / 200), f = (10 - Math.min(10, s.totalLength - s.currentIndex)) / 10;
      return Math.min(Yr(f), Yr(u));
    }, fill: () => this.state.theme === Ie.LIGHT ? "rgba(0, 0, 0, 0.2)" : "rgba(255, 255, 255, 0.2)" })), L(this, "onChangeEmitter", new Ba()), L(this, "onPointerDownEmitter", new Ba()), L(this, "onPointerUpEmitter", new Ba()), L(this, "onUserFollowEmitter", new Ba()), L(this, "onScrollChangeEmitter", new Ba()), L(this, "missingPointerEventCleanupEmitter", new Ba()), L(this, "onRemoveEventListenersEmitter", new Ba()), L(this, "getEffectiveGridSize", () => qs(this) ? this.state.gridSize : null), L(this, "updateEmbedValidationStatus", (s, u) => {
      this.embedsValidationStatus.set(s.id, u), mt.delete(s);
    }), L(this, "updateEmbeddables", () => {
      let s = /* @__PURE__ */ new Set(), u = !1;
      this.scene.getNonDeletedElements().filter((f) => {
        if (xn(f)) {
          if (s.add(f.id), !this.embedsValidationStatus.has(f.id)) {
            u = !0;
            let h = kd(f.link, this.props.validateEmbeddable);
            this.updateEmbedValidationStatus(f, h);
          }
        } else er(f) && s.add(f.id);
        return !1;
      }), u && this.scene.triggerUpdate(), this.iFrameRefs.forEach((f, h) => {
        s.has(h) || this.iFrameRefs.delete(h);
      });
    }), L(this, "getFrameNameDOMId", (s) => `${this.id}-frame-name-${s.id}`), L(this, "frameNameBoundsCache", { get: (s) => {
      let u = this.frameNameBoundsCache._cache.get(s.id);
      if (!u || u.zoom !== this.state.zoom.value || u.versionNonce !== s.versionNonce) {
        let f = document.getElementById(this.getFrameNameDOMId(s));
        if (f) {
          let h = f.getBoundingClientRect(), U = it({ clientX: h.x, clientY: h.y }, this.state), m = it({ clientX: h.right, clientY: h.bottom }, this.state);
          return u = { x: U.x, y: U.y, width: m.x - U.x, height: m.y - U.y, angle: 0, zoom: this.state.zoom.value, versionNonce: s.versionNonce }, this.frameNameBoundsCache._cache.set(s.id, u), u;
        }
        return null;
      }
      return u;
    }, _cache: /* @__PURE__ */ new Map() }), L(this, "resetEditingFrame", (s) => {
      var u;
      s && G(s, { name: ((u = s.name) == null ? void 0 : u.trim()) || null }), this.setState({ editingFrame: null });
    }), L(this, "renderFrameNames", () => {
      if (!this.state.frameRendering.enabled || !this.state.frameRendering.name) return this.state.editingFrame && this.resetEditingFrame(null), null;
      let s = this.state.theme === Ie.DARK;
      return this.scene.getNonDeletedFramesLikes().map((u) => {
        if (!vu(u, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap())) return this.state.editingFrame === u.id && this.resetEditingFrame(u), null;
        let { x: f, y: h } = fa({ sceneX: u.x, sceneY: u.y }, this.state), U = 6, m, g = p3(u);
        if (u.id === this.state.editingFrame) {
          let b = g;
          m = p("input", { autoFocus: !0, value: b, onChange: (v) => {
            G(u, { name: v.target.value });
          }, onFocus: (v) => v.target.select(), onBlur: () => this.resetEditingFrame(u), onKeyDown: (v) => {
            (v.key === P.ESCAPE || v.key === P.ENTER) && this.resetEditingFrame(u);
          }, style: { background: this.state.viewBackgroundColor, filter: s ? F0 : "none", zIndex: 2, border: "none", display: "block", padding: `${U}px`, borderRadius: 4, boxShadow: "inset 0 0 0 1px var(--color-primary)", fontFamily: "Assistant", fontSize: "14px", transform: `translate(-${U}px, ${U}px)`, color: "var(--color-gray-80)", overflow: "hidden", maxWidth: `${document.body.clientWidth - f - U}px` }, size: b.length + 1 || 1, dir: "auto", autoComplete: "off", autoCapitalize: "off", autoCorrect: "off" });
        } else m = g;
        return p("div", { id: this.getFrameNameDOMId(u), style: { position: "absolute", bottom: `${this.state.height + pt.nameOffsetY - h + this.state.offsetTop}px`, left: `${f - this.state.offsetLeft}px`, zIndex: 2, fontSize: pt.nameFontSize, color: s ? pt.nameColorDarkTheme : pt.nameColorLightTheme, lineHeight: pt.nameLineHeight, width: "max-content", maxWidth: `${u.width}px`, overflow: u.id === this.state.editingFrame ? "visible" : "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis", cursor: Ye.MOVE, pointerEvents: this.state.viewModeEnabled ? Cl.disabled : Cl.enabled }, onPointerDown: (b) => this.handleCanvasPointerDown(b), onWheel: (b) => this.handleWheel(b), onContextMenu: this.handleCanvasContextMenu, onDoubleClick: () => {
          this.setState({ editingFrame: u.id });
        }, children: m }, u.id);
      });
    }), L(this, "focusContainer", () => {
      var s;
      (s = this.excalidrawContainerRef.current) == null || s.focus();
    }), L(this, "getSceneElementsIncludingDeleted", () => this.scene.getElementsIncludingDeleted()), L(this, "getSceneElements", () => this.scene.getNonDeletedElements()), L(this, "onInsertElements", (s) => {
      this.addElementsFromPasteOrLibrary({ elements: s, position: "center", files: null });
    }), L(this, "onExportImage", async (s, u, f) => {
      rt("export", s, "ui");
      let h = await _f(s, u, this.state, this.files, { exportBackground: this.state.exportBackground, name: this.getName(), viewBackgroundColor: this.state.viewBackgroundColor, exportingFrame: f.exportingFrame }).catch(t8).catch((U) => {
        console.error(U), this.setState({ errorMessage: U.message });
      });
      this.state.exportEmbedScene && h && Gp(h) && this.setState({ fileHandle: h });
    }), L(this, "magicGenerations", /* @__PURE__ */ new Map()), L(this, "updateMagicGeneration", ({ frameElement: s, data: u }) => {
      u.status === "pending" ? G(s, { customData: { generationData: void 0 } }, !1) : G(s, { customData: { generationData: u } }, !1), this.magicGenerations.set(s.id, u), this.triggerRender();
    }), L(this, "plugins", {}), L(this, "onMagicframeToolSelect", () => {
      let s = this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds });
      if (s.length === 0) this.setActiveTool({ type: zt.magicframe }), rt("ai", "tool-select (empty-selection)", "d2c");
      else {
        let u = s.length === 1 && vd(s[0]) && s[0];
        if (!u && s.some((h) => fe(h) || h.frameId)) {
          this.setActiveTool({ type: zt.magicframe });
          return;
        }
        rt("ai", "tool-select (existing selection)", "d2c");
        let f;
        if (u) f = u;
        else {
          let [h, U, m, g] = We(s), b = 50;
          f = L1({ ...pt, x: h - b, y: U - b, width: m - h + b * 2, height: g - U + b * 2, opacity: 100, locked: !1 }), this.scene.insertElement(f);
          for (let v of s) G(v, { frameId: f.id });
          this.setState({ selectedElementIds: { [f.id]: !0 } });
        }
        this.onMagicFrameGenerate(f, "upstream");
      }
    }), L(this, "openEyeDropper", ({ type: s }) => {
      ma.set(Mf, { swapPreviewOnAlt: !0, colorPickerType: s === "stroke" ? "elementStroke" : "elementBackground", onSelect: (u, f) => {
        let h = s === "background" && f.altKey || s === "stroke" && !f.altKey;
        !this.scene.getSelectedElements(this.state).length || this.state.activeTool.type !== "selection" ? h ? this.syncActionResult({ appState: { ...this.state, currentItemStrokeColor: u }, captureUpdate: W.IMMEDIATELY }) : this.syncActionResult({ appState: { ...this.state, currentItemBackgroundColor: u }, captureUpdate: W.IMMEDIATELY }) : this.updateScene({ elements: this.scene.getElementsIncludingDeleted().map((U) => this.state.selectedElementIds[U.id] ? ve(U, { [h ? "strokeColor" : "backgroundColor"]: u }) : U), captureUpdate: W.IMMEDIATELY });
      }, keepOpenOnAlt: !1 });
    }), L(this, "dismissLinearEditor", () => {
      setTimeout(() => {
        this.setState({ editingLinearElement: null });
      });
    }), L(this, "syncActionResult", gt((s) => {
      var h, U, m, g, b, v;
      if (this.unmounted || s === !1) return;
      s.captureUpdate === W.NEVER ? this.store.shouldUpdateSnapshot() : s.captureUpdate === W.IMMEDIATELY && this.store.shouldCaptureIncrement();
      let u = !1, f = null;
      if (s.elements && (this.scene.replaceAllElements(s.elements), u = !0), s.files && (this.addMissingFiles(s.files, s.replaceFiles), this.addNewImagesToImageCache()), s.appState || f || this.state.contextMenu) {
        let y = ((h = s == null ? void 0 : s.appState) == null ? void 0 : h.viewModeEnabled) || !1, w = ((U = s == null ? void 0 : s.appState) == null ? void 0 : U.zenModeEnabled) || !1, x = ((m = s == null ? void 0 : s.appState) == null ? void 0 : m.theme) || this.props.theme || Ie.LIGHT, S = ((g = s == null ? void 0 : s.appState) == null ? void 0 : g.name) ?? this.state.name, E = ((b = s == null ? void 0 : s.appState) == null ? void 0 : b.errorMessage) ?? this.state.errorMessage;
        typeof this.props.viewModeEnabled < "u" && (y = this.props.viewModeEnabled), typeof this.props.zenModeEnabled < "u" && (w = this.props.zenModeEnabled), f = ((v = s.appState) == null ? void 0 : v.editingTextElement) || null, s.elements && f && s.elements.forEach((M) => {
          (f == null ? void 0 : f.id) === M.id && f !== M && H1(M) && J(M) && (f = M);
        }), f != null && f.isDeleted && (f = null), this.setState((M) => {
          let I = s.appState || {};
          return { ...M, ...I, contextMenu: null, editingTextElement: f, viewModeEnabled: y, zenModeEnabled: w, theme: x, name: S, errorMessage: E };
        }), u = !0;
      }
      !u && s.captureUpdate !== W.EVENTUALLY && this.scene.triggerUpdate();
    })), L(this, "onBlur", gt(() => {
      _r = !1, this.setState({ isBindingEnabled: !0 });
    })), L(this, "onUnload", () => {
      this.onBlur();
    }), L(this, "disableEvent", (s) => {
      s.preventDefault();
    }), L(this, "resetHistory", () => {
      this.history.clear();
    }), L(this, "resetStore", () => {
      this.store.clear();
    }), L(this, "resetScene", gt((s) => {
      this.scene.replaceAllElements([]), this.setState((u) => ({ ...ei(), isLoading: s != null && s.resetLoadingState ? !1 : u.isLoading, theme: this.state.theme })), this.resetStore(), this.resetHistory();
    })), L(this, "initializeScene", async () => {
      var f;
      "launchQueue" in window && "LaunchParams" in window && window.launchQueue.setConsumer(async (h) => {
        if (!h.files.length) return;
        let U = h.files[0], m = await U.getFile();
        this.loadFileToCanvas(new File([m], m.name || "", { type: m.type }), U);
      }), this.props.theme && this.setState({ theme: this.props.theme }), this.state.isLoading || this.setState({ isLoading: !0 });
      let s = null;
      try {
        typeof this.props.initialData == "function" ? s = await this.props.initialData() || null : s = await this.props.initialData || null, s != null && s.libraryItems && this.library.updateLibrary({ libraryItems: s.libraryItems, merge: !0 }).catch((h) => {
          console.error(h);
        });
      } catch (h) {
        console.error(h), s = { appState: { errorMessage: h.message || "Encountered an error during importing or restoring scene data" } };
      }
      let u = uf(s, null, null, { repairBindings: !0 });
      u.appState = { ...u.appState, theme: this.props.theme || u.appState.theme, openSidebar: ((f = u.appState) == null ? void 0 : f.openSidebar) || this.state.openSidebar, activeTool: u.appState.activeTool.type === "image" ? { ...u.appState.activeTool, type: "selection" } : u.appState.activeTool, isLoading: !1, toast: this.state.toast }, s != null && s.scrollToContent && (u.appState = { ...u.appState, ...Zs(u.elements, { ...u.appState, width: this.state.width, height: this.state.height, offsetTop: this.state.offsetTop, offsetLeft: this.state.offsetLeft }) }), this.resetStore(), this.resetHistory(), this.syncActionResult({ ...u, captureUpdate: W.NEVER }), this.clearImageShapeCache(), this.fonts.loadSceneFonts().then((h) => {
        this.fonts.onLoaded(h);
      }), xs(window.location.href) && this.scrollToContent(window.location.href, { animate: !1 });
    }), L(this, "isMobileBreakpoint", (s, u) => s < Kk || u < Jk && s < qk), L(this, "refreshViewportBreakpoints", () => {
      if (!this.excalidrawContainerRef.current) return;
      let { clientWidth: s, clientHeight: u } = document.body, f = this.device.viewport, h = gd(f, { isLandscape: s > u, isMobile: this.isMobileBreakpoint(s, u) });
      return f !== h ? (this.device = { ...this.device, viewport: h }, !0) : !1;
    }), L(this, "refreshEditorBreakpoints", () => {
      let s = this.excalidrawContainerRef.current;
      if (!s) return;
      let { width: u, height: f } = s.getBoundingClientRect(), h = this.props.UIOptions.dockedSidebarBreakpoint != null ? this.props.UIOptions.dockedSidebarBreakpoint : Qk, U = this.device.editor, m = gd(U, { isMobile: this.isMobileBreakpoint(u, f), canFitSidebar: u > h });
      return U !== m ? (this.device = { ...this.device, editor: m }, !0) : !1;
    }), L(this, "onResize", gt(() => {
      this.scene.getElementsIncludingDeleted().forEach((s) => mt.delete(s)), this.refreshViewportBreakpoints(), this.updateDOMRect(), p1 || this.refreshEditorBreakpoints(), this.setState({});
    })), L(this, "onFullscreenChange", () => {
      var s;
      !document.fullscreenElement && ((s = this.state.activeEmbeddable) == null ? void 0 : s.state) === "active" && this.setState({ activeEmbeddable: null });
    }), L(this, "renderInteractiveSceneCallback", ({ atLeastOneVisibleElement: s, scrollBars: u, elementsMap: f }) => {
      u && (Jh = u);
      let h = this.state.editingTextElement ? !1 : !s && f.size > 0;
      this.state.scrolledOutside !== h && this.setState({ scrolledOutside: h }), this.scheduleImageRefresh();
    }), L(this, "onScroll", oo(() => {
      let { offsetTop: s, offsetLeft: u } = this.getCanvasOffsets();
      this.setState((f) => f.offsetLeft === u && f.offsetTop === s ? null : { offsetTop: s, offsetLeft: u });
    }, Yk)), L(this, "onCut", gt((s) => {
      var u;
      !((u = this.excalidrawContainerRef.current) != null && u.contains(document.activeElement)) || Or(s.target) || (this.actionManager.executeAction(F6, "keyboard", s), s.preventDefault(), s.stopPropagation());
    })), L(this, "onCopy", gt((s) => {
      var u;
      !((u = this.excalidrawContainerRef.current) != null && u.contains(document.activeElement)) || Or(s.target) || (this.actionManager.executeAction(Pd, "keyboard", s), s.preventDefault(), s.stopPropagation());
    })), L(this, "onTouchStart", (s) => {
      if (Hb && s.preventDefault(), !Jo) {
        Jo = !0, clearTimeout(Kh), Kh = window.setTimeout(py.resetTapTwice, Gk);
        return;
      }
      if (Jo && s.touches.length === 1) {
        let u = s.touches[0];
        this.handleCanvasDoubleClick({ clientX: u.clientX, clientY: u.clientY }), Jo = !1, clearTimeout(Kh);
      }
      s.touches.length === 2 && this.setState({ selectedElementIds: Ne({}, this.state), activeEmbeddable: null });
    }), L(this, "onTouchEnd", (s) => {
      this.resetContextMenuTimer(), s.touches.length > 0 ? this.setState({ previousSelectedElementIds: {}, selectedElementIds: Ne(this.state.previousSelectedElementIds, this.state) }) : Pe.pointers.clear();
    }), L(this, "pasteFromClipboard", gt(async (s) => {
      var y, w;
      let u = !!od, f = document.activeElement, h = (y = this.excalidrawContainerRef.current) == null ? void 0 : y.contains(f);
      if (s && !h) return;
      let U = document.elementFromPoint(this.lastViewportPosition.x, this.lastViewportPosition.y);
      if (s && (!(U instanceof HTMLCanvasElement) || Or(f))) return;
      let { x: m, y: g } = it({ clientX: this.lastViewportPosition.x, clientY: this.lastViewportPosition.y }, this.state), b = (w = s == null ? void 0 : s.clipboardData) == null ? void 0 : w.files[0], v = await c3(s, u);
      if (!b && !u) {
        if (v.mixedContent) return this.addElementsFromMixedContentPaste(v.mixedContent, { isPlainPaste: u, sceneX: m, sceneY: g });
        if (v.text) {
          let x = v.text.trim();
          x.startsWith("<svg") && x.endsWith("</svg>") && (b = Ag(x));
        }
      }
      if (Jr(b) && !v.spreadsheet) {
        if (!this.isToolSupported("image")) {
          this.setState({ errorMessage: C("errors.imageToolNotSupported") });
          return;
        }
        let x = this.createImageElement({ sceneX: m, sceneY: g });
        this.insertImageElement(x, b), this.initializeImageDimensions(x), this.setState({ selectedElementIds: Ne({ [x.id]: !0 }, this.state) });
        return;
      }
      if (this.props.onPaste) try {
        if (await this.props.onPaste(v, s) === !1) return;
      } catch (x) {
        console.error(x);
      }
      if (v.errorMessage) this.setState({ errorMessage: v.errorMessage });
      else if (v.spreadsheet && !u) this.setState({ pasteDialog: { data: v.spreadsheet, shown: !0 } });
      else if (v.elements) {
        let x = v.programmaticAPI ? x0(v.elements) : v.elements;
        this.addElementsFromPasteOrLibrary({ elements: x, files: v.files || null, position: "cursor", retainSeed: u });
      } else if (v.text) {
        if (v.text && lZ(v.text)) {
          let E = await import("./index-CItKjTo7.js").then((M) => M.b1);
          try {
            let { elements: M, files: I } = await E.parseMermaidToExcalidraw(v.text), T = x0(M, { regenerateIds: !0 });
            this.addElementsFromPasteOrLibrary({ elements: T, files: I, position: "cursor" });
            return;
          } catch (M) {
            console.warn(`parsing pasted text as mermaid definition failed: ${M.message}`);
          }
        }
        let x = l8(v.text).split(/\n+/).map((E) => E.trim()).filter(Boolean), S = x.map((E) => GP(E)).filter((E) => {
          var M;
          return kd(E, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(E) || ((M = Gl(E)) == null ? void 0 : M.type) === "video");
        });
        if (!od && S.length > 0 && S.length === x.length) {
          let E = [];
          for (let M of S) {
            let I = E[E.length - 1], T = this.insertEmbeddableElement({ sceneX: I ? I.x + I.width + 20 : m, sceneY: g, link: Nn(M) });
            T && E.push(T);
          }
          E.length && this.setState({ selectedElementIds: Object.fromEntries(E.map((M) => [M.id, !0])) });
          return;
        }
        this.addTextFromPaste(v.text, u);
      }
      this.setActiveTool({ type: "selection" }), s == null || s.preventDefault();
    })), L(this, "addElementsFromPasteOrLibrary", (s) => {
      var $, F;
      let u = Ip(s.elements, null, void 0), [f, h, U, m] = We(u), g = rn(f, U) / 2, b = rn(h, m) / 2, v = typeof s.position == "object" ? s.position.clientX : s.position === "cursor" ? this.lastViewportPosition.x : this.state.width / 2 + this.state.offsetLeft, y = typeof s.position == "object" ? s.position.clientY : s.position === "cursor" ? this.lastViewportPosition.y : this.state.height / 2 + this.state.offsetTop, { x: w, y: x } = it({ clientX: v, clientY: y }, this.state), S = w - g, E = x - b, [M, I] = Lt(S, E, this.getEffectiveGridSize()), T = O7(u.map((N) => ve(N, { x: N.x + M - f, y: N.y + I - h })), { randomizeSeed: !s.retainSeed }), A = this.scene.getElementsIncludingDeleted(), D = [...A, ...T];
      D = ((F = ($ = this.props).onDuplicate) == null ? void 0 : F.call($, D, A)) || D, ii(D, he(T));
      let R = this.getTopLayerFrameAtSceneCoords({ x: w, y: x });
      if (R) {
        let N = tO(T, R);
        Ss(D, N, R, this.state);
      }
      this.scene.replaceAllElements(D), T.forEach((N) => {
        if (J(N) && st(N)) {
          let j = Zt(N, this.scene.getElementsMapIncludingDeleted());
          Un(N, j, this.scene.getElementsMapIncludingDeleted());
        }
      }), Lk && Mi.loadElementsFonts(T).then((N) => {
        this.fonts.onLoaded(N);
      }), s.files && this.addMissingFiles(s.files), this.store.shouldCaptureIncrement();
      let O = zp(T);
      this.setState({ ...this.state, openSidebar: this.state.openSidebar && this.device.editor.canFitSidebar && ma.get(SU) ? this.state.openSidebar : null, ...pn({ editingGroupId: null, selectedElementIds: O.reduce((N, j) => (st(j) || (N[j.id] = !0), N), {}) }, this.scene.getNonDeletedElements(), this.state, this) }, () => {
        s.files && this.addNewImagesToImageCache();
      }), this.setActiveTool({ type: "selection" }), s.fitToContent && this.scrollToContent(T, { fitToContent: !0, canvasOffsets: this.getEditorUIOffsets() });
    }), L(this, "setAppState", (s, u) => {
      this.setState(s, u);
    }), L(this, "removePointer", (s) => {
      Yi && this.resetContextMenuTimer(), Pe.pointers.delete(s.pointerId);
    }), L(this, "toggleLock", (s = "ui") => {
      this.state.activeTool.locked || rt("toolbar", "toggleLock", `${s} (${this.device.editor.isMobile ? "mobile" : "desktop"})`), this.setState((u) => ({ activeTool: { ...u.activeTool, ..._t(this.state, u.activeTool.locked ? { type: "selection" } : u.activeTool), locked: !u.activeTool.locked } }));
    }), L(this, "updateFrameRendering", (s) => {
      this.setState((u) => {
        let f = typeof s == "function" ? s(u.frameRendering) : s;
        return { frameRendering: { enabled: (f == null ? void 0 : f.enabled) ?? u.frameRendering.enabled, clip: (f == null ? void 0 : f.clip) ?? u.frameRendering.clip, name: (f == null ? void 0 : f.name) ?? u.frameRendering.name, outline: (f == null ? void 0 : f.outline) ?? u.frameRendering.outline } };
      });
    }), L(this, "togglePenMode", (s) => {
      this.setState((u) => ({ penMode: s ?? !u.penMode, penDetected: !0 }));
    }), L(this, "onHandToolToggle", () => {
      this.actionManager.executeAction(fW);
    }), L(this, "zoomCanvas", (s) => {
      this.setState({ ...Gr({ viewportX: this.state.width / 2 + this.state.offsetLeft, viewportY: this.state.height / 2 + this.state.offsetTop, nextZoom: Si(s) }, this.state) });
    }), L(this, "cancelInProgressAnimation", null), L(this, "scrollToContent", (s = this.scene.getNonDeletedElements(), u) => {
      var g;
      if (typeof s == "string") {
        let b;
        if (xs(s) ? b = QP(s) : b = s, b) {
          let v = this.scene.getElementsFromId(b);
          v != null && v.length ? this.scrollToContent(v, { fitToContent: (u == null ? void 0 : u.fitToContent) ?? !0, animate: (u == null ? void 0 : u.animate) ?? !0 }) : xs(s) && this.setState({ toast: { message: C("elementLink.notFound"), duration: 3e3, closable: !0 } });
        }
        return;
      }
      (g = this.cancelInProgressAnimation) == null || g.call(this);
      let f = Array.isArray(s) ? s : [s], h = this.state.zoom, U = this.state.scrollX, m = this.state.scrollY;
      if (u != null && u.fitToContent || u != null && u.fitToViewport) {
        let { appState: b } = If({ canvasOffsets: u.canvasOffsets, targetElements: f, appState: this.state, fitToViewport: !!(u != null && u.fitToViewport), viewportZoomFactor: u == null ? void 0 : u.viewportZoomFactor, minZoom: u == null ? void 0 : u.minZoom, maxZoom: u == null ? void 0 : u.maxZoom });
        h = b.zoom, U = b.scrollX, m = b.scrollY;
      } else {
        let b = Zs(f, this.state);
        U = b.scrollX, m = b.scrollY;
      }
      if (u != null && u.animate) {
        let b = this.state.scrollX, v = this.state.scrollY, y = this.state.zoom.value, w = SM({ fromValues: { scrollX: b, scrollY: v, zoom: y }, toValues: { scrollX: U, scrollY: m, zoom: h.value }, interpolateValue: (x, S, E, M) => {
          if (M === "zoom") return x * Math.pow(S / x, Yr(E));
        }, onStep: ({ scrollX: x, scrollY: S, zoom: E }) => {
          this.setState({ scrollX: x, scrollY: S, zoom: { value: E } });
        }, onStart: () => {
          this.setState({ shouldCacheIgnoreZoom: !0 });
        }, onEnd: () => {
          this.setState({ shouldCacheIgnoreZoom: !1 });
        }, onCancel: () => {
          this.setState({ shouldCacheIgnoreZoom: !1 });
        }, duration: (u == null ? void 0 : u.duration) ?? 500 });
        this.cancelInProgressAnimation = () => {
          w(), this.cancelInProgressAnimation = null;
        };
      } else this.setState({ scrollX: U, scrollY: m, zoom: h });
    }), L(this, "maybeUnfollowRemoteUser", () => {
      this.state.userToFollow && this.setState({ userToFollow: null });
    }), L(this, "translateCanvas", (s) => {
      var u;
      (u = this.cancelInProgressAnimation) == null || u.call(this), this.maybeUnfollowRemoteUser(), this.setState(s);
    }), L(this, "setToast", (s) => {
      this.setState({ toast: s });
    }), L(this, "restoreFileFromShare", async () => {
      try {
        let s = await caches.open("web-share-target"), u = await s.match("shared-file");
        if (u) {
          let f = await u.blob(), h = new File([f], f.name || "", { type: f.type });
          this.loadFileToCanvas(h, null), await s.delete("shared-file"), window.history.replaceState(null, Pk, window.location.pathname);
        }
      } catch (s) {
        this.setState({ errorMessage: s.message });
      }
    }), L(this, "addFiles", gt((s) => {
      let { addedFiles: u } = this.addMissingFiles(s);
      this.clearImageShapeCache(u), this.scene.triggerUpdate(), this.addNewImagesToImageCache();
    })), L(this, "addMissingFiles", (s, u = !1) => {
      let f = u ? {} : { ...this.files }, h = {}, U = Array.isArray(s) ? s : Object.values(s);
      for (let m of U) if (!f[m.id] && (h[m.id] = m, f[m.id] = m, m.mimeType === de.svg)) try {
        let g = IO(ng(_O(m.dataURL)), de.svg);
        m.dataURL !== g && (m.version = (m.version ?? 1) + 1, m.dataURL = g);
      } catch (g) {
        console.error(g);
      }
      return this.files = f, { addedFiles: h };
    }), L(this, "updateScene", gt((s) => {
      let u = Li(s.elements ?? []);
      if (s.captureUpdate && s.captureUpdate !== W.EVENTUALLY) {
        let f = this.store.snapshot.appState, h = this.store.snapshot.elements, U = s.appState ? Object.assign({}, f, s.appState) : f, m = s.elements ? this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(), he(u)) : h;
        s.captureUpdate === W.IMMEDIATELY ? this.store.captureIncrement(m, U) : s.captureUpdate === W.NEVER && this.store.updateSnapshot(m, U);
      }
      s.appState && this.setState(s.appState), s.elements && this.scene.replaceAllElements(u), s.collaborators && this.setState({ collaborators: s.collaborators });
    })), L(this, "triggerRender", (s) => {
      s === !0 ? this.scene.triggerUpdate() : this.setState({});
    }), L(this, "toggleSidebar", ({ name: s, tab: u, force: f }) => {
      var m, g;
      let h;
      f === void 0 ? h = ((m = this.state.openSidebar) == null ? void 0 : m.name) === s && ((g = this.state.openSidebar) == null ? void 0 : g.tab) === u ? null : s : h = f ? s : null;
      let U = h ? { name: h } : null;
      return U && u && (U.tab = u), this.setState({ openSidebar: U }), !!h;
    }), L(this, "updateCurrentCursorPosition", gt((s) => {
      this.lastViewportPosition.x = s.clientX, this.lastViewportPosition.y = s.clientY;
    })), L(this, "getEditorUIOffsets", () => {
      var U, m, g, b, v, y, w, x, S, E;
      let s = ((b = (g = (m = (U = this.excalidrawContainerRef) == null ? void 0 : U.current) == null ? void 0 : m.querySelector(".App-toolbar")) == null ? void 0 : g.getBoundingClientRect()) == null ? void 0 : b.bottom) ?? 0, u = (w = (y = (v = this.excalidrawContainerRef) == null ? void 0 : v.current) == null ? void 0 : y.querySelector(".sidebar")) == null ? void 0 : w.getBoundingClientRect(), f = (E = (S = (x = this.excalidrawContainerRef) == null ? void 0 : x.current) == null ? void 0 : S.querySelector(".App-menu__left")) == null ? void 0 : E.getBoundingClientRect(), h = 16;
      return ic().rtl ? { top: s + h, right: Math.max(this.state.width - ((f == null ? void 0 : f.left) ?? this.state.width), 0) + h, bottom: h, left: Math.max((u == null ? void 0 : u.right) ?? 0, 0) + h } : { top: s + h, right: Math.max(this.state.width - ((u == null ? void 0 : u.left) ?? this.state.width) + h, 0), bottom: h, left: Math.max((f == null ? void 0 : f.right) ?? 0, 0) + h };
    }), L(this, "onKeyDown", gt((s) => {
      var U, m;
      if ("Proxy" in window && (!s.shiftKey && /^[A-Z]$/.test(s.key) || s.shiftKey && /^[a-z]$/.test(s.key)) && (s = new Proxy(s, { get(g, b) {
        let v = g[b];
        return typeof v == "function" ? v.bind(g) : b === "key" ? s.shiftKey ? g.key.toUpperCase() : g.key.toLowerCase() : v;
      } })), !g1(s.target)) {
        if ((s.key === P.ESCAPE || s.key === P.ENTER) && this.state.croppingElementId) {
          this.finishImageCropping();
          return;
        }
        let g = Ee(this.scene.getNonDeletedElementsMap(), this.state);
        if (g.length === 1 && Oe(g[0]) && s.key === P.ENTER) {
          this.startImageCropping(g[0]);
          return;
        }
        if (s.key === P.ESCAPE && this.flowChartCreator.isCreatingChart) {
          this.flowChartCreator.clear(), this.triggerRender(!0);
          return;
        }
        let b = ls(s.key);
        if (s[P.CTRL_OR_CMD] && b && !s.shiftKey) {
          s.preventDefault();
          let v = Ee(this.scene.getNonDeletedElementsMap(), this.state);
          v.length === 1 && ju(v[0]) && this.flowChartCreator.createNodes(v[0], this.scene.getNonDeletedElementsMap(), this.state, i5(s.key)), (U = this.flowChartCreator.pendingNodes) != null && U.length && !Td(this.flowChartCreator.pendingNodes, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(this.flowChartCreator.pendingNodes, { animate: !0, duration: 300, fitToContent: !0, canvasOffsets: this.getEditorUIOffsets() });
          return;
        }
        if (s.altKey) {
          let v = Ee(this.scene.getNonDeletedElementsMap(), this.state);
          if (v.length === 1 && b) {
            s.preventDefault();
            let y = this.flowChartNavigator.exploreByDirection(v[0], this.scene.getNonDeletedElementsMap(), i5(s.key));
            if (y) {
              this.setState((x) => ({ selectedElementIds: Ne({ [y]: !0 }, x) }));
              let w = this.scene.getNonDeletedElementsMap().get(y);
              w && !Td([w], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(w, { animate: !0, duration: 300, canvasOffsets: this.getEditorUIOffsets() });
            }
            return;
          }
        }
      }
      if (s[P.CTRL_OR_CMD] && s.key === P.P && !s.shiftKey && !s.altKey) {
        this.setToast({ message: C("commandPalette.shortcutHint", { shortcut: sn("commandPalette") }) }), s.preventDefault();
        return;
      }
      if (s[P.CTRL_OR_CMD] && s.key.toLowerCase() === P.V && (od = s.shiftKey, clearTimeout(L5), L5 = window.setTimeout(() => {
        od = !1;
      }, 100)), s[P.CTRL_OR_CMD] && Or(s.target) && (s.code === De.MINUS || s.code === De.EQUAL)) {
        s.preventDefault();
        return;
      }
      if (Or(s.target) && s.key !== P.ESCAPE || ls(s.key) && g1(s.target)) return;
      if (s.key === P.QUESTION_MARK) {
        this.setState({ openDialog: { name: "help" } });
        return;
      } else if (s.key.toLowerCase() === P.E && s.shiftKey && s[P.CTRL_OR_CMD]) {
        s.preventDefault(), this.setState({ openDialog: { name: "imageExport" } });
        return;
      }
      if (s.key === P.PAGE_UP || s.key === P.PAGE_DOWN) {
        let g = (s.shiftKey ? this.state.width : this.state.height) / this.state.zoom.value;
        s.key === P.PAGE_DOWN && (g = -g), s.shiftKey ? this.translateCanvas((b) => ({ scrollX: b.scrollX + g })) : this.translateCanvas((b) => ({ scrollY: b.scrollY + g }));
      }
      if (((m = this.state.openDialog) == null ? void 0 : m.name) === "elementLinkSelector" || this.actionManager.handleKeyDown(s) || this.state.viewModeEnabled) return;
      if (s[P.CTRL_OR_CMD] && this.state.isBindingEnabled && this.setState({ isBindingEnabled: !1 }), ls(s.key)) {
        let g = this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }), b = g.find(te), v = /* @__PURE__ */ new Set();
        g.filter(te).filter((S) => {
          let E = S.startBinding && !g.some((I) => {
            var T;
            return I.id === ((T = S.startBinding) == null ? void 0 : T.elementId);
          }), M = S.endBinding && !g.some((I) => {
            var T;
            return I.id === ((T = S.endBinding) == null ? void 0 : T.elementId);
          });
          return E || M;
        }).forEach((S) => v.add(S.id)), g = g.filter((S) => !v.has(S.id));
        let y = this.getEffectiveGridSize() && (s.shiftKey ? V2 : this.getEffectiveGridSize()) || (s.shiftKey ? Ok : V2), w = 0, x = 0;
        s.key === P.ARROW_LEFT ? w = -y : s.key === P.ARROW_RIGHT ? w = y : s.key === P.ARROW_UP ? x = -y : s.key === P.ARROW_DOWN && (x = y), g.forEach((S) => {
          G(S, { x: S.x + w, y: S.y + x }, !1), In(S, this.scene.getNonDeletedElementsMap(), { simultaneouslyUpdated: g });
        }), this.setState({ suggestedBindings: uh(g.filter((S) => S.id !== (b == null ? void 0 : b.id) || y !== 0), this.scene.getNonDeletedElementsMap(), this.state.zoom) }), this.scene.triggerUpdate(), s.preventDefault();
      } else if (s.key === P.ENTER) {
        let g = this.scene.getSelectedElements(this.state);
        if (g.length === 1) {
          let b = g[0];
          if (s[P.CTRL_OR_CMD]) me(b) && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== g[0].id) && (this.store.shouldCaptureIncrement(), te(b) || this.setState({ editingLinearElement: new ee(b) }));
          else if (J(b) || wP(b)) {
            let v;
            J(b) || (v = b);
            let y = fh(b, this.state, this.scene.getNonDeletedElementsMap()), w = y.x, x = y.y;
            this.startTextEditing({ sceneX: w, sceneY: x, container: v }), s.preventDefault();
            return;
          } else fe(b) && this.setState({ editingFrame: b.id });
        }
      } else if (!s.ctrlKey && !s.altKey && !s.metaKey && !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged) {
        let g = GL(s.key);
        g ? (this.state.activeTool.type !== g && rt("toolbar", g, `keyboard (${this.device.editor.isMobile ? "mobile" : "desktop"})`), g === "arrow" && this.state.activeTool.type === "arrow" && this.setState((b) => ({ currentItemArrowType: b.currentItemArrowType === Gt.sharp ? Gt.round : b.currentItemArrowType === Gt.round ? Gt.elbow : Gt.sharp })), this.setActiveTool({ type: g }), s.stopPropagation()) : s.key === P.Q && (this.toggleLock("keyboard"), s.stopPropagation());
      }
      if (s.key === P.SPACE && Pe.pointers.size === 0 && (_r = !0, qe(this.interactiveCanvas, Ye.GRAB), s.preventDefault()), (s.key === P.G || s.key === P.S) && !s.altKey && !s[P.CTRL_OR_CMD]) {
        let g = this.scene.getSelectedElements(this.state);
        if (this.state.activeTool.type === "selection" && !g.length) return;
        s.key === P.G && (fo(this.state.activeTool.type) || g.some((b) => fo(b.type))) && (this.setState({ openPopup: "elementBackground" }), s.stopPropagation()), s.key === P.S && (this.setState({ openPopup: "elementStroke" }), s.stopPropagation());
      }
      if (!s[P.CTRL_OR_CMD] && s.shiftKey && s.key.toLowerCase() === P.F) {
        let g = this.scene.getSelectedElements(this.state);
        if (this.state.activeTool.type === "selection" && !g.length) return;
        (this.state.activeTool.type === "text" || g.find((b) => J(b) || ye(b, this.scene.getNonDeletedElementsMap()))) && (s.preventDefault(), this.setState({ openPopup: "fontFamily" }));
      }
      if (s.key === P.K && !s.altKey && !s[P.CTRL_OR_CMD]) {
        this.state.activeTool.type === "laser" ? this.setActiveTool({ type: "selection" }) : this.setActiveTool({ type: "laser" });
        return;
      }
      s[P.CTRL_OR_CMD] && (s.key === P.BACKSPACE || s.key === P.DELETE) && ma.set(Df, "clearCanvas");
      let u = s.key.toLocaleLowerCase(), f = u === P.S && s.shiftKey, h = s.key === P.I || u === P.G && s.shiftKey;
      (f || h) && this.openEyeDropper({ type: f ? "stroke" : "background" });
    })), L(this, "onKeyUp", gt((s) => {
      var u, f, h, U;
      if (s.key === P.SPACE && (this.state.viewModeEnabled || ((u = this.state.openDialog) == null ? void 0 : u.name) === "elementLinkSelector" ? qe(this.interactiveCanvas, Ye.GRAB) : this.state.activeTool.type === "selection" ? sa(this.interactiveCanvas) : (Oa(this.interactiveCanvas, this.state), this.setState({ selectedElementIds: Ne({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null })), _r = !1), !s[P.CTRL_OR_CMD] && !this.state.isBindingEnabled && this.setState({ isBindingEnabled: !0 }), ls(s.key) && (cu(this.scene.getSelectedElements(this.state).filter(me), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, Wr(this.state), ((f = this.state.selectedLinearElement) == null ? void 0 : f.selectedPointsIndices) ?? [], this.state.zoom), this.setState({ suggestedBindings: [] })), s.altKey || this.flowChartNavigator.isExploring && (this.flowChartNavigator.clear(), this.syncActionResult({ captureUpdate: W.IMMEDIATELY })), !s[P.CTRL_OR_CMD] && this.flowChartCreator.isCreatingChart) {
        (h = this.flowChartCreator.pendingNodes) != null && h.length && this.scene.insertElements(this.flowChartCreator.pendingNodes);
        let m = (U = this.flowChartCreator.pendingNodes) == null ? void 0 : U[0];
        m && (this.setState((g) => ({ selectedElementIds: Ne({ [m.id]: !0 }, g) })), Td([m], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, { offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, zoom: this.state.zoom }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) || this.scrollToContent(m, { animate: !0, duration: 300, canvasOffsets: this.getEditorUIOffsets() })), this.flowChartCreator.clear(), this.syncActionResult({ captureUpdate: W.IMMEDIATELY });
      }
    })), L(this, "isToolSupported", (s) => {
      var u;
      return ((u = this.props.UIOptions.tools) == null ? void 0 : u[s]) !== !1;
    }), L(this, "setActiveTool", (s) => {
      if (!this.isToolSupported(s.type)) {
        console.warn(`"${s.type}" tool is disabled via "UIOptions.canvasActions.tools.${s.type}"`);
        return;
      }
      let u = _t(this.state, s);
      u.type === "hand" ? qe(this.interactiveCanvas, Ye.GRAB) : _r || Oa(this.interactiveCanvas, { ...this.state, activeTool: u }), EM(document.activeElement) && this.focusContainer(), W0(u.type) || this.setState({ suggestedBindings: [] }), u.type === "image" && this.onImageAction({ insertOnCanvasDirectly: (s.type === "image" && s.insertOnCanvasDirectly) ?? !1 }), this.setState((f) => {
        let h = { snapLines: f.snapLines.length ? [] : f.snapLines, originSnapOffset: null, activeEmbeddable: null };
        return u.type === "freedraw" && this.store.shouldCaptureIncrement(), u.type !== "selection" ? { ...f, activeTool: u, selectedElementIds: Ne({}, f), selectedGroupIds: Ne({}, f), editingGroupId: null, multiElement: null, ...h } : { ...f, activeTool: u, ...h };
      });
    }), L(this, "setOpenDialog", (s) => {
      this.setState({ openDialog: s });
    }), L(this, "setCursor", (s) => {
      qe(this.interactiveCanvas, s);
    }), L(this, "resetCursor", () => {
      sa(this.interactiveCanvas);
    }), L(this, "isTouchScreenMultiTouchGesture", () => Pe.pointers.size >= 2), L(this, "getName", () => this.state.name || this.props.name || `${C("labels.untitled")}-${Q2()}`), L(this, "onGestureStart", gt((s) => {
      s.preventDefault(), this.isTouchScreenMultiTouchGesture() && this.setState({ selectedElementIds: Ne({}, this.state), activeEmbeddable: null }), Pe.initialScale = this.state.zoom.value;
    })), L(this, "onGestureChange", gt((s) => {
      if (s.preventDefault(), this.isTouchScreenMultiTouchGesture()) return;
      let u = Pe.initialScale;
      u && this.setState((f) => ({ ...Gr({ viewportX: this.lastViewportPosition.x, viewportY: this.lastViewportPosition.y, nextZoom: Si(u * s.scale) }, f) }));
    })), L(this, "onGestureEnd", gt((s) => {
      s.preventDefault(), this.isTouchScreenMultiTouchGesture() && this.setState({ previousSelectedElementIds: {}, selectedElementIds: Ne(this.state.previousSelectedElementIds, this.state) }), Pe.initialScale = null;
    })), L(this, "startTextEditing", ({ sceneX: s, sceneY: u, insertAtParentCenter: f = !0, container: h, autoEdit: U = !0 }) => {
      let m = !1, g = f && this.getTextWysiwygSnappedToCenterPosition(s, u, this.state, h);
      h && g && (ye(h, this.scene.getNonDeletedElementsMap()) || (m = !0));
      let b = null, v = this.scene.getSelectedElements(this.state);
      v.length === 1 ? J(v[0]) ? b = v[0] : h ? b = ye(v[0], this.scene.getNonDeletedElementsMap()) : b = this.getTextElementAtPosition(s, u) : b = this.getTextElementAtPosition(s, u);
      let y = (b == null ? void 0 : b.fontFamily) || this.state.currentItemFontFamily, w = (b == null ? void 0 : b.lineHeight) || dl(y), x = this.state.currentItemFontSize;
      if (!b && m && h && !xe(h)) {
        let M = f8(Je({ fontSize: x, fontFamily: y }), w), I = h8(x, w), T = Math.max(h.height, I), A = Math.max(h.width, M);
        G(h, { height: T, width: A }), s = h.x + A / 2, u = h.y + T / 2, g && (g = this.getTextWysiwygSnappedToCenterPosition(s, u, this.state, h));
      }
      let S = this.getTopLayerFrameAtSceneCoords({ x: s, y: u }), E = b || $n({ x: g ? g.elementCenterX : s, y: g ? g.elementCenterY : u, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, text: "", fontSize: x, fontFamily: y, textAlign: g ? "center" : this.state.currentItemTextAlign, verticalAlign: g ? Pn.MIDDLE : Gd, containerId: m ? h == null ? void 0 : h.id : void 0, groupIds: (h == null ? void 0 : h.groupIds) ?? [], lineHeight: w, angle: (h == null ? void 0 : h.angle) ?? 0, frameId: S ? S.id : null });
      if (!b && m && h && G(h, { boundElements: (h.boundElements || []).concat({ type: "text", id: E.id }) }), this.setState({ editingTextElement: E }), !b) if (h && m) {
        let M = this.scene.getElementIndex(h.id);
        this.scene.insertElementAtIndex(E, M + 1);
      } else this.scene.insertElement(E);
      U || b || h ? this.handleTextWysiwyg(E, { isExistingElement: !!b }) : this.setState({ newElement: E, multiElement: null });
    }), L(this, "startImageCropping", (s) => {
      this.store.shouldCaptureIncrement(), this.setState({ croppingElementId: s.id });
    }), L(this, "finishImageCropping", () => {
      this.state.croppingElementId && (this.store.shouldCaptureIncrement(), this.setState({ croppingElementId: null }));
    }), L(this, "handleCanvasDoubleClick", (s) => {
      if (this.state.multiElement || this.state.activeTool.type !== "selection") return;
      let u = this.scene.getSelectedElements(this.state), { x: f, y: h } = it(s, this.state);
      if (u.length === 1 && me(u[0])) {
        if (s[P.CTRL_OR_CMD] && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== u[0].id) && !te(u[0])) {
          this.store.shouldCaptureIncrement(), this.setState({ editingLinearElement: new ee(u[0]) });
          return;
        } else if (this.state.selectedLinearElement && te(u[0])) {
          let U = ee.getSegmentMidpointHitCoords(this.state.selectedLinearElement, { x: f, y: h }, this.state, this.scene.getNonDeletedElementsMap()), m = U ? ee.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, U, this.scene.getNonDeletedElementsMap()) : -1;
          if (m && m > -1) {
            this.store.shouldCaptureIncrement(), ee.deleteFixedSegment(u[0], m);
            let g = ee.getSegmentMidpointHitCoords({ ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: null }, { x: f, y: h }, this.state, this.scene.getNonDeletedElementsMap()), b = g ? ee.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, g, this.scene.getNonDeletedElementsMap()) : null;
            this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, pointerDownState: { ...this.state.selectedLinearElement.pointerDownState, segmentMidpoint: { index: b, value: U, added: !1 } }, segmentMidPointHoveredCoords: g } });
            return;
          }
        }
      }
      if (u.length === 1 && Oe(u[0])) {
        this.startImageCropping(u[0]);
        return;
      }
      if (sa(this.interactiveCanvas), Kr(this.state).length > 0) {
        let U = this.getElementAtPosition(f, h), m = U && QR(U, this.state.selectedGroupIds);
        if (m) {
          this.store.shouldCaptureIncrement(), this.setState((g) => ({ ...g, ...pn({ editingGroupId: m, selectedElementIds: { [U.id]: !0 } }, this.scene.getNonDeletedElements(), g, this) }));
          return;
        }
      }
      if (sa(this.interactiveCanvas), !s[P.CTRL_OR_CMD] && !this.state.viewModeEnabled) {
        let U = this.getElementAtPosition(f, h);
        if (Gn(U)) {
          this.setState({ activeEmbeddable: { element: U, state: "active" } });
          return;
        }
        let m = this.getTextBindableContainerAtPosition(f, h);
        if (m && (ta(m) || !pa(m.backgroundColor) || $l({ x: f, y: h, element: m, shape: vi(m, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() }))) {
          let g = fh(m, this.state, this.scene.getNonDeletedElementsMap());
          f = g.x, h = g.y;
        }
        this.startTextEditing({ sceneX: f, sceneY: h, insertAtParentCenter: !s.altKey, container: m });
      }
    }), L(this, "getElementLinkAtPosition", (s, u) => {
      let f = this.scene.getNonDeletedElements(), h = -1;
      for (let U = f.length - 1; U >= 0; U--) {
        let m = f[U];
        if (u && m.id === u.id && (h = U), m.link && U >= h && hh(m, this.scene.getNonDeletedElementsMap(), this.state, k(s.x, s.y), this.device.editor.isMobile)) return m;
      }
    }), L(this, "redirectToLink", (s, u) => {
      let f = ze(k(this.lastPointerDownEvent.clientX, this.lastPointerDownEvent.clientY), k(this.lastPointerUpEvent.clientX, this.lastPointerUpEvent.clientY));
      if (!this.hitLinkElement || f > Pr) return;
      let h = it(this.lastPointerDownEvent, this.state), U = this.scene.getNonDeletedElementsMap(), m = hh(this.hitLinkElement, U, this.state, k(h.x, h.y), this.device.editor.isMobile), g = it(this.lastPointerUpEvent, this.state), b = hh(this.hitLinkElement, U, this.state, k(g.x, g.y), this.device.editor.isMobile);
      if (m && b) {
        G6();
        let v = this.hitLinkElement.link;
        if (v) {
          v = Nn(v);
          let y;
          if (this.props.onLinkOpen && (y = i8("excalidraw-link", s.nativeEvent), this.props.onLinkOpen({ ...this.hitLinkElement, link: v }, y)), !(y != null && y.defaultPrevented)) {
            let w = C7(v) ? "_self" : "_blank", x = window.open(void 0, w);
            x && (x.opener = null, x.location = v);
          }
        }
      }
    }), L(this, "getTopLayerFrameAtSceneCoords", (s) => {
      let u = this.scene.getNonDeletedElementsMap(), f = this.scene.getNonDeletedFramesLikes().filter((h) => bg(s, h, u));
      return f.length ? f[f.length - 1] : null;
    }), L(this, "handleCanvasPointerMove", (s) => {
      var y, w, x, S, E, M;
      this.savePointer(s.clientX, s.clientY, this.state.cursorButton), this.lastPointerMoveEvent = s.nativeEvent, Pe.pointers.has(s.pointerId) && Pe.pointers.set(s.pointerId, { x: s.clientX, y: s.clientY });
      let u = Pe.initialScale;
      if (Pe.pointers.size === 2 && Pe.lastCenter && u && Pe.initialDistance) {
        let I = t5(Pe.pointers), T = I.x - Pe.lastCenter.x, A = I.y - Pe.lastCenter.y;
        Pe.lastCenter = I;
        let D = n5(Array.from(Pe.pointers.values())), R = this.state.activeTool.type === "freedraw" && this.state.penMode ? 1 : D / Pe.initialDistance, O = R ? Si(u * R) : this.state.zoom.value;
        this.setState(($) => {
          let F = Gr({ viewportX: I.x, viewportY: I.y, nextZoom: O }, $);
          this.translateCanvas({ zoom: F.zoom, scrollX: F.scrollX + 2 * (T / O), scrollY: F.scrollY + 2 * (A / O), shouldCacheIgnoreZoom: !0 });
        }), this.resetShouldCacheIgnoreZoomDebounced();
      } else Pe.lastCenter = Pe.initialDistance = Pe.initialScale = null;
      if (_r || Qo || qh || ro(this.state)) return;
      let f = l5(Jh, s.clientX - this.state.offsetLeft, s.clientY - this.state.offsetTop).isOverEither;
      !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged && !this.state.multiElement && (f ? sa(this.interactiveCanvas) : Oa(this.interactiveCanvas, this.state));
      let h = it(s, this.state), { x: U, y: m } = h;
      if (!this.state.newElement && hP(this.state.activeTool.type)) {
        let { originOffset: I, snapLines: T } = fP(this.scene.getNonDeletedElements(), this, { x: U, y: m }, s, this.scene.getNonDeletedElementsMap());
        this.setState((A) => {
          let D = Wo(A.snapLines, T), R = A.originSnapOffset ? Wo(A.originSnapOffset, I) : I;
          return A.snapLines === D && A.originSnapOffset === R ? null : { snapLines: D, originSnapOffset: R };
        });
      } else !this.state.newElement && !this.state.selectedElementsAreBeingDragged && !this.state.selectionElement && this.setState((I) => I.snapLines.length ? { snapLines: [] } : null);
      if (this.state.editingLinearElement && !this.state.editingLinearElement.isDragging) {
        let I = ee.handlePointerMove(s, U, m, this, this.scene.getNonDeletedElementsMap());
        I && I !== this.state.editingLinearElement && za(() => {
          this.setState({ editingLinearElement: I });
        }), (I == null ? void 0 : I.lastUncommittedPoint) != null ? this.maybeSuggestBindingAtCursor(h, I.elbowed) : za(() => {
          this.setState({ suggestedBindings: [] });
        });
      }
      if (s8(this.state.activeTool.type)) {
        let { newElement: I } = this.state;
        Ga(I, !1) ? this.maybeSuggestBindingsForLinearElementAtCoords(I, [h], this.state.startBoundElement) : this.maybeSuggestBindingAtCursor(h, !1);
      }
      if (this.state.multiElement) {
        let { multiElement: I } = this.state, { x: T, y: A } = I, { points: D, lastCommittedPoint: R } = I, O = D[D.length - 1];
        if (Oa(this.interactiveCanvas, this.state), O === R) ze(k(U - T, m - A), O) >= md ? G(I, { points: [...D, k(U - T, m - A)] }, !1) : qe(this.interactiveCanvas, Ye.POINTER);
        else if (D.length > 2 && R && ze(k(U - T, m - A), R) < md) qe(this.interactiveCanvas, Ye.POINTER), G(I, { points: D.slice(0, -1) }, !1);
        else {
          let [$, F] = Lt(U, m, s[P.CTRL_OR_CMD] || te(I) ? null : this.getEffectiveGridSize()), [N, j] = (I == null ? void 0 : I.lastCommittedPoint) ?? [0, 0], z = $ - T - N, Y = F - A - j;
          ws(s) && ({ width: z, height: Y } = F1(N + T, j + A, $, F)), Ti(D, this.state.zoom.value) && qe(this.interactiveCanvas, Ye.POINTER), G(I, { points: [...D.slice(0, -1), k(N + z, j + Y)] }, !1, { isDragging: !0 }), this.triggerRender(!1);
        }
        return;
      }
      if (s.buttons || this.state.activeTool.type !== "selection" && this.state.activeTool.type !== "text" && this.state.activeTool.type !== "eraser") return;
      let g = this.scene.getNonDeletedElements(), b = this.scene.getSelectedElements(this.state);
      if (b.length === 1 && !f && !this.state.editingLinearElement) {
        if (this.state.selectedLinearElement && this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, U, m), (!this.state.selectedLinearElement || this.state.selectedLinearElement.hoverPointIndex === -1) && ((y = this.state.openDialog) == null ? void 0 : y.name) !== "elementLinkSelector" && !(b.length === 1 && te(b[0]))) {
          let I = kg(g, this.state, U, m, this.state.zoom, s.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
          if (I && I.transformHandleType) {
            qe(this.interactiveCanvas, Cg(I));
            return;
          }
        }
      } else if (b.length > 1 && !f && ((w = this.state.openDialog) == null ? void 0 : w.name) !== "elementLinkSelector") {
        let I = Mg(We(b), U, m, this.state.zoom, s.pointerType, this.device);
        if (I) {
          qe(this.interactiveCanvas, Cg({ transformHandleType: I }));
          return;
        }
      }
      let v = this.getElementAtPosition(h.x, h.y);
      this.hitLinkElement = this.getElementLinkAtPosition(h, v), !Fa(this.state) && (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? (qe(this.interactiveCanvas, Ye.POINTER), WW(this.hitLinkElement, this.state, this.scene.getNonDeletedElementsMap())) : (G6(), v && (v.link || xn(v)) && this.state.selectedElementIds[v.id] && !this.state.contextMenu && !this.state.showHyperlinkPopup ? this.setState({ showHyperlinkPopup: "info" }) : this.state.activeTool.type === "text" ? qe(this.interactiveCanvas, J(v) ? Ye.TEXT : Ye.CROSSHAIR) : this.state.viewModeEnabled ? qe(this.interactiveCanvas, Ye.GRAB) : ((x = this.state.openDialog) == null ? void 0 : x.name) === "elementLinkSelector" ? qe(this.interactiveCanvas, Ye.AUTO) : f ? qe(this.interactiveCanvas, Ye.AUTO) : this.state.selectedLinearElement ? this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, U, m) : s[P.CTRL_OR_CMD] ? qe(this.interactiveCanvas, Ye.AUTO) : (v || this.isHittingCommonBoundingBoxOfSelectedElements(h, b)) && !(v != null && v.locked) && (v && Gn(v) && this.isIframeLikeElementCenter(v, s, U, m) ? (qe(this.interactiveCanvas, Ye.POINTER), this.setState({ activeEmbeddable: { element: v, state: "hover" } })) : (!v || !te(v)) && (qe(this.interactiveCanvas, Ye.MOVE), ((S = this.state.activeEmbeddable) == null ? void 0 : S.state) === "hover" && this.setState({ activeEmbeddable: null })))), ((E = this.state.openDialog) == null ? void 0 : E.name) === "elementLinkSelector" && v ? this.setState((I) => ({ hoveredElementIds: Wo(I.hoveredElementIds, pn({ editingGroupId: I.editingGroupId, selectedElementIds: { [v.id]: !0 } }, this.scene.getNonDeletedElements(), I, this).selectedElementIds) })) : ((M = this.state.openDialog) == null ? void 0 : M.name) === "elementLinkSelector" && !v && this.setState((I) => ({ hoveredElementIds: Wo(I.hoveredElementIds, {}) })));
    }), L(this, "handleEraser", (s, u, f) => {
      this.eraserTrail.addPointToPath(f.x, f.y);
      let h = !1, U = /* @__PURE__ */ new Set(), m = this.scene.getNonDeletedElements(), g = (x) => {
        var S;
        for (let E of x) {
          if (E.locked) return;
          if (s.altKey ? this.elementsPendingErasure.delete(E.id) && (h = !0) : this.elementsPendingErasure.has(E.id) || (h = !0, this.elementsPendingErasure.add(E.id)), h && ((S = E.groupIds) == null ? void 0 : S.length)) {
            let M = E.groupIds.at(-1);
            if (!U.has(M)) {
              U.add(M);
              let I = ot(m, M);
              for (let T of I) s.altKey ? this.elementsPendingErasure.delete(T.id) : this.elementsPendingErasure.add(T.id);
            }
          }
        }
      }, b = ze(k(u.lastCoords.x, u.lastCoords.y), k(f.x, f.y)), v = this.getElementHitThreshold(), y = { ...u.lastCoords }, w = 0;
      for (; w <= b; ) {
        let x = this.getElementsAtPosition(y.x, y.y);
        if (g(x), w === b) break;
        w = Math.min(w + v, b);
        let S = w / b, E = (1 - S) * y.x + S * f.x, M = (1 - S) * y.y + S * f.y;
        y.x = E, y.y = M;
      }
      if (u.lastCoords.x = f.x, u.lastCoords.y = f.y, h) {
        for (let x of this.scene.getNonDeletedElements()) st(x) && (this.elementsPendingErasure.has(x.id) || this.elementsPendingErasure.has(x.containerId)) && (s.altKey ? (this.elementsPendingErasure.delete(x.id), this.elementsPendingErasure.delete(x.containerId)) : (this.elementsPendingErasure.add(x.id), this.elementsPendingErasure.add(x.containerId)));
        this.elementsPendingErasure = new Set(this.elementsPendingErasure), this.triggerRender();
      }
    }), L(this, "handleTouchMove", (s) => {
      es = !0;
    }), L(this, "handleCanvasPointerDown", (s) => {
      var v, y, w;
      let u = s.target;
      if (u.setPointerCapture && u.setPointerCapture(s.pointerId), this.maybeCleanupAfterMissingPointerUp(s.nativeEvent), this.maybeUnfollowRemoteUser(), this.state.searchMatches && (this.setState((x) => ({ searchMatches: x.searchMatches.map((S) => ({ ...S, focus: !1 })) })), ma.set(jv, null)), this.state.contextMenu && this.setState({ contextMenu: null }), this.state.snapLines && this.setAppState({ snapLines: [] }), this.updateGestureOnPointerDown(s), s.pointerType === "touch" && this.state.newElement && this.state.newElement.type === "freedraw") {
        let x = this.state.newElement;
        this.updateScene({ ...x.points.length < 10 ? { elements: this.scene.getElementsIncludingDeleted().filter((S) => S.id !== x.id) } : {}, appState: { newElement: null, editingTextElement: null, startBoundElement: null, suggestedBindings: [], selectedElementIds: Ne(Object.keys(this.state.selectedElementIds).filter((S) => S !== x.id).reduce((S, E) => (S[E] = this.state.selectedElementIds[E], S), {}), this.state) }, captureUpdate: ((v = this.state.openDialog) == null ? void 0 : v.name) === "elementLinkSelector" ? W.EVENTUALLY : W.NEVER });
        return;
      }
      let f = document.getSelection();
      if (f != null && f.anchorNode && f.removeAllRanges(), this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(s), !this.state.penDetected && s.pointerType === "pen" && this.setState((x) => ({ penMode: !0, penDetected: !0 })), !this.device.isTouchScreen && ["pen", "touch"].includes(s.pointerType) && (this.device = gd(this.device, { isTouchScreen: !0 })), Qo || (this.lastPointerDownEvent = s, this.handleCanvasPanUsingWheelOrSpaceDrag(s))) return;
      if (this.setState({ lastPointerDownWith: s.pointerType, cursorButton: "down" }), this.savePointer(s.clientX, s.clientY, "down"), s.button === Ki.ERASER && this.state.activeTool.type !== zt.eraser) {
        this.setState({ activeTool: _t(this.state, { type: zt.eraser, lastActiveToolBeforeEraser: this.state.activeTool }) }, () => {
          this.handleCanvasPointerDown(s);
          let x = () => {
            S(), E == null || E(), Fa(this.state) && this.setState({ activeTool: _t(this.state, { ...this.state.activeTool.lastActiveTool || { type: zt.selection }, lastActiveToolBeforeEraser: null }) });
          }, S = ut(window, "pointerup", x, { once: !0 }), E;
          requestAnimationFrame(() => {
            E = this.missingPointerEventCleanupEmitter.once(x);
          });
        });
        return;
      }
      if (s.button !== Ki.MAIN && s.button !== Ki.TOUCH && s.button !== Ki.ERASER || Pe.pointers.size > 1) return;
      let h = this.initialPointerDownState(s);
      if (this.setState({ selectedElementsAreBeingDragged: !1 }), this.handleDraggingScrollBar(s, h) || (this.clearSelectionIfNotUsingSelection(), this.updateBindingEnabledOnPointerMove(s), this.handleSelectionOnPointerDown(s, h)) || !(!this.state.penMode || s.pointerType !== "touch" || this.state.activeTool.type === "selection" || this.state.activeTool.type === "text" || this.state.activeTool.type === "image")) return;
      if (this.state.activeTool.type === "text") this.handleTextOnPointerDown(s, h);
      else if (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") this.handleLinearElementOnPointerDown(s, this.state.activeTool.type, h);
      else if (this.state.activeTool.type === "image") {
        qe(this.interactiveCanvas, Ye.CROSSHAIR);
        let x = this.state.pendingImageElementId && this.scene.getElement(this.state.pendingImageElementId);
        if (!x) return;
        this.setState({ newElement: x, pendingImageElementId: null, multiElement: null });
        let { x: S, y: E } = it(s, this.state), M = this.getTopLayerFrameAtSceneCoords({ x: S, y: E });
        G(x, { x: S, y: E, frameId: M ? M.id : null });
      } else this.state.activeTool.type === "freedraw" ? this.handleFreeDrawElementOnPointerDown(s, this.state.activeTool.type, h) : this.state.activeTool.type === "custom" ? Oa(this.interactiveCanvas, this.state) : this.state.activeTool.type === zt.frame || this.state.activeTool.type === zt.magicframe ? this.createFrameElementOnPointerDown(h, this.state.activeTool.type) : this.state.activeTool.type === "laser" ? this.laserTrails.startPath(h.lastCoords.x, h.lastCoords.y) : this.state.activeTool.type !== "eraser" && this.state.activeTool.type !== "hand" && this.createGenericElementOnPointerDown(this.state.activeTool.type, h);
      (w = (y = this.props) == null ? void 0 : y.onPointerDown) == null || w.call(y, this.state.activeTool, h), this.onPointerDownEmitter.trigger(this.state.activeTool, h, s), this.state.activeTool.type === "eraser" && this.eraserTrail.startPath(h.lastCoords.x, h.lastCoords.y);
      let U = this.onPointerMoveFromPointerDownHandler(h), m = this.onPointerUpFromPointerDownHandler(h), g = this.onKeyDownFromPointerDownHandler(h), b = this.onKeyUpFromPointerDownHandler(h);
      this.missingPointerEventCleanupEmitter.once((x) => m(x || s.nativeEvent)), (!this.state.viewModeEnabled || this.state.activeTool.type === "laser") && (window.addEventListener("pointermove", U), window.addEventListener("pointerup", m), window.addEventListener("keydown", g), window.addEventListener("keyup", b), h.eventListeners.onMove = U, h.eventListeners.onUp = m, h.eventListeners.onKeyUp = b, h.eventListeners.onKeyDown = g);
    }), L(this, "handleCanvasPointerUp", (s) => {
      var h;
      this.removePointer(s), this.lastPointerUpEvent = s;
      let u = it({ clientX: s.clientX, clientY: s.clientY }, this.state), f = s.timeStamp - (((h = this.lastPointerDownEvent) == null ? void 0 : h.timeStamp) ?? 0);
      if (this.device.editor.isMobile && f < 300) {
        let U = this.getElementAtPosition(u.x, u.y);
        if (Gn(U) && this.isIframeLikeElementCenter(U, s, u.x, u.y)) {
          this.handleEmbeddableCenterClick(U);
          return;
        }
      }
      if (this.device.isTouchScreen) {
        let U = this.getElementAtPosition(u.x, u.y);
        this.hitLinkElement = this.getElementLinkAtPosition(u, U);
      }
      this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? f < 300 && Gn(this.hitLinkElement) && !Z7(this.hitLinkElement, this.scene.getNonDeletedElementsMap(), this.state, k(u.x, u.y)) ? this.handleEmbeddableCenterClick(this.hitLinkElement) : this.redirectToLink(s, this.device.isTouchScreen) : this.state.viewModeEnabled && this.setState({ activeEmbeddable: null, selectedElementIds: {} });
    }), L(this, "maybeOpenContextMenuAfterPointerDownOnTouchDevices", (s) => {
      s.pointerType === "touch" && (es = !1, Yi ? es = !0 : Yi = window.setTimeout(() => {
        Yi = 0, es || this.handleCanvasContextMenu(s);
      }, jk));
    }), L(this, "resetContextMenuTimer", () => {
      clearTimeout(Yi), Yi = 0, es = !1;
    }), L(this, "maybeCleanupAfterMissingPointerUp", (s) => {
      Ar == null || Ar(), this.missingPointerEventCleanupEmitter.trigger(s).clear();
    }), L(this, "handleCanvasPanUsingWheelOrSpaceDrag", (s) => {
      if (!(Pe.pointers.size <= 1 && (s.button === Ki.WHEEL || s.button === Ki.MAIN && _r || ro(this.state) || this.state.viewModeEnabled))) return !1;
      Qo = !0, this.focusContainer(), this.state.editingTextElement || s.preventDefault();
      let u = !1, f = typeof window === void 0 ? !1 : /Linux/.test(window.navigator.platform);
      qe(this.interactiveCanvas, Ye.GRABBING);
      let { clientX: h, clientY: U } = s, m = Gh((b) => {
        let v = h - b.clientX, y = U - b.clientY;
        if (h = b.clientX, U = b.clientY, f && !u && (Math.abs(v) > 1 || Math.abs(y) > 1)) {
          u = !0;
          let w = (S) => {
            document.body.removeEventListener("paste", w), S.stopPropagation();
          }, x = () => {
            setTimeout(() => {
              document.body.removeEventListener("paste", w), window.removeEventListener("pointerup", x);
            }, 100);
          };
          document.body.addEventListener("paste", w), window.addEventListener("pointerup", x);
        }
        this.translateCanvas({ scrollX: this.state.scrollX - v / this.state.zoom.value, scrollY: this.state.scrollY - y / this.state.zoom.value });
      }), g = gt(Ar = () => {
        Ar = null, Qo = !1, _r || (this.state.viewModeEnabled ? qe(this.interactiveCanvas, Ye.GRAB) : Oa(this.interactiveCanvas, this.state)), this.setState({ cursorButton: "up" }), this.savePointer(s.clientX, s.clientY, "up"), window.removeEventListener("pointermove", m), window.removeEventListener("pointerup", g), window.removeEventListener("blur", g), m.flush();
      });
      return window.addEventListener("blur", g), window.addEventListener("pointermove", m, { passive: !0 }), window.addEventListener("pointerup", g), !0;
    }), L(this, "clearSelectionIfNotUsingSelection", () => {
      this.state.activeTool.type !== "selection" && this.setState({ selectedElementIds: Ne({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null });
    }), L(this, "handleSelectionOnPointerDown", (s, u) => {
      var f;
      if (this.state.activeTool.type === "selection") {
        let h = this.scene.getNonDeletedElements(), U = this.scene.getNonDeletedElementsMap(), m = this.scene.getSelectedElements(this.state);
        if (m.length === 1 && !this.state.editingLinearElement && !te(m[0]) && !(this.state.selectedLinearElement && this.state.selectedLinearElement.hoverPointIndex !== -1)) {
          let g = kg(h, this.state, u.origin.x, u.origin.y, this.state.zoom, s.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
          g != null && (g.transformHandleType === "rotation" ? (this.setState({ resizingElement: g.element }), u.resize.handleType = g.transformHandleType) : (this.state.croppingElementId || this.setState({ resizingElement: g.element }), u.resize.handleType = g.transformHandleType));
        } else m.length > 1 && (u.resize.handleType = Mg(We(m), u.origin.x, u.origin.y, this.state.zoom, s.pointerType, this.device));
        if (u.resize.handleType) u.resize.isResizing = !0, u.resize.offset = ha(hO(u.resize.handleType, m, U, u.origin.x, u.origin.y)), m.length === 1 && me(m[0]) && m[0].points.length === 2 && (u.resize.arrowDirection = pO(u.resize.handleType, m[0]));
        else {
          if (this.state.selectedLinearElement) {
            let v = this.state.editingLinearElement || this.state.selectedLinearElement, y = ee.handlePointerDown(s, this, this.store, u.origin, v, this.scene);
            if (y.hitElement && (u.hit.element = y.hitElement), y.linearElementEditor && (this.setState({ selectedLinearElement: y.linearElementEditor }), this.state.editingLinearElement && this.setState({ editingLinearElement: y.linearElementEditor })), y.didAddPoint) return !0;
          }
          if (u.hit.element = u.hit.element ?? this.getElementAtPosition(u.origin.x, u.origin.y), this.hitLinkElement = this.getElementLinkAtPosition(u.origin, u.hit.element), this.hitLinkElement) return !0;
          if (this.state.croppingElementId && ((f = u.hit.element) == null ? void 0 : f.id) !== this.state.croppingElementId && this.finishImageCropping(), u.hit.element && this.getElementLinkAtPosition({ x: u.origin.x, y: u.origin.y }, u.hit.element)) return !1;
          u.hit.allHitElements = this.getElementsAtPosition(u.origin.x, u.origin.y);
          let g = u.hit.element, b = u.hit.allHitElements.some((v) => this.isASelectedElement(v));
          if ((g === null || !b) && !s.shiftKey && !u.hit.hasHitCommonBoundingBoxOfSelectedElements && this.clearSelection(g), this.state.editingLinearElement) this.setState({ selectedElementIds: Ne({ [this.state.editingLinearElement.elementId]: !0 }, this.state) });
          else if (g != null) {
            if (s[P.CTRL_OR_CMD]) return this.state.selectedElementIds[g.id] || (u.hit.wasAddedToSelection = !0), this.setState((v) => ({ ...JR(v, g), previousSelectedElementIds: this.state.selectedElementIds })), !1;
            this.state.selectedElementIds[g.id] || (this.state.editingGroupId && !Ks(g, this.state.editingGroupId) && this.setState({ selectedElementIds: Ne({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null }), !b && !u.hit.hasHitCommonBoundingBoxOfSelectedElements && (this.setState((v) => {
              var x;
              let y = { ...v.selectedElementIds, [g.id]: !0 }, w = [];
              if (Object.keys(v.selectedElementIds).forEach((S) => {
                let E = this.scene.getElement(S);
                E && w.push(E);
              }), fe(g)) ri(w, g.id).forEach((S) => {
                delete y[S.id];
              });
              else if (g.frameId) y[g.frameId] && delete y[g.id];
              else {
                let S = g.groupIds, E = new Set(S.flatMap((M) => ot(this.scene.getNonDeletedElements(), M)).filter((M) => fe(M)).map((M) => M.id));
                E.size > 0 && w.forEach((M) => {
                  M.frameId && E.has(M.frameId) && (delete y[M.id], M.groupIds.flatMap((I) => ot(this.scene.getNonDeletedElements(), I)).forEach((I) => {
                    delete y[I.id];
                  }));
                });
              }
              return ((x = v.openDialog) == null ? void 0 : x.name) === "elementLinkSelector" && (g.groupIds.some((S) => v.selectedGroupIds[S]) || (y = { [g.id]: !0 })), { ...pn({ editingGroupId: v.editingGroupId, selectedElementIds: y }, this.scene.getNonDeletedElements(), v, this), showHyperlinkPopup: g.link || xn(g) ? "info" : !1 };
            }), u.hit.wasAddedToSelection = !0));
          }
          this.setState({ previousSelectedElementIds: this.state.selectedElementIds });
        }
      }
      return !1;
    }), L(this, "handleTextOnPointerDown", (s, u) => {
      if (this.state.editingTextElement) return;
      let f = u.origin.x, h = u.origin.y, U = this.getElementAtPosition(f, h, { includeBoundTextElement: !0 }), m = this.getTextBindableContainerAtPosition(f, h);
      ta(U) && (m = U, f = U.x + U.width / 2, h = U.y + U.height / 2), this.startTextEditing({ sceneX: f, sceneY: h, insertAtParentCenter: !s.altKey, container: m, autoEdit: !1 }), sa(this.interactiveCanvas), this.state.activeTool.locked || this.setState({ activeTool: _t(this.state, { type: "selection" }) });
    }), L(this, "handleFreeDrawElementOnPointerDown", (s, u, f) => {
      let [h, U] = Lt(f.origin.x, f.origin.y, null), m = this.getTopLayerFrameAtSceneCoords({ x: h, y: U }), g = s.pressure === 0.5, b = AP({ type: u, x: h, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: null, simulatePressure: g, locked: !1, frameId: m ? m.id : null, points: [k(0, 0)], pressures: g ? [] : [s.pressure] });
      this.scene.insertElement(b), this.setState((y) => {
        let w = { ...y.selectedElementIds };
        return delete w[b.id], { selectedElementIds: Ne(w, y) };
      });
      let v = Ua(f.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom);
      this.setState({ newElement: b, startBoundElement: v, suggestedBindings: [] });
    }), L(this, "insertIframeElement", ({ sceneX: s, sceneY: u, width: f, height: h }) => {
      var b;
      let [U, m] = Lt(s, u, (b = this.lastPointerDownEvent) != null && b[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), g = IP({ type: "iframe", x: U, y: m, strokeColor: "transparent", backgroundColor: "transparent", fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: this.getCurrentItemRoundness("iframe"), opacity: this.state.currentItemOpacity, locked: !1, width: f, height: h });
      return this.scene.insertElement(g), g;
    }), L(this, "insertEmbeddableElement", ({ sceneX: s, sceneY: u, link: f }) => {
      var b;
      let [h, U] = Lt(s, u, (b = this.lastPointerDownEvent) != null && b[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = Gl(f);
      if (!m) return;
      m.error instanceof URIError && this.setToast({ message: C("toast.unrecognizedLinkFormat"), closable: !0 });
      let g = Vm({ type: "embeddable", x: h, y: U, strokeColor: "transparent", backgroundColor: "transparent", fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: this.getCurrentItemRoundness("embeddable"), opacity: this.state.currentItemOpacity, locked: !1, width: m.intrinsicSize.w, height: m.intrinsicSize.h, link: f });
      return this.scene.insertElement(g), g;
    }), L(this, "createImageElement", ({ sceneX: s, sceneY: u, addToFrameUnderCursor: f = !0 }) => {
      var g;
      let [h, U] = Lt(s, u, (g = this.lastPointerDownEvent) != null && g[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = f ? this.getTopLayerFrameAtSceneCoords({ x: h, y: U }) : null;
      return R7({ type: "image", x: h, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, roundness: null, opacity: this.state.currentItemOpacity, locked: !1, frameId: m ? m.id : null });
    }), L(this, "handleLinearElementOnPointerDown", (s, u, f) => {
      if (this.state.multiElement) {
        let { multiElement: h } = this.state;
        if (h.type === "line" && Ti(h.points, this.state.zoom.value)) {
          G(h, { lastCommittedPoint: h.points[h.points.length - 1] }), this.actionManager.executeAction(la);
          return;
        }
        if (te(h) && h.points.length > 1) {
          G(h, { lastCommittedPoint: h.points[h.points.length - 1] }), this.actionManager.executeAction(la);
          return;
        }
        let { x: U, y: m, lastCommittedPoint: g } = h;
        if (h.points.length > 1 && g && ze(k(f.origin.x - U, f.origin.y - m), g) < md) {
          this.actionManager.executeAction(la);
          return;
        }
        this.setState((b) => ({ selectedElementIds: Ne({ ...b.selectedElementIds, [h.id]: !0 }, b) })), G(h, { lastCommittedPoint: h.points[h.points.length - 1] }), qe(this.interactiveCanvas, Ye.POINTER);
      } else {
        let [h, U] = Lt(f.origin.x, f.origin.y, s[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), m = this.getTopLayerFrameAtSceneCoords({ x: h, y: U }), { currentItemStartArrowhead: g, currentItemEndArrowhead: b } = this.state, [v, y] = u === "arrow" ? [g, b] : [null, null], w = u === "arrow" ? fp({ type: u, x: h, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.state.currentItemArrowType === Gt.round ? { type: Pt.PROPORTIONAL_RADIUS } : null, startArrowhead: v, endArrowhead: y, locked: !1, frameId: m ? m.id : null, elbowed: this.state.currentItemArrowType === Gt.elbow, fixedSegments: this.state.currentItemArrowType === Gt.elbow ? [] : null }) : qr({ type: u, x: h, y: U, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.state.currentItemRoundness === "round" ? { type: Pt.PROPORTIONAL_RADIUS } : null, locked: !1, frameId: m ? m.id : null });
        this.setState((S) => {
          let E = { ...S.selectedElementIds };
          return delete E[w.id], { selectedElementIds: Ne(E, S) };
        }), G(w, { points: [...w.points, k(0, 0)] });
        let x = Ua(f.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, te(w), te(w));
        this.scene.insertElement(w), this.setState({ newElement: w, startBoundElement: x, suggestedBindings: [] });
      }
    }), L(this, "createGenericElementOnPointerDown", (s, u) => {
      var b;
      let [f, h] = Lt(u.origin.x, u.origin.y, (b = this.lastPointerDownEvent) != null && b[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), U = this.getTopLayerFrameAtSceneCoords({ x: f, y: h }), m = { x: f, y: h, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, roundness: this.getCurrentItemRoundness(s), locked: !1, frameId: U ? U.id : null }, g;
      s === "embeddable" ? g = Vm({ type: "embeddable", ...m }) : g = ai({ type: s, ...m }), g.type === "selection" ? this.setState({ selectionElement: g }) : (this.scene.insertElement(g), this.setState({ multiElement: null, newElement: g }));
    }), L(this, "createFrameElementOnPointerDown", (s, u) => {
      var g;
      let [f, h] = Lt(s.origin.x, s.origin.y, (g = this.lastPointerDownEvent) != null && g[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), U = { x: f, y: h, opacity: this.state.currentItemOpacity, locked: !1, ...pt }, m = u === zt.magicframe ? L1(U) : up(U);
      this.scene.insertElement(m), this.setState({ multiElement: null, newElement: m });
    }), L(this, "restoreReadyToEraseElements", () => {
      this.elementsPendingErasure = /* @__PURE__ */ new Set(), this.triggerRender();
    }), L(this, "eraseElements", () => {
      let s = !1, u = this.scene.getElementsIncludingDeleted().map((f) => this.elementsPendingErasure.has(f.id) || f.frameId && this.elementsPendingErasure.has(f.frameId) || st(f) && this.elementsPendingErasure.has(f.containerId) ? (s = !0, ve(f, { isDeleted: !0 })) : f);
      this.elementsPendingErasure = /* @__PURE__ */ new Set(), s && (this.store.shouldCaptureIncrement(), this.scene.replaceAllElements(u));
    }), L(this, "initializeImage", async ({ imageFile: s, imageElement: u, showCursorImagePreview: f = !1 }) => {
      var b, v, y, w, x;
      if (!Jr(s)) throw new Error(C("errors.unsupportedFileType"));
      let h = s.type;
      if (qe(this.interactiveCanvas, "wait"), h === de.svg) try {
        s = Ag(ng(await s.text()), s.name);
      } catch (S) {
        throw console.warn(S), new Error(C("errors.svgImageInsertError"));
      }
      let U = await (((v = (b = this.props).generateIdForFile) == null ? void 0 : v.call(b, s)) || CO(s));
      if (!U) throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."), new Error(C("errors.imageInsertError"));
      if (!((y = this.files[U]) != null && y.dataURL)) {
        try {
          s = await X1(s, { maxWidthOrHeight: eM });
        } catch (S) {
          console.error("Error trying to resizing image file on insertion", S);
        }
        if (s.size > j2) throw new Error(C("errors.fileTooBig", { maxSize: `${Math.trunc(j2 / 1024 / 1024)}MB` }));
      }
      if (f) {
        let S = (w = this.files[U]) == null ? void 0 : w.dataURL, E = S && TO(S);
        this.setImagePreviewCursor(E || s);
      }
      let m = ((x = this.files[U]) == null ? void 0 : x.dataURL) || await _g(s), g = G(u, { fileId: U }, !1);
      return new Promise(async (S, E) => {
        var M;
        try {
          this.addMissingFiles([{ mimeType: h, id: U, dataURL: m, created: Date.now(), lastRetrieved: Date.now() }]);
          let I = this.imageCache.get(U);
          I || (this.addNewImagesToImageCache(), await this.updateImageCache([g])), (I == null ? void 0 : I.image) instanceof Promise && await I.image, this.state.pendingImageElementId !== g.id && ((M = this.state.newElement) == null ? void 0 : M.id) !== g.id && this.initializeImageDimensions(g, !0), S(g);
        } catch (I) {
          console.error(I), E(new Error(C("errors.imageInsertError")));
        } finally {
          f || sa(this.interactiveCanvas);
        }
      });
    }), L(this, "insertImageElement", async (s, u, f) => {
      if (!this.isToolSupported("image")) {
        this.setState({ errorMessage: C("errors.imageToolNotSupported") });
        return;
      }
      this.scene.insertElement(s);
      try {
        return await this.initializeImage({ imageFile: u, imageElement: s, showCursorImagePreview: f });
      } catch (h) {
        return G(s, { isDeleted: !0 }), this.actionManager.executeAction(la), this.setState({ errorMessage: h.message || C("errors.imageInsertError") }), null;
      }
    }), L(this, "setImagePreviewCursor", async (s) => {
      let u;
      try {
        u = await X1(s, { maxWidthOrHeight: 96 });
      } catch (h) {
        throw h.cause === "UNSUPPORTED" ? new Error(C("errors.unsupportedFileType")) : h;
      }
      let f = await _g(u);
      if (s.type === de.svg) {
        let h = await W7(f), U = Math.min(h.height, 96), m = U * (h.width / h.height);
        m > 96 && (m = 96, U = m * (h.height / h.width));
        let g = document.createElement("canvas");
        g.height = U, g.width = m, g.getContext("2d").drawImage(h, 0, 0, m, U), f = g.toDataURL(de.svg);
      }
      this.state.pendingImageElementId && qe(this.interactiveCanvas, `url(${f}) 4 4, auto`);
    }), L(this, "onImageAction", async ({ insertOnCanvasDirectly: s }) => {
      try {
        let u = this.state.width / 2 + this.state.offsetLeft, f = this.state.height / 2 + this.state.offsetTop, { x: h, y: U } = it({ clientX: u, clientY: f }, this.state), m = await pp({ description: "Image", extensions: Object.keys(io) }), g = this.createImageElement({ sceneX: h, sceneY: U, addToFrameUnderCursor: !1 });
        s ? (this.insertImageElement(g, m), this.initializeImageDimensions(g), this.setState({ selectedElementIds: Ne({ [g.id]: !0 }, this.state) }, () => {
          this.actionManager.executeAction(la);
        })) : this.setState({ pendingImageElementId: g.id }, () => {
          this.insertImageElement(g, m, !0);
        });
      } catch (u) {
        u.name !== "AbortError" ? console.error(u) : console.warn(u), this.setState({ pendingImageElementId: null, newElement: null, activeTool: _t(this.state, { type: "selection" }) }, () => {
          this.actionManager.executeAction(la);
        });
      }
    }), L(this, "initializeImageDimensions", (s, u = !1) => {
      var h;
      let f = Vn(s) && ((h = this.imageCache.get(s.fileId)) == null ? void 0 : h.image);
      if (!f || f instanceof Promise) {
        if (s.width < Pr / this.state.zoom.value && s.height < Pr / this.state.zoom.value) {
          let U = 100 / this.state.zoom.value;
          G(s, { x: s.x - U / 2, y: s.y - U / 2, width: U, height: U });
        }
        return;
      }
      if (u || s.width < Pr / this.state.zoom.value && s.height < Pr / this.state.zoom.value) {
        let U = Math.max(this.state.height - 120, 160), m = Math.min(U, Math.floor(this.state.height * 0.5) / this.state.zoom.value), g = Math.min(f.naturalHeight, m), b = g * (f.naturalWidth / f.naturalHeight), v = s.x + s.width / 2 - b / 2, y = s.y + s.height / 2 - g / 2;
        G(s, { x: v, y, width: b, height: g, crop: null });
      }
    }), L(this, "updateImageCache", async (s, u = this.files) => {
      let { updatedFiles: f, erroredFiles: h } = await V7({ imageCache: this.imageCache, fileIds: s.map((U) => U.fileId), files: u });
      if (f.size || h.size) for (let U of s) f.has(U.fileId) && mt.delete(U);
      return h.size && this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map((U) => Vn(U) && h.has(U.fileId) ? ve(U, { status: "error" }) : U)), { updatedFiles: f, erroredFiles: h };
    }), L(this, "addNewImagesToImageCache", async (s = G7(this.scene.getNonDeletedElements()), u = this.files) => {
      let f = s.filter((h) => !h.isDeleted && !this.imageCache.has(h.fileId));
      if (f.length) {
        let { updatedFiles: h } = await this.updateImageCache(f, u);
        h.size && this.scene.triggerUpdate();
      }
    }), L(this, "scheduleImageRefresh", dc(() => {
      this.addNewImagesToImageCache();
    }, Vk)), L(this, "updateBindingEnabledOnPointerMove", (s) => {
      let u = CR(s);
      this.state.isBindingEnabled !== u && this.setState({ isBindingEnabled: u });
    }), L(this, "maybeSuggestBindingAtCursor", (s, u) => {
      let f = Ua(s, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, !1, u);
      this.setState({ suggestedBindings: f != null ? [f] : [] });
    }), L(this, "maybeSuggestBindingsForLinearElementAtCoords", (s, u, f) => {
      if (!u.length) return;
      let h = u.reduce((U, m) => {
        let g = Ua(m, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), this.state.zoom, te(s), te(s));
        return g != null && !f7(s, f == null ? void 0 : f.id, g) && U.push(g), U;
      }, []);
      this.setState({ suggestedBindings: h });
    }), L(this, "handleInteractiveCanvasRef", (s) => {
      var u, f;
      s !== null ? (this.interactiveCanvas = s, this.interactiveCanvas.addEventListener("touchstart", this.onTouchStart, { passive: !1 }), this.interactiveCanvas.addEventListener("touchend", this.onTouchEnd)) : ((u = this.interactiveCanvas) == null || u.removeEventListener("touchstart", this.onTouchStart), (f = this.interactiveCanvas) == null || f.removeEventListener("touchend", this.onTouchEnd));
    }), L(this, "handleAppOnDrop", async (s) => {
      var g, b, v, y;
      let { file: u, fileHandle: f } = await DO(s), { x: h, y: U } = it(s, this.state);
      try {
        if (Jr(u) && this.isToolSupported("image")) {
          if ((u == null ? void 0 : u.type) === de.png || (u == null ? void 0 : u.type) === de.svg) try {
            let x = await T3(u, this.state, this.scene.getElementsIncludingDeleted(), f);
            this.syncActionResult({ ...x, appState: { ...x.appState || this.state, isLoading: !1 }, replaceFiles: !0, captureUpdate: W.IMMEDIATELY });
            return;
          } catch (x) {
            if (x.name !== "EncodingError") throw new Error(C("alerts.couldNotLoadInvalidFile"));
          }
          let w = this.createImageElement({ sceneX: h, sceneY: U });
          this.insertImageElement(w, u), this.initializeImageDimensions(w), this.setState({ selectedElementIds: Ne({ [w.id]: !0 }, this.state) });
          return;
        }
      } catch (w) {
        return this.setState({ isLoading: !1, errorMessage: w.message });
      }
      let m = s.dataTransfer.getData(de.excalidrawlib);
      if (m && typeof m == "string") {
        try {
          let w = _3(m);
          this.addElementsFromPasteOrLibrary({ elements: K9(w), position: s, files: null });
        } catch (w) {
          this.setState({ errorMessage: w.message });
        }
        return;
      }
      if (u && await this.loadFileToCanvas(u, f), (b = (g = s.dataTransfer) == null ? void 0 : g.types) == null ? void 0 : b.includes("text/plain")) {
        let w = (v = s.dataTransfer) == null ? void 0 : v.getData("text");
        if (w && kd(w, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(w) || ((y = Gl(w)) == null ? void 0 : y.type) === "video")) {
          let x = this.insertEmbeddableElement({ sceneX: h, sceneY: U, link: Nn(w) });
          x && this.setState({ selectedElementIds: { [x.id]: !0 } });
        }
      }
    }), L(this, "loadFileToCanvas", async (s, u) => {
      s = await jp(s);
      try {
        let f = this.scene.getElementsIncludingDeleted(), h;
        try {
          h = await I3(s, this.state, f, u);
        } catch (U) {
          let m = U instanceof Xr;
          if (m && U.code === "IMAGE_NOT_CONTAINS_SCENE_DATA" && !this.isToolSupported("image")) {
            this.setState({ isLoading: !1, errorMessage: C("errors.imageToolNotSupported") });
            return;
          }
          let g = C(m ? "alerts.cannotRestoreFromImage" : "alerts.couldNotLoadInvalidFile");
          this.setState({ isLoading: !1, errorMessage: g });
        }
        if (!h) return;
        h.type === de.excalidraw ? (Li(f.concat(h.data.elements)), this.store.updateSnapshot(he(f), this.state), this.setState({ isLoading: !0 }), this.syncActionResult({ ...h.data, appState: { ...h.data.appState || this.state, isLoading: !1 }, replaceFiles: !0, captureUpdate: W.IMMEDIATELY })) : h.type === de.excalidrawlib && await this.library.updateLibrary({ libraryItems: s, merge: !0, openLibraryMenu: !0 }).catch((U) => {
          console.error(U), this.setState({ errorMessage: C("errors.importLibraryError") });
        });
      } catch (f) {
        this.setState({ isLoading: !1, errorMessage: f.message });
      }
    }), L(this, "handleCanvasContextMenu", (s) => {
      if (s.preventDefault(), ("pointerType" in s.nativeEvent && s.nativeEvent.pointerType === "touch" || "pointerType" in s.nativeEvent && s.nativeEvent.pointerType === "pen" && s.button !== Ki.SECONDARY) && this.state.activeTool.type !== "selection") return;
      let { x: u, y: f } = it(s, this.state), h = this.getElementAtPosition(u, f, { preferSelected: !0, includeLockedElements: !0 }), U = this.scene.getSelectedElements(this.state), m = this.isHittingCommonBoundingBoxOfSelectedElements({ x: u, y: f }, U), g = h || m ? "element" : "canvas", b = this.excalidrawContainerRef.current, { top: v, left: y } = b.getBoundingClientRect(), w = s.clientX - y, x = s.clientY - v;
      rt("contextMenu", "openContextMenu", g), this.setState({ ...h && !this.state.selectedElementIds[h.id] ? { ...this.state, ...pn({ editingGroupId: this.state.editingGroupId, selectedElementIds: { [h.id]: !0 } }, this.scene.getNonDeletedElements(), this.state, this), selectedLinearElement: me(h) ? new ee(h) : null } : this.state, showHyperlinkPopup: !1 }, () => {
        this.setState({ contextMenu: { top: x, left: w, items: this.getContextMenuItems(g) } });
      });
    }), L(this, "maybeDragNewGenericElement", (s, u, f = !0) => {
      var S, E, M;
      let h = this.state.selectionElement, U = s.lastCoords;
      if (h && this.state.activeTool.type !== "eraser") {
        Tg({ newElement: h, elementType: this.state.activeTool.type, originX: s.origin.x, originY: s.origin.y, x: U.x, y: U.y, width: rn(s.origin.x, U.x), height: rn(s.origin.y, U.y), shouldMaintainAspectRatio: Vo(u), shouldResizeFromCenter: ch(u), zoom: this.state.zoom.value, informMutation: f });
        return;
      }
      let m = this.state.newElement;
      if (!m) return;
      let [g, b] = Lt(U.x, U.y, u[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = Vn(m) && ((S = this.imageCache.get(m.fileId)) == null ? void 0 : S.image), y = v && !(v instanceof Promise) ? v.width / v.height : null;
      this.maybeCacheReferenceSnapPoints(u, [m]);
      let { snapOffset: w, snapLines: x } = uP(m, this, u, { x: s.originInGrid.x + (((E = this.state.originSnapOffset) == null ? void 0 : E.x) ?? 0), y: s.originInGrid.y + (((M = this.state.originSnapOffset) == null ? void 0 : M.y) ?? 0) }, { x: g - s.originInGrid.x, y: b - s.originInGrid.y }, this.scene.getNonDeletedElementsMap());
      g += w.x, b += w.y, this.setState({ snapLines: x }), Tg({ newElement: m, elementType: this.state.activeTool.type, originX: s.originInGrid.x, originY: s.originInGrid.y, x: g, y: b, width: rn(s.originInGrid.x, g), height: rn(s.originInGrid.y, b), shouldMaintainAspectRatio: Oe(m) ? !Vo(u) : Vo(u), shouldResizeFromCenter: ch(u), zoom: this.state.zoom.value, widthAspectRatio: y, originOffset: this.state.originSnapOffset, informMutation: f }), this.setState({ newElement: m }), (this.state.activeTool.type === zt.frame || this.state.activeTool.type === zt.magicframe) && this.setState({ elementsToHighlight: Cd(this.scene.getNonDeletedElements(), m, this.state, this.scene.getNonDeletedElementsMap()) });
    }), L(this, "maybeHandleCrop", (s, u) => {
      var b;
      if (!this.state.croppingElementId) return !1;
      let f = s.resize.handleType, h = s.lastCoords, [U, m] = Lt(h.x - s.resize.offset.x, h.y - s.resize.offset.y, u[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), g = this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);
      if (f && g && Oe(g)) {
        let v = s.originalElements.get(g.id), y = Vn(g) && ((b = this.imageCache.get(g.fileId)) == null ? void 0 : b.image);
        if (v && Oe(v) && y && !(y instanceof Promise)) {
          let [w, x] = Lt(h.x, h.y, u[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), S = { x: w - s.originInGrid.x, y: x - s.originInGrid.y };
          this.maybeCacheReferenceSnapPoints(u, [g]);
          let { snapOffset: E, snapLines: M } = Xm([g], [v], this, u, S, f);
          G(g, KL(g, f, y.naturalWidth, y.naturalHeight, U + E.x, m + E.y, u.shiftKey ? v.width / v.height : void 0)), In(g, this.scene.getNonDeletedElementsMap(), { newSize: { width: g.width, height: g.height } }), this.setState({ isCropping: f && f !== "rotation", snapLines: M });
        }
        return !0;
      }
      return !1;
    }), L(this, "maybeHandleResize", (s, u) => {
      let f = this.scene.getSelectedElements(this.state), h = f.filter((y) => fe(y)), U = s.resize.handleType;
      if (h.length > 0 && U === "rotation" || f.length === 1 && te(f[0]) || this.state.croppingElementId) return !1;
      this.setState({ isResizing: U && U !== "rotation", isRotating: U === "rotation", activeEmbeddable: null });
      let m = s.lastCoords, [g, b] = Lt(m.x - s.resize.offset.x, m.y - s.resize.offset.y, u[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = /* @__PURE__ */ new Map();
      if (h.forEach((y) => {
        ri(this.scene.getNonDeletedElements(), y.id).forEach((w) => {
          v.set(y.id + w.id, { x: w.x - y.x, y: w.y - y.y });
        });
      }), !this.state.selectedElementsAreBeingDragged) {
        let [y, w] = Lt(m.x, m.y, u[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), x = { x: y - s.originInGrid.x, y: w - s.originInGrid.y }, S = [...s.originalElements.values()];
        this.maybeCacheReferenceSnapPoints(u, f);
        let { snapOffset: E, snapLines: M } = Xm(f, Ee(S, this.state), this, u, x, U);
        g += E.x, b += E.y, this.setState({ snapLines: M });
      }
      if (cO(s.originalElements, U, f, this.scene.getElementsMapIncludingDeleted(), this.scene, ws(u), ch(u), f.some((y) => Oe(y)) ? !Vo(u) : Vo(u), g, b, s.resize.center.x, s.resize.center.y)) {
        let y = uh(f, this.scene.getNonDeletedElementsMap(), this.state.zoom), w = /* @__PURE__ */ new Set();
        return h.forEach((x) => {
          Cd(this.scene.getNonDeletedElements(), x, this.state, this.scene.getNonDeletedElementsMap()).forEach((S) => w.add(S));
        }), this.setState({ elementsToHighlight: [...w], suggestedBindings: y }), !0;
      }
      return !1;
    }), L(this, "getContextMenuItems", (s) => {
      let u = [];
      return u.push(H6, B6), s === "canvas" ? this.state.viewModeEnabled ? [...u, W6, h0, S5, p0] : [z6, Ot, H6, B6, X6, Ot, CX, YW, Ot, W6, PW, h0, S5, p0] : (u.push(X6), this.state.viewModeEnabled ? [Pd, ...u] : [Ot, F6, Pd, z6, Ot, bY, vY, yY, Ot, uG, Ot, ...u, Ot, yW, wW, Ot, xW, rZ, NW, OW, FW, SW, Ot, IW, Ot, xX, SX, kX, MX, Ot, DW, LW, Ot, dG, Ot, j9, cv, Ot, AX, jW, Ot, m9]);
    }), L(this, "handleWheel", gt((s) => {
      if (!(s.target instanceof HTMLCanvasElement || s.target instanceof HTMLTextAreaElement || s.target instanceof HTMLIFrameElement)) {
        s[P.CTRL_OR_CMD] && s.preventDefault();
        return;
      }
      if (s.preventDefault(), Qo) return;
      let { deltaX: u, deltaY: f } = s;
      if (s.metaKey || s.ctrlKey) {
        let h = Math.sign(f), U = Xu * 100, m = Math.abs(f), g = f;
        m > U && (g = U * h);
        let b = this.state.zoom.value - g / 100;
        b += Math.log10(Math.max(1, this.state.zoom.value)) * -h * Math.min(1, m / 20), this.translateCanvas((v) => ({ ...Gr({ viewportX: this.lastViewportPosition.x, viewportY: this.lastViewportPosition.y, nextZoom: Si(b) }, v), shouldCacheIgnoreZoom: !0 })), this.resetShouldCacheIgnoreZoomDebounced();
        return;
      }
      if (s.shiftKey) {
        this.translateCanvas(({ zoom: h, scrollX: U }) => ({ scrollX: U - (f || u) / h.value }));
        return;
      }
      this.translateCanvas(({ zoom: h, scrollX: U, scrollY: m }) => ({ scrollX: U - u / h.value, scrollY: m - f / h.value }));
    })), L(this, "savePointer", (s, u, f) => {
      var g, b;
      if (!s || !u) return;
      let { x: h, y: U } = it({ clientX: s, clientY: u }, this.state), m = { x: h, y: U, tool: this.state.activeTool.type === "laser" ? "laser" : "pointer" };
      (b = (g = this.props).onPointerUpdate) == null || b.call(g, { pointer: m, button: f, pointersMap: Pe.pointers });
    }), L(this, "resetShouldCacheIgnoreZoomDebounced", oo(() => {
      this.unmounted || this.setState({ shouldCacheIgnoreZoom: !1 });
    }, 300)), L(this, "updateDOMRect", (s) => {
      var u;
      if ((u = this.excalidrawContainerRef) != null && u.current) {
        let f = this.excalidrawContainerRef.current, { width: h, height: U, left: m, top: g } = f.getBoundingClientRect(), { width: b, height: v, offsetTop: y, offsetLeft: w } = this.state;
        if (h === b && U === v && m === w && g === y) {
          s && s();
          return;
        }
        this.setState({ width: h, height: U, offsetLeft: m, offsetTop: g }, () => {
          s && s();
        });
      }
    }), L(this, "refresh", () => {
      this.setState({ ...this.getCanvasOffsets() });
    });
    let n = ei(), { excalidrawAPI: a, viewModeEnabled: i = !1, zenModeEnabled: r = !1, gridModeEnabled: l = !1, objectsSnapModeEnabled: o = !1, theme: c = n.theme, name: d = `${C("labels.untitled")}-${Q2()}` } = t;
    if (this.state = { ...n, theme: c, isLoading: !0, ...this.getCanvasOffsets(), viewModeEnabled: i, zenModeEnabled: r, objectsSnapModeEnabled: o, gridModeEnabled: l ?? n.gridModeEnabled, name: d, width: window.innerWidth, height: window.innerHeight }, this.id = D0(), this.library = new iV(this), this.actionManager = new UG(this.syncActionResult, () => this.state, () => this.scene.getElementsIncludingDeleted(), this), this.scene = new Ri(), this.canvas = document.createElement("canvas"), this.rc = wr.canvas(this.canvas), this.renderer = new A5(this.scene), this.visibleElements = [], this.store = new OP(), this.history = new e5(), a) {
      let s = { updateScene: this.updateScene, updateLibrary: this.library.updateLibrary, addFiles: this.addFiles, resetScene: this.resetScene, getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted, history: { clear: this.resetHistory }, scrollToContent: this.scrollToContent, getSceneElements: this.getSceneElements, getAppState: () => this.state, getFiles: () => this.files, getName: this.getName, registerAction: (u) => {
        this.actionManager.registerAction(u);
      }, refresh: this.refresh, setToast: this.setToast, id: this.id, setActiveTool: this.setActiveTool, setCursor: this.setCursor, resetCursor: this.resetCursor, updateFrameRendering: this.updateFrameRendering, toggleSidebar: this.toggleSidebar, onChange: (u) => this.onChangeEmitter.on(u), onPointerDown: (u) => this.onPointerDownEmitter.on(u), onPointerUp: (u) => this.onPointerUpEmitter.on(u), onScrollChange: (u) => this.onScrollChangeEmitter.on(u), onUserFollow: (u) => this.onUserFollowEmitter.on(u) };
      typeof a == "function" ? a(s) : console.error("excalidrawAPI should be a function!");
    }
    this.excalidrawContainerValue = { container: this.excalidrawContainerRef.current, id: this.id }, this.fonts = new Mi(this.scene), this.history = new e5(), this.actionManager.registerAll(D1), this.actionManager.registerAction(hG(this.history, this.store)), this.actionManager.registerAction(pG(this.history, this.store));
  }
  onWindowMessage(t) {
    if (t.origin !== "https://player.vimeo.com" && t.origin !== "https://www.youtube.com") return;
    let n = null;
    try {
      n = JSON.parse(t.data);
    } catch {
    }
    if (n) switch (t.origin) {
      case "https://player.vimeo.com":
        if (n.method === "paused") {
          let a = null, i = document.body.querySelectorAll("iframe.excalidraw__embeddable");
          if (!i) break;
          for (let r of i) r.contentWindow === t.source && (a = r.contentWindow);
          a == null || a.postMessage(JSON.stringify({ method: n.value ? "play" : "pause", value: !0 }), "*");
        }
        break;
      case "https://www.youtube.com":
        if (n.event === "infoDelivery" && n.info && n.id && typeof n.info.playerState == "number") {
          let a = n.id, i = n.info.playerState;
          Object.values(zc).includes(i) && Qh.set(a, i);
        }
        break;
    }
  }
  cacheEmbeddableRef(t, n) {
    n && this.iFrameRefs.set(t.id, n);
  }
  getHTMLIFrameElement(t) {
    return this.iFrameRefs.get(t.id);
  }
  handleEmbeddableCenterClick(t) {
    var a, i, r, l;
    if (((a = this.state.activeEmbeddable) == null ? void 0 : a.element) === t && ((i = this.state.activeEmbeddable) == null ? void 0 : i.state) === "active" || (setTimeout(() => {
      this.setState({ activeEmbeddable: { element: t, state: "active" }, selectedElementIds: { [t.id]: !0 }, newElement: null, selectionElement: null });
    }, 100), er(t))) return;
    let n = this.getHTMLIFrameElement(t);
    if (n != null && n.contentWindow) {
      if (n.src.includes("youtube")) {
        let o = Qh.get(t.id);
        switch (o || (Qh.set(t.id, zc.UNSTARTED), n.contentWindow.postMessage(JSON.stringify({ event: "listening", id: t.id }), "*")), o) {
          case zc.PLAYING:
          case zc.BUFFERING:
            (r = n.contentWindow) == null || r.postMessage(JSON.stringify({ event: "command", func: "pauseVideo", args: "" }), "*");
            break;
          default:
            (l = n.contentWindow) == null || l.postMessage(JSON.stringify({ event: "command", func: "playVideo", args: "" }), "*");
        }
      }
      n.src.includes("player.vimeo.com") && n.contentWindow.postMessage(JSON.stringify({ method: "paused" }), "*");
    }
  }
  isIframeLikeElementCenter(t, n, a, i) {
    var r, l;
    return t && !n.altKey && !n.shiftKey && !n.metaKey && !n.ctrlKey && (((r = this.state.activeEmbeddable) == null ? void 0 : r.element) !== t || ((l = this.state.activeEmbeddable) == null ? void 0 : l.state) === "hover" || !this.state.activeEmbeddable) && a >= t.x + t.width / 3 && a <= t.x + 2 * t.width / 3 && i >= t.y + t.height / 3 && i <= t.y + 2 * t.height / 3;
  }
  renderEmbeddables() {
    let t = this.state.zoom.value, n = this.state.width, a = this.state.height, i = this.scene.getNonDeletedElements().filter((r) => xn(r) && this.embedsValidationStatus.get(r.id) === !0 || er(r));
    return p(le, { children: i.map((r) => {
      var h, U, m, g, b, v, y, w, x;
      let { x: l, y: o } = fa({ sceneX: r.x, sceneY: r.y }, this.state), c = vu(r, n, a, this.state, this.scene.getNonDeletedElementsMap()), d = this.initializedEmbeds.has(r.id);
      if (c && !d && this.initializedEmbeds.add(r.id), !(c || d)) return null;
      let s;
      if (er(r)) {
        s = null;
        let S = (((h = r.customData) == null ? void 0 : h.generationData) ?? this.magicGenerations.get(r.id)) || { status: "error", message: "No generation data", code: "ERR_NO_GENERATION_DATA" };
        if (S.status === "done") {
          let E = S.html;
          s = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => E };
        } else if (S.status === "pending") s = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => Es(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme === Ie.DARK ? "white" : "black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `) };
        else {
          let E;
          S.code === "ERR_GENERATION_INTERRUPTED" ? E = "Generation was interrupted..." : E = S.message || "Generation failed", s = { intrinsicSize: { w: r.width, h: r.height }, type: "document", srcdoc: () => Es(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${ke.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${E}</h3>
                  `) };
        }
      } else s = Gl(I7(r.link || ""));
      let u = ((U = this.state.activeEmbeddable) == null ? void 0 : U.element) === r && ((m = this.state.activeEmbeddable) == null ? void 0 : m.state) === "active", f = ((g = this.state.activeEmbeddable) == null ? void 0 : g.element) === r && ((b = this.state.activeEmbeddable) == null ? void 0 : b.state) === "hover";
      return p("div", { className: ae("excalidraw__embeddable-container", { "is-hovered": f }), style: { transform: c ? `translate(${l - this.state.offsetLeft}px, ${o - this.state.offsetTop}px) scale(${t})` : "none", display: c ? "block" : "none", opacity: Q8(r, Tn(r, this.scene.getNonDeletedElementsMap()), this.elementsPendingErasure, null, ((v = this.state.openDialog) == null ? void 0 : v.name) === "elementLinkSelector" ? Yb : 1), "--embeddable-radius": `${va(Math.min(r.width, r.height), r)}px` }, children: _("div", { className: "excalidraw__embeddable-container__inner", style: { width: c ? `${r.width}px` : 0, height: c ? `${r.height}px` : 0, transform: c ? `rotate(${r.angle}rad)` : "none", pointerEvents: u ? Cl.enabled : Cl.disabled }, children: [f && p("div", { className: "excalidraw__embeddable-hint", children: C("buttons.embeddableInteractionButton") }), p("div", { className: "excalidraw__embeddable__outer", style: { padding: `${r.strokeWidth}px` }, children: (xn(r) ? (w = (y = this.props).renderEmbeddable) == null ? void 0 : w.call(y, r, this.state) : null) ?? p("iframe", { ref: (S) => this.cacheEmbeddableRef(r, S), className: "excalidraw__embeddable", srcDoc: (s == null ? void 0 : s.type) === "document" ? s.srcdoc(this.state.theme) : void 0, src: (s == null ? void 0 : s.type) !== "document" ? (s == null ? void 0 : s.link) ?? "" : void 0, scrolling: "no", referrerPolicy: "no-referrer-when-downgrade", title: "Excalidraw Embedded Content", allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture", allowFullScreen: !0, sandbox: `${(x = s == null ? void 0 : s.sandbox) != null && x.allowSameOrigin ? "allow-same-origin" : ""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads` }) })] }) }, r.id);
    }) });
  }
  toggleOverscrollBehavior(t) {
    document.documentElement.style.overscrollBehaviorX = t.type === "pointerenter" ? "none" : "auto";
  }
  render() {
    var s, u, f, h, U, m, g, b;
    let t = this.scene.getSelectedElements(this.state), { renderTopRightUI: n, renderCustomStats: a } = this.props, i = this.scene.getSceneNonce(), { elementsMap: r, visibleElements: l } = this.renderer.getRenderableElements({ sceneNonce: i, zoom: this.state.zoom, offsetLeft: this.state.offsetLeft, offsetTop: this.state.offsetTop, scrollX: this.state.scrollX, scrollY: this.state.scrollY, height: this.state.height, width: this.state.width, editingTextElement: this.state.editingTextElement, newElementId: (s = this.state.newElement) == null ? void 0 : s.id, pendingImageElementId: this.state.pendingImageElementId });
    this.visibleElements = l;
    let o = this.scene.getNonDeletedElementsMap(), c = "setPointerCapture" in HTMLElement.prototype ? !1 : this.state.selectionElement || this.state.newElement || this.state.selectedElementsAreBeingDragged || this.state.resizingElement || this.state.activeTool.type === "laser" && this.state.cursorButton === "down", d = t[0];
    return p("div", { className: ae("excalidraw excalidraw-container", { "excalidraw--view-mode": this.state.viewModeEnabled || ((u = this.state.openDialog) == null ? void 0 : u.name) === "elementLinkSelector", "excalidraw--mobile": this.device.editor.isMobile }), style: { "--ui-pointerEvents": c ? Cl.disabled : Cl.enabled, "--right-sidebar-width": "302px" }, ref: this.excalidrawContainerRef, onDrop: this.handleAppOnDrop, tabIndex: 0, onKeyDown: this.props.handleKeyboardGlobally ? void 0 : this.onKeyDown, onPointerEnter: this.toggleOverscrollBehavior, onPointerLeave: this.toggleOverscrollBehavior, children: p(uy.Provider, { value: this, children: p(fy.Provider, { value: this.props, children: p(AU.Provider, { value: this.excalidrawContainerValue, children: p(_U.Provider, { value: this.device, children: p(RU.Provider, { value: this.setAppState, children: p(LU.Provider, { value: this.state, children: _(DU.Provider, { value: this.scene.getNonDeletedElements(), children: [_(PU.Provider, { value: this.actionManager, children: [p(UY, { canvas: this.canvas, appState: this.state, files: this.files, setAppState: this.setAppState, actionManager: this.actionManager, elements: this.scene.getNonDeletedElements(), onLockToggle: this.toggleLock, onPenModeToggle: this.togglePenMode, onHandToolToggle: this.onHandToolToggle, langCode: ic().code, renderTopRightUI: n, renderCustomStats: a, showExitZenModeBtn: typeof ((f = this.props) == null ? void 0 : f.zenModeEnabled) > "u" && this.state.zenModeEnabled, UIOptions: this.props.UIOptions, onExportImage: this.onExportImage, renderWelcomeScreen: !this.state.isLoading && this.state.showWelcomeScreen && this.state.activeTool.type === "selection" && !this.state.zenModeEnabled && !this.scene.getElementsIncludingDeleted().length, app: this, isCollaborating: this.props.isCollaborating, generateLinkForSelection: this.props.generateLinkForSelection, children: this.props.children }), p("div", { className: "excalidraw-textEditorContainer" }), p("div", { className: "excalidraw-contextMenuContainer" }), p("div", { className: "excalidraw-eye-dropper-container" }), p(ZY, { trails: [this.laserTrails, this.eraserTrail] }), t.length === 1 && ((h = this.state.openDialog) == null ? void 0 : h.name) !== "elementLinkSelector" && this.state.showHyperlinkPopup && p(XW, { element: d, elementsMap: o, setAppState: this.setAppState, onLinkOpen: this.props.onLinkOpen, setToast: this.setToast, updateEmbedValidationStatus: this.updateEmbedValidationStatus }, d.id), this.props.aiEnabled !== !1 && t.length === 1 && vd(d) && p(D5, { element: d, elementsMap: r, children: p(Zh, { title: C("labels.convertToCode"), icon: I8, checked: !1, onChange: () => this.onMagicFrameGenerate(d, "button") }) }), t.length === 1 && er(d) && ((m = (U = d.customData) == null ? void 0 : U.generationData) == null ? void 0 : m.status) === "done" && _(D5, { element: d, elementsMap: r, children: [p(Zh, { title: C("labels.copySource"), icon: Q0, checked: !1, onChange: () => this.onIframeSrcCopy(d) }), p(Zh, { title: "Enter fullscreen", icon: SI, checked: !1, onChange: () => {
      let v = this.getHTMLIFrameElement(d);
      if (v) try {
        v.requestFullscreen(), this.setState({ activeEmbeddable: { element: d, state: "active" }, selectedElementIds: { [d.id]: !0 }, newElement: null, selectionElement: null });
      } catch (y) {
        console.warn(y), this.setState({ errorMessage: "Couldn't enter fullscreen" });
      }
    } })] }), this.state.toast !== null && p(gY, { message: this.state.toast.message, onClose: () => this.setToast(null), duration: this.state.toast.duration, closable: this.state.toast.closable }), this.state.contextMenu && p(gG, { items: this.state.contextMenu.items, top: this.state.contextMenu.top, left: this.state.contextMenu.left, actionManager: this.actionManager, onClose: (v) => {
      this.setState({ contextMenu: null }, () => {
        this.focusContainer(), v == null || v();
      });
    } }), p(YY, { canvas: this.canvas, rc: this.rc, elementsMap: r, allElementsMap: o, visibleElements: l, sceneNonce: i, selectionNonce: (g = this.state.selectionElement) == null ? void 0 : g.versionNonce, scale: window.devicePixelRatio, appState: this.state, renderConfig: { imageCache: this.imageCache, isExporting: !1, renderGrid: qs(this), canvasBackgroundColor: this.state.viewBackgroundColor, embedsValidationStatus: this.embedsValidationStatus, elementsPendingErasure: this.elementsPendingErasure, pendingFlowchartNodes: this.flowChartCreator.pendingNodes } }), this.state.newElement && p(dZ, { appState: this.state, scale: window.devicePixelRatio, rc: this.rc, elementsMap: r, allElementsMap: o, renderConfig: { imageCache: this.imageCache, isExporting: !1, renderGrid: !1, canvasBackgroundColor: this.state.viewBackgroundColor, embedsValidationStatus: this.embedsValidationStatus, elementsPendingErasure: this.elementsPendingErasure, pendingFlowchartNodes: null } }), p(VY, { containerRef: this.excalidrawContainerRef, canvas: this.interactiveCanvas, elementsMap: r, visibleElements: l, allElementsMap: o, selectedElements: t, sceneNonce: i, selectionNonce: (b = this.state.selectionElement) == null ? void 0 : b.versionNonce, scale: window.devicePixelRatio, appState: this.state, device: this.device, renderInteractiveSceneCallback: this.renderInteractiveSceneCallback, handleCanvasRef: this.handleInteractiveCanvasRef, onContextMenu: this.handleCanvasContextMenu, onPointerMove: this.handleCanvasPointerMove, onPointerUp: this.handleCanvasPointerUp, onPointerCancel: this.removePointer, onTouchMove: this.handleTouchMove, onPointerDown: this.handleCanvasPointerDown, onDoubleClick: this.handleCanvasDoubleClick }), this.state.userToFollow && p(eZ, { width: this.state.width, height: this.state.height, userToFollow: this.state.userToFollow, onDisconnect: this.maybeUnfollowRemoteUser }), this.renderFrameNames()] }), this.renderEmbeddables()] }) }) }) }) }) }) }) });
  }
  setPlugins(t) {
    Object.assign(this.plugins, t);
  }
  async onMagicFrameGenerate(t, n) {
    var l;
    let a = (l = this.plugins.diagramToCode) == null ? void 0 : l.generate;
    if (!a) {
      this.setState({ errorMessage: "No diagram to code plugin found" });
      return;
    }
    let i = $p(this.scene.getNonDeletedElements(), t).filter((o) => !vd(o));
    if (!i.length) {
      n === "button" ? (this.setState({ errorMessage: "Cannot generate from an empty frame" }), rt("ai", "generate (no-children)", "d2c")) : this.setActiveTool({ type: "magicframe" });
      return;
    }
    let r = this.insertIframeElement({ sceneX: t.x + t.width + 30, sceneY: t.y, width: t.width, height: t.height });
    if (r) {
      this.updateMagicGeneration({ frameElement: r, data: { status: "pending" } }), this.setState({ selectedElementIds: { [r.id]: !0 } }), rt("ai", "generate (start)", "d2c");
      try {
        let { html: o } = await a({ frame: t, children: i });
        if (rt("ai", "generate (success)", "d2c"), !o.trim()) {
          this.updateMagicGeneration({ frameElement: r, data: { status: "error", code: "ERR_OAI", message: "Nothing genereated :(" } });
          return;
        }
        let c = o.includes("<!DOCTYPE html>") && o.includes("</html>") ? o.slice(o.indexOf("<!DOCTYPE html>"), o.indexOf("</html>") + 7) : o;
        this.updateMagicGeneration({ frameElement: r, data: { status: "done", html: c } });
      } catch (o) {
        rt("ai", "generate (failed)", "d2c"), this.updateMagicGeneration({ frameElement: r, data: { status: "error", code: "ERR_OAI", message: o.message || "Unknown error during generation" } });
      }
    }
  }
  onIframeSrcCopy(t) {
    var n, a;
    ((a = (n = t.customData) == null ? void 0 : n.generationData) == null ? void 0 : a.status) === "done" && (yc(t.customData.generationData.html), this.setToast({ message: "copied to clipboard", closable: !1, duration: 1500 }));
  }
  clearImageShapeCache(t) {
    let n = t ?? this.files;
    this.scene.getNonDeletedElements().forEach((a) => {
      Vn(a) && n[a.fileId] && (this.imageCache.delete(a.fileId), mt.delete(a));
    });
  }
  async componentDidMount() {
    var t;
    this.unmounted = !1, this.excalidrawContainerValue.container = this.excalidrawContainerRef.current, (we.MODE === Cn.TEST || we.DEV) && (this.setState.bind(this), Object.defineProperties(window.h, { state: { configurable: !0, get: () => this.state }, setState: { configurable: !0, value: (...n) => this.setState(...n) }, app: { configurable: !0, value: this }, history: { configurable: !0, value: this.history }, store: { configurable: !0, value: this.store }, fonts: { configurable: !0, value: this.fonts } })), this.store.onStoreIncrementEmitter.on((n) => {
      this.history.record(n.elementsChange, n.appStateChange);
    }), this.scene.onUpdate(this.triggerRender), this.addEventListeners(), this.props.autoFocus && this.excalidrawContainerRef.current && this.focusContainer(), Ii() || (this.refreshViewportBreakpoints(), this.refreshEditorBreakpoints()), p1 && this.excalidrawContainerRef.current && (this.resizeObserver = new ResizeObserver(() => {
      this.refreshEditorBreakpoints(), this.updateDOMRect();
    }), (t = this.resizeObserver) == null || t.observe(this.excalidrawContainerRef.current)), new URLSearchParams(window.location.search.slice(1)).has("web-share-target") ? this.restoreFileFromShare() : this.updateDOMRect(this.initializeScene), Rk() && !WM() && this.setState({ errorMessage: p(EY, {}) });
  }
  componentWillUnmount() {
    var t, n;
    (t = window.launchQueue) == null || t.setConsumer(() => {
    }), this.renderer.destroy(), this.scene.destroy(), this.scene = new Ri(), this.fonts = new Mi(this.scene), this.renderer = new A5(this.scene), this.files = {}, this.imageCache.clear(), (n = this.resizeObserver) == null || n.disconnect(), this.unmounted = !0, this.removeEventListeners(), this.library.destroy(), this.laserTrails.stop(), this.eraserTrail.stop(), this.onChangeEmitter.clear(), this.store.onStoreIncrementEmitter.clear(), mt.destroy(), mi.destroy(), clearTimeout(Yi), Nt.clearCache(), pn.clearCache(), Yi = 0, document.documentElement.style.overscrollBehaviorX = "";
  }
  removeEventListeners() {
    this.onRemoveEventListenersEmitter.trigger();
  }
  addEventListeners() {
    this.removeEventListeners(), this.props.handleKeyboardGlobally && this.onRemoveEventListenersEmitter.once(ut(document, "keydown", this.onKeyDown, !1)), this.onRemoveEventListenersEmitter.once(ut(this.excalidrawContainerRef.current, "wheel", this.handleWheel, { passive: !1 }), ut(window, "message", this.onWindowMessage, !1), ut(document, "pointerup", this.removePointer, { passive: !1 }), ut(document, "copy", this.onCopy, { passive: !1 }), ut(document, "keyup", this.onKeyUp, { passive: !0 }), ut(document, "pointermove", this.updateCurrentCursorPosition, { passive: !1 }), ut(document.fonts, "loadingdone", (t) => {
      let n = t.fontfaces;
      this.fonts.onLoaded(n);
    }, { passive: !1 }), ut(document, "gesturestart", this.onGestureStart, !1), ut(document, "gesturechange", this.onGestureChange, !1), ut(document, "gestureend", this.onGestureEnd, !1), ut(window, "focus", () => {
      this.maybeCleanupAfterMissingPointerUp(null), this.triggerRender(!0);
    }, { passive: !1 })), !this.state.viewModeEnabled && (this.onRemoveEventListenersEmitter.once(ut(document, "fullscreenchange", this.onFullscreenChange, { passive: !1 }), ut(document, "paste", this.pasteFromClipboard, { passive: !1 }), ut(document, "cut", this.onCut, { passive: !1 }), ut(window, "resize", this.onResize, !1), ut(window, "unload", this.onUnload, !1), ut(window, "blur", this.onBlur, !1), ut(this.excalidrawContainerRef.current, "wheel", this.handleWheel, { passive: !1 }), ut(this.excalidrawContainerRef.current, "dragover", this.disableEvent, !1), ut(this.excalidrawContainerRef.current, "drop", this.disableEvent, !1)), this.props.detectScroll && this.onRemoveEventListenersEmitter.once(ut(_M(this.excalidrawContainerRef.current), "scroll", this.onScroll, { passive: !1 })));
  }
  componentDidUpdate(t, n) {
    var o, c, d, s, u, f, h, U, m, g;
    this.updateEmbeddables();
    let a = this.scene.getElementsIncludingDeleted(), i = this.scene.getElementsMapIncludingDeleted(), r = this.scene.getNonDeletedElementsMap();
    !this.state.showWelcomeScreen && !a.length && this.setState({ showWelcomeScreen: !0 }), t.UIOptions.dockedSidebarBreakpoint !== this.props.UIOptions.dockedSidebarBreakpoint && this.refreshEditorBreakpoints(), n.userToFollow && !this.state.collaborators.has(n.userToFollow.socketId) && this.maybeUnfollowRemoteUser(), (n.zoom.value !== this.state.zoom.value || n.scrollX !== this.state.scrollX || n.scrollY !== this.state.scrollY) && ((c = (o = this.props) == null ? void 0 : o.onScrollChange) == null || c.call(o, this.state.scrollX, this.state.scrollY, this.state.zoom), this.onScrollChangeEmitter.trigger(this.state.scrollX, this.state.scrollY, this.state.zoom)), n.userToFollow !== this.state.userToFollow && (n.userToFollow && this.onUserFollowEmitter.trigger({ userToFollow: n.userToFollow, action: "UNFOLLOW" }), this.state.userToFollow && this.onUserFollowEmitter.trigger({ userToFollow: this.state.userToFollow, action: "FOLLOW" })), Object.keys(this.state.selectedElementIds).length && Fa(this.state) && this.setState({ activeTool: _t(this.state, { type: "selection" }) }), this.state.activeTool.type === "eraser" && n.theme !== this.state.theme && A7(this.interactiveCanvas, this.state.theme), n.activeTool.type === "selection" && this.state.activeTool.type !== "selection" && this.state.showHyperlinkPopup && this.setState({ showHyperlinkPopup: !1 }), t.langCode !== this.props.langCode && this.updateLanguage(), Fa(n) && !Fa(this.state) && this.eraserTrail.endPath(), t.viewModeEnabled !== this.props.viewModeEnabled && this.setState({ viewModeEnabled: !!this.props.viewModeEnabled }), n.viewModeEnabled !== this.state.viewModeEnabled && (this.addEventListeners(), this.deselectElements()), (((d = n.openDialog) == null ? void 0 : d.name) === "elementLinkSelector" || ((s = this.state.openDialog) == null ? void 0 : s.name) === "elementLinkSelector") && ((u = n.openDialog) == null ? void 0 : u.name) !== ((f = this.state.openDialog) == null ? void 0 : f.name) && (this.deselectElements(), this.setState({ hoveredElementIds: {} })), t.zenModeEnabled !== this.props.zenModeEnabled && this.setState({ zenModeEnabled: !!this.props.zenModeEnabled }), t.theme !== this.props.theme && this.props.theme && this.setState({ theme: this.props.theme }), (h = this.excalidrawContainerRef.current) == null || h.classList.toggle("theme--dark", this.state.theme === Ie.DARK), this.state.editingLinearElement && !this.state.selectedElementIds[this.state.editingLinearElement.elementId] && setTimeout(() => {
      this.state.editingLinearElement && this.actionManager.executeAction(la);
    }), (U = this.state.editingTextElement) != null && U.isDeleted && this.setState({ editingTextElement: null }), this.state.selectedLinearElement && !this.state.selectedElementIds[this.state.selectedLinearElement.elementId] && this.setState({ selectedLinearElement: null });
    let { multiElement: l } = n;
    n.activeTool !== this.state.activeTool && l != null && Wr(this.state) && Ga(l, !1) && _1(l, this.state, ha(ee.getPointAtIndexGlobalCoordinates(l, -1, r)), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()), this.store.commit(i, this.state), this.state.isLoading || ((g = (m = this.props).onChange) == null || g.call(m, a, this.state, this.files), this.onChangeEmitter.trigger(a, this.state, this.files));
  }
  static resetTapTwice() {
    Jo = !1;
  }
  async addElementsFromMixedContentPaste(t, { isPlainPaste: n, sceneX: a, sceneY: i }) {
    if (!n && t.some((r) => r.type === "imageUrl") && this.isToolSupported("image")) {
      let r = t.filter((u) => u.type === "imageUrl").map((u) => u.value), l = await Promise.all(r.map(async (u) => {
        try {
          return { file: await AO(u) };
        } catch (f) {
          let h = f.message;
          return f.cause === "FETCH_ERROR" ? h = C("errors.failedToFetchImage") : f.cause === "UNSUPPORTED" && (h = C("errors.unsupportedFileType")), { errorMessage: h };
        }
      })), o = i, c = !1, d = {};
      for (let u of l) if (u.file) {
        let f = this.createImageElement({ sceneX: a, sceneY: o }), h = await this.insertImageElement(f, u.file);
        h && (c || (c = !0, o -= h.height / 2), G(h, { y: o }, !1), o = f.y + f.height + 25, d[f.id] = !0);
      }
      this.setState({ selectedElementIds: Ne(d, this.state) });
      let s = l.find((u) => !!u.errorMessage);
      s && s.errorMessage && this.setState({ errorMessage: s.errorMessage });
    } else {
      let r = t.filter((l) => l.type === "text");
      r.length && this.addTextFromPaste(r.map((l) => l.value).join(`

`), n);
    }
  }
  addTextFromPaste(t, n = !1) {
    let { x: a, y: i } = it({ clientX: this.lastViewportPosition.x, clientY: this.lastViewportPosition.y }, this.state), r = { x: a, y: i, strokeColor: this.state.currentItemStrokeColor, backgroundColor: this.state.currentItemBackgroundColor, fillStyle: this.state.currentItemFillStyle, strokeWidth: this.state.currentItemStrokeWidth, strokeStyle: this.state.currentItemStrokeStyle, roundness: null, roughness: this.state.currentItemRoughness, opacity: this.state.currentItemOpacity, text: t, fontSize: this.state.currentItemFontSize, fontFamily: this.state.currentItemFontFamily, textAlign: fc, verticalAlign: Gd, locked: !1 }, l = Je({ fontSize: r.fontSize, fontFamily: r.fontFamily }), o = dl(r.fontFamily), [c, , d] = ER(this.state), s = Math.max(Math.min((d - c) * 0.5, 800), 200), u = 10, f = i, h = n ? [t] : t.split(`
`), U = h.reduce((m, g, b) => {
      var y;
      let v = co(g).trim();
      if (v.length) {
        let w = this.getTopLayerFrameAtSceneCoords({ x: a, y: f }), x = dn(v, l, o), S = x.width > s, E = S ? yl(v, l, s) : v;
        x = S ? dn(E, l, o) : x;
        let M = a - x.width / 2, I = f - x.height / 2, T = $n({ ...r, x: M, y: I, text: E, originalText: v, lineHeight: o, autoResize: !S, frameId: w ? w.id : null });
        m.push(T), f += T.height + u;
      } else (y = h[b - 1]) != null && y.trim() && (f += mc(r.fontSize, o) + u);
      return m;
    }, []);
    U.length !== 0 && (this.scene.insertElements(U), this.setState({ selectedElementIds: Ne(Object.fromEntries(U.map((m) => [m.id, !0])), this.state) }), !n && U.length > 1 && R5 === !1 && !this.device.editor.isMobile && (this.setToast({ message: C("toast.pasteAsSingleElement", { shortcut: V("CtrlOrCmd+Shift+V") }), duration: 5e3 }), R5 = !0), this.store.shouldCaptureIncrement());
  }
  handleTextWysiwyg(t, { isExistingElement: n = !1 }) {
    let a = this.scene.getElementsMapIncludingDeleted(), i = (r, l) => {
      this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map((o) => o.id === t.id && J(o) ? ve(o, { originalText: r, isDeleted: l ?? o.isDeleted, ...L7(o, Zt(o, a), a, r) }) : o)]);
    };
    iZ({ id: t.id, canvas: this.canvas, getViewportCoords: (r, l) => {
      let { x: o, y: c } = fa({ sceneX: r, sceneY: l }, this.state);
      return [o - this.state.offsetLeft, c - this.state.offsetTop];
    }, onChange: gt((r) => {
      i(r, !1), H1(t) && In(t, this.scene.getNonDeletedElementsMap());
    }), onSubmit: gt(({ viaKeyboard: r, nextOriginalText: l }) => {
      let o = !l.trim();
      if (i(l, o), !o && r) {
        let c = t.containerId ? t.containerId : t.id;
        za(() => {
          this.setState((d) => ({ selectedElementIds: Ne({ ...d.selectedElementIds, [c]: !0 }, d) }));
        });
      }
      o && m7(this.scene.getNonDeletedElements(), [t]), (!o || n) && this.store.shouldCaptureIncrement(), za(() => {
        this.setState({ newElement: null, editingTextElement: null });
      }), this.state.activeTool.locked && Oa(this.interactiveCanvas, this.state), this.focusContainer();
    }), element: t, excalidrawContainer: this.excalidrawContainerRef.current, app: this, autoSelect: !this.device.isTouchScreen }), this.deselectElements(), i(t.originalText, !1);
  }
  deselectElements() {
    this.setState({ selectedElementIds: Ne({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null });
  }
  getTextElementAtPosition(t, n) {
    let a = this.getElementAtPosition(t, n, { includeBoundTextElement: !0 });
    return a && J(a) && !a.isDeleted ? a : null;
  }
  getElementAtPosition(t, n, a) {
    let i = this.getElementsAtPosition(t, n, a == null ? void 0 : a.includeBoundTextElement, a == null ? void 0 : a.includeLockedElements);
    if (i.length > 1) {
      if (a != null && a.preferSelected) {
        for (let l = i.length - 1; l > -1; l--) if (this.state.selectedElementIds[i[l].id]) return i[l];
      }
      let r = i[i.length - 1];
      return $l({ x: t, y: n, element: r, shape: vi(r, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() / 2, frameNameBound: fe(r) ? this.frameNameBoundsCache.get(r) : null }) ? r : i[i.length - 2];
    }
    return i.length === 1 ? i[0] : null;
  }
  getElementsAtPosition(t, n, a = !1, i = !1) {
    let r = [], l = this.scene.getNonDeletedElementsMap();
    return (a && i ? this.scene.getNonDeletedElements() : this.scene.getNonDeletedElements().filter((o) => (i || !o.locked) && (a || !(J(o) && o.containerId)))).filter((o) => this.hitElement(t, n, o)).filter((o) => {
      let c = Tn(o, l);
      return c && this.state.frameRendering.enabled && this.state.frameRendering.clip ? bg({ x: t, y: n }, c, l) : !0;
    }).filter((o) => er(o) ? (r.push(o), !1) : !0).concat(r);
  }
  getElementHitThreshold() {
    return Bk / this.state.zoom.value;
  }
  hitElement(t, n, a, i = !0) {
    if (i && this.state.selectedElementIds[a.id] && w3([a], this.state)) {
      let r = ML(a, this.scene.getNonDeletedElementsMap(), Oe(a) ? 0 : this.getElementHitThreshold());
      if (lu(k(t, n), r)) return !0;
    }
    return W8(t, n, G8(a, this.scene.getNonDeletedElementsMap())) ? !0 : $l({ x: t, y: n, element: a, shape: vi(a, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold(), frameNameBound: fe(a) ? this.frameNameBoundsCache.get(a) : null });
  }
  getTextBindableContainerAtPosition(t, n) {
    let a = this.scene.getNonDeletedElements(), i = this.scene.getSelectedElements(this.state);
    if (i.length === 1) return Zr(i[0], !1) ? i[0] : null;
    let r = null;
    for (let l = a.length - 1; l >= 0; --l) {
      if (a[l].isDeleted) continue;
      let [o, c, d, s] = ge(a[l], this.scene.getNonDeletedElementsMap());
      if (xe(a[l]) && $l({ x: t, y: n, element: a[l], shape: vi(a[l], this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold() })) {
        r = a[l];
        break;
      } else if (o < t && t < d && c < n && n < s) {
        r = a[l];
        break;
      }
    }
    return Zr(r, !1) ? r : null;
  }
  handleHoverSelectedLinearElement(t, n, a) {
    let i = this.scene.getNonDeletedElementsMap(), r = ee.getElement(t.elementId, i);
    if (r) if (this.state.selectedLinearElement) {
      let l = -1, o = null;
      $l({ x: n, y: a, element: r, shape: vi(r, this.scene.getNonDeletedElementsMap()) }) ? (l = ee.getPointIndexUnderCursor(r, i, this.state.zoom, n, a), o = ee.getSegmentMidpointHitCoords(t, { x: n, y: a }, this.state, this.scene.getNonDeletedElementsMap()), (te(r) ? l === 0 || l === r.points.length - 1 : l >= 0) || o ? qe(this.interactiveCanvas, Ye.POINTER) : this.hitElement(n, a, r) && qe(this.interactiveCanvas, Ye.MOVE)) : this.hitElement(n, a, r) && (!te(r) || !(r.startBinding || r.endBinding)) && qe(this.interactiveCanvas, Ye.MOVE), this.state.selectedLinearElement.hoverPointIndex !== l && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, hoverPointIndex: l } }), ee.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords, o) || this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: o } });
    } else qe(this.interactiveCanvas, Ye.AUTO);
  }
  updateGestureOnPointerDown(t) {
    Pe.pointers.set(t.pointerId, { x: t.clientX, y: t.clientY }), Pe.pointers.size === 2 && (Pe.lastCenter = t5(Pe.pointers), Pe.initialScale = this.state.zoom.value, Pe.initialDistance = n5(Array.from(Pe.pointers.values())));
  }
  initialPointerDownState(t) {
    let n = it(t, this.state), a = this.scene.getSelectedElements(this.state), [i, r, l, o] = We(a), c = a.findIndex(te) === 0;
    return { origin: n, withCmdOrCtrl: t[P.CTRL_OR_CMD], originInGrid: ha(Lt(n.x, n.y, t[P.CTRL_OR_CMD] || c ? null : this.getEffectiveGridSize())), scrollbars: l5(Jh, t.clientX - this.state.offsetLeft, t.clientY - this.state.offsetTop), lastCoords: { ...n }, originalElements: this.scene.getNonDeletedElements().reduce((d, s) => (d.set(s.id, wl(s)), d), /* @__PURE__ */ new Map()), resize: { handleType: !1, isResizing: !1, offset: { x: 0, y: 0 }, arrowDirection: "origin", center: { x: (l + i) / 2, y: (o + r) / 2 } }, hit: { element: null, allHitElements: [], wasAddedToSelection: !1, hasBeenDuplicated: !1, hasHitCommonBoundingBoxOfSelectedElements: this.isHittingCommonBoundingBoxOfSelectedElements(n, a) }, drag: { hasOccurred: !1, offset: null }, eventListeners: { onMove: null, onUp: null, onKeyUp: null, onKeyDown: null }, boxSelection: { hasOccurred: !1 } };
  }
  handleDraggingScrollBar(t, n) {
    if (!(n.scrollbars.isOverEither && !this.state.multiElement)) return !1;
    qh = !0, n.lastCoords.x = t.clientX, n.lastCoords.y = t.clientY;
    let a = Gh((r) => {
      r.target instanceof HTMLElement && this.handlePointerMoveOverScrollbars(r, n);
    }), i = gt(() => {
      Ar = null, qh = !1, Oa(this.interactiveCanvas, this.state), this.setState({ cursorButton: "up" }), this.savePointer(t.clientX, t.clientY, "up"), window.removeEventListener("pointermove", a), window.removeEventListener("pointerup", i), a.flush();
    });
    return Ar = i, window.addEventListener("pointermove", a), window.addEventListener("pointerup", i), !0;
  }
  isASelectedElement(t) {
    return t != null && this.state.selectedElementIds[t.id];
  }
  isHittingCommonBoundingBoxOfSelectedElements(t, n) {
    if (n.length < 2) return !1;
    let a = this.getElementHitThreshold(), [i, r, l, o] = We(n);
    return t.x > i - a && t.x < l + a && t.y > r - a && t.y < o + a;
  }
  getCurrentItemRoundness(t) {
    return this.state.currentItemRoundness === "round" ? { type: To(t) ? Pt.ADAPTIVE_RADIUS : Pt.PROPORTIONAL_RADIUS } : null;
  }
  maybeCacheReferenceSnapPoints(t, n, a = !1) {
    Ur({ event: t, app: this, selectedElements: n }) && (a || !mi.getReferenceSnapPoints()) && mi.setReferenceSnapPoints(oP(this.scene.getNonDeletedElements(), n, this.state, this.scene.getNonDeletedElementsMap()));
  }
  maybeCacheVisibleGaps(t, n, a = !1) {
    Ur({ event: t, app: this, selectedElements: n }) && (a || !mi.getVisibleGaps()) && mi.setVisibleGaps(lP(this.scene.getNonDeletedElements(), n, this.state, this.scene.getNonDeletedElementsMap()));
  }
  onKeyDownFromPointerDownHandler(t) {
    return gt((n) => {
      this.maybeHandleResize(t, n) || this.maybeDragNewGenericElement(t, n);
    });
  }
  onKeyUpFromPointerDownHandler(t) {
    return gt((n) => {
      n.key === P.ALT && n.preventDefault(), !this.maybeHandleResize(t, n) && this.maybeDragNewGenericElement(t, n);
    });
  }
  onPointerMoveFromPointerDownHandler(t) {
    return Gh((n) => {
      var s, u, f, h, U, m;
      if (((s = this.state.openDialog) == null ? void 0 : s.name) === "elementLinkSelector") return;
      let a = it(n, this.state);
      if (this.state.selectedLinearElement && this.state.selectedLinearElement.elbowed && this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index) {
        let [g, b] = Lt(a.x, a.y, n[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), v = this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;
        if (v < 0) {
          let w = ee.getSegmentMidpointHitCoords({ ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: null }, { x: g, y: b }, this.state, this.scene.getNonDeletedElementsMap());
          v = w ? ee.getSegmentMidPointIndex(this.state.selectedLinearElement, this.state, w, this.scene.getNonDeletedElementsMap()) : -1;
        }
        let y = ee.moveFixedSegment(this.state.selectedLinearElement, v, g, b, this.scene.getNonDeletedElementsMap());
        za(() => {
          this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, segmentMidPointHoveredCoords: y.segmentMidPointHoveredCoords, pointerDownState: y.pointerDownState } });
        });
        return;
      }
      let i = this.lastPointerMoveCoords ?? t.origin;
      if (this.lastPointerMoveCoords = a, t.drag.offset === null && (t.drag.offset = ha(wO(this.scene.getSelectedElements(this.state), t.origin.x, t.origin.y))), !(n.target instanceof HTMLElement) || this.handlePointerMoveOverScrollbars(n, t)) return;
      if (Fa(this.state)) {
        this.handleEraser(n, t, a);
        return;
      }
      this.state.activeTool.type === "laser" && this.laserTrails.addPointToPath(a.x, a.y);
      let [r, l] = Lt(a.x, a.y, n[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize());
      if (!t.drag.hasOccurred && (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") && ze(k(a.x, a.y), k(t.origin.x, t.origin.y)) < Pr) return;
      if (t.resize.isResizing && (t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeHandleCrop(t, n) || this.maybeHandleResize(t, n))) return !0;
      let o = this.scene.getNonDeletedElementsMap();
      if (this.state.selectedLinearElement) {
        let g = this.state.editingLinearElement || this.state.selectedLinearElement;
        if (ee.shouldAddMidpoint(this.state.selectedLinearElement, a, this.state, o)) {
          let b = ee.addMidpoint(this.state.selectedLinearElement, a, this, !n[P.CTRL_OR_CMD], o);
          if (!b) return;
          za(() => {
            this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, pointerDownState: b.pointerDownState, selectedPointsIndices: b.selectedPointsIndices } }), this.state.editingLinearElement && this.setState({ editingLinearElement: { ...this.state.editingLinearElement, pointerDownState: b.pointerDownState, selectedPointsIndices: b.selectedPointsIndices } });
          });
          return;
        } else if (g.pointerDownState.segmentMidpoint.value !== null && !g.pointerDownState.segmentMidpoint.added) return;
        if (ee.handlePointDragging(n, this, a.x, a.y, (b, v) => {
          this.maybeSuggestBindingsForLinearElementAtCoords(b, v);
        }, g, this.scene)) {
          t.lastCoords.x = a.x, t.lastCoords.y = a.y, t.drag.hasOccurred = !0, this.state.editingLinearElement && !this.state.editingLinearElement.isDragging && this.setState({ editingLinearElement: { ...this.state.editingLinearElement, isDragging: !0 } }), this.state.selectedLinearElement.isDragging || this.setState({ selectedLinearElement: { ...this.state.selectedLinearElement, isDragging: !0 } });
          return;
        }
      }
      let c = t.hit.allHitElements.some((g) => this.isASelectedElement(g)), d = this.state.editingLinearElement && n.shiftKey && this.state.editingLinearElement.elementId === ((u = t.hit.element) == null ? void 0 : u.id);
      if ((c || t.hit.hasHitCommonBoundingBoxOfSelectedElements) && !d) {
        let g = this.scene.getSelectedElements(this.state);
        if (g.every((w) => w.locked)) return;
        let b = g.find((w) => fe(w)), v = this.getTopLayerFrameAtSceneCoords(a), y = v && !b ? v : null;
        if (this.state.frameToHighlight !== y && za(() => {
          this.setState({ frameToHighlight: y });
        }), t.drag.hasOccurred = !0, g.length > 0 && !t.withCmdOrCtrl && !this.state.editingTextElement && ((f = this.state.activeEmbeddable) == null ? void 0 : f.state) !== "active") {
          let w = { x: a.x - t.origin.x, y: a.y - t.origin.y }, x = [...t.originalElements.values()], S = n.shiftKey;
          if (S) {
            let I = Math.abs(w.x), T = Math.abs(w.y), A = S && I < T, D = S && I > T;
            A && (w.x = 0), D && (w.y = 0);
          }
          if (this.state.croppingElementId) {
            let I = this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);
            if (I && Oe(I) && I.crop !== null && t.hit.element === I) {
              let T = I.crop, A = Vn(I) && ((h = this.imageCache.get(I.fileId)) == null ? void 0 : h.image);
              if (A && !(A instanceof Promise)) {
                let D = yt(Jt(a.x - i.x, a.y - i.y), Math.max(this.state.zoom.value, 2)), [R, O, $, F, N, j] = ge(I, o), z = se(X(k(R, O), k(N, j), I.angle)), Y = se(X(k($, O), k(N, j), I.angle)), ie = se(X(k(R, F), k(N, j), I.angle)), pe = on(Jd(Y, z)), ue = on(Jd(ie, z)), Ve = Jt(Z2(D, pe), Z2(D, ue)), Ge = { ...T, x: Me(T.x - Ve[0] * Math.sign(I.scale[0]), 0, A.naturalWidth - T.width), y: Me(T.y - Ve[1] * Math.sign(I.scale[1]), 0, A.naturalHeight - T.height) };
                G(I, { crop: Ge });
                return;
              }
            }
          }
          this.maybeCacheVisibleGaps(n, g), this.maybeCacheReferenceSnapPoints(n, g);
          let { snapOffset: E, snapLines: M } = sP(x, w, this, n, this.scene.getNonDeletedElementsMap());
          if (this.setState({ snapLines: M }), this.state.editingFrame || vO(t, g, w, this.scene, E, n[P.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()), this.setState({ selectedElementsAreBeingDragged: !0, selectionElement: null }), (g.length !== 1 || !te(g[0])) && this.setState({ suggestedBindings: uh(g, this.scene.getNonDeletedElementsMap(), this.state.zoom) }), n.altKey && !t.hit.hasBeenDuplicated) {
            t.hit.hasBeenDuplicated = !0;
            let I = [], T = [], A = /* @__PURE__ */ new Map(), D = /* @__PURE__ */ new Map(), R = t.hit.element, O = new Set(this.scene.getSelectedElements({ selectedElementIds: this.state.selectedElementIds, includeBoundTextElement: !0, includeElementsInFrames: !0 }).map((N) => N.id)), $ = this.scene.getElementsIncludingDeleted();
            for (let N of $) {
              let j = O.has(N.id) || N.id === (R == null ? void 0 : R.id) && t.hit.wasAddedToSelection;
              if (Math.abs(N.x) > 1e7 || Math.abs(N.x) > 1e7 || Math.abs(N.width) > 1e7 || Math.abs(N.height) > 1e7) {
                console.error("Alt+dragging element in scene with invalid dimensions", N.x, N.y, N.width, N.height, j);
                return;
              }
              if (j) {
                let z = N7(this.state.editingGroupId, A, N);
                if (Math.abs(z.x) > 1e7 || Math.abs(z.x) > 1e7 || Math.abs(z.width) > 1e7 || Math.abs(z.height) > 1e7) {
                  console.error("Alt+dragging duplicated element with invalid dimensions", z.x, z.y, z.width, z.height);
                  return;
                }
                let Y = t.originalElements.get(N.id);
                if (Math.abs(Y.x) > 1e7 || Math.abs(Y.x) > 1e7 || Math.abs(Y.width) > 1e7 || Math.abs(Y.height) > 1e7) {
                  console.error("Alt+dragging duplicated element with invalid dimensions", Y.x, Y.y, Y.width, Y.height);
                  return;
                }
                G(z, { x: Y.x, y: Y.y }), t.originalElements.set(z.id, z), I.push(z), T.push(N), D.set(N.id, z.id);
              } else I.push(N);
            }
            let F = [...I, ...T];
            F = ((m = (U = this.props).onDuplicate) == null ? void 0 : m.call(U, F, $)) || F, ii(F, he(T)), M7(I, T, D), U7(F, T, D, "duplicatesServeAsOld"), d3(F, T, D), this.scene.replaceAllElements(F), this.maybeCacheVisibleGaps(n, g, !0), this.maybeCacheReferenceSnapPoints(n, g, !0);
          }
          return;
        }
      }
      if (this.state.selectionElement) t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeDragNewGenericElement(t, n);
      else {
        let g = this.state.newElement;
        if (!g) return;
        if (g.type === "freedraw") {
          let b = g.points, v = a.x - g.x, y = a.y - g.y, w = b.length > 0 && b[b.length - 1];
          if (!(w && w[0] === v && w[1] === y)) {
            let x = g.simulatePressure ? g.pressures : [...g.pressures, n.pressure];
            G(g, { points: [...b, k(v, y)], pressures: x }, !1), this.setState({ newElement: g });
          }
        } else if (me(g)) {
          t.drag.hasOccurred = !0;
          let b = g.points, v = r - g.x, y = l - g.y;
          ws(n) && b.length === 2 && ({ width: v, height: y } = F1(g.x, g.y, a.x, a.y)), b.length === 1 ? G(g, { points: [...b, k(v, y)] }, !1) : (b.length === 2 || b.length > 1 && te(g)) && G(g, { points: [...b.slice(0, -1), k(v, y)] }, !1, { isDragging: !0 }), this.setState({ newElement: g }), Ga(g, !1) && this.maybeSuggestBindingsForLinearElementAtCoords(g, [a], this.state.startBoundElement);
        } else t.lastCoords.x = a.x, t.lastCoords.y = a.y, this.maybeDragNewGenericElement(t, n, !1);
      }
      if (this.state.activeTool.type === "selection") {
        t.boxSelection.hasOccurred = !0;
        let g = this.scene.getNonDeletedElements();
        if (this.state.editingLinearElement) ee.handleBoxSelection(n, this.state, this.setState.bind(this), this.scene.getNonDeletedElementsMap());
        else {
          let b = !0;
          !n.shiftKey && Nt(g, this.state) && (t.withCmdOrCtrl && t.hit.element ? this.setState((y) => pn({ ...y, selectedElementIds: { [t.hit.element.id]: !0 } }, this.scene.getNonDeletedElements(), y, this)) : b = !1);
          let v = this.state.selectionElement ? Fp(g, this.state.selectionElement, this.scene.getNonDeletedElementsMap(), !1) : [];
          this.setState((y) => {
            let w = { ...b && y.selectedElementIds, ...v.reduce((x, S) => (x[S.id] = !0, x), {}) };
            return t.hit.element && (v.length ? delete w[t.hit.element.id] : w[t.hit.element.id] = !0), y = b ? y : { ...y, selectedGroupIds: {}, editingGroupId: null }, { ...pn({ editingGroupId: y.editingGroupId, selectedElementIds: w }, this.scene.getNonDeletedElements(), y, this), selectedLinearElement: v.length === 1 && me(v[0]) ? new ee(v[0]) : null, showHyperlinkPopup: v.length === 1 && (v[0].link || xn(v[0])) ? "info" : !1 };
          });
        }
      }
    });
  }
  handlePointerMoveOverScrollbars(t, n) {
    if (n.scrollbars.isOverHorizontal) {
      let a = t.clientX, i = a - n.lastCoords.x;
      return this.translateCanvas({ scrollX: this.state.scrollX - i / this.state.zoom.value }), n.lastCoords.x = a, !0;
    }
    if (n.scrollbars.isOverVertical) {
      let a = t.clientY, i = a - n.lastCoords.y;
      return this.translateCanvas({ scrollY: this.state.scrollY - i / this.state.zoom.value }), n.lastCoords.y = a, !0;
    }
    return !1;
  }
  onPointerUpFromPointerDownHandler(t) {
    return gt((n) => {
      var m, g, b, v, y, w, x, S, E, M, I, T;
      this.removePointer(n), t.eventListeners.onMove && t.eventListeners.onMove.flush();
      let { newElement: a, resizingElement: i, croppingElementId: r, multiElement: l, activeTool: o, isResizing: c, isRotating: d, isCropping: s } = this.state;
      this.setState((A) => ({ isResizing: !1, isRotating: !1, isCropping: !1, resizingElement: null, selectionElement: null, frameToHighlight: null, elementsToHighlight: null, cursorButton: "up", snapLines: Wo(A.snapLines, []), originSnapOffset: null })), this.lastPointerMoveCoords = null, mi.setReferenceSnapPoints(null), mi.setVisibleGaps(null), this.savePointer(n.clientX, n.clientY, "up"), this.setState({ selectedElementsAreBeingDragged: !1 });
      let u = this.scene.getNonDeletedElementsMap();
      if (t.drag.hasOccurred && ((g = (m = t.hit) == null ? void 0 : m.element) != null && g.id)) {
        let A = u.get(t.hit.element.id);
        xa(A) && ((b = A.boundElements) == null || b.filter((D) => D.type === "arrow").map((D) => u.get(D.id)).filter((D) => te(D)).forEach((D) => {
          D && G(D, {}, !0);
        }));
      }
      if (this.state.editingLinearElement) if (!t.boxSelection.hasOccurred && ((y = (v = t.hit) == null ? void 0 : v.element) == null ? void 0 : y.id) !== this.state.editingLinearElement.elementId) this.actionManager.executeAction(la);
      else {
        let A = ee.handlePointerUp(n, this.state.editingLinearElement, this.state, this.scene);
        A !== this.state.editingLinearElement && this.setState({ editingLinearElement: A, suggestedBindings: [] });
      }
      else if (this.state.selectedLinearElement) {
        if (this.state.selectedLinearElement.elbowed) {
          let A = ee.getElement(this.state.selectedLinearElement.elementId, this.scene.getNonDeletedElementsMap());
          A && G(A, {}, !0);
        }
        if (((x = (w = t.hit) == null ? void 0 : w.element) == null ? void 0 : x.id) !== this.state.selectedLinearElement.elementId) this.scene.getSelectedElements(this.state).length > 1 && this.setState({ selectedLinearElement: null });
        else {
          let A = ee.handlePointerUp(n, this.state.selectedLinearElement, this.state, this.scene), { startBindingElement: D, endBindingElement: R } = A, O = this.scene.getElement(A.elementId);
          Ga(O) && tf(O, D, R, u, this.scene), A !== this.state.selectedLinearElement && this.setState({ selectedLinearElement: { ...A, selectedPointsIndices: null }, suggestedBindings: [] });
        }
      }
      if (this.missingPointerEventCleanupEmitter.clear(), window.removeEventListener("pointermove", t.eventListeners.onMove), window.removeEventListener("pointerup", t.eventListeners.onUp), window.removeEventListener("keydown", t.eventListeners.onKeyDown), window.removeEventListener("keyup", t.eventListeners.onKeyUp), this.state.pendingImageElementId && this.setState({ pendingImageElementId: null }), (E = (S = this.props) == null ? void 0 : S.onPointerUp) == null || E.call(S, o, t), this.onPointerUpEmitter.trigger(this.state.activeTool, t, n), (a == null ? void 0 : a.type) === "freedraw") {
        let A = it(n, this.state), D = a.points, R = A.x - a.x, O = A.y - a.y;
        R === D[0][0] && O === D[0][1] && (O += 1e-4, R += 1e-4);
        let $ = a.simulatePressure ? [] : [...a.pressures, n.pressure];
        G(a, { points: [...D, k(R, O)], pressures: $, lastCommittedPoint: k(R, O) }), this.actionManager.executeAction(la);
        return;
      }
      if (Oe(a)) {
        let A = a;
        try {
          this.initializeImageDimensions(A), this.setState({ selectedElementIds: Ne({ [A.id]: !0 }, this.state) }, () => {
            this.actionManager.executeAction(la);
          });
        } catch (D) {
          console.error(D), this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter((R) => R.id !== A.id)), this.actionManager.executeAction(la);
        }
        return;
      }
      if (me(a)) {
        a.points.length > 1 && this.store.shouldCaptureIncrement();
        let A = it(n, this.state);
        !t.drag.hasOccurred && a && !l ? (G(a, { points: [...a.points, k(A.x - a.x, A.y - a.y)] }), this.setState({ multiElement: a, newElement: a })) : t.drag.hasOccurred && !l && (Wr(this.state) && Ga(a, !1) && _1(a, this.state, A, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()), this.setState({ suggestedBindings: [], startBoundElement: null }), o.locked ? this.setState((D) => ({ newElement: null })) : (sa(this.interactiveCanvas), this.setState((D) => ({ newElement: null, activeTool: _t(this.state, { type: "selection" }), selectedElementIds: Ne({ ...D.selectedElementIds, [a.id]: !0 }, D), selectedLinearElement: new ee(a) }))), this.scene.triggerUpdate());
        return;
      }
      if (J(a)) {
        let A = V0(Je({ fontSize: a.fontSize, fontFamily: a.fontFamily }), a.lineHeight);
        a.width < A && G(a, { autoResize: !0 }), this.resetCursor(), this.handleTextWysiwyg(a, { isExistingElement: !0 });
      }
      if (o.type !== "selection" && a && vo(a)) {
        this.updateScene({ elements: this.scene.getElementsIncludingDeleted().filter((A) => A.id !== a.id), appState: { newElement: null }, captureUpdate: W.NEVER });
        return;
      }
      if (fe(a)) {
        let A = QN(this.scene.getElementsIncludingDeleted(), a, this.scene.getNonDeletedElementsMap());
        this.scene.replaceAllElements(Ss(this.scene.getElementsMapIncludingDeleted(), A, a, this.state));
      }
      if (a && (G(a, b3(a)), this.scene.triggerUpdate()), t.drag.hasOccurred) {
        let A = it(n, this.state);
        if (this.state.selectedLinearElement && this.state.selectedLinearElement.isDragging) {
          let D = this.scene.getElement(this.state.selectedLinearElement.elementId);
          if (D != null && D.frameId) {
            let R = Tn(D, u);
            R && D && (gr(D, R, this.scene.getNonDeletedElementsMap()) || (G(D, { groupIds: [] }), ff([D], this.scene.getNonDeletedElementsMap()), this.scene.triggerUpdate()));
          }
        } else {
          let D = this.getTopLayerFrameAtSceneCoords(A), R = this.scene.getSelectedElements(this.state), O = this.scene.getElementsMapIncludingDeleted(), $ = (F) => {
            if (F.length > 0) {
              for (let N of F) {
                let j = N.groupIds.indexOf(this.state.editingGroupId);
                G(N, { groupIds: N.groupIds.slice(0, j) }, !1);
              }
              O.forEach((N) => {
                N.groupIds.length && ot(O, N.groupIds[N.groupIds.length - 1]).length < 2 && G(N, { groupIds: [] }, !1);
              }), this.setState({ editingGroupId: null });
            }
          };
          if (D && !this.state.selectedElementIds[D.id]) {
            let F = R.filter((N) => N.frameId !== D.id && bu(N, O, this.state));
            this.state.editingGroupId && $(F), O = Ss(O, F, D, this.state);
          } else if (!D && this.state.editingGroupId) {
            let F = R.filter((N) => N.frameId && !bu(N, O, this.state));
            $(F);
          }
          O = bo(O, this.state, this), this.scene.replaceAllElements(O);
        }
      }
      if (i && this.store.shouldCaptureIncrement(), i && vo(i) && this.updateScene({ elements: this.scene.getElementsIncludingDeleted().filter((A) => A.id !== i.id), captureUpdate: W.NEVER }), t.resize.isResizing) {
        let A = bo(this.scene.getElementsIncludingDeleted(), this.state, this), D = this.scene.getSelectedElements(this.state).filter((R) => fe(R));
        for (let R of D) A = h3(A, Cd(this.scene.getElementsIncludingDeleted(), R, this.state, u), R, this);
        this.scene.replaceAllElements(A);
      }
      let f = t.hit.element;
      ((M = this.state.selectedLinearElement) == null ? void 0 : M.elementId) !== (f == null ? void 0 : f.id) && me(f) && this.scene.getSelectedElements(this.state).length === 1 && this.setState({ selectedLinearElement: new ee(f) }), (!r || r && (!f && !s || f && f.id !== r)) && this.finishImageCropping();
      let h = this.lastPointerDownEvent, U = this.lastPointerUpEvent || this.lastPointerMoveEvent;
      if (Fa(this.state) && h && U) {
        if (this.eraserTrail.endPath(), ze(k(h.clientX, h.clientY), k(U.clientX, U.clientY)) === 0) {
          let A = it({ clientX: U.clientX, clientY: U.clientY }, this.state);
          this.getElementsAtPosition(A.x, A.y).forEach((D) => this.elementsPendingErasure.add(D.id));
        }
        this.eraseElements();
        return;
      } else this.elementsPendingErasure.size && this.restoreReadyToEraseElements();
      if (f && !t.drag.hasOccurred && !t.hit.wasAddedToSelection && (!this.state.editingLinearElement || !t.boxSelection.hasOccurred) && (n.shiftKey && !this.state.editingLinearElement ? this.state.selectedElementIds[f.id] ? y7(this.state, f) ? this.setState((A) => {
        let D = { ...A.selectedElementIds };
        for (let R of f.groupIds.flatMap((O) => ot(this.scene.getNonDeletedElements(), O))) delete D[R.id];
        return { selectedGroupIds: { ...A.selectedElementIds, ...f.groupIds.map((R) => ({ [R]: !1 })).reduce((R, O) => ({ ...R, ...O }), {}) }, selectedElementIds: Ne(D, A) };
      }) : (I = this.state.selectedLinearElement) != null && I.isDragging || this.setState((A) => {
        let D = { ...A.selectedElementIds };
        delete D[f.id];
        let R = Ee(this.scene.getNonDeletedElements(), { selectedElementIds: D });
        return { ...pn({ editingGroupId: A.editingGroupId, selectedElementIds: D }, this.scene.getNonDeletedElements(), A, this), selectedLinearElement: R.length === 1 && me(R[0]) ? new ee(R[0]) : A.selectedLinearElement };
      }) : f.frameId && this.state.selectedElementIds[f.frameId] ? this.setState((A) => {
        var R;
        let D = { ...A.selectedElementIds, [f.id]: !0 };
        return delete D[f.frameId], (((R = this.scene.getElement(f.frameId)) == null ? void 0 : R.groupIds) ?? []).flatMap((O) => ot(this.scene.getNonDeletedElements(), O)).forEach((O) => {
          delete D[O.id];
        }), { ...pn({ editingGroupId: A.editingGroupId, selectedElementIds: D }, this.scene.getNonDeletedElements(), A, this), showHyperlinkPopup: f.link || xn(f) ? "info" : !1 };
      }) : this.setState((A) => ({ selectedElementIds: Ne({ ...A.selectedElementIds, [f.id]: !0 }, A) })) : this.setState((A) => {
        var D;
        return { ...pn({ editingGroupId: A.editingGroupId, selectedElementIds: { [f.id]: !0 } }, this.scene.getNonDeletedElements(), A, this), selectedLinearElement: me(f) && ((D = A.selectedLinearElement) == null ? void 0 : D.elementId) !== f.id ? new ee(f) : A.selectedLinearElement };
      })), !(f && te(f)) && !t.drag.hasOccurred && !this.state.isResizing && (f && FL({ x: t.origin.x, y: t.origin.y, element: f, shape: vi(f, this.scene.getNonDeletedElementsMap()), threshold: this.getElementHitThreshold(), frameNameBound: fe(f) ? this.frameNameBoundsCache.get(f) : null }, u) || !f && t.hit.hasHitCommonBoundingBoxOfSelectedElements)) {
        this.state.editingLinearElement ? this.setState({ editingLinearElement: null }) : this.setState({ selectedElementIds: Ne({}, this.state), selectedGroupIds: {}, editingGroupId: null, activeEmbeddable: null }), qe(this.interactiveCanvas, Ye.AUTO);
        return;
      }
      if (!o.locked && o.type !== "freedraw" && a && this.setState((A) => ({ selectedElementIds: Ne({ ...A.selectedElementIds, [a.id]: !0 }, A), showHyperlinkPopup: xn(a) && !a.link ? "editor" : A.showHyperlinkPopup })), (o.type !== "selection" || Nt(this.scene.getNonDeletedElements(), this.state) || !en(this.state.previousSelectedElementIds, this.state.selectedElementIds)) && this.store.shouldCaptureIncrement(), t.drag.hasOccurred || c || d || s) {
        let A = this.scene.getSelectedElements(this.state).filter(me);
        cu(A, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, Wr(this.state), ((T = this.state.selectedLinearElement) == null ? void 0 : T.selectedPointsIndices) ?? [], this.state.zoom);
      }
      if (o.type === "laser") {
        this.laserTrails.endPath();
        return;
      }
      !o.locked && o.type !== "freedraw" ? (sa(this.interactiveCanvas), this.setState({ newElement: null, suggestedBindings: [], activeTool: _t(this.state, { type: "selection" }) })) : this.setState({ newElement: null, suggestedBindings: [] }), f && this.lastPointerUpEvent && this.lastPointerDownEvent && this.lastPointerUpEvent.timeStamp - this.lastPointerDownEvent.timeStamp < 300 && Pe.pointers.size <= 1 && Gn(f) && this.isIframeLikeElementCenter(f, this.lastPointerUpEvent, t.origin.x, t.origin.y) && this.handleEmbeddableCenterClick(f);
    });
  }
  clearSelection(t) {
    this.setState((n) => ({ selectedElementIds: Ne({}, n), activeEmbeddable: null, selectedGroupIds: {}, editingGroupId: n.editingGroupId && t != null && Ks(t, n.editingGroupId) ? n.editingGroupId : null })), this.setState({ selectedElementIds: Ne({}, this.state), activeEmbeddable: null, previousSelectedElementIds: this.state.selectedElementIds });
  }
  getTextWysiwygSnappedToCenterPosition(t, n, a, i) {
    if (i) {
      let r = i.x + i.width / 2, l = i.y + i.height / 2, o = fh(i, a, this.scene.getNonDeletedElementsMap());
      if (o && (r = o.x, l = o.y), Math.hypot(t - r, n - l) < $k) {
        let { x: c, y: d } = fa({ sceneX: r, sceneY: l }, a);
        return { viewportX: c, viewportY: d, elementCenterX: r, elementCenterY: l };
      }
    }
  }
  getCanvasOffsets() {
    var t;
    if ((t = this.excalidrawContainerRef) != null && t.current) {
      let n = this.excalidrawContainerRef.current, { left: a, top: i } = n.getBoundingClientRect();
      return { offsetLeft: a, offsetTop: i };
    }
    return { offsetLeft: 0, offsetTop: 0 };
  }
  async updateLanguage() {
    let t = fU.find((n) => n.code === this.props.langCode) || Lo;
    await h9(t), this.setAppState({});
  }
}, fZ = () => {
  (we.MODE === Cn.TEST || we.DEV) && (window.h = window.h || {}, Object.defineProperties(window.h, { elements: { configurable: !0, get() {
    var e;
    return (e = this.app) == null ? void 0 : e.scene.getElementsIncludingDeleted();
  }, set(e) {
    var t;
    return (t = this.app) == null ? void 0 : t.scene.replaceAllElements(Li(e));
  } }, scene: { configurable: !0, get() {
    var e;
    return (e = this.app) == null ? void 0 : e.scene;
  } } }));
};
fZ();
var hZ = uZ, pZ = () => {
  Array.prototype.at || Object.defineProperty(Array.prototype, "at", { value: function(e) {
    if (e = Math.trunc(e) || 0, e < 0 && (e += this.length), !(e < 0 || e >= this.length)) return this[e];
  }, writable: !0, enumerable: !1, configurable: !0 }), Element.prototype.replaceChildren || (Element.prototype.replaceChildren = function(...e) {
    this.innerHTML = "", this.append(...e);
  });
}, UZ = pZ, mZ = () => p("svg", { viewBox: "0 0 40 40", fill: "none", xmlns: "http://www.w3.org/2000/svg", className: "ExcalidrawLogo-icon", children: p("path", { d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z", fill: "currentColor" }) }), gZ = () => _("svg", { viewBox: "0 0 450 55", xmlns: "http://www.w3.org/2000/svg", fill: "none", className: "ExcalidrawLogo-text", children: [p("path", { d: "M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z", transform: "translate(-144.023 -51.76)" }), p("path", { d: "M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z", transform: "translate(-144.023 -51.76)" }), p("path", { d: "M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z", transform: "translate(-144.023 -51.76)" }), p("path", { d: "m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z", fill: "currentColor", transform: "translate(-144.023 -51.76)" })] }), bZ = ({ style: e, size: t = "small", withText: n }) => _("div", { className: `ExcalidrawLogo is-${t}`, style: e, children: [p(mZ, {}), n && p(gZ, {})] }), NU = ({ icon: e, shortcut: t, children: n }) => {
  let a = Ht();
  return _(le, { children: [p("div", { className: "welcome-screen-menu-item__icon", children: e }), p("div", { className: "welcome-screen-menu-item__text", children: n }), t && !a.editor.isMobile && p("div", { className: "welcome-screen-menu-item__shortcut", children: t })] });
};
NU.displayName = "WelcomeScreenMenuItemContent";
var Ic = ({ onSelect: e, children: t, icon: n, shortcut: a, className: i = "", ...r }) => p("button", { ...r, type: "button", className: `welcome-screen-menu-item ${i}`, onClick: e, children: p(NU, { icon: n, shortcut: a, children: t }) });
Ic.displayName = "WelcomeScreenMenuItem";
var Uy = ({ children: e, href: t, icon: n, shortcut: a, className: i = "", ...r }) => p("a", { ...r, className: `welcome-screen-menu-item ${i}`, href: t, target: "_blank", rel: "noreferrer", children: p(NU, { icon: n, shortcut: a, children: e }) });
Uy.displayName = "WelcomeScreenMenuItemLink";
var Wi = ({ children: e }) => {
  let { WelcomeScreenCenterTunnel: t } = Fn();
  return p(t.In, { children: p("div", { className: "welcome-screen-center", children: e || _(le, { children: [p(OU, {}), p($U, { children: C("welcomeScreen.defaults.center_heading") }), _(zU, { children: [p(BU, {}), p(FU, {})] })] }) }) });
};
Wi.displayName = "Center";
var OU = ({ children: e }) => p("div", { className: "welcome-screen-center__logo excalifont welcome-screen-decor", children: e || p(bZ, { withText: !0 }) });
OU.displayName = "Logo";
var $U = ({ children: e }) => p("div", { className: "welcome-screen-center__heading welcome-screen-decor excalifont", children: e });
$U.displayName = "Heading";
var zU = ({ children: e }) => p("div", { className: "welcome-screen-menu", children: e });
zU.displayName = "Menu";
var FU = () => {
  let e = An();
  return p(Ic, { onSelect: () => e.executeAction(yU), shortcut: "?", icon: q0, children: C("helpDialog.title") });
};
FU.displayName = "MenuItemHelp";
var BU = () => {
  let e = bn(), t = An();
  return e.viewModeEnabled ? null : p(Ic, { onSelect: () => t.executeAction(f0), shortcut: sn("loadScene"), icon: J0, children: C("buttons.load") });
};
BU.displayName = "MenuItemLoadScene";
var my = ({ onSelect: e }) => {
  let { t } = fn();
  return p(Ic, { shortcut: null, onSelect: e, icon: w8, children: t("labels.liveCollaboration") });
};
my.displayName = "MenuItemLiveCollaborationTrigger";
Wi.Logo = OU;
Wi.Heading = $U;
Wi.Menu = zU;
Wi.MenuItem = Ic;
Wi.MenuItemLink = Uy;
Wi.MenuItemHelp = FU;
Wi.MenuItemLoadScene = BU;
Wi.MenuItemLiveCollaborationTrigger = my;
var vZ = ({ children: e }) => {
  let { WelcomeScreenMenuHintTunnel: t } = Fn();
  return p(t.In, { children: _("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu", children: [cC, p("div", { className: "welcome-screen-decor-hint__label", children: e || C("welcomeScreen.defaults.menuHint") })] }) });
};
vZ.displayName = "MenuHint";
var yZ = ({ children: e }) => {
  let { WelcomeScreenToolbarHintTunnel: t } = Fn();
  return p(t.In, { children: _("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar", children: [p("div", { className: "welcome-screen-decor-hint__label", children: e || C("welcomeScreen.defaults.toolbarHint") }), uC] }) });
};
yZ.displayName = "ToolbarHint";
var wZ = ({ children: e }) => {
  let { WelcomeScreenHelpHintTunnel: t } = Fn();
  return p(t.In, { children: _("div", { className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help", children: [p("div", { children: e || C("welcomeScreen.defaults.helpHint") }), dC] }) });
};
wZ.displayName = "HelpHint";
dc((e, t, n) => {
  if (we.DEV || we.MODE === Cn.TEST || window != null && window.DEBUG_FRACTIONAL_INDICES) {
    let a = Li(e.map((i) => ({ ...i })));
    hp(a, { shouldThrow: we.DEV || we.MODE === Cn.TEST, includeBoundTextValidation: !0, reconciliationContext: { localElements: t, remoteElements: n } });
  }
}, 1e3 * 60, { leading: !0, trailing: !1 });
UZ();
var EZ = (e) => {
  var j, z, Y, ie;
  let { onChange: t, initialData: n, excalidrawAPI: a, isCollaborating: i = !1, onPointerUpdate: r, renderTopRightUI: l, langCode: o = Lo.code, viewModeEnabled: c, zenModeEnabled: d, gridModeEnabled: s, libraryReturnUrl: u, theme: f, name: h, renderCustomStats: U, onPaste: m, detectScroll: g = !0, handleKeyboardGlobally: b = !1, onLibraryChange: v, autoFocus: y = !1, generateIdForFile: w, onLinkOpen: x, generateLinkForSelection: S, onPointerDown: E, onPointerUp: M, onScrollChange: I, onDuplicate: T, children: A, validateEmbeddable: D, renderEmbeddable: R, aiEnabled: O, showDeprecatedFonts: $ } = e, F = (j = e.UIOptions) == null ? void 0 : j.canvasActions, N = { ...e.UIOptions, canvasActions: { ...G2.canvasActions, ...F }, tools: { image: ((Y = (z = e.UIOptions) == null ? void 0 : z.tools) == null ? void 0 : Y.image) ?? !0 } };
  return F != null && F.export && (N.canvasActions.export.saveFileToDisk = ((ie = F.export) == null ? void 0 : ie.saveFileToDisk) ?? G2.canvasActions.export.saveFileToDisk), N.canvasActions.toggleTheme === null && typeof f > "u" && (N.canvasActions.toggleTheme = !0), Q(() => {
    (async () => await import("./roundRect-DxA6ocdw.js"))();
    let pe = (ue) => {
      typeof ue.scale == "number" && ue.scale !== 1 && ue.preventDefault();
    };
    return document.addEventListener("touchmove", pe, { passive: !1 }), () => {
      document.removeEventListener("touchmove", pe);
    };
  }, []), p(dX, { store: ma, children: p(pX, { langCode: o, theme: f, children: p(hZ, { onChange: t, initialData: n, excalidrawAPI: a, isCollaborating: i, onPointerUpdate: r, renderTopRightUI: l, langCode: o, viewModeEnabled: c, zenModeEnabled: d, gridModeEnabled: s, libraryReturnUrl: u, theme: f, name: h, renderCustomStats: U, UIOptions: N, onPaste: m, detectScroll: g, handleKeyboardGlobally: b, onLibraryChange: v, autoFocus: y, generateIdForFile: w, onLinkOpen: x, generateLinkForSelection: S, onPointerDown: E, onPointerUp: M, onScrollChange: I, onDuplicate: T, validateEmbeddable: D, renderEmbeddable: R, aiEnabled: O !== !1, showDeprecatedFonts: $, children: A }) }) });
}, xZ = (e, t) => {
  if (e.children !== t.children) return !1;
  let { initialData: n, UIOptions: a = {}, ...i } = e, { initialData: r, UIOptions: l = {}, ...o } = t, c = Object.keys(a), d = Object.keys(l);
  return c.length !== d.length ? !1 : c.every((s) => s === "canvasActions" ? Object.keys(a.canvasActions).every((u) => {
    var f, h, U, m;
    return u === "export" && ((f = a == null ? void 0 : a.canvasActions) != null && f.export) && ((h = l == null ? void 0 : l.canvasActions) != null && h.export) ? a.canvasActions.export.saveFileToDisk === l.canvasActions.export.saveFileToDisk : ((U = a == null ? void 0 : a.canvasActions) == null ? void 0 : U[u]) === ((m = l == null ? void 0 : l.canvasActions) == null ? void 0 : m[u]);
  }) : a[s] === l[s]) && en(i, o);
}, gy = Z.memo(EZ, xZ);
gy.displayName = "Excalidraw";
const SZ = (e) => {
  var a;
  const t = (a = e == null ? void 0 : e.firstElementChild) == null ? void 0 : a.firstElementChild, n = e.getAttribute("viewBox");
  if (n != null) {
    const i = n.split(" ");
    e.setAttribute("width", i[2]), e.setAttribute("height", i[3]);
  }
  t && t.tagName === "style" && t.remove();
};
function kZ({
  elements: e,
  files: t,
  imageContainerRef: n,
  appState: a,
  rootClassName: i = null
}) {
  const [r, l] = oe(null);
  return Q(() => {
    (async () => {
      const c = await Lp({
        appState: a,
        elements: e,
        files: t
      });
      SZ(c), c.setAttribute("width", "100%"), c.setAttribute("height", "100%"), c.setAttribute("display", "block"), l(c);
    })();
  }, [e, t, a]), /* @__PURE__ */ p(
    "div",
    {
      ref: n,
      className: i ?? "",
      dangerouslySetInnerHTML: { __html: (r == null ? void 0 : r.outerHTML) ?? "" }
    }
  );
}
const MZ = () => {
  const [e, t] = H.useState(null), n = H.useCallback(
    (a) => t(a),
    []
  );
  return [e, n];
};
function CZ({
  closeOnClickOutside: e = !1,
  onSave: t,
  initialElements: n,
  initialAppState: a,
  initialFiles: i,
  isShown: r = !1,
  onDelete: l,
  onClose: o
}) {
  const c = re(null), [d, s] = MZ(), [u, f] = oe(!1), [h, U] = oe(n), [m, g] = oe(i);
  Q(() => {
    c.current !== null && c.current.focus();
  }, []), Q(() => {
    var E;
    let x = null;
    const S = (M) => {
      const I = M.target;
      c.current !== null && !c.current.contains(I) && e && l();
    };
    return c.current !== null && (x = (E = c.current) == null ? void 0 : E.parentElement, x !== null && (x == null || x.addEventListener("click", S))), () => {
      x !== null && (x == null || x.removeEventListener("click", S));
    };
  }, [e, l]), _n(() => {
    const x = c.current, S = (E) => {
      E.key === "Escape" && l();
    };
    return x !== null && x.addEventListener("keydown", S), () => {
      x !== null && x.removeEventListener("keydown", S);
    };
  }, [h, m, l]);
  const b = () => {
    if (h.filter((x) => !x.isDeleted).length > 0) {
      const x = d == null ? void 0 : d.getAppState(), S = {
        exportBackground: x == null ? void 0 : x.exportBackground,
        exportScale: x == null ? void 0 : x.exportScale,
        exportWithDarkMode: (x == null ? void 0 : x.theme) === "dark",
        isBindingEnabled: x == null ? void 0 : x.isBindingEnabled,
        isLoading: x == null ? void 0 : x.isLoading,
        name: x == null ? void 0 : x.name,
        theme: x == null ? void 0 : x.theme,
        viewBackgroundColor: x == null ? void 0 : x.viewBackgroundColor,
        viewModeEnabled: x == null ? void 0 : x.viewModeEnabled,
        zenModeEnabled: x == null ? void 0 : x.zenModeEnabled,
        zoom: x == null ? void 0 : x.zoom
      };
      t(h, S, m);
    } else
      l();
  }, v = () => {
    h.filter((x) => !x.isDeleted).length === 0 ? l() : f(!0);
  };
  function y() {
    return /* @__PURE__ */ _(
      vy,
      {
        title: "Discard",
        onClose: () => {
          f(!1);
        },
        closeOnClickOutside: !1,
        children: [
          "Are you sure you want to discard the changes?",
          /* @__PURE__ */ _("div", { className: "ExcalidrawModal__discardModal", children: [
            /* @__PURE__ */ p(
              HU,
              {
                onClick: () => {
                  f(!1), o();
                },
                children: "Discard"
              }
            ),
            " ",
            /* @__PURE__ */ p(
              HU,
              {
                onClick: () => {
                  f(!1);
                },
                children: "Cancel"
              }
            )
          ] })
        ]
      }
    );
  }
  return r === !1 ? null : M0(
    /* @__PURE__ */ p("div", { className: "ExcalidrawModal__overlay", role: "dialog", children: /* @__PURE__ */ p(
      "div",
      {
        className: "ExcalidrawModal__modal",
        ref: c,
        tabIndex: -1,
        children: /* @__PURE__ */ _("div", { className: "ExcalidrawModal__row", children: [
          u && /* @__PURE__ */ p(y, {}),
          /* @__PURE__ */ p(
            gy,
            {
              onChange: (x, S, E) => {
                U(x), g(E);
              },
              excalidrawAPI: s,
              initialData: {
                appState: a || { isLoading: !1 },
                elements: n,
                files: i
              }
            }
          ),
          /* @__PURE__ */ _("div", { className: "ExcalidrawModal__actions", children: [
            /* @__PURE__ */ p("button", { className: "action-button", onClick: v, children: "Discard" }),
            /* @__PURE__ */ p("button", { className: "action-button", onClick: b, children: "Save" })
          ] })
        ] })
      }
    ) }),
    document.body
  );
}
function IZ({
  nodeKey: e,
  data: t
}) {
  const [n] = yy(), [a, i] = oe(
    t === "[]" && n.isEditable()
  ), r = re(null), l = re(null), o = re(null), [c, d, s] = wy(e), [u, f] = oe(!1), h = $e(() => n.isEditable(), []), U = _e(
    (E) => (c && Ey(xy()) && (E.preventDefault(), n.update(() => {
      const M = _c(e);
      if (Ac(M))
        return M.remove(), !0;
    })), !1),
    [n, c, e]
  );
  Q(() => {
    h && (a ? n.setEditable(!1) : n.setEditable(!0));
  }, [a, n, h]), Q(() => Sy(
    n.registerCommand(
      Cy,
      (E) => {
        const M = l.current, I = E.target;
        return u ? !0 : M !== null && M.contains(I) ? (E.shiftKey || s(), d(!c), E.detail > 1 && i(!0), !0) : !1;
      },
      Rf
    ),
    n.registerCommand(
      My,
      U,
      Rf
    ),
    n.registerCommand(
      ky,
      U,
      Rf
    )
  ), [s, n, c, u, U, d]);
  const m = _e(() => (i(!1), n.update(() => {
    const E = _c(e);
    Ac(E) && E.remove();
  })), [n, e]), g = (E, M, I) => {
    if (n.isEditable())
      return n.update(() => {
        const T = _c(e);
        Ac(T) && (E.length > 0 || Object.keys(I).length > 0 ? T.setData(
          JSON.stringify({
            appState: M,
            elements: E,
            files: I
          })
        ) : T.remove());
      });
  }, b = () => {
    f(!0);
  }, v = (E, M) => {
    setTimeout(() => {
      f(!1);
    }, 200), n.update(() => {
      const I = _c(e);
      Ac(I) && (I.setWidth(E), I.setHeight(M));
    });
  }, y = _e(() => {
    i(!0);
  }, []), {
    elements: w = [],
    files: x = {},
    appState: S = {}
  } = $e(() => JSON.parse(t), [t]);
  return /* @__PURE__ */ _(le, { children: [
    /* @__PURE__ */ p(
      CZ,
      {
        initialElements: w,
        initialFiles: x,
        initialAppState: S,
        isShown: a,
        onDelete: m,
        onClose: () => i(!1),
        onSave: (E, M, I) => {
          n.setEditable(!0), g(E, M, I), i(!1);
        },
        closeOnClickOutside: !1
      }
    ),
    w.length > 0 && /* @__PURE__ */ _(
      "button",
      {
        ref: l,
        className: `excalidraw-button ${c ? "selected" : ""}`,
        children: [
          /* @__PURE__ */ p(
            kZ,
            {
              imageContainerRef: r,
              className: "image",
              elements: w,
              files: x,
              appState: S
            }
          ),
          c && /* @__PURE__ */ p(
            "div",
            {
              className: "image-edit-button",
              role: "button",
              tabIndex: 0,
              onMouseDown: (E) => E.preventDefault(),
              onClick: y
            }
          ),
          (c || u) && /* @__PURE__ */ p(
            Ay,
            {
              buttonRef: o,
              showCaption: !0,
              setShowCaption: () => null,
              imageRef: r,
              editor: n,
              onResizeStart: b,
              onResizeEnd: v,
              captionsEnabled: !0
            }
          )
        ]
      }
    )
  ] });
}
const VZ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: IZ
}, Symbol.toStringTag, { value: "Module" }));
export {
  c$ as A,
  O3 as B,
  n$ as C,
  u$ as D,
  i$ as E,
  o$ as F,
  $Z as G,
  RZ as H,
  f$ as I,
  Lb as J,
  VZ as K,
  l$ as L,
  h$ as N,
  s$ as P,
  U$ as R,
  t$ as S,
  r$ as T,
  RO as X,
  d$ as _,
  OO as a,
  YO as b,
  XO as c,
  HO as d,
  b$ as e,
  e$ as f,
  ZO as g,
  jO as h,
  $O as i,
  m$ as j,
  JO as k,
  FO as l,
  VO as m,
  zO as n,
  g$ as o,
  WO as p,
  zZ as q,
  NO as r,
  BO as s,
  PO as t,
  GO as u,
  QO as v,
  qO as w,
  a$ as x,
  KO as y,
  p$ as z
};
